Index: app/src/main/res/layout/activity_planta1.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:background=\"@drawable/bg4\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\"com.example.infinitycrop.ui.MachineControl.planta1\">\r\n\r\n    <RelativeLayout\r\n\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:layout_marginBottom=\"7.3dp\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n\r\n            android:orientation=\"vertical\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/backDashboard\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"40dp\"\r\n                android:layout_marginLeft=\"10dp\"\r\n                android:layout_marginTop=\"30dp\"\r\n                android:src=\"@drawable/icons_arrow_left_green\">\r\n\r\n            </ImageView>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"12dp\"\r\n                android:orientation=\"horizontal\">\r\n\r\n                <TextView\r\n                    android:id=\"@+id/textView\"\r\n                    android:layout_width=\"469dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginLeft=\"10dp\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"clip_horizontal\"\r\n                    android:text=\"Piso 1\"\r\n                    android:textColor=\"@color/white\"\r\n                    android:textSize=\"25dp\"\r\n                    android:textStyle=\"bold\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"bottom|right\"\r\n                    android:orientation=\"vertical\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:orientation=\"vertical\" />\r\n            </LinearLayout>\r\n\r\n            <me.sujanpoudel.wheelview.WheelView\r\n                android:id=\"@+id/wheelview\"\r\n                android:layout_width=\"290dp\"\r\n                android:layout_height=\"203dp\"\r\n                android:layout_gravity=\"center\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\"\r\n                app:wheelAnchorAngle=\"270\"\r\n                app:wheelAnimationDuration=\"500\"\r\n                app:wheelArcBackgroundColor=\"@color/colorSecondaryDark\"\r\n                app:wheelCenterIcon=\"@drawable/logo_without_background\"\r\n                app:wheelDividerStrokeWidth=\"1dp\"\r\n                app:wheelMode=\"ANIMATE_TO_ANCHOR\"\r\n                app:wheelSelectedArcBackgroundColor=\"@color/colorSecondary\"\r\n                app:wheelSelectedTextColor=\"@color/white\"\r\n                app:wheelStartAngle=\"315\"\r\n                app:wheelTextColor=\"@color/white\"\r\n                app:wheelTextSize=\"16sp\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_marginTop=\"10dp\"\r\n                android:orientation=\"horizontal\"\r\n                android:paddingLeft=\"20dp\">\r\n\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_marginLeft=\"1dp\"\r\n                    android:layout_marginRight=\"20dp\"\r\n                    android:background=\"@drawable/rectangle\"\r\n                    android:orientation=\"horizontal\">\r\n\r\n                    <LinearLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:layout_gravity=\"center\"\r\n                        android:layout_marginLeft=\"10dp\"\r\n                        android:layout_marginRight=\"15dp\"\r\n                        android:orientation=\"vertical\">\r\n\r\n                        <LinearLayout\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"40dp\"\r\n\r\n                            android:orientation=\"horizontal\">\r\n\r\n                            <TextView\r\n                                android:id=\"@+id/textViewinfo\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_gravity=\"center\"\r\n                                android:text=\"Pulsa el botón para editar:\"\r\n                                android:textColor=\"#000000\"\r\n                                android:textSize=\"16.7sp\"\r\n                                android:textStyle=\"normal\" />\r\n\r\n                            <Button\r\n                                android:id=\"@+id/btnedit\"\r\n                                android:layout_width=\"match_parent\"\r\n                                android:layout_marginTop=\"2dp\"\r\n                                android:layout_height=\"30dp\"\r\n                                android:background=\"@drawable/btn_scan\"\r\n                                android:layout_marginLeft=\"10dp\"\r\n                                android:text=\"Editar\"\r\n                                android:textColor=\"#FFFFFF\" />\r\n\r\n                        </LinearLayout>\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textView23\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"12dp\"\r\n                            android:text=\"Sección ocupada:\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n\r\n                        <LinearLayout\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:orientation=\"horizontal\">\r\n\r\n                            <CheckBox\r\n                                android:id=\"@+id/checkBoxSi\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_weight=\"1\"\r\n                                android:text=\"Si\" />\r\n\r\n                            <CheckBox\r\n                                android:id=\"@+id/checkBoxNo\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_weight=\"1\"\r\n                                android:checked=\"true\"\r\n                                android:clickable=\"false\"\r\n                                android:text=\"No\" />\r\n                        </LinearLayout>\r\n\r\n\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textView7\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"12dp\"\r\n                            android:text=\"Nombre de la especie:\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n\r\n                        <EditText\r\n                            android:id=\"@+id/editTextNobrep\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:background=\"@android:color/transparent\"\r\n                            android:maxLines=\"1\"\r\n                            android:paddingTop=\"5dp\"\r\n                            android:textColorHint=\"#9E9D9D\"\r\n                            android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                            android:textSize=\"15sp\"\r\n                            android:hint=\"Toca para añadir\"\r\n\r\n                            />\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textedit\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"22.3dp\"\r\n                            android:text=\"Hora de fin\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/editHour\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:background=\"@android:color/transparent\"\r\n                            android:ems=\"10\"\r\n                            android:text=\"Toca para añdir\"\r\n                            android:inputType=\"time\"\r\n                            android:maxLines=\"1\"\r\n                            android:paddingTop=\"5dp\"\r\n                            android:textColorHint=\"#333232\"\r\n                            android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                            android:textSize=\"15sp\" />\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textView11\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"22.3dp\"\r\n                            android:text=\"Fecha de fin\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n                        <TextView\r\n                            android:id=\"@+id/tvDate\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:background=\"@android:color/transparent\"\r\n                            android:ems=\"10\"\r\n                            android:text=\"Toca para añdir\"\r\n                            android:inputType=\"time\"\r\n                            android:editable=\"false\"\r\n                            android:maxLines=\"1\"\r\n                            android:paddingTop=\"5dp\"\r\n                            android:textColorHint=\"#333232\"\r\n                            android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                            android:textSize=\"15sp\" />\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:layout_marginBottom=\"20dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <Button\r\n\r\n                            android:id=\"@+id/btn_save\"\r\n                            android:layout_width=\"151dp\"\r\n                            android:layout_height=\"49dp\"\r\n                            android:layout_gravity=\"center\"\r\n                            android:background=\"@drawable/btn_scan\"\r\n                            android:onClick=\"saveNote\"\r\n                            android:text=\"Guardar cambios\"\r\n                            android:textColor=\"#FFFFFF\"\r\n                            android:visibility=\"gone\">\r\n\r\n                        </Button>\r\n\r\n                        <RelativeLayout\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:paddingTop=\"5dp\">\r\n\r\n                        </RelativeLayout>\r\n\r\n\r\n                    </LinearLayout>\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:id=\"@+id/btn_registMachine\"\r\n                android:layout_width=\"90dp\"\r\n                android:layout_height=\"41dp\"\r\n                android:layout_gravity=\"right\"\r\n                android:layout_marginTop=\"40.3dp\"\r\n                android:layout_marginBottom=\"16.7dp\"\r\n                android:background=\"@drawable/btn_login\"\r\n                android:foregroundGravity=\"right\"\r\n                android:gravity=\"center\"\r\n                android:orientation=\"vertical\"\r\n\r\n                android:visibility=\"gone\">\r\n\r\n\r\n            </LinearLayout>\r\n\r\n\r\n        </LinearLayout>\r\n\r\n        <androidx.constraintlayout.widget.ConstraintLayout\r\n            android:id=\"@+id/constraitR\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            tools:visibility=\"gone\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/imageprevius\"\r\n                android:layout_width=\"400dp\"\r\n                android:layout_height=\"731dp\"\r\n                android:alpha=\"0.4\"\r\n                app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\"\r\n                app:srcCompat=\"@color/black\"\r\n                tools:visibility=\"gone\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/txtInfoD\"\r\n                android:layout_width=\"264dp\"\r\n                android:layout_height=\"81dp\"\r\n                android:background=\"@color/white\"\r\n                android:paddingTop=\"10dp\"\r\n                android:text=\"Toca una casilla para visualizar los datos\"\r\n                android:textAlignment=\"center\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"20sp\"\r\n                app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"@+id/imageprevius\"\r\n                tools:visibility=\"gone\" />\r\n        </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n\r\n    </RelativeLayout>\r\n\r\n\r\n</ScrollView>\r\n\r\n\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_planta1.xml	(revision 20efcc6a82f57e2d6e00bfef130fc7837cadecbf)
+++ app/src/main/res/layout/activity_planta1.xml	(date 1611144863341)
@@ -204,7 +204,7 @@
                             android:layout_width="wrap_content"
                             android:layout_height="wrap_content"
                             android:layout_marginTop="22.3dp"
-                            android:text="Hora de fin"
+                            android:text="Programar una alarma"
                             android:textColor="#9E9D9D" />
 
                         <TextView
@@ -213,8 +213,7 @@
                             android:layout_height="wrap_content"
                             android:background="@android:color/transparent"
                             android:ems="10"
-                            android:text="Toca para añdir"
-                            android:inputType="time"
+                            android:text="Toca para añadir"
                             android:maxLines="1"
                             android:paddingTop="5dp"
                             android:textColorHint="#333232"
@@ -232,22 +231,21 @@
                             android:layout_width="wrap_content"
                             android:layout_height="wrap_content"
                             android:layout_marginTop="22.3dp"
-                            android:text="Fecha de fin"
+                            android:text="Ubicación de la planta"
                             android:textColor="#9E9D9D" />
                         <TextView
-                            android:id="@+id/tvDate"
+                            android:id="@+id/txtStation"
                             android:layout_width="match_parent"
                             android:layout_height="wrap_content"
                             android:background="@android:color/transparent"
                             android:ems="10"
-                            android:text="Toca para añdir"
-                            android:inputType="time"
+                            android:text="Esta planta se encuentra en la estación número: "
                             android:editable="false"
                             android:maxLines="1"
                             android:paddingTop="5dp"
                             android:textColorHint="#333232"
                             android:textCursorDrawable="@drawable/cursor_color"
-                            android:textSize="15sp" />
+                            android:textSize="13sp" />
 
                         <View
                             android:layout_width="match_parent"
Index: app/src/main/res/layout/fragment_profile_foro.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.Foro.main.Profile.ProfileForoFragment\">\r\n\r\n    <!-- TODO: Update blank fragment layout -->\r\n    <TextView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:gravity=\"center\"\r\n        android:text=\"profile\" />\r\n\r\n</FrameLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/fragment_profile_foro.xml	(revision 20efcc6a82f57e2d6e00bfef130fc7837cadecbf)
+++ app/src/main/res/layout/fragment_profile_foro.xml	(date 1611145216058)
@@ -1,15 +1,144 @@
 <?xml version="1.0" encoding="utf-8"?>
-<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:tools="http://schemas.android.com/tools"
+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
+
     android:layout_width="match_parent"
     android:layout_height="match_parent"
-    tools:context=".ui.Foro.main.Profile.ProfileForoFragment">
+    android:background="#EFE9E9"
+    android:orientation="vertical">
+
+    <RelativeLayout
+        android:layout_width="match_parent"
+        android:layout_height="405dp">
 
-    <!-- TODO: Update blank fragment layout -->
-    <TextView
-        android:layout_width="match_parent"
-        android:layout_height="match_parent"
-        android:gravity="center"
-        android:text="profile" />
+        <LinearLayout
+            android:layout_width="match_parent"
+            android:layout_height="350dp"
+            android:background="@color/colorSecondary"
+            android:orientation="vertical">
+
+            <ImageView
+                android:layout_width="150dp"
+                android:layout_height="150dp"
+                android:layout_gravity="center_horizontal"
+                android:layout_marginTop="45dp"
+                android:src="@drawable/rectangle" />
+
+            <TextView
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:layout_gravity="center_horizontal"
+                android:layout_marginTop="10dp"
+                android:text="Angle Triangle"
+                android:textColor="#fff"
+                android:textSize="21sp"
+                android:textStyle="bold" />
+        </LinearLayout>
+
+        <androidx.cardview.widget.CardView
+            android:layout_width="400dp"
+            android:layout_height="120dp"
+            android:layout_centerHorizontal="true"
+            android:layout_marginTop="275dp">
+
+            <LinearLayout
+                android:layout_width="match_parent"
+                android:layout_height="match_parent"
+                android:orientation="horizontal"
+                android:weightSum="2">
+
+                <LinearLayout
+                    android:layout_width="0dp"
+                    android:layout_height="match_parent"
+                    android:layout_weight="1"
+                    android:gravity="center"
+                    android:orientation="vertical">
+
+                    <TextView
+                        android:layout_width="wrap_content"
+                        android:layout_height="wrap_content"
+                        android:text="Posts"
+                        android:textSize="20sp" />
+
+                    <TextView
+                        android:layout_width="wrap_content"
+                        android:layout_height="wrap_content"
+                        android:paddingTop="10dp"
+                        android:text="125"
+                        android:textColor="@color/green"
+                        android:textSize="20sp"
+                        android:textStyle="bold" />
+                </LinearLayout>
+
+                <LinearLayout
+                    android:layout_width="0dp"
+                    android:layout_height="match_parent"
+                    android:layout_weight="1"
+                    android:gravity="center"
+                    android:orientation="vertical"
+                    android:visibility="gone">
+
+                    <TextView
+                        android:layout_width="wrap_content"
+                        android:layout_height="wrap_content"
+                        android:text="Followers"
+                        android:textSize="20sp"
+                        android:visibility="gone" />
+
+                    <TextView
+                        android:layout_width="wrap_content"
+                        android:layout_height="wrap_content"
+                        android:paddingTop="10dp"
+                        android:text="1205"
+                        android:textColor="@color/green"
+                        android:textSize="20sp"
+                        android:textStyle="bold"
+                        android:visibility="gone" />
+                </LinearLayout>
+
+                <LinearLayout
+                    android:layout_width="0dp"
+                    android:layout_height="match_parent"
+                    android:layout_weight="1"
+                    android:gravity="center"
+                    android:orientation="vertical">
+
+                    <TextView
+                        android:layout_width="wrap_content"
+                        android:layout_height="wrap_content"
+                        android:text="Following"
+                        android:textSize="20sp" />
+
+                    <TextView
+                        android:layout_width="wrap_content"
+                        android:layout_height="wrap_content"
+                        android:paddingTop="10dp"
+                        android:text="360"
+                        android:textColor="@color/green"
+                        android:textSize="20sp"
+                        android:textStyle="bold" />
+                </LinearLayout>
+            </LinearLayout>
+        </androidx.cardview.widget.CardView>
+    </RelativeLayout>
+
+    <LinearLayout
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:layout_gravity="center"
+        android:layout_marginLeft="20dp"
+        android:layout_marginRight="20dp"
+        android:layout_marginTop="45dp"
+        android:orientation="vertical">
+
+        <TextView
+            android:id="@+id/textView35"
+            android:layout_width="379dp"
+            android:layout_height="100dp"
+            android:background="@color/white"
+            android:hint="Descripción:"
+            android:textSize="20sp"
+            android:padding="10dp"
+          />
+    </LinearLayout>
 
-</FrameLayout>
\ No newline at end of file
+</LinearLayout>
\ No newline at end of file
Index: app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.infinitycrop.ui.list_machine;\r\n\r\nimport android.content.Intent;\r\nimport android.media.Image;\r\nimport android.os.Bundle;\r\nimport android.os.Parcelable;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.ItemTouchHelper;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.logmail.RegisterActivity;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerAdapter;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\nimport com.google.android.material.bottomsheet.BottomSheetDialog;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.Query;\r\n\r\nimport java.text.BreakIterator;\r\nimport java.util.Map;\r\n\r\npublic class MainActivityMachineList extends AppCompatActivity {\r\n    private FirebaseFirestore firebaseFirestore;\r\n    private RecyclerView mFirestoreList;\r\n    private Adapter adapter;\r\n    private FirebaseAuth firebaseAuth;\r\n    Button addBtn;//boton añadir nueva maquina\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_list_machines);\r\n        firebaseFirestore=FirebaseFirestore.getInstance();\r\n        mFirestoreList=findViewById(R.id.firestore_list);\r\n        firebaseAuth=FirebaseAuth.getInstance();\r\n        String uid=firebaseAuth.getUid();\r\n        //Query\r\n        Query query=firebaseFirestore\r\n                .collection(\"Machine\")\r\n               .whereEqualTo(\"userUID\", uid)\r\n                .orderBy(\"priority\",Query.Direction.ASCENDING);\r\n        //RecyclerView\r\n        FirestoreRecyclerOptions<MachineModel> options=new FirestoreRecyclerOptions.Builder<MachineModel>()\r\n                .setQuery(query, MachineModel.class)\r\n                .build();\r\n        //View Holder\r\n        adapter= new Adapter(options);\r\n        mFirestoreList.setHasFixedSize(true);\r\n        mFirestoreList.setLayoutManager(new LinearLayoutManager(this));\r\n        mFirestoreList.setAdapter(adapter);\r\n\r\n        new ItemTouchHelper(new ItemTouchHelper.SimpleCallback(0,\r\n                ItemTouchHelper.LEFT | ItemTouchHelper.RIGHT) {\r\n            @Override\r\n            public boolean onMove(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder, RecyclerView.ViewHolder target) {\r\n                return false;\r\n            }\r\n            @Override\r\n            public void onSwiped(RecyclerView.ViewHolder viewHolder, int direction) {\r\n                Toast.makeText(getApplicationContext(), \"Maquina eliminada con éxito\", Toast.LENGTH_SHORT).show();\r\n                adapter.deleteItem(viewHolder.getAdapterPosition());\r\n            }\r\n        }).attachToRecyclerView(mFirestoreList);\r\n\r\n        adapter.setOnItemClickListener(new Adapter.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(DocumentSnapshot documentSnapshot, int position) {\r\n                //documentSnapshot.getData() -> devuelve all que tiene la maquina en firebase\r\n                MachineModel machine = documentSnapshot.toObject(MachineModel.class);\r\n                final String id = documentSnapshot.getId();\r\n                final String path = documentSnapshot.getString(\"description\"); //devuelve ruta en firebase Machine\\madara\r\n                final String name = documentSnapshot.getString(\"name\");\r\n                final String identif = documentSnapshot.getId();\r\n                //botttom sheet\r\n                final BottomSheetDialog bottomSheetDialog=new BottomSheetDialog(MainActivityMachineList.this);\r\n                bottomSheetDialog.setContentView(R.layout.machine_bottom_sheet);\r\n                Button btnenter=bottomSheetDialog.findViewById(R.id.enterMachineButton);\r\n                Button btnmodify=bottomSheetDialog.findViewById(R.id.madifyMachineButton);\r\n                Button btncancel=bottomSheetDialog.findViewById(R.id.cancelMachineButton);\r\n                btnenter.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        Intent intent = new Intent(getBaseContext(), MainActivity.class);\r\n                        intent.putExtra(\"machine\", id);\r\n                        intent.putExtra(\"description\", path);\r\n                        startActivity(intent);\r\n                    }\r\n                });\r\n                btnmodify.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        //poner aca Intent para acceder al layout de modificar maquina\r\n                        //hay que pasarle un intent con extra como he hecho en el onClick de arriba\r\n                        //lo que necesitas para modificar es la variable id\r\n                        //encuentras en firebase la maquina con el id y haces la magia de modificar etc..\r\n                        //lo de maquina a favoritos es facil , si es 1 es favoirto si es 2 no lo es.\r\n                        //ejemplo\r\n                        Intent intent = new Intent(getBaseContext(), ModifyMachine.class);\r\n                        intent.putExtra(\"maq\", name);\r\n                        intent.putExtra(\"identificator\", identif);\r\n                        startActivity(intent);\r\n                    }\r\n                });\r\n                btncancel.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        bottomSheetDialog.cancel();\r\n                    }\r\n                });\r\n                bottomSheetDialog.show();\r\n\r\n\r\n            }\r\n        });\r\n\r\n        FloatingActionButton addbtn = (FloatingActionButton) findViewById(R.id.button_add_machine);\r\n        addbtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent (getApplicationContext(), AddMachine.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        adapter.stopListening();\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        adapter.startListening();\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(revision 20efcc6a82f57e2d6e00bfef130fc7837cadecbf)
+++ app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(date 1611163185357)
@@ -78,7 +78,7 @@
         adapter.setOnItemClickListener(new Adapter.OnItemClickListener() {
             @Override
             public void onItemClick(DocumentSnapshot documentSnapshot, int position) {
-                //documentSnapshot.getData() -> devuelve all que tiene la maquina en firebase
+                /*documentSnapshot.getData();*/ //-> devuelve all que tiene la maquina en firebase
                 MachineModel machine = documentSnapshot.toObject(MachineModel.class);
                 final String id = documentSnapshot.getId();
                 final String path = documentSnapshot.getString("description"); //devuelve ruta en firebase Machine\madara
Index: app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.infinitycrop.ui.MachineControl;\r\n\r\nimport android.app.AlarmManager;\r\nimport android.app.DatePickerDialog;\r\nimport android.app.FragmentTransaction;\r\nimport android.app.TimePickerDialog;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.graphics.drawable.ColorDrawable;\r\nimport android.os.Bundle;\r\nimport android.os.CountDownTimer;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.CheckBox;\r\nimport android.widget.DatePicker;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.TimePicker;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.constraintlayout.widget.ConstraintLayout;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.dashboard.DashboardFragment;\r\nimport com.example.infinitycrop.ui.dashboard.GeneralFragment;\r\nimport com.example.infinitycrop.ui.logmail.LoginActivity;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.google.firebase.firestore.ListenerRegistration;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\nimport java.text.ParseException;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.Calendar;\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\nimport kotlin.Unit;\r\nimport kotlin.jvm.functions.Function1;\r\nimport me.sujanpoudel.wheelview.WheelView;\r\n\r\npublic class planta1 extends AppCompatActivity {\r\n    private List<String> nombres;\r\n    private List<String> estado;\r\n    //Aviso al entrar\r\n    private ConstraintLayout fondoR;\r\n    private ImageView imgr,goBack;\r\n    private TextView textR;\r\n    //\r\n\r\n    private int piso = 1;\r\n    String one = String.valueOf(piso);\r\n    private int stated = 1;\r\n    String state = String.valueOf(stated);\r\n\r\n\r\n    private CheckBox checkYes, checkNo;\r\n    private Button editInfo, saveChanges;\r\n    private TextView mDisplayDate,mDisplayHour,infoTitle;\r\n    private EditText nameplant;\r\n    private FirebaseFirestore db;\r\n\r\n    private String idDocument;\r\n    private String id;\r\n\r\n\r\n\r\n    //Reloj\r\n    int t2Hour, t2Minute;\r\n    private DatePickerDialog.OnDateSetListener mDateSetListener;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_planta1);\r\n\r\n        //Aviso al entrar\r\n        fondoR = findViewById(R.id.constraitR);\r\n        imgr = findViewById(R.id.imageprevius);\r\n        textR = findViewById(R.id.txtInfoD);\r\n        CountDownTimer countDownTimer = new CountDownTimer(3000, 1000) {//Se pone la cuenta atras para que no se superponga con la animación\r\n            public void onTick(long millisUntilFinished) {\r\n\r\n            }\r\n\r\n            public void onFinish() {\r\n\r\n                fondoR.setVisibility(View.GONE);\r\n                imgr.setVisibility(View.GONE);\r\n                textR.setVisibility(View.GONE);\r\n\r\n            }\r\n        }.start();\r\n        //boton para volver\r\n        goBack= findViewById(R.id.backDashboard);\r\n        goBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n               finish();\r\n            }\r\n        });\r\n\r\n        db=FirebaseFirestore.getInstance();\r\n        //bungle get extra\r\n        Bundle extras = getIntent().getExtras();\r\n        id = extras.getString(\"idMachine\");\r\n\r\n        //arrays\r\n        nombres=new ArrayList<>();\r\n        estado=new ArrayList<>();\r\n        //firestore\r\n        db.collection(\"Mediciones planta 1\").document(id).collection(\"DatosPiso\")\r\n                .addSnapshotListener(new EventListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable QuerySnapshot snapshots,\r\n                                        @Nullable FirebaseFirestoreException e) {\r\n                        if (e != null) {\r\n                            return;\r\n                        }\r\n                        nombres.clear();\r\n                        for (DocumentSnapshot doc : snapshots) {\r\n                                nombres.add(doc.getString(\"name\"));\r\n                                estado.add(doc.getId());\r\n                        }\r\n                       /* Toast.makeText(getApplicationContext(),nombres.toString(), Toast.LENGTH_LONG).show();*/\r\n\r\n\r\n\r\n                        final WheelView wheelView = (WheelView) findViewById(R.id.wheelview);\r\n                        wheelView.setTitles(nombres);\r\n\r\n                        wheelView.setSelectListener(new Function1<Integer, Unit>() {\r\n                            @Override\r\n                            public Unit invoke(Integer integer) {\r\n                                showToast(integer);\r\n                                return Unit.INSTANCE;\r\n                            }\r\n                            private final  void showToast(Integer index) {\r\n                               // Toast.makeText(planta1.this,\"\"+wheelView.getTitles().get(index),Toast.LENGTH_SHORT).show();\r\n                                idDocument=estado.get(index);\r\n                                Toast.makeText(planta1.this,\"\"+idDocument,Toast.LENGTH_SHORT).show();\r\n                                itenInfo(idDocument);\r\n\r\n\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                });\r\n\r\n\r\n\r\n\r\n\r\n        //Nombre de la planta\r\n        nameplant = (EditText)findViewById(R.id.editTextNobrep);\r\n        nameplant.setEnabled(false);\r\n        //Checkboxes\r\n        checkYes=(CheckBox)findViewById(R.id.checkBoxSi);\r\n        checkYes.setKeyListener(null);\r\n        checkNo=(CheckBox)findViewById(R.id.checkBoxNo);\r\n        checkNo.setKeyListener(null);\r\n\r\n        //Boton guardar cambios\r\n        saveChanges = (Button)findViewById(R.id.btn_save);\r\n        saveChanges.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                saveNote(v);\r\n                editInfo.setVisibility(View.VISIBLE);\r\n                saveChanges.setVisibility(View.GONE);\r\n                mDisplayDate.setEnabled(false);\r\n                mDisplayHour.setEnabled(false);\r\n                nameplant.setEnabled(false);\r\n                infoTitle.setText(\"Pulsa el botón para editar:\");\r\n\r\n\r\n\r\n\r\n            }\r\n        });\r\n\r\n        //Boton editar informacion\r\n        editInfo = (Button) findViewById(R.id.btnedit);\r\n        editInfo.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                saveChanges.setVisibility(View.VISIBLE);\r\n                editInfo.setVisibility(View.GONE);\r\n                mDisplayDate.setEnabled(true);\r\n                mDisplayHour.setEnabled(true);\r\n                nameplant.setEnabled(true);\r\n                infoTitle.setText(\"Información completa:\");\r\n\r\n\r\n            }\r\n        });\r\n        infoTitle = (TextView) findViewById(R.id.textViewinfo);\r\n        //HORA\r\n        mDisplayHour =(TextView) findViewById(R.id.editHour);\r\n        mDisplayHour.setEnabled(false);\r\n        mDisplayHour.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                TimePickerDialog timePickerDialog = new TimePickerDialog(\r\n                        planta1.this, android.R.style.Theme_Holo_Light_Dialog_MinWidth, new TimePickerDialog.OnTimeSetListener() {\r\n                    @Override\r\n                    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {\r\n                        Calendar c = Calendar.getInstance();\r\n                        t2Hour = hourOfDay;\r\n                        t2Minute = minute;\r\n                        String time = t2Hour + \":\" + t2Minute;\r\n                        SimpleDateFormat f24Hours = new SimpleDateFormat(\"HH:mm\");\r\n                        try {\r\n                            Date date = f24Hours.parse(time);\r\n                            SimpleDateFormat f12Hours = new SimpleDateFormat(\"hh:mm aa\");\r\n                            mDisplayHour.setText(f12Hours.format(date));\r\n                        } catch (ParseException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                        c.set(Calendar.HOUR_OF_DAY,hourOfDay);\r\n                        c.set(Calendar.MINUTE,minute);\r\n                        c.set(Calendar.SECOND,0);\r\n                        startAlarm(c);\r\n                    }\r\n                },12,0,false\r\n                );\r\n                timePickerDialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n                timePickerDialog.updateTime(t2Hour,t2Minute);\r\n                timePickerDialog.show();\r\n\r\n            }\r\n        });\r\n\r\n\r\n\r\n        //CALENDARIO\r\n        mDisplayDate = (TextView) findViewById(R.id.tvDate);\r\n        mDisplayDate.setEnabled(false);\r\n        mDisplayDate.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Calendar cal = Calendar.getInstance();\r\n                int year = cal.get(Calendar.YEAR);\r\n                int month = cal.get(Calendar.MONTH);\r\n                int day = cal.get(Calendar.DAY_OF_MONTH);\r\n\r\n                DatePickerDialog dialog = new DatePickerDialog(planta1.this,android.R.style.Theme_Holo_Dialog_MinWidth, mDateSetListener,year,month,day);\r\n                dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n                dialog.show();\r\n            }\r\n\r\n        });\r\n        mDateSetListener = new DatePickerDialog.OnDateSetListener() {\r\n            @Override\r\n            public void onDateSet(DatePicker datePicker, int year, int month, int day) {\r\n                month = month+1;\r\n                String date = day +\"/\" + month +\"/\"+ year;\r\n                mDisplayDate.setText(date);\r\n            }\r\n        };\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n\r\n\r\n    }\r\n    private void startAlarm(Calendar c){\r\n        AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);\r\n\r\n    }\r\n    public void saveNote(View v){\r\n        String cola = idDocument;\r\n        String nombre = nameplant.getText().toString();\r\n        String hora = mDisplayHour.getText().toString();\r\n        String dia = mDisplayDate.getText().toString();\r\n        String piso = one;\r\n\r\n        Map<String, Object> note = new HashMap<>();\r\n        note.put(\"name\",nombre);\r\n        note.put(\"fecha\",dia);\r\n        note.put(\"hora\",hora);\r\n        note.put(\"piso\",piso);\r\n\r\n        db.collection(\"Mediciones planta 1\").document(id).collection(\"DatosPiso\").document(cola).update(note).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n            @Override\r\n            public void onSuccess(Void aVoid) {\r\n            Toast.makeText(planta1.this,\"va bien\",Toast.LENGTH_SHORT).show();\r\n            }\r\n        }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Toast.makeText(planta1.this,\"va mal\",Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    private void itenInfo(String uiDoc){\r\n        //hacer consulta a ese documento con uiDOc y sacar su info\r\n        //luego set Text a all\r\n        db.collection(\"Mediciones planta 1\").document(id).collection(\"DatosPiso\").document(uiDoc).get()\r\n                .addOnSuccessListener(new OnSuccessListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onSuccess(DocumentSnapshot documentSnapshot) {\r\n                        if(documentSnapshot.exists()){\r\n                            String nombre = documentSnapshot.getString(\"name\");\r\n                            String fecha = documentSnapshot.getString(\"fecha\");\r\n                            String hora = documentSnapshot.getString(\"hora\");\r\n\r\n                           // Map<String,Object> note = documentSnapshot.getData();\r\n                            nameplant.setText(nombre);\r\n                            mDisplayHour.setText(hora);\r\n                            mDisplayDate.setText(fecha);\r\n\r\n                        }else{\r\n                            Toast.makeText(planta1.this,\"Document does exist\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }\r\n                }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Toast.makeText(planta1.this,\"va mal\",Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n                /*.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable DocumentSnapshot value, @Nullable FirebaseFirestoreException error) {\r\n\r\n                    }\r\n                });*/\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java	(revision 20efcc6a82f57e2d6e00bfef130fc7837cadecbf)
+++ app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java	(date 1611144863364)
@@ -8,8 +8,10 @@
 import android.content.Intent;
 import android.graphics.Color;
 import android.graphics.drawable.ColorDrawable;
+import android.os.Build;
 import android.os.Bundle;
 import android.os.CountDownTimer;
+import android.provider.AlarmClock;
 import android.view.View;
 import android.widget.Button;
 import android.widget.CheckBox;
@@ -23,6 +25,7 @@
 
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
+import androidx.annotation.RequiresApi;
 import androidx.appcompat.app.AppCompatActivity;
 import androidx.constraintlayout.widget.ConstraintLayout;
 import androidx.fragment.app.Fragment;
@@ -41,14 +44,18 @@
 import com.google.firebase.firestore.ListenerRegistration;
 import com.google.firebase.firestore.QuerySnapshot;
 
+import java.sql.Time;
 import java.text.ParseException;
 import java.text.SimpleDateFormat;
+import java.time.LocalDate;
+import java.time.LocalTime;
 import java.util.ArrayList;
 import java.util.Arrays;
 import java.util.Calendar;
 import java.util.Date;
 import java.util.HashMap;
 import java.util.List;
+import java.util.Locale;
 import java.util.Map;
 
 import kotlin.Unit;
@@ -72,7 +79,7 @@
 
     private CheckBox checkYes, checkNo;
     private Button editInfo, saveChanges;
-    private TextView mDisplayDate,mDisplayHour,infoTitle;
+    private TextView mDisplayHour,infoTitle,mStation;
     private EditText nameplant;
     private FirebaseFirestore db;
 
@@ -137,6 +144,8 @@
                                 nombres.add(doc.getString("name"));
                                 estado.add(doc.getId());
                         }
+
+
                        /* Toast.makeText(getApplicationContext(),nombres.toString(), Toast.LENGTH_LONG).show();*/
 
 
@@ -170,6 +179,9 @@
         //Nombre de la planta
         nameplant = (EditText)findViewById(R.id.editTextNobrep);
         nameplant.setEnabled(false);
+        mDisplayHour=(TextView) findViewById(R.id.editHour);
+        mDisplayHour.setEnabled(false);
+        mStation=(TextView)findViewById(R.id.txtStation);
         //Checkboxes
         checkYes=(CheckBox)findViewById(R.id.checkBoxSi);
         checkYes.setKeyListener(null);
@@ -184,7 +196,6 @@
                 saveNote(v);
                 editInfo.setVisibility(View.VISIBLE);
                 saveChanges.setVisibility(View.GONE);
-                mDisplayDate.setEnabled(false);
                 mDisplayHour.setEnabled(false);
                 nameplant.setEnabled(false);
                 infoTitle.setText("Pulsa el botón para editar:");
@@ -203,54 +214,32 @@
 
                 saveChanges.setVisibility(View.VISIBLE);
                 editInfo.setVisibility(View.GONE);
-                mDisplayDate.setEnabled(true);
                 mDisplayHour.setEnabled(true);
                 nameplant.setEnabled(true);
                 infoTitle.setText("Información completa:");
 
 
+
             }
         });
         infoTitle = (TextView) findViewById(R.id.textViewinfo);
         //HORA
-        mDisplayHour =(TextView) findViewById(R.id.editHour);
-        mDisplayHour.setEnabled(false);
+
         mDisplayHour.setOnClickListener(new View.OnClickListener() {
             @Override
             public void onClick(View v) {
-                TimePickerDialog timePickerDialog = new TimePickerDialog(
-                        planta1.this, android.R.style.Theme_Holo_Light_Dialog_MinWidth, new TimePickerDialog.OnTimeSetListener() {
-                    @Override
-                    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
-                        Calendar c = Calendar.getInstance();
-                        t2Hour = hourOfDay;
-                        t2Minute = minute;
-                        String time = t2Hour + ":" + t2Minute;
-                        SimpleDateFormat f24Hours = new SimpleDateFormat("HH:mm");
-                        try {
-                            Date date = f24Hours.parse(time);
-                            SimpleDateFormat f12Hours = new SimpleDateFormat("hh:mm aa");
-                            mDisplayHour.setText(f12Hours.format(date));
-                        } catch (ParseException e) {
-                            e.printStackTrace();
-                        }
-                        c.set(Calendar.HOUR_OF_DAY,hourOfDay);
-                        c.set(Calendar.MINUTE,minute);
-                        c.set(Calendar.SECOND,0);
-                        startAlarm(c);
-                    }
-                },12,0,false
-                );
-                timePickerDialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));
-                timePickerDialog.updateTime(t2Hour,t2Minute);
-                timePickerDialog.show();
+                Intent intent = new Intent(AlarmClock.ACTION_SET_ALARM);
+                if(intent.resolveActivity(getPackageManager())!=null){
+                    startActivity(intent);
+                }
 
-            }
+        }
         });
 
 
 
-        //CALENDARIO
+
+        /*//CALENDARIO
         mDisplayDate = (TextView) findViewById(R.id.tvDate);
         mDisplayDate.setEnabled(false);
         mDisplayDate.setOnClickListener(new View.OnClickListener() {
@@ -275,7 +264,7 @@
                 mDisplayDate.setText(date);
             }
         };
-
+            */
     }
 
     @Override
@@ -284,21 +273,25 @@
 
 
     }
-    private void startAlarm(Calendar c){
-        AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
-
-    }
+    /*public void establecerAlarma(String mensaje,int dias,int hora,int minutos){
+        Intent intent = new Intent(AlarmClock.ACTION_SET_ALARM)
+                .putExtra(AlarmClock.EXTRA_DAYS,dias)
+                .putExtra(AlarmClock.EXTRA_MESSAGE,mensaje)
+                .putExtra(AlarmClock.EXTRA_HOUR,hora)
+                .putExtra(AlarmClock.EXTRA_MINUTES,minutos);
+        if(intent.resolveActivity(getPackageManager())!=null){
+            startActivity(intent);
+        }
+    }*/
+
     public void saveNote(View v){
         String cola = idDocument;
         String nombre = nameplant.getText().toString();
-        String hora = mDisplayHour.getText().toString();
-        String dia = mDisplayDate.getText().toString();
+
         String piso = one;
 
         Map<String, Object> note = new HashMap<>();
         note.put("name",nombre);
-        note.put("fecha",dia);
-        note.put("hora",hora);
         note.put("piso",piso);
 
         db.collection("Mediciones planta 1").document(id).collection("DatosPiso").document(cola).update(note).addOnSuccessListener(new OnSuccessListener<Void>() {
@@ -325,13 +318,26 @@
                     public void onSuccess(DocumentSnapshot documentSnapshot) {
                         if(documentSnapshot.exists()){
                             String nombre = documentSnapshot.getString("name");
-                            String fecha = documentSnapshot.getString("fecha");
-                            String hora = documentSnapshot.getString("hora");
+                            String estacion = documentSnapshot.getString("estacion");
+                            int resultado =documentSnapshot.getLong("estado").intValue();
+                            if(resultado==1){
+                                checkYes.isSelected();
+                                checkYes.setChecked(true);
+                                checkYes.isChecked();
+                                checkNo.setChecked(false);
+                            }else{
+                                checkNo.isSelected();
+                                checkNo.setChecked(true);
+                                checkNo.isChecked();
+                                checkYes.setChecked(false);
+                            }
+
 
                            // Map<String,Object> note = documentSnapshot.getData();
                             nameplant.setText(nombre);
-                            mDisplayHour.setText(hora);
-                            mDisplayDate.setText(fecha);
+                            mStation.setText(estacion);
+
+
 
                         }else{
                             Toast.makeText(planta1.this,"Document does exist",Toast.LENGTH_SHORT).show();
Index: .idea/shelf/Uncommitted_changes_before_Update_at_13_01_2021_1_20_[Default_Changelist]/shelved.patch
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_13_01_2021_1_20_[Default_Changelist]/shelved.patch	(revision 20efcc6a82f57e2d6e00bfef130fc7837cadecbf)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_13_01_2021_1_20_[Default_Changelist]/shelved.patch	(revision 20efcc6a82f57e2d6e00bfef130fc7837cadecbf)
@@ -1,3000 +0,0 @@
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44__Default_Changelist_.xml
-===================================================================
---- .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-+++ .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_28_12_2020_17_44_[Default_Changelist]" date="1609173893621" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44_[Default_Changelist]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 28/12/2020 17:44 [Default Changelist]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44_[Default_Changelist]/shelved.patch
-===================================================================
---- .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-+++ .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-@@ -1,1019 +0,0 @@
--Index: app/src/main/AndroidManifest.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    package=\"com.example.infinitycrop\">\n\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/>\n    <uses-permission android:name=\"android.permission.INTERNET\"/>\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" />\n    <!--Permisos Qr-->\n    <uses-permission android:name=\"android.permission.CAMERA\"/>\n    <uses-feature android:name=\"android.hardware.camera\"></uses-feature>\n    <uses-feature android:name=\"android.hardware.camera.autofocus\"></uses-feature>\n\n    <application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher\"\n        android:theme=\"@style/AppThemeHome\"\n        >\n\n        <activity android:name=\".MainActivity\" android:theme=\"@style/SplashTheme\">\n        </activity>\n\n        <activity android:name=\"com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity\">\n            <intent-filter>\n                <action android:name=\"android.intent.action.MAIN\" />\n                <category android:name=\"android.intent.category.LAUNCHER\" />\n            </intent-filter>\n        </activity>\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\">\n\n        </activity>\n        <activity android:name=\".ui.profile.settings.HelpProfile\">\n\n        </activity>\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\"></activity>\n        <activity android:name=\".ui.list_machine.AddMachine\"></activity>\n        <activity android:name=\".ui.logmail.RegisterActivity\"></activity>\n        <activity android:name=\".ui.logmail.LoginActivity\"></activity>\n        <activity android:name=\".ui.list_machine.CaptureAct\"></activity>\n        <activity android:name=\"com.example.infinitycrop.ui.login.LogActivity\"></activity>\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\"></activity>\n\n\n\n\n        <meta-data android:name=\"com.google.android.geo.API_KEY\"\n            android:value=\"@string/google_maps_key\" />\n\n        <meta-data android:name=\"com.facebook.sdk.ApplicationId\"\n            tools:replace=\"android:value\"\n            android:value=\"@string/facebook_app_id\"/>\n        <meta-data\n            android:name=\"preloaded_fonts\"\n            android:resource=\"@array/preloaded_fonts\" />\n\n\n    </application>\n\n</manifest>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/AndroidManifest.xml	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
--+++ app/src/main/AndroidManifest.xml	(date 1607643785311)
--@@ -2,7 +2,8 @@
-- <manifest xmlns:android="http://schemas.android.com/apk/res/android"
--     xmlns:tools="http://schemas.android.com/tools"
--     package="com.example.infinitycrop">
---
--+    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
--+    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
--     <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
--     <uses-permission android:name="android.permission.INTERNET"/>
--     <uses-permission android:name="com.google.android.things.permission.MANAGE_INPUT_DRIVERS" />
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25__Default_Changelist_.xml
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25__Default_Changelist_.xml	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25__Default_Changelist_.xml	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]" date="1607628338928" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 10/12/2020 20:25 [Default Changelist]" />
---</changelist>
--\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]/shelved.patch
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]/shelved.patch	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]/shelved.patch	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
--@@ -1,729 +0,0 @@
---Index: app/src/main/AndroidManifest.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    package=\"com.example.infinitycrop\">\n\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/>\n    <uses-permission android:name=\"android.permission.INTERNET\"/>\n    <!--Permisos Qr-->\n    <uses-permission android:name=\"android.permission.CAMERA\"/>\n    <uses-feature android:name=\"android.hardware.camera\"></uses-feature>\n    <uses-feature android:name=\"android.hardware.camera.autofocus\"></uses-feature>\n\n    <application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher\"\n        android:theme=\"@style/AppThemeHome\"\n        >\n\n        <activity android:name=\".MainActivity\" android:theme=\"@style/SplashTheme\">\n        </activity>\n\n        <activity android:name=\"com.example.infinitycrop.ui.login.LogActivity\">\n            <intent-filter>\n                <action android:name=\"android.intent.action.MAIN\" />\n                <category android:name=\"android.intent.category.LAUNCHER\" />\n            </intent-filter>\n        </activity>\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\">\n\n        </activity>\n        <activity android:name=\".ui.profile.settings.HelpProfile\">\n\n        </activity>\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\"></activity>\n        <activity android:name=\".ui.list_machine.AddMachine\"></activity>\n        <activity android:name=\".ui.logmail.RegisterActivity\"></activity>\n        <activity android:name=\".ui.logmail.LoginActivity\"></activity>\n        <activity android:name=\".ui.list_machine.CaptureAct\"></activity>\n\n\n\n\n        <meta-data android:name=\"com.google.android.geo.API_KEY\"\n            android:value=\"@string/google_maps_key\" />\n\n        <meta-data android:name=\"com.facebook.sdk.ApplicationId\"\n            tools:replace=\"android:value\"\n            android:value=\"@string/facebook_app_id\"/>\n\n\n    </application>\n\n</manifest>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/AndroidManifest.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
---+++ app/src/main/AndroidManifest.xml	(date 1607539967252)
---@@ -5,6 +5,8 @@
--- 
---     <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
---     <uses-permission android:name="android.permission.INTERNET"/>
---+    <uses-permission android:name="com.google.android.things.permission.MANAGE_INPUT_DRIVERS" />
---+    <uses-permission android:name="com.google.android.things.permission.USE_PERIPHERAL_IO" />
---     <!--Permisos Qr-->
---     <uses-permission android:name="android.permission.CAMERA"/>
---     <uses-feature android:name="android.hardware.camera"></uses-feature>
---Index: app/src/main/res/layout/fragment_graphic.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.graphic.GraphicFragment\">\r\n\r\n    <!-- TODO: Update blank fragment layout -->\r\n    <TextView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_centerInParent=\"true\"\r\n        android:textSize=\"50dp\"\r\n        android:text=\"Graphic fragment\" />\r\n\r\n</RelativeLayout>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/res/layout/fragment_graphic.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
---+++ app/src/main/res/layout/fragment_graphic.xml	(date 1607520842759)
---@@ -1,16 +1,64 @@
--- <?xml version="1.0" encoding="utf-8"?>
----<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
---+<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
---     xmlns:tools="http://schemas.android.com/tools"
---     android:layout_width="match_parent"
---     android:layout_height="match_parent"
---+    xmlns:app="http://schemas.android.com/apk/res-auto"
---+    android:background="#EFE9E9"
---     tools:context=".ui.graphic.GraphicFragment">
--- 
----    <!-- TODO: Update blank fragment layout -->
----    <TextView
----        android:layout_width="match_parent"
---+    <androidx.constraintlayout.widget.ConstraintLayout
---+        android:layout_width="match_parent"
---+        android:layout_height="match_parent">
---+
---+
---+        <RelativeLayout
---+            android:id="@+id/relativeLayout2"
---+            android:layout_width="match_parent"
---+            android:layout_height="wrap_content"
---+            android:layout_marginStart="20dp"
---+            android:layout_marginEnd="20dp"
---+            app:layout_constraintBottom_toTopOf="@+id/image_list"
---+            app:layout_constraintEnd_toEndOf="parent"
---+            app:layout_constraintStart_toStartOf="parent"
---+            app:layout_constraintTop_toTopOf="parent">
---+
---+            <TextView
---+                android:id="@+id/textMode"
---+                android:layout_width="wrap_content"
---+                android:layout_height="wrap_content"
---+                android:text="Lista de fotografías  >"
---+
---+                android:textSize="19sp" />
---+
---+            <!--<ImageView
---+                android:layout_width="62dp"
---+                android:layout_height="62dp"
---+                android:layout_alignParentRight="true"
---+                android:src="@drawable/ic_sun" />-->
---+        </RelativeLayout>
---+
---+        <androidx.recyclerview.widget.RecyclerView
---+            android:id="@+id/image_list"
---+            android:layout_width="match_parent"
---+            android:layout_height="match_parent"
---+            android:layout_marginStart="16dp"
---+            android:layout_marginTop="70dp"
---+            android:layout_marginEnd="16dp"
---+            app:layout_constraintBottom_toBottomOf="parent"
---+            app:layout_constraintEnd_toEndOf="parent"
---+            app:layout_constraintStart_toStartOf="parent"
---+            app:layout_constraintTop_toBottomOf="@+id/constraintLayout3" />
---+    </androidx.constraintlayout.widget.ConstraintLayout>
---+
---+
---+    <com.google.android.material.floatingactionbutton.FloatingActionButton
---+        android:id="@+id/button_add_image"
---+        android:layout_width="wrap_content"
---         android:layout_height="wrap_content"
----        android:layout_centerInParent="true"
----        android:textSize="50dp"
----        android:text="Graphic fragment" />
---+        android:layout_gravity="top|end"
---+        android:layout_margin="16dp"
---+
---+        android:src="@drawable/icons_plus" />
--- 
----</RelativeLayout>
---\ No newline at end of file
---+</androidx.coordinatorlayout.widget.CoordinatorLayout>
---\ No newline at end of file
---Index: app/build.gradle
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>apply plugin: 'com.android.application'\n\n\nandroid {\n    compileSdkVersion 30\n    buildToolsVersion \"30.0.2\"\n\n    defaultConfig {\n        applicationId \"com.example.infinitycrop\"\n        minSdkVersion 23\n        targetSdkVersion 30\n        versionCode 1\n        versionName \"1.0\"\n        multiDexEnabled true\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: \"libs\", include: [\"*.jar\"])\n    implementation 'androidx.appcompat:appcompat:1.2.0'\n    implementation 'com.google.android.material:material:1.2.1'\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.2'\n    implementation 'androidx.navigation:navigation-fragment:2.1.0'\n    implementation 'androidx.navigation:navigation-ui:2.1.0'\n    implementation 'androidx.lifecycle:lifecycle-extensions:2.2.0'\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\n    implementation 'com.google.firebase:firebase-auth:16.0.5'\n    implementation 'com.firebaseui:firebase-ui-auth:6.2.0'\n    implementation project(path: ':comun')\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\n    implementation 'com.google.firebase:firebase-analytics'\n    implementation 'com.ismaeldivita.chipnavigation:chip-navigation-bar:1.3.4'\n    implementation 'org.jetbrains.kotlin:kotlin-stdlib:1.4.10'\n    implementation 'androidx.recyclerview:recyclerview:1.1.0'\n    implementation 'com.android.volley:volley:1.1.0'\n    // Also declare the dependency for the Google Play services library and specify its version\n    implementation 'com.google.android.gms:play-services-auth:18.1.0'\n    // Import the BoM for the Firebase platform\n    implementation platform('com.google.firebase:firebase-bom:26.0.0')\n    implementation 'com.google.firebase:firebase-firestore:17.1.2'\n    implementation 'com.android.support:multidex:1.0.3'\n    implementation 'com.firebaseui:firebase-ui-firestore:6.3.0'\n    //biblioteca para mostrar images a través de URL\n    implementation 'com.github.bumptech.glide:glide:4.11.0'\n    //import del mqtt\n    implementation 'org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.1.1'\n    implementation 'com.google.android.gms:play-services-maps:17.0.0'\n    compile 'com.google.android.gms:play-services-location:16.0.0'\n    implementation 'com.journeyapps:zxing-android-embedded:3.4.0'//añadimos esta libreria para qr\n    implementation 'com.facebook.android:facebook-android-sdk:[4,5)'\n\n    implementation \"androidx.viewpager2:viewpager2:1.0.0\" //libreria viewpager\n}\napply plugin: 'com.google.gms.google-services'
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/build.gradle	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
---+++ app/build.gradle	(date 1607543533244)
---@@ -35,6 +35,8 @@
---     implementation 'com.google.firebase:firebase-auth:16.0.5'
---     implementation 'com.firebaseui:firebase-ui-auth:6.2.0'
---     implementation project(path: ':comun')
---+    implementation 'com.google.firebase:firebase-database:19.5.1'
---+    implementation 'com.google.firebase:firebase-storage:19.2.0'
---     testImplementation 'junit:junit:4.12'
---     androidTestImplementation 'androidx.test.ext:junit:1.1.2'
---     androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'
---Index: app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.graphic;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport com.example.infinitycrop.R;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link GraphicFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class GraphicFragment extends Fragment {\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public GraphicFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment GraphicFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static GraphicFragment newInstance(String param1, String param2) {\r\n        GraphicFragment fragment = new GraphicFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        return inflater.inflate(R.layout.fragment_graphic, container, false);\r\n    }\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
---+++ app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java	(date 1607543099075)
---@@ -3,12 +3,19 @@
--- import android.os.Bundle;
--- 
--- import androidx.fragment.app.Fragment;
---+import androidx.recyclerview.widget.LinearLayoutManager;
---+import androidx.recyclerview.widget.RecyclerView;
--- 
--- import android.view.LayoutInflater;
--- import android.view.View;
--- import android.view.ViewGroup;
--- 
--- import com.example.infinitycrop.R;
---+import com.firebase.ui.firestore.FirestoreRecyclerOptions;
---+import com.google.firebase.database.FirebaseDatabase;
---+import com.google.firebase.firestore.FirebaseFirestore;
---+import com.google.firebase.firestore.Query;
---+import com.google.firebase.storage.FirebaseStorage;
--- 
--- /**
---  * A simple {@link Fragment} subclass.
---@@ -16,7 +23,7 @@
---  * create an instance of this fragment.
---  */
--- public class GraphicFragment extends Fragment {
----
---+    private AdaptadorImagenes adaptador;
---     // TODO: Rename parameter arguments, choose names that match
---     // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
---     private static final String ARG_PARAM1 = "param1";
---@@ -61,6 +68,26 @@
---     public View onCreateView(LayoutInflater inflater, ViewGroup container,
---                              Bundle savedInstanceState) {
---         // Inflate the layout for this fragment
----        return inflater.inflate(R.layout.fragment_graphic, container, false);
---+        View v= inflater.inflate(R.layout.fragment_graphic, container, false);
---+
---+        RecyclerView recyclerView = v.findViewById(R.id.image_list);
---+        Query query = FirebaseFirestore.getInstance()
---+                .collection("imagenes");
---+        FirestoreRecyclerOptions<Imagen> opciones = new FirestoreRecyclerOptions
---+                .Builder<Imagen>().setQuery(query, Imagen.class).build();
---+        adaptador = new AdaptadorImagenes(getContext(), opciones);
---+        recyclerView.setAdapter(adaptador);
---+        recyclerView.setLayoutManager(new LinearLayoutManager(getContext()));
---+
---+        return v;
---+    }
---+    @Override public void onStart() {
---+        super.onStart();
---+        adaptador.startListening();
---     }
---+    @Override public void onStop() {
---+        super.onStop();
---+        adaptador.stopListening();
---+    }
---+
--- }
---\ No newline at end of file
---Index: comun/src/main/java/com/example/comun/Mqtt.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.comun;\n\npublic class Mqtt {\n    public static final String TAG = \"MQTT\";\n    public static final String topicRoot=\"infinity/senyal/\";\n\n\n    //Reemplaza equipo por el nombre de tu equipo de prácticas\n    public static final int qos = 1;\n    public static final String broker = \"tcp://mqtt.eclipse.org:1883\";\n    public static final String clientId = \"IotTestInfinity123\";\n//Reemplaza ClientId con un valor diferente\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ comun/src/main/java/com/example/comun/Mqtt.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
---+++ comun/src/main/java/com/example/comun/Mqtt.java	(date 1607524175548)
---@@ -7,7 +7,7 @@
--- 
---     //Reemplaza equipo por el nombre de tu equipo de prácticas
---     public static final int qos = 1;
----    public static final String broker = "tcp://mqtt.eclipse.org:1883";
---+    public static final String broker = "tcp://broker.hivemq.com:1883";
---     public static final String clientId = "IotTestInfinity123";
--- //Reemplaza ClientId con un valor diferente
--- }
---\ No newline at end of file
---Index: app/src/main/res/layout/fragment_general.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    tools:context=\".ui.dashboard.DashboardFragment\">\n\n\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\n\n        <RelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginLeft=\"20dp\"\n            android:layout_marginTop=\"10dp\"\n            android:layout_marginRight=\"20dp\">\n\n            <TextView\n                android:id=\"@+id/textDashboard\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Dashboard  >\"\n\n                android:textSize=\"19sp\" />\n\n            <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_below=\"@+id/textDashboard\"\n                android:text=\"4 sensores\"\n\n                android:textSize=\"14sp\" />\n\n            <!--<ImageView\n                android:layout_width=\"62dp\"\n                android:layout_height=\"62dp\"\n                android:layout_alignParentRight=\"true\"\n                android:src=\"@drawable/ic_sun\" />-->\n        </RelativeLayout>\n        <GridLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:columnCount=\"2\"\n            android:rowCount=\"3\"\n            android:alignmentMode=\"alignMargins\"\n            android:columnOrderPreserved=\"false\">\n            <!--temperatura-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Temperatura\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchTemperatura\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:buttonTint=\"#FFFFFF\"\n                            android:checked=\"true\"\n                            android:fitsSystemWindows=\"false\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaTemperatura\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"34°C\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textTemperatura\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textTemperatura\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgTemperatura\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_temperature\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaTemperatura\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--humedad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Humedad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchHumedad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaHumedad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"68%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textHumedad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textHumedad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgHumedad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_humidity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaHumedad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--salinidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Salinidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchSalinidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaSalinidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"10%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textSalinidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textSalinidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgSalinidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_salt\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaSalinidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--Luminosidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Luminosidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchLuminosidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorHighlight=\"#FFFFFF\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidasLuminosidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"90%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textLuminosidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textLuminosidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgLuminosidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_luminosity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidasLuminosidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n\n\n\n\n        </GridLayout>\n\n    </LinearLayout>\n</ScrollView>\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/res/layout/fragment_general.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
---+++ app/src/main/res/layout/fragment_general.xml	(date 1607536086761)
---@@ -20,7 +20,7 @@
---             android:layout_marginRight="20dp">
--- 
---             <TextView
----                android:id="@+id/textDashboard"
---+                android:id="@+id/textDashboardGeneral"
---                 android:layout_width="wrap_content"
---                 android:layout_height="wrap_content"
---                 android:text="Dashboard  >"
---@@ -30,7 +30,7 @@
---             <TextView
---                 android:layout_width="wrap_content"
---                 android:layout_height="wrap_content"
----                android:layout_below="@+id/textDashboard"
---+                android:layout_below="@+id/textDashboardGeneral"
---                 android:text="4 sensores"
--- 
---                 android:textSize="14sp" />
---@@ -74,19 +74,19 @@
--- 
--- 
---                         <TextView
----                            android:id="@+id/textTemperatura"
---+                            android:id="@+id/textTemperaturaGeneral"
---                             android:layout_width="wrap_content"
---                             android:layout_height="wrap_content"
---                             android:layout_marginStart="8dp"
---                             android:layout_marginTop="8dp"
---                             android:text="Temperatura"
---                             android:textSize="16sp"
----                            app:layout_constraintBottom_toBottomOf="@+id/switchTemperatura"
---+                            app:layout_constraintBottom_toBottomOf="@+id/switchTemperaturaGeneral"
---                             app:layout_constraintStart_toStartOf="parent"
---                             app:layout_constraintTop_toTopOf="parent" />
--- 
---                         <Switch
----                            android:id="@+id/switchTemperatura"
---+                            android:id="@+id/switchTemperaturaGeneral"
---                             android:layout_width="wrap_content"
---                             android:layout_height="wrap_content"
---                             android:layout_marginTop="8dp"
---@@ -100,25 +100,25 @@
---                             app:layout_constraintTop_toTopOf="parent" />
--- 
---                         <TextView
----                            android:id="@+id/medidaTemperatura"
---+                            android:id="@+id/medidaTemperaturaGeneral"
---                             android:layout_width="90dp"
---                             android:layout_height="39dp"
---                             android:layout_marginTop="24dp"
---                             android:text="34°C"
---                             android:textSize="31sp"
----                            app:layout_constraintStart_toStartOf="@+id/textTemperatura"
----                            app:layout_constraintTop_toBottomOf="@+id/textTemperatura" />
---+                            app:layout_constraintStart_toStartOf="@+id/textTemperaturaGeneral"
---+                            app:layout_constraintTop_toBottomOf="@+id/textTemperaturaGeneral" />
--- 
---                         <ImageView
----                            android:id="@+id/imgTemperatura"
---+                            android:id="@+id/imgTemperaturaGeneral"
---                             android:layout_width="53dp"
---                             android:layout_height="55dp"
---                             android:layout_marginEnd="1dp"
---                             android:src="@drawable/icons_temperature"
----                            app:layout_constraintBottom_toBottomOf="@+id/medidaTemperatura"
---+                            app:layout_constraintBottom_toBottomOf="@+id/medidaTemperaturaGeneral"
---                             app:layout_constraintEnd_toEndOf="parent"
----                            app:layout_constraintStart_toEndOf="@+id/medidaTemperatura"
----                            app:layout_constraintTop_toTopOf="@+id/medidaTemperatura" />
---+                            app:layout_constraintStart_toEndOf="@+id/medidaTemperaturaGeneral"
---+                            app:layout_constraintTop_toTopOf="@+id/medidaTemperaturaGeneral" />
---                     </androidx.constraintlayout.widget.ConstraintLayout>
---                 </LinearLayout>
---             </androidx.cardview.widget.CardView>
---@@ -148,19 +148,19 @@
--- 
--- 
---                         <TextView
----                            android:id="@+id/textHumedad"
---+                            android:id="@+id/textHumedadGeneral"
---                             android:layout_width="wrap_content"
---                             android:layout_height="wrap_content"
---                             android:layout_marginStart="8dp"
---                             android:layout_marginTop="8dp"
---                             android:text="Humedad"
---                             android:textSize="16sp"
----                            app:layout_constraintBottom_toBottomOf="@+id/switchHumedad"
---+                            app:layout_constraintBottom_toBottomOf="@+id/switchHumedadGeneral"
---                             app:layout_constraintStart_toStartOf="parent"
---                             app:layout_constraintTop_toTopOf="parent" />
--- 
---                         <Switch
----                            android:id="@+id/switchHumedad"
---+                            android:id="@+id/switchHumedadGeneral"
---                             android:layout_width="wrap_content"
---                             android:layout_height="wrap_content"
---                             android:layout_marginTop="8dp"
---@@ -172,25 +172,25 @@
---                             app:layout_constraintTop_toTopOf="parent" />
--- 
---                         <TextView
----                            android:id="@+id/medidaHumedad"
---+                            android:id="@+id/medidaHumedadGeneral"
---                             android:layout_width="90dp"
---                             android:layout_height="39dp"
---                             android:layout_marginTop="24dp"
---                             android:text="68%"
---                             android:textSize="31sp"
----                            app:layout_constraintStart_toStartOf="@+id/textHumedad"
----                            app:layout_constraintTop_toBottomOf="@+id/textHumedad" />
---+                            app:layout_constraintStart_toStartOf="@+id/textHumedadGeneral"
---+                            app:layout_constraintTop_toBottomOf="@+id/textHumedadGeneral" />
--- 
---                         <ImageView
----                            android:id="@+id/imgHumedad"
---+                            android:id="@+id/imgHumedadGeneral"
---                             android:layout_width="53dp"
---                             android:layout_height="55dp"
---                             android:layout_marginEnd="1dp"
---                             android:src="@drawable/icons_humidity"
----                            app:layout_constraintBottom_toBottomOf="@+id/medidaHumedad"
---+                            app:layout_constraintBottom_toBottomOf="@+id/medidaHumedadGeneral"
---                             app:layout_constraintEnd_toEndOf="parent"
----                            app:layout_constraintStart_toEndOf="@+id/medidaHumedad"
----                            app:layout_constraintTop_toTopOf="@+id/medidaHumedad" />
---+                            app:layout_constraintStart_toEndOf="@+id/medidaHumedadGeneral"
---+                            app:layout_constraintTop_toTopOf="@+id/medidaHumedadGeneral" />
---                     </androidx.constraintlayout.widget.ConstraintLayout>
---                 </LinearLayout>
---             </androidx.cardview.widget.CardView>
---@@ -220,19 +220,19 @@
--- 
--- 
---                         <TextView
----                            android:id="@+id/textSalinidad"
---+                            android:id="@+id/textSalinidadGeneral"
---                             android:layout_width="wrap_content"
---                             android:layout_height="wrap_content"
---                             android:layout_marginStart="8dp"
---                             android:layout_marginTop="8dp"
---                             android:text="Salinidad"
---                             android:textSize="16sp"
----                            app:layout_constraintBottom_toBottomOf="@+id/switchSalinidad"
---+                            app:layout_constraintBottom_toBottomOf="@+id/switchSalinidadGeneral"
---                             app:layout_constraintStart_toStartOf="parent"
---                             app:layout_constraintTop_toTopOf="parent" />
--- 
---                         <Switch
----                            android:id="@+id/switchSalinidad"
---+                            android:id="@+id/switchSalinidadGeneral"
---                             android:layout_width="wrap_content"
---                             android:layout_height="wrap_content"
---                             android:layout_marginTop="8dp"
---@@ -244,25 +244,25 @@
---                             app:layout_constraintTop_toTopOf="parent" />
--- 
---                         <TextView
----                            android:id="@+id/medidaSalinidad"
---+                            android:id="@+id/medidaSalinidadGeneral"
---                             android:layout_width="90dp"
---                             android:layout_height="39dp"
---                             android:layout_marginTop="24dp"
---                             android:text="10%"
---                             android:textSize="31sp"
----                            app:layout_constraintStart_toStartOf="@+id/textSalinidad"
----                            app:layout_constraintTop_toBottomOf="@+id/textSalinidad" />
---+                            app:layout_constraintStart_toStartOf="@+id/textSalinidadGeneral"
---+                            app:layout_constraintTop_toBottomOf="@+id/textSalinidadGeneral" />
--- 
---                         <ImageView
----                            android:id="@+id/imgSalinidad"
---+                            android:id="@+id/imgSalinidadGeneral"
---                             android:layout_width="53dp"
---                             android:layout_height="55dp"
---                             android:layout_marginEnd="1dp"
---                             android:src="@drawable/icons_salt"
----                            app:layout_constraintBottom_toBottomOf="@+id/medidaSalinidad"
---+                            app:layout_constraintBottom_toBottomOf="@+id/medidaSalinidadGeneral"
---                             app:layout_constraintEnd_toEndOf="parent"
----                            app:layout_constraintStart_toEndOf="@+id/medidaSalinidad"
----                            app:layout_constraintTop_toTopOf="@+id/medidaSalinidad" />
---+                            app:layout_constraintStart_toEndOf="@+id/medidaSalinidadGeneral"
---+                            app:layout_constraintTop_toTopOf="@+id/medidaSalinidadGeneral" />
---                     </androidx.constraintlayout.widget.ConstraintLayout>
---                 </LinearLayout>
---             </androidx.cardview.widget.CardView>
---@@ -292,19 +292,19 @@
--- 
--- 
---                         <TextView
----                            android:id="@+id/textLuminosidad"
---+                            android:id="@+id/textLuminosidadGeneral"
---                             android:layout_width="wrap_content"
---                             android:layout_height="wrap_content"
---                             android:layout_marginStart="8dp"
---                             android:layout_marginTop="8dp"
---                             android:text="Luminosidad"
---                             android:textSize="16sp"
----                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidad"
---+                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidadGeneral"
---                             app:layout_constraintStart_toStartOf="parent"
---                             app:layout_constraintTop_toTopOf="parent" />
--- 
---                         <Switch
----                            android:id="@+id/switchLuminosidad"
---+                            android:id="@+id/switchLuminosidadGeneral"
---                             android:layout_width="wrap_content"
---                             android:layout_height="wrap_content"
---                             android:layout_marginTop="8dp"
---@@ -317,25 +317,25 @@
---                             app:layout_constraintTop_toTopOf="parent" />
--- 
---                         <TextView
----                            android:id="@+id/medidasLuminosidad"
---+                            android:id="@+id/medidasLuminosidadGeneral"
---                             android:layout_width="90dp"
---                             android:layout_height="39dp"
---                             android:layout_marginTop="24dp"
---                             android:text="90%"
---                             android:textSize="31sp"
----                            app:layout_constraintStart_toStartOf="@+id/textLuminosidad"
----                            app:layout_constraintTop_toBottomOf="@+id/textLuminosidad" />
---+                            app:layout_constraintStart_toStartOf="@+id/textLuminosidadGeneral"
---+                            app:layout_constraintTop_toBottomOf="@+id/textLuminosidadGeneral" />
--- 
---                         <ImageView
----                            android:id="@+id/imgLuminosidad"
---+                            android:id="@+id/imgLuminosidadGeneral"
---                             android:layout_width="53dp"
---                             android:layout_height="55dp"
---                             android:layout_marginEnd="1dp"
---                             android:src="@drawable/icons_luminosity"
----                            app:layout_constraintBottom_toBottomOf="@+id/medidasLuminosidad"
---+                            app:layout_constraintBottom_toBottomOf="@+id/medidasLuminosidadGeneral"
---                             app:layout_constraintEnd_toEndOf="parent"
----                            app:layout_constraintStart_toEndOf="@+id/medidasLuminosidad"
----                            app:layout_constraintTop_toTopOf="@+id/medidasLuminosidad" />
---+                            app:layout_constraintStart_toEndOf="@+id/medidasLuminosidadGeneral"
---+                            app:layout_constraintTop_toTopOf="@+id/medidasLuminosidadGeneral" />
---                     </androidx.constraintlayout.widget.ConstraintLayout>
---                 </LinearLayout>
---             </androidx.cardview.widget.CardView>
---Index: app/src/main/res/layout/fragment_planta1.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    tools:context=\".ui.dashboard.DashboardFragment\">\n\n\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\n\n        <RelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginLeft=\"20dp\"\n            android:layout_marginTop=\"10dp\"\n            android:layout_marginRight=\"20dp\">\n\n            <TextView\n                android:id=\"@+id/textDashboard\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Dashboard  >\"\n\n                android:textSize=\"19sp\" />\n\n            <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_below=\"@+id/textDashboard\"\n                android:text=\"4 sensores\"\n\n                android:textSize=\"14sp\" />\n\n            <!--<ImageView\n                android:layout_width=\"62dp\"\n                android:layout_height=\"62dp\"\n                android:layout_alignParentRight=\"true\"\n                android:src=\"@drawable/ic_sun\" />-->\n        </RelativeLayout>\n        <GridLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:columnCount=\"2\"\n            android:rowCount=\"3\"\n            android:alignmentMode=\"alignMargins\"\n            android:columnOrderPreserved=\"false\">\n            <!--temperatura-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Temperatura\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchTemperatura\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:buttonTint=\"#FFFFFF\"\n                            android:checked=\"true\"\n                            android:fitsSystemWindows=\"false\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaTemperatura\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"34°C\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textTemperatura\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textTemperatura\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgTemperatura\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_temperature\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaTemperatura\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--humedad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Humedad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchHumedad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaHumedad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"68%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textHumedad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textHumedad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgHumedad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_humidity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaHumedad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--salinidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Salinidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchSalinidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaSalinidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"10%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textSalinidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textSalinidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgSalinidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_salt\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaSalinidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--Luminosidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Luminosidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchLuminosidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorHighlight=\"#FFFFFF\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidasLuminosidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"90%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textLuminosidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textLuminosidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgLuminosidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_luminosity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidasLuminosidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n\n\n\n\n        </GridLayout>\n\n    </LinearLayout>\n</ScrollView>\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/res/layout/fragment_planta1.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
---+++ app/src/main/res/layout/fragment_planta1.xml	(date 1607537539251)
---@@ -299,12 +299,12 @@
---                             android:layout_marginTop="8dp"
---                             android:text="Luminosidad"
---                             android:textSize="16sp"
----                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidad"
---+                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidadPlamta1"
---                             app:layout_constraintStart_toStartOf="parent"
---                             app:layout_constraintTop_toTopOf="parent" />
--- 
---                         <Switch
----                            android:id="@+id/switchLuminosidad"
---+                            android:id="@+id/switchLuminosidadPlamta1"
---                             android:layout_width="wrap_content"
---                             android:layout_height="wrap_content"
---                             android:layout_marginTop="8dp"
---Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.dashboard;\n\nimport android.os.Bundle;\n\nimport androidx.fragment.app.Fragment;\n\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.TextView;\n\nimport com.example.infinitycrop.R;\n\n/**\n * A simple {@link Fragment} subclass.\n * Use the {@link GeneralFragment#newInstance} factory method to\n * create an instance of this fragment.\n */\npublic class GeneralFragment extends Fragment {\n\n    // TODO: Rename parameter arguments, choose names that match\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\n    private static final String ARG_PARAM1 = \"param1\";\n    private static final String ARG_PARAM2 = \"param2\";\n\n    // TODO: Rename and change types of parameters\n    private String mParam1;\n    private String mParam2;\n\n    public GeneralFragment() {\n        // Required empty public constructor\n    }\n\n    /**\n     * Use this factory method to create a new instance of\n     * this fragment using the provided parameters.\n     *\n     * @param param1 Parameter 1.\n     * @param param2 Parameter 2.\n     * @return A new instance of fragment GeneralFragment.\n     */\n    // TODO: Rename and change types and number of parameters\n    public static GeneralFragment newInstance(String param1, String param2) {\n        GeneralFragment fragment = new GeneralFragment();\n        Bundle args = new Bundle();\n        args.putString(ARG_PARAM1, param1);\n        args.putString(ARG_PARAM2, param2);\n        fragment.setArguments(args);\n        return fragment;\n    }\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        if (getArguments() != null) {\n            mParam1 = getArguments().getString(ARG_PARAM1);\n            mParam2 = getArguments().getString(ARG_PARAM2);\n        }\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        View v = inflater.inflate(R.layout.fragment_general, container, false);\n\n        return v;\n    }\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
---+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(date 1607537068118)
---@@ -4,20 +4,34 @@
--- 
--- import androidx.fragment.app.Fragment;
--- 
---+import android.util.Log;
--- import android.view.LayoutInflater;
--- import android.view.View;
--- import android.view.ViewGroup;
---+import android.widget.CompoundButton;
---+import android.widget.Switch;
--- import android.widget.TextView;
--- 
---+import com.example.comun.Mqtt;
--- import com.example.infinitycrop.R;
--- 
---+import org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;
---+import org.eclipse.paho.client.mqttv3.MqttCallback;
---+import org.eclipse.paho.client.mqttv3.MqttClient;
---+import org.eclipse.paho.client.mqttv3.MqttConnectOptions;
---+import org.eclipse.paho.client.mqttv3.MqttException;
---+import org.eclipse.paho.client.mqttv3.MqttMessage;
---+import org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;
---+
---+import static com.example.comun.Mqtt.topicRoot;
---+
--- /**
---  * A simple {@link Fragment} subclass.
---  * Use the {@link GeneralFragment#newInstance} factory method to
---  * create an instance of this fragment.
---  */
----public class GeneralFragment extends Fragment {
----
---+public class GeneralFragment extends Fragment implements MqttCallback{
---+    public static MqttClient client = null;
---     // TODO: Rename parameter arguments, choose names that match
---     // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
---     private static final String ARG_PARAM1 = "param1";
---@@ -63,7 +77,108 @@
---                              Bundle savedInstanceState) {
---         // Inflate the layout for this fragment
---         View v = inflater.inflate(R.layout.fragment_general, container, false);
----
---+        //switch methods
---+        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);
---+        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
---+            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
---+                if (isChecked) {
---+                    // The toggle is enabled
---+                    enviarLucesOn();
---+                } else {
---+                    // The toggle is disabled
---+                    enviarLucesOff();
---+                }
---+            }
---+        });
---         return v;
---     }
---+    public void enviarLucesOff(){
---+        try {
---+            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new
---+                    MemoryPersistence());
---+        } catch (MqttException e) {
---+            e.printStackTrace();
---+        }
---+        MqttConnectOptions connOpts = new MqttConnectOptions();
---+        connOpts.setCleanSession(true);
---+        connOpts.setKeepAliveInterval(60);
---+        connOpts.setWill(topicRoot+"WillTopic", "App desconectada".getBytes(),Mqtt.qos, false);
---+
---+        try {
---+            client.connect(connOpts);
---+        } catch (MqttException e) {
---+            e.printStackTrace();
---+        }
---+
---+        //conexión con el broker Root1 = Lector de datos
---+        //nos subscribimos a topic lectura
---+        try {
---+            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "luces");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
---+            client.subscribe(topicRoot + "luces", Mqtt.qos);
---+            client.setCallback((MqttCallback) this);
---+        } catch (MqttException e) {
---+            Log.e(Mqtt.TAG, "Error al suscribir.", e);
---+        }
---+        try {
---+            Log.i(Mqtt.TAG, "Publicando mensaje: " + "mensaje");
---+            MqttMessage message = new MqttMessage("Superior OFF".getBytes());
---+            message.setQos(Mqtt.qos);
---+            message.setRetained(false);
---+            client.publish(topicRoot+"luces", message);
---+        } catch (MqttException e) {
---+            Log.e(Mqtt.TAG, "Error al publicar.", e);
---+        }
---+    }
---+    public void enviarLucesOn(){
---+        try {
---+            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new
---+                    MemoryPersistence());
---+        } catch (MqttException e) {
---+            e.printStackTrace();
---+        }
---+        MqttConnectOptions connOpts = new MqttConnectOptions();
---+        connOpts.setCleanSession(true);
---+        connOpts.setKeepAliveInterval(60);
---+        connOpts.setWill(topicRoot+"WillTopic", "App desconectada".getBytes(),Mqtt.qos, false);
---+
---+        try {
---+            client.connect(connOpts);
---+        } catch (MqttException e) {
---+            e.printStackTrace();
---+        }
---+
---+        //conexión con el broker Root1 = Lector de datos
---+        //nos subscribimos a topic lectura
---+        try {
---+            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "luces");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
---+            client.subscribe(topicRoot + "luces", Mqtt.qos);
---+            client.setCallback((MqttCallback) this);
---+        } catch (MqttException e) {
---+            Log.e(Mqtt.TAG, "Error al suscribir.", e);
---+        }
---+        try {
---+            Log.i(Mqtt.TAG, "Publicando mensaje: " + "mensaje");
---+            MqttMessage message = new MqttMessage("Superior ON".getBytes());
---+            message.setQos(Mqtt.qos);
---+            message.setRetained(false);
---+            client.publish(topicRoot+"luces", message);
---+        } catch (MqttException e) {
---+            Log.e(Mqtt.TAG, "Error al publicar.", e);
---+        }
---+    }
---+
---+    @Override
---+    public void connectionLost(Throwable cause) {
---+        Log.d(Mqtt.TAG, "Conexión perdida");
---+    }
---+
---+    @Override
---+    public void messageArrived(String topic, MqttMessage message) throws Exception {
---+
---+    }
---+
---+    @Override
---+    public void deliveryComplete(IMqttDeliveryToken token) {
---+        Log.d(Mqtt.TAG, "Entrega completa");
---+    }
--- }
---\ No newline at end of file
---Index: app/src/main/res/layout/fragment_planta2.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    tools:context=\".ui.dashboard.DashboardFragment\">\n\n\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\n\n        <RelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginLeft=\"20dp\"\n            android:layout_marginTop=\"10dp\"\n            android:layout_marginRight=\"20dp\">\n\n            <TextView\n                android:id=\"@+id/textDashboard\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Dashboard  >\"\n\n                android:textSize=\"19sp\" />\n\n            <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_below=\"@+id/textDashboard\"\n                android:text=\"4 sensores\"\n\n                android:textSize=\"14sp\" />\n\n            <!--<ImageView\n                android:layout_width=\"62dp\"\n                android:layout_height=\"62dp\"\n                android:layout_alignParentRight=\"true\"\n                android:src=\"@drawable/ic_sun\" />-->\n        </RelativeLayout>\n        <GridLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:columnCount=\"2\"\n            android:rowCount=\"3\"\n            android:alignmentMode=\"alignMargins\"\n            android:columnOrderPreserved=\"false\">\n            <!--temperatura-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Temperatura\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchTemperatura\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:buttonTint=\"#FFFFFF\"\n                            android:checked=\"true\"\n                            android:fitsSystemWindows=\"false\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaTemperatura\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"34°C\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textTemperatura\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textTemperatura\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgTemperatura\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_temperature\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaTemperatura\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--humedad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Humedad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchHumedad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaHumedad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"68%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textHumedad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textHumedad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgHumedad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_humidity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaHumedad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--salinidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Salinidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchSalinidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaSalinidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"10%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textSalinidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textSalinidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgSalinidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_salt\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaSalinidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--Luminosidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Luminosidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchLuminosidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorHighlight=\"#FFFFFF\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidasLuminosidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"90%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textLuminosidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textLuminosidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgLuminosidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_luminosity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidasLuminosidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n\n\n\n\n        </GridLayout>\n\n    </LinearLayout>\n</ScrollView>\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/res/layout/fragment_planta2.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
---+++ app/src/main/res/layout/fragment_planta2.xml	(date 1607537539258)
---@@ -299,12 +299,12 @@
---                             android:layout_marginTop="8dp"
---                             android:text="Luminosidad"
---                             android:textSize="16sp"
----                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidad"
---+                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidadPlanta2"
---                             app:layout_constraintStart_toStartOf="parent"
---                             app:layout_constraintTop_toTopOf="parent" />
--- 
---                         <Switch
----                            android:id="@+id/switchLuminosidad"
---+                            android:id="@+id/switchLuminosidadPlanta2"
---                             android:layout_width="wrap_content"
---                             android:layout_height="wrap_content"
---                             android:layout_marginTop="8dp"
---Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.app.Activity;\r\nimport android.content.res.ColorStateList;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvModel;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\n\r\nimport java.util.ArrayList;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link DashboardFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class DashboardFragment extends Fragment implements MqttCallback{\r\n\r\n    private RecyclerView recyclerView;\r\n    private StaticRvAdapter staticRvAdapter;\r\n    private TabLayout tabLayout;\r\n    private ViewPager viewPager;\r\n    private ColorStateList def;\r\n\r\n\r\n    public static MqttClient client = null;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public DashboardFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment DashboardFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static DashboardFragment newInstance(String param1, String param2) {\r\n        DashboardFragment fragment = new DashboardFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_dashboard, container, false);\r\n        //FIREBASE\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        final FirebaseUser usuario = mAuth.getCurrentUser();\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=usuario.getUid();\r\n        //guardo el nombre en un textView\r\n        /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);\r\n        String res=\"Hola\"+\" \"+usuario.getDisplayName();\r\n        nombre.setText(res);\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(usuario.getDisplayName() == null){\r\n                    String res1=\"Hola\"+\" \"+snapshot.getString(\"username\");\r\n                    nombre.setText(res1);\r\n                }\r\n            }\r\n        });*/\r\n/*\r\n        //switch methods\r\n        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidad);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n */\r\n\r\n        //RECYCLER VIEW\r\n        ArrayList<StaticRvModel> item=new ArrayList<>();\r\n        item.add(new StaticRvModel(R.drawable.icons_sun,\"Soleado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_night_mode,\"Nocturno\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_energy_saving,\"Ahorro\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_power_off,\"Apagado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_custom,\"Custom\"));\r\n\r\n        final TextView medidasT=v.findViewById(R.id.medidaTemperatura);\r\n        final TextView medidasH=v.findViewById(R.id.medidaHumedad);\r\n        final TextView medidasS=v.findViewById(R.id.medidaSalinidad);\r\n        final TextView medidasL=v.findViewById(R.id.medidasLuminosidad);\r\n\r\n        recyclerView=v.findViewById(R.id.rv_1);\r\n        staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(),LinearLayoutManager.HORIZONTAL,false));\r\n        recyclerView.setAdapter(staticRvAdapter);\r\n\r\n\r\n        //TABS\r\n        tabLayout = v.findViewById(R.id.tab_layout);\r\n        viewPager = v.findViewById(R.id.view_pager);\r\n         //Array\r\n        ArrayList<String> arrayList = new ArrayList<>();\r\n\r\n        //set up with viewpager\r\n        tabLayout.setupWithViewPager(viewPager);\r\n\r\n        TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());\r\n        //Pestañas\r\n        adapter.addFrag(new GeneralFragment(),\"General\");\r\n        adapter.addFrag(new Planta1Fragment(),\"Planta 1\");\r\n        adapter.addFrag(new Planta2Fragment(),\"Planta 2\");\r\n\r\n        viewPager.setAdapter(adapter );\r\n\r\n        /*((MainActivity)getActivity()).ola();*/\r\n     /*   //LEER DATOS FIREBASE\r\n        //Temperatura\r\n       DocumentReference documentTemperatura=fStore.collection(\"SensoresA-T\").document(\"Temperatura\");\r\n        documentTemperatura.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediTemp=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasT.setText(resMediTemp);\r\n            }\r\n        });\r\n        //Humedad\r\n        DocumentReference documentHumedad=fStore.collection(\"SensoresA-T\").document(\"Humedad\");\r\n        documentHumedad.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediHum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasH.setText(resMediHum);\r\n            }\r\n        });\r\n        //Iluminación\r\n        DocumentReference documentIluminación=fStore.collection(\"SensoresA-T\").document(\"Iluminación\");\r\n        documentIluminación.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIlum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasL.setText(resMediIlum);\r\n            }\r\n        });\r\n        //Temperatura ambiente\r\n        DocumentReference documentambiente=fStore.collection(\"SensoresA-T\").document(\"Temperatura ambiente\");\r\n        documentambiente.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIAmb=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasS.setText(resMediIAmb);\r\n            }\r\n        });\r\n\r\n      */\r\n\r\n        return v;\r\n    }\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
---+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(date 1607536963984)
---@@ -128,9 +128,9 @@
---                 }
---             }
---         });*/
----/*
---+
---         //switch methods
----        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidad);
---+ /*     Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);
---         switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
---             public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
---                 if (isChecked) {
---@@ -141,10 +141,10 @@
---                     enviarLucesOff();
---                 }
---             }
----        });
---+        });*/
--- 
--- 
---- */
---+
--- 
---         //RECYCLER VIEW
---         ArrayList<StaticRvModel> item=new ArrayList<>();
---@@ -154,10 +154,10 @@
---         item.add(new StaticRvModel(R.drawable.icons_power_off,"Apagado"));
---         item.add(new StaticRvModel(R.drawable.icons_custom,"Custom"));
--- 
----        final TextView medidasT=v.findViewById(R.id.medidaTemperatura);
----        final TextView medidasH=v.findViewById(R.id.medidaHumedad);
----        final TextView medidasS=v.findViewById(R.id.medidaSalinidad);
----        final TextView medidasL=v.findViewById(R.id.medidasLuminosidad);
---+        final TextView medidasT=v.findViewById(R.id.medidaTemperaturaGeneral);
---+        final TextView medidasH=v.findViewById(R.id.medidaHumedadGeneral);
---+        final TextView medidasS=v.findViewById(R.id.medidaSalinidadGeneral);
---+        final TextView medidasL=v.findViewById(R.id.medidasLuminosidadGeneral);
--- 
---         recyclerView=v.findViewById(R.id.rv_1);
---         staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);
---Index: things/src/main/java/com/example/things/MainActivity.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.things;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.util.Log;\n\nimport com.example.comun.Mqtt;\nimport com.google.android.gms.tasks.OnCompleteListener;\nimport com.google.android.gms.tasks.Task;\nimport com.google.firebase.firestore.FirebaseFirestore;\nimport com.google.firebase.firestore.QuerySnapshot;\n\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\nimport org.eclipse.paho.client.mqttv3.MqttClient;\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\nimport org.eclipse.paho.client.mqttv3.MqttException;\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport static com.example.comun.Mqtt.qos;\nimport static com.example.comun.Mqtt.topicRoot;\n\n\n/**\n * Skeleton of an Android Things activity.\n * <p>\n * Android Things peripheral APIs are accessible through the PeripheralManager\n * For example, the snippet below will open a GPIO pin and set it to HIGH:\n * <p>\n * PeripheralManager manager = PeripheralManager.getInstance();\n * try {\n * Gpio gpio = manager.openGpio(\"BCM6\");\n * gpio.setDirection(Gpio.DIRECTION_OUT_INITIALLY_LOW);\n * gpio.setValue(true);\n * } catch (IOException e) {\n * Log.e(TAG, \"Unable to access GPIO\");\n * }\n * <p>\n * You can find additional examples on GitHub: https://github.com/androidthings\n */\npublic class MainActivity extends AppCompatActivity implements MqttCallback {\n    public static MqttClient client = null;\n    FirebaseFirestore db;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        db = FirebaseFirestore.getInstance();\n\n        try {\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\n                    MemoryPersistence());\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n        MqttConnectOptions connOpts = new MqttConnectOptions();\n        connOpts.setCleanSession(true);\n        connOpts.setKeepAliveInterval(60);\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\n\n        try {\n            client.connect(connOpts);\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n\n\n        //conexión con el broker Root1 = Lector de datos\n        //nos subscribimos a topic lectura\n        try {\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"lecturaDatos\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\n            client.subscribe(topicRoot + \"lecturaDatos\", Mqtt.qos);\n            client.setCallback(this);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\n        }\n\n    }\n    // Se ejecuta cuando se pierde la conexión\n    @Override\n    public void connectionLost(Throwable cause) {\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\n\n    }\n    @Override\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\n        String payload = new String(message.getPayload());\n        Log.d(Mqtt.TAG, \"Recibiendo: \" + topic + \"->\" + payload);\n\n        if(topic.equals(topicRoot+\"lecturaDatos\")){\n            //topicLectura(payload);\n            // parts0=humedad,parts1=iluminosidad,parts2=humedadHambiente,parts3=temperatura\n            String[] parts = payload.split(\"-\");//comprueba si los datos introducidos van referentes a cada sensor: nombre,medición, estado\n            Log.d(\"PRUUEBA\",parts[0] + \" \"+parts[1] + \" \"+parts[2] + \" \"+parts[3] + \" \");\n            Map<String, Object> dataTemp = new HashMap<>();\n            dataTemp.put(\"Estado:\", \"Activado\");\n            dataTemp.put(\"Medición\", parts[3]);\n            db.collection(\"SensoresA-T\").document(\"Temperatura\").set(dataTemp);\n\n        }\n\n    }\n     private  void topicLectura(final String payload)  {}\n\n    private void topicLuces(final String payload) {\n    }\n\n    private void topicRiego(final String payload) {\n    }\n\n    private void topicVentiladores(final String payload) {\n    }\n\n\n\n\n\n\n\n    @Override\n    public void onDestroy() {\n        try {\n            Log.i(Mqtt.TAG, \"Desconectado\");\n            client.disconnect();\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al desconectar.\", e);\n        }\n        super.onDestroy();\n    }\n\n\n\n\n\n    @Override\n    public void deliveryComplete(IMqttDeliveryToken token) {\n        Log.d(Mqtt.TAG, \"Entrega completa\");\n\n    }\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ things/src/main/java/com/example/things/MainActivity.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
---+++ things/src/main/java/com/example/things/MainActivity.java	(date 1607533992044)
---@@ -93,7 +93,7 @@
---     public void messageArrived(String topic, MqttMessage message) throws Exception {
---         String payload = new String(message.getPayload());
---         Log.d(Mqtt.TAG, "Recibiendo: " + topic + "->" + payload);
----
---+        db.collection("prueba").add(payload);
---         if(topic.equals(topicRoot+"lecturaDatos")){
---             //topicLectura(payload);
---             // parts0=humedad,parts1=iluminosidad,parts2=humedadHambiente,parts3=temperatura
--Index: app/src/main/res/values/strings.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><resources>\n    <string name=\"app_name\">Infinity Crop</string>\n    <string name=\"title_home\">Infinity Crop</string>\n    <string name=\"title_inicio\">Inicio</string>\n    <string name=\"title_dashboard\">Panel de control</string>\n    <string name=\"title_notifications\">Notificaciones</string>\n    <string name=\"title_wellcome_login\">¡Te damos la bienvenida!</string>\n    <string name=\"title_orderLog\">Inicia sesión</string>\n    <string name=\"title_cont_faceboock\">Iniciar sesión con Facebook</string>\n    <string name=\"title_cont_google\">Iniciar sesión con Google</string>\n    <string name=\"title_cont_mail\">Iniciar sesión con Email</string>\n\n    <string name=\"title_register\">Registrate</string>\n    <string name=\"title_bienv\">Hola de nuevo!</string>\n    <string name=\"title_bienvR\">¡Hola, es un placer!</string>\n    <string name=\"title_userR\">Introduce un correo:</string>\n    <string name=\"title_nameR\">Introduce un nombre:</string>\n    <string name=\"title_passwordR\">Introduce una contraseña:</string>\n    <string name=\"title_registrar\">Acceder</string>\n    <string name=\"btn_newuser\">Si no tienes una cuenta, puedes registarte <u>Aquí</u> </string>\n    <string name=\"title_olvidado\">He olvidado mi contraseña</string>\n    <!-- ANYADIR UNA NUEVA MAQUINA STRINGS -->\n    <string name=\"title_register_machine\">Registra una nueva máquina</string>\n    <string name=\"title_infoMachine\">Completa estos campos</string>\n    <string name=\"btn_registMachine\">Añadir máquina</string>\n    <string name=\"title_name_machine\">Introduce el nombre de tu máquina:</string>\n    <string name=\"title_name_model\">Modelo de tu máquina:</string>\n    <string name=\"title_name_favorites\">Añadir tu máquina a favoritos</string>\n    <string name=\"title_scan_machine\">Escanear máquina</string>\n\n\n\n    <!-- TODO: Remove or change this placeholder text -->\n\n        <string name=\"change_city\">Change city</string>\n\n        <!-- Put your own APP ID here -->\n        <string name=\"open_weather_maps_app_id\">11111</string>\n\n        <string name=\"weather_sunny\">&#xf00d;</string>\n        <string name=\"weather_clear_night\">&#xf02e;</string>\n\n        <string name=\"weather_foggy\">&#xf014;</string>\n        <string name=\"weather_cloudy\">&#xf013;</string>\n        <string name=\"weather_rainy\">&#xf019;</string>\n        <string name=\"weather_snowy\">&#xf01b;</string>\n        <string name=\"weather_thunder\">&#xf01e;</string>\n        <string name=\"weather_drizzle\">&#xf01c;</string>\n\n        <string name=\"place_not_found\">Sorry, no weather data found.</string>\n        <string name=\"facebook_app_id\">140146287567868</string>\n        <string name=\"fb_login_protocol_scheme\">fb140146287567868</string>\n\n\n</resources>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/res/values/strings.xml	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
--+++ app/src/main/res/values/strings.xml	(date 1607987125225)
--@@ -29,27 +29,28 @@
--     <string name="title_scan_machine">Escanear máquina</string>
-- 
-- 
---
--     <!-- TODO: Remove or change this placeholder text -->
-- 
---        <string name="change_city">Change city</string>
--+    <string name="change_city">Change city</string>
-- 
---        <!-- Put your own APP ID here -->
---        <string name="open_weather_maps_app_id">11111</string>
--+    <!-- Put your own APP ID here -->
--+    <string name="open_weather_maps_app_id">11111</string>
-- 
---        <string name="weather_sunny">&#xf00d;</string>
---        <string name="weather_clear_night">&#xf02e;</string>
--+    <string name="weather_sunny">&#xf00d;</string>
--+    <string name="weather_clear_night">&#xf02e;</string>
-- 
---        <string name="weather_foggy">&#xf014;</string>
---        <string name="weather_cloudy">&#xf013;</string>
---        <string name="weather_rainy">&#xf019;</string>
---        <string name="weather_snowy">&#xf01b;</string>
---        <string name="weather_thunder">&#xf01e;</string>
---        <string name="weather_drizzle">&#xf01c;</string>
--+    <string name="weather_foggy">&#xf014;</string>
--+    <string name="weather_cloudy">&#xf013;</string>
--+    <string name="weather_rainy">&#xf019;</string>
--+    <string name="weather_snowy">&#xf01b;</string>
--+    <string name="weather_thunder">&#xf01e;</string>
--+    <string name="weather_drizzle">&#xf01c;</string>
-- 
---        <string name="place_not_found">Sorry, no weather data found.</string>
---        <string name="facebook_app_id">140146287567868</string>
---        <string name="fb_login_protocol_scheme">fb140146287567868</string>
--+    <string name="place_not_found">Sorry, no weather data found.</string>
--+    <string name="facebook_app_id">140146287567868</string>
--+    <string name="fb_login_protocol_scheme">fb140146287567868</string>
--+    <!-- TODO: Remove or change this placeholder text -->
--+    <string name="hello_blank_fragment">Hello blank fragment</string>
-- 
-- 
-- </resources>
--\ No newline at end of file
--Index: things/src/main/java/com/example/things/MainActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.things;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.util.Log;\n\nimport com.example.comun.Mqtt;\nimport com.google.android.gms.tasks.OnCompleteListener;\nimport com.google.android.gms.tasks.Task;\nimport com.google.firebase.firestore.FirebaseFirestore;\nimport com.google.firebase.firestore.QuerySnapshot;\n\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\nimport org.eclipse.paho.client.mqttv3.MqttClient;\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\nimport org.eclipse.paho.client.mqttv3.MqttException;\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport static com.example.comun.Mqtt.qos;\nimport static com.example.comun.Mqtt.topicRoot;\n\n\n/**\n * Skeleton of an Android Things activity.\n * <p>\n * Android Things peripheral APIs are accessible through the PeripheralManager\n * For example, the snippet below will open a GPIO pin and set it to HIGH:\n * <p>\n * PeripheralManager manager = PeripheralManager.getInstance();\n * try {\n * Gpio gpio = manager.openGpio(\"BCM6\");\n * gpio.setDirection(Gpio.DIRECTION_OUT_INITIALLY_LOW);\n * gpio.setValue(true);\n * } catch (IOException e) {\n * Log.e(TAG, \"Unable to access GPIO\");\n * }\n * <p>\n * You can find additional examples on GitHub: https://github.com/androidthings\n */\npublic class MainActivity extends AppCompatActivity implements MqttCallback {\n    public static MqttClient client = null;\n    FirebaseFirestore db;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        db = FirebaseFirestore.getInstance();\n\n        try {\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\n                    MemoryPersistence());\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n        MqttConnectOptions connOpts = new MqttConnectOptions();\n        connOpts.setCleanSession(true);\n        connOpts.setKeepAliveInterval(60);\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\n\n        try {\n            client.connect(connOpts);\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n\n\n        //conexión con el broker Root1 = Lector de datos\n        //nos subscribimos a topic lectura\n        try {\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"lecturaDatos\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\n            client.subscribe(topicRoot + \"lecturaDatos\", Mqtt.qos);\n            client.setCallback(this);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\n        }\n\n    }\n    // Se ejecuta cuando se pierde la conexión\n    @Override\n    public void connectionLost(Throwable cause) {\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\n\n    }\n    @Override\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\n        String payload = new String(message.getPayload());\n        Log.d(Mqtt.TAG, \"Recibiendo: \" + topic + \"->\" + payload);\n        db.collection(\"prueba\").add(payload);\n        if(topic.equals(topicRoot+\"lecturaDatos\")){\n            //topicLectura(payload);\n            // parts0=humedad,parts1=iluminosidad,parts2=humedadHambiente,parts3=temperatura\n            String[] parts = payload.split(\"-\");//comprueba si los datos introducidos van referentes a cada sensor: nombre,medición, estado\n            Log.d(\"PRUUEBA\",parts[0] + \" \"+parts[1] + \" \"+parts[2] + \" \"+parts[3] + \" \");\n\n\n        }\n\n    }\n     private  void topicLectura(final String payload)  {}\n\n    private void topicLuces(final String payload) {\n    }\n\n    private void topicRiego(final String payload) {\n    }\n\n    private void topicVentiladores(final String payload) {\n    }\n\n\n\n\n\n\n\n    @Override\n    public void onDestroy() {\n        try {\n            Log.i(Mqtt.TAG, \"Desconectado\");\n            client.disconnect();\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al desconectar.\", e);\n        }\n        super.onDestroy();\n    }\n\n\n\n\n\n    @Override\n    public void deliveryComplete(IMqttDeliveryToken token) {\n        Log.d(Mqtt.TAG, \"Entrega completa\");\n\n    }\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- things/src/main/java/com/example/things/MainActivity.java	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
--+++ things/src/main/java/com/example/things/MainActivity.java	(date 1608559850991)
--@@ -64,19 +64,16 @@
--         connOpts.setCleanSession(true);
--         connOpts.setKeepAliveInterval(60);
--         connOpts.setWill(topicRoot+"WillTopic", "App desconectada".getBytes(),Mqtt.qos, false);
---
--         try {
--             client.connect(connOpts);
--         } catch (MqttException e) {
--             e.printStackTrace();
--         }
-- 
---
---        //conexión con el broker Root1 = Lector de datos
---        //nos subscribimos a topic lectura
--+        // Nos suscribimos al topic rfid
--         try {
---            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "lecturaDatos");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
---            client.subscribe(topicRoot + "lecturaDatos", Mqtt.qos);
--+            Log.i(Mqtt.TAG, "Suscrito a " + topicRoot+"lecturaDatos");
--+            client.subscribe(topicRoot+"lecturaDatos", qos);
--             client.setCallback(this);
--         } catch (MqttException e) {
--             Log.e(Mqtt.TAG, "Error al suscribir.", e);
--@@ -87,39 +84,17 @@
--     @Override
--     public void connectionLost(Throwable cause) {
--         Log.d(Mqtt.TAG, "Conexión perdida");
---
--     }
--+
--+    // Se ejecuta cuando se publica algo en los topics subscritos
--     @Override
--     public void messageArrived(String topic, MqttMessage message) throws Exception {
--         String payload = new String(message.getPayload());
--         Log.d(Mqtt.TAG, "Recibiendo: " + topic + "->" + payload);
---        db.collection("prueba").add(payload);
---        if(topic.equals(topicRoot+"lecturaDatos")){
---            //topicLectura(payload);
---            // parts0=humedad,parts1=iluminosidad,parts2=humedadHambiente,parts3=temperatura
---            String[] parts = payload.split("-");//comprueba si los datos introducidos van referentes a cada sensor: nombre,medición, estado
---            Log.d("PRUUEBA",parts[0] + " "+parts[1] + " "+parts[2] + " "+parts[3] + " ");
---
---
---        }
---
---    }
---     private  void topicLectura(final String payload)  {}
---
---    private void topicLuces(final String payload) {
---    }
-- 
---    private void topicRiego(final String payload) {
---    }
--+        db.collection("pruebaaaa").add(payload);
-- 
---    private void topicVentiladores(final String payload) {
--     }
---
---
---
---
---
---
-- 
--     @Override
--     public void onDestroy() {
--Index: github.properties
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>gpr.usr = 61469172\ngpr.key = 72a0f63b7097b413e8ff78a7dd6ca9412aaf232c
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>windows-1252
--===================================================================
----- github.properties	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
--+++ github.properties	(date 1607628748873)
--@@ -1,2 +1,2 @@
---gpr.usr = 61469172
---gpr.key = 72a0f63b7097b413e8ff78a7dd6ca9412aaf232c
--\ No newline at end of file
--+gpr.usr = 61473165
--+gpr.key = 9671a8c2e26934b214e49dd99b96077296ee2aca
--\ No newline at end of file
--Index: app/src/main/res/menu/nav_item.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\">\r\n    <item\r\n        android:id=\"@+id/home\"\r\n        android:icon=\"@drawable/ic_home\"\r\n        android:title=\"Inicio\"\r\n        app:cnb_backgroundColor=\"@color/colorPrimaryDashboard\"\r\n        app:cnb_iconColor=\"#ffffff\"\r\n        app:cnb_textColor=\"#ffffff\" />\r\n    <item\r\n        android:id=\"@+id/graphics\"\r\n        android:icon=\"@drawable/icons_line_chart\"\r\n        android:title=\"Graphics\"\r\n        app:cnb_backgroundColor=\"@color/colorPrimaryDashboard\"\r\n        app:cnb_iconColor=\"#ffffff\"\r\n        app:cnb_textColor=\"#ffffff\" />\r\n    <item\r\n        android:id=\"@+id/notifications\"\r\n        android:icon=\"@drawable/ic_baseline_map\"\r\n        android:title=\"Mapa\"\r\n        app:cnb_backgroundColor=\"@color/colorPrimaryDashboard\"\r\n        app:cnb_iconColor=\"#ffffff\"\r\n        app:cnb_textColor=\"#ffffff\" />\r\n    <item\r\n        android:id=\"@+id/profile\"\r\n        android:icon=\"@drawable/ic_profile\"\r\n        android:title=\"Perfil\"\r\n        app:cnb_backgroundColor=\"@color/colorPrimaryDashboard\"\r\n        app:cnb_iconColor=\"#ffffff\"\r\n        app:cnb_textColor=\"#ffffff\" />\r\n</menu>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/res/menu/nav_item.xml	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
--+++ app/src/main/res/menu/nav_item.xml	(date 1607985987066)
--@@ -10,8 +10,8 @@
--         app:cnb_textColor="#ffffff" />
--     <item
--         android:id="@+id/graphics"
---        android:icon="@drawable/icons_line_chart"
---        android:title="Graphics"
--+        android:icon="@drawable/icons_dashboard"
--+        android:title="Panel de control"
--         app:cnb_backgroundColor="@color/colorPrimaryDashboard"
--         app:cnb_iconColor="#ffffff"
--         app:cnb_textColor="#ffffff" />
--Index: app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.graphic;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.Query;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link GraphicFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class GraphicFragment extends Fragment {\r\n    private AdaptadorImagenes adaptador;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public GraphicFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment GraphicFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static GraphicFragment newInstance(String param1, String param2) {\r\n        GraphicFragment fragment = new GraphicFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_graphic, container, false);\r\n\r\n        RecyclerView recyclerView = v.findViewById(R.id.image_list);\r\n        Query query = FirebaseFirestore.getInstance()\r\n                .collection(\"imagenes\");\r\n        FirestoreRecyclerOptions<Imagen> opciones = new FirestoreRecyclerOptions\r\n                .Builder<Imagen>().setQuery(query, Imagen.class).build();\r\n        adaptador = new AdaptadorImagenes(getContext(), opciones);\r\n        recyclerView.setAdapter(adaptador);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(getContext()));\r\n\r\n        return v;\r\n    }\r\n    @Override public void onStart() {\r\n        super.onStart();\r\n        adaptador.startListening();\r\n    }\r\n    @Override public void onStop() {\r\n        super.onStop();\r\n        adaptador.stopListening();\r\n    }\r\n\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
--+++ app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java	(date 1607644902576)
--@@ -9,6 +9,7 @@
-- import android.view.LayoutInflater;
-- import android.view.View;
-- import android.view.ViewGroup;
--+import android.widget.Button;
-- 
-- import com.example.infinitycrop.R;
-- import com.firebase.ui.firestore.FirestoreRecyclerOptions;
--Index: app/src/main/java/com/example/infinitycrop/MainActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop;\nimport android.os.Bundle;\n\nimport com.example.infinitycrop.ui.dashboard.DashboardFragment;\nimport com.example.infinitycrop.ui.graphic.GraphicFragment;\nimport com.example.infinitycrop.ui.map.MapFragment;\nimport com.example.infinitycrop.ui.profile.ProfileFragment;\nimport com.google.firebase.firestore.FirebaseFirestore;\nimport com.ismaeldivita.chipnavigation.ChipNavigationBar;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.fragment.app.Fragment;\nimport androidx.fragment.app.FragmentManager;\nimport androidx.fragment.app.FragmentPagerAdapter;\nimport androidx.viewpager.widget.ViewPager;\n\nimport java.util.ArrayList;\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private ChipNavigationBar chipNavigationBar;\n    private ViewPager viewPager;\n    private Fragment fragment=null;\n    private int index = 0;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        setTheme(R.style.AppThemeHome);\n        super.onCreate(savedInstanceState);\n\n        setContentView(R.layout.activity_main);\n        chipNavigationBar=findViewById(R.id.chipNavigation);\n        viewPager = findViewById(R.id.view_pager11);\n        chipNavigationBar.setItemSelected(R.id.home,true);\n\n        ViewPagerAdapter viewPagerAdapter = new ViewPagerAdapter(getSupportFragmentManager());\n        viewPager.setAdapter(viewPagerAdapter);\n\n        final ViewPagerAdapter adapter = new ViewPagerAdapter(getSupportFragmentManager());\n        final DashboardFragment fragment_1 = new DashboardFragment();\n        final GraphicFragment fragment_2 = new GraphicFragment();\n        final MapFragment fragment_3 = new MapFragment();\n        final ProfileFragment fragment_4 = new ProfileFragment();\n        adapter.addFragment(fragment_1);\n        adapter.addFragment(fragment_2);\n        adapter.addFragment(fragment_3);\n        adapter.addFragment(fragment_4);\n        viewPager.setAdapter(adapter);\n        viewPager.setOffscreenPageLimit(4);\n        index = 1;\n        chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {\n            @Override\n            public void onItemSelected(int i) {\n                switch(i){\n                    case R.id.home:\n                        viewPager.setCurrentItem(0);\n                        break;\n                    case R.id.graphics:\n                        viewPager.setCurrentItem(1);\n                        break;\n                    case R.id.notifications:\n                        viewPager.setCurrentItem(2);\n                        break;\n                    case R.id.profile:\n                        viewPager.setCurrentItem(3);\n                        break;\n                }\n\n\n            }\n        });\n\n\n        viewPager.addOnPageChangeListener(new ViewPager.OnPageChangeListener() {\n            @Override\n            public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {\n\n            }\n\n            @Override\n            public void onPageSelected(int position) {\n\n                if (position == 0){\n\n                    chipNavigationBar.setItemSelected(R.id.home, true);\n                    chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {\n                        @Override\n                        public void onItemSelected(int id) {\n\n                            switch(id){\n                                case R.id.home:\n                                    viewPager.setCurrentItem(0);\n                                    break;\n                                case R.id.graphics:\n                                    viewPager.setCurrentItem(1);\n                                    break;\n                                case R.id.notifications:\n                                    viewPager.setCurrentItem(2);\n                                    break;\n                                case R.id.profile:\n                                    viewPager.setCurrentItem(3);\n                                    break;\n                            }\n                        }\n                    });\n\n                    index = 0;\n\n                }else if (position == 1){\n\n                    chipNavigationBar.setItemSelected(R.id.graphics, true);\n\n                    if(index == 0 || index == 2){\n\n                        //fragment_2.downloadPlates_2();\n                    }\n                    index = 1;\n                    //Toast.makeText(Home.this, \"\"+index, Toast.LENGTH_SHORT).show();\n                }else if (position == 2){\n\n                    chipNavigationBar.setItemSelected(R.id.notifications, true);\n                    chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {\n                        @Override\n                        public void onItemSelected(int id) {\n\n                            switch(id){\n                                case R.id.home:\n                                    viewPager.setCurrentItem(0);\n                                    break;\n                                case R.id.graphics:\n                                    viewPager.setCurrentItem(1);\n                                    break;\n                                case R.id.notifications:\n                                    viewPager.setCurrentItem(2);\n                                    break;\n                                case R.id.profile:\n                                    viewPager.setCurrentItem(3);\n                                    break;\n                            }\n                        }\n                    });\n\n                    index = 2;\n\n                }else if (position == 3){\n\n                    chipNavigationBar.setItemSelected(R.id.profile, true);\n                    chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {\n                        @Override\n                        public void onItemSelected(int id) {\n\n                            switch(id){\n                                case R.id.home:\n                                    viewPager.setCurrentItem(0);\n                                    break;\n                                case R.id.graphics:\n                                    viewPager.setCurrentItem(1);\n                                    break;\n                                case R.id.notifications:\n                                    viewPager.setCurrentItem(2);\n                                    break;\n                                case R.id.profile:\n                                    viewPager.setCurrentItem(3);\n                                    break;\n                            }\n                        }\n                    });\n\n                    index = 3;\n                }\n            }\n\n            @Override\n            public void onPageScrollStateChanged(int state) {\n\n            }\n        });\n    }\n\n\n    class ViewPagerAdapter extends FragmentPagerAdapter {\n\n\n\n        private ArrayList<Fragment> fragments;\n        private ArrayList<String> titles;\n\n        ViewPagerAdapter (FragmentManager fm){\n            super(fm);\n            this.fragments = new ArrayList<>();\n            this.titles = new ArrayList<>();\n\n        }\n\n        @NonNull\n        @Override\n        public Fragment getItem(int position) {\n            return fragments.get(position);\n        }\n\n        @Override\n        public int getCount() {\n            return fragments.size();\n        }\n\n        public void addFragment(Fragment fragment){\n            fragments.add(fragment);\n\n        }\n\n    }\n\n\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/MainActivity.java	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
--+++ app/src/main/java/com/example/infinitycrop/MainActivity.java	(date 1608935788889)
--@@ -1,6 +1,8 @@
-- package com.example.infinitycrop;
-- import android.os.Bundle;
--+import android.widget.Toast;
-- 
--+import com.example.infinitycrop.ui.control_panel.Control_panelFragment;
-- import com.example.infinitycrop.ui.dashboard.DashboardFragment;
-- import com.example.infinitycrop.ui.graphic.GraphicFragment;
-- import com.example.infinitycrop.ui.map.MapFragment;
--@@ -32,6 +34,10 @@
--         setTheme(R.style.AppThemeHome);
--         super.onCreate(savedInstanceState);
-- 
--+        Bundle extras = getIntent().getExtras();
--+        String s = extras.getString("machine");
--+        Toast.makeText(this, s , Toast.LENGTH_SHORT).show();
--+
--         setContentView(R.layout.activity_main);
--         chipNavigationBar=findViewById(R.id.chipNavigation);
--         viewPager = findViewById(R.id.view_pager11);
--@@ -42,7 +48,8 @@
-- 
--         final ViewPagerAdapter adapter = new ViewPagerAdapter(getSupportFragmentManager());
--         final DashboardFragment fragment_1 = new DashboardFragment();
---        final GraphicFragment fragment_2 = new GraphicFragment();
--+        //final GraphicFragment fragment_2 = new GraphicFragment();
--+        final Control_panelFragment fragment_2 = new Control_panelFragment();
--         final MapFragment fragment_3 = new MapFragment();
--         final ProfileFragment fragment_4 = new ProfileFragment();
--         adapter.addFragment(fragment_1);
--Index: app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.list_machine;\r\n\r\nimport android.content.Intent;\r\nimport android.media.Image;\r\nimport android.os.Bundle;\r\nimport android.os.Parcelable;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.ItemTouchHelper;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.logmail.RegisterActivity;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerAdapter;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.Query;\r\n\r\nimport java.text.BreakIterator;\r\nimport java.util.Map;\r\n\r\npublic class MainActivityMachineList extends AppCompatActivity {\r\n    private FirebaseFirestore firebaseFirestore;\r\n    private RecyclerView mFirestoreList;\r\n    private Adapter adapter;\r\n    private FirebaseAuth firebaseAuth;\r\n    Button addBtn;//boton añadir nueva maquina\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_list_machines);\r\n        firebaseFirestore=FirebaseFirestore.getInstance();\r\n        mFirestoreList=findViewById(R.id.firestore_list);\r\n        firebaseAuth=FirebaseAuth.getInstance();\r\n        String uid=firebaseAuth.getUid();\r\n        //Query\r\n        Query query=firebaseFirestore\r\n                .collection(\"Machine\")\r\n                .whereEqualTo(\"userUID\", uid)\r\n                .orderBy(\"priority\",Query.Direction.ASCENDING);\r\n        //RecyclerView\r\n        FirestoreRecyclerOptions<MachineModel> options=new FirestoreRecyclerOptions.Builder<MachineModel>()\r\n                .setQuery(query, MachineModel.class)\r\n                .build();\r\n        //View Holder\r\n        adapter= new Adapter(options);\r\n        mFirestoreList.setHasFixedSize(true);\r\n        mFirestoreList.setLayoutManager(new LinearLayoutManager(this));\r\n        mFirestoreList.setAdapter(adapter);\r\n\r\n        new ItemTouchHelper(new ItemTouchHelper.SimpleCallback(0,\r\n                ItemTouchHelper.LEFT | ItemTouchHelper.RIGHT) {\r\n            @Override\r\n            public boolean onMove(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder, RecyclerView.ViewHolder target) {\r\n                return false;\r\n            }\r\n            @Override\r\n            public void onSwiped(RecyclerView.ViewHolder viewHolder, int direction) {\r\n                Toast.makeText(getApplicationContext(), \"Maquina eliminada con éxito\", Toast.LENGTH_SHORT).show();\r\n                adapter.deleteItem(viewHolder.getAdapterPosition());\r\n            }\r\n        }).attachToRecyclerView(mFirestoreList);\r\n\r\n        adapter.setOnItemClickListener(new Adapter.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(DocumentSnapshot documentSnapshot, int position) {\r\n                //documentSnapshot.getData() -> devuelve all que tiene la maquina en firebase\r\n                MachineModel machine = documentSnapshot.toObject(MachineModel.class);\r\n                String id = documentSnapshot.getId();\r\n                String path = documentSnapshot.getReference().getPath(); //devuelve ruta en firebase Machine\\madara\r\n                /*Toast.makeText(MainActivityMachineList.this,\r\n                        \"Position: \" + position + \" ID: \" + id +\"  algo   \"+ documentSnapshot.getData(), Toast.LENGTH_SHORT).show();*/\r\n                Intent intent = new Intent(getBaseContext(), MainActivity.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n        FloatingActionButton addbtn = (FloatingActionButton) findViewById(R.id.button_add_machine);\r\n        addbtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent (getApplicationContext(), AddMachine.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        adapter.stopListening();\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        adapter.startListening();\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
--+++ app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(date 1608935788825)
--@@ -84,6 +84,7 @@
--                 /*Toast.makeText(MainActivityMachineList.this,
--                         "Position: " + position + " ID: " + id +"  algo   "+ documentSnapshot.getData(), Toast.LENGTH_SHORT).show();*/
--                 Intent intent = new Intent(getBaseContext(), MainActivity.class);
--+                intent.putExtra("machine", id);
--                 startActivity(intent);
--             }
--         });
--Index: comun/src/main/java/com/example/comun/Mqtt.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.comun;\n\npublic class Mqtt {\n    public static final String TAG = \"MQTT\";\n    public static final String topicRoot=\"infinity/senyal/\";\n\n\n    //Reemplaza equipo por el nombre de tu equipo de prácticas\n    public static final int qos = 1;\n    public static final String broker = \"tcp://broker.hivemq.com:1883\";\n    public static final String clientId = \"IotTestInfinity123434\";\n//Reemplaza ClientId con un valor diferente\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- comun/src/main/java/com/example/comun/Mqtt.java	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
--+++ comun/src/main/java/com/example/comun/Mqtt.java	(date 1607641263326)
--@@ -8,6 +8,6 @@
--     //Reemplaza equipo por el nombre de tu equipo de prácticas
--     public static final int qos = 1;
--     public static final String broker = "tcp://broker.hivemq.com:1883";
---    public static final String clientId = "IotTestInfinity123434";
--+    public static final String clientId = "IotTestInfinity1234";
-- //Reemplaza ClientId con un valor diferente
-- }
--\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20_[Default_Changelist]/shelved.patch
-===================================================================
---- .idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-+++ .idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-@@ -1,248 +0,0 @@
--Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.Manifest;\r\nimport android.app.Activity;\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.content.res.ColorStateList;\r\nimport android.location.Address;\r\nimport android.location.Geocoder;\r\nimport android.location.Location;\r\nimport android.location.LocationManager;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.os.StrictMode;\r\nimport android.provider.Settings;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvModel;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.location.FusedLocationProviderClient;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.annotations.NotNull;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.squareup.okhttp.Call;\r\nimport com.squareup.okhttp.Callback;\r\nimport com.squareup.okhttp.OkHttpClient;\r\nimport com.squareup.okhttp.Request;\r\nimport com.squareup.okhttp.Response;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link DashboardFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class DashboardFragment extends Fragment implements MqttCallback{\r\n\r\n    private RecyclerView recyclerView;\r\n    private StaticRvAdapter staticRvAdapter;\r\n    private TabLayout tabLayout;\r\n    private ViewPager viewPager;\r\n    //WEATHER\r\n    private static  final int REQUEST_LOCATION=1;\r\n    double lat;\r\n    double longi;\r\n\r\n    TextView showLocationTxt;\r\n\r\n    LocationManager locationManager;\r\n    String latitude,longitude;\r\n\r\n    TextView view_city;\r\n    TextView view_temp;\r\n    TextView view_desc;\r\n    TextView view_country;\r\n\r\n    ImageView view_weather;\r\n    //\r\n\r\n\r\n    public static MqttClient client = null;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public DashboardFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment DashboardFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static DashboardFragment newInstance(String param1, String param2) {\r\n        DashboardFragment fragment = new DashboardFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_dashboard, container, false);\r\n        //FIREBASE\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        final FirebaseUser usuario = mAuth.getCurrentUser();\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=usuario.getUid();\r\n        //guardo el nombre en un textView\r\n        /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);\r\n        String res=\"Hola\"+\" \"+usuario.getDisplayName();\r\n        nombre.setText(res);\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(usuario.getDisplayName() == null){\r\n                    String res1=\"Hola\"+\" \"+snapshot.getString(\"username\");\r\n                    nombre.setText(res1);\r\n                }\r\n            }\r\n        });*/\r\n\r\n        //switch methods\r\n /*     Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });*/\r\n\r\n\r\n        //WEATHER\r\n        ActivityCompat.requestPermissions(getActivity(),new String[]\r\n                {Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n\r\n        view_city =v.findViewById(R.id.town);\r\n        view_city.setText(\"\");\r\n        view_temp =v.findViewById(R.id.temp);\r\n        view_temp.setText(\"\");\r\n        view_desc =v.findViewById(R.id.desc);\r\n        view_desc.setText(\"\");\r\n        view_country=v.findViewById(R.id.txtCountry);\r\n        view_country.setText(\"\");\r\n        view_weather =v.findViewById(R.id.wheather_image);\r\n\r\n        locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);\r\n        inicioGPS();\r\n        //\r\n\r\n\r\n\r\n\r\n        //RECYCLER VIEW\r\n        ArrayList<StaticRvModel> item=new ArrayList<>();\r\n        item.add(new StaticRvModel(R.drawable.icons_sun,\"Soleado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_night_mode,\"Nocturno\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_energy_saving,\"Ahorro\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_power_off,\"Apagado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_custom,\"Custom\"));\r\n\r\n        final TextView medidasT=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidasH=v.findViewById(R.id.medidaHumedadGeneral);\r\n        final TextView medidasS=v.findViewById(R.id.medidaSalinidadGeneral);\r\n        final TextView medidasL=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n\r\n        recyclerView=v.findViewById(R.id.rv_1);\r\n        staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(),LinearLayoutManager.HORIZONTAL,false));\r\n        recyclerView.setAdapter(staticRvAdapter);\r\n\r\n\r\n        //TABS\r\n        tabLayout = v.findViewById(R.id.tab_layout);\r\n        viewPager = v.findViewById(R.id.view_pager);\r\n         //Array\r\n        ArrayList<String> arrayList = new ArrayList<>();\r\n\r\n        //set up with viewpager\r\n        tabLayout.setupWithViewPager(viewPager);\r\n\r\n        TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());\r\n        //Pestañas\r\n        adapter.addFrag(new GeneralFragment(),\"General\");\r\n        adapter.addFrag(new Planta1Fragment(),\"Planta 1\");\r\n        adapter.addFrag(new Planta2Fragment(),\"Planta 2\");\r\n\r\n        viewPager.setAdapter(adapter );\r\n\r\n        /*((MainActivity)getActivity()).ola();*/\r\n     /*   //LEER DATOS FIREBASE\r\n        //Temperatura\r\n       DocumentReference documentTemperatura=fStore.collection(\"SensoresA-T\").document(\"Temperatura\");\r\n        documentTemperatura.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediTemp=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasT.setText(resMediTemp);\r\n            }\r\n        });\r\n        //Humedad\r\n        DocumentReference documentHumedad=fStore.collection(\"SensoresA-T\").document(\"Humedad\");\r\n        documentHumedad.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediHum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasH.setText(resMediHum);\r\n            }\r\n        });\r\n        //Iluminación\r\n        DocumentReference documentIluminación=fStore.collection(\"SensoresA-T\").document(\"Iluminación\");\r\n        documentIluminación.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIlum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasL.setText(resMediIlum);\r\n            }\r\n        });\r\n        //Temperatura ambiente\r\n        DocumentReference documentambiente=fStore.collection(\"SensoresA-T\").document(\"Temperatura ambiente\");\r\n        documentambiente.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIAmb=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasS.setText(resMediIAmb);\r\n            }\r\n        });\r\n\r\n      */\r\n\r\n        return v;\r\n    }\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n\r\n\r\n    //WEATHER METHODS\r\n    private void api_key(final String City) {\r\n        OkHttpClient client = new OkHttpClient();\r\n\r\n        Request request = new Request.Builder()\r\n                .url(\"https://api.openweathermap.org/data/2.5/weather?q=\" + City + \"&appid=a6f41d947e0542a26580bcd5c3fb90ef&units=metric\")\r\n                .get()\r\n                .build();\r\n        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n        StrictMode.setThreadPolicy(policy);\r\n        try {\r\n            Response response = client.newCall(request).execute();\r\n            client.newCall(request).enqueue(new Callback() {\r\n                @Override\r\n                public void onFailure(Request request, IOException e) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onResponse(Response response) throws IOException {\r\n                    String responseData = response.body().string();\r\n                    try {\r\n                        JSONObject json = new JSONObject(responseData);\r\n                        JSONArray array = json.getJSONArray(\"weather\");\r\n                        JSONObject object = array.getJSONObject(0);\r\n\r\n                        String description = object.getString(\"description\");\r\n                        String icons = object.getString(\"icon\");\r\n\r\n                        JSONObject temp1 = json.getJSONObject(\"main\");\r\n                        Double Temperature = temp1.getDouble(\"temp\");\r\n\r\n                        setText(view_city, City);\r\n\r\n                        String temps = Math.round(Temperature) + \" °C\";\r\n                        setText(view_temp, temps);\r\n                        setText(view_desc, description);\r\n                        setImage(view_weather, icons);\r\n\r\n                    } catch (JSONException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n\r\n            });\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    private void setText(final TextView text, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                text.setText(value);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setImage(final ImageView imageView, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                //paste switch\r\n                switch (value) {\r\n                    case \"01d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"01n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"02d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"02n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"03d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"03n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"04d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"04n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"09d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"09n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"10d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"10n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"11d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"11n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"13d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    case \"13n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    default:\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.wheather));\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    //App location\r\n    private void getLocation() {\r\n\r\n        //Check Permissions again\r\n\r\n        /*if (ActivityCompat.checkSelfPermission(\r\n                getContext(),Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(\r\n                getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n        } else {\r\n\r\n            Location LocationNetwork=locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);\r\n             if (LocationNetwork !=null)\r\n            {\r\n                double lat=LocationNetwork.getLatitude();\r\n                double longi=LocationNetwork.getLongitude();\r\n\r\n                latitude=String.valueOf(lat);\r\n                longitude=String.valueOf(longi);\r\n                loc_func(LocationNetwork);\r\n                api_key(String.valueOf(view_city.getText()));\r\n                showLocationTxt.setText(\"Your Location:\"+\"\\n\"+\"Latitude= \"+latitude+\"\\n\"+\"Longitude= \"+longitude);\r\n            }\r\n\r\n        }*/\r\n\r\n    }\r\n\r\n    private void OnGPS() {\r\n\r\n        final AlertDialog.Builder builder= new AlertDialog.Builder(getContext());\r\n\r\n        builder.setMessage(\"Enable GPS\").setCancelable(false).setPositiveButton(\"YES\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS));\r\n                getLocation();\r\n            }\r\n        }).setNegativeButton(\"NO\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                dialog.cancel();\r\n            }\r\n        });\r\n        final AlertDialog alertDialog=builder.create();\r\n        alertDialog.show();\r\n    }\r\n\r\n    private void loc_func(Location location){\r\n        try {\r\n            Geocoder geocoder=new Geocoder(getContext());\r\n            List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);\r\n            String address = addresses.get(0).getSubLocality();\r\n            String cityName = addresses.get(0).getLocality();\r\n            String stateName = addresses.get(0).getAdminArea();\r\n            String country = addresses.get(0).getCountryName();\r\n            //txt_paddress.setText(address);\r\n            view_city.setText(cityName);\r\n            view_country.setText(country);\r\n            //txt_state.setText(stateName);*/\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            Toast.makeText(getContext(), \"Error:\"+e, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void inicioGPS(){\r\n\r\n\r\n        //Check gps is enable or not\r\n\r\n        if (!locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))\r\n        {\r\n            //Write Function To enable gps\r\n\r\n            OnGPS();\r\n        }\r\n        else\r\n        {\r\n            //GPS is already On then\r\n\r\n            getLocation();\r\n        }\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
--+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(date 1609523605203)
--@@ -201,7 +201,7 @@
--         view_weather =v.findViewById(R.id.wheather_image);
-- 
--         locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);
---        inicioGPS();
--+       /* inicioGPS();*/
--         //
-- 
-- 
--@@ -501,7 +501,7 @@
--     }
-- 
--     //App location
---    private void getLocation() {
--+   /* private void getLocation() {
-- 
--         //Check Permissions again
-- 
--@@ -519,12 +519,12 @@
-- 
--                 latitude=String.valueOf(lat);
--                 longitude=String.valueOf(longi);
---                loc_func(LocationNetwork);
---                api_key(String.valueOf(view_city.getText()));
--+               /* loc_func(LocationNetwork);*/
--+              /*  api_key(String.valueOf(view_city.getText()));
--                 showLocationTxt.setText("Your Location:"+"\n"+"Latitude= "+latitude+"\n"+"Longitude= "+longitude);
--             }
-- 
---        }*/
--+        }
-- 
--     }
-- 
--@@ -553,8 +553,8 @@
--         try {
--             Geocoder geocoder=new Geocoder(getContext());
--             List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);
---            String address = addresses.get(0).getSubLocality();
---            String cityName = addresses.get(0).getLocality();
--+            /*String address = addresses.get(0).getSubLocality();*/
--+           /* String cityName = addresses.get(0).getLocality();
--             String stateName = addresses.get(0).getAdminArea();
--             String country = addresses.get(0).getCountryName();
--             //txt_paddress.setText(address);
--@@ -562,7 +562,7 @@
--             view_country.setText(country);
--             //txt_state.setText(stateName);*/
-- 
---        } catch (IOException e) {
--+       /* } catch (IOException e) {
--             e.printStackTrace();
--             Toast.makeText(getContext(), "Error:"+e, Toast.LENGTH_SHORT).show();
--         }
--@@ -583,7 +583,7 @@
--         {
--             //GPS is already On then
-- 
---            getLocation();
---        }
---    }
--+            /*getLocation();*/
--+ /*       }
--+    }*/
-- }
--\ No newline at end of file
--Index: app/src/main/res/layout/fragment_login.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.login.LogActivity\" >\r\n\r\n    <ImageView\r\n        android:id=\"@+id/imageView4\"\r\n        android:layout_width=\"254dp\"\r\n        android:layout_height=\"188dp\"\r\n        android:contentDescription=\"@string/title_wellcome_login\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"\r\n        app:layout_constraintVertical_bias=\"0.0\"\r\n        app:srcCompat=\"@drawable/stickerlog\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/textView3\"\r\n        android:layout_width=\"184dp\"\r\n        android:layout_height=\"20dp\"\r\n        android:layout_marginTop=\"40dp\"\r\n        android:layout_marginEnd=\"52dp\"\r\n        android:text=\"@string/title_wellcome_login\"\r\n        android:textColor=\"@color/colorPrimaryLight\"\r\n        android:textSize=\"16sp\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/imageView4\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n    <TextView\r\n        android:id=\"@+id/textView4\"\r\n        android:layout_width=\"151dp\"\r\n        android:layout_height=\"32dp\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:layout_marginEnd=\"84dp\"\r\n        android:text=\"@string/title_orderLog\"\r\n        android:textColor=\"@color/colorPrimary\"\r\n        android:textSize=\"26sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/imageView4\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/textView3\" />\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"530dp\"\r\n        android:orientation=\"vertical\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/imageView4\"\r\n        app:layout_constraintVertical_bias=\"0.527\">\r\n\r\n        <ImageView\r\n            android:id=\"@+id/imageView3\"\r\n            android:layout_width=\"254dp\"\r\n            android:layout_height=\"146dp\"\r\n            android:layout_gravity=\"center_horizontal\"\r\n            android:layout_marginBottom=\"70dp\"\r\n            android:contentDescription=\"@string/title_wellcome_login\"\r\n            app:srcCompat=\"@drawable/logo_and_text\" />\r\n\r\n        <!--<Button\r\n               android:id=\"@+id/btn_facebook\"\r\n               android:layout_width=\"match_parent\"\r\n               android:layout_height=\"wrap_content\"\r\n               android:background=\"@drawable/btn_facebook\"\r\n               android:drawableLeft=\"@drawable/ic_facebook_icon\"\r\n               android:paddingLeft=\"20dp\"\r\n               android:textColor=\"#FFFF\"\r\n               android:layout_marginLeft=\"20dp\"\r\n               android:layout_marginRight=\"20dp\"\r\n               android:text=\"@string/title_cont_faceboock\" /> -->\r\n        <com.facebook.login.widget.LoginButton\r\n            android:id=\"@+id/btn_facebook\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:background=\"@drawable/btn_facebook\"\r\n            android:drawableLeft=\"@drawable/ic_facebook_icon\"\r\n            android:paddingLeft=\"20dp\"\r\n            android:textColor=\"#FFFF\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginRight=\"20dp\"\r\n            android:text=\"@string/title_cont_faceboock\" />\r\n        <!-- <com.facebook.login.widget.LoginButton\r\n            android:id=\"@+id/login_button\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center_horizontal\"\r\n            android:layout_marginTop=\"30dp\"\r\n            android:layout_marginBottom=\"30dp\" />  -->\r\n\r\n        <com.google.android.gms.common.SignInButton\r\n            android:id=\"@+id/btn_google\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginRight=\"20dp\"\r\n            android:background=\"@drawable/btn_google\"\r\n            android:drawableLeft=\"@drawable/ic_google_icon\"\r\n            android:text=\"@string/title_cont_google\"\r\n            android:textColor=\"#000000\" />\r\n\r\n        <Button\r\n            android:id=\"@+id/btn_mail\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginRight=\"20dp\"\r\n            android:background=\"@drawable/btn_mail\"\r\n            android:drawableLeft=\"@drawable/ic_mail_icon\"\r\n            android:onClick=\"Email\"\r\n            android:paddingLeft=\"20dp\"\r\n            android:text=\"@string/title_cont_mail\"\r\n            android:textColor=\"#000000\" />\r\n\r\n    </LinearLayout>\r\n\r\n\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/res/layout/fragment_login.xml	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
--+++ app/src/main/res/layout/fragment_login.xml	(date 1609520835155)
--@@ -5,7 +5,7 @@
--     xmlns:tools="http://schemas.android.com/tools"
--     android:layout_width="match_parent"
--     android:layout_height="match_parent"
---    tools:context=".ui.login.LogActivity" >
--+     >
-- 
--     <ImageView
--         android:id="@+id/imageView4"
--Index: app/src/main/AndroidManifest.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.infinitycrop\">\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/>\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\"/>\r\n    <uses-permission android:name=\"android.permission.INTERNET\"/>\r\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" />\r\n    <!--Permisos Qr-->\r\n    <uses-permission android:name=\"android.permission.CAMERA\"/>\r\n    <uses-feature android:name=\"android.hardware.camera\"></uses-feature>\r\n    <uses-feature android:name=\"android.hardware.camera.autofocus\"></uses-feature>\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher\"\r\n        android:theme=\"@style/AppThemeHome\"\r\n        >\r\n\r\n        <activity android:name=\".MainActivity\" android:theme=\"@style/SplashTheme\">\r\n        </activity>\r\n        <service android:name=\"com.example.infinitycrop.ui.service.ServicioMqtt\" />\r\n        <activity android:name=\"com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\">\r\n\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.HelpProfile\">\r\n\r\n        </activity>\r\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\"></activity>\r\n        <activity android:name=\".ui.list_machine.AddMachine\"></activity>\r\n        <activity android:name=\".ui.logmail.RegisterActivity\"></activity>\r\n        <activity android:name=\".ui.logmail.LoginActivity\"></activity>\r\n        <activity android:name=\".ui.list_machine.CaptureAct\"></activity>\r\n        <activity android:name=\"com.example.infinitycrop.ui.login.LogActivity\"></activity>\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\"></activity>\r\n        <activity android:name=\".ui.profile.settings.ModifyProfile\"></activity>\r\n\r\n\r\n\r\n\r\n        <meta-data android:name=\"com.google.android.geo.API_KEY\"\r\n            android:value=\"@string/google_maps_key\" />\r\n\r\n        <meta-data android:name=\"com.facebook.sdk.ApplicationId\"\r\n            tools:replace=\"android:value\"\r\n            android:value=\"@string/facebook_app_id\"/>\r\n        <meta-data\r\n            android:name=\"preloaded_fonts\"\r\n            android:resource=\"@array/preloaded_fonts\" />\r\n\r\n\r\n    </application>\r\n\r\n</manifest>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/AndroidManifest.xml	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
--+++ app/src/main/AndroidManifest.xml	(date 1609520835161)
--@@ -44,7 +44,7 @@
--         <activity android:name=".ui.list_machine.CaptureAct"></activity>
--         <activity android:name="com.example.infinitycrop.ui.login.LogActivity"></activity>
--         <activity android:name=".ui.LoadAnimations.IntroductoryActivity2"></activity>
---        <activity android:name=".ui.profile.settings.ModifyProfile"></activity>
--+        <activity android:name=".ui.LoadAnimations.LogprimeraActivity"></activity>
-- 
-- 
-- 
--Index: app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.list_machine;\r\n\r\nimport android.content.Intent;\r\nimport android.media.Image;\r\nimport android.os.Bundle;\r\nimport android.os.Parcelable;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.ItemTouchHelper;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.logmail.RegisterActivity;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerAdapter;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\nimport com.google.android.material.bottomsheet.BottomSheetDialog;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.Query;\r\n\r\nimport java.text.BreakIterator;\r\nimport java.util.Map;\r\n\r\npublic class MainActivityMachineList extends AppCompatActivity {\r\n    private FirebaseFirestore firebaseFirestore;\r\n    private RecyclerView mFirestoreList;\r\n    private Adapter adapter;\r\n    private FirebaseAuth firebaseAuth;\r\n    Button addBtn;//boton añadir nueva maquina\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_list_machines);\r\n        firebaseFirestore=FirebaseFirestore.getInstance();\r\n        mFirestoreList=findViewById(R.id.firestore_list);\r\n        firebaseAuth=FirebaseAuth.getInstance();\r\n        String uid=firebaseAuth.getUid();\r\n        //Query\r\n        Query query=firebaseFirestore\r\n                .collection(\"Machine\")\r\n                .whereEqualTo(\"userUID\", uid)\r\n                .orderBy(\"priority\",Query.Direction.ASCENDING);\r\n        //RecyclerView\r\n        FirestoreRecyclerOptions<MachineModel> options=new FirestoreRecyclerOptions.Builder<MachineModel>()\r\n                .setQuery(query, MachineModel.class)\r\n                .build();\r\n        //View Holder\r\n        adapter= new Adapter(options);\r\n        mFirestoreList.setHasFixedSize(true);\r\n        mFirestoreList.setLayoutManager(new LinearLayoutManager(this));\r\n        mFirestoreList.setAdapter(adapter);\r\n\r\n        new ItemTouchHelper(new ItemTouchHelper.SimpleCallback(0,\r\n                ItemTouchHelper.LEFT | ItemTouchHelper.RIGHT) {\r\n            @Override\r\n            public boolean onMove(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder, RecyclerView.ViewHolder target) {\r\n                return false;\r\n            }\r\n            @Override\r\n            public void onSwiped(RecyclerView.ViewHolder viewHolder, int direction) {\r\n                Toast.makeText(getApplicationContext(), \"Maquina eliminada con éxito\", Toast.LENGTH_SHORT).show();\r\n                adapter.deleteItem(viewHolder.getAdapterPosition());\r\n            }\r\n        }).attachToRecyclerView(mFirestoreList);\r\n\r\n        adapter.setOnItemClickListener(new Adapter.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(DocumentSnapshot documentSnapshot, int position) {\r\n                //documentSnapshot.getData() -> devuelve all que tiene la maquina en firebase\r\n                MachineModel machine = documentSnapshot.toObject(MachineModel.class);\r\n                final String id = documentSnapshot.getId();\r\n                final String path = documentSnapshot.getString(\"description\"); //devuelve ruta en firebase Machine\\madara\r\n                //botttom sheet\r\n                final BottomSheetDialog bottomSheetDialog=new BottomSheetDialog(MainActivityMachineList.this);\r\n                bottomSheetDialog.setContentView(R.layout.machine_bottom_sheet);\r\n                Button btnenter=bottomSheetDialog.findViewById(R.id.enterMachineButton);\r\n                Button btnmodify=bottomSheetDialog.findViewById(R.id.madifyMachineButton);\r\n                Button btncancel=bottomSheetDialog.findViewById(R.id.cancelMachineButton);\r\n                btnenter.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        Intent intent = new Intent(getBaseContext(), MainActivity.class);\r\n                        intent.putExtra(\"machine\", id);\r\n                        intent.putExtra(\"description\", path);\r\n                        startActivity(intent);\r\n                    }\r\n                });\r\n                btnmodify.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        //poner aca Intent para acceder al layout de modificar maquina\r\n                        //hay que pasarle un intent con extra como he hecho en el onClick de arriba\r\n                        //lo que necesitas para modificar es la variable id\r\n                        //encuentras en firebase la maquina con el id y haces la magia de modificar etc..\r\n                        //lo de maquina a favoritos es facil , si es 1 es favoirto si es 2 no lo es.\r\n                        //ejemplo\r\n                        /*Intent intent = new Intent(getBaseContext(), MainActivity.class);//Main por tu clase\r\n                        intent.putExtra(\"machine\", id);\r\n                        startActivity(intent);*/\r\n                    }\r\n                });\r\n                btncancel.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        bottomSheetDialog.cancel();\r\n                    }\r\n                });\r\n                bottomSheetDialog.show();\r\n\r\n\r\n            }\r\n        });\r\n\r\n        FloatingActionButton addbtn = (FloatingActionButton) findViewById(R.id.button_add_machine);\r\n        addbtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent (getApplicationContext(), AddMachine.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        adapter.stopListening();\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        adapter.startListening();\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
--+++ app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(date 1609606384560)
--@@ -50,7 +50,7 @@
--         //Query
--         Query query=firebaseFirestore
--                 .collection("Machine")
---                .whereEqualTo("userUID", uid)
--+               .whereEqualTo("userUID", uid)
--                 .orderBy("priority",Query.Direction.ASCENDING);
--         //RecyclerView
--         FirestoreRecyclerOptions<MachineModel> options=new FirestoreRecyclerOptions.Builder<MachineModel>()
--Index: app/src/main/java/com/example/infinitycrop/ui/login/LogActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.login;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity2;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.MainActivityMachineList;\r\nimport com.example.infinitycrop.ui.logmail.LoginActivity;\r\nimport com.facebook.AccessToken;\r\nimport com.facebook.AccessTokenTracker;\r\nimport com.facebook.CallbackManager;\r\nimport com.facebook.FacebookCallback;\r\nimport com.facebook.FacebookException;\r\nimport com.facebook.login.LoginResult;\r\nimport com.facebook.login.widget.LoginButton;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInAccount;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.common.SignInButton;\r\nimport com.google.android.gms.common.api.ApiException;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthCredential;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FacebookAuthProvider;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.auth.GoogleAuthProvider;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.facebook.FacebookSdk;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\n\r\npublic class LogActivity extends AppCompatActivity{\r\n    /*private GoogleApiClient googleApiClient;\r\n    private SignInButton signInButton;\r\n    public static final int SIGN_IN_CODE = 777;*/\r\n    //Variable para gestionar FirebaseAuth\r\n    private FirebaseAuth mAuth;\r\n    //Agregar cliente de inicio de sesión de Google\r\n    private GoogleSignInClient mGoogleSignInClient;\r\n    //Constante\r\n    int RC_SIGN_IN = 1;\r\n    SignInButton btnLogin,btnGoogle;\r\n    String TAG = \"GoogleSignIn\";\r\n\r\n    private FirebaseAuth.AuthStateListener authStateListener;\r\n    private AccessTokenTracker accessTokenTracker;\r\n    private LoginButton loginButtonFacebook;\r\n    private CallbackManager mCallbackManager;\r\n    private  static  final String TAG2 = \"FacebookAuthentication\";\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.fragment_login);\r\n        /*GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestEmail()\r\n                .build();\r\n        googleApiClient = new GoogleApiClient.Builder(this)\r\n        .enableAutoManage(this, this)\r\n        .addApi(Auth.GOOGLE_SIGN_IN_API,gso)\r\n        .build();\r\n        signInButton =findViewById(R.id.btn_google);\r\n        signInButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = Auth.GoogleSignInApi.getSignInIntent(googleApiClient);\r\n                startActivityForResult(intent,SIGN_IN_CODE);\r\n            }\r\n        });*/\r\n\r\n        //Botones\r\n        btnGoogle=findViewById(R.id.btn_google);\r\n        loginButtonFacebook = findViewById(R.id.btn_facebook);\r\n        loginButtonFacebook.setReadPermissions(\"email\",\"public_profile\");\r\n\r\n        //Listeners\r\n        btnGoogle.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                signIn();\r\n            }\r\n        });\r\n\r\n        // Configurar Google Sign In\r\n        GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestIdToken(getString(R.string.default_web_client_id))\r\n                .requestEmail()\r\n                .build();\r\n        // Crear un GoogleSignInClient con las opciones especificadas por gso.\r\n        mGoogleSignInClient = GoogleSignIn.getClient(this, gso);\r\n\r\n\r\n\r\n        // Inicializar Firebase Auth\r\n        mAuth = FirebaseAuth.getInstance();\r\n        FacebookSdk.sdkInitialize(getApplicationContext());\r\n\r\n        //Facebook\r\n        mCallbackManager = CallbackManager.Factory.create();\r\n        loginButtonFacebook.registerCallback(mCallbackManager, new FacebookCallback<LoginResult>() {\r\n            @Override\r\n            public void onSuccess(LoginResult loginResult) {\r\n                Log.d(TAG2,\"onSuccess\"+loginResult);\r\n                handleFacebookToken(loginResult.getAccessToken());\r\n            }\r\n\r\n            @Override\r\n            public void onCancel() {\r\n                Log.d(TAG2,\"onCancel\");\r\n            }\r\n\r\n            @Override\r\n            public void onError(FacebookException error) {\r\n                Log.d(TAG2,\"onError: \"+error);\r\n            }\r\n\r\n        });\r\n\r\n        authStateListener = new FirebaseAuth.AuthStateListener() {\r\n            @Override\r\n            public void onAuthStateChanged(@NonNull FirebaseAuth firebaseAuth) {\r\n                FirebaseUser user = firebaseAuth.getCurrentUser();\r\n                if(user!=null){\r\n                    Intent dashboardActivity = new Intent(LogActivity.this, MainActivityMachineList.class);\r\n                    startActivity(dashboardActivity);\r\n                    LogActivity.this.finish();\r\n                }\r\n            }\r\n        };\r\n\r\n        accessTokenTracker = new AccessTokenTracker() {\r\n            @Override\r\n            protected void onCurrentAccessTokenChanged(AccessToken oldAccessToken, AccessToken currentAccessToken) {\r\n                if(currentAccessToken == null){\r\n                    mAuth.signOut();\r\n                }\r\n            }\r\n        };\r\n\r\n    }\r\n    private void signIn() {\r\n        Intent signInIntent = mGoogleSignInClient.getSignInIntent();\r\n        startActivityForResult(signInIntent, RC_SIGN_IN);\r\n    }\r\n\r\n    @Override\r\n    public void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        mCallbackManager.onActivityResult(requestCode,resultCode,data);\r\n\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        //Resultado devuelto al iniciar el Intent de GoogleSignInApi.getSignInIntent (...);\r\n        // Result returned from launching the Intent from GoogleSignInApi.getSignInIntent(...);\r\n        if (requestCode == RC_SIGN_IN) {\r\n            Task<GoogleSignInAccount> task = GoogleSignIn.getSignedInAccountFromIntent(data);\r\n            if(task.isSuccessful()){\r\n                try {\r\n                    // Google Sign In was successful, authenticate with Firebase\r\n                    GoogleSignInAccount account = task.getResult(ApiException.class);\r\n                    Log.d(TAG, \"firebaseAuthWithGoogle:\" + account.getId());\r\n                    firebaseAuthWithGoogle(account.getIdToken());\r\n                } catch (ApiException e) {\r\n                    // Google Sign In fallido, actualizar GUI\r\n                    Log.w(TAG, \"Google sign in failed\", e);\r\n                }\r\n            }else{\r\n                Log.d(TAG, \"Error, login no exitoso:\" + task.getException().toString());\r\n                Toast.makeText(this, \"Ocurrio un error. \"+task.getException().toString(),\r\n                        Toast.LENGTH_LONG).show();\r\n            }\r\n        }\r\n    }\r\n    private void firebaseAuthWithGoogle(String idToken) {\r\n        AuthCredential credential = GoogleAuthProvider.getCredential(idToken, null);\r\n        mAuth.signInWithCredential(credential)\r\n                .addOnCompleteListener(this, new OnCompleteListener<AuthResult>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<AuthResult> task) {\r\n                        if (task.isSuccessful()) {\r\n                            FirebaseFirestore db=FirebaseFirestore.getInstance();\r\n                            String userID= mAuth.getCurrentUser().getUid();\r\n                            String name= mAuth.getCurrentUser().getDisplayName();\r\n                            String mail= mAuth.getCurrentUser().getEmail();\r\n                            Map<String, Object> data = new HashMap<>();\r\n                            data.put(\"username\", name);\r\n                            data.put(\"mail\", mail);\r\n                            db.collection(\"Usuarios\").document(userID)\r\n                                    .set(data);\r\n                            /*db.collection(\"Usuarios\").document(userID)\r\n                                    .collection(\"Maquinas\").document(\"fecha\")\r\n                                    .set(data);*/\r\n\r\n                            // Sign in success, update UI with the signed-in user's information\r\n                            Log.d(TAG, \"signInWithCredential:success\");\r\n                            //FirebaseUser user = mAuth.getCurrentUser();\r\n                            //Iniciar DASHBOARD u otra actividad luego del SigIn Exitoso\r\n                            Intent dashboardActivity = new Intent(LogActivity.this, IntroductoryActivity2.class);\r\n                            startActivity(dashboardActivity);\r\n                            LogActivity.this.finish();\r\n                        } else {\r\n                            // If sign in fails, display a message to the user.\r\n                            Log.w(TAG, \"signInWithCredential:failure\", task.getException());\r\n\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n    @Override\r\n    protected void onStart() {\r\n        FirebaseUser user = mAuth.getCurrentUser();\r\n        if(user!=null){ //si no es null el usuario ya esta logueado\r\n            //mover al usuario al dashboard\r\n            Intent dashboardActivity = new Intent(LogActivity.this, MainActivityMachineList.class);\r\n            startActivity(dashboardActivity);\r\n        }\r\n        super.onStart();\r\n        mAuth.addAuthStateListener(authStateListener);\r\n    }\r\n    //metodo para navegar entre activitys con los botones\r\n    public void Email (View view){\r\n        Intent email = new Intent(this, LoginActivity.class);\r\n        startActivity(email);\r\n    }\r\n   /* @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if(requestCode == SIGN_IN_CODE){\r\n            GoogleSignInResult result = Auth.GoogleSignInApi.getSignInResultFromIntent(data);\r\n            handleSignResult(result);\r\n        }\r\n    }\r\n\r\n    private void handleSignResult(GoogleSignInResult result) {\r\n        if (result.isSuccess()){\r\n            goMainScreen();\r\n        }else{\r\n            Toast.makeText(this, \"Error al iniciar sesión\", Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void goMainScreen() {\r\n       Intent intent=new Intent(this, MainActivity.class);\r\n       startActivity(intent);\r\n    }\r\n\r\n    //metodo para navegar entre activitys con los botones\r\n    public void Email (View view){\r\n        Intent email = new Intent(this, LoginActivity.class);\r\n        startActivity(email);\r\n    }\r\n\r\n    @Override\r\n    public void onConnectionFailed(@NonNull ConnectionResult connectionResult) {\r\n\r\n    }*/\r\n    //Funciones Login con facebook\r\n    private void handleFacebookToken(AccessToken token){\r\n        Log.d(TAG2,\"handleFacebookToken\" + token);\r\n\r\n        AuthCredential credential = FacebookAuthProvider.getCredential(token.getToken());\r\n        mAuth.signInWithCredential(credential).addOnCompleteListener(this, new OnCompleteListener<AuthResult>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<AuthResult> task) {\r\n                if(task.isSuccessful()){\r\n                    Log.d(TAG2,\"sing in with credential: successfully\");\r\n                    FirebaseUser user = mAuth.getCurrentUser();\r\n                    if(user!=null){ //si no es null el usuario ya esta logueado\r\n                        Intent dashboardActivity = new Intent(LogActivity.this, MainActivityMachineList.class);\r\n                        startActivity(dashboardActivity);\r\n                    }\r\n                }else{\r\n                    Log.d(TAG2,\"sing in with credential: failed\", task.getException());\r\n                    Toast.makeText(LogActivity.this,\"Authentication Failed\", Toast.LENGTH_SHORT);\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        if(authStateListener != null){\r\n            mAuth.removeAuthStateListener(authStateListener);\r\n            finish();\r\n        }\r\n    }\r\n\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/login/LogActivity.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
--+++ app/src/main/java/com/example/infinitycrop/ui/login/LogActivity.java	(date 1609520835136)
--@@ -63,7 +63,7 @@
--     @Override
--     protected void onCreate(Bundle savedInstanceState) {
--         super.onCreate(savedInstanceState);
---        setContentView(R.layout.fragment_login);
--+       /* setContentView(R.layout.fragment_login);*/
--         /*GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)
--                 .requestEmail()
--                 .build();
--Index: app/src/main/java/com/example/infinitycrop/ui/logmail/RegisterActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.logmail;\r\n\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.text.TextUtils;\r\nimport android.view.View;\r\nimport android.widget.EditText;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity2;\r\nimport com.example.infinitycrop.R;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseAuthUserCollisionException;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class RegisterActivity extends AppCompatActivity {\r\n    //objetos visibles\r\n    private EditText Textmail;\r\n    private EditText Textname;\r\n    private EditText Textpassword;\r\n    private LinearLayout Btnregistrar;\r\n    private ProgressDialog progressDialog;\r\n    //objeto firebase\r\n    private FirebaseAuth mAuth;\r\n    private FirebaseFirestore fStore;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_register);\r\n        mAuth = FirebaseAuth.getInstance();\r\n        fStore=FirebaseFirestore.getInstance();\r\n        //referenciamos los views\r\n        Textmail = (EditText) findViewById(R.id.editTextTextPersonName);\r\n        Textname = (EditText) findViewById(R.id.editTextTextPersonName2);\r\n        Textpassword = (EditText) findViewById(R.id.editTextTextPassword);\r\n\r\n        Btnregistrar = (LinearLayout) findViewById(R.id.btn_login);\r\n        progressDialog =new ProgressDialog(this);\r\n\r\n        //atacamos el listener al boton\r\n        Btnregistrar.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                onclick(v);\r\n            }\r\n        });\r\n\r\n\r\n\r\n    }\r\n    public void onclick(View view){\r\n        //invocamos al metodo\r\n        registrarUsuario();\r\n    }\r\n    private void registrarUsuario(){\r\n        //obtendremos el email y la contraseña desde la caja de texto\r\n        final String email = Textmail.getText().toString().trim();\r\n        final String nombre = Textname.getText().toString().trim();\r\n        String password = Textpassword.getText().toString().trim();\r\n\r\n        //verificamos si las cajas estan vacias o no\r\n        if(TextUtils.isEmpty(email)){\r\n            Toast.makeText(this,\"Debes introducir un correo\",Toast.LENGTH_LONG).show();\r\n            return;\r\n        }\r\n        if(TextUtils.isEmpty(password)){\r\n            Toast.makeText(this,\"Debes introducir una contraseña\",Toast.LENGTH_LONG).show();\r\n            return;\r\n        }\r\n        if(TextUtils.isEmpty(nombre)){\r\n            Toast.makeText(this,\"Debes introducir una nombre\",Toast.LENGTH_LONG).show();\r\n            return;\r\n        }\r\n        progressDialog.setMessage(\"Registrando obteniendo contenido en línea...\");\r\n        progressDialog.show();\r\n        //creando un nuevo usuario\r\n        mAuth.createUserWithEmailAndPassword(email,password).addOnCompleteListener( this, new OnCompleteListener<AuthResult>() {\r\n\r\n            @Override\r\n            public void onComplete(@NonNull Task<AuthResult> task) {\r\n                //comprovar si el resultado ha sido resuelto correctamente\r\n                if (task.isSuccessful()) {\r\n\r\n                    //enviar coorreo de confirmación\r\n                    FirebaseUser user = mAuth.getCurrentUser();\r\n                    user.sendEmailVerification().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            Toast.makeText(RegisterActivity.this,\"Verification has been send\",Toast.LENGTH_SHORT);\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n\r\n                            Toast.makeText(RegisterActivity.this,\"Error en el envío de correo\",Toast.LENGTH_SHORT);\r\n                        }\r\n                    });\r\n\r\n                    String userID= mAuth.getCurrentUser().getUid();\r\n                    DocumentReference documentReference=fStore.collection(\"Usuarios\").document(userID);\r\n                    Map<String,Object> datauser=new HashMap<>();\r\n                    datauser.put(\"username\",nombre);\r\n                    datauser.put(\"mail\",email);\r\n                    documentReference.set(datauser).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            Toast.makeText(RegisterActivity.this, \"Iniciando sesión\", Toast.LENGTH_LONG).show();\r\n                            Intent intencion = new Intent (getApplication(), IntroductoryActivity2.class);\r\n                            startActivity(intencion);\r\n                            finish();\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n\r\n                        }\r\n                    });\r\n\r\n\r\n\r\n                } else {\r\n                    if (task.getException() instanceof FirebaseAuthUserCollisionException) {//si se presenta una colisión\r\n                        Toast.makeText(RegisterActivity.this, \"Este Usuario ya existe\", Toast.LENGTH_SHORT).show();\r\n                    } else {\r\n                        Toast.makeText(RegisterActivity.this, \"No se puede registrar este usuario\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n\r\n                }\r\n                progressDialog.dismiss();\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void onStop() {\r\n        finish();\r\n        super.onStop();\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/logmail/RegisterActivity.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
--+++ app/src/main/java/com/example/infinitycrop/ui/logmail/RegisterActivity.java	(date 1609552727772)
--@@ -149,9 +149,5 @@
--         });
--     }
-- 
---    @Override
---    public void onStop() {
---        finish();
---        super.onStop();
---    }
--+
-- }
--Index: app/src/main/java/com/example/infinitycrop/ui/LoadAnimations/IntroductoryActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.LoadAnimations;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.app.Activity;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.os.CountDownTimer;\r\nimport android.widget.ImageView;\r\n\r\nimport com.airbnb.lottie.LottieAnimationView;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.login.LogActivity;\r\n\r\nimport static java.security.AccessController.getContext;\r\n\r\npublic class IntroductoryActivity extends AppCompatActivity {\r\n    ImageView logo,splashImg;\r\n    LottieAnimationView lottieAnimationView;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_introductory);\r\n        logo = findViewById(R.id.log);\r\n        splashImg = findViewById(R.id.img);\r\n        lottieAnimationView = findViewById(R.id.lottie);\r\n\r\n        splashImg.animate().translationY(-4000).setDuration(1000).setStartDelay(4000);\r\n        logo.animate().translationY(4000).setDuration(1000).setStartDelay(4000);\r\n        lottieAnimationView.animate().translationY(1600).setDuration(800).setStartDelay(3900);\r\n\r\n        if (this.equals(0)) {\r\n            finish();\r\n        }\r\n        new CountDownTimer(4660, 1000) {\r\n\r\n            public void onTick(long millisUntilFinished) {\r\n\r\n\r\n            }\r\n\r\n\r\n            public void onFinish() {\r\n                Intent intent= new Intent (getApplicationContext(), LogActivity.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n\r\n        }.start();\r\n\r\n    }\r\n    @Override\r\n    public void onStop() {\r\n        finish();\r\n        super.onStop();\r\n    }\r\n\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/LoadAnimations/IntroductoryActivity.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
--+++ app/src/main/java/com/example/infinitycrop/ui/LoadAnimations/IntroductoryActivity.java	(date 1609520835167)
--@@ -28,7 +28,7 @@
-- 
--         splashImg.animate().translationY(-4000).setDuration(1000).setStartDelay(4000);
--         logo.animate().translationY(4000).setDuration(1000).setStartDelay(4000);
---        lottieAnimationView.animate().translationY(1600).setDuration(800).setStartDelay(3900);
--+        lottieAnimationView.animate().translationY(1400).setDuration(800).setStartDelay(3900);
-- 
--         if (this.equals(0)) {
--             finish();
--@@ -42,7 +42,7 @@
-- 
-- 
--             public void onFinish() {
---                Intent intent= new Intent (getApplicationContext(), LogActivity.class);
--+                Intent intent= new Intent (getApplicationContext(), LogprimeraActivity.class);
--                 startActivity(intent);
-- 
--             }
--Index: app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.profile;\r\n\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.graphics.Bitmap;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.util.LruCache;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.android.volley.RequestQueue;\r\nimport com.android.volley.toolbox.ImageLoader;\r\nimport com.android.volley.toolbox.NetworkImageView;\r\nimport com.android.volley.toolbox.Volley;\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.MainActivityMachineList;\r\nimport com.example.infinitycrop.ui.login.LogActivity;\r\nimport com.example.infinitycrop.ui.profile.settings.AboutInfinityCrap;\r\nimport com.example.infinitycrop.ui.profile.settings.HelpProfile;\r\n//import com.example.infinitycrop.ui.profile.settings.ModifyProfile;\r\nimport com.firebase.ui.auth.AuthUI;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link ProfileFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class ProfileFragment extends Fragment {\r\n    //atributos para confirmación de correo\r\n    private FirebaseUser us;\r\n    private TextView txtverf;\r\n    private Button btnconf;\r\n\r\n\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public ProfileFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment ProfileFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static ProfileFragment newInstance(String param1, String param2) {\r\n        ProfileFragment fragment = new ProfileFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_profile, container, false);\r\n\r\n        ImageView irAPerfil =v.findViewById(R.id.irAEditarPerfil);\r\n        irAPerfil.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                /*Intent intent = new Intent(getActivity(), ModifyProfile.class);\r\n                startActivity(intent);*/\r\n            }\r\n        });\r\n\r\n        //Enlaces de los botones de configuracion\r\n        //personalice colors\r\n        RelativeLayout customColors_btn =v.findViewById(R.id.relativeLayout4);\r\n        customColors_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n            }\r\n        });\r\n        //about us\r\n        RelativeLayout aboutInfinity_btn =v.findViewById(R.id.relativeLayout6);\r\n        aboutInfinity_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), AboutInfinityCrap.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        //help\r\n        RelativeLayout help_profile =v.findViewById(R.id.relativeLayout5);\r\n        help_profile.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), HelpProfile.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        //firebase\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=mAuth.getCurrentUser().getUid();\r\n        final GoogleSignInClient mGoogleSignInClient;\r\n        GoogleSignInOptions gso;\r\n        final FirebaseUser usuario = FirebaseAuth.getInstance().getCurrentUser();\r\n        //guardo la imagen en un ImagenView\r\n        final ImageView img = (ImageView) v.findViewById(R.id.profile);\r\n        //guardo el nombre en un textView\r\n        final TextView nombre = (TextView) v.findViewById(R.id.username);\r\n        nombre.setText(usuario.getDisplayName());\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(nombre.getText() == \"\"){\r\n                    nombre.setText(snapshot.getString(\"username\"));\r\n                    img.setImageResource(R.drawable.icons_user);\r\n                }\r\n            }\r\n        });\r\n\r\n        //guardo el mail en un textView\r\n        TextView correo = (TextView) v.findViewById(R.id.mailUser);\r\n        correo.setText(usuario.getEmail());\r\n        //cargar imágen con glide:\r\n        Glide.with(this).load(usuario.getPhotoUrl()).into(img);\r\n        //boton cerrar sesion\r\n\r\n        //Configurar las gso para google signIn con el fin de luego desloguear de google\r\n        gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestIdToken(getString(R.string.default_web_client_id))\r\n                .requestEmail()\r\n                .build();\r\n        mGoogleSignInClient = GoogleSignIn.getClient(getActivity(), gso);\r\n\r\n        RelativeLayout cerrarSesion =(RelativeLayout) v.findViewById(R.id.btn_end_session);\r\n        cerrarSesion.setOnClickListener(new View.OnClickListener() {\r\n            public void onClick(View view) {\r\n                new AlertDialog.Builder(requireContext())\r\n                        .setTitle(\"Cerrar sesión\")\r\n                        .setMessage(\"¿Estas seguro que quieres cerrar sesión?\")\r\n                        .setPositiveButton(\"Confirmar\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n                                //Cerrar session con Firebase\r\n                                mAuth.signOut();\r\n                                //Cerrar sesión con google tambien: Google sign out\r\n                                mGoogleSignInClient.signOut().addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                                    @Override\r\n                                    public void onComplete(@NonNull Task<Void> task) {\r\n                                        //Abrir MainActivity con SigIn button\r\n                                        if(task.isSuccessful()){\r\n                                            Intent logActivity = new Intent(getActivity().getApplicationContext(), LogActivity.class);\r\n                                            startActivity(logActivity);\r\n                                            getActivity().finish();\r\n                                        }else{\r\n                                            Toast.makeText(getActivity().getApplicationContext(), \"No se pudo cerrar sesión con google\",\r\n                                                    Toast.LENGTH_LONG).show();\r\n                                        }\r\n                                    }\r\n                                });\r\n\r\n                            }\r\n                        })\r\n                        .setNegativeButton(\"Cancelar\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                            }\r\n                        })\r\n                        .show();\r\n\r\n\r\n            }\r\n        });\r\n\r\n        //Confirmación de verificación de correo\r\n        TextView txtverify = (TextView) v.findViewById(R.id.txtVerif);\r\n        Button btnverify = (Button) v.findViewById(R.id.btnverif);\r\n        final FirebaseUser user = mAuth.getCurrentUser();\r\n        if(!user.isEmailVerified()){\r\n            us=user;\r\n            txtverf = txtverify;\r\n            btnconf = btnverify;\r\n\r\n            txtverify.setVisibility(View.VISIBLE);\r\n            btnverify.setVisibility(View.VISIBLE);\r\n\r\n            btnverify.setOnClickListener(new View.OnClickListener()\r\n            {\r\n                @Override\r\n                public void onClick(final View v)\r\n                {\r\n\r\n                    FirebaseUser user = mAuth.getCurrentUser();\r\n                    user.sendEmailVerification().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            Toast.makeText(getActivity(),\"Enviando correo de confirmación\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n\r\n                            Toast.makeText(getActivity(),\"Error en el envío de correo\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            /*}else{\r\n            txtverify.setVisibility(View.GONE);\r\n            btnverify.setVisibility(View.GONE);*/\r\n        }\r\n        /*RequestQueue colaPeticiones = Volley.newRequestQueue(getActivity()\r\n                .getApplicationContext());\r\n        ImageLoader lectorImagenes = new ImageLoader(colaPeticiones,\r\n                new ImageLoader.ImageCache() {\r\n                    private final LruCache<String, Bitmap> cache =\r\n                            new LruCache<String, Bitmap>(10);\r\n                    public void putBitmap(String url, Bitmap bitmap) {\r\n                        cache.put(url, bitmap);\r\n                    }\r\n                    public Bitmap getBitmap(String url) {\r\n                        return cache.get(url);\r\n                    }\r\n                });\r\n        Uri urlImagen = usuario.getPhotoUrl();\r\n        if (urlImagen != null) {\r\n            NetworkImageView fotoUsuario = (NetworkImageView)\r\n                    v.findViewById(R.id.profile);\r\n            fotoUsuario.setImageUrl(urlImagen.toString(), lectorImagenes);\r\n        }else{\r\n            NetworkImageView fotoUsuario = (NetworkImageView)\r\n                    v.findViewById(R.id.profile);\r\n            fotoUsuario.setImageUrl(String.valueOf(R.drawable.icons_user), lectorImagenes);\r\n        }*/\r\n        return v;\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
--+++ app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java	(date 1609520835174)
--@@ -32,7 +32,7 @@
-- import com.example.infinitycrop.ui.login.LogActivity;
-- import com.example.infinitycrop.ui.profile.settings.AboutInfinityCrap;
-- import com.example.infinitycrop.ui.profile.settings.HelpProfile;
---//import com.example.infinitycrop.ui.profile.settings.ModifyProfile;
--+/*import com.example.infinitycrop.ui.profile.settings.ModifyProfile;*/
-- import com.firebase.ui.auth.AuthUI;
-- import com.google.android.gms.auth.api.signin.GoogleSignIn;
-- import com.google.android.gms.auth.api.signin.GoogleSignInClient;
--@@ -112,7 +112,7 @@
--         irAPerfil.setOnClickListener(new View.OnClickListener() {
--             @Override
--             public void onClick(View v) {
---                /*Intent intent = new Intent(getActivity(), ModifyProfile.class);
--+               /* Intent intent = new Intent(getActivity(), ModifyProfile.class);
--                 startActivity(intent);*/
--             }
--         });
--Index: app/src/main/java/com/example/infinitycrop/ui/OnBoardingFragment/OnBoardingFragment4.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.OnBoardingFragment;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.AddMachine;\r\n\r\npublic class OnBoardingFragment4 extends Fragment {\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        final ViewGroup root = (ViewGroup) inflater.inflate(R.layout.fragment_on_boarding4,container,false);\r\n        TextView button = (TextView) root.findViewById(R.id.btn_skip);\r\n        button.setOnClickListener(new View.OnClickListener()\r\n        {\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                Intent intent = new Intent((getActivity().getApplication()), AddMachine.class);\r\n                TextView editText = (TextView) root.findViewById(R.id.btn_skip);\r\n\r\n                startActivity(intent);\r\n\r\n            }\r\n        });\r\n        Button button1 = (Button) root.findViewById(R.id.btn_start);\r\n        button1.setOnClickListener(new View.OnClickListener()\r\n        {\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                Intent i = new Intent((getActivity().getApplication()), AddMachine.class);\r\n                Button button1 = (Button) root.findViewById(R.id.btn_start);\r\n                startActivity(i);\r\n            }\r\n        });\r\n\r\n        return root;\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/OnBoardingFragment/OnBoardingFragment4.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
--+++ app/src/main/java/com/example/infinitycrop/ui/OnBoardingFragment/OnBoardingFragment4.java	(date 1609520835179)
--@@ -17,6 +17,7 @@
--     @Override
--     public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
--         final ViewGroup root = (ViewGroup) inflater.inflate(R.layout.fragment_on_boarding4,container,false);
--+
--         TextView button = (TextView) root.findViewById(R.id.btn_skip);
--         button.setOnClickListener(new View.OnClickListener()
--         {
--@@ -30,6 +31,7 @@
-- 
--             }
--         });
--+
--         Button button1 = (Button) root.findViewById(R.id.btn_start);
--         button1.setOnClickListener(new View.OnClickListener()
--         {
--diff --git .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44__Default_Changelist_.xml
--diff --git .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02__Default_Changelist_.xml
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_29_12_2020_0_38_[Default_Changelist]/shelved.patch
-===================================================================
---- .idea/shelf/Uncommitted_changes_before_Update_at_29_12_2020_0_38_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-+++ .idea/shelf/Uncommitted_changes_before_Update_at_29_12_2020_0_38_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-@@ -1,47 +0,0 @@
--Index: app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.profile;\r\n\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.graphics.Bitmap;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.util.LruCache;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.android.volley.RequestQueue;\r\nimport com.android.volley.toolbox.ImageLoader;\r\nimport com.android.volley.toolbox.NetworkImageView;\r\nimport com.android.volley.toolbox.Volley;\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.MainActivityMachineList;\r\nimport com.example.infinitycrop.ui.login.LogActivity;\r\nimport com.example.infinitycrop.ui.profile.settings.AboutInfinityCrap;\r\nimport com.example.infinitycrop.ui.profile.settings.HelpProfile;\r\nimport com.example.infinitycrop.ui.profile.settings.ModifyProfile;\r\nimport com.firebase.ui.auth.AuthUI;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link ProfileFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class ProfileFragment extends Fragment {\r\n    //atributos para confirmación de correo\r\n    private FirebaseUser us;\r\n    private TextView txtverf;\r\n    private Button btnconf;\r\n\r\n\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public ProfileFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment ProfileFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static ProfileFragment newInstance(String param1, String param2) {\r\n        ProfileFragment fragment = new ProfileFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_profile, container, false);\r\n\r\n        ImageView irAPerfil =v.findViewById(R.id.irAEditarPerfil);\r\n        irAPerfil.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), ModifyProfile.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n        //Enlaces de los botones de configuracion\r\n        //personalice colors\r\n        RelativeLayout customColors_btn =v.findViewById(R.id.relativeLayout4);\r\n        customColors_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n            }\r\n        });\r\n        //about us\r\n        RelativeLayout aboutInfinity_btn =v.findViewById(R.id.relativeLayout6);\r\n        aboutInfinity_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), AboutInfinityCrap.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        //help\r\n        RelativeLayout help_profile =v.findViewById(R.id.relativeLayout5);\r\n        help_profile.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), HelpProfile.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        //firebase\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=mAuth.getCurrentUser().getUid();\r\n        final GoogleSignInClient mGoogleSignInClient;\r\n        GoogleSignInOptions gso;\r\n        final FirebaseUser usuario = FirebaseAuth.getInstance().getCurrentUser();\r\n        //guardo la imagen en un ImagenView\r\n        final ImageView img = (ImageView) v.findViewById(R.id.profile);\r\n        //guardo el nombre en un textView\r\n        final TextView nombre = (TextView) v.findViewById(R.id.username);\r\n        nombre.setText(usuario.getDisplayName());\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(nombre.getText() == \"\"){\r\n                    nombre.setText(snapshot.getString(\"username\"));\r\n                    img.setImageResource(R.drawable.icons_user);\r\n                }\r\n            }\r\n        });\r\n\r\n        //guardo el mail en un textView\r\n        TextView correo = (TextView) v.findViewById(R.id.mailUser);\r\n        correo.setText(usuario.getEmail());\r\n        //cargar imágen con glide:\r\n        Glide.with(this).load(usuario.getPhotoUrl()).into(img);\r\n        //boton cerrar sesion\r\n\r\n        //Configurar las gso para google signIn con el fin de luego desloguear de google\r\n        gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestIdToken(getString(R.string.default_web_client_id))\r\n                .requestEmail()\r\n                .build();\r\n        mGoogleSignInClient = GoogleSignIn.getClient(getActivity(), gso);\r\n\r\n        RelativeLayout cerrarSesion =(RelativeLayout) v.findViewById(R.id.btn_end_session);\r\n        cerrarSesion.setOnClickListener(new View.OnClickListener() {\r\n            public void onClick(View view) {\r\n                new AlertDialog.Builder(requireContext())\r\n                        .setTitle(\"Cerrar sesión\")\r\n                        .setMessage(\"¿Estas seguro que quieres cerrar sesión?\")\r\n                        .setPositiveButton(\"Confirmar\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n                                //Cerrar session con Firebase\r\n                                mAuth.signOut();\r\n                                //Cerrar sesión con google tambien: Google sign out\r\n                                mGoogleSignInClient.signOut().addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                                    @Override\r\n                                    public void onComplete(@NonNull Task<Void> task) {\r\n                                        //Abrir MainActivity con SigIn button\r\n                                        if(task.isSuccessful()){\r\n                                            Intent logActivity = new Intent(getActivity().getApplicationContext(), LogActivity.class);\r\n                                            startActivity(logActivity);\r\n                                            getActivity().finish();\r\n                                        }else{\r\n                                            Toast.makeText(getActivity().getApplicationContext(), \"No se pudo cerrar sesión con google\",\r\n                                                    Toast.LENGTH_LONG).show();\r\n                                        }\r\n                                    }\r\n                                });\r\n\r\n                            }\r\n                        })\r\n                        .setNegativeButton(\"Cancelar\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                            }\r\n                        })\r\n                        .show();\r\n\r\n\r\n            }\r\n        });\r\n\r\n        //Confirmación de verificación de correo\r\n        TextView txtverify = (TextView) v.findViewById(R.id.txtVerif);\r\n        Button btnverify = (Button) v.findViewById(R.id.btnverif);\r\n        final FirebaseUser user = mAuth.getCurrentUser();\r\n        if(!user.isEmailVerified()){\r\n            us=user;\r\n            txtverf = txtverify;\r\n            btnconf = btnverify;\r\n\r\n            txtverify.setVisibility(View.VISIBLE);\r\n            btnverify.setVisibility(View.VISIBLE);\r\n\r\n            btnverify.setOnClickListener(new View.OnClickListener()\r\n            {\r\n                @Override\r\n                public void onClick(final View v)\r\n                {\r\n\r\n                    FirebaseUser user = mAuth.getCurrentUser();\r\n                    user.sendEmailVerification().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            Toast.makeText(getActivity(),\"Enviando correo de confirmación\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n\r\n                            Toast.makeText(getActivity(),\"Error en el envío de correo\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            /*}else{\r\n            txtverify.setVisibility(View.GONE);\r\n            btnverify.setVisibility(View.GONE);*/\r\n        }\r\n        /*RequestQueue colaPeticiones = Volley.newRequestQueue(getActivity()\r\n                .getApplicationContext());\r\n        ImageLoader lectorImagenes = new ImageLoader(colaPeticiones,\r\n                new ImageLoader.ImageCache() {\r\n                    private final LruCache<String, Bitmap> cache =\r\n                            new LruCache<String, Bitmap>(10);\r\n                    public void putBitmap(String url, Bitmap bitmap) {\r\n                        cache.put(url, bitmap);\r\n                    }\r\n                    public Bitmap getBitmap(String url) {\r\n                        return cache.get(url);\r\n                    }\r\n                });\r\n        Uri urlImagen = usuario.getPhotoUrl();\r\n        if (urlImagen != null) {\r\n            NetworkImageView fotoUsuario = (NetworkImageView)\r\n                    v.findViewById(R.id.profile);\r\n            fotoUsuario.setImageUrl(urlImagen.toString(), lectorImagenes);\r\n        }else{\r\n            NetworkImageView fotoUsuario = (NetworkImageView)\r\n                    v.findViewById(R.id.profile);\r\n            fotoUsuario.setImageUrl(String.valueOf(R.drawable.icons_user), lectorImagenes);\r\n        }*/\r\n        return v;\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java	(revision 3eb9f21b60ebfff51498bfb1b27f941eaf3f6559)
--+++ app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java	(date 1609175744817)
--@@ -32,7 +32,7 @@
-- import com.example.infinitycrop.ui.login.LogActivity;
-- import com.example.infinitycrop.ui.profile.settings.AboutInfinityCrap;
-- import com.example.infinitycrop.ui.profile.settings.HelpProfile;
---import com.example.infinitycrop.ui.profile.settings.ModifyProfile;
--+/*import com.example.infinitycrop.ui.profile.settings.ModifyProfile;*/
-- import com.firebase.ui.auth.AuthUI;
-- import com.google.android.gms.auth.api.signin.GoogleSignIn;
-- import com.google.android.gms.auth.api.signin.GoogleSignInClient;
--@@ -112,8 +112,8 @@
--         irAPerfil.setOnClickListener(new View.OnClickListener() {
--             @Override
--             public void onClick(View v) {
---                Intent intent = new Intent(getActivity(), ModifyProfile.class);
---                startActivity(intent);
--+              /*  Intent intent = new Intent(getActivity(), ModifyProfile.class);
--+                startActivity(intent);*/
--             }
--         });
-- 
--Index: comun/src/main/java/com/example/comun/Mqtt.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.comun;\r\n\r\npublic class Mqtt {\r\n    public static final String TAG = \"MQTT\";\r\n    public static final String topicRoot=\"infinity/senyal/\";\r\n\r\n\r\n    //Reemplaza equipo por el nombre de tu equipo de prácticas\r\n    public static final int qos = 1;\r\n    public static final String broker = \"tcp://broker.hivemq.com:1883\";\r\n    public static final String clientId = \"IotTestInfinity123434\";\r\n//Reemplaza ClientId con un valor diferente\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- comun/src/main/java/com/example/comun/Mqtt.java	(revision 3eb9f21b60ebfff51498bfb1b27f941eaf3f6559)
--+++ comun/src/main/java/com/example/comun/Mqtt.java	(date 1609175420200)
--@@ -8,6 +8,6 @@
--     //Reemplaza equipo por el nombre de tu equipo de prácticas
--     public static final int qos = 1;
--     public static final String broker = "tcp://broker.hivemq.com:1883";
---    public static final String clientId = "IotTestInfinity123434";
--+    public static final String clientId = "IotTestInfinity1234";
-- //Reemplaza ClientId con un valor diferente
-- }
--\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_29_12_2020_0_38__Default_Changelist_.xml
-===================================================================
---- .idea/shelf/Uncommitted_changes_before_Update_at_29_12_2020_0_38__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-+++ .idea/shelf/Uncommitted_changes_before_Update_at_29_12_2020_0_38__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_29_12_2020_0_38_[Default_Changelist]" date="1609198713127" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_29_12_2020_0_38_[Default_Changelist]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 29/12/2020 0:38 [Default Changelist]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_18_10_[Default_Changelist]/shelved.patch
-===================================================================
---- .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_18_10_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-+++ .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_18_10_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-@@ -1,762 +0,0 @@
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25__Default_Changelist_.xml
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25__Default_Changelist_.xml	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25__Default_Changelist_.xml	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]" date="1607628338928" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 10/12/2020 20:25 [Default Changelist]" />
---</changelist>
--\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]/shelved.patch
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]/shelved.patch	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]/shelved.patch	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
--@@ -1,729 +0,0 @@
---Index: app/src/main/AndroidManifest.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    package=\"com.example.infinitycrop\">\n\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/>\n    <uses-permission android:name=\"android.permission.INTERNET\"/>\n    <!--Permisos Qr-->\n    <uses-permission android:name=\"android.permission.CAMERA\"/>\n    <uses-feature android:name=\"android.hardware.camera\"></uses-feature>\n    <uses-feature android:name=\"android.hardware.camera.autofocus\"></uses-feature>\n\n    <application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher\"\n        android:theme=\"@style/AppThemeHome\"\n        >\n\n        <activity android:name=\".MainActivity\" android:theme=\"@style/SplashTheme\">\n        </activity>\n\n        <activity android:name=\"com.example.infinitycrop.ui.login.LogActivity\">\n            <intent-filter>\n                <action android:name=\"android.intent.action.MAIN\" />\n                <category android:name=\"android.intent.category.LAUNCHER\" />\n            </intent-filter>\n        </activity>\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\">\n\n        </activity>\n        <activity android:name=\".ui.profile.settings.HelpProfile\">\n\n        </activity>\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\"></activity>\n        <activity android:name=\".ui.list_machine.AddMachine\"></activity>\n        <activity android:name=\".ui.logmail.RegisterActivity\"></activity>\n        <activity android:name=\".ui.logmail.LoginActivity\"></activity>\n        <activity android:name=\".ui.list_machine.CaptureAct\"></activity>\n\n\n\n\n        <meta-data android:name=\"com.google.android.geo.API_KEY\"\n            android:value=\"@string/google_maps_key\" />\n\n        <meta-data android:name=\"com.facebook.sdk.ApplicationId\"\n            tools:replace=\"android:value\"\n            android:value=\"@string/facebook_app_id\"/>\n\n\n    </application>\n\n</manifest>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/AndroidManifest.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
---+++ app/src/main/AndroidManifest.xml	(date 1607539967252)
---@@ -5,6 +5,8 @@
--- 
---     <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
---     <uses-permission android:name="android.permission.INTERNET"/>
---+    <uses-permission android:name="com.google.android.things.permission.MANAGE_INPUT_DRIVERS" />
---+    <uses-permission android:name="com.google.android.things.permission.USE_PERIPHERAL_IO" />
---     <!--Permisos Qr-->
---     <uses-permission android:name="android.permission.CAMERA"/>
---     <uses-feature android:name="android.hardware.camera"></uses-feature>
---Index: app/src/main/res/layout/fragment_graphic.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.graphic.GraphicFragment\">\r\n\r\n    <!-- TODO: Update blank fragment layout -->\r\n    <TextView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_centerInParent=\"true\"\r\n        android:textSize=\"50dp\"\r\n        android:text=\"Graphic fragment\" />\r\n\r\n</RelativeLayout>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/res/layout/fragment_graphic.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
---+++ app/src/main/res/layout/fragment_graphic.xml	(date 1607520842759)
---@@ -1,16 +1,64 @@
--- <?xml version="1.0" encoding="utf-8"?>
----<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
---+<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
---     xmlns:tools="http://schemas.android.com/tools"
---     android:layout_width="match_parent"
---     android:layout_height="match_parent"
---+    xmlns:app="http://schemas.android.com/apk/res-auto"
---+    android:background="#EFE9E9"
---     tools:context=".ui.graphic.GraphicFragment">
--- 
----    <!-- TODO: Update blank fragment layout -->
----    <TextView
----        android:layout_width="match_parent"
---+    <androidx.constraintlayout.widget.ConstraintLayout
---+        android:layout_width="match_parent"
---+        android:layout_height="match_parent">
---+
---+
---+        <RelativeLayout
---+            android:id="@+id/relativeLayout2"
---+            android:layout_width="match_parent"
---+            android:layout_height="wrap_content"
---+            android:layout_marginStart="20dp"
---+            android:layout_marginEnd="20dp"
---+            app:layout_constraintBottom_toTopOf="@+id/image_list"
---+            app:layout_constraintEnd_toEndOf="parent"
---+            app:layout_constraintStart_toStartOf="parent"
---+            app:layout_constraintTop_toTopOf="parent">
---+
---+            <TextView
---+                android:id="@+id/textMode"
---+                android:layout_width="wrap_content"
---+                android:layout_height="wrap_content"
---+                android:text="Lista de fotografías  >"
---+
---+                android:textSize="19sp" />
---+
---+            <!--<ImageView
---+                android:layout_width="62dp"
---+                android:layout_height="62dp"
---+                android:layout_alignParentRight="true"
---+                android:src="@drawable/ic_sun" />-->
---+        </RelativeLayout>
---+
---+        <androidx.recyclerview.widget.RecyclerView
---+            android:id="@+id/image_list"
---+            android:layout_width="match_parent"
---+            android:layout_height="match_parent"
---+            android:layout_marginStart="16dp"
---+            android:layout_marginTop="70dp"
---+            android:layout_marginEnd="16dp"
---+            app:layout_constraintBottom_toBottomOf="parent"
---+            app:layout_constraintEnd_toEndOf="parent"
---+            app:layout_constraintStart_toStartOf="parent"
---+            app:layout_constraintTop_toBottomOf="@+id/constraintLayout3" />
---+    </androidx.constraintlayout.widget.ConstraintLayout>
---+
---+
---+    <com.google.android.material.floatingactionbutton.FloatingActionButton
---+        android:id="@+id/button_add_image"
---+        android:layout_width="wrap_content"
---         android:layout_height="wrap_content"
----        android:layout_centerInParent="true"
----        android:textSize="50dp"
----        android:text="Graphic fragment" />
---+        android:layout_gravity="top|end"
---+        android:layout_margin="16dp"
---+
---+        android:src="@drawable/icons_plus" />
--- 
----</RelativeLayout>
---\ No newline at end of file
---+</androidx.coordinatorlayout.widget.CoordinatorLayout>
---\ No newline at end of file
---Index: app/build.gradle
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>apply plugin: 'com.android.application'\n\n\nandroid {\n    compileSdkVersion 30\n    buildToolsVersion \"30.0.2\"\n\n    defaultConfig {\n        applicationId \"com.example.infinitycrop\"\n        minSdkVersion 23\n        targetSdkVersion 30\n        versionCode 1\n        versionName \"1.0\"\n        multiDexEnabled true\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: \"libs\", include: [\"*.jar\"])\n    implementation 'androidx.appcompat:appcompat:1.2.0'\n    implementation 'com.google.android.material:material:1.2.1'\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.2'\n    implementation 'androidx.navigation:navigation-fragment:2.1.0'\n    implementation 'androidx.navigation:navigation-ui:2.1.0'\n    implementation 'androidx.lifecycle:lifecycle-extensions:2.2.0'\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\n    implementation 'com.google.firebase:firebase-auth:16.0.5'\n    implementation 'com.firebaseui:firebase-ui-auth:6.2.0'\n    implementation project(path: ':comun')\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\n    implementation 'com.google.firebase:firebase-analytics'\n    implementation 'com.ismaeldivita.chipnavigation:chip-navigation-bar:1.3.4'\n    implementation 'org.jetbrains.kotlin:kotlin-stdlib:1.4.10'\n    implementation 'androidx.recyclerview:recyclerview:1.1.0'\n    implementation 'com.android.volley:volley:1.1.0'\n    // Also declare the dependency for the Google Play services library and specify its version\n    implementation 'com.google.android.gms:play-services-auth:18.1.0'\n    // Import the BoM for the Firebase platform\n    implementation platform('com.google.firebase:firebase-bom:26.0.0')\n    implementation 'com.google.firebase:firebase-firestore:17.1.2'\n    implementation 'com.android.support:multidex:1.0.3'\n    implementation 'com.firebaseui:firebase-ui-firestore:6.3.0'\n    //biblioteca para mostrar images a través de URL\n    implementation 'com.github.bumptech.glide:glide:4.11.0'\n    //import del mqtt\n    implementation 'org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.1.1'\n    implementation 'com.google.android.gms:play-services-maps:17.0.0'\n    compile 'com.google.android.gms:play-services-location:16.0.0'\n    implementation 'com.journeyapps:zxing-android-embedded:3.4.0'//añadimos esta libreria para qr\n    implementation 'com.facebook.android:facebook-android-sdk:[4,5)'\n\n    implementation \"androidx.viewpager2:viewpager2:1.0.0\" //libreria viewpager\n}\napply plugin: 'com.google.gms.google-services'
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/build.gradle	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
---+++ app/build.gradle	(date 1607543533244)
---@@ -35,6 +35,8 @@
---     implementation 'com.google.firebase:firebase-auth:16.0.5'
---     implementation 'com.firebaseui:firebase-ui-auth:6.2.0'
---     implementation project(path: ':comun')
---+    implementation 'com.google.firebase:firebase-database:19.5.1'
---+    implementation 'com.google.firebase:firebase-storage:19.2.0'
---     testImplementation 'junit:junit:4.12'
---     androidTestImplementation 'androidx.test.ext:junit:1.1.2'
---     androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'
---Index: app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.graphic;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport com.example.infinitycrop.R;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link GraphicFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class GraphicFragment extends Fragment {\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public GraphicFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment GraphicFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static GraphicFragment newInstance(String param1, String param2) {\r\n        GraphicFragment fragment = new GraphicFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        return inflater.inflate(R.layout.fragment_graphic, container, false);\r\n    }\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
---+++ app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java	(date 1607543099075)
---@@ -3,12 +3,19 @@
--- import android.os.Bundle;
--- 
--- import androidx.fragment.app.Fragment;
---+import androidx.recyclerview.widget.LinearLayoutManager;
---+import androidx.recyclerview.widget.RecyclerView;
--- 
--- import android.view.LayoutInflater;
--- import android.view.View;
--- import android.view.ViewGroup;
--- 
--- import com.example.infinitycrop.R;
---+import com.firebase.ui.firestore.FirestoreRecyclerOptions;
---+import com.google.firebase.database.FirebaseDatabase;
---+import com.google.firebase.firestore.FirebaseFirestore;
---+import com.google.firebase.firestore.Query;
---+import com.google.firebase.storage.FirebaseStorage;
--- 
--- /**
---  * A simple {@link Fragment} subclass.
---@@ -16,7 +23,7 @@
---  * create an instance of this fragment.
---  */
--- public class GraphicFragment extends Fragment {
----
---+    private AdaptadorImagenes adaptador;
---     // TODO: Rename parameter arguments, choose names that match
---     // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
---     private static final String ARG_PARAM1 = "param1";
---@@ -61,6 +68,26 @@
---     public View onCreateView(LayoutInflater inflater, ViewGroup container,
---                              Bundle savedInstanceState) {
---         // Inflate the layout for this fragment
----        return inflater.inflate(R.layout.fragment_graphic, container, false);
---+        View v= inflater.inflate(R.layout.fragment_graphic, container, false);
---+
---+        RecyclerView recyclerView = v.findViewById(R.id.image_list);
---+        Query query = FirebaseFirestore.getInstance()
---+                .collection("imagenes");
---+        FirestoreRecyclerOptions<Imagen> opciones = new FirestoreRecyclerOptions
---+                .Builder<Imagen>().setQuery(query, Imagen.class).build();
---+        adaptador = new AdaptadorImagenes(getContext(), opciones);
---+        recyclerView.setAdapter(adaptador);
---+        recyclerView.setLayoutManager(new LinearLayoutManager(getContext()));
---+
---+        return v;
---+    }
---+    @Override public void onStart() {
---+        super.onStart();
---+        adaptador.startListening();
---     }
---+    @Override public void onStop() {
---+        super.onStop();
---+        adaptador.stopListening();
---+    }
---+
--- }
---\ No newline at end of file
---Index: comun/src/main/java/com/example/comun/Mqtt.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.comun;\n\npublic class Mqtt {\n    public static final String TAG = \"MQTT\";\n    public static final String topicRoot=\"infinity/senyal/\";\n\n\n    //Reemplaza equipo por el nombre de tu equipo de prácticas\n    public static final int qos = 1;\n    public static final String broker = \"tcp://mqtt.eclipse.org:1883\";\n    public static final String clientId = \"IotTestInfinity123\";\n//Reemplaza ClientId con un valor diferente\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ comun/src/main/java/com/example/comun/Mqtt.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
---+++ comun/src/main/java/com/example/comun/Mqtt.java	(date 1607524175548)
---@@ -7,7 +7,7 @@
--- 
---     //Reemplaza equipo por el nombre de tu equipo de prácticas
---     public static final int qos = 1;
----    public static final String broker = "tcp://mqtt.eclipse.org:1883";
---+    public static final String broker = "tcp://broker.hivemq.com:1883";
---     public static final String clientId = "IotTestInfinity123";
--- //Reemplaza ClientId con un valor diferente
--- }
---\ No newline at end of file
---Index: app/src/main/res/layout/fragment_general.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    tools:context=\".ui.dashboard.DashboardFragment\">\n\n\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\n\n        <RelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginLeft=\"20dp\"\n            android:layout_marginTop=\"10dp\"\n            android:layout_marginRight=\"20dp\">\n\n            <TextView\n                android:id=\"@+id/textDashboard\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Dashboard  >\"\n\n                android:textSize=\"19sp\" />\n\n            <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_below=\"@+id/textDashboard\"\n                android:text=\"4 sensores\"\n\n                android:textSize=\"14sp\" />\n\n            <!--<ImageView\n                android:layout_width=\"62dp\"\n                android:layout_height=\"62dp\"\n                android:layout_alignParentRight=\"true\"\n                android:src=\"@drawable/ic_sun\" />-->\n        </RelativeLayout>\n        <GridLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:columnCount=\"2\"\n            android:rowCount=\"3\"\n            android:alignmentMode=\"alignMargins\"\n            android:columnOrderPreserved=\"false\">\n            <!--temperatura-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Temperatura\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchTemperatura\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:buttonTint=\"#FFFFFF\"\n                            android:checked=\"true\"\n                            android:fitsSystemWindows=\"false\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaTemperatura\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"34°C\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textTemperatura\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textTemperatura\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgTemperatura\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_temperature\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaTemperatura\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--humedad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Humedad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchHumedad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaHumedad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"68%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textHumedad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textHumedad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgHumedad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_humidity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaHumedad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--salinidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Salinidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchSalinidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaSalinidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"10%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textSalinidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textSalinidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgSalinidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_salt\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaSalinidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--Luminosidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Luminosidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchLuminosidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorHighlight=\"#FFFFFF\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidasLuminosidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"90%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textLuminosidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textLuminosidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgLuminosidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_luminosity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidasLuminosidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n\n\n\n\n        </GridLayout>\n\n    </LinearLayout>\n</ScrollView>\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/res/layout/fragment_general.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
---+++ app/src/main/res/layout/fragment_general.xml	(date 1607536086761)
---@@ -20,7 +20,7 @@
---             android:layout_marginRight="20dp">
--- 
---             <TextView
----                android:id="@+id/textDashboard"
---+                android:id="@+id/textDashboardGeneral"
---                 android:layout_width="wrap_content"
---                 android:layout_height="wrap_content"
---                 android:text="Dashboard  >"
---@@ -30,7 +30,7 @@
---             <TextView
---                 android:layout_width="wrap_content"
---                 android:layout_height="wrap_content"
----                android:layout_below="@+id/textDashboard"
---+                android:layout_below="@+id/textDashboardGeneral"
---                 android:text="4 sensores"
--- 
---                 android:textSize="14sp" />
---@@ -74,19 +74,19 @@
--- 
--- 
---                         <TextView
----                            android:id="@+id/textTemperatura"
---+                            android:id="@+id/textTemperaturaGeneral"
---                             android:layout_width="wrap_content"
---                             android:layout_height="wrap_content"
---                             android:layout_marginStart="8dp"
---                             android:layout_marginTop="8dp"
---                             android:text="Temperatura"
---                             android:textSize="16sp"
----                            app:layout_constraintBottom_toBottomOf="@+id/switchTemperatura"
---+                            app:layout_constraintBottom_toBottomOf="@+id/switchTemperaturaGeneral"
---                             app:layout_constraintStart_toStartOf="parent"
---                             app:layout_constraintTop_toTopOf="parent" />
--- 
---                         <Switch
----                            android:id="@+id/switchTemperatura"
---+                            android:id="@+id/switchTemperaturaGeneral"
---                             android:layout_width="wrap_content"
---                             android:layout_height="wrap_content"
---                             android:layout_marginTop="8dp"
---@@ -100,25 +100,25 @@
---                             app:layout_constraintTop_toTopOf="parent" />
--- 
---                         <TextView
----                            android:id="@+id/medidaTemperatura"
---+                            android:id="@+id/medidaTemperaturaGeneral"
---                             android:layout_width="90dp"
---                             android:layout_height="39dp"
---                             android:layout_marginTop="24dp"
---                             android:text="34°C"
---                             android:textSize="31sp"
----                            app:layout_constraintStart_toStartOf="@+id/textTemperatura"
----                            app:layout_constraintTop_toBottomOf="@+id/textTemperatura" />
---+                            app:layout_constraintStart_toStartOf="@+id/textTemperaturaGeneral"
---+                            app:layout_constraintTop_toBottomOf="@+id/textTemperaturaGeneral" />
--- 
---                         <ImageView
----                            android:id="@+id/imgTemperatura"
---+                            android:id="@+id/imgTemperaturaGeneral"
---                             android:layout_width="53dp"
---                             android:layout_height="55dp"
---                             android:layout_marginEnd="1dp"
---                             android:src="@drawable/icons_temperature"
----                            app:layout_constraintBottom_toBottomOf="@+id/medidaTemperatura"
---+                            app:layout_constraintBottom_toBottomOf="@+id/medidaTemperaturaGeneral"
---                             app:layout_constraintEnd_toEndOf="parent"
----                            app:layout_constraintStart_toEndOf="@+id/medidaTemperatura"
----                            app:layout_constraintTop_toTopOf="@+id/medidaTemperatura" />
---+                            app:layout_constraintStart_toEndOf="@+id/medidaTemperaturaGeneral"
---+                            app:layout_constraintTop_toTopOf="@+id/medidaTemperaturaGeneral" />
---                     </androidx.constraintlayout.widget.ConstraintLayout>
---                 </LinearLayout>
---             </androidx.cardview.widget.CardView>
---@@ -148,19 +148,19 @@
--- 
--- 
---                         <TextView
----                            android:id="@+id/textHumedad"
---+                            android:id="@+id/textHumedadGeneral"
---                             android:layout_width="wrap_content"
---                             android:layout_height="wrap_content"
---                             android:layout_marginStart="8dp"
---                             android:layout_marginTop="8dp"
---                             android:text="Humedad"
---                             android:textSize="16sp"
----                            app:layout_constraintBottom_toBottomOf="@+id/switchHumedad"
---+                            app:layout_constraintBottom_toBottomOf="@+id/switchHumedadGeneral"
---                             app:layout_constraintStart_toStartOf="parent"
---                             app:layout_constraintTop_toTopOf="parent" />
--- 
---                         <Switch
----                            android:id="@+id/switchHumedad"
---+                            android:id="@+id/switchHumedadGeneral"
---                             android:layout_width="wrap_content"
---                             android:layout_height="wrap_content"
---                             android:layout_marginTop="8dp"
---@@ -172,25 +172,25 @@
---                             app:layout_constraintTop_toTopOf="parent" />
--- 
---                         <TextView
----                            android:id="@+id/medidaHumedad"
---+                            android:id="@+id/medidaHumedadGeneral"
---                             android:layout_width="90dp"
---                             android:layout_height="39dp"
---                             android:layout_marginTop="24dp"
---                             android:text="68%"
---                             android:textSize="31sp"
----                            app:layout_constraintStart_toStartOf="@+id/textHumedad"
----                            app:layout_constraintTop_toBottomOf="@+id/textHumedad" />
---+                            app:layout_constraintStart_toStartOf="@+id/textHumedadGeneral"
---+                            app:layout_constraintTop_toBottomOf="@+id/textHumedadGeneral" />
--- 
---                         <ImageView
----                            android:id="@+id/imgHumedad"
---+                            android:id="@+id/imgHumedadGeneral"
---                             android:layout_width="53dp"
---                             android:layout_height="55dp"
---                             android:layout_marginEnd="1dp"
---                             android:src="@drawable/icons_humidity"
----                            app:layout_constraintBottom_toBottomOf="@+id/medidaHumedad"
---+                            app:layout_constraintBottom_toBottomOf="@+id/medidaHumedadGeneral"
---                             app:layout_constraintEnd_toEndOf="parent"
----                            app:layout_constraintStart_toEndOf="@+id/medidaHumedad"
----                            app:layout_constraintTop_toTopOf="@+id/medidaHumedad" />
---+                            app:layout_constraintStart_toEndOf="@+id/medidaHumedadGeneral"
---+                            app:layout_constraintTop_toTopOf="@+id/medidaHumedadGeneral" />
---                     </androidx.constraintlayout.widget.ConstraintLayout>
---                 </LinearLayout>
---             </androidx.cardview.widget.CardView>
---@@ -220,19 +220,19 @@
--- 
--- 
---                         <TextView
----                            android:id="@+id/textSalinidad"
---+                            android:id="@+id/textSalinidadGeneral"
---                             android:layout_width="wrap_content"
---                             android:layout_height="wrap_content"
---                             android:layout_marginStart="8dp"
---                             android:layout_marginTop="8dp"
---                             android:text="Salinidad"
---                             android:textSize="16sp"
----                            app:layout_constraintBottom_toBottomOf="@+id/switchSalinidad"
---+                            app:layout_constraintBottom_toBottomOf="@+id/switchSalinidadGeneral"
---                             app:layout_constraintStart_toStartOf="parent"
---                             app:layout_constraintTop_toTopOf="parent" />
--- 
---                         <Switch
----                            android:id="@+id/switchSalinidad"
---+                            android:id="@+id/switchSalinidadGeneral"
---                             android:layout_width="wrap_content"
---                             android:layout_height="wrap_content"
---                             android:layout_marginTop="8dp"
---@@ -244,25 +244,25 @@
---                             app:layout_constraintTop_toTopOf="parent" />
--- 
---                         <TextView
----                            android:id="@+id/medidaSalinidad"
---+                            android:id="@+id/medidaSalinidadGeneral"
---                             android:layout_width="90dp"
---                             android:layout_height="39dp"
---                             android:layout_marginTop="24dp"
---                             android:text="10%"
---                             android:textSize="31sp"
----                            app:layout_constraintStart_toStartOf="@+id/textSalinidad"
----                            app:layout_constraintTop_toBottomOf="@+id/textSalinidad" />
---+                            app:layout_constraintStart_toStartOf="@+id/textSalinidadGeneral"
---+                            app:layout_constraintTop_toBottomOf="@+id/textSalinidadGeneral" />
--- 
---                         <ImageView
----                            android:id="@+id/imgSalinidad"
---+                            android:id="@+id/imgSalinidadGeneral"
---                             android:layout_width="53dp"
---                             android:layout_height="55dp"
---                             android:layout_marginEnd="1dp"
---                             android:src="@drawable/icons_salt"
----                            app:layout_constraintBottom_toBottomOf="@+id/medidaSalinidad"
---+                            app:layout_constraintBottom_toBottomOf="@+id/medidaSalinidadGeneral"
---                             app:layout_constraintEnd_toEndOf="parent"
----                            app:layout_constraintStart_toEndOf="@+id/medidaSalinidad"
----                            app:layout_constraintTop_toTopOf="@+id/medidaSalinidad" />
---+                            app:layout_constraintStart_toEndOf="@+id/medidaSalinidadGeneral"
---+                            app:layout_constraintTop_toTopOf="@+id/medidaSalinidadGeneral" />
---                     </androidx.constraintlayout.widget.ConstraintLayout>
---                 </LinearLayout>
---             </androidx.cardview.widget.CardView>
---@@ -292,19 +292,19 @@
--- 
--- 
---                         <TextView
----                            android:id="@+id/textLuminosidad"
---+                            android:id="@+id/textLuminosidadGeneral"
---                             android:layout_width="wrap_content"
---                             android:layout_height="wrap_content"
---                             android:layout_marginStart="8dp"
---                             android:layout_marginTop="8dp"
---                             android:text="Luminosidad"
---                             android:textSize="16sp"
----                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidad"
---+                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidadGeneral"
---                             app:layout_constraintStart_toStartOf="parent"
---                             app:layout_constraintTop_toTopOf="parent" />
--- 
---                         <Switch
----                            android:id="@+id/switchLuminosidad"
---+                            android:id="@+id/switchLuminosidadGeneral"
---                             android:layout_width="wrap_content"
---                             android:layout_height="wrap_content"
---                             android:layout_marginTop="8dp"
---@@ -317,25 +317,25 @@
---                             app:layout_constraintTop_toTopOf="parent" />
--- 
---                         <TextView
----                            android:id="@+id/medidasLuminosidad"
---+                            android:id="@+id/medidasLuminosidadGeneral"
---                             android:layout_width="90dp"
---                             android:layout_height="39dp"
---                             android:layout_marginTop="24dp"
---                             android:text="90%"
---                             android:textSize="31sp"
----                            app:layout_constraintStart_toStartOf="@+id/textLuminosidad"
----                            app:layout_constraintTop_toBottomOf="@+id/textLuminosidad" />
---+                            app:layout_constraintStart_toStartOf="@+id/textLuminosidadGeneral"
---+                            app:layout_constraintTop_toBottomOf="@+id/textLuminosidadGeneral" />
--- 
---                         <ImageView
----                            android:id="@+id/imgLuminosidad"
---+                            android:id="@+id/imgLuminosidadGeneral"
---                             android:layout_width="53dp"
---                             android:layout_height="55dp"
---                             android:layout_marginEnd="1dp"
---                             android:src="@drawable/icons_luminosity"
----                            app:layout_constraintBottom_toBottomOf="@+id/medidasLuminosidad"
---+                            app:layout_constraintBottom_toBottomOf="@+id/medidasLuminosidadGeneral"
---                             app:layout_constraintEnd_toEndOf="parent"
----                            app:layout_constraintStart_toEndOf="@+id/medidasLuminosidad"
----                            app:layout_constraintTop_toTopOf="@+id/medidasLuminosidad" />
---+                            app:layout_constraintStart_toEndOf="@+id/medidasLuminosidadGeneral"
---+                            app:layout_constraintTop_toTopOf="@+id/medidasLuminosidadGeneral" />
---                     </androidx.constraintlayout.widget.ConstraintLayout>
---                 </LinearLayout>
---             </androidx.cardview.widget.CardView>
---Index: app/src/main/res/layout/fragment_planta1.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    tools:context=\".ui.dashboard.DashboardFragment\">\n\n\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\n\n        <RelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginLeft=\"20dp\"\n            android:layout_marginTop=\"10dp\"\n            android:layout_marginRight=\"20dp\">\n\n            <TextView\n                android:id=\"@+id/textDashboard\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Dashboard  >\"\n\n                android:textSize=\"19sp\" />\n\n            <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_below=\"@+id/textDashboard\"\n                android:text=\"4 sensores\"\n\n                android:textSize=\"14sp\" />\n\n            <!--<ImageView\n                android:layout_width=\"62dp\"\n                android:layout_height=\"62dp\"\n                android:layout_alignParentRight=\"true\"\n                android:src=\"@drawable/ic_sun\" />-->\n        </RelativeLayout>\n        <GridLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:columnCount=\"2\"\n            android:rowCount=\"3\"\n            android:alignmentMode=\"alignMargins\"\n            android:columnOrderPreserved=\"false\">\n            <!--temperatura-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Temperatura\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchTemperatura\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:buttonTint=\"#FFFFFF\"\n                            android:checked=\"true\"\n                            android:fitsSystemWindows=\"false\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaTemperatura\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"34°C\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textTemperatura\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textTemperatura\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgTemperatura\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_temperature\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaTemperatura\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--humedad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Humedad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchHumedad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaHumedad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"68%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textHumedad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textHumedad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgHumedad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_humidity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaHumedad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--salinidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Salinidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchSalinidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaSalinidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"10%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textSalinidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textSalinidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgSalinidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_salt\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaSalinidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--Luminosidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Luminosidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchLuminosidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorHighlight=\"#FFFFFF\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidasLuminosidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"90%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textLuminosidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textLuminosidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgLuminosidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_luminosity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidasLuminosidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n\n\n\n\n        </GridLayout>\n\n    </LinearLayout>\n</ScrollView>\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/res/layout/fragment_planta1.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
---+++ app/src/main/res/layout/fragment_planta1.xml	(date 1607537539251)
---@@ -299,12 +299,12 @@
---                             android:layout_marginTop="8dp"
---                             android:text="Luminosidad"
---                             android:textSize="16sp"
----                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidad"
---+                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidadPlamta1"
---                             app:layout_constraintStart_toStartOf="parent"
---                             app:layout_constraintTop_toTopOf="parent" />
--- 
---                         <Switch
----                            android:id="@+id/switchLuminosidad"
---+                            android:id="@+id/switchLuminosidadPlamta1"
---                             android:layout_width="wrap_content"
---                             android:layout_height="wrap_content"
---                             android:layout_marginTop="8dp"
---Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.dashboard;\n\nimport android.os.Bundle;\n\nimport androidx.fragment.app.Fragment;\n\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.TextView;\n\nimport com.example.infinitycrop.R;\n\n/**\n * A simple {@link Fragment} subclass.\n * Use the {@link GeneralFragment#newInstance} factory method to\n * create an instance of this fragment.\n */\npublic class GeneralFragment extends Fragment {\n\n    // TODO: Rename parameter arguments, choose names that match\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\n    private static final String ARG_PARAM1 = \"param1\";\n    private static final String ARG_PARAM2 = \"param2\";\n\n    // TODO: Rename and change types of parameters\n    private String mParam1;\n    private String mParam2;\n\n    public GeneralFragment() {\n        // Required empty public constructor\n    }\n\n    /**\n     * Use this factory method to create a new instance of\n     * this fragment using the provided parameters.\n     *\n     * @param param1 Parameter 1.\n     * @param param2 Parameter 2.\n     * @return A new instance of fragment GeneralFragment.\n     */\n    // TODO: Rename and change types and number of parameters\n    public static GeneralFragment newInstance(String param1, String param2) {\n        GeneralFragment fragment = new GeneralFragment();\n        Bundle args = new Bundle();\n        args.putString(ARG_PARAM1, param1);\n        args.putString(ARG_PARAM2, param2);\n        fragment.setArguments(args);\n        return fragment;\n    }\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        if (getArguments() != null) {\n            mParam1 = getArguments().getString(ARG_PARAM1);\n            mParam2 = getArguments().getString(ARG_PARAM2);\n        }\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        View v = inflater.inflate(R.layout.fragment_general, container, false);\n\n        return v;\n    }\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
---+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(date 1607537068118)
---@@ -4,20 +4,34 @@
--- 
--- import androidx.fragment.app.Fragment;
--- 
---+import android.util.Log;
--- import android.view.LayoutInflater;
--- import android.view.View;
--- import android.view.ViewGroup;
---+import android.widget.CompoundButton;
---+import android.widget.Switch;
--- import android.widget.TextView;
--- 
---+import com.example.comun.Mqtt;
--- import com.example.infinitycrop.R;
--- 
---+import org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;
---+import org.eclipse.paho.client.mqttv3.MqttCallback;
---+import org.eclipse.paho.client.mqttv3.MqttClient;
---+import org.eclipse.paho.client.mqttv3.MqttConnectOptions;
---+import org.eclipse.paho.client.mqttv3.MqttException;
---+import org.eclipse.paho.client.mqttv3.MqttMessage;
---+import org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;
---+
---+import static com.example.comun.Mqtt.topicRoot;
---+
--- /**
---  * A simple {@link Fragment} subclass.
---  * Use the {@link GeneralFragment#newInstance} factory method to
---  * create an instance of this fragment.
---  */
----public class GeneralFragment extends Fragment {
----
---+public class GeneralFragment extends Fragment implements MqttCallback{
---+    public static MqttClient client = null;
---     // TODO: Rename parameter arguments, choose names that match
---     // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
---     private static final String ARG_PARAM1 = "param1";
---@@ -63,7 +77,108 @@
---                              Bundle savedInstanceState) {
---         // Inflate the layout for this fragment
---         View v = inflater.inflate(R.layout.fragment_general, container, false);
----
---+        //switch methods
---+        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);
---+        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
---+            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
---+                if (isChecked) {
---+                    // The toggle is enabled
---+                    enviarLucesOn();
---+                } else {
---+                    // The toggle is disabled
---+                    enviarLucesOff();
---+                }
---+            }
---+        });
---         return v;
---     }
---+    public void enviarLucesOff(){
---+        try {
---+            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new
---+                    MemoryPersistence());
---+        } catch (MqttException e) {
---+            e.printStackTrace();
---+        }
---+        MqttConnectOptions connOpts = new MqttConnectOptions();
---+        connOpts.setCleanSession(true);
---+        connOpts.setKeepAliveInterval(60);
---+        connOpts.setWill(topicRoot+"WillTopic", "App desconectada".getBytes(),Mqtt.qos, false);
---+
---+        try {
---+            client.connect(connOpts);
---+        } catch (MqttException e) {
---+            e.printStackTrace();
---+        }
---+
---+        //conexión con el broker Root1 = Lector de datos
---+        //nos subscribimos a topic lectura
---+        try {
---+            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "luces");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
---+            client.subscribe(topicRoot + "luces", Mqtt.qos);
---+            client.setCallback((MqttCallback) this);
---+        } catch (MqttException e) {
---+            Log.e(Mqtt.TAG, "Error al suscribir.", e);
---+        }
---+        try {
---+            Log.i(Mqtt.TAG, "Publicando mensaje: " + "mensaje");
---+            MqttMessage message = new MqttMessage("Superior OFF".getBytes());
---+            message.setQos(Mqtt.qos);
---+            message.setRetained(false);
---+            client.publish(topicRoot+"luces", message);
---+        } catch (MqttException e) {
---+            Log.e(Mqtt.TAG, "Error al publicar.", e);
---+        }
---+    }
---+    public void enviarLucesOn(){
---+        try {
---+            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new
---+                    MemoryPersistence());
---+        } catch (MqttException e) {
---+            e.printStackTrace();
---+        }
---+        MqttConnectOptions connOpts = new MqttConnectOptions();
---+        connOpts.setCleanSession(true);
---+        connOpts.setKeepAliveInterval(60);
---+        connOpts.setWill(topicRoot+"WillTopic", "App desconectada".getBytes(),Mqtt.qos, false);
---+
---+        try {
---+            client.connect(connOpts);
---+        } catch (MqttException e) {
---+            e.printStackTrace();
---+        }
---+
---+        //conexión con el broker Root1 = Lector de datos
---+        //nos subscribimos a topic lectura
---+        try {
---+            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "luces");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
---+            client.subscribe(topicRoot + "luces", Mqtt.qos);
---+            client.setCallback((MqttCallback) this);
---+        } catch (MqttException e) {
---+            Log.e(Mqtt.TAG, "Error al suscribir.", e);
---+        }
---+        try {
---+            Log.i(Mqtt.TAG, "Publicando mensaje: " + "mensaje");
---+            MqttMessage message = new MqttMessage("Superior ON".getBytes());
---+            message.setQos(Mqtt.qos);
---+            message.setRetained(false);
---+            client.publish(topicRoot+"luces", message);
---+        } catch (MqttException e) {
---+            Log.e(Mqtt.TAG, "Error al publicar.", e);
---+        }
---+    }
---+
---+    @Override
---+    public void connectionLost(Throwable cause) {
---+        Log.d(Mqtt.TAG, "Conexión perdida");
---+    }
---+
---+    @Override
---+    public void messageArrived(String topic, MqttMessage message) throws Exception {
---+
---+    }
---+
---+    @Override
---+    public void deliveryComplete(IMqttDeliveryToken token) {
---+        Log.d(Mqtt.TAG, "Entrega completa");
---+    }
--- }
---\ No newline at end of file
---Index: app/src/main/res/layout/fragment_planta2.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    tools:context=\".ui.dashboard.DashboardFragment\">\n\n\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\n\n        <RelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginLeft=\"20dp\"\n            android:layout_marginTop=\"10dp\"\n            android:layout_marginRight=\"20dp\">\n\n            <TextView\n                android:id=\"@+id/textDashboard\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Dashboard  >\"\n\n                android:textSize=\"19sp\" />\n\n            <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_below=\"@+id/textDashboard\"\n                android:text=\"4 sensores\"\n\n                android:textSize=\"14sp\" />\n\n            <!--<ImageView\n                android:layout_width=\"62dp\"\n                android:layout_height=\"62dp\"\n                android:layout_alignParentRight=\"true\"\n                android:src=\"@drawable/ic_sun\" />-->\n        </RelativeLayout>\n        <GridLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:columnCount=\"2\"\n            android:rowCount=\"3\"\n            android:alignmentMode=\"alignMargins\"\n            android:columnOrderPreserved=\"false\">\n            <!--temperatura-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Temperatura\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchTemperatura\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:buttonTint=\"#FFFFFF\"\n                            android:checked=\"true\"\n                            android:fitsSystemWindows=\"false\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaTemperatura\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"34°C\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textTemperatura\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textTemperatura\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgTemperatura\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_temperature\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaTemperatura\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--humedad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Humedad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchHumedad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaHumedad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"68%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textHumedad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textHumedad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgHumedad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_humidity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaHumedad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--salinidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Salinidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchSalinidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaSalinidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"10%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textSalinidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textSalinidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgSalinidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_salt\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaSalinidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--Luminosidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Luminosidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchLuminosidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorHighlight=\"#FFFFFF\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidasLuminosidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"90%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textLuminosidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textLuminosidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgLuminosidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_luminosity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidasLuminosidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n\n\n\n\n        </GridLayout>\n\n    </LinearLayout>\n</ScrollView>\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/res/layout/fragment_planta2.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
---+++ app/src/main/res/layout/fragment_planta2.xml	(date 1607537539258)
---@@ -299,12 +299,12 @@
---                             android:layout_marginTop="8dp"
---                             android:text="Luminosidad"
---                             android:textSize="16sp"
----                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidad"
---+                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidadPlanta2"
---                             app:layout_constraintStart_toStartOf="parent"
---                             app:layout_constraintTop_toTopOf="parent" />
--- 
---                         <Switch
----                            android:id="@+id/switchLuminosidad"
---+                            android:id="@+id/switchLuminosidadPlanta2"
---                             android:layout_width="wrap_content"
---                             android:layout_height="wrap_content"
---                             android:layout_marginTop="8dp"
---Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.app.Activity;\r\nimport android.content.res.ColorStateList;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvModel;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\n\r\nimport java.util.ArrayList;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link DashboardFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class DashboardFragment extends Fragment implements MqttCallback{\r\n\r\n    private RecyclerView recyclerView;\r\n    private StaticRvAdapter staticRvAdapter;\r\n    private TabLayout tabLayout;\r\n    private ViewPager viewPager;\r\n    private ColorStateList def;\r\n\r\n\r\n    public static MqttClient client = null;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public DashboardFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment DashboardFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static DashboardFragment newInstance(String param1, String param2) {\r\n        DashboardFragment fragment = new DashboardFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_dashboard, container, false);\r\n        //FIREBASE\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        final FirebaseUser usuario = mAuth.getCurrentUser();\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=usuario.getUid();\r\n        //guardo el nombre en un textView\r\n        /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);\r\n        String res=\"Hola\"+\" \"+usuario.getDisplayName();\r\n        nombre.setText(res);\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(usuario.getDisplayName() == null){\r\n                    String res1=\"Hola\"+\" \"+snapshot.getString(\"username\");\r\n                    nombre.setText(res1);\r\n                }\r\n            }\r\n        });*/\r\n/*\r\n        //switch methods\r\n        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidad);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n */\r\n\r\n        //RECYCLER VIEW\r\n        ArrayList<StaticRvModel> item=new ArrayList<>();\r\n        item.add(new StaticRvModel(R.drawable.icons_sun,\"Soleado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_night_mode,\"Nocturno\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_energy_saving,\"Ahorro\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_power_off,\"Apagado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_custom,\"Custom\"));\r\n\r\n        final TextView medidasT=v.findViewById(R.id.medidaTemperatura);\r\n        final TextView medidasH=v.findViewById(R.id.medidaHumedad);\r\n        final TextView medidasS=v.findViewById(R.id.medidaSalinidad);\r\n        final TextView medidasL=v.findViewById(R.id.medidasLuminosidad);\r\n\r\n        recyclerView=v.findViewById(R.id.rv_1);\r\n        staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(),LinearLayoutManager.HORIZONTAL,false));\r\n        recyclerView.setAdapter(staticRvAdapter);\r\n\r\n\r\n        //TABS\r\n        tabLayout = v.findViewById(R.id.tab_layout);\r\n        viewPager = v.findViewById(R.id.view_pager);\r\n         //Array\r\n        ArrayList<String> arrayList = new ArrayList<>();\r\n\r\n        //set up with viewpager\r\n        tabLayout.setupWithViewPager(viewPager);\r\n\r\n        TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());\r\n        //Pestañas\r\n        adapter.addFrag(new GeneralFragment(),\"General\");\r\n        adapter.addFrag(new Planta1Fragment(),\"Planta 1\");\r\n        adapter.addFrag(new Planta2Fragment(),\"Planta 2\");\r\n\r\n        viewPager.setAdapter(adapter );\r\n\r\n        /*((MainActivity)getActivity()).ola();*/\r\n     /*   //LEER DATOS FIREBASE\r\n        //Temperatura\r\n       DocumentReference documentTemperatura=fStore.collection(\"SensoresA-T\").document(\"Temperatura\");\r\n        documentTemperatura.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediTemp=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasT.setText(resMediTemp);\r\n            }\r\n        });\r\n        //Humedad\r\n        DocumentReference documentHumedad=fStore.collection(\"SensoresA-T\").document(\"Humedad\");\r\n        documentHumedad.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediHum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasH.setText(resMediHum);\r\n            }\r\n        });\r\n        //Iluminación\r\n        DocumentReference documentIluminación=fStore.collection(\"SensoresA-T\").document(\"Iluminación\");\r\n        documentIluminación.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIlum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasL.setText(resMediIlum);\r\n            }\r\n        });\r\n        //Temperatura ambiente\r\n        DocumentReference documentambiente=fStore.collection(\"SensoresA-T\").document(\"Temperatura ambiente\");\r\n        documentambiente.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIAmb=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasS.setText(resMediIAmb);\r\n            }\r\n        });\r\n\r\n      */\r\n\r\n        return v;\r\n    }\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
---+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(date 1607536963984)
---@@ -128,9 +128,9 @@
---                 }
---             }
---         });*/
----/*
---+
---         //switch methods
----        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidad);
---+ /*     Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);
---         switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
---             public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
---                 if (isChecked) {
---@@ -141,10 +141,10 @@
---                     enviarLucesOff();
---                 }
---             }
----        });
---+        });*/
--- 
--- 
---- */
---+
--- 
---         //RECYCLER VIEW
---         ArrayList<StaticRvModel> item=new ArrayList<>();
---@@ -154,10 +154,10 @@
---         item.add(new StaticRvModel(R.drawable.icons_power_off,"Apagado"));
---         item.add(new StaticRvModel(R.drawable.icons_custom,"Custom"));
--- 
----        final TextView medidasT=v.findViewById(R.id.medidaTemperatura);
----        final TextView medidasH=v.findViewById(R.id.medidaHumedad);
----        final TextView medidasS=v.findViewById(R.id.medidaSalinidad);
----        final TextView medidasL=v.findViewById(R.id.medidasLuminosidad);
---+        final TextView medidasT=v.findViewById(R.id.medidaTemperaturaGeneral);
---+        final TextView medidasH=v.findViewById(R.id.medidaHumedadGeneral);
---+        final TextView medidasS=v.findViewById(R.id.medidaSalinidadGeneral);
---+        final TextView medidasL=v.findViewById(R.id.medidasLuminosidadGeneral);
--- 
---         recyclerView=v.findViewById(R.id.rv_1);
---         staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);
---Index: things/src/main/java/com/example/things/MainActivity.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.things;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.util.Log;\n\nimport com.example.comun.Mqtt;\nimport com.google.android.gms.tasks.OnCompleteListener;\nimport com.google.android.gms.tasks.Task;\nimport com.google.firebase.firestore.FirebaseFirestore;\nimport com.google.firebase.firestore.QuerySnapshot;\n\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\nimport org.eclipse.paho.client.mqttv3.MqttClient;\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\nimport org.eclipse.paho.client.mqttv3.MqttException;\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport static com.example.comun.Mqtt.qos;\nimport static com.example.comun.Mqtt.topicRoot;\n\n\n/**\n * Skeleton of an Android Things activity.\n * <p>\n * Android Things peripheral APIs are accessible through the PeripheralManager\n * For example, the snippet below will open a GPIO pin and set it to HIGH:\n * <p>\n * PeripheralManager manager = PeripheralManager.getInstance();\n * try {\n * Gpio gpio = manager.openGpio(\"BCM6\");\n * gpio.setDirection(Gpio.DIRECTION_OUT_INITIALLY_LOW);\n * gpio.setValue(true);\n * } catch (IOException e) {\n * Log.e(TAG, \"Unable to access GPIO\");\n * }\n * <p>\n * You can find additional examples on GitHub: https://github.com/androidthings\n */\npublic class MainActivity extends AppCompatActivity implements MqttCallback {\n    public static MqttClient client = null;\n    FirebaseFirestore db;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        db = FirebaseFirestore.getInstance();\n\n        try {\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\n                    MemoryPersistence());\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n        MqttConnectOptions connOpts = new MqttConnectOptions();\n        connOpts.setCleanSession(true);\n        connOpts.setKeepAliveInterval(60);\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\n\n        try {\n            client.connect(connOpts);\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n\n\n        //conexión con el broker Root1 = Lector de datos\n        //nos subscribimos a topic lectura\n        try {\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"lecturaDatos\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\n            client.subscribe(topicRoot + \"lecturaDatos\", Mqtt.qos);\n            client.setCallback(this);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\n        }\n\n    }\n    // Se ejecuta cuando se pierde la conexión\n    @Override\n    public void connectionLost(Throwable cause) {\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\n\n    }\n    @Override\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\n        String payload = new String(message.getPayload());\n        Log.d(Mqtt.TAG, \"Recibiendo: \" + topic + \"->\" + payload);\n\n        if(topic.equals(topicRoot+\"lecturaDatos\")){\n            //topicLectura(payload);\n            // parts0=humedad,parts1=iluminosidad,parts2=humedadHambiente,parts3=temperatura\n            String[] parts = payload.split(\"-\");//comprueba si los datos introducidos van referentes a cada sensor: nombre,medición, estado\n            Log.d(\"PRUUEBA\",parts[0] + \" \"+parts[1] + \" \"+parts[2] + \" \"+parts[3] + \" \");\n            Map<String, Object> dataTemp = new HashMap<>();\n            dataTemp.put(\"Estado:\", \"Activado\");\n            dataTemp.put(\"Medición\", parts[3]);\n            db.collection(\"SensoresA-T\").document(\"Temperatura\").set(dataTemp);\n\n        }\n\n    }\n     private  void topicLectura(final String payload)  {}\n\n    private void topicLuces(final String payload) {\n    }\n\n    private void topicRiego(final String payload) {\n    }\n\n    private void topicVentiladores(final String payload) {\n    }\n\n\n\n\n\n\n\n    @Override\n    public void onDestroy() {\n        try {\n            Log.i(Mqtt.TAG, \"Desconectado\");\n            client.disconnect();\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al desconectar.\", e);\n        }\n        super.onDestroy();\n    }\n\n\n\n\n\n    @Override\n    public void deliveryComplete(IMqttDeliveryToken token) {\n        Log.d(Mqtt.TAG, \"Entrega completa\");\n\n    }\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ things/src/main/java/com/example/things/MainActivity.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
---+++ things/src/main/java/com/example/things/MainActivity.java	(date 1607533992044)
---@@ -93,7 +93,7 @@
---     public void messageArrived(String topic, MqttMessage message) throws Exception {
---         String payload = new String(message.getPayload());
---         Log.d(Mqtt.TAG, "Recibiendo: " + topic + "->" + payload);
----
---+        db.collection("prueba").add(payload);
---         if(topic.equals(topicRoot+"lecturaDatos")){
---             //topicLectura(payload);
---             // parts0=humedad,parts1=iluminosidad,parts2=humedadHambiente,parts3=temperatura
--Index: comun/src/main/java/com/example/comun/Mqtt.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.comun;\r\n\r\npublic class Mqtt {\r\n    public static final String TAG = \"MQTT\";\r\n    public static final String topicRoot=\"infinity/senyal/\";\r\n\r\n\r\n    //Reemplaza equipo por el nombre de tu equipo de prácticas\r\n    public static final int qos = 1;\r\n    public static final String broker = \"tcp://broker.hivemq.com:1883\";\r\n    public static final String clientId = \"IotTestInfinity123434\";\r\n//Reemplaza ClientId con un valor diferente\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- comun/src/main/java/com/example/comun/Mqtt.java	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
--+++ comun/src/main/java/com/example/comun/Mqtt.java	(date 1607642637074)
--@@ -8,6 +8,6 @@
--     //Reemplaza equipo por el nombre de tu equipo de prácticas
--     public static final int qos = 1;
--     public static final String broker = "tcp://broker.hivemq.com:1883";
---    public static final String clientId = "IotTestInfinity123434";
--+    public static final String clientId = "IotTestInfinity1234";
-- //Reemplaza ClientId con un valor diferente
-- }
--\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_01_01_2021_18_07__Default_Changelist_.xml
-===================================================================
---- .idea/shelf/Uncommitted_changes_before_Update_at_01_01_2021_18_07__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-+++ .idea/shelf/Uncommitted_changes_before_Update_at_01_01_2021_18_07__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_01_01_2021_18_07_[Default_Changelist]" date="1609520835203" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_01_01_2021_18_07_[Default_Changelist]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 01/01/2021 18:07 [Default Changelist]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_01_01_2021_18_07_[Default_Changelist]/shelved.patch
-===================================================================
---- .idea/shelf/Uncommitted_changes_before_Update_at_01_01_2021_18_07_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-+++ .idea/shelf/Uncommitted_changes_before_Update_at_01_01_2021_18_07_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-@@ -1,179 +0,0 @@
--Index: app/src/main/java/com/example/infinitycrop/ui/login/LogActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.login;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity2;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.MainActivityMachineList;\r\nimport com.example.infinitycrop.ui.logmail.LoginActivity;\r\nimport com.facebook.AccessToken;\r\nimport com.facebook.AccessTokenTracker;\r\nimport com.facebook.CallbackManager;\r\nimport com.facebook.FacebookCallback;\r\nimport com.facebook.FacebookException;\r\nimport com.facebook.login.LoginResult;\r\nimport com.facebook.login.widget.LoginButton;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInAccount;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.common.SignInButton;\r\nimport com.google.android.gms.common.api.ApiException;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthCredential;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FacebookAuthProvider;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.auth.GoogleAuthProvider;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.facebook.FacebookSdk;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\n\r\npublic class LogActivity extends AppCompatActivity{\r\n    /*private GoogleApiClient googleApiClient;\r\n    private SignInButton signInButton;\r\n    public static final int SIGN_IN_CODE = 777;*/\r\n    //Variable para gestionar FirebaseAuth\r\n    private FirebaseAuth mAuth;\r\n    //Agregar cliente de inicio de sesión de Google\r\n    private GoogleSignInClient mGoogleSignInClient;\r\n    //Constante\r\n    int RC_SIGN_IN = 1;\r\n    SignInButton btnLogin,btnGoogle;\r\n    String TAG = \"GoogleSignIn\";\r\n\r\n    private FirebaseAuth.AuthStateListener authStateListener;\r\n    private AccessTokenTracker accessTokenTracker;\r\n    private LoginButton loginButtonFacebook;\r\n    private CallbackManager mCallbackManager;\r\n    private  static  final String TAG2 = \"FacebookAuthentication\";\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.fragment_login);\r\n        /*GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestEmail()\r\n                .build();\r\n        googleApiClient = new GoogleApiClient.Builder(this)\r\n        .enableAutoManage(this, this)\r\n        .addApi(Auth.GOOGLE_SIGN_IN_API,gso)\r\n        .build();\r\n        signInButton =findViewById(R.id.btn_google);\r\n        signInButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = Auth.GoogleSignInApi.getSignInIntent(googleApiClient);\r\n                startActivityForResult(intent,SIGN_IN_CODE);\r\n            }\r\n        });*/\r\n\r\n        //Botones\r\n        btnGoogle=findViewById(R.id.btn_google);\r\n        loginButtonFacebook = findViewById(R.id.btn_facebook);\r\n        loginButtonFacebook.setReadPermissions(\"email\",\"public_profile\");\r\n\r\n        //Listeners\r\n        btnGoogle.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                signIn();\r\n            }\r\n        });\r\n\r\n        // Configurar Google Sign In\r\n        GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestIdToken(getString(R.string.default_web_client_id))\r\n                .requestEmail()\r\n                .build();\r\n        // Crear un GoogleSignInClient con las opciones especificadas por gso.\r\n        mGoogleSignInClient = GoogleSignIn.getClient(this, gso);\r\n\r\n\r\n\r\n        // Inicializar Firebase Auth\r\n        mAuth = FirebaseAuth.getInstance();\r\n        FacebookSdk.sdkInitialize(getApplicationContext());\r\n\r\n        //Facebook\r\n        mCallbackManager = CallbackManager.Factory.create();\r\n        loginButtonFacebook.registerCallback(mCallbackManager, new FacebookCallback<LoginResult>() {\r\n            @Override\r\n            public void onSuccess(LoginResult loginResult) {\r\n                Log.d(TAG2,\"onSuccess\"+loginResult);\r\n                handleFacebookToken(loginResult.getAccessToken());\r\n            }\r\n\r\n            @Override\r\n            public void onCancel() {\r\n                Log.d(TAG2,\"onCancel\");\r\n            }\r\n\r\n            @Override\r\n            public void onError(FacebookException error) {\r\n                Log.d(TAG2,\"onError: \"+error);\r\n            }\r\n\r\n        });\r\n\r\n        authStateListener = new FirebaseAuth.AuthStateListener() {\r\n            @Override\r\n            public void onAuthStateChanged(@NonNull FirebaseAuth firebaseAuth) {\r\n                FirebaseUser user = firebaseAuth.getCurrentUser();\r\n                if(user!=null){\r\n                    Intent dashboardActivity = new Intent(LogActivity.this, MainActivityMachineList.class);\r\n                    startActivity(dashboardActivity);\r\n                    LogActivity.this.finish();\r\n                }\r\n            }\r\n        };\r\n\r\n        accessTokenTracker = new AccessTokenTracker() {\r\n            @Override\r\n            protected void onCurrentAccessTokenChanged(AccessToken oldAccessToken, AccessToken currentAccessToken) {\r\n                if(currentAccessToken == null){\r\n                    mAuth.signOut();\r\n                }\r\n            }\r\n        };\r\n\r\n    }\r\n    private void signIn() {\r\n        Intent signInIntent = mGoogleSignInClient.getSignInIntent();\r\n        startActivityForResult(signInIntent, RC_SIGN_IN);\r\n    }\r\n\r\n    @Override\r\n    public void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        mCallbackManager.onActivityResult(requestCode,resultCode,data);\r\n\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        //Resultado devuelto al iniciar el Intent de GoogleSignInApi.getSignInIntent (...);\r\n        // Result returned from launching the Intent from GoogleSignInApi.getSignInIntent(...);\r\n        if (requestCode == RC_SIGN_IN) {\r\n            Task<GoogleSignInAccount> task = GoogleSignIn.getSignedInAccountFromIntent(data);\r\n            if(task.isSuccessful()){\r\n                try {\r\n                    // Google Sign In was successful, authenticate with Firebase\r\n                    GoogleSignInAccount account = task.getResult(ApiException.class);\r\n                    Log.d(TAG, \"firebaseAuthWithGoogle:\" + account.getId());\r\n                    firebaseAuthWithGoogle(account.getIdToken());\r\n                } catch (ApiException e) {\r\n                    // Google Sign In fallido, actualizar GUI\r\n                    Log.w(TAG, \"Google sign in failed\", e);\r\n                }\r\n            }else{\r\n                Log.d(TAG, \"Error, login no exitoso:\" + task.getException().toString());\r\n                Toast.makeText(this, \"Ocurrio un error. \"+task.getException().toString(),\r\n                        Toast.LENGTH_LONG).show();\r\n            }\r\n        }\r\n    }\r\n    private void firebaseAuthWithGoogle(String idToken) {\r\n        AuthCredential credential = GoogleAuthProvider.getCredential(idToken, null);\r\n        mAuth.signInWithCredential(credential)\r\n                .addOnCompleteListener(this, new OnCompleteListener<AuthResult>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<AuthResult> task) {\r\n                        if (task.isSuccessful()) {\r\n                            FirebaseFirestore db=FirebaseFirestore.getInstance();\r\n                            String userID= mAuth.getCurrentUser().getUid();\r\n                            String name= mAuth.getCurrentUser().getDisplayName();\r\n                            String mail= mAuth.getCurrentUser().getEmail();\r\n                            Map<String, Object> data = new HashMap<>();\r\n                            data.put(\"username\", name);\r\n                            data.put(\"mail\", mail);\r\n                            db.collection(\"Usuarios\").document(userID)\r\n                                    .set(data);\r\n                            /*db.collection(\"Usuarios\").document(userID)\r\n                                    .collection(\"Maquinas\").document(\"fecha\")\r\n                                    .set(data);*/\r\n\r\n                            // Sign in success, update UI with the signed-in user's information\r\n                            Log.d(TAG, \"signInWithCredential:success\");\r\n                            //FirebaseUser user = mAuth.getCurrentUser();\r\n                            //Iniciar DASHBOARD u otra actividad luego del SigIn Exitoso\r\n                            Intent dashboardActivity = new Intent(LogActivity.this, IntroductoryActivity2.class);\r\n                            startActivity(dashboardActivity);\r\n                            LogActivity.this.finish();\r\n                        } else {\r\n                            // If sign in fails, display a message to the user.\r\n                            Log.w(TAG, \"signInWithCredential:failure\", task.getException());\r\n\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n    @Override\r\n    protected void onStart() {\r\n        FirebaseUser user = mAuth.getCurrentUser();\r\n        if(user!=null){ //si no es null el usuario ya esta logueado\r\n            //mover al usuario al dashboard\r\n            Intent dashboardActivity = new Intent(LogActivity.this, MainActivityMachineList.class);\r\n            startActivity(dashboardActivity);\r\n        }\r\n        super.onStart();\r\n        mAuth.addAuthStateListener(authStateListener);\r\n    }\r\n    //metodo para navegar entre activitys con los botones\r\n    public void Email (View view){\r\n        Intent email = new Intent(this, LoginActivity.class);\r\n        startActivity(email);\r\n    }\r\n   /* @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if(requestCode == SIGN_IN_CODE){\r\n            GoogleSignInResult result = Auth.GoogleSignInApi.getSignInResultFromIntent(data);\r\n            handleSignResult(result);\r\n        }\r\n    }\r\n\r\n    private void handleSignResult(GoogleSignInResult result) {\r\n        if (result.isSuccess()){\r\n            goMainScreen();\r\n        }else{\r\n            Toast.makeText(this, \"Error al iniciar sesión\", Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void goMainScreen() {\r\n       Intent intent=new Intent(this, MainActivity.class);\r\n       startActivity(intent);\r\n    }\r\n\r\n    //metodo para navegar entre activitys con los botones\r\n    public void Email (View view){\r\n        Intent email = new Intent(this, LoginActivity.class);\r\n        startActivity(email);\r\n    }\r\n\r\n    @Override\r\n    public void onConnectionFailed(@NonNull ConnectionResult connectionResult) {\r\n\r\n    }*/\r\n    //Funciones Login con facebook\r\n    private void handleFacebookToken(AccessToken token){\r\n        Log.d(TAG2,\"handleFacebookToken\" + token);\r\n\r\n        AuthCredential credential = FacebookAuthProvider.getCredential(token.getToken());\r\n        mAuth.signInWithCredential(credential).addOnCompleteListener(this, new OnCompleteListener<AuthResult>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<AuthResult> task) {\r\n                if(task.isSuccessful()){\r\n                    Log.d(TAG2,\"sing in with credential: successfully\");\r\n                    FirebaseUser user = mAuth.getCurrentUser();\r\n                    if(user!=null){ //si no es null el usuario ya esta logueado\r\n                        Intent dashboardActivity = new Intent(LogActivity.this, MainActivityMachineList.class);\r\n                        startActivity(dashboardActivity);\r\n                    }\r\n                }else{\r\n                    Log.d(TAG2,\"sing in with credential: failed\", task.getException());\r\n                    Toast.makeText(LogActivity.this,\"Authentication Failed\", Toast.LENGTH_SHORT);\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        if(authStateListener != null){\r\n            mAuth.removeAuthStateListener(authStateListener);\r\n            finish();\r\n        }\r\n    }\r\n\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/login/LogActivity.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
--+++ app/src/main/java/com/example/infinitycrop/ui/login/LogActivity.java	(date 1609283329946)
--@@ -63,7 +63,7 @@
--     @Override
--     protected void onCreate(Bundle savedInstanceState) {
--         super.onCreate(savedInstanceState);
---        setContentView(R.layout.fragment_login);
--+       /* setContentView(R.layout.fragment_login);*/
--         /*GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)
--                 .requestEmail()
--                 .build();
--Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.Manifest;\r\nimport android.app.Activity;\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.content.res.ColorStateList;\r\nimport android.location.Address;\r\nimport android.location.Geocoder;\r\nimport android.location.Location;\r\nimport android.location.LocationManager;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.os.StrictMode;\r\nimport android.provider.Settings;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvModel;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.location.FusedLocationProviderClient;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.annotations.NotNull;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.squareup.okhttp.Call;\r\nimport com.squareup.okhttp.Callback;\r\nimport com.squareup.okhttp.OkHttpClient;\r\nimport com.squareup.okhttp.Request;\r\nimport com.squareup.okhttp.Response;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link DashboardFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class DashboardFragment extends Fragment implements MqttCallback{\r\n\r\n    private RecyclerView recyclerView;\r\n    private StaticRvAdapter staticRvAdapter;\r\n    private TabLayout tabLayout;\r\n    private ViewPager viewPager;\r\n    //WEATHER\r\n    private static  final int REQUEST_LOCATION=1;\r\n    double lat;\r\n    double longi;\r\n\r\n    TextView showLocationTxt;\r\n\r\n    LocationManager locationManager;\r\n    String latitude,longitude;\r\n\r\n    TextView view_city;\r\n    TextView view_temp;\r\n    TextView view_desc;\r\n    TextView view_country;\r\n\r\n    ImageView view_weather;\r\n    //\r\n\r\n\r\n    public static MqttClient client = null;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public DashboardFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment DashboardFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static DashboardFragment newInstance(String param1, String param2) {\r\n        DashboardFragment fragment = new DashboardFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_dashboard, container, false);\r\n        //FIREBASE\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        final FirebaseUser usuario = mAuth.getCurrentUser();\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=usuario.getUid();\r\n        //guardo el nombre en un textView\r\n        /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);\r\n        String res=\"Hola\"+\" \"+usuario.getDisplayName();\r\n        nombre.setText(res);\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(usuario.getDisplayName() == null){\r\n                    String res1=\"Hola\"+\" \"+snapshot.getString(\"username\");\r\n                    nombre.setText(res1);\r\n                }\r\n            }\r\n        });*/\r\n\r\n        //switch methods\r\n /*     Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });*/\r\n\r\n\r\n        //WEATHER\r\n        ActivityCompat.requestPermissions(getActivity(),new String[]\r\n                {Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n\r\n        view_city =v.findViewById(R.id.town);\r\n        view_city.setText(\"\");\r\n        view_temp =v.findViewById(R.id.temp);\r\n        view_temp.setText(\"\");\r\n        view_desc =v.findViewById(R.id.desc);\r\n        view_desc.setText(\"\");\r\n        view_country=v.findViewById(R.id.txtCountry);\r\n        view_country.setText(\"\");\r\n        view_weather =v.findViewById(R.id.wheather_image);\r\n\r\n        locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);\r\n        inicioGPS();\r\n        //\r\n\r\n\r\n\r\n\r\n        //RECYCLER VIEW\r\n        ArrayList<StaticRvModel> item=new ArrayList<>();\r\n        item.add(new StaticRvModel(R.drawable.icons_sun,\"Soleado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_night_mode,\"Nocturno\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_energy_saving,\"Ahorro\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_power_off,\"Apagado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_custom,\"Custom\"));\r\n\r\n        final TextView medidasT=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidasH=v.findViewById(R.id.medidaHumedadGeneral);\r\n        final TextView medidasS=v.findViewById(R.id.medidaSalinidadGeneral);\r\n        final TextView medidasL=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n\r\n        recyclerView=v.findViewById(R.id.rv_1);\r\n        staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(),LinearLayoutManager.HORIZONTAL,false));\r\n        recyclerView.setAdapter(staticRvAdapter);\r\n\r\n\r\n        //TABS\r\n        tabLayout = v.findViewById(R.id.tab_layout);\r\n        viewPager = v.findViewById(R.id.view_pager);\r\n         //Array\r\n        ArrayList<String> arrayList = new ArrayList<>();\r\n\r\n        //set up with viewpager\r\n        tabLayout.setupWithViewPager(viewPager);\r\n\r\n        TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());\r\n        //Pestañas\r\n        adapter.addFrag(new GeneralFragment(),\"General\");\r\n        adapter.addFrag(new Planta1Fragment(),\"Planta 1\");\r\n        adapter.addFrag(new Planta2Fragment(),\"Planta 2\");\r\n\r\n        viewPager.setAdapter(adapter );\r\n\r\n        /*((MainActivity)getActivity()).ola();*/\r\n     /*   //LEER DATOS FIREBASE\r\n        //Temperatura\r\n       DocumentReference documentTemperatura=fStore.collection(\"SensoresA-T\").document(\"Temperatura\");\r\n        documentTemperatura.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediTemp=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasT.setText(resMediTemp);\r\n            }\r\n        });\r\n        //Humedad\r\n        DocumentReference documentHumedad=fStore.collection(\"SensoresA-T\").document(\"Humedad\");\r\n        documentHumedad.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediHum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasH.setText(resMediHum);\r\n            }\r\n        });\r\n        //Iluminación\r\n        DocumentReference documentIluminación=fStore.collection(\"SensoresA-T\").document(\"Iluminación\");\r\n        documentIluminación.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIlum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasL.setText(resMediIlum);\r\n            }\r\n        });\r\n        //Temperatura ambiente\r\n        DocumentReference documentambiente=fStore.collection(\"SensoresA-T\").document(\"Temperatura ambiente\");\r\n        documentambiente.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIAmb=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasS.setText(resMediIAmb);\r\n            }\r\n        });\r\n\r\n      */\r\n\r\n        return v;\r\n    }\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n\r\n\r\n    //WEATHER METHODS\r\n    private void api_key(final String City) {\r\n        OkHttpClient client = new OkHttpClient();\r\n\r\n        Request request = new Request.Builder()\r\n                .url(\"https://api.openweathermap.org/data/2.5/weather?q=\" + City + \"&appid=a6f41d947e0542a26580bcd5c3fb90ef&units=metric\")\r\n                .get()\r\n                .build();\r\n        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n        StrictMode.setThreadPolicy(policy);\r\n        try {\r\n            Response response = client.newCall(request).execute();\r\n            client.newCall(request).enqueue(new Callback() {\r\n                @Override\r\n                public void onFailure(Request request, IOException e) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onResponse(Response response) throws IOException {\r\n                    String responseData = response.body().string();\r\n                    try {\r\n                        JSONObject json = new JSONObject(responseData);\r\n                        JSONArray array = json.getJSONArray(\"weather\");\r\n                        JSONObject object = array.getJSONObject(0);\r\n\r\n                        String description = object.getString(\"description\");\r\n                        String icons = object.getString(\"icon\");\r\n\r\n                        JSONObject temp1 = json.getJSONObject(\"main\");\r\n                        Double Temperature = temp1.getDouble(\"temp\");\r\n\r\n                        setText(view_city, City);\r\n\r\n                        String temps = Math.round(Temperature) + \" °C\";\r\n                        setText(view_temp, temps);\r\n                        setText(view_desc, description);\r\n                        setImage(view_weather, icons);\r\n\r\n                    } catch (JSONException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n\r\n            });\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    private void setText(final TextView text, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                text.setText(value);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setImage(final ImageView imageView, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                //paste switch\r\n                switch (value) {\r\n                    case \"01d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"01n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"02d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"02n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"03d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"03n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"04d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"04n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"09d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"09n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"10d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"10n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"11d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"11n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"13d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    case \"13n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    default:\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.wheather));\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    //App location\r\n    private void getLocation() {\r\n\r\n        //Check Permissions again\r\n\r\n        if (ActivityCompat.checkSelfPermission(\r\n                getContext(),Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(\r\n                getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n        } else {\r\n\r\n            Location LocationNetwork=locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);\r\n             if (LocationNetwork !=null)\r\n            {\r\n                double lat=LocationNetwork.getLatitude();\r\n                double longi=LocationNetwork.getLongitude();\r\n\r\n                latitude=String.valueOf(lat);\r\n                longitude=String.valueOf(longi);\r\n                loc_func(LocationNetwork);\r\n                api_key(String.valueOf(view_city.getText()));\r\n                showLocationTxt.setText(\"Your Location:\"+\"\\n\"+\"Latitude= \"+latitude+\"\\n\"+\"Longitude= \"+longitude);\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private void OnGPS() {\r\n\r\n        final AlertDialog.Builder builder= new AlertDialog.Builder(getContext());\r\n\r\n        builder.setMessage(\"Enable GPS\").setCancelable(false).setPositiveButton(\"YES\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS));\r\n                getLocation();\r\n            }\r\n        }).setNegativeButton(\"NO\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                dialog.cancel();\r\n            }\r\n        });\r\n        final AlertDialog alertDialog=builder.create();\r\n        alertDialog.show();\r\n    }\r\n\r\n    private void loc_func(Location location){\r\n        try {\r\n            Geocoder geocoder=new Geocoder(getContext());\r\n            List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);\r\n            String address = addresses.get(0).getSubLocality();\r\n            String cityName = addresses.get(0).getLocality();\r\n            String stateName = addresses.get(0).getAdminArea();\r\n            String country = addresses.get(0).getCountryName();\r\n            //txt_paddress.setText(address);\r\n            view_city.setText(cityName);\r\n            view_country.setText(country);\r\n            //txt_state.setText(stateName);*/\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            Toast.makeText(getContext(), \"Error:\"+e, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void inicioGPS(){\r\n\r\n\r\n        //Check gps is enable or not\r\n\r\n        if (!locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))\r\n        {\r\n            //Write Function To enable gps\r\n\r\n            OnGPS();\r\n        }\r\n        else\r\n        {\r\n            //GPS is already On then\r\n\r\n            getLocation();\r\n        }\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
--+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(date 1609199163490)
--@@ -201,7 +201,7 @@
--         view_weather =v.findViewById(R.id.wheather_image);
-- 
--         locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);
---        inicioGPS();
--+       /* inicioGPS();*/
--         //
-- 
-- 
--@@ -519,7 +519,7 @@
-- 
--                 latitude=String.valueOf(lat);
--                 longitude=String.valueOf(longi);
---                loc_func(LocationNetwork);
--+               /* loc_func(LocationNetwork);*/
--                 api_key(String.valueOf(view_city.getText()));
--                 showLocationTxt.setText("Your Location:"+"\n"+"Latitude= "+latitude+"\n"+"Longitude= "+longitude);
--             }
--@@ -553,7 +553,7 @@
--         try {
--             Geocoder geocoder=new Geocoder(getContext());
--             List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);
---            String address = addresses.get(0).getSubLocality();
--+            /*String address = addresses.get(0).getSubLocality();*/
--             String cityName = addresses.get(0).getLocality();
--             String stateName = addresses.get(0).getAdminArea();
--             String country = addresses.get(0).getCountryName();
--@@ -583,7 +583,7 @@
--         {
--             //GPS is already On then
-- 
---            getLocation();
--+            /*getLocation();*/
--         }
--     }
-- }
--\ No newline at end of file
--Index: app/src/main/res/layout/fragment_login.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.login.LogActivity\" >\r\n\r\n    <ImageView\r\n        android:id=\"@+id/imageView4\"\r\n        android:layout_width=\"254dp\"\r\n        android:layout_height=\"188dp\"\r\n        android:contentDescription=\"@string/title_wellcome_login\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"\r\n        app:layout_constraintVertical_bias=\"0.0\"\r\n        app:srcCompat=\"@drawable/stickerlog\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/textView3\"\r\n        android:layout_width=\"184dp\"\r\n        android:layout_height=\"20dp\"\r\n        android:layout_marginTop=\"40dp\"\r\n        android:layout_marginEnd=\"52dp\"\r\n        android:text=\"@string/title_wellcome_login\"\r\n        android:textColor=\"@color/colorPrimaryLight\"\r\n        android:textSize=\"16sp\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/imageView4\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n    <TextView\r\n        android:id=\"@+id/textView4\"\r\n        android:layout_width=\"151dp\"\r\n        android:layout_height=\"32dp\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:layout_marginEnd=\"84dp\"\r\n        android:text=\"@string/title_orderLog\"\r\n        android:textColor=\"@color/colorPrimary\"\r\n        android:textSize=\"26sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/imageView4\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/textView3\" />\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"530dp\"\r\n        android:orientation=\"vertical\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/imageView4\"\r\n        app:layout_constraintVertical_bias=\"0.527\">\r\n\r\n        <ImageView\r\n            android:id=\"@+id/imageView3\"\r\n            android:layout_width=\"254dp\"\r\n            android:layout_height=\"146dp\"\r\n            android:layout_gravity=\"center_horizontal\"\r\n            android:layout_marginBottom=\"70dp\"\r\n            android:contentDescription=\"@string/title_wellcome_login\"\r\n            app:srcCompat=\"@drawable/logo_and_text\" />\r\n\r\n        <!--<Button\r\n               android:id=\"@+id/btn_facebook\"\r\n               android:layout_width=\"match_parent\"\r\n               android:layout_height=\"wrap_content\"\r\n               android:background=\"@drawable/btn_facebook\"\r\n               android:drawableLeft=\"@drawable/ic_facebook_icon\"\r\n               android:paddingLeft=\"20dp\"\r\n               android:textColor=\"#FFFF\"\r\n               android:layout_marginLeft=\"20dp\"\r\n               android:layout_marginRight=\"20dp\"\r\n               android:text=\"@string/title_cont_faceboock\" /> -->\r\n        <com.facebook.login.widget.LoginButton\r\n            android:id=\"@+id/btn_facebook\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:background=\"@drawable/btn_facebook\"\r\n            android:drawableLeft=\"@drawable/ic_facebook_icon\"\r\n            android:paddingLeft=\"20dp\"\r\n            android:textColor=\"#FFFF\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginRight=\"20dp\"\r\n            android:text=\"@string/title_cont_faceboock\" />\r\n        <!-- <com.facebook.login.widget.LoginButton\r\n            android:id=\"@+id/login_button\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center_horizontal\"\r\n            android:layout_marginTop=\"30dp\"\r\n            android:layout_marginBottom=\"30dp\" />  -->\r\n\r\n        <com.google.android.gms.common.SignInButton\r\n            android:id=\"@+id/btn_google\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginRight=\"20dp\"\r\n            android:background=\"@drawable/btn_google\"\r\n            android:drawableLeft=\"@drawable/ic_google_icon\"\r\n            android:text=\"@string/title_cont_google\"\r\n            android:textColor=\"#000000\" />\r\n\r\n        <Button\r\n            android:id=\"@+id/btn_mail\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginRight=\"20dp\"\r\n            android:background=\"@drawable/btn_mail\"\r\n            android:drawableLeft=\"@drawable/ic_mail_icon\"\r\n            android:onClick=\"Email\"\r\n            android:paddingLeft=\"20dp\"\r\n            android:text=\"@string/title_cont_mail\"\r\n            android:textColor=\"#000000\" />\r\n\r\n    </LinearLayout>\r\n\r\n\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/res/layout/fragment_login.xml	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
--+++ app/src/main/res/layout/fragment_login.xml	(date 1609283329934)
--@@ -5,7 +5,7 @@
--     xmlns:tools="http://schemas.android.com/tools"
--     android:layout_width="match_parent"
--     android:layout_height="match_parent"
---    tools:context=".ui.login.LogActivity" >
--+     >
-- 
--     <ImageView
--         android:id="@+id/imageView4"
--Index: app/src/main/AndroidManifest.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.infinitycrop\">\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/>\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\"/>\r\n    <uses-permission android:name=\"android.permission.INTERNET\"/>\r\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" />\r\n    <!--Permisos Qr-->\r\n    <uses-permission android:name=\"android.permission.CAMERA\"/>\r\n    <uses-feature android:name=\"android.hardware.camera\"></uses-feature>\r\n    <uses-feature android:name=\"android.hardware.camera.autofocus\"></uses-feature>\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher\"\r\n        android:theme=\"@style/AppThemeHome\"\r\n        >\r\n\r\n        <activity android:name=\".MainActivity\" android:theme=\"@style/SplashTheme\">\r\n        </activity>\r\n\r\n        <activity android:name=\"com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\">\r\n\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.HelpProfile\">\r\n\r\n        </activity>\r\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\"></activity>\r\n        <activity android:name=\".ui.list_machine.AddMachine\"></activity>\r\n        <activity android:name=\".ui.logmail.RegisterActivity\"></activity>\r\n        <activity android:name=\".ui.logmail.LoginActivity\"></activity>\r\n        <activity android:name=\".ui.list_machine.CaptureAct\"></activity>\r\n        <activity android:name=\"com.example.infinitycrop.ui.login.LogActivity\"></activity>\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\"></activity>\r\n        <activity android:name=\".ui.profile.settings.ModifyProfile\"></activity>\r\n\r\n\r\n\r\n\r\n        <meta-data android:name=\"com.google.android.geo.API_KEY\"\r\n            android:value=\"@string/google_maps_key\" />\r\n\r\n        <meta-data android:name=\"com.facebook.sdk.ApplicationId\"\r\n            tools:replace=\"android:value\"\r\n            android:value=\"@string/facebook_app_id\"/>\r\n        <meta-data\r\n            android:name=\"preloaded_fonts\"\r\n            android:resource=\"@array/preloaded_fonts\" />\r\n\r\n\r\n    </application>\r\n\r\n</manifest>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/AndroidManifest.xml	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
--+++ app/src/main/AndroidManifest.xml	(date 1609206354200)
--@@ -44,7 +44,7 @@
--         <activity android:name=".ui.list_machine.CaptureAct"></activity>
--         <activity android:name="com.example.infinitycrop.ui.login.LogActivity"></activity>
--         <activity android:name=".ui.LoadAnimations.IntroductoryActivity2"></activity>
---        <activity android:name=".ui.profile.settings.ModifyProfile"></activity>
--+        <activity android:name=".ui.LoadAnimations.LogprimeraActivity"></activity>
-- 
-- 
-- 
--Index: app/src/main/java/com/example/infinitycrop/ui/LoadAnimations/IntroductoryActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.LoadAnimations;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.app.Activity;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.os.CountDownTimer;\r\nimport android.widget.ImageView;\r\n\r\nimport com.airbnb.lottie.LottieAnimationView;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.login.LogActivity;\r\n\r\nimport static java.security.AccessController.getContext;\r\n\r\npublic class IntroductoryActivity extends AppCompatActivity {\r\n    ImageView logo,splashImg;\r\n    LottieAnimationView lottieAnimationView;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_introductory);\r\n        logo = findViewById(R.id.log);\r\n        splashImg = findViewById(R.id.img);\r\n        lottieAnimationView = findViewById(R.id.lottie);\r\n\r\n        splashImg.animate().translationY(-4000).setDuration(1000).setStartDelay(4000);\r\n        logo.animate().translationY(4000).setDuration(1000).setStartDelay(4000);\r\n        lottieAnimationView.animate().translationY(1600).setDuration(800).setStartDelay(3900);\r\n\r\n        if (this.equals(0)) {\r\n            finish();\r\n        }\r\n        new CountDownTimer(4660, 1000) {\r\n\r\n            public void onTick(long millisUntilFinished) {\r\n\r\n\r\n            }\r\n\r\n\r\n            public void onFinish() {\r\n                Intent intent= new Intent (getApplicationContext(), LogActivity.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n\r\n        }.start();\r\n\r\n    }\r\n    @Override\r\n    public void onStop() {\r\n        finish();\r\n        super.onStop();\r\n    }\r\n\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/LoadAnimations/IntroductoryActivity.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
--+++ app/src/main/java/com/example/infinitycrop/ui/LoadAnimations/IntroductoryActivity.java	(date 1609279216633)
--@@ -28,7 +28,7 @@
-- 
--         splashImg.animate().translationY(-4000).setDuration(1000).setStartDelay(4000);
--         logo.animate().translationY(4000).setDuration(1000).setStartDelay(4000);
---        lottieAnimationView.animate().translationY(1600).setDuration(800).setStartDelay(3900);
--+        lottieAnimationView.animate().translationY(1400).setDuration(800).setStartDelay(3900);
-- 
--         if (this.equals(0)) {
--             finish();
--@@ -42,7 +42,7 @@
-- 
-- 
--             public void onFinish() {
---                Intent intent= new Intent (getApplicationContext(), LogActivity.class);
--+                Intent intent= new Intent (getApplicationContext(), LogprimeraActivity.class);
--                 startActivity(intent);
-- 
--             }
--Index: app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.profile;\r\n\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.graphics.Bitmap;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.util.LruCache;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.android.volley.RequestQueue;\r\nimport com.android.volley.toolbox.ImageLoader;\r\nimport com.android.volley.toolbox.NetworkImageView;\r\nimport com.android.volley.toolbox.Volley;\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.MainActivityMachineList;\r\nimport com.example.infinitycrop.ui.login.LogActivity;\r\nimport com.example.infinitycrop.ui.profile.settings.AboutInfinityCrap;\r\nimport com.example.infinitycrop.ui.profile.settings.HelpProfile;\r\n//import com.example.infinitycrop.ui.profile.settings.ModifyProfile;\r\nimport com.firebase.ui.auth.AuthUI;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link ProfileFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class ProfileFragment extends Fragment {\r\n    //atributos para confirmación de correo\r\n    private FirebaseUser us;\r\n    private TextView txtverf;\r\n    private Button btnconf;\r\n\r\n\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public ProfileFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment ProfileFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static ProfileFragment newInstance(String param1, String param2) {\r\n        ProfileFragment fragment = new ProfileFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_profile, container, false);\r\n\r\n        ImageView irAPerfil =v.findViewById(R.id.irAEditarPerfil);\r\n        irAPerfil.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                /*Intent intent = new Intent(getActivity(), ModifyProfile.class);\r\n                startActivity(intent);*/\r\n            }\r\n        });\r\n\r\n        //Enlaces de los botones de configuracion\r\n        //personalice colors\r\n        RelativeLayout customColors_btn =v.findViewById(R.id.relativeLayout4);\r\n        customColors_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n            }\r\n        });\r\n        //about us\r\n        RelativeLayout aboutInfinity_btn =v.findViewById(R.id.relativeLayout6);\r\n        aboutInfinity_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), AboutInfinityCrap.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        //help\r\n        RelativeLayout help_profile =v.findViewById(R.id.relativeLayout5);\r\n        help_profile.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), HelpProfile.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        //firebase\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=mAuth.getCurrentUser().getUid();\r\n        final GoogleSignInClient mGoogleSignInClient;\r\n        GoogleSignInOptions gso;\r\n        final FirebaseUser usuario = FirebaseAuth.getInstance().getCurrentUser();\r\n        //guardo la imagen en un ImagenView\r\n        final ImageView img = (ImageView) v.findViewById(R.id.profile);\r\n        //guardo el nombre en un textView\r\n        final TextView nombre = (TextView) v.findViewById(R.id.username);\r\n        nombre.setText(usuario.getDisplayName());\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(nombre.getText() == \"\"){\r\n                    nombre.setText(snapshot.getString(\"username\"));\r\n                    img.setImageResource(R.drawable.icons_user);\r\n                }\r\n            }\r\n        });\r\n\r\n        //guardo el mail en un textView\r\n        TextView correo = (TextView) v.findViewById(R.id.mailUser);\r\n        correo.setText(usuario.getEmail());\r\n        //cargar imágen con glide:\r\n        Glide.with(this).load(usuario.getPhotoUrl()).into(img);\r\n        //boton cerrar sesion\r\n\r\n        //Configurar las gso para google signIn con el fin de luego desloguear de google\r\n        gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestIdToken(getString(R.string.default_web_client_id))\r\n                .requestEmail()\r\n                .build();\r\n        mGoogleSignInClient = GoogleSignIn.getClient(getActivity(), gso);\r\n\r\n        RelativeLayout cerrarSesion =(RelativeLayout) v.findViewById(R.id.btn_end_session);\r\n        cerrarSesion.setOnClickListener(new View.OnClickListener() {\r\n            public void onClick(View view) {\r\n                new AlertDialog.Builder(requireContext())\r\n                        .setTitle(\"Cerrar sesión\")\r\n                        .setMessage(\"¿Estas seguro que quieres cerrar sesión?\")\r\n                        .setPositiveButton(\"Confirmar\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n                                //Cerrar session con Firebase\r\n                                mAuth.signOut();\r\n                                //Cerrar sesión con google tambien: Google sign out\r\n                                mGoogleSignInClient.signOut().addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                                    @Override\r\n                                    public void onComplete(@NonNull Task<Void> task) {\r\n                                        //Abrir MainActivity con SigIn button\r\n                                        if(task.isSuccessful()){\r\n                                            Intent logActivity = new Intent(getActivity().getApplicationContext(), LogActivity.class);\r\n                                            startActivity(logActivity);\r\n                                            getActivity().finish();\r\n                                        }else{\r\n                                            Toast.makeText(getActivity().getApplicationContext(), \"No se pudo cerrar sesión con google\",\r\n                                                    Toast.LENGTH_LONG).show();\r\n                                        }\r\n                                    }\r\n                                });\r\n\r\n                            }\r\n                        })\r\n                        .setNegativeButton(\"Cancelar\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                            }\r\n                        })\r\n                        .show();\r\n\r\n\r\n            }\r\n        });\r\n\r\n        //Confirmación de verificación de correo\r\n        TextView txtverify = (TextView) v.findViewById(R.id.txtVerif);\r\n        Button btnverify = (Button) v.findViewById(R.id.btnverif);\r\n        final FirebaseUser user = mAuth.getCurrentUser();\r\n        if(!user.isEmailVerified()){\r\n            us=user;\r\n            txtverf = txtverify;\r\n            btnconf = btnverify;\r\n\r\n            txtverify.setVisibility(View.VISIBLE);\r\n            btnverify.setVisibility(View.VISIBLE);\r\n\r\n            btnverify.setOnClickListener(new View.OnClickListener()\r\n            {\r\n                @Override\r\n                public void onClick(final View v)\r\n                {\r\n\r\n                    FirebaseUser user = mAuth.getCurrentUser();\r\n                    user.sendEmailVerification().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            Toast.makeText(getActivity(),\"Enviando correo de confirmación\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n\r\n                            Toast.makeText(getActivity(),\"Error en el envío de correo\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            /*}else{\r\n            txtverify.setVisibility(View.GONE);\r\n            btnverify.setVisibility(View.GONE);*/\r\n        }\r\n        /*RequestQueue colaPeticiones = Volley.newRequestQueue(getActivity()\r\n                .getApplicationContext());\r\n        ImageLoader lectorImagenes = new ImageLoader(colaPeticiones,\r\n                new ImageLoader.ImageCache() {\r\n                    private final LruCache<String, Bitmap> cache =\r\n                            new LruCache<String, Bitmap>(10);\r\n                    public void putBitmap(String url, Bitmap bitmap) {\r\n                        cache.put(url, bitmap);\r\n                    }\r\n                    public Bitmap getBitmap(String url) {\r\n                        return cache.get(url);\r\n                    }\r\n                });\r\n        Uri urlImagen = usuario.getPhotoUrl();\r\n        if (urlImagen != null) {\r\n            NetworkImageView fotoUsuario = (NetworkImageView)\r\n                    v.findViewById(R.id.profile);\r\n            fotoUsuario.setImageUrl(urlImagen.toString(), lectorImagenes);\r\n        }else{\r\n            NetworkImageView fotoUsuario = (NetworkImageView)\r\n                    v.findViewById(R.id.profile);\r\n            fotoUsuario.setImageUrl(String.valueOf(R.drawable.icons_user), lectorImagenes);\r\n        }*/\r\n        return v;\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
--+++ app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java	(date 1609199006251)
--@@ -32,7 +32,7 @@
-- import com.example.infinitycrop.ui.login.LogActivity;
-- import com.example.infinitycrop.ui.profile.settings.AboutInfinityCrap;
-- import com.example.infinitycrop.ui.profile.settings.HelpProfile;
---//import com.example.infinitycrop.ui.profile.settings.ModifyProfile;
--+/*import com.example.infinitycrop.ui.profile.settings.ModifyProfile;*/
-- import com.firebase.ui.auth.AuthUI;
-- import com.google.android.gms.auth.api.signin.GoogleSignIn;
-- import com.google.android.gms.auth.api.signin.GoogleSignInClient;
--@@ -112,7 +112,7 @@
--         irAPerfil.setOnClickListener(new View.OnClickListener() {
--             @Override
--             public void onClick(View v) {
---                /*Intent intent = new Intent(getActivity(), ModifyProfile.class);
--+               /* Intent intent = new Intent(getActivity(), ModifyProfile.class);
--                 startActivity(intent);*/
--             }
--         });
--Index: app/src/main/java/com/example/infinitycrop/ui/OnBoardingFragment/OnBoardingFragment4.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.OnBoardingFragment;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.AddMachine;\r\n\r\npublic class OnBoardingFragment4 extends Fragment {\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        final ViewGroup root = (ViewGroup) inflater.inflate(R.layout.fragment_on_boarding4,container,false);\r\n        TextView button = (TextView) root.findViewById(R.id.btn_skip);\r\n        button.setOnClickListener(new View.OnClickListener()\r\n        {\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                Intent intent = new Intent((getActivity().getApplication()), AddMachine.class);\r\n                TextView editText = (TextView) root.findViewById(R.id.btn_skip);\r\n\r\n                startActivity(intent);\r\n\r\n            }\r\n        });\r\n        Button button1 = (Button) root.findViewById(R.id.btn_start);\r\n        button1.setOnClickListener(new View.OnClickListener()\r\n        {\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                Intent i = new Intent((getActivity().getApplication()), AddMachine.class);\r\n                Button button1 = (Button) root.findViewById(R.id.btn_start);\r\n                startActivity(i);\r\n            }\r\n        });\r\n\r\n        return root;\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/OnBoardingFragment/OnBoardingFragment4.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
--+++ app/src/main/java/com/example/infinitycrop/ui/OnBoardingFragment/OnBoardingFragment4.java	(date 1609285300918)
--@@ -17,6 +17,7 @@
--     @Override
--     public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
--         final ViewGroup root = (ViewGroup) inflater.inflate(R.layout.fragment_on_boarding4,container,false);
--+
--         TextView button = (TextView) root.findViewById(R.id.btn_skip);
--         button.setOnClickListener(new View.OnClickListener()
--         {
--@@ -30,6 +31,7 @@
-- 
--             }
--         });
--+
--         Button button1 = (Button) root.findViewById(R.id.btn_start);
--         button1.setOnClickListener(new View.OnClickListener()
--         {
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02__Default_Changelist_.xml
-===================================================================
---- .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-+++ .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_30_12_2020_23_02_[Default_Changelist]" date="1609365747965" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02_[Default_Changelist]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 30/12/2020 23:02 [Default Changelist]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20__Default_Changelist_.xml
-===================================================================
---- .idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-+++ .idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_02_01_2021_18_20_[Default_Changelist]" date="1609608028000" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20_[Default_Changelist]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 02/01/2021 18:20 [Default Changelist]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_18_10__Default_Changelist_.xml
-===================================================================
---- .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_18_10__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-+++ .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_18_10__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_28_12_2020_18_10_[Default_Changelist]" date="1609175420227" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_18_10_[Default_Changelist]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 28/12/2020 18:10 [Default Changelist]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02_[Default_Changelist]/shelved.patch
-===================================================================
---- .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-+++ .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-@@ -1,350 +0,0 @@
--Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.Manifest;\r\nimport android.app.Activity;\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.content.res.ColorStateList;\r\nimport android.location.Address;\r\nimport android.location.Geocoder;\r\nimport android.location.Location;\r\nimport android.location.LocationManager;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.os.StrictMode;\r\nimport android.provider.Settings;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvModel;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.location.FusedLocationProviderClient;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.annotations.NotNull;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.squareup.okhttp.Call;\r\nimport com.squareup.okhttp.Callback;\r\nimport com.squareup.okhttp.OkHttpClient;\r\nimport com.squareup.okhttp.Request;\r\nimport com.squareup.okhttp.Response;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link DashboardFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class DashboardFragment extends Fragment implements MqttCallback{\r\n\r\n    private RecyclerView recyclerView;\r\n    private StaticRvAdapter staticRvAdapter;\r\n    private TabLayout tabLayout;\r\n    private ViewPager viewPager;\r\n    //WEATHER\r\n    private static  final int REQUEST_LOCATION=1;\r\n    double lat;\r\n    double longi;\r\n\r\n    TextView showLocationTxt;\r\n\r\n    LocationManager locationManager;\r\n    String latitude,longitude;\r\n\r\n    TextView view_city;\r\n    TextView view_temp;\r\n    TextView view_desc;\r\n    TextView view_country;\r\n\r\n    ImageView view_weather;\r\n    //\r\n\r\n\r\n    public static MqttClient client = null;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public DashboardFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment DashboardFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static DashboardFragment newInstance(String param1, String param2) {\r\n        DashboardFragment fragment = new DashboardFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_dashboard, container, false);\r\n        //FIREBASE\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        final FirebaseUser usuario = mAuth.getCurrentUser();\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=usuario.getUid();\r\n        //guardo el nombre en un textView\r\n        /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);\r\n        String res=\"Hola\"+\" \"+usuario.getDisplayName();\r\n        nombre.setText(res);\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(usuario.getDisplayName() == null){\r\n                    String res1=\"Hola\"+\" \"+snapshot.getString(\"username\");\r\n                    nombre.setText(res1);\r\n                }\r\n            }\r\n        });*/\r\n\r\n        //switch methods\r\n /*     Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });*/\r\n\r\n\r\n        //WEATHER\r\n        ActivityCompat.requestPermissions(getActivity(),new String[]\r\n                {Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n\r\n        view_city =v.findViewById(R.id.town);\r\n        view_city.setText(\"\");\r\n        view_temp =v.findViewById(R.id.temp);\r\n        view_temp.setText(\"\");\r\n        view_desc =v.findViewById(R.id.desc);\r\n        view_desc.setText(\"\");\r\n        view_country=v.findViewById(R.id.txtCountry);\r\n        view_country.setText(\"\");\r\n        view_weather =v.findViewById(R.id.wheather_image);\r\n\r\n        locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);\r\n        inicioGPS();\r\n        //\r\n\r\n\r\n\r\n\r\n        //RECYCLER VIEW\r\n        ArrayList<StaticRvModel> item=new ArrayList<>();\r\n        item.add(new StaticRvModel(R.drawable.icons_sun,\"Soleado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_night_mode,\"Nocturno\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_energy_saving,\"Ahorro\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_power_off,\"Apagado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_custom,\"Custom\"));\r\n\r\n        final TextView medidasT=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidasH=v.findViewById(R.id.medidaHumedadGeneral);\r\n        final TextView medidasS=v.findViewById(R.id.medidaSalinidadGeneral);\r\n        final TextView medidasL=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n\r\n        recyclerView=v.findViewById(R.id.rv_1);\r\n        staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(),LinearLayoutManager.HORIZONTAL,false));\r\n        recyclerView.setAdapter(staticRvAdapter);\r\n\r\n\r\n        //TABS\r\n        tabLayout = v.findViewById(R.id.tab_layout);\r\n        viewPager = v.findViewById(R.id.view_pager);\r\n         //Array\r\n        ArrayList<String> arrayList = new ArrayList<>();\r\n\r\n        //set up with viewpager\r\n        tabLayout.setupWithViewPager(viewPager);\r\n\r\n        TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());\r\n        //Pestañas\r\n        adapter.addFrag(new GeneralFragment(),\"General\");\r\n        adapter.addFrag(new Planta1Fragment(),\"Planta 1\");\r\n        adapter.addFrag(new Planta2Fragment(),\"Planta 2\");\r\n\r\n        viewPager.setAdapter(adapter );\r\n\r\n        /*((MainActivity)getActivity()).ola();*/\r\n     /*   //LEER DATOS FIREBASE\r\n        //Temperatura\r\n       DocumentReference documentTemperatura=fStore.collection(\"SensoresA-T\").document(\"Temperatura\");\r\n        documentTemperatura.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediTemp=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasT.setText(resMediTemp);\r\n            }\r\n        });\r\n        //Humedad\r\n        DocumentReference documentHumedad=fStore.collection(\"SensoresA-T\").document(\"Humedad\");\r\n        documentHumedad.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediHum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasH.setText(resMediHum);\r\n            }\r\n        });\r\n        //Iluminación\r\n        DocumentReference documentIluminación=fStore.collection(\"SensoresA-T\").document(\"Iluminación\");\r\n        documentIluminación.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIlum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasL.setText(resMediIlum);\r\n            }\r\n        });\r\n        //Temperatura ambiente\r\n        DocumentReference documentambiente=fStore.collection(\"SensoresA-T\").document(\"Temperatura ambiente\");\r\n        documentambiente.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIAmb=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasS.setText(resMediIAmb);\r\n            }\r\n        });\r\n\r\n      */\r\n\r\n        return v;\r\n    }\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n\r\n\r\n    //WEATHER METHODS\r\n    private void api_key(final String City) {\r\n        OkHttpClient client = new OkHttpClient();\r\n\r\n        Request request = new Request.Builder()\r\n                .url(\"https://api.openweathermap.org/data/2.5/weather?q=\" + City + \"&appid=a6f41d947e0542a26580bcd5c3fb90ef&units=metric\")\r\n                .get()\r\n                .build();\r\n        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n        StrictMode.setThreadPolicy(policy);\r\n        try {\r\n            Response response = client.newCall(request).execute();\r\n            client.newCall(request).enqueue(new Callback() {\r\n                @Override\r\n                public void onFailure(Request request, IOException e) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onResponse(Response response) throws IOException {\r\n                    String responseData = response.body().string();\r\n                    try {\r\n                        JSONObject json = new JSONObject(responseData);\r\n                        JSONArray array = json.getJSONArray(\"weather\");\r\n                        JSONObject object = array.getJSONObject(0);\r\n\r\n                        String description = object.getString(\"description\");\r\n                        String icons = object.getString(\"icon\");\r\n\r\n                        JSONObject temp1 = json.getJSONObject(\"main\");\r\n                        Double Temperature = temp1.getDouble(\"temp\");\r\n\r\n                        setText(view_city, City);\r\n\r\n                        String temps = Math.round(Temperature) + \" °C\";\r\n                        setText(view_temp, temps);\r\n                        setText(view_desc, description);\r\n                        setImage(view_weather, icons);\r\n\r\n                    } catch (JSONException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n\r\n            });\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    private void setText(final TextView text, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                text.setText(value);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setImage(final ImageView imageView, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                //paste switch\r\n                switch (value) {\r\n                    case \"01d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"01n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"02d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"02n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"03d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"03n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"04d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"04n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"09d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"09n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"10d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"10n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"11d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"11n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"13d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    case \"13n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    default:\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.wheather));\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    //App location\r\n    private void getLocation() {\r\n\r\n        //Check Permissions again\r\n\r\n        if (ActivityCompat.checkSelfPermission(\r\n                getContext(),Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(\r\n                getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n        } else {\r\n\r\n            Location LocationNetwork=locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);\r\n             if (LocationNetwork !=null)\r\n            {\r\n                double lat=LocationNetwork.getLatitude();\r\n                double longi=LocationNetwork.getLongitude();\r\n\r\n                latitude=String.valueOf(lat);\r\n                longitude=String.valueOf(longi);\r\n                loc_func(LocationNetwork);\r\n                api_key(String.valueOf(view_city.getText()));\r\n                showLocationTxt.setText(\"Your Location:\"+\"\\n\"+\"Latitude= \"+latitude+\"\\n\"+\"Longitude= \"+longitude);\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private void OnGPS() {\r\n\r\n        final AlertDialog.Builder builder= new AlertDialog.Builder(getContext());\r\n\r\n        builder.setMessage(\"Enable GPS\").setCancelable(false).setPositiveButton(\"YES\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS));\r\n                getLocation();\r\n            }\r\n        }).setNegativeButton(\"NO\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                dialog.cancel();\r\n            }\r\n        });\r\n        final AlertDialog alertDialog=builder.create();\r\n        alertDialog.show();\r\n    }\r\n\r\n    private void loc_func(Location location){\r\n        try {\r\n            Geocoder geocoder=new Geocoder(getContext());\r\n            List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);\r\n            String address = addresses.get(0).getSubLocality();\r\n            String cityName = addresses.get(0).getLocality();\r\n            String stateName = addresses.get(0).getAdminArea();\r\n            String country = addresses.get(0).getCountryName();\r\n            //txt_paddress.setText(address);\r\n            view_city.setText(cityName);\r\n            view_country.setText(country);\r\n            //txt_state.setText(stateName);*/\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            Toast.makeText(getContext(), \"Error:\"+e, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void inicioGPS(){\r\n\r\n\r\n        //Check gps is enable or not\r\n\r\n        if (!locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))\r\n        {\r\n            //Write Function To enable gps\r\n\r\n            OnGPS();\r\n        }\r\n        else\r\n        {\r\n            //GPS is already On then\r\n\r\n            getLocation();\r\n        }\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
--+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(date 1609191349849)
--@@ -505,7 +505,7 @@
-- 
--         //Check Permissions again
-- 
---        if (ActivityCompat.checkSelfPermission(
--+        /*if (ActivityCompat.checkSelfPermission(
--                 getContext(),Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(
--                 getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
--             ActivityCompat.requestPermissions(getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);
--@@ -524,7 +524,7 @@
--                 showLocationTxt.setText("Your Location:"+"\n"+"Latitude= "+latitude+"\n"+"Longitude= "+longitude);
--             }
-- 
---        }
--+        }*/
-- 
--     }
-- 
--Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.dashboard;\n\nimport android.os.Bundle;\n\nimport androidx.fragment.app.Fragment;\n\nimport android.util.Log;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.CompoundButton;\nimport android.widget.Switch;\nimport android.widget.TextView;\n\nimport com.example.comun.Mqtt;\nimport com.example.infinitycrop.R;\n\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\nimport org.eclipse.paho.client.mqttv3.MqttClient;\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\nimport org.eclipse.paho.client.mqttv3.MqttException;\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\n\nimport static com.example.comun.Mqtt.topicRoot;\n\n/**\n * A simple {@link Fragment} subclass.\n * Use the {@link GeneralFragment#newInstance} factory method to\n * create an instance of this fragment.\n */\npublic class GeneralFragment extends Fragment implements MqttCallback{\n    public static MqttClient client = null;\n    // TODO: Rename parameter arguments, choose names that match\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\n    private static final String ARG_PARAM1 = \"param1\";\n    private static final String ARG_PARAM2 = \"param2\";\n\n    // TODO: Rename and change types of parameters\n    private String mParam1;\n    private String mParam2;\n\n    public GeneralFragment() {\n        // Required empty public constructor\n    }\n\n    /**\n     * Use this factory method to create a new instance of\n     * this fragment using the provided parameters.\n     *\n     * @param param1 Parameter 1.\n     * @param param2 Parameter 2.\n     * @return A new instance of fragment GeneralFragment.\n     */\n    // TODO: Rename and change types and number of parameters\n    public static GeneralFragment newInstance(String param1, String param2) {\n        GeneralFragment fragment = new GeneralFragment();\n        Bundle args = new Bundle();\n        args.putString(ARG_PARAM1, param1);\n        args.putString(ARG_PARAM2, param2);\n        fragment.setArguments(args);\n        return fragment;\n    }\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        if (getArguments() != null) {\n            mParam1 = getArguments().getString(ARG_PARAM1);\n            mParam2 = getArguments().getString(ARG_PARAM2);\n        }\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        View v = inflater.inflate(R.layout.fragment_general, container, false);\n        //switch methods\n        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\n                if (isChecked) {\n                    // The toggle is enabled\n                    enviarLucesOn();\n                } else {\n                    // The toggle is disabled\n                    enviarLucesOff();\n                }\n            }\n        });\n        return v;\n    }\n    public void enviarLucesOff(){\n        try {\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\n                    MemoryPersistence());\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n        MqttConnectOptions connOpts = new MqttConnectOptions();\n        connOpts.setCleanSession(true);\n        connOpts.setKeepAliveInterval(60);\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\n\n        try {\n            client.connect(connOpts);\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n\n        //conexión con el broker Root1 = Lector de datos\n        //nos subscribimos a topic lectura\n        try {\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\n            client.setCallback((MqttCallback) this);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\n        }\n        try {\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\n            MqttMessage message = new MqttMessage(\"Superior OFF\".getBytes());\n            message.setQos(Mqtt.qos);\n            message.setRetained(false);\n            client.publish(topicRoot+\"luces\", message);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\n        }\n    }\n    public void enviarLucesOn(){\n        try {\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\n                    MemoryPersistence());\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n        MqttConnectOptions connOpts = new MqttConnectOptions();\n        connOpts.setCleanSession(true);\n        connOpts.setKeepAliveInterval(60);\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\n\n        try {\n            client.connect(connOpts);\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n\n        //conexión con el broker Root1 = Lector de datos\n        //nos subscribimos a topic lectura\n        try {\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\n            client.setCallback((MqttCallback) this);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\n        }\n        try {\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\n            MqttMessage message = new MqttMessage(\"Superior ON\".getBytes());\n            message.setQos(Mqtt.qos);\n            message.setRetained(false);\n            client.publish(topicRoot+\"luces\", message);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\n        }\n    }\n\n    @Override\n    public void connectionLost(Throwable cause) {\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\n    }\n\n    @Override\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\n\n    }\n\n    @Override\n    public void deliveryComplete(IMqttDeliveryToken token) {\n        Log.d(Mqtt.TAG, \"Entrega completa\");\n    }\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
--+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(date 1609360979620)
--@@ -2,6 +2,7 @@
-- 
-- import android.os.Bundle;
-- 
--+import androidx.annotation.Nullable;
-- import androidx.fragment.app.Fragment;
-- 
-- import android.util.Log;
--@@ -13,7 +14,14 @@
-- import android.widget.TextView;
-- 
-- import com.example.comun.Mqtt;
--+import com.example.infinitycrop.MainActivity;
-- import com.example.infinitycrop.R;
--+import com.google.firebase.firestore.EventListener;
--+import com.google.firebase.firestore.FirebaseFirestore;
--+import com.google.firebase.firestore.FirebaseFirestoreException;
--+import com.google.firebase.firestore.Query;
--+import com.google.firebase.firestore.QueryDocumentSnapshot;
--+import com.google.firebase.firestore.QuerySnapshot;
-- 
-- import org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;
-- import org.eclipse.paho.client.mqttv3.MqttCallback;
--@@ -32,6 +40,8 @@
--  */
-- public class GeneralFragment extends Fragment implements MqttCallback{
--     public static MqttClient client = null;
--+    private String uid;
--+    private FirebaseFirestore db;
--     // TODO: Rename parameter arguments, choose names that match
--     // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
--     private static final String ARG_PARAM1 = "param1";
--@@ -90,6 +100,45 @@
--                 }
--             }
--         });
--+        db = FirebaseFirestore.getInstance();
--+        MainActivity myActivity = (MainActivity) getActivity();
--+        final TextView medidaTemp=v.findViewById(R.id.medidaTemperaturaGeneral);
--+        final TextView medidaHum=v.findViewById(R.id.medidaHumedadGeneral);
--+        final TextView medidaHumAm=v.findViewById(R.id.medidaSalinidadGeneral);
--+        final TextView medidaLuz=v.findViewById(R.id.medidasLuminosidadGeneral);
--+        uid=myActivity.getMachineUID();
--+        db.collection("Mediciones")
--+                .whereEqualTo("machineId",uid)
--+                .whereEqualTo("Planta","0")
--+                .orderBy("Fecha", Query.Direction.DESCENDING)
--+                .limit(1)
--+                .addSnapshotListener(new EventListener<QuerySnapshot>() {
--+                    @Override
--+                    public void onEvent(@Nullable QuerySnapshot value,
--+                                        @Nullable FirebaseFirestoreException e) {
--+                        if (e != null) {
--+                            return;
--+                        }
--+
--+
--+                        for (QueryDocumentSnapshot doc : value) {
--+                            //Temperatura
--+                            String medidaT=doc.getString("Temperatura");
--+                            medidaTemp.setText(medidaT);
--+                            //Humedad
--+                            String medidaH=doc.getString("Humedad");
--+                            medidaHum.setText(medidaH);
--+                            //Humedad Ambiente
--+                            String medidaHA=doc.getString("Humedad Ambiente");
--+                            medidaHumAm.setText(medidaHA);
--+                            //Luminosidad
--+                            String medidaL=doc.getString("Luminosidad");
--+                            medidaLuz.setText(medidaL);
--+
--+                        }
--+
--+                    }
--+                });
--         return v;
--     }
--     public void enviarLucesOff(){
--Index: github.properties
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>gpr.usr = 61469172\ngpr.key = 72a0f63b7097b413e8ff78a7dd6ca9412aaf232c
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>windows-1252
--===================================================================
----- github.properties	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
--+++ github.properties	(date 1609173892824)
--@@ -1,2 +1,2 @@
---gpr.usr = 61469172
---gpr.key = 72a0f63b7097b413e8ff78a7dd6ca9412aaf232c
--\ No newline at end of file
--+gpr.usr = 61473165
--+gpr.key = 9671a8c2e26934b214e49dd99b96077296ee2aca
--\ No newline at end of file
--Index: app/src/main/java/com/example/infinitycrop/ui/service/ServicioMqtt.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/service/ServicioMqtt.java	(date 1609359437907)
--+++ app/src/main/java/com/example/infinitycrop/ui/service/ServicioMqtt.java	(date 1609359437907)
--@@ -0,0 +1,114 @@
--+package com.example.infinitycrop.ui.service;
--+
--+
--+import android.app.Service;
--+import android.content.Intent;
--+import android.os.IBinder;
--+import android.util.Log;
--+import android.widget.Toast;
--+
--+
--+import com.example.comun.Mqtt;
--+import com.google.firebase.Timestamp;
--+import com.google.firebase.firestore.FirebaseFirestore;
--+
--+import org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;
--+import org.eclipse.paho.client.mqttv3.MqttCallback;
--+import org.eclipse.paho.client.mqttv3.MqttClient;
--+import org.eclipse.paho.client.mqttv3.MqttConnectOptions;
--+import org.eclipse.paho.client.mqttv3.MqttException;
--+import org.eclipse.paho.client.mqttv3.MqttMessage;
--+import org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;
--+
--+import java.text.SimpleDateFormat;
--+import java.util.Date;
--+import java.util.HashMap;
--+import java.util.Map;
--+
--+import static com.example.comun.Mqtt.topicRoot;
--+
--+
--+public class ServicioMqtt extends Service implements MqttCallback {
--+
--+    public static MqttClient client = null;
--+    private FirebaseFirestore db;
--+    private String getId;
--+
--+    @Override public void onCreate(){
--+        Toast.makeText(this,"Conectando con tu maquina......", Toast.LENGTH_LONG).show();
--+        db = FirebaseFirestore.getInstance();
--+        try {
--+            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new
--+                    MemoryPersistence());
--+        } catch (MqttException e) {
--+            e.printStackTrace();
--+        }
--+        MqttConnectOptions connOpts = new MqttConnectOptions();
--+        connOpts.setCleanSession(true);
--+        connOpts.setKeepAliveInterval(60);
--+        connOpts.setWill(topicRoot+"WillTopic", "App desconectada".getBytes(),Mqtt.qos, false);
--+        try {
--+            client.connect(connOpts);
--+        } catch (MqttException e) {
--+            e.printStackTrace();
--+        }
--+
--+        // Nos suscribimos al topic rfid
--+        try {
--+            Log.i(Mqtt.TAG, "Suscrito a " + topicRoot+"lecturaDatos");
--+            client.subscribe(topicRoot+"lecturaDatos", Mqtt.qos);
--+            client.setCallback(this);
--+        } catch (MqttException e) {
--+            Log.e(Mqtt.TAG, "Error al suscribir.", e);
--+        }
--+    }
--+
--+    @Override
--+    public int onStartCommand(Intent intenc, int flags, int idArranque) {
--+        getId =intenc.getStringExtra("machine");
--+        Toast.makeText(this, getId , Toast.LENGTH_SHORT).show();
--+
--+        return START_STICKY;
--+    }
--+    @Override public void onDestroy() {
--+
--+    }
--+    @Override public IBinder onBind(Intent intencion) {
--+        return null;
--+    }
--+
--+    @Override
--+    public void connectionLost(Throwable cause) {
--+
--+    }
--+
--+    @Override
--+    public void messageArrived(String topic, MqttMessage message) throws Exception {
--+        String payload = new String(message.getPayload());
--+
--+        String[] parts = payload.split("-");
--+        String part1 = parts[0];
--+        String part2 = parts[1];
--+        String part3 = parts[2];
--+        String part4 = parts[3];
--+        String part5 = parts[4];
--+        String part6 = parts[5];
--+
--+        Map<String, Object> user = new HashMap<>();
--+        user.put("Humedad", part2);
--+        user.put("Humedad Ambiente", part3);
--+        user.put("Luminosidad", part4);
--+        user.put("Temperatura", part5);
--+        user.put("Fecha", new Timestamp(new Date()));
--+        user.put("machineId", part1);
--+        user.put("Planta", part6);
--+
--+        db.collection("Mediciones").document().set(user);
--+        //db.collection("users").document("9XncSt20DYUov9gGVKoB").set(user);
--+    }
--+
--+    @Override
--+    public void deliveryComplete(IMqttDeliveryToken token) {
--+
--+    }
--+}
--\ No newline at end of file
--Index: app/src/main/AndroidManifest.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    package=\"com.example.infinitycrop\">\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/>\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\"/>\n    <uses-permission android:name=\"android.permission.INTERNET\"/>\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" />\n    <!--Permisos Qr-->\n    <uses-permission android:name=\"android.permission.CAMERA\"/>\n    <uses-feature android:name=\"android.hardware.camera\"></uses-feature>\n    <uses-feature android:name=\"android.hardware.camera.autofocus\"></uses-feature>\n\n    <application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher\"\n        android:theme=\"@style/AppThemeHome\"\n        >\n\n        <activity android:name=\".MainActivity\" android:theme=\"@style/SplashTheme\">\n        </activity>\n\n        <activity android:name=\"com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity\">\n            <intent-filter>\n                <action android:name=\"android.intent.action.MAIN\" />\n                <category android:name=\"android.intent.category.LAUNCHER\" />\n            </intent-filter>\n        </activity>\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\">\n\n        </activity>\n        <activity android:name=\".ui.profile.settings.HelpProfile\">\n\n        </activity>\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\"></activity>\n        <activity android:name=\".ui.list_machine.AddMachine\"></activity>\n        <activity android:name=\".ui.logmail.RegisterActivity\"></activity>\n        <activity android:name=\".ui.logmail.LoginActivity\"></activity>\n        <activity android:name=\".ui.list_machine.CaptureAct\"></activity>\n        <activity android:name=\"com.example.infinitycrop.ui.login.LogActivity\"></activity>\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\"></activity>\n        <activity android:name=\".ui.profile.settings.ModifyProfile\"></activity>\n\n\n\n\n        <meta-data android:name=\"com.google.android.geo.API_KEY\"\n            android:value=\"@string/google_maps_key\" />\n\n        <meta-data android:name=\"com.facebook.sdk.ApplicationId\"\n            tools:replace=\"android:value\"\n            android:value=\"@string/facebook_app_id\"/>\n        <meta-data\n            android:name=\"preloaded_fonts\"\n            android:resource=\"@array/preloaded_fonts\" />\n\n\n    </application>\n\n</manifest>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/AndroidManifest.xml	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
--+++ app/src/main/AndroidManifest.xml	(date 1609352360254)
--@@ -24,7 +24,7 @@
-- 
--         <activity android:name=".MainActivity" android:theme="@style/SplashTheme">
--         </activity>
---
--+        <service android:name="com.example.infinitycrop.ui.service.ServicioMqtt" />
--         <activity android:name="com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity">
--             <intent-filter>
--                 <action android:name="android.intent.action.MAIN" />
--Index: app/src/main/java/com/example/infinitycrop/MainActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop;\nimport android.os.Bundle;\nimport android.widget.Toast;\n\nimport com.example.infinitycrop.ui.control_panel.Control_panelFragment;\nimport com.example.infinitycrop.ui.dashboard.DashboardFragment;\nimport com.example.infinitycrop.ui.graphic.GraphicFragment;\nimport com.example.infinitycrop.ui.map.MapFragment;\nimport com.example.infinitycrop.ui.profile.ProfileFragment;\nimport com.google.firebase.firestore.FirebaseFirestore;\nimport com.ismaeldivita.chipnavigation.ChipNavigationBar;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.fragment.app.Fragment;\nimport androidx.fragment.app.FragmentManager;\nimport androidx.fragment.app.FragmentPagerAdapter;\nimport androidx.viewpager.widget.ViewPager;\n\nimport java.util.ArrayList;\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private ChipNavigationBar chipNavigationBar;\n    private ViewPager viewPager;\n    private Fragment fragment=null;\n    private int index = 0;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        setTheme(R.style.AppThemeHome);\n        super.onCreate(savedInstanceState);\n\n        Bundle extras = getIntent().getExtras();\n        String s = extras.getString(\"machine\");\n        Toast.makeText(this, s , Toast.LENGTH_SHORT).show();\n\n        setContentView(R.layout.activity_main);\n        chipNavigationBar=findViewById(R.id.chipNavigation);\n        viewPager = findViewById(R.id.view_pager11);\n        chipNavigationBar.setItemSelected(R.id.home,true);\n\n        ViewPagerAdapter viewPagerAdapter = new ViewPagerAdapter(getSupportFragmentManager());\n        viewPager.setAdapter(viewPagerAdapter);\n\n        final ViewPagerAdapter adapter = new ViewPagerAdapter(getSupportFragmentManager());\n        final DashboardFragment fragment_1 = new DashboardFragment();\n        //final GraphicFragment fragment_2 = new GraphicFragment();\n        final Control_panelFragment fragment_2 = new Control_panelFragment();\n        final MapFragment fragment_3 = new MapFragment();\n        final ProfileFragment fragment_4 = new ProfileFragment();\n        adapter.addFragment(fragment_1);\n        adapter.addFragment(fragment_2);\n        adapter.addFragment(fragment_3);\n        adapter.addFragment(fragment_4);\n        viewPager.setAdapter(adapter);\n        viewPager.setOffscreenPageLimit(4);\n        index = 1;\n        chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {\n            @Override\n            public void onItemSelected(int i) {\n                switch(i){\n                    case R.id.home:\n                        viewPager.setCurrentItem(0);\n                        break;\n                    case R.id.graphics:\n                        viewPager.setCurrentItem(1);\n                        break;\n                    case R.id.notifications:\n                        viewPager.setCurrentItem(2);\n                        break;\n                    case R.id.profile:\n                        viewPager.setCurrentItem(3);\n                        break;\n                }\n\n\n            }\n        });\n\n\n        viewPager.addOnPageChangeListener(new ViewPager.OnPageChangeListener() {\n            @Override\n            public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {\n\n            }\n\n            @Override\n            public void onPageSelected(int position) {\n\n                if (position == 0){\n\n                    chipNavigationBar.setItemSelected(R.id.home, true);\n                    chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {\n                        @Override\n                        public void onItemSelected(int id) {\n\n                            switch(id){\n                                case R.id.home:\n                                    viewPager.setCurrentItem(0);\n                                    break;\n                                case R.id.graphics:\n                                    viewPager.setCurrentItem(1);\n                                    break;\n                                case R.id.notifications:\n                                    viewPager.setCurrentItem(2);\n                                    break;\n                                case R.id.profile:\n                                    viewPager.setCurrentItem(3);\n                                    break;\n                            }\n                        }\n                    });\n\n                    index = 0;\n\n                }else if (position == 1){\n\n                    chipNavigationBar.setItemSelected(R.id.graphics, true);\n\n                    if(index == 0 || index == 2){\n\n                        //fragment_2.downloadPlates_2();\n                    }\n                    index = 1;\n                    //Toast.makeText(Home.this, \"\"+index, Toast.LENGTH_SHORT).show();\n                }else if (position == 2){\n\n                    chipNavigationBar.setItemSelected(R.id.notifications, true);\n                    chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {\n                        @Override\n                        public void onItemSelected(int id) {\n\n                            switch(id){\n                                case R.id.home:\n                                    viewPager.setCurrentItem(0);\n                                    break;\n                                case R.id.graphics:\n                                    viewPager.setCurrentItem(1);\n                                    break;\n                                case R.id.notifications:\n                                    viewPager.setCurrentItem(2);\n                                    break;\n                                case R.id.profile:\n                                    viewPager.setCurrentItem(3);\n                                    break;\n                            }\n                        }\n                    });\n\n                    index = 2;\n\n                }else if (position == 3){\n\n                    chipNavigationBar.setItemSelected(R.id.profile, true);\n                    chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {\n                        @Override\n                        public void onItemSelected(int id) {\n\n                            switch(id){\n                                case R.id.home:\n                                    viewPager.setCurrentItem(0);\n                                    break;\n                                case R.id.graphics:\n                                    viewPager.setCurrentItem(1);\n                                    break;\n                                case R.id.notifications:\n                                    viewPager.setCurrentItem(2);\n                                    break;\n                                case R.id.profile:\n                                    viewPager.setCurrentItem(3);\n                                    break;\n                            }\n                        }\n                    });\n\n                    index = 3;\n                }\n            }\n\n            @Override\n            public void onPageScrollStateChanged(int state) {\n\n            }\n        });\n    }\n\n\n    class ViewPagerAdapter extends FragmentPagerAdapter {\n\n\n\n        private ArrayList<Fragment> fragments;\n        private ArrayList<String> titles;\n\n        ViewPagerAdapter (FragmentManager fm){\n            super(fm);\n            this.fragments = new ArrayList<>();\n            this.titles = new ArrayList<>();\n\n        }\n\n        @NonNull\n        @Override\n        public Fragment getItem(int position) {\n            return fragments.get(position);\n        }\n\n        @Override\n        public int getCount() {\n            return fragments.size();\n        }\n\n        public void addFragment(Fragment fragment){\n            fragments.add(fragment);\n\n        }\n\n    }\n\n\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/MainActivity.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
--+++ app/src/main/java/com/example/infinitycrop/MainActivity.java	(date 1609360237025)
--@@ -1,4 +1,5 @@
-- package com.example.infinitycrop;
--+import android.content.Intent;
-- import android.os.Bundle;
-- import android.widget.Toast;
-- 
--@@ -7,6 +8,7 @@
-- import com.example.infinitycrop.ui.graphic.GraphicFragment;
-- import com.example.infinitycrop.ui.map.MapFragment;
-- import com.example.infinitycrop.ui.profile.ProfileFragment;
--+import com.example.infinitycrop.ui.service.ServicioMqtt;
-- import com.google.firebase.firestore.FirebaseFirestore;
-- import com.ismaeldivita.chipnavigation.ChipNavigationBar;
-- 
--@@ -28,15 +30,17 @@
--     private ViewPager viewPager;
--     private Fragment fragment=null;
--     private int index = 0;
---
--+    private String s;
--     @Override
--     protected void onCreate(Bundle savedInstanceState) {
--         setTheme(R.style.AppThemeHome);
--         super.onCreate(savedInstanceState);
-- 
--         Bundle extras = getIntent().getExtras();
---        String s = extras.getString("machine");
---        Toast.makeText(this, s , Toast.LENGTH_SHORT).show();
--+        s = extras.getString("description");
--+        Intent intent = new Intent(MainActivity.this, ServicioMqtt.class);
--+        intent.putExtra("machine", s);
--+        startService(intent);
-- 
--         setContentView(R.layout.activity_main);
--         chipNavigationBar=findViewById(R.id.chipNavigation);
--@@ -221,5 +225,10 @@
-- 
--     }
-- 
--+    public String getMachineUID(){
--+        return s;
--+    }
--+
--+
-- 
-- }
--\ No newline at end of file
--Index: app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.list_machine;\r\n\r\nimport android.content.Intent;\r\nimport android.media.Image;\r\nimport android.os.Bundle;\r\nimport android.os.Parcelable;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.ItemTouchHelper;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.logmail.RegisterActivity;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerAdapter;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.Query;\r\n\r\nimport java.text.BreakIterator;\r\nimport java.util.Map;\r\n\r\npublic class MainActivityMachineList extends AppCompatActivity {\r\n    private FirebaseFirestore firebaseFirestore;\r\n    private RecyclerView mFirestoreList;\r\n    private Adapter adapter;\r\n    private FirebaseAuth firebaseAuth;\r\n    Button addBtn;//boton añadir nueva maquina\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_list_machines);\r\n        firebaseFirestore=FirebaseFirestore.getInstance();\r\n        mFirestoreList=findViewById(R.id.firestore_list);\r\n        firebaseAuth=FirebaseAuth.getInstance();\r\n        String uid=firebaseAuth.getUid();\r\n        //Query\r\n        Query query=firebaseFirestore\r\n                .collection(\"Machine\")\r\n                .whereEqualTo(\"userUID\", uid)\r\n                .orderBy(\"priority\",Query.Direction.ASCENDING);\r\n        //RecyclerView\r\n        FirestoreRecyclerOptions<MachineModel> options=new FirestoreRecyclerOptions.Builder<MachineModel>()\r\n                .setQuery(query, MachineModel.class)\r\n                .build();\r\n        //View Holder\r\n        adapter= new Adapter(options);\r\n        mFirestoreList.setHasFixedSize(true);\r\n        mFirestoreList.setLayoutManager(new LinearLayoutManager(this));\r\n        mFirestoreList.setAdapter(adapter);\r\n\r\n        new ItemTouchHelper(new ItemTouchHelper.SimpleCallback(0,\r\n                ItemTouchHelper.LEFT | ItemTouchHelper.RIGHT) {\r\n            @Override\r\n            public boolean onMove(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder, RecyclerView.ViewHolder target) {\r\n                return false;\r\n            }\r\n            @Override\r\n            public void onSwiped(RecyclerView.ViewHolder viewHolder, int direction) {\r\n                Toast.makeText(getApplicationContext(), \"Maquina eliminada con éxito\", Toast.LENGTH_SHORT).show();\r\n                adapter.deleteItem(viewHolder.getAdapterPosition());\r\n            }\r\n        }).attachToRecyclerView(mFirestoreList);\r\n\r\n        adapter.setOnItemClickListener(new Adapter.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(DocumentSnapshot documentSnapshot, int position) {\r\n                //documentSnapshot.getData() -> devuelve all que tiene la maquina en firebase\r\n                MachineModel machine = documentSnapshot.toObject(MachineModel.class);\r\n                String id = documentSnapshot.getId();\r\n                String path = documentSnapshot.getReference().getPath(); //devuelve ruta en firebase Machine\\madara\r\n                /*Toast.makeText(MainActivityMachineList.this,\r\n                        \"Position: \" + position + \" ID: \" + id +\"  algo   \"+ documentSnapshot.getData(), Toast.LENGTH_SHORT).show();*/\r\n                Intent intent = new Intent(getBaseContext(), MainActivity.class);\r\n                intent.putExtra(\"machine\", id);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n        FloatingActionButton addbtn = (FloatingActionButton) findViewById(R.id.button_add_machine);\r\n        addbtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent (getApplicationContext(), AddMachine.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        adapter.stopListening();\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        adapter.startListening();\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
--+++ app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(date 1609360236960)
--@@ -80,11 +80,12 @@
--                 //documentSnapshot.getData() -> devuelve all que tiene la maquina en firebase
--                 MachineModel machine = documentSnapshot.toObject(MachineModel.class);
--                 String id = documentSnapshot.getId();
---                String path = documentSnapshot.getReference().getPath(); //devuelve ruta en firebase Machine\madara
--+                String path = documentSnapshot.getString("description"); //devuelve ruta en firebase Machine\madara
--                 /*Toast.makeText(MainActivityMachineList.this,
--                         "Position: " + position + " ID: " + id +"  algo   "+ documentSnapshot.getData(), Toast.LENGTH_SHORT).show();*/
--                 Intent intent = new Intent(getBaseContext(), MainActivity.class);
--                 intent.putExtra("machine", id);
--+                intent.putExtra("description", path);
--                 startActivity(intent);
--             }
--         });
-Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.Manifest;\r\nimport android.app.Activity;\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.content.res.ColorStateList;\r\nimport android.location.Address;\r\nimport android.location.Geocoder;\r\nimport android.location.Location;\r\nimport android.location.LocationManager;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.os.StrictMode;\r\nimport android.provider.Settings;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvModel;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.location.FusedLocationProviderClient;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.annotations.NotNull;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.squareup.okhttp.Call;\r\nimport com.squareup.okhttp.Callback;\r\nimport com.squareup.okhttp.OkHttpClient;\r\nimport com.squareup.okhttp.Request;\r\nimport com.squareup.okhttp.Response;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link DashboardFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class DashboardFragment extends Fragment implements MqttCallback{\r\n\r\n    private RecyclerView recyclerView;\r\n    private StaticRvAdapter staticRvAdapter;\r\n    private TabLayout tabLayout;\r\n    private ViewPager viewPager;\r\n    //WEATHER\r\n    private static  final int REQUEST_LOCATION=1;\r\n    double lat;\r\n    double longi;\r\n\r\n    TextView showLocationTxt;\r\n\r\n    LocationManager locationManager;\r\n    String latitude,longitude;\r\n\r\n    TextView view_city;\r\n    TextView view_temp;\r\n    TextView view_desc;\r\n    TextView view_country;\r\n\r\n    ImageView view_weather;\r\n    //\r\n\r\n\r\n    public static MqttClient client = null;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public DashboardFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment DashboardFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static DashboardFragment newInstance(String param1, String param2) {\r\n        DashboardFragment fragment = new DashboardFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_dashboard, container, false);\r\n        //FIREBASE\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        final FirebaseUser usuario = mAuth.getCurrentUser();\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=usuario.getUid();\r\n        //guardo el nombre en un textView\r\n        /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);\r\n        String res=\"Hola\"+\" \"+usuario.getDisplayName();\r\n        nombre.setText(res);\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(usuario.getDisplayName() == null){\r\n                    String res1=\"Hola\"+\" \"+snapshot.getString(\"username\");\r\n                    nombre.setText(res1);\r\n                }\r\n            }\r\n        });*/\r\n\r\n        //switch methods\r\n /*     Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });*/\r\n\r\n\r\n        //WEATHER\r\n        ActivityCompat.requestPermissions(getActivity(),new String[]\r\n                {Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n\r\n        view_city =v.findViewById(R.id.town);\r\n        view_city.setText(\"\");\r\n        view_temp =v.findViewById(R.id.temp);\r\n        view_temp.setText(\"\");\r\n        view_desc =v.findViewById(R.id.desc);\r\n        view_desc.setText(\"\");\r\n        view_country=v.findViewById(R.id.txtCountry);\r\n        view_country.setText(\"\");\r\n        view_weather =v.findViewById(R.id.wheather_image);\r\n\r\n        locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);\r\n       /* inicioGPS();*/\r\n        //\r\n\r\n\r\n\r\n\r\n        //RECYCLER VIEW\r\n        ArrayList<StaticRvModel> item=new ArrayList<>();\r\n        item.add(new StaticRvModel(R.drawable.icons_sun,\"Soleado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_night_mode,\"Nocturno\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_energy_saving,\"Ahorro\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_power_off,\"Apagado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_custom,\"Custom\"));\r\n\r\n        final TextView medidasT=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidasH=v.findViewById(R.id.medidaHumedadGeneral);\r\n        final TextView medidasS=v.findViewById(R.id.medidaSalinidadGeneral);\r\n        final TextView medidasL=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n\r\n        recyclerView=v.findViewById(R.id.rv_1);\r\n        staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(),LinearLayoutManager.HORIZONTAL,false));\r\n        recyclerView.setAdapter(staticRvAdapter);\r\n\r\n\r\n        //TABS\r\n        tabLayout = v.findViewById(R.id.tab_layout);\r\n        viewPager = v.findViewById(R.id.view_pager);\r\n         //Array\r\n        ArrayList<String> arrayList = new ArrayList<>();\r\n\r\n        //set up with viewpager\r\n        tabLayout.setupWithViewPager(viewPager);\r\n\r\n        TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());\r\n        //Pestañas\r\n        adapter.addFrag(new GeneralFragment(),\"General\");\r\n        adapter.addFrag(new Planta1Fragment(),\"Planta 1\");\r\n        adapter.addFrag(new Planta2Fragment(),\"Planta 2\");\r\n\r\n        viewPager.setAdapter(adapter );\r\n\r\n        /*((MainActivity)getActivity()).ola();*/\r\n     /*   //LEER DATOS FIREBASE\r\n        //Temperatura\r\n       DocumentReference documentTemperatura=fStore.collection(\"SensoresA-T\").document(\"Temperatura\");\r\n        documentTemperatura.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediTemp=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasT.setText(resMediTemp);\r\n            }\r\n        });\r\n        //Humedad\r\n        DocumentReference documentHumedad=fStore.collection(\"SensoresA-T\").document(\"Humedad\");\r\n        documentHumedad.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediHum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasH.setText(resMediHum);\r\n            }\r\n        });\r\n        //Iluminación\r\n        DocumentReference documentIluminación=fStore.collection(\"SensoresA-T\").document(\"Iluminación\");\r\n        documentIluminación.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIlum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasL.setText(resMediIlum);\r\n            }\r\n        });\r\n        //Temperatura ambiente\r\n        DocumentReference documentambiente=fStore.collection(\"SensoresA-T\").document(\"Temperatura ambiente\");\r\n        documentambiente.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIAmb=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasS.setText(resMediIAmb);\r\n            }\r\n        });\r\n\r\n      */\r\n\r\n        return v;\r\n    }\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n\r\n\r\n    //WEATHER METHODS\r\n    private void api_key(final String City) {\r\n        OkHttpClient client = new OkHttpClient();\r\n\r\n        Request request = new Request.Builder()\r\n                .url(\"https://api.openweathermap.org/data/2.5/weather?q=\" + City + \"&appid=a6f41d947e0542a26580bcd5c3fb90ef&units=metric\")\r\n                .get()\r\n                .build();\r\n        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n        StrictMode.setThreadPolicy(policy);\r\n        try {\r\n            Response response = client.newCall(request).execute();\r\n            client.newCall(request).enqueue(new Callback() {\r\n                @Override\r\n                public void onFailure(Request request, IOException e) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onResponse(Response response) throws IOException {\r\n                    String responseData = response.body().string();\r\n                    try {\r\n                        JSONObject json = new JSONObject(responseData);\r\n                        JSONArray array = json.getJSONArray(\"weather\");\r\n                        JSONObject object = array.getJSONObject(0);\r\n\r\n                        String description = object.getString(\"description\");\r\n                        String icons = object.getString(\"icon\");\r\n\r\n                        JSONObject temp1 = json.getJSONObject(\"main\");\r\n                        Double Temperature = temp1.getDouble(\"temp\");\r\n\r\n                        setText(view_city, City);\r\n\r\n                        String temps = Math.round(Temperature) + \" °C\";\r\n                        setText(view_temp, temps);\r\n                        setText(view_desc, description);\r\n                        setImage(view_weather, icons);\r\n\r\n                    } catch (JSONException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n\r\n            });\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    private void setText(final TextView text, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                text.setText(value);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setImage(final ImageView imageView, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                //paste switch\r\n                switch (value) {\r\n                    case \"01d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"01n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"02d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"02n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"03d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"03n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"04d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"04n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"09d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"09n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"10d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"10n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"11d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"11n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"13d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    case \"13n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    default:\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.wheather));\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    //App location\r\n   /* private void getLocation() {\r\n\r\n        //Check Permissions again\r\n\r\n        /*if (ActivityCompat.checkSelfPermission(\r\n                getContext(),Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(\r\n                getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n        } else {\r\n\r\n            Location LocationNetwork=locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);\r\n             if (LocationNetwork !=null)\r\n            {\r\n                double lat=LocationNetwork.getLatitude();\r\n                double longi=LocationNetwork.getLongitude();\r\n\r\n                latitude=String.valueOf(lat);\r\n                longitude=String.valueOf(longi);\r\n               /* loc_func(LocationNetwork);*/\r\n              /*  api_key(String.valueOf(view_city.getText()));\r\n                showLocationTxt.setText(\"Your Location:\"+\"\\n\"+\"Latitude= \"+latitude+\"\\n\"+\"Longitude= \"+longitude);\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private void OnGPS() {\r\n\r\n        final AlertDialog.Builder builder= new AlertDialog.Builder(getContext());\r\n\r\n        builder.setMessage(\"Enable GPS\").setCancelable(false).setPositiveButton(\"YES\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS));\r\n                getLocation();\r\n            }\r\n        }).setNegativeButton(\"NO\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                dialog.cancel();\r\n            }\r\n        });\r\n        final AlertDialog alertDialog=builder.create();\r\n        alertDialog.show();\r\n    }\r\n\r\n    private void loc_func(Location location){\r\n        try {\r\n            Geocoder geocoder=new Geocoder(getContext());\r\n            List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);\r\n            /*String address = addresses.get(0).getSubLocality();*/\r\n           /* String cityName = addresses.get(0).getLocality();\r\n            String stateName = addresses.get(0).getAdminArea();\r\n            String country = addresses.get(0).getCountryName();\r\n            //txt_paddress.setText(address);\r\n            view_city.setText(cityName);\r\n            view_country.setText(country);\r\n            //txt_state.setText(stateName);*/\r\n\r\n       /* } catch (IOException e) {\r\n            e.printStackTrace();\r\n            Toast.makeText(getContext(), \"Error:\"+e, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void inicioGPS(){\r\n\r\n\r\n        //Check gps is enable or not\r\n\r\n        if (!locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))\r\n        {\r\n            //Write Function To enable gps\r\n\r\n            OnGPS();\r\n        }\r\n        else\r\n        {\r\n            //GPS is already On then\r\n\r\n            /*getLocation();*/\r\n /*       }\r\n    }*/\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(date 1610072342884)
-@@ -1,20 +1,10 @@
- package com.example.infinitycrop.ui.dashboard;
- 
- import android.Manifest;
--import android.app.Activity;
--import android.app.AlertDialog;
- import android.content.Context;
--import android.content.DialogInterface;
--import android.content.Intent;
--import android.content.pm.PackageManager;
--import android.content.res.ColorStateList;
--import android.location.Address;
--import android.location.Geocoder;
--import android.location.Location;
- import android.location.LocationManager;
- import android.os.Bundle;
- 
--import androidx.annotation.Nullable;
- import androidx.core.app.ActivityCompat;
- import androidx.fragment.app.Fragment;
- import androidx.recyclerview.widget.LinearLayoutManager;
-@@ -22,36 +12,21 @@
- import androidx.viewpager.widget.ViewPager;
- 
- import android.os.StrictMode;
--import android.provider.Settings;
- import android.util.Log;
- import android.view.LayoutInflater;
- import android.view.View;
- import android.view.ViewGroup;
--import android.widget.CompoundButton;
- import android.widget.ImageView;
--import android.widget.LinearLayout;
--import android.widget.Switch;
- import android.widget.TextView;
--import android.widget.Toast;
- 
- import com.example.comun.Mqtt;
--import com.example.infinitycrop.MainActivity;
- import com.example.infinitycrop.R;
- import com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;
- import com.example.infinitycrop.ui.recycler_control.StaticRvModel;
--import com.google.android.gms.auth.api.signin.GoogleSignInClient;
--import com.google.android.gms.auth.api.signin.GoogleSignInOptions;
--import com.google.android.gms.location.FusedLocationProviderClient;
- import com.google.android.material.tabs.TabLayout;
- import com.google.firebase.auth.FirebaseAuth;
- import com.google.firebase.auth.FirebaseUser;
--import com.google.firebase.database.annotations.NotNull;
--import com.google.firebase.firestore.DocumentReference;
--import com.google.firebase.firestore.DocumentSnapshot;
--import com.google.firebase.firestore.EventListener;
- import com.google.firebase.firestore.FirebaseFirestore;
--import com.google.firebase.firestore.FirebaseFirestoreException;
--import com.squareup.okhttp.Call;
- import com.squareup.okhttp.Callback;
- import com.squareup.okhttp.OkHttpClient;
- import com.squareup.okhttp.Request;
-@@ -70,7 +45,6 @@
- 
- import java.io.IOException;
- import java.util.ArrayList;
--import java.util.List;
- 
- import static com.example.comun.Mqtt.topicRoot;
- 
-@@ -102,6 +76,8 @@
- 
-     ImageView view_weather;
-     //
-+    //Acceso a la maquina
-+
- 
- 
-     public static MqttClient client = null;
-@@ -284,6 +260,7 @@
- 
-       */
- 
-+
-         return v;
-     }
- 
-Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.google.firebase.firestore.Query;\r\nimport com.google.firebase.firestore.QueryDocumentSnapshot;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link GeneralFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class GeneralFragment extends Fragment implements MqttCallback{\r\n    public static MqttClient client = null;\r\n    private String uid;\r\n    private FirebaseFirestore db;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public GeneralFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment GeneralFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static GeneralFragment newInstance(String param1, String param2) {\r\n        GeneralFragment fragment = new GeneralFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v = inflater.inflate(R.layout.fragment_general, container, false);\r\n        //switch methods\r\n        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });\r\n        db = FirebaseFirestore.getInstance();\r\n        MainActivity myActivity = (MainActivity) getActivity();\r\n        final TextView medidaTemp=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidaHum=v.findViewById(R.id.medidaHumedadGeneral);\r\n        final TextView medidaHumAm=v.findViewById(R.id.medidaSalinidadGeneral);\r\n        final TextView medidaLuz=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n        uid=myActivity.getMachineUID();\r\n        db.collection(\"Mediciones general\")\r\n                .document(uid)\r\n                .addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable DocumentSnapshot snapshot,\r\n                                        @Nullable FirebaseFirestoreException e) {\r\n                        if (e != null) {\r\n                            return;\r\n                        }\r\n\r\n                        if (snapshot != null && snapshot.exists()) {\r\n                            //Temperatura\r\n                            String medidaT=snapshot.getString(\"Temperatura\");\r\n                            medidaTemp.setText(medidaT+\"°C\");\r\n                            //Humedad\r\n                            String medidaH=snapshot.getString(\"Humedad\");\r\n                            medidaHum.setText(medidaH+\"%\");\r\n                            //Humedad Ambiente\r\n                            String medidaHA=snapshot.getString(\"Humedad Ambiente\");\r\n                            medidaHumAm.setText(medidaHA+\"%\");\r\n                            //Luminosidad\r\n                            String medidaL=snapshot.getString(\"Luminosidad\");\r\n                            medidaLuz.setText(medidaL+\"%\");\r\n\r\n\r\n                        } else {\r\n\r\n                        }\r\n                    }\r\n                });\r\n\r\n        return v;\r\n    }\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"Superior OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"Superior ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(date 1610073089059)
-@@ -1,14 +1,17 @@
- package com.example.infinitycrop.ui.dashboard;
- 
-+import android.content.Intent;
- import android.os.Bundle;
- 
- import androidx.annotation.Nullable;
-+import androidx.constraintlayout.widget.ConstraintLayout;
- import androidx.fragment.app.Fragment;
- 
- import android.util.Log;
- import android.view.LayoutInflater;
- import android.view.View;
- import android.view.ViewGroup;
-+import android.widget.Button;
- import android.widget.CompoundButton;
- import android.widget.Switch;
- import android.widget.TextView;
-@@ -16,13 +19,12 @@
- import com.example.comun.Mqtt;
- import com.example.infinitycrop.MainActivity;
- import com.example.infinitycrop.R;
-+import com.example.infinitycrop.ui.MachineControl.planta1;
-+import com.google.android.material.bottomsheet.BottomSheetDialog;
- import com.google.firebase.firestore.DocumentSnapshot;
- import com.google.firebase.firestore.EventListener;
- import com.google.firebase.firestore.FirebaseFirestore;
- import com.google.firebase.firestore.FirebaseFirestoreException;
--import com.google.firebase.firestore.Query;
--import com.google.firebase.firestore.QueryDocumentSnapshot;
--import com.google.firebase.firestore.QuerySnapshot;
- 
- import org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;
- import org.eclipse.paho.client.mqttv3.MqttCallback;
-@@ -139,8 +141,43 @@
-                     }
-                 });
- 
-+        //Boton para acceder a la maquina para sus parcelas
-+        Button btnmymachine = (Button) v.findViewById(R.id.btnMyMachine);
-+        btnmymachine.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+
-+                BottomSheetDialog bottomSheetDialog = new BottomSheetDialog(
-+                        getContext()
-+                );
-+                bottomSheetDialog.setContentView(R.layout.plantamaquina_bottom_sheet);
-+                Button btnp1=bottomSheetDialog.findViewById(R.id.enterPlant2);
-+                Button btn2=bottomSheetDialog.findViewById(R.id.enterPlant1);
-+                bottomSheetDialog.show();
-+                btnp1.setOnClickListener(new View.OnClickListener() {
-+                    @Override
-+                    public void onClick(View v) {
-+                        Intent intent = new Intent (getContext(), planta1.class);
-+                        startActivity(intent);
-+
-+                    }
-+                });
-+            }
-+        });
-+
-         return v;
-     }
-+        /*btnmymachine.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                Intent intent = new Intent (getContext(), MiMaquina.class);
-+                startActivity(intent);
-+
-+            }
-+        });*/
-+
-+
-+
-     public void enviarLucesOff(){
-         try {
-             client = new MqttClient(Mqtt.broker, Mqtt.clientId, new
-Index: app/build.gradle
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>apply plugin: 'com.android.application'\r\n\r\n\r\nandroid {\r\n    compileSdkVersion 30\r\n    buildToolsVersion \"30.0.2\"\r\n\r\n    defaultConfig {\r\n        applicationId \"com.example.infinitycrop\"\r\n        minSdkVersion 23\r\n        targetSdkVersion 30\r\n        versionCode 1\r\n        versionName \"1.0\"\r\n        multiDexEnabled true\r\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\r\n        }\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation fileTree(dir: \"libs\", include: [\"*.jar\"])\r\n    implementation 'androidx.appcompat:appcompat:1.2.0'\r\n    implementation 'com.google.android.material:material:1.2.1'\r\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.2'\r\n    implementation 'androidx.navigation:navigation-fragment:2.1.0'\r\n    implementation 'androidx.navigation:navigation-ui:2.1.0'\r\n    implementation 'androidx.lifecycle:lifecycle-extensions:2.2.0'\r\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\r\n    implementation 'com.google.firebase:firebase-auth:16.0.5'\r\n    implementation 'com.firebaseui:firebase-ui-auth:6.2.0'\r\n    implementation project(path: ':comun')\r\n    implementation 'com.google.firebase:firebase-database:19.5.1'\r\n    implementation 'com.google.firebase:firebase-storage:19.2.0'\r\n    testImplementation 'junit:junit:4.12'\r\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\r\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\r\n    implementation 'com.google.firebase:firebase-analytics'\r\n    implementation 'com.ismaeldivita.chipnavigation:chip-navigation-bar:1.3.4'\r\n    implementation 'org.jetbrains.kotlin:kotlin-stdlib:1.4.10'\r\n    implementation 'androidx.recyclerview:recyclerview:1.1.0'\r\n    implementation 'com.android.volley:volley:1.1.0'\r\n    // Also declare the dependency for the Google Play services library and specify its version\r\n    implementation 'com.google.android.gms:play-services-auth:18.1.0'\r\n    // Import the BoM for the Firebase platform\r\n    implementation platform('com.google.firebase:firebase-bom:26.0.0')\r\n    implementation 'com.google.firebase:firebase-firestore:17.1.2'\r\n    implementation 'com.android.support:multidex:1.0.3'\r\n    implementation 'com.firebaseui:firebase-ui-firestore:6.3.0'\r\n    //biblioteca para mostrar images a través de URL\r\n    implementation 'com.github.bumptech.glide:glide:4.11.0'\r\n    //import del mqtt\r\n    implementation 'org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.1.1'\r\n    implementation 'com.google.android.gms:play-services-maps:17.0.0'\r\n    compile 'com.google.android.gms:play-services-location:16.0.0'\r\n    implementation 'com.journeyapps:zxing-android-embedded:3.4.0'//añadimos esta libreria para qr\r\n    implementation 'com.facebook.android:facebook-android-sdk:[4,5)'\r\n\r\n    implementation \"androidx.viewpager2:viewpager2:1.0.0\" //libreria viewpager\r\n    implementation  'com.airbnb.android:lottie:3.4.1'//libreria para la animacion\r\n    implementation 'com.cuberto:liquid-swipe:1.0.0' //libreria para el tutorial\r\n    implementation 'androidx.core:core:1.3.1'\r\n    implementation'androidx.core:core-ktx:1.3.1'\r\n\r\n    implementation'com.squareup.okhttp3:mockwebserver:4.2.0'\r\n    implementation'com.squareup.okhttp3:okhttp:4.2.0'\r\n\r\n    implementation 'androidx.cardview:cardview:1.0.0'\r\n    implementation \"androidx.viewpager2:viewpager2:1.0.0\" //libreria viewpager\r\n}\r\napply plugin: 'com.google.gms.google-services'
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/build.gradle	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-+++ app/build.gradle	(date 1610073408318)
-@@ -72,5 +72,7 @@
- 
-     implementation 'androidx.cardview:cardview:1.0.0'
-     implementation "androidx.viewpager2:viewpager2:1.0.0" //libreria viewpager
-+    //libreria wheelview
-+    implementation'com.github.psuzn:wheelView:1.0.0'
- }
- apply plugin: 'com.google.gms.google-services'
-\ No newline at end of file
-Index: app/src/main/AndroidManifest.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.infinitycrop\">\r\n\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" /> <!-- Permisos Qr -->\r\n    <uses-permission android:name=\"android.permission.CAMERA\" />\r\n\r\n    <uses-feature android:name=\"android.hardware.camera\" />\r\n    <uses-feature android:name=\"android.hardware.camera.autofocus\" />\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher\"\r\n        android:theme=\"@style/AppThemeHome\">\r\n        <activity android:name=\".ui.forum.lets_start.welcome_forum\"></activity>\r\n        <activity android:name=\".MainActivity\"></activity>\r\n\r\n        <service android:name=\".ui.service.ServicioMqtt\" />\r\n\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\"></activity>\r\n        <activity android:name=\".ui.profile.settings.HelpProfile\"></activity>\r\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\" />\r\n        <activity android:name=\".ui.list_machine.AddMachine\" />\r\n        <activity android:name=\".ui.logmail.RegisterActivity\" />\r\n        <activity android:name=\".ui.logmail.LoginActivity\" />\r\n        <activity android:name=\".ui.list_machine.CaptureAct\" />\r\n        <activity android:name=\".ui.login.LogActivity\" />\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\" />\r\n        <activity android:name=\".ui.LoadAnimations.LogprimeraActivity\" />\r\n\r\n        <meta-data\r\n            android:name=\"com.google.android.geo.API_KEY\"\r\n            android:value=\"@string/google_maps_key\" />\r\n        <meta-data\r\n            android:name=\"com.facebook.sdk.ApplicationId\"\r\n            android:value=\"@string/facebook_app_id\"\r\n            tools:replace=\"android:value\" />\r\n        <meta-data\r\n            android:name=\"preloaded_fonts\"\r\n            android:resource=\"@array/preloaded_fonts\" />\r\n    </application>\r\n\r\n</manifest>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/AndroidManifest.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-+++ app/src/main/AndroidManifest.xml	(date 1610072342889)
-@@ -43,6 +43,7 @@
-         <activity android:name=".ui.login.LogActivity" />
-         <activity android:name=".ui.LoadAnimations.IntroductoryActivity2" />
-         <activity android:name=".ui.LoadAnimations.LogprimeraActivity" />
-+        <activity android:name=".ui.MachineControl.planta1" />
- 
-         <meta-data
-             android:name="com.google.android.geo.API_KEY"
-Index: app/src/main/res/layout/fragment_general.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    tools:context=\".ui.dashboard.DashboardFragment\">\r\n\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:orientation=\"vertical\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\r\n\r\n        <RelativeLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginTop=\"10dp\"\r\n            android:layout_marginRight=\"20dp\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/textDashboardGeneral\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:text=\"Dashboard  >\"\r\n\r\n                android:textSize=\"19sp\" />\r\n\r\n            <TextView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/textDashboardGeneral\"\r\n                android:text=\"4 sensores\"\r\n\r\n                android:textSize=\"14sp\" />\r\n\r\n            <!--<ImageView\r\n                android:layout_width=\"62dp\"\r\n                android:layout_height=\"62dp\"\r\n                android:layout_alignParentRight=\"true\"\r\n                android:src=\"@drawable/ic_sun\" />-->\r\n        </RelativeLayout>\r\n        <GridLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:columnCount=\"2\"\r\n            android:rowCount=\"3\"\r\n            android:alignmentMode=\"alignMargins\"\r\n            android:columnOrderPreserved=\"false\">\r\n            <!--temperatura-->\r\n            <androidx.cardview.widget.CardView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_columnWeight=\"1\"\r\n                android:layout_rowWeight=\"1\"\r\n                app:cardElevation=\"6dp\"\r\n                app:cardCornerRadius=\"12dp\"\r\n                android:layout_marginBottom=\"12dp\"\r\n                android:layout_margin=\"12dp\"\r\n                >\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n\r\n                    android:orientation=\"vertical\"\r\n                    android:padding=\"2dp\">\r\n\r\n                    <androidx.constraintlayout.widget.ConstraintLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_marginBottom=\"12dp\"\r\n                        android:layout_height=\"match_parent\">\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textTemperaturaGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"8dp\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:text=\"Temperatura\"\r\n                            android:textSize=\"16sp\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchTemperaturaGeneral\"\r\n                            app:layout_constraintStart_toStartOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <Switch\r\n                            android:id=\"@+id/switchTemperaturaGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:layout_marginEnd=\"8dp\"\r\n                            android:buttonTint=\"#FFFFFF\"\r\n                            android:checked=\"true\"\r\n                            android:fitsSystemWindows=\"false\"\r\n                            android:textColorLink=\"#a0c63e\"\r\n                            android:textSize=\"8sp\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/medidaTemperaturaGeneral\"\r\n                            android:layout_width=\"90dp\"\r\n                            android:layout_height=\"39dp\"\r\n                            android:layout_marginTop=\"24dp\"\r\n                            android:text=\"34°C\"\r\n                            android:textSize=\"31sp\"\r\n                            app:layout_constraintStart_toStartOf=\"@+id/textTemperaturaGeneral\"\r\n                            app:layout_constraintTop_toBottomOf=\"@+id/textTemperaturaGeneral\" />\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/imgTemperaturaGeneral\"\r\n                            android:layout_width=\"53dp\"\r\n                            android:layout_height=\"55dp\"\r\n                            android:layout_marginEnd=\"1dp\"\r\n                            android:src=\"@drawable/icons_temperature\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaTemperaturaGeneral\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaTemperaturaGeneral\"\r\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaTemperaturaGeneral\" />\r\n                    </androidx.constraintlayout.widget.ConstraintLayout>\r\n                </LinearLayout>\r\n            </androidx.cardview.widget.CardView>\r\n            <!--humedad-->\r\n            <androidx.cardview.widget.CardView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_columnWeight=\"1\"\r\n                android:layout_rowWeight=\"1\"\r\n                app:cardElevation=\"6dp\"\r\n                app:cardCornerRadius=\"12dp\"\r\n                android:layout_marginBottom=\"12dp\"\r\n                android:layout_margin=\"12dp\"\r\n                >\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n\r\n                    android:orientation=\"vertical\"\r\n                    android:padding=\"2dp\">\r\n\r\n                    <androidx.constraintlayout.widget.ConstraintLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_marginBottom=\"12dp\"\r\n                        android:layout_height=\"match_parent\">\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textHumedadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"8dp\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:text=\"Humedad\"\r\n                            android:textSize=\"16sp\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchHumedadGeneral\"\r\n                            app:layout_constraintStart_toStartOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <Switch\r\n                            android:id=\"@+id/switchHumedadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:layout_marginEnd=\"8dp\"\r\n                            android:checked=\"true\"\r\n                            android:textColorLink=\"#a0c63e\"\r\n                            android:textSize=\"8sp\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/medidaHumedadGeneral\"\r\n                            android:layout_width=\"90dp\"\r\n                            android:layout_height=\"39dp\"\r\n                            android:layout_marginTop=\"24dp\"\r\n                            android:text=\"68%\"\r\n                            android:textSize=\"31sp\"\r\n                            app:layout_constraintStart_toStartOf=\"@+id/textHumedadGeneral\"\r\n                            app:layout_constraintTop_toBottomOf=\"@+id/textHumedadGeneral\" />\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/imgHumedadGeneral\"\r\n                            android:layout_width=\"53dp\"\r\n                            android:layout_height=\"55dp\"\r\n                            android:layout_marginEnd=\"1dp\"\r\n                            android:src=\"@drawable/icons_humidity\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaHumedadGeneral\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaHumedadGeneral\"\r\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaHumedadGeneral\" />\r\n                    </androidx.constraintlayout.widget.ConstraintLayout>\r\n                </LinearLayout>\r\n            </androidx.cardview.widget.CardView>\r\n            <!--salinidad-->\r\n            <androidx.cardview.widget.CardView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_columnWeight=\"1\"\r\n                android:layout_rowWeight=\"1\"\r\n                app:cardElevation=\"6dp\"\r\n                app:cardCornerRadius=\"12dp\"\r\n                android:layout_marginBottom=\"12dp\"\r\n                android:layout_margin=\"12dp\"\r\n                >\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n\r\n                    android:orientation=\"vertical\"\r\n                    android:padding=\"2dp\">\r\n\r\n                    <androidx.constraintlayout.widget.ConstraintLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_marginBottom=\"12dp\"\r\n                        android:layout_height=\"match_parent\">\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textSalinidadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"8dp\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:text=\"H. Ambiente\"\r\n                            android:textSize=\"16sp\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchSalinidadGeneral\"\r\n                            app:layout_constraintStart_toStartOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <Switch\r\n                            android:id=\"@+id/switchSalinidadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:layout_marginEnd=\"8dp\"\r\n                            android:checked=\"true\"\r\n                            android:textColorLink=\"#a0c63e\"\r\n                            android:textSize=\"8sp\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/medidaSalinidadGeneral\"\r\n                            android:layout_width=\"90dp\"\r\n                            android:layout_height=\"39dp\"\r\n                            android:layout_marginTop=\"24dp\"\r\n                            android:text=\"10%\"\r\n                            android:textSize=\"31sp\"\r\n                            app:layout_constraintStart_toStartOf=\"@+id/textSalinidadGeneral\"\r\n                            app:layout_constraintTop_toBottomOf=\"@+id/textSalinidadGeneral\" />\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/imgSalinidadGeneral\"\r\n                            android:layout_width=\"53dp\"\r\n                            android:layout_height=\"55dp\"\r\n                            android:layout_marginEnd=\"1dp\"\r\n                            android:src=\"@drawable/icons_humedad_ambiente\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaSalinidadGeneral\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaSalinidadGeneral\"\r\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaSalinidadGeneral\" />\r\n                    </androidx.constraintlayout.widget.ConstraintLayout>\r\n                </LinearLayout>\r\n            </androidx.cardview.widget.CardView>\r\n            <!--Luminosidad-->\r\n            <androidx.cardview.widget.CardView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_columnWeight=\"1\"\r\n                android:layout_rowWeight=\"1\"\r\n                app:cardElevation=\"6dp\"\r\n                app:cardCornerRadius=\"12dp\"\r\n                android:layout_marginBottom=\"12dp\"\r\n                android:layout_margin=\"12dp\"\r\n                >\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n\r\n                    android:orientation=\"vertical\"\r\n                    android:padding=\"2dp\">\r\n\r\n                    <androidx.constraintlayout.widget.ConstraintLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_marginBottom=\"12dp\"\r\n                        android:layout_height=\"match_parent\">\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textLuminosidadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"8dp\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:text=\"Luminosidad\"\r\n                            android:textSize=\"16sp\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchLuminosidadGeneral\"\r\n                            app:layout_constraintStart_toStartOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <Switch\r\n                            android:id=\"@+id/switchLuminosidadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:layout_marginEnd=\"8dp\"\r\n                            android:checked=\"true\"\r\n                            android:textColorHighlight=\"#FFFFFF\"\r\n                            android:textColorLink=\"#a0c63e\"\r\n                            android:textSize=\"8sp\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/medidasLuminosidadGeneral\"\r\n                            android:layout_width=\"90dp\"\r\n                            android:layout_height=\"39dp\"\r\n                            android:layout_marginTop=\"24dp\"\r\n                            android:text=\"90%\"\r\n                            android:textSize=\"31sp\"\r\n                            app:layout_constraintStart_toStartOf=\"@+id/textLuminosidadGeneral\"\r\n                            app:layout_constraintTop_toBottomOf=\"@+id/textLuminosidadGeneral\" />\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/imgLuminosidadGeneral\"\r\n                            android:layout_width=\"53dp\"\r\n                            android:layout_height=\"55dp\"\r\n                            android:layout_marginEnd=\"1dp\"\r\n                            android:src=\"@drawable/icons_luminosity\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidasLuminosidadGeneral\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintStart_toEndOf=\"@+id/medidasLuminosidadGeneral\"\r\n                            app:layout_constraintTop_toTopOf=\"@+id/medidasLuminosidadGeneral\" />\r\n                    </androidx.constraintlayout.widget.ConstraintLayout>\r\n                </LinearLayout>\r\n            </androidx.cardview.widget.CardView>\r\n\r\n\r\n\r\n\r\n        </GridLayout>\r\n\r\n    </LinearLayout>\r\n</ScrollView>\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_general.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-+++ app/src/main/res/layout/fragment_general.xml	(date 1610051333115)
-@@ -35,6 +35,32 @@
- 
-                 android:textSize="14sp" />
- 
-+            <LinearLayout
-+                android:layout_width="243dp"
-+                android:layout_height="93dp"
-+                android:layout_alignBottom="@id/textDashboardGeneral"
-+                android:layout_alignParentTop="true"
-+                android:layout_alignParentEnd="true"
-+                android:layout_marginStart="25dp"
-+                android:layout_marginTop="0dp"
-+                android:layout_marginEnd="-9dp"
-+                android:layout_marginBottom="-87dp"
-+                android:layout_toEndOf="@+id/textDashboardGeneral"
-+                android:orientation="vertical">
-+
-+                <Button
-+                    android:id="@+id/btnMyMachine"
-+                    android:layout_width="182dp"
-+                    android:layout_height="38dp"
-+                    android:layout_marginStart="0dp"
-+                    android:layout_marginTop="1dp"
-+                    android:layout_marginEnd="38dp"
-+                    android:layout_marginBottom="-22dp"
-+                    android:background="@drawable/btn_scan"
-+                    android:textColor="@color/white"
-+                    android:text="MI maquina" />
-+            </LinearLayout>
-+
-             <!--<ImageView
-                 android:layout_width="62dp"
-                 android:layout_height="62dp"
-Index: .idea/jarRepositories.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"RemoteRepositoriesConfiguration\">\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"central\" />\r\n      <option name=\"name\" value=\"Maven Central repository\" />\r\n      <option name=\"url\" value=\"https://repo1.maven.org/maven2\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"jboss.community\" />\r\n      <option name=\"name\" value=\"JBoss Community repository\" />\r\n      <option name=\"url\" value=\"https://repository.jboss.org/nexus/content/repositories/public/\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"BintrayJCenter\" />\r\n      <option name=\"name\" value=\"BintrayJCenter\" />\r\n      <option name=\"url\" value=\"https://jcenter.bintray.com/\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"Google\" />\r\n      <option name=\"name\" value=\"Google\" />\r\n      <option name=\"url\" value=\"https://dl.google.com/dl/android/maven2/\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"GitHubPackages\" />\r\n      <option name=\"name\" value=\"GitHubPackages\" />\r\n      <option name=\"url\" value=\"https://maven.pkg.github.com/Cuberto/liquid-swipe-android\" />\r\n    </remote-repository>\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- .idea/jarRepositories.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-+++ .idea/jarRepositories.xml	(date 1610073505595)
-@@ -26,5 +26,10 @@
-       <option name="name" value="GitHubPackages" />
-       <option name="url" value="https://maven.pkg.github.com/Cuberto/liquid-swipe-android" />
-     </remote-repository>
-+    <remote-repository>
-+      <option name="id" value="GitHubPackages" />
-+      <option name="name" value="GitHubPackages" />
-+      <option name="url" value="https://jitpack.io" />
-+    </remote-repository>
-   </component>
- </project>
-\ No newline at end of file
-Index: build.gradle
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\nbuildscript {\r\n    repositories {\r\n        google()\r\n        jcenter()\r\n        mavenCentral()\r\n    }\r\n    dependencies {\r\n        classpath 'com.android.tools.build:gradle:4.1.1'\r\n        classpath 'com.google.gms:google-services:4.3.4'\r\n\r\n        // NOTE: Do not place your application dependencies here; they belong\r\n        // in the individual module build.gradle files\r\n    }\r\n}\r\n\r\nallprojects {\r\n    repositories {\r\n        google()\r\n        jcenter()\r\n        //Dependencia para el tutorial\r\n        def githubProperties = new Properties()\r\n        githubProperties.load(new FileInputStream(rootProject.file(\"github.properties\")))\r\n        repositories {\r\n            maven {\r\n                name = \"GitHubPackages\"\r\n\r\n                url = uri(\"https://maven.pkg.github.com/Cuberto/liquid-swipe-android\")\r\n                credentials {\r\n                    /** Create github.properties in root project folder file with\r\n                     ** gpr.usr=GITHUB_USER_ID & gpr.key=PERSONAL_ACCESS_TOKEN\r\n                     ** Or set env variable GPR_USER & GPR_API_KEY if not adding a properties file**/\r\n                    username = githubProperties['gpr.usr'] ?: System.getenv(\"GPR_USER\")\r\n                    password = githubProperties['gpr.key'] ?: System.getenv(\"GPR_API_KEY\")\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- build.gradle	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
-+++ build.gradle	(date 1610074867324)
-@@ -33,10 +33,15 @@
-                     username = githubProperties['gpr.usr'] ?: System.getenv("GPR_USER")
-                     password = githubProperties['gpr.key'] ?: System.getenv("GPR_API_KEY")
-                 }
-+
-             }
--        }
--    }
--}
-+            maven {
-+                url 'https://jitpack.io'
-+            }
-+            }
-+        }
-+    }
-+
- 
- task clean(type: Delete) {
-     delete rootProject.buildDir
Index: .idea/shelf/Uncommitted_changes_before_Update_at_13_01_2021_1_20__Default_Changelist_.xml
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_13_01_2021_1_20__Default_Changelist_.xml	(revision 20efcc6a82f57e2d6e00bfef130fc7837cadecbf)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_13_01_2021_1_20__Default_Changelist_.xml	(revision 20efcc6a82f57e2d6e00bfef130fc7837cadecbf)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_13_01_2021_1_20_[Default_Changelist]" date="1610497396221" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_13_01_2021_1_20_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 13/01/2021 1:20 [Default Changelist]" />
-</changelist>
\ No newline at end of file
Index: app/src/main/AndroidManifest.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.infinitycrop\">\r\n\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" /> <!-- Permisos Qr -->\r\n    <uses-permission android:name=\"android.permission.CAMERA\" />\r\n\r\n    <uses-feature android:name=\"android.hardware.camera\" />\r\n    <uses-feature android:name=\"android.hardware.camera.autofocus\" />\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher\"\r\n        android:theme=\"@style/AppThemeHome\">\r\n        <activity android:name=\".ui.Foro.main.Community.NewPost.CreatePost.CreatePost\"></activity>\r\n        <activity android:name=\".ui.Foro.main.Community.CommunityMain\" />\r\n        <activity android:name=\".ui.Foro.lets_start.EditCommunity\" />\r\n        <activity android:name=\".ui.list_machine.ModifyMachine\" />\r\n        <activity android:name=\".ui.Foro.main.ForoMain\" />\r\n        <activity android:name=\".ui.Foro.lets_start.AddCommunity\" />\r\n        <activity android:name=\".ui.Foro.lets_start.choose_community\" />\r\n        <activity android:name=\".ui.Foro.lets_start.welcome_forum\" />\r\n        <activity android:name=\".MainActivity\" />\r\n\r\n\r\n        <service android:name=\".ui.service.ServicioMqtt\" />\r\n        <service android:name=\".ui.service.ServicioNotificaciones\" />\r\n\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\" />\r\n        <activity android:name=\".ui.profile.settings.HelpProfile\" />\r\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\" />\r\n        <activity android:name=\".ui.list_machine.AddMachine\" />\r\n        <activity android:name=\".ui.profile.settings.ModifyProfile\" />\r\n        <activity android:name=\".ui.logmail.RegisterActivity\" />\r\n        <activity android:name=\".ui.logmail.LoginActivity\" />\r\n        <activity android:name=\".ui.list_machine.CaptureAct\" />\r\n        <activity android:name=\".ui.login.LogActivity\" />\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\" />\r\n        <activity android:name=\".ui.LoadAnimations.LogprimeraActivity\" />\r\n        <activity android:name=\".ui.graphics.GraphicsActivity\" />\r\n        <activity android:name=\".ui.MachineControl.planta1\" />\r\n        <activity android:name=\".ui.notifications.NotificacionesActivity\" />\r\n\r\n        <meta-data\r\n            android:name=\"com.google.android.geo.API_KEY\"\r\n            android:value=\"@string/google_maps_key\" />\r\n        <meta-data\r\n            android:name=\"com.facebook.sdk.ApplicationId\"\r\n            android:value=\"@string/facebook_app_id\"\r\n            tools:replace=\"android:value\" />\r\n        <meta-data\r\n            android:name=\"preloaded_fonts\"\r\n            android:resource=\"@array/preloaded_fonts\" />\r\n\r\n        <activity\r\n            android:name=\"com.theartofdev.edmodo.cropper.CropImageActivity\"\r\n            android:theme=\"@style/Base.Theme.AppCompat\" />\r\n    </application>\r\n\r\n</manifest>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/AndroidManifest.xml	(revision 20efcc6a82f57e2d6e00bfef130fc7837cadecbf)
+++ app/src/main/AndroidManifest.xml	(date 1611144863384)
@@ -11,10 +11,13 @@
     <uses-permission android:name="com.google.android.things.permission.MANAGE_INPUT_DRIVERS" />
     <uses-permission android:name="com.google.android.things.permission.USE_PERIPHERAL_IO" /> <!-- Permisos Qr -->
     <uses-permission android:name="android.permission.CAMERA" />
+    <uses-permission android:name="com.android.alarm.permission.SET_ALARM"/>
+
 
     <uses-feature android:name="android.hardware.camera" />
     <uses-feature android:name="android.hardware.camera.autofocus" />
 
+
     <application
         android:allowBackup="true"
         android:icon="@mipmap/ic_launcher"
@@ -37,6 +40,7 @@
 
         <activity android:name=".ui.LoadAnimations.IntroductoryActivity">
             <intent-filter>
+                <action android:name="android.intent.action.SET_ALARM"/>
                 <action android:name="android.intent.action.MAIN" />
 
                 <category android:name="android.intent.category.LAUNCHER" />
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_19_33__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_19_33__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_21_29__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_21_29__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_17_01_2021_15_05__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_17_01_2021_15_05__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_08__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_08__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_19_07__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_19_07__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_15_01_2021_13_24__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_15_01_2021_13_24__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_14_53__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_14_53__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_15__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_15__Default_Changelist_.xml
