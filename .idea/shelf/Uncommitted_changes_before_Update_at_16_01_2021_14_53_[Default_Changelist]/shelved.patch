Index: .idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20_[Default_Changelist]/shelved.patch
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20_[Default_Changelist]/shelved.patch	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20_[Default_Changelist]/shelved.patch	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
@@ -1,248 +0,0 @@
-Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.Manifest;\r\nimport android.app.Activity;\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.content.res.ColorStateList;\r\nimport android.location.Address;\r\nimport android.location.Geocoder;\r\nimport android.location.Location;\r\nimport android.location.LocationManager;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.os.StrictMode;\r\nimport android.provider.Settings;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvModel;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.location.FusedLocationProviderClient;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.annotations.NotNull;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.squareup.okhttp.Call;\r\nimport com.squareup.okhttp.Callback;\r\nimport com.squareup.okhttp.OkHttpClient;\r\nimport com.squareup.okhttp.Request;\r\nimport com.squareup.okhttp.Response;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link DashboardFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class DashboardFragment extends Fragment implements MqttCallback{\r\n\r\n    private RecyclerView recyclerView;\r\n    private StaticRvAdapter staticRvAdapter;\r\n    private TabLayout tabLayout;\r\n    private ViewPager viewPager;\r\n    //WEATHER\r\n    private static  final int REQUEST_LOCATION=1;\r\n    double lat;\r\n    double longi;\r\n\r\n    TextView showLocationTxt;\r\n\r\n    LocationManager locationManager;\r\n    String latitude,longitude;\r\n\r\n    TextView view_city;\r\n    TextView view_temp;\r\n    TextView view_desc;\r\n    TextView view_country;\r\n\r\n    ImageView view_weather;\r\n    //\r\n\r\n\r\n    public static MqttClient client = null;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public DashboardFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment DashboardFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static DashboardFragment newInstance(String param1, String param2) {\r\n        DashboardFragment fragment = new DashboardFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_dashboard, container, false);\r\n        //FIREBASE\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        final FirebaseUser usuario = mAuth.getCurrentUser();\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=usuario.getUid();\r\n        //guardo el nombre en un textView\r\n        /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);\r\n        String res=\"Hola\"+\" \"+usuario.getDisplayName();\r\n        nombre.setText(res);\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(usuario.getDisplayName() == null){\r\n                    String res1=\"Hola\"+\" \"+snapshot.getString(\"username\");\r\n                    nombre.setText(res1);\r\n                }\r\n            }\r\n        });*/\r\n\r\n        //switch methods\r\n /*     Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });*/\r\n\r\n\r\n        //WEATHER\r\n        ActivityCompat.requestPermissions(getActivity(),new String[]\r\n                {Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n\r\n        view_city =v.findViewById(R.id.town);\r\n        view_city.setText(\"\");\r\n        view_temp =v.findViewById(R.id.temp);\r\n        view_temp.setText(\"\");\r\n        view_desc =v.findViewById(R.id.desc);\r\n        view_desc.setText(\"\");\r\n        view_country=v.findViewById(R.id.txtCountry);\r\n        view_country.setText(\"\");\r\n        view_weather =v.findViewById(R.id.wheather_image);\r\n\r\n        locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);\r\n        inicioGPS();\r\n        //\r\n\r\n\r\n\r\n\r\n        //RECYCLER VIEW\r\n        ArrayList<StaticRvModel> item=new ArrayList<>();\r\n        item.add(new StaticRvModel(R.drawable.icons_sun,\"Soleado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_night_mode,\"Nocturno\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_energy_saving,\"Ahorro\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_power_off,\"Apagado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_custom,\"Custom\"));\r\n\r\n        final TextView medidasT=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidasH=v.findViewById(R.id.medidaHumedadGeneral);\r\n        final TextView medidasS=v.findViewById(R.id.medidaSalinidadGeneral);\r\n        final TextView medidasL=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n\r\n        recyclerView=v.findViewById(R.id.rv_1);\r\n        staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(),LinearLayoutManager.HORIZONTAL,false));\r\n        recyclerView.setAdapter(staticRvAdapter);\r\n\r\n\r\n        //TABS\r\n        tabLayout = v.findViewById(R.id.tab_layout);\r\n        viewPager = v.findViewById(R.id.view_pager);\r\n         //Array\r\n        ArrayList<String> arrayList = new ArrayList<>();\r\n\r\n        //set up with viewpager\r\n        tabLayout.setupWithViewPager(viewPager);\r\n\r\n        TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());\r\n        //Pestañas\r\n        adapter.addFrag(new GeneralFragment(),\"General\");\r\n        adapter.addFrag(new Planta1Fragment(),\"Planta 1\");\r\n        adapter.addFrag(new Planta2Fragment(),\"Planta 2\");\r\n\r\n        viewPager.setAdapter(adapter );\r\n\r\n        /*((MainActivity)getActivity()).ola();*/\r\n     /*   //LEER DATOS FIREBASE\r\n        //Temperatura\r\n       DocumentReference documentTemperatura=fStore.collection(\"SensoresA-T\").document(\"Temperatura\");\r\n        documentTemperatura.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediTemp=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasT.setText(resMediTemp);\r\n            }\r\n        });\r\n        //Humedad\r\n        DocumentReference documentHumedad=fStore.collection(\"SensoresA-T\").document(\"Humedad\");\r\n        documentHumedad.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediHum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasH.setText(resMediHum);\r\n            }\r\n        });\r\n        //Iluminación\r\n        DocumentReference documentIluminación=fStore.collection(\"SensoresA-T\").document(\"Iluminación\");\r\n        documentIluminación.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIlum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasL.setText(resMediIlum);\r\n            }\r\n        });\r\n        //Temperatura ambiente\r\n        DocumentReference documentambiente=fStore.collection(\"SensoresA-T\").document(\"Temperatura ambiente\");\r\n        documentambiente.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIAmb=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasS.setText(resMediIAmb);\r\n            }\r\n        });\r\n\r\n      */\r\n\r\n        return v;\r\n    }\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n\r\n\r\n    //WEATHER METHODS\r\n    private void api_key(final String City) {\r\n        OkHttpClient client = new OkHttpClient();\r\n\r\n        Request request = new Request.Builder()\r\n                .url(\"https://api.openweathermap.org/data/2.5/weather?q=\" + City + \"&appid=a6f41d947e0542a26580bcd5c3fb90ef&units=metric\")\r\n                .get()\r\n                .build();\r\n        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n        StrictMode.setThreadPolicy(policy);\r\n        try {\r\n            Response response = client.newCall(request).execute();\r\n            client.newCall(request).enqueue(new Callback() {\r\n                @Override\r\n                public void onFailure(Request request, IOException e) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onResponse(Response response) throws IOException {\r\n                    String responseData = response.body().string();\r\n                    try {\r\n                        JSONObject json = new JSONObject(responseData);\r\n                        JSONArray array = json.getJSONArray(\"weather\");\r\n                        JSONObject object = array.getJSONObject(0);\r\n\r\n                        String description = object.getString(\"description\");\r\n                        String icons = object.getString(\"icon\");\r\n\r\n                        JSONObject temp1 = json.getJSONObject(\"main\");\r\n                        Double Temperature = temp1.getDouble(\"temp\");\r\n\r\n                        setText(view_city, City);\r\n\r\n                        String temps = Math.round(Temperature) + \" °C\";\r\n                        setText(view_temp, temps);\r\n                        setText(view_desc, description);\r\n                        setImage(view_weather, icons);\r\n\r\n                    } catch (JSONException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n\r\n            });\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    private void setText(final TextView text, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                text.setText(value);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setImage(final ImageView imageView, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                //paste switch\r\n                switch (value) {\r\n                    case \"01d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"01n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"02d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"02n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"03d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"03n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"04d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"04n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"09d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"09n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"10d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"10n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"11d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"11n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"13d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    case \"13n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    default:\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.wheather));\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    //App location\r\n    private void getLocation() {\r\n\r\n        //Check Permissions again\r\n\r\n        /*if (ActivityCompat.checkSelfPermission(\r\n                getContext(),Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(\r\n                getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n        } else {\r\n\r\n            Location LocationNetwork=locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);\r\n             if (LocationNetwork !=null)\r\n            {\r\n                double lat=LocationNetwork.getLatitude();\r\n                double longi=LocationNetwork.getLongitude();\r\n\r\n                latitude=String.valueOf(lat);\r\n                longitude=String.valueOf(longi);\r\n                loc_func(LocationNetwork);\r\n                api_key(String.valueOf(view_city.getText()));\r\n                showLocationTxt.setText(\"Your Location:\"+\"\\n\"+\"Latitude= \"+latitude+\"\\n\"+\"Longitude= \"+longitude);\r\n            }\r\n\r\n        }*/\r\n\r\n    }\r\n\r\n    private void OnGPS() {\r\n\r\n        final AlertDialog.Builder builder= new AlertDialog.Builder(getContext());\r\n\r\n        builder.setMessage(\"Enable GPS\").setCancelable(false).setPositiveButton(\"YES\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS));\r\n                getLocation();\r\n            }\r\n        }).setNegativeButton(\"NO\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                dialog.cancel();\r\n            }\r\n        });\r\n        final AlertDialog alertDialog=builder.create();\r\n        alertDialog.show();\r\n    }\r\n\r\n    private void loc_func(Location location){\r\n        try {\r\n            Geocoder geocoder=new Geocoder(getContext());\r\n            List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);\r\n            String address = addresses.get(0).getSubLocality();\r\n            String cityName = addresses.get(0).getLocality();\r\n            String stateName = addresses.get(0).getAdminArea();\r\n            String country = addresses.get(0).getCountryName();\r\n            //txt_paddress.setText(address);\r\n            view_city.setText(cityName);\r\n            view_country.setText(country);\r\n            //txt_state.setText(stateName);*/\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            Toast.makeText(getContext(), \"Error:\"+e, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void inicioGPS(){\r\n\r\n\r\n        //Check gps is enable or not\r\n\r\n        if (!locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))\r\n        {\r\n            //Write Function To enable gps\r\n\r\n            OnGPS();\r\n        }\r\n        else\r\n        {\r\n            //GPS is already On then\r\n\r\n            getLocation();\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
-+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(date 1609523605203)
-@@ -201,7 +201,7 @@
-         view_weather =v.findViewById(R.id.wheather_image);
- 
-         locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);
--        inicioGPS();
-+       /* inicioGPS();*/
-         //
- 
- 
-@@ -501,7 +501,7 @@
-     }
- 
-     //App location
--    private void getLocation() {
-+   /* private void getLocation() {
- 
-         //Check Permissions again
- 
-@@ -519,12 +519,12 @@
- 
-                 latitude=String.valueOf(lat);
-                 longitude=String.valueOf(longi);
--                loc_func(LocationNetwork);
--                api_key(String.valueOf(view_city.getText()));
-+               /* loc_func(LocationNetwork);*/
-+              /*  api_key(String.valueOf(view_city.getText()));
-                 showLocationTxt.setText("Your Location:"+"\n"+"Latitude= "+latitude+"\n"+"Longitude= "+longitude);
-             }
- 
--        }*/
-+        }
- 
-     }
- 
-@@ -553,8 +553,8 @@
-         try {
-             Geocoder geocoder=new Geocoder(getContext());
-             List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);
--            String address = addresses.get(0).getSubLocality();
--            String cityName = addresses.get(0).getLocality();
-+            /*String address = addresses.get(0).getSubLocality();*/
-+           /* String cityName = addresses.get(0).getLocality();
-             String stateName = addresses.get(0).getAdminArea();
-             String country = addresses.get(0).getCountryName();
-             //txt_paddress.setText(address);
-@@ -562,7 +562,7 @@
-             view_country.setText(country);
-             //txt_state.setText(stateName);*/
- 
--        } catch (IOException e) {
-+       /* } catch (IOException e) {
-             e.printStackTrace();
-             Toast.makeText(getContext(), "Error:"+e, Toast.LENGTH_SHORT).show();
-         }
-@@ -583,7 +583,7 @@
-         {
-             //GPS is already On then
- 
--            getLocation();
--        }
--    }
-+            /*getLocation();*/
-+ /*       }
-+    }*/
- }
-\ No newline at end of file
-Index: app/src/main/res/layout/fragment_login.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.login.LogActivity\" >\r\n\r\n    <ImageView\r\n        android:id=\"@+id/imageView4\"\r\n        android:layout_width=\"254dp\"\r\n        android:layout_height=\"188dp\"\r\n        android:contentDescription=\"@string/title_wellcome_login\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"\r\n        app:layout_constraintVertical_bias=\"0.0\"\r\n        app:srcCompat=\"@drawable/stickerlog\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/textView3\"\r\n        android:layout_width=\"184dp\"\r\n        android:layout_height=\"20dp\"\r\n        android:layout_marginTop=\"40dp\"\r\n        android:layout_marginEnd=\"52dp\"\r\n        android:text=\"@string/title_wellcome_login\"\r\n        android:textColor=\"@color/colorPrimaryLight\"\r\n        android:textSize=\"16sp\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/imageView4\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n    <TextView\r\n        android:id=\"@+id/textView4\"\r\n        android:layout_width=\"151dp\"\r\n        android:layout_height=\"32dp\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:layout_marginEnd=\"84dp\"\r\n        android:text=\"@string/title_orderLog\"\r\n        android:textColor=\"@color/colorPrimary\"\r\n        android:textSize=\"26sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/imageView4\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/textView3\" />\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"530dp\"\r\n        android:orientation=\"vertical\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/imageView4\"\r\n        app:layout_constraintVertical_bias=\"0.527\">\r\n\r\n        <ImageView\r\n            android:id=\"@+id/imageView3\"\r\n            android:layout_width=\"254dp\"\r\n            android:layout_height=\"146dp\"\r\n            android:layout_gravity=\"center_horizontal\"\r\n            android:layout_marginBottom=\"70dp\"\r\n            android:contentDescription=\"@string/title_wellcome_login\"\r\n            app:srcCompat=\"@drawable/logo_and_text\" />\r\n\r\n        <!--<Button\r\n               android:id=\"@+id/btn_facebook\"\r\n               android:layout_width=\"match_parent\"\r\n               android:layout_height=\"wrap_content\"\r\n               android:background=\"@drawable/btn_facebook\"\r\n               android:drawableLeft=\"@drawable/ic_facebook_icon\"\r\n               android:paddingLeft=\"20dp\"\r\n               android:textColor=\"#FFFF\"\r\n               android:layout_marginLeft=\"20dp\"\r\n               android:layout_marginRight=\"20dp\"\r\n               android:text=\"@string/title_cont_faceboock\" /> -->\r\n        <com.facebook.login.widget.LoginButton\r\n            android:id=\"@+id/btn_facebook\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:background=\"@drawable/btn_facebook\"\r\n            android:drawableLeft=\"@drawable/ic_facebook_icon\"\r\n            android:paddingLeft=\"20dp\"\r\n            android:textColor=\"#FFFF\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginRight=\"20dp\"\r\n            android:text=\"@string/title_cont_faceboock\" />\r\n        <!-- <com.facebook.login.widget.LoginButton\r\n            android:id=\"@+id/login_button\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center_horizontal\"\r\n            android:layout_marginTop=\"30dp\"\r\n            android:layout_marginBottom=\"30dp\" />  -->\r\n\r\n        <com.google.android.gms.common.SignInButton\r\n            android:id=\"@+id/btn_google\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginRight=\"20dp\"\r\n            android:background=\"@drawable/btn_google\"\r\n            android:drawableLeft=\"@drawable/ic_google_icon\"\r\n            android:text=\"@string/title_cont_google\"\r\n            android:textColor=\"#000000\" />\r\n\r\n        <Button\r\n            android:id=\"@+id/btn_mail\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginRight=\"20dp\"\r\n            android:background=\"@drawable/btn_mail\"\r\n            android:drawableLeft=\"@drawable/ic_mail_icon\"\r\n            android:onClick=\"Email\"\r\n            android:paddingLeft=\"20dp\"\r\n            android:text=\"@string/title_cont_mail\"\r\n            android:textColor=\"#000000\" />\r\n\r\n    </LinearLayout>\r\n\r\n\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_login.xml	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
-+++ app/src/main/res/layout/fragment_login.xml	(date 1609520835155)
-@@ -5,7 +5,7 @@
-     xmlns:tools="http://schemas.android.com/tools"
-     android:layout_width="match_parent"
-     android:layout_height="match_parent"
--    tools:context=".ui.login.LogActivity" >
-+     >
- 
-     <ImageView
-         android:id="@+id/imageView4"
-Index: app/src/main/AndroidManifest.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.infinitycrop\">\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/>\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\"/>\r\n    <uses-permission android:name=\"android.permission.INTERNET\"/>\r\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" />\r\n    <!--Permisos Qr-->\r\n    <uses-permission android:name=\"android.permission.CAMERA\"/>\r\n    <uses-feature android:name=\"android.hardware.camera\"></uses-feature>\r\n    <uses-feature android:name=\"android.hardware.camera.autofocus\"></uses-feature>\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher\"\r\n        android:theme=\"@style/AppThemeHome\"\r\n        >\r\n\r\n        <activity android:name=\".MainActivity\" android:theme=\"@style/SplashTheme\">\r\n        </activity>\r\n        <service android:name=\"com.example.infinitycrop.ui.service.ServicioMqtt\" />\r\n        <activity android:name=\"com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\">\r\n\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.HelpProfile\">\r\n\r\n        </activity>\r\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\"></activity>\r\n        <activity android:name=\".ui.list_machine.AddMachine\"></activity>\r\n        <activity android:name=\".ui.logmail.RegisterActivity\"></activity>\r\n        <activity android:name=\".ui.logmail.LoginActivity\"></activity>\r\n        <activity android:name=\".ui.list_machine.CaptureAct\"></activity>\r\n        <activity android:name=\"com.example.infinitycrop.ui.login.LogActivity\"></activity>\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\"></activity>\r\n        <activity android:name=\".ui.profile.settings.ModifyProfile\"></activity>\r\n\r\n\r\n\r\n\r\n        <meta-data android:name=\"com.google.android.geo.API_KEY\"\r\n            android:value=\"@string/google_maps_key\" />\r\n\r\n        <meta-data android:name=\"com.facebook.sdk.ApplicationId\"\r\n            tools:replace=\"android:value\"\r\n            android:value=\"@string/facebook_app_id\"/>\r\n        <meta-data\r\n            android:name=\"preloaded_fonts\"\r\n            android:resource=\"@array/preloaded_fonts\" />\r\n\r\n\r\n    </application>\r\n\r\n</manifest>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/AndroidManifest.xml	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
-+++ app/src/main/AndroidManifest.xml	(date 1609520835161)
-@@ -44,7 +44,7 @@
-         <activity android:name=".ui.list_machine.CaptureAct"></activity>
-         <activity android:name="com.example.infinitycrop.ui.login.LogActivity"></activity>
-         <activity android:name=".ui.LoadAnimations.IntroductoryActivity2"></activity>
--        <activity android:name=".ui.profile.settings.ModifyProfile"></activity>
-+        <activity android:name=".ui.LoadAnimations.LogprimeraActivity"></activity>
- 
- 
- 
-Index: app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.list_machine;\r\n\r\nimport android.content.Intent;\r\nimport android.media.Image;\r\nimport android.os.Bundle;\r\nimport android.os.Parcelable;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.ItemTouchHelper;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.logmail.RegisterActivity;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerAdapter;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\nimport com.google.android.material.bottomsheet.BottomSheetDialog;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.Query;\r\n\r\nimport java.text.BreakIterator;\r\nimport java.util.Map;\r\n\r\npublic class MainActivityMachineList extends AppCompatActivity {\r\n    private FirebaseFirestore firebaseFirestore;\r\n    private RecyclerView mFirestoreList;\r\n    private Adapter adapter;\r\n    private FirebaseAuth firebaseAuth;\r\n    Button addBtn;//boton añadir nueva maquina\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_list_machines);\r\n        firebaseFirestore=FirebaseFirestore.getInstance();\r\n        mFirestoreList=findViewById(R.id.firestore_list);\r\n        firebaseAuth=FirebaseAuth.getInstance();\r\n        String uid=firebaseAuth.getUid();\r\n        //Query\r\n        Query query=firebaseFirestore\r\n                .collection(\"Machine\")\r\n                .whereEqualTo(\"userUID\", uid)\r\n                .orderBy(\"priority\",Query.Direction.ASCENDING);\r\n        //RecyclerView\r\n        FirestoreRecyclerOptions<MachineModel> options=new FirestoreRecyclerOptions.Builder<MachineModel>()\r\n                .setQuery(query, MachineModel.class)\r\n                .build();\r\n        //View Holder\r\n        adapter= new Adapter(options);\r\n        mFirestoreList.setHasFixedSize(true);\r\n        mFirestoreList.setLayoutManager(new LinearLayoutManager(this));\r\n        mFirestoreList.setAdapter(adapter);\r\n\r\n        new ItemTouchHelper(new ItemTouchHelper.SimpleCallback(0,\r\n                ItemTouchHelper.LEFT | ItemTouchHelper.RIGHT) {\r\n            @Override\r\n            public boolean onMove(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder, RecyclerView.ViewHolder target) {\r\n                return false;\r\n            }\r\n            @Override\r\n            public void onSwiped(RecyclerView.ViewHolder viewHolder, int direction) {\r\n                Toast.makeText(getApplicationContext(), \"Maquina eliminada con éxito\", Toast.LENGTH_SHORT).show();\r\n                adapter.deleteItem(viewHolder.getAdapterPosition());\r\n            }\r\n        }).attachToRecyclerView(mFirestoreList);\r\n\r\n        adapter.setOnItemClickListener(new Adapter.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(DocumentSnapshot documentSnapshot, int position) {\r\n                //documentSnapshot.getData() -> devuelve all que tiene la maquina en firebase\r\n                MachineModel machine = documentSnapshot.toObject(MachineModel.class);\r\n                final String id = documentSnapshot.getId();\r\n                final String path = documentSnapshot.getString(\"description\"); //devuelve ruta en firebase Machine\\madara\r\n                //botttom sheet\r\n                final BottomSheetDialog bottomSheetDialog=new BottomSheetDialog(MainActivityMachineList.this);\r\n                bottomSheetDialog.setContentView(R.layout.machine_bottom_sheet);\r\n                Button btnenter=bottomSheetDialog.findViewById(R.id.enterMachineButton);\r\n                Button btnmodify=bottomSheetDialog.findViewById(R.id.madifyMachineButton);\r\n                Button btncancel=bottomSheetDialog.findViewById(R.id.cancelMachineButton);\r\n                btnenter.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        Intent intent = new Intent(getBaseContext(), MainActivity.class);\r\n                        intent.putExtra(\"machine\", id);\r\n                        intent.putExtra(\"description\", path);\r\n                        startActivity(intent);\r\n                    }\r\n                });\r\n                btnmodify.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        //poner aca Intent para acceder al layout de modificar maquina\r\n                        //hay que pasarle un intent con extra como he hecho en el onClick de arriba\r\n                        //lo que necesitas para modificar es la variable id\r\n                        //encuentras en firebase la maquina con el id y haces la magia de modificar etc..\r\n                        //lo de maquina a favoritos es facil , si es 1 es favoirto si es 2 no lo es.\r\n                        //ejemplo\r\n                        /*Intent intent = new Intent(getBaseContext(), MainActivity.class);//Main por tu clase\r\n                        intent.putExtra(\"machine\", id);\r\n                        startActivity(intent);*/\r\n                    }\r\n                });\r\n                btncancel.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        bottomSheetDialog.cancel();\r\n                    }\r\n                });\r\n                bottomSheetDialog.show();\r\n\r\n\r\n            }\r\n        });\r\n\r\n        FloatingActionButton addbtn = (FloatingActionButton) findViewById(R.id.button_add_machine);\r\n        addbtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent (getApplicationContext(), AddMachine.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        adapter.stopListening();\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        adapter.startListening();\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
-+++ app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(date 1609606384560)
-@@ -50,7 +50,7 @@
-         //Query
-         Query query=firebaseFirestore
-                 .collection("Machine")
--                .whereEqualTo("userUID", uid)
-+               .whereEqualTo("userUID", uid)
-                 .orderBy("priority",Query.Direction.ASCENDING);
-         //RecyclerView
-         FirestoreRecyclerOptions<MachineModel> options=new FirestoreRecyclerOptions.Builder<MachineModel>()
-Index: app/src/main/java/com/example/infinitycrop/ui/login/LogActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.login;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity2;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.MainActivityMachineList;\r\nimport com.example.infinitycrop.ui.logmail.LoginActivity;\r\nimport com.facebook.AccessToken;\r\nimport com.facebook.AccessTokenTracker;\r\nimport com.facebook.CallbackManager;\r\nimport com.facebook.FacebookCallback;\r\nimport com.facebook.FacebookException;\r\nimport com.facebook.login.LoginResult;\r\nimport com.facebook.login.widget.LoginButton;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInAccount;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.common.SignInButton;\r\nimport com.google.android.gms.common.api.ApiException;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthCredential;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FacebookAuthProvider;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.auth.GoogleAuthProvider;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.facebook.FacebookSdk;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\n\r\npublic class LogActivity extends AppCompatActivity{\r\n    /*private GoogleApiClient googleApiClient;\r\n    private SignInButton signInButton;\r\n    public static final int SIGN_IN_CODE = 777;*/\r\n    //Variable para gestionar FirebaseAuth\r\n    private FirebaseAuth mAuth;\r\n    //Agregar cliente de inicio de sesión de Google\r\n    private GoogleSignInClient mGoogleSignInClient;\r\n    //Constante\r\n    int RC_SIGN_IN = 1;\r\n    SignInButton btnLogin,btnGoogle;\r\n    String TAG = \"GoogleSignIn\";\r\n\r\n    private FirebaseAuth.AuthStateListener authStateListener;\r\n    private AccessTokenTracker accessTokenTracker;\r\n    private LoginButton loginButtonFacebook;\r\n    private CallbackManager mCallbackManager;\r\n    private  static  final String TAG2 = \"FacebookAuthentication\";\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.fragment_login);\r\n        /*GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestEmail()\r\n                .build();\r\n        googleApiClient = new GoogleApiClient.Builder(this)\r\n        .enableAutoManage(this, this)\r\n        .addApi(Auth.GOOGLE_SIGN_IN_API,gso)\r\n        .build();\r\n        signInButton =findViewById(R.id.btn_google);\r\n        signInButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = Auth.GoogleSignInApi.getSignInIntent(googleApiClient);\r\n                startActivityForResult(intent,SIGN_IN_CODE);\r\n            }\r\n        });*/\r\n\r\n        //Botones\r\n        btnGoogle=findViewById(R.id.btn_google);\r\n        loginButtonFacebook = findViewById(R.id.btn_facebook);\r\n        loginButtonFacebook.setReadPermissions(\"email\",\"public_profile\");\r\n\r\n        //Listeners\r\n        btnGoogle.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                signIn();\r\n            }\r\n        });\r\n\r\n        // Configurar Google Sign In\r\n        GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestIdToken(getString(R.string.default_web_client_id))\r\n                .requestEmail()\r\n                .build();\r\n        // Crear un GoogleSignInClient con las opciones especificadas por gso.\r\n        mGoogleSignInClient = GoogleSignIn.getClient(this, gso);\r\n\r\n\r\n\r\n        // Inicializar Firebase Auth\r\n        mAuth = FirebaseAuth.getInstance();\r\n        FacebookSdk.sdkInitialize(getApplicationContext());\r\n\r\n        //Facebook\r\n        mCallbackManager = CallbackManager.Factory.create();\r\n        loginButtonFacebook.registerCallback(mCallbackManager, new FacebookCallback<LoginResult>() {\r\n            @Override\r\n            public void onSuccess(LoginResult loginResult) {\r\n                Log.d(TAG2,\"onSuccess\"+loginResult);\r\n                handleFacebookToken(loginResult.getAccessToken());\r\n            }\r\n\r\n            @Override\r\n            public void onCancel() {\r\n                Log.d(TAG2,\"onCancel\");\r\n            }\r\n\r\n            @Override\r\n            public void onError(FacebookException error) {\r\n                Log.d(TAG2,\"onError: \"+error);\r\n            }\r\n\r\n        });\r\n\r\n        authStateListener = new FirebaseAuth.AuthStateListener() {\r\n            @Override\r\n            public void onAuthStateChanged(@NonNull FirebaseAuth firebaseAuth) {\r\n                FirebaseUser user = firebaseAuth.getCurrentUser();\r\n                if(user!=null){\r\n                    Intent dashboardActivity = new Intent(LogActivity.this, MainActivityMachineList.class);\r\n                    startActivity(dashboardActivity);\r\n                    LogActivity.this.finish();\r\n                }\r\n            }\r\n        };\r\n\r\n        accessTokenTracker = new AccessTokenTracker() {\r\n            @Override\r\n            protected void onCurrentAccessTokenChanged(AccessToken oldAccessToken, AccessToken currentAccessToken) {\r\n                if(currentAccessToken == null){\r\n                    mAuth.signOut();\r\n                }\r\n            }\r\n        };\r\n\r\n    }\r\n    private void signIn() {\r\n        Intent signInIntent = mGoogleSignInClient.getSignInIntent();\r\n        startActivityForResult(signInIntent, RC_SIGN_IN);\r\n    }\r\n\r\n    @Override\r\n    public void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        mCallbackManager.onActivityResult(requestCode,resultCode,data);\r\n\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        //Resultado devuelto al iniciar el Intent de GoogleSignInApi.getSignInIntent (...);\r\n        // Result returned from launching the Intent from GoogleSignInApi.getSignInIntent(...);\r\n        if (requestCode == RC_SIGN_IN) {\r\n            Task<GoogleSignInAccount> task = GoogleSignIn.getSignedInAccountFromIntent(data);\r\n            if(task.isSuccessful()){\r\n                try {\r\n                    // Google Sign In was successful, authenticate with Firebase\r\n                    GoogleSignInAccount account = task.getResult(ApiException.class);\r\n                    Log.d(TAG, \"firebaseAuthWithGoogle:\" + account.getId());\r\n                    firebaseAuthWithGoogle(account.getIdToken());\r\n                } catch (ApiException e) {\r\n                    // Google Sign In fallido, actualizar GUI\r\n                    Log.w(TAG, \"Google sign in failed\", e);\r\n                }\r\n            }else{\r\n                Log.d(TAG, \"Error, login no exitoso:\" + task.getException().toString());\r\n                Toast.makeText(this, \"Ocurrio un error. \"+task.getException().toString(),\r\n                        Toast.LENGTH_LONG).show();\r\n            }\r\n        }\r\n    }\r\n    private void firebaseAuthWithGoogle(String idToken) {\r\n        AuthCredential credential = GoogleAuthProvider.getCredential(idToken, null);\r\n        mAuth.signInWithCredential(credential)\r\n                .addOnCompleteListener(this, new OnCompleteListener<AuthResult>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<AuthResult> task) {\r\n                        if (task.isSuccessful()) {\r\n                            FirebaseFirestore db=FirebaseFirestore.getInstance();\r\n                            String userID= mAuth.getCurrentUser().getUid();\r\n                            String name= mAuth.getCurrentUser().getDisplayName();\r\n                            String mail= mAuth.getCurrentUser().getEmail();\r\n                            Map<String, Object> data = new HashMap<>();\r\n                            data.put(\"username\", name);\r\n                            data.put(\"mail\", mail);\r\n                            db.collection(\"Usuarios\").document(userID)\r\n                                    .set(data);\r\n                            /*db.collection(\"Usuarios\").document(userID)\r\n                                    .collection(\"Maquinas\").document(\"fecha\")\r\n                                    .set(data);*/\r\n\r\n                            // Sign in success, update UI with the signed-in user's information\r\n                            Log.d(TAG, \"signInWithCredential:success\");\r\n                            //FirebaseUser user = mAuth.getCurrentUser();\r\n                            //Iniciar DASHBOARD u otra actividad luego del SigIn Exitoso\r\n                            Intent dashboardActivity = new Intent(LogActivity.this, IntroductoryActivity2.class);\r\n                            startActivity(dashboardActivity);\r\n                            LogActivity.this.finish();\r\n                        } else {\r\n                            // If sign in fails, display a message to the user.\r\n                            Log.w(TAG, \"signInWithCredential:failure\", task.getException());\r\n\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n    @Override\r\n    protected void onStart() {\r\n        FirebaseUser user = mAuth.getCurrentUser();\r\n        if(user!=null){ //si no es null el usuario ya esta logueado\r\n            //mover al usuario al dashboard\r\n            Intent dashboardActivity = new Intent(LogActivity.this, MainActivityMachineList.class);\r\n            startActivity(dashboardActivity);\r\n        }\r\n        super.onStart();\r\n        mAuth.addAuthStateListener(authStateListener);\r\n    }\r\n    //metodo para navegar entre activitys con los botones\r\n    public void Email (View view){\r\n        Intent email = new Intent(this, LoginActivity.class);\r\n        startActivity(email);\r\n    }\r\n   /* @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if(requestCode == SIGN_IN_CODE){\r\n            GoogleSignInResult result = Auth.GoogleSignInApi.getSignInResultFromIntent(data);\r\n            handleSignResult(result);\r\n        }\r\n    }\r\n\r\n    private void handleSignResult(GoogleSignInResult result) {\r\n        if (result.isSuccess()){\r\n            goMainScreen();\r\n        }else{\r\n            Toast.makeText(this, \"Error al iniciar sesión\", Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void goMainScreen() {\r\n       Intent intent=new Intent(this, MainActivity.class);\r\n       startActivity(intent);\r\n    }\r\n\r\n    //metodo para navegar entre activitys con los botones\r\n    public void Email (View view){\r\n        Intent email = new Intent(this, LoginActivity.class);\r\n        startActivity(email);\r\n    }\r\n\r\n    @Override\r\n    public void onConnectionFailed(@NonNull ConnectionResult connectionResult) {\r\n\r\n    }*/\r\n    //Funciones Login con facebook\r\n    private void handleFacebookToken(AccessToken token){\r\n        Log.d(TAG2,\"handleFacebookToken\" + token);\r\n\r\n        AuthCredential credential = FacebookAuthProvider.getCredential(token.getToken());\r\n        mAuth.signInWithCredential(credential).addOnCompleteListener(this, new OnCompleteListener<AuthResult>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<AuthResult> task) {\r\n                if(task.isSuccessful()){\r\n                    Log.d(TAG2,\"sing in with credential: successfully\");\r\n                    FirebaseUser user = mAuth.getCurrentUser();\r\n                    if(user!=null){ //si no es null el usuario ya esta logueado\r\n                        Intent dashboardActivity = new Intent(LogActivity.this, MainActivityMachineList.class);\r\n                        startActivity(dashboardActivity);\r\n                    }\r\n                }else{\r\n                    Log.d(TAG2,\"sing in with credential: failed\", task.getException());\r\n                    Toast.makeText(LogActivity.this,\"Authentication Failed\", Toast.LENGTH_SHORT);\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        if(authStateListener != null){\r\n            mAuth.removeAuthStateListener(authStateListener);\r\n            finish();\r\n        }\r\n    }\r\n\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/login/LogActivity.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
-+++ app/src/main/java/com/example/infinitycrop/ui/login/LogActivity.java	(date 1609520835136)
-@@ -63,7 +63,7 @@
-     @Override
-     protected void onCreate(Bundle savedInstanceState) {
-         super.onCreate(savedInstanceState);
--        setContentView(R.layout.fragment_login);
-+       /* setContentView(R.layout.fragment_login);*/
-         /*GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)
-                 .requestEmail()
-                 .build();
-Index: app/src/main/java/com/example/infinitycrop/ui/logmail/RegisterActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.logmail;\r\n\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.text.TextUtils;\r\nimport android.view.View;\r\nimport android.widget.EditText;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity2;\r\nimport com.example.infinitycrop.R;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseAuthUserCollisionException;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class RegisterActivity extends AppCompatActivity {\r\n    //objetos visibles\r\n    private EditText Textmail;\r\n    private EditText Textname;\r\n    private EditText Textpassword;\r\n    private LinearLayout Btnregistrar;\r\n    private ProgressDialog progressDialog;\r\n    //objeto firebase\r\n    private FirebaseAuth mAuth;\r\n    private FirebaseFirestore fStore;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_register);\r\n        mAuth = FirebaseAuth.getInstance();\r\n        fStore=FirebaseFirestore.getInstance();\r\n        //referenciamos los views\r\n        Textmail = (EditText) findViewById(R.id.editTextTextPersonName);\r\n        Textname = (EditText) findViewById(R.id.editTextTextPersonName2);\r\n        Textpassword = (EditText) findViewById(R.id.editTextTextPassword);\r\n\r\n        Btnregistrar = (LinearLayout) findViewById(R.id.btn_login);\r\n        progressDialog =new ProgressDialog(this);\r\n\r\n        //atacamos el listener al boton\r\n        Btnregistrar.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                onclick(v);\r\n            }\r\n        });\r\n\r\n\r\n\r\n    }\r\n    public void onclick(View view){\r\n        //invocamos al metodo\r\n        registrarUsuario();\r\n    }\r\n    private void registrarUsuario(){\r\n        //obtendremos el email y la contraseña desde la caja de texto\r\n        final String email = Textmail.getText().toString().trim();\r\n        final String nombre = Textname.getText().toString().trim();\r\n        String password = Textpassword.getText().toString().trim();\r\n\r\n        //verificamos si las cajas estan vacias o no\r\n        if(TextUtils.isEmpty(email)){\r\n            Toast.makeText(this,\"Debes introducir un correo\",Toast.LENGTH_LONG).show();\r\n            return;\r\n        }\r\n        if(TextUtils.isEmpty(password)){\r\n            Toast.makeText(this,\"Debes introducir una contraseña\",Toast.LENGTH_LONG).show();\r\n            return;\r\n        }\r\n        if(TextUtils.isEmpty(nombre)){\r\n            Toast.makeText(this,\"Debes introducir una nombre\",Toast.LENGTH_LONG).show();\r\n            return;\r\n        }\r\n        progressDialog.setMessage(\"Registrando obteniendo contenido en línea...\");\r\n        progressDialog.show();\r\n        //creando un nuevo usuario\r\n        mAuth.createUserWithEmailAndPassword(email,password).addOnCompleteListener( this, new OnCompleteListener<AuthResult>() {\r\n\r\n            @Override\r\n            public void onComplete(@NonNull Task<AuthResult> task) {\r\n                //comprovar si el resultado ha sido resuelto correctamente\r\n                if (task.isSuccessful()) {\r\n\r\n                    //enviar coorreo de confirmación\r\n                    FirebaseUser user = mAuth.getCurrentUser();\r\n                    user.sendEmailVerification().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            Toast.makeText(RegisterActivity.this,\"Verification has been send\",Toast.LENGTH_SHORT);\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n\r\n                            Toast.makeText(RegisterActivity.this,\"Error en el envío de correo\",Toast.LENGTH_SHORT);\r\n                        }\r\n                    });\r\n\r\n                    String userID= mAuth.getCurrentUser().getUid();\r\n                    DocumentReference documentReference=fStore.collection(\"Usuarios\").document(userID);\r\n                    Map<String,Object> datauser=new HashMap<>();\r\n                    datauser.put(\"username\",nombre);\r\n                    datauser.put(\"mail\",email);\r\n                    documentReference.set(datauser).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            Toast.makeText(RegisterActivity.this, \"Iniciando sesión\", Toast.LENGTH_LONG).show();\r\n                            Intent intencion = new Intent (getApplication(), IntroductoryActivity2.class);\r\n                            startActivity(intencion);\r\n                            finish();\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n\r\n                        }\r\n                    });\r\n\r\n\r\n\r\n                } else {\r\n                    if (task.getException() instanceof FirebaseAuthUserCollisionException) {//si se presenta una colisión\r\n                        Toast.makeText(RegisterActivity.this, \"Este Usuario ya existe\", Toast.LENGTH_SHORT).show();\r\n                    } else {\r\n                        Toast.makeText(RegisterActivity.this, \"No se puede registrar este usuario\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n\r\n                }\r\n                progressDialog.dismiss();\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void onStop() {\r\n        finish();\r\n        super.onStop();\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/logmail/RegisterActivity.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
-+++ app/src/main/java/com/example/infinitycrop/ui/logmail/RegisterActivity.java	(date 1609552727772)
-@@ -149,9 +149,5 @@
-         });
-     }
- 
--    @Override
--    public void onStop() {
--        finish();
--        super.onStop();
--    }
-+
- }
-Index: app/src/main/java/com/example/infinitycrop/ui/LoadAnimations/IntroductoryActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.LoadAnimations;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.app.Activity;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.os.CountDownTimer;\r\nimport android.widget.ImageView;\r\n\r\nimport com.airbnb.lottie.LottieAnimationView;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.login.LogActivity;\r\n\r\nimport static java.security.AccessController.getContext;\r\n\r\npublic class IntroductoryActivity extends AppCompatActivity {\r\n    ImageView logo,splashImg;\r\n    LottieAnimationView lottieAnimationView;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_introductory);\r\n        logo = findViewById(R.id.log);\r\n        splashImg = findViewById(R.id.img);\r\n        lottieAnimationView = findViewById(R.id.lottie);\r\n\r\n        splashImg.animate().translationY(-4000).setDuration(1000).setStartDelay(4000);\r\n        logo.animate().translationY(4000).setDuration(1000).setStartDelay(4000);\r\n        lottieAnimationView.animate().translationY(1600).setDuration(800).setStartDelay(3900);\r\n\r\n        if (this.equals(0)) {\r\n            finish();\r\n        }\r\n        new CountDownTimer(4660, 1000) {\r\n\r\n            public void onTick(long millisUntilFinished) {\r\n\r\n\r\n            }\r\n\r\n\r\n            public void onFinish() {\r\n                Intent intent= new Intent (getApplicationContext(), LogActivity.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n\r\n        }.start();\r\n\r\n    }\r\n    @Override\r\n    public void onStop() {\r\n        finish();\r\n        super.onStop();\r\n    }\r\n\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/LoadAnimations/IntroductoryActivity.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
-+++ app/src/main/java/com/example/infinitycrop/ui/LoadAnimations/IntroductoryActivity.java	(date 1609520835167)
-@@ -28,7 +28,7 @@
- 
-         splashImg.animate().translationY(-4000).setDuration(1000).setStartDelay(4000);
-         logo.animate().translationY(4000).setDuration(1000).setStartDelay(4000);
--        lottieAnimationView.animate().translationY(1600).setDuration(800).setStartDelay(3900);
-+        lottieAnimationView.animate().translationY(1400).setDuration(800).setStartDelay(3900);
- 
-         if (this.equals(0)) {
-             finish();
-@@ -42,7 +42,7 @@
- 
- 
-             public void onFinish() {
--                Intent intent= new Intent (getApplicationContext(), LogActivity.class);
-+                Intent intent= new Intent (getApplicationContext(), LogprimeraActivity.class);
-                 startActivity(intent);
- 
-             }
-Index: app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.profile;\r\n\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.graphics.Bitmap;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.util.LruCache;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.android.volley.RequestQueue;\r\nimport com.android.volley.toolbox.ImageLoader;\r\nimport com.android.volley.toolbox.NetworkImageView;\r\nimport com.android.volley.toolbox.Volley;\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.MainActivityMachineList;\r\nimport com.example.infinitycrop.ui.login.LogActivity;\r\nimport com.example.infinitycrop.ui.profile.settings.AboutInfinityCrap;\r\nimport com.example.infinitycrop.ui.profile.settings.HelpProfile;\r\n//import com.example.infinitycrop.ui.profile.settings.ModifyProfile;\r\nimport com.firebase.ui.auth.AuthUI;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link ProfileFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class ProfileFragment extends Fragment {\r\n    //atributos para confirmación de correo\r\n    private FirebaseUser us;\r\n    private TextView txtverf;\r\n    private Button btnconf;\r\n\r\n\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public ProfileFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment ProfileFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static ProfileFragment newInstance(String param1, String param2) {\r\n        ProfileFragment fragment = new ProfileFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_profile, container, false);\r\n\r\n        ImageView irAPerfil =v.findViewById(R.id.irAEditarPerfil);\r\n        irAPerfil.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                /*Intent intent = new Intent(getActivity(), ModifyProfile.class);\r\n                startActivity(intent);*/\r\n            }\r\n        });\r\n\r\n        //Enlaces de los botones de configuracion\r\n        //personalice colors\r\n        RelativeLayout customColors_btn =v.findViewById(R.id.relativeLayout4);\r\n        customColors_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n            }\r\n        });\r\n        //about us\r\n        RelativeLayout aboutInfinity_btn =v.findViewById(R.id.relativeLayout6);\r\n        aboutInfinity_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), AboutInfinityCrap.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        //help\r\n        RelativeLayout help_profile =v.findViewById(R.id.relativeLayout5);\r\n        help_profile.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), HelpProfile.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        //firebase\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=mAuth.getCurrentUser().getUid();\r\n        final GoogleSignInClient mGoogleSignInClient;\r\n        GoogleSignInOptions gso;\r\n        final FirebaseUser usuario = FirebaseAuth.getInstance().getCurrentUser();\r\n        //guardo la imagen en un ImagenView\r\n        final ImageView img = (ImageView) v.findViewById(R.id.profile);\r\n        //guardo el nombre en un textView\r\n        final TextView nombre = (TextView) v.findViewById(R.id.username);\r\n        nombre.setText(usuario.getDisplayName());\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(nombre.getText() == \"\"){\r\n                    nombre.setText(snapshot.getString(\"username\"));\r\n                    img.setImageResource(R.drawable.icons_user);\r\n                }\r\n            }\r\n        });\r\n\r\n        //guardo el mail en un textView\r\n        TextView correo = (TextView) v.findViewById(R.id.mailUser);\r\n        correo.setText(usuario.getEmail());\r\n        //cargar imágen con glide:\r\n        Glide.with(this).load(usuario.getPhotoUrl()).into(img);\r\n        //boton cerrar sesion\r\n\r\n        //Configurar las gso para google signIn con el fin de luego desloguear de google\r\n        gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestIdToken(getString(R.string.default_web_client_id))\r\n                .requestEmail()\r\n                .build();\r\n        mGoogleSignInClient = GoogleSignIn.getClient(getActivity(), gso);\r\n\r\n        RelativeLayout cerrarSesion =(RelativeLayout) v.findViewById(R.id.btn_end_session);\r\n        cerrarSesion.setOnClickListener(new View.OnClickListener() {\r\n            public void onClick(View view) {\r\n                new AlertDialog.Builder(requireContext())\r\n                        .setTitle(\"Cerrar sesión\")\r\n                        .setMessage(\"¿Estas seguro que quieres cerrar sesión?\")\r\n                        .setPositiveButton(\"Confirmar\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n                                //Cerrar session con Firebase\r\n                                mAuth.signOut();\r\n                                //Cerrar sesión con google tambien: Google sign out\r\n                                mGoogleSignInClient.signOut().addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                                    @Override\r\n                                    public void onComplete(@NonNull Task<Void> task) {\r\n                                        //Abrir MainActivity con SigIn button\r\n                                        if(task.isSuccessful()){\r\n                                            Intent logActivity = new Intent(getActivity().getApplicationContext(), LogActivity.class);\r\n                                            startActivity(logActivity);\r\n                                            getActivity().finish();\r\n                                        }else{\r\n                                            Toast.makeText(getActivity().getApplicationContext(), \"No se pudo cerrar sesión con google\",\r\n                                                    Toast.LENGTH_LONG).show();\r\n                                        }\r\n                                    }\r\n                                });\r\n\r\n                            }\r\n                        })\r\n                        .setNegativeButton(\"Cancelar\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                            }\r\n                        })\r\n                        .show();\r\n\r\n\r\n            }\r\n        });\r\n\r\n        //Confirmación de verificación de correo\r\n        TextView txtverify = (TextView) v.findViewById(R.id.txtVerif);\r\n        Button btnverify = (Button) v.findViewById(R.id.btnverif);\r\n        final FirebaseUser user = mAuth.getCurrentUser();\r\n        if(!user.isEmailVerified()){\r\n            us=user;\r\n            txtverf = txtverify;\r\n            btnconf = btnverify;\r\n\r\n            txtverify.setVisibility(View.VISIBLE);\r\n            btnverify.setVisibility(View.VISIBLE);\r\n\r\n            btnverify.setOnClickListener(new View.OnClickListener()\r\n            {\r\n                @Override\r\n                public void onClick(final View v)\r\n                {\r\n\r\n                    FirebaseUser user = mAuth.getCurrentUser();\r\n                    user.sendEmailVerification().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            Toast.makeText(getActivity(),\"Enviando correo de confirmación\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n\r\n                            Toast.makeText(getActivity(),\"Error en el envío de correo\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            /*}else{\r\n            txtverify.setVisibility(View.GONE);\r\n            btnverify.setVisibility(View.GONE);*/\r\n        }\r\n        /*RequestQueue colaPeticiones = Volley.newRequestQueue(getActivity()\r\n                .getApplicationContext());\r\n        ImageLoader lectorImagenes = new ImageLoader(colaPeticiones,\r\n                new ImageLoader.ImageCache() {\r\n                    private final LruCache<String, Bitmap> cache =\r\n                            new LruCache<String, Bitmap>(10);\r\n                    public void putBitmap(String url, Bitmap bitmap) {\r\n                        cache.put(url, bitmap);\r\n                    }\r\n                    public Bitmap getBitmap(String url) {\r\n                        return cache.get(url);\r\n                    }\r\n                });\r\n        Uri urlImagen = usuario.getPhotoUrl();\r\n        if (urlImagen != null) {\r\n            NetworkImageView fotoUsuario = (NetworkImageView)\r\n                    v.findViewById(R.id.profile);\r\n            fotoUsuario.setImageUrl(urlImagen.toString(), lectorImagenes);\r\n        }else{\r\n            NetworkImageView fotoUsuario = (NetworkImageView)\r\n                    v.findViewById(R.id.profile);\r\n            fotoUsuario.setImageUrl(String.valueOf(R.drawable.icons_user), lectorImagenes);\r\n        }*/\r\n        return v;\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
-+++ app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java	(date 1609520835174)
-@@ -32,7 +32,7 @@
- import com.example.infinitycrop.ui.login.LogActivity;
- import com.example.infinitycrop.ui.profile.settings.AboutInfinityCrap;
- import com.example.infinitycrop.ui.profile.settings.HelpProfile;
--//import com.example.infinitycrop.ui.profile.settings.ModifyProfile;
-+/*import com.example.infinitycrop.ui.profile.settings.ModifyProfile;*/
- import com.firebase.ui.auth.AuthUI;
- import com.google.android.gms.auth.api.signin.GoogleSignIn;
- import com.google.android.gms.auth.api.signin.GoogleSignInClient;
-@@ -112,7 +112,7 @@
-         irAPerfil.setOnClickListener(new View.OnClickListener() {
-             @Override
-             public void onClick(View v) {
--                /*Intent intent = new Intent(getActivity(), ModifyProfile.class);
-+               /* Intent intent = new Intent(getActivity(), ModifyProfile.class);
-                 startActivity(intent);*/
-             }
-         });
-Index: app/src/main/java/com/example/infinitycrop/ui/OnBoardingFragment/OnBoardingFragment4.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.OnBoardingFragment;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.AddMachine;\r\n\r\npublic class OnBoardingFragment4 extends Fragment {\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        final ViewGroup root = (ViewGroup) inflater.inflate(R.layout.fragment_on_boarding4,container,false);\r\n        TextView button = (TextView) root.findViewById(R.id.btn_skip);\r\n        button.setOnClickListener(new View.OnClickListener()\r\n        {\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                Intent intent = new Intent((getActivity().getApplication()), AddMachine.class);\r\n                TextView editText = (TextView) root.findViewById(R.id.btn_skip);\r\n\r\n                startActivity(intent);\r\n\r\n            }\r\n        });\r\n        Button button1 = (Button) root.findViewById(R.id.btn_start);\r\n        button1.setOnClickListener(new View.OnClickListener()\r\n        {\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                Intent i = new Intent((getActivity().getApplication()), AddMachine.class);\r\n                Button button1 = (Button) root.findViewById(R.id.btn_start);\r\n                startActivity(i);\r\n            }\r\n        });\r\n\r\n        return root;\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/OnBoardingFragment/OnBoardingFragment4.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
-+++ app/src/main/java/com/example/infinitycrop/ui/OnBoardingFragment/OnBoardingFragment4.java	(date 1609520835179)
-@@ -17,6 +17,7 @@
-     @Override
-     public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
-         final ViewGroup root = (ViewGroup) inflater.inflate(R.layout.fragment_on_boarding4,container,false);
-+
-         TextView button = (TextView) root.findViewById(R.id.btn_skip);
-         button.setOnClickListener(new View.OnClickListener()
-         {
-@@ -30,6 +31,7 @@
- 
-             }
-         });
-+
-         Button button1 = (Button) root.findViewById(R.id.btn_start);
-         button1.setOnClickListener(new View.OnClickListener()
-         {
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02__Default_Changelist_.xml
Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.Manifest;\r\nimport android.app.Activity;\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.content.res.ColorStateList;\r\nimport android.location.Address;\r\nimport android.location.Geocoder;\r\nimport android.location.Location;\r\nimport android.location.LocationManager;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.os.StrictMode;\r\nimport android.provider.Settings;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvModel;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.location.FusedLocationProviderClient;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.annotations.NotNull;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.squareup.okhttp.Call;\r\nimport com.squareup.okhttp.Callback;\r\nimport com.squareup.okhttp.OkHttpClient;\r\nimport com.squareup.okhttp.Request;\r\nimport com.squareup.okhttp.Response;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link DashboardFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class DashboardFragment extends Fragment implements MqttCallback{\r\n\r\n    private RecyclerView recyclerView;\r\n    private StaticRvAdapter staticRvAdapter;\r\n    private TabLayout tabLayout;\r\n    private ViewPager viewPager;\r\n    //WEATHER\r\n    private static  final int REQUEST_LOCATION=1;\r\n    double lat;\r\n    double longi;\r\n\r\n    TextView showLocationTxt;\r\n\r\n    LocationManager locationManager;\r\n    String latitude,longitude;\r\n\r\n    TextView view_city;\r\n    TextView view_temp;\r\n    TextView view_desc;\r\n    TextView view_country;\r\n\r\n    ImageView view_weather;\r\n    //\r\n\r\n\r\n    public static MqttClient client = null;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public DashboardFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment DashboardFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static DashboardFragment newInstance(String param1, String param2) {\r\n        DashboardFragment fragment = new DashboardFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_dashboard, container, false);\r\n        //FIREBASE\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        final FirebaseUser usuario = mAuth.getCurrentUser();\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=usuario.getUid();\r\n        //guardo el nombre en un textView\r\n        /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);\r\n        String res=\"Hola\"+\" \"+usuario.getDisplayName();\r\n        nombre.setText(res);\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(usuario.getDisplayName() == null){\r\n                    String res1=\"Hola\"+\" \"+snapshot.getString(\"username\");\r\n                    nombre.setText(res1);\r\n                }\r\n            }\r\n        });*/\r\n\r\n        //switch methods\r\n /*     Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });*/\r\n\r\n\r\n        //WEATHER\r\n        ActivityCompat.requestPermissions(getActivity(),new String[]\r\n                {Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n\r\n        view_city =v.findViewById(R.id.town);\r\n        view_city.setText(\"\");\r\n        view_temp =v.findViewById(R.id.temp);\r\n        view_temp.setText(\"\");\r\n        view_desc =v.findViewById(R.id.desc);\r\n        view_desc.setText(\"\");\r\n        view_country=v.findViewById(R.id.txtCountry);\r\n        view_country.setText(\"\");\r\n        view_weather =v.findViewById(R.id.wheather_image);\r\n\r\n        locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);\r\n       /* inicioGPS();*/\r\n        //\r\n\r\n\r\n\r\n\r\n        //RECYCLER VIEW\r\n        ArrayList<StaticRvModel> item=new ArrayList<>();\r\n        item.add(new StaticRvModel(R.drawable.icons_sun,\"Soleado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_night_mode,\"Nocturno\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_energy_saving,\"Ahorro\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_power_off,\"Apagado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_custom,\"Custom\"));\r\n\r\n        final TextView medidasT=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidasH=v.findViewById(R.id.medidaHumedadGeneral);\r\n        final TextView medidasS=v.findViewById(R.id.medidaSalinidadGeneral);\r\n        final TextView medidasL=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n\r\n        recyclerView=v.findViewById(R.id.rv_1);\r\n        staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(),LinearLayoutManager.HORIZONTAL,false));\r\n        recyclerView.setAdapter(staticRvAdapter);\r\n\r\n\r\n        //TABS\r\n        tabLayout = v.findViewById(R.id.tab_layout);\r\n        viewPager = v.findViewById(R.id.view_pager);\r\n         //Array\r\n        ArrayList<String> arrayList = new ArrayList<>();\r\n\r\n        //set up with viewpager\r\n        tabLayout.setupWithViewPager(viewPager);\r\n\r\n        TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());\r\n        //Pestañas\r\n        adapter.addFrag(new GeneralFragment(),\"General\");\r\n        adapter.addFrag(new Planta1Fragment(),\"Planta 1\");\r\n        adapter.addFrag(new Planta2Fragment(),\"Planta 2\");\r\n\r\n        viewPager.setAdapter(adapter );\r\n\r\n        /*((MainActivity)getActivity()).ola();*/\r\n     /*   //LEER DATOS FIREBASE\r\n        //Temperatura\r\n       DocumentReference documentTemperatura=fStore.collection(\"SensoresA-T\").document(\"Temperatura\");\r\n        documentTemperatura.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediTemp=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasT.setText(resMediTemp);\r\n            }\r\n        });\r\n        //Humedad\r\n        DocumentReference documentHumedad=fStore.collection(\"SensoresA-T\").document(\"Humedad\");\r\n        documentHumedad.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediHum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasH.setText(resMediHum);\r\n            }\r\n        });\r\n        //Iluminación\r\n        DocumentReference documentIluminación=fStore.collection(\"SensoresA-T\").document(\"Iluminación\");\r\n        documentIluminación.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIlum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasL.setText(resMediIlum);\r\n            }\r\n        });\r\n        //Temperatura ambiente\r\n        DocumentReference documentambiente=fStore.collection(\"SensoresA-T\").document(\"Temperatura ambiente\");\r\n        documentambiente.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIAmb=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasS.setText(resMediIAmb);\r\n            }\r\n        });\r\n\r\n      */\r\n\r\n        return v;\r\n    }\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n\r\n\r\n    //WEATHER METHODS\r\n    private void api_key(final String City) {\r\n        OkHttpClient client = new OkHttpClient();\r\n\r\n        Request request = new Request.Builder()\r\n                .url(\"https://api.openweathermap.org/data/2.5/weather?q=\" + City + \"&appid=a6f41d947e0542a26580bcd5c3fb90ef&units=metric\")\r\n                .get()\r\n                .build();\r\n        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n        StrictMode.setThreadPolicy(policy);\r\n        try {\r\n            Response response = client.newCall(request).execute();\r\n            client.newCall(request).enqueue(new Callback() {\r\n                @Override\r\n                public void onFailure(Request request, IOException e) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onResponse(Response response) throws IOException {\r\n                    String responseData = response.body().string();\r\n                    try {\r\n                        JSONObject json = new JSONObject(responseData);\r\n                        JSONArray array = json.getJSONArray(\"weather\");\r\n                        JSONObject object = array.getJSONObject(0);\r\n\r\n                        String description = object.getString(\"description\");\r\n                        String icons = object.getString(\"icon\");\r\n\r\n                        JSONObject temp1 = json.getJSONObject(\"main\");\r\n                        Double Temperature = temp1.getDouble(\"temp\");\r\n\r\n                        setText(view_city, City);\r\n\r\n                        String temps = Math.round(Temperature) + \" °C\";\r\n                        setText(view_temp, temps);\r\n                        setText(view_desc, description);\r\n                        setImage(view_weather, icons);\r\n\r\n                    } catch (JSONException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n\r\n            });\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    private void setText(final TextView text, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                text.setText(value);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setImage(final ImageView imageView, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                //paste switch\r\n                switch (value) {\r\n                    case \"01d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"01n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"02d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"02n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"03d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"03n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"04d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"04n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"09d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"09n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"10d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"10n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"11d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"11n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"13d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    case \"13n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    default:\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.wheather));\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    //App location\r\n   /* private void getLocation() {\r\n\r\n        //Check Permissions again\r\n\r\n        /*if (ActivityCompat.checkSelfPermission(\r\n                getContext(),Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(\r\n                getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n        } else {\r\n\r\n            Location LocationNetwork=locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);\r\n             if (LocationNetwork !=null)\r\n            {\r\n                double lat=LocationNetwork.getLatitude();\r\n                double longi=LocationNetwork.getLongitude();\r\n\r\n                latitude=String.valueOf(lat);\r\n                longitude=String.valueOf(longi);\r\n               /* loc_func(LocationNetwork);*/\r\n              /*  api_key(String.valueOf(view_city.getText()));\r\n                showLocationTxt.setText(\"Your Location:\"+\"\\n\"+\"Latitude= \"+latitude+\"\\n\"+\"Longitude= \"+longitude);\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private void OnGPS() {\r\n\r\n        final AlertDialog.Builder builder= new AlertDialog.Builder(getContext());\r\n\r\n        builder.setMessage(\"Enable GPS\").setCancelable(false).setPositiveButton(\"YES\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS));\r\n                getLocation();\r\n            }\r\n        }).setNegativeButton(\"NO\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                dialog.cancel();\r\n            }\r\n        });\r\n        final AlertDialog alertDialog=builder.create();\r\n        alertDialog.show();\r\n    }\r\n\r\n    private void loc_func(Location location){\r\n        try {\r\n            Geocoder geocoder=new Geocoder(getContext());\r\n            List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);\r\n            /*String address = addresses.get(0).getSubLocality();*/\r\n           /* String cityName = addresses.get(0).getLocality();\r\n            String stateName = addresses.get(0).getAdminArea();\r\n            String country = addresses.get(0).getCountryName();\r\n            //txt_paddress.setText(address);\r\n            view_city.setText(cityName);\r\n            view_country.setText(country);\r\n            //txt_state.setText(stateName);*/\r\n\r\n       /* } catch (IOException e) {\r\n            e.printStackTrace();\r\n            Toast.makeText(getContext(), \"Error:\"+e, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void inicioGPS(){\r\n\r\n\r\n        //Check gps is enable or not\r\n\r\n        if (!locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))\r\n        {\r\n            //Write Function To enable gps\r\n\r\n            OnGPS();\r\n        }\r\n        else\r\n        {\r\n            //GPS is already On then\r\n\r\n            /*getLocation();*/\r\n /*       }\r\n    }*/\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(date 1610497239608)
@@ -1,20 +1,10 @@
 package com.example.infinitycrop.ui.dashboard;
 
 import android.Manifest;
-import android.app.Activity;
-import android.app.AlertDialog;
 import android.content.Context;
-import android.content.DialogInterface;
-import android.content.Intent;
-import android.content.pm.PackageManager;
-import android.content.res.ColorStateList;
-import android.location.Address;
-import android.location.Geocoder;
-import android.location.Location;
 import android.location.LocationManager;
 import android.os.Bundle;
 
-import androidx.annotation.Nullable;
 import androidx.core.app.ActivityCompat;
 import androidx.fragment.app.Fragment;
 import androidx.recyclerview.widget.LinearLayoutManager;
@@ -22,36 +12,21 @@
 import androidx.viewpager.widget.ViewPager;
 
 import android.os.StrictMode;
-import android.provider.Settings;
 import android.util.Log;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
-import android.widget.CompoundButton;
 import android.widget.ImageView;
-import android.widget.LinearLayout;
-import android.widget.Switch;
 import android.widget.TextView;
-import android.widget.Toast;
 
 import com.example.comun.Mqtt;
-import com.example.infinitycrop.MainActivity;
 import com.example.infinitycrop.R;
 import com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;
 import com.example.infinitycrop.ui.recycler_control.StaticRvModel;
-import com.google.android.gms.auth.api.signin.GoogleSignInClient;
-import com.google.android.gms.auth.api.signin.GoogleSignInOptions;
-import com.google.android.gms.location.FusedLocationProviderClient;
 import com.google.android.material.tabs.TabLayout;
 import com.google.firebase.auth.FirebaseAuth;
 import com.google.firebase.auth.FirebaseUser;
-import com.google.firebase.database.annotations.NotNull;
-import com.google.firebase.firestore.DocumentReference;
-import com.google.firebase.firestore.DocumentSnapshot;
-import com.google.firebase.firestore.EventListener;
 import com.google.firebase.firestore.FirebaseFirestore;
-import com.google.firebase.firestore.FirebaseFirestoreException;
-import com.squareup.okhttp.Call;
 import com.squareup.okhttp.Callback;
 import com.squareup.okhttp.OkHttpClient;
 import com.squareup.okhttp.Request;
@@ -70,7 +45,6 @@
 
 import java.io.IOException;
 import java.util.ArrayList;
-import java.util.List;
 
 import static com.example.comun.Mqtt.topicRoot;
 
@@ -102,6 +76,8 @@
 
     ImageView view_weather;
     //
+    //Acceso a la maquina
+
 
 
     public static MqttClient client = null;
@@ -284,6 +260,7 @@
 
       */
 
+
         return v;
     }
 
Index: app/build.gradle
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>apply plugin: 'com.android.application'\r\n\r\n\r\nandroid {\r\n    compileSdkVersion 30\r\n    buildToolsVersion \"30.0.2\"\r\n\r\n    defaultConfig {\r\n        applicationId \"com.example.infinitycrop\"\r\n        minSdkVersion 23\r\n        targetSdkVersion 30\r\n        versionCode 1\r\n        versionName \"1.0\"\r\n        multiDexEnabled true\r\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\r\n        }\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation fileTree(dir: \"libs\", include: [\"*.jar\"])\r\n    implementation 'androidx.appcompat:appcompat:1.2.0'\r\n    implementation 'com.google.android.material:material:1.2.1'\r\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.2'\r\n    implementation 'androidx.navigation:navigation-fragment:2.1.0'\r\n    implementation 'androidx.navigation:navigation-ui:2.1.0'\r\n    implementation 'androidx.lifecycle:lifecycle-extensions:2.2.0'\r\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\r\n    implementation 'com.google.firebase:firebase-auth:16.0.5'\r\n    implementation 'com.firebaseui:firebase-ui-auth:6.2.0'\r\n    implementation project(path: ':comun')\r\n    implementation 'com.google.firebase:firebase-database:19.5.1'\r\n    implementation 'com.google.firebase:firebase-storage:19.2.0'\r\n    testImplementation 'junit:junit:4.12'\r\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\r\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\r\n    implementation 'com.google.firebase:firebase-analytics'\r\n    implementation 'com.ismaeldivita.chipnavigation:chip-navigation-bar:1.3.4'\r\n    implementation 'org.jetbrains.kotlin:kotlin-stdlib:1.4.10'\r\n    implementation 'androidx.recyclerview:recyclerview:1.1.0'\r\n    implementation 'com.android.volley:volley:1.1.0'\r\n    // Also declare the dependency for the Google Play services library and specify its version\r\n    implementation 'com.google.android.gms:play-services-auth:18.1.0'\r\n    // Import the BoM for the Firebase platform\r\n    implementation platform('com.google.firebase:firebase-bom:26.0.0')\r\n    implementation 'com.google.firebase:firebase-firestore:17.1.2'\r\n    implementation 'com.android.support:multidex:1.0.3'\r\n    implementation 'com.firebaseui:firebase-ui-firestore:6.3.0'\r\n    //biblioteca para mostrar images a través de URL\r\n    implementation 'com.github.bumptech.glide:glide:4.11.0'\r\n    //import del mqtt\r\n    implementation 'org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.1.1'\r\n    implementation 'com.google.android.gms:play-services-maps:17.0.0'\r\n    compile 'com.google.android.gms:play-services-location:16.0.0'\r\n    implementation 'com.journeyapps:zxing-android-embedded:3.4.0'//añadimos esta libreria para qr\r\n    implementation 'com.facebook.android:facebook-android-sdk:[4,5)'\r\n\r\n    implementation \"androidx.viewpager2:viewpager2:1.0.0\" //libreria viewpager\r\n    implementation  'com.airbnb.android:lottie:3.4.1'//libreria para la animacion\r\n    implementation 'com.cuberto:liquid-swipe:1.0.0' //libreria para el tutorial\r\n    implementation 'androidx.core:core:1.3.1'\r\n    implementation'androidx.core:core-ktx:1.3.1'\r\n\r\n    implementation'com.squareup.okhttp3:mockwebserver:4.2.0'\r\n    implementation'com.squareup.okhttp3:okhttp:4.2.0'\r\n\r\n    implementation 'androidx.cardview:cardview:1.0.0'\r\n    implementation \"androidx.viewpager2:viewpager2:1.0.0\" //libreria viewpager\r\n\r\n    //plugins de subir imagen user foro\r\n    implementation 'com.theartofdev.edmodo:android-image-cropper:2.4.+'\r\n    implementation 'com.squareup.picasso:picasso:2.71828'\r\n    implementation 'id.zelory:compressor:2.1.0'\r\n    //imageView modo circulo\r\n    implementation 'com.makeramen:roundedimageview:2.3.0'\r\n}\r\napply plugin: 'com.google.gms.google-services'
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/build.gradle	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
+++ app/build.gradle	(date 1610497330568)
@@ -79,5 +79,7 @@
     implementation 'id.zelory:compressor:2.1.0'
     //imageView modo circulo
     implementation 'com.makeramen:roundedimageview:2.3.0'
+    //libreria wheelview
+    implementation'com.github.psuzn:wheelView:1.0.0'
 }
 apply plugin: 'com.google.gms.google-services'
\ No newline at end of file
Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.google.firebase.firestore.Query;\r\nimport com.google.firebase.firestore.QueryDocumentSnapshot;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link GeneralFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class GeneralFragment extends Fragment implements MqttCallback{\r\n    public static MqttClient client = null;\r\n    private String uid;\r\n    private FirebaseFirestore db;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public GeneralFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment GeneralFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static GeneralFragment newInstance(String param1, String param2) {\r\n        GeneralFragment fragment = new GeneralFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v = inflater.inflate(R.layout.fragment_general, container, false);\r\n        //switch methods\r\n        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });\r\n        db = FirebaseFirestore.getInstance();\r\n        MainActivity myActivity = (MainActivity) getActivity();\r\n        final TextView medidaTemp=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidaHum=v.findViewById(R.id.medidaHumedadGeneral);\r\n        final TextView medidaHumAm=v.findViewById(R.id.medidaSalinidadGeneral);\r\n        final TextView medidaLuz=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n        uid=myActivity.getMachineUID();\r\n        db.collection(\"Mediciones general\")\r\n                .document(uid)\r\n                .addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable DocumentSnapshot snapshot,\r\n                                        @Nullable FirebaseFirestoreException e) {\r\n                        if (e != null) {\r\n                            return;\r\n                        }\r\n\r\n                        if (snapshot != null && snapshot.exists()) {\r\n                            //Temperatura\r\n                            String medidaT=snapshot.getString(\"Temperatura\");\r\n                            medidaTemp.setText(medidaT+\"°C\");\r\n                            //Humedad\r\n                            String medidaH=snapshot.getString(\"Humedad\");\r\n                            medidaHum.setText(medidaH+\"%\");\r\n                            //Humedad Ambiente\r\n                            String medidaHA=snapshot.getString(\"Humedad Ambiente\");\r\n                            medidaHumAm.setText(medidaHA+\"%\");\r\n                            //Luminosidad\r\n                            String medidaL=snapshot.getString(\"Luminosidad\");\r\n                            medidaLuz.setText(medidaL+\"%\");\r\n\r\n\r\n                        } else {\r\n\r\n                        }\r\n                    }\r\n                });\r\n\r\n        return v;\r\n    }\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"Superior OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"Superior ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(date 1610497239615)
@@ -1,14 +1,17 @@
 package com.example.infinitycrop.ui.dashboard;
 
+import android.content.Intent;
 import android.os.Bundle;
 
 import androidx.annotation.Nullable;
+import androidx.constraintlayout.widget.ConstraintLayout;
 import androidx.fragment.app.Fragment;
 
 import android.util.Log;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
+import android.widget.Button;
 import android.widget.CompoundButton;
 import android.widget.Switch;
 import android.widget.TextView;
@@ -16,13 +19,12 @@
 import com.example.comun.Mqtt;
 import com.example.infinitycrop.MainActivity;
 import com.example.infinitycrop.R;
+import com.example.infinitycrop.ui.MachineControl.planta1;
+import com.google.android.material.bottomsheet.BottomSheetDialog;
 import com.google.firebase.firestore.DocumentSnapshot;
 import com.google.firebase.firestore.EventListener;
 import com.google.firebase.firestore.FirebaseFirestore;
 import com.google.firebase.firestore.FirebaseFirestoreException;
-import com.google.firebase.firestore.Query;
-import com.google.firebase.firestore.QueryDocumentSnapshot;
-import com.google.firebase.firestore.QuerySnapshot;
 
 import org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;
 import org.eclipse.paho.client.mqttv3.MqttCallback;
@@ -139,8 +141,43 @@
                     }
                 });
 
+        //Boton para acceder a la maquina para sus parcelas
+        Button btnmymachine = (Button) v.findViewById(R.id.btnMyMachine);
+        btnmymachine.setOnClickListener(new View.OnClickListener() {
+            @Override
+            public void onClick(View v) {
+
+                BottomSheetDialog bottomSheetDialog = new BottomSheetDialog(
+                        getContext()
+                );
+                bottomSheetDialog.setContentView(R.layout.plantamaquina_bottom_sheet);
+                Button btnp1=bottomSheetDialog.findViewById(R.id.enterPlant2);
+                Button btn2=bottomSheetDialog.findViewById(R.id.enterPlant1);
+                bottomSheetDialog.show();
+                btnp1.setOnClickListener(new View.OnClickListener() {
+                    @Override
+                    public void onClick(View v) {
+                        Intent intent = new Intent (getContext(), planta1.class);
+                        startActivity(intent);
+
+                    }
+                });
+            }
+        });
+
         return v;
     }
+        /*btnmymachine.setOnClickListener(new View.OnClickListener() {
+            @Override
+            public void onClick(View v) {
+                Intent intent = new Intent (getContext(), MiMaquina.class);
+                startActivity(intent);
+
+            }
+        });*/
+
+
+
     public void enviarLucesOff(){
         try {
             client = new MqttClient(Mqtt.broker, Mqtt.clientId, new
Index: build.gradle
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\nbuildscript {\r\n    repositories {\r\n        google()\r\n        jcenter()\r\n        mavenCentral()\r\n    }\r\n    dependencies {\r\n        classpath 'com.android.tools.build:gradle:4.1.1'\r\n        classpath 'com.google.gms:google-services:4.3.4'\r\n\r\n        // NOTE: Do not place your application dependencies here; they belong\r\n        // in the individual module build.gradle files\r\n    }\r\n}\r\n\r\nallprojects {\r\n    repositories {\r\n        google()\r\n        jcenter()\r\n        //Dependencia para el tutorial\r\n        def githubProperties = new Properties()\r\n        githubProperties.load(new FileInputStream(rootProject.file(\"github.properties\")))\r\n        repositories {\r\n            maven {\r\n                name = \"GitHubPackages\"\r\n\r\n                url = uri(\"https://maven.pkg.github.com/Cuberto/liquid-swipe-android\")\r\n                credentials {\r\n                    /** Create github.properties in root project folder file with\r\n                     ** gpr.usr=GITHUB_USER_ID & gpr.key=PERSONAL_ACCESS_TOKEN\r\n                     ** Or set env variable GPR_USER & GPR_API_KEY if not adding a properties file**/\r\n                    username = githubProperties['gpr.usr'] ?: System.getenv(\"GPR_USER\")\r\n                    password = githubProperties['gpr.key'] ?: System.getenv(\"GPR_API_KEY\")\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- build.gradle	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
+++ build.gradle	(date 1610497396037)
@@ -33,10 +33,15 @@
                     username = githubProperties['gpr.usr'] ?: System.getenv("GPR_USER")
                     password = githubProperties['gpr.key'] ?: System.getenv("GPR_API_KEY")
                 }
+
             }
-        }
-    }
-}
+            maven {
+                url 'https://jitpack.io'
+            }
+            }
+        }
+    }
+
 
 task clean(type: Delete) {
     delete rootProject.buildDir
Index: app/src/main/AndroidManifest.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.infinitycrop\">\r\n\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" /> <!-- Permisos Qr -->\r\n    <uses-permission android:name=\"android.permission.CAMERA\" />\r\n\r\n    <uses-feature android:name=\"android.hardware.camera\" />\r\n    <uses-feature android:name=\"android.hardware.camera.autofocus\" />\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher\"\r\n        android:theme=\"@style/AppThemeHome\">\r\n        <activity android:name=\".ui.list_machine.ModifyMachine\"></activity>\r\n        <activity android:name=\".ui.Foro.main.ForoMain\" />\r\n        <activity android:name=\".ui.Foro.lets_start.AddCommunity\" />\r\n        <activity android:name=\".ui.Foro.lets_start.choose_community\" />\r\n        <activity android:name=\".ui.Foro.lets_start.welcome_forum\" />\r\n        <activity android:name=\".MainActivity\" />\r\n\r\n        <service android:name=\".ui.service.ServicioMqtt\" />\r\n\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\" />\r\n        <activity android:name=\".ui.profile.settings.HelpProfile\" />\r\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\" />\r\n        <activity android:name=\".ui.list_machine.AddMachine\" />\r\n        <activity android:name=\".ui.profile.settings.ModifyProfile\" />\r\n        <activity android:name=\".ui.logmail.RegisterActivity\" />\r\n        <activity android:name=\".ui.logmail.LoginActivity\" />\r\n        <activity android:name=\".ui.list_machine.CaptureAct\" />\r\n        <activity android:name=\".ui.login.LogActivity\" />\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\" />\r\n        <activity android:name=\".ui.LoadAnimations.LogprimeraActivity\" />\r\n        <activity android:name=\".ui.graphics.GraphicsActivity\" />\r\n        <activity android:name=\".ui.list_machine.ModifyMachine\" />\r\n\r\n        <meta-data\r\n            android:name=\"com.google.android.geo.API_KEY\"\r\n            android:value=\"@string/google_maps_key\" />\r\n        <meta-data\r\n            android:name=\"com.facebook.sdk.ApplicationId\"\r\n            android:value=\"@string/facebook_app_id\"\r\n            tools:replace=\"android:value\" />\r\n        <meta-data\r\n            android:name=\"preloaded_fonts\"\r\n            android:resource=\"@array/preloaded_fonts\" />\r\n\r\n        <activity\r\n            android:name=\"com.theartofdev.edmodo.cropper.CropImageActivity\"\r\n            android:theme=\"@style/Base.Theme.AppCompat\" />\r\n    </application>\r\n\r\n</manifest>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/AndroidManifest.xml	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
+++ app/src/main/AndroidManifest.xml	(date 1610497395822)
@@ -21,12 +21,8 @@
         android:label="@string/app_name"
         android:roundIcon="@mipmap/ic_launcher"
         android:theme="@style/AppThemeHome">
-        <activity android:name=".ui.list_machine.ModifyMachine"></activity>
-        <activity android:name=".ui.Foro.main.ForoMain" />
-        <activity android:name=".ui.Foro.lets_start.AddCommunity" />
-        <activity android:name=".ui.Foro.lets_start.choose_community" />
-        <activity android:name=".ui.Foro.lets_start.welcome_forum" />
-        <activity android:name=".MainActivity" />
+        <activity android:name=".ui.forum.lets_start.welcome_forum"></activity>
+        <activity android:name=".MainActivity"></activity>
 
         <service android:name=".ui.service.ServicioMqtt" />
 
@@ -37,11 +33,10 @@
                 <category android:name="android.intent.category.LAUNCHER" />
             </intent-filter>
         </activity>
-        <activity android:name=".ui.profile.settings.AboutInfinityCrap" />
-        <activity android:name=".ui.profile.settings.HelpProfile" />
+        <activity android:name=".ui.profile.settings.AboutInfinityCrap"></activity>
+        <activity android:name=".ui.profile.settings.HelpProfile"></activity>
         <activity android:name=".ui.list_machine.MainActivityMachineList" />
         <activity android:name=".ui.list_machine.AddMachine" />
-        <activity android:name=".ui.profile.settings.ModifyProfile" />
         <activity android:name=".ui.logmail.RegisterActivity" />
         <activity android:name=".ui.logmail.LoginActivity" />
         <activity android:name=".ui.list_machine.CaptureAct" />
@@ -50,6 +45,7 @@
         <activity android:name=".ui.LoadAnimations.LogprimeraActivity" />
         <activity android:name=".ui.graphics.GraphicsActivity" />
         <activity android:name=".ui.list_machine.ModifyMachine" />
+        <activity android:name=".ui.MachineControl.planta1" />
 
         <meta-data
             android:name="com.google.android.geo.API_KEY"
@@ -61,10 +57,6 @@
         <meta-data
             android:name="preloaded_fonts"
             android:resource="@array/preloaded_fonts" />
-
-        <activity
-            android:name="com.theartofdev.edmodo.cropper.CropImageActivity"
-            android:theme="@style/Base.Theme.AppCompat" />
     </application>
 
 </manifest>
\ No newline at end of file
Index: .idea/jarRepositories.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"RemoteRepositoriesConfiguration\">\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"central\" />\r\n      <option name=\"name\" value=\"Maven Central repository\" />\r\n      <option name=\"url\" value=\"https://repo1.maven.org/maven2\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"jboss.community\" />\r\n      <option name=\"name\" value=\"JBoss Community repository\" />\r\n      <option name=\"url\" value=\"https://repository.jboss.org/nexus/content/repositories/public/\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"BintrayJCenter\" />\r\n      <option name=\"name\" value=\"BintrayJCenter\" />\r\n      <option name=\"url\" value=\"https://jcenter.bintray.com/\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"Google\" />\r\n      <option name=\"name\" value=\"Google\" />\r\n      <option name=\"url\" value=\"https://dl.google.com/dl/android/maven2/\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"GitHubPackages\" />\r\n      <option name=\"name\" value=\"GitHubPackages\" />\r\n      <option name=\"url\" value=\"https://maven.pkg.github.com/Cuberto/liquid-swipe-android\" />\r\n    </remote-repository>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- .idea/jarRepositories.xml	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
+++ .idea/jarRepositories.xml	(date 1610497396033)
@@ -26,5 +26,10 @@
       <option name="name" value="GitHubPackages" />
       <option name="url" value="https://maven.pkg.github.com/Cuberto/liquid-swipe-android" />
     </remote-repository>
+    <remote-repository>
+      <option name="id" value="GitHubPackages" />
+      <option name="name" value="GitHubPackages" />
+      <option name="url" value="https://jitpack.io" />
+    </remote-repository>
   </component>
 </project>
\ No newline at end of file
Index: app/src/main/res/layout/fragment_general.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    tools:context=\".ui.dashboard.DashboardFragment\">\r\n\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:orientation=\"vertical\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\r\n\r\n        <RelativeLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginTop=\"10dp\"\r\n            android:layout_marginRight=\"20dp\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/textDashboardGeneral\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:text=\"Dashboard  >\"\r\n\r\n                android:textSize=\"19sp\" />\r\n\r\n            <TextView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/textDashboardGeneral\"\r\n                android:text=\"4 sensores\"\r\n\r\n                android:textSize=\"14sp\" />\r\n\r\n            <!--<ImageView\r\n                android:layout_width=\"62dp\"\r\n                android:layout_height=\"62dp\"\r\n                android:layout_alignParentRight=\"true\"\r\n                android:src=\"@drawable/ic_sun\" />-->\r\n        </RelativeLayout>\r\n        <GridLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:columnCount=\"2\"\r\n            android:rowCount=\"3\"\r\n            android:alignmentMode=\"alignMargins\"\r\n            android:columnOrderPreserved=\"false\">\r\n            <!--temperatura-->\r\n            <androidx.cardview.widget.CardView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_columnWeight=\"1\"\r\n                android:layout_rowWeight=\"1\"\r\n                app:cardElevation=\"6dp\"\r\n                app:cardCornerRadius=\"12dp\"\r\n                android:layout_marginBottom=\"12dp\"\r\n                android:layout_margin=\"12dp\"\r\n                >\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n\r\n                    android:orientation=\"vertical\"\r\n                    android:padding=\"2dp\">\r\n\r\n                    <androidx.constraintlayout.widget.ConstraintLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_marginBottom=\"12dp\"\r\n                        android:layout_height=\"match_parent\">\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textTemperaturaGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"8dp\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:text=\"Temperatura\"\r\n                            android:textSize=\"16sp\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchTemperaturaGeneral\"\r\n                            app:layout_constraintStart_toStartOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <Switch\r\n                            android:id=\"@+id/switchTemperaturaGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:layout_marginEnd=\"8dp\"\r\n                            android:buttonTint=\"#FFFFFF\"\r\n                            android:checked=\"true\"\r\n                            android:fitsSystemWindows=\"false\"\r\n                            android:textColorLink=\"#a0c63e\"\r\n                            android:textSize=\"8sp\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/medidaTemperaturaGeneral\"\r\n                            android:layout_width=\"90dp\"\r\n                            android:layout_height=\"39dp\"\r\n                            android:layout_marginTop=\"24dp\"\r\n                            android:text=\"34°C\"\r\n                            android:textSize=\"31sp\"\r\n                            app:layout_constraintStart_toStartOf=\"@+id/textTemperaturaGeneral\"\r\n                            app:layout_constraintTop_toBottomOf=\"@+id/textTemperaturaGeneral\" />\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/imgTemperaturaGeneral\"\r\n                            android:layout_width=\"53dp\"\r\n                            android:layout_height=\"55dp\"\r\n                            android:layout_marginEnd=\"1dp\"\r\n                            android:src=\"@drawable/icons_temperature\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaTemperaturaGeneral\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaTemperaturaGeneral\"\r\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaTemperaturaGeneral\" />\r\n                    </androidx.constraintlayout.widget.ConstraintLayout>\r\n                </LinearLayout>\r\n            </androidx.cardview.widget.CardView>\r\n            <!--humedad-->\r\n            <androidx.cardview.widget.CardView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_columnWeight=\"1\"\r\n                android:layout_rowWeight=\"1\"\r\n                app:cardElevation=\"6dp\"\r\n                app:cardCornerRadius=\"12dp\"\r\n                android:layout_marginBottom=\"12dp\"\r\n                android:layout_margin=\"12dp\"\r\n                >\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n\r\n                    android:orientation=\"vertical\"\r\n                    android:padding=\"2dp\">\r\n\r\n                    <androidx.constraintlayout.widget.ConstraintLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_marginBottom=\"12dp\"\r\n                        android:layout_height=\"match_parent\">\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textHumedadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"8dp\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:text=\"Humedad\"\r\n                            android:textSize=\"16sp\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchHumedadGeneral\"\r\n                            app:layout_constraintStart_toStartOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <Switch\r\n                            android:id=\"@+id/switchHumedadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:layout_marginEnd=\"8dp\"\r\n                            android:checked=\"true\"\r\n                            android:textColorLink=\"#a0c63e\"\r\n                            android:textSize=\"8sp\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/medidaHumedadGeneral\"\r\n                            android:layout_width=\"90dp\"\r\n                            android:layout_height=\"39dp\"\r\n                            android:layout_marginTop=\"24dp\"\r\n                            android:text=\"68%\"\r\n                            android:textSize=\"31sp\"\r\n                            app:layout_constraintStart_toStartOf=\"@+id/textHumedadGeneral\"\r\n                            app:layout_constraintTop_toBottomOf=\"@+id/textHumedadGeneral\" />\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/imgHumedadGeneral\"\r\n                            android:layout_width=\"53dp\"\r\n                            android:layout_height=\"55dp\"\r\n                            android:layout_marginEnd=\"1dp\"\r\n                            android:src=\"@drawable/icons_humidity\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaHumedadGeneral\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaHumedadGeneral\"\r\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaHumedadGeneral\" />\r\n                    </androidx.constraintlayout.widget.ConstraintLayout>\r\n                </LinearLayout>\r\n            </androidx.cardview.widget.CardView>\r\n            <!--salinidad-->\r\n            <androidx.cardview.widget.CardView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_columnWeight=\"1\"\r\n                android:layout_rowWeight=\"1\"\r\n                app:cardElevation=\"6dp\"\r\n                app:cardCornerRadius=\"12dp\"\r\n                android:layout_marginBottom=\"12dp\"\r\n                android:layout_margin=\"12dp\"\r\n                >\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n\r\n                    android:orientation=\"vertical\"\r\n                    android:padding=\"2dp\">\r\n\r\n                    <androidx.constraintlayout.widget.ConstraintLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_marginBottom=\"12dp\"\r\n                        android:layout_height=\"match_parent\">\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textSalinidadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"8dp\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:text=\"H. Ambiente\"\r\n                            android:textSize=\"16sp\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchSalinidadGeneral\"\r\n                            app:layout_constraintStart_toStartOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <Switch\r\n                            android:id=\"@+id/switchSalinidadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:layout_marginEnd=\"8dp\"\r\n                            android:checked=\"true\"\r\n                            android:textColorLink=\"#a0c63e\"\r\n                            android:textSize=\"8sp\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/medidaSalinidadGeneral\"\r\n                            android:layout_width=\"90dp\"\r\n                            android:layout_height=\"39dp\"\r\n                            android:layout_marginTop=\"24dp\"\r\n                            android:text=\"10%\"\r\n                            android:textSize=\"31sp\"\r\n                            app:layout_constraintStart_toStartOf=\"@+id/textSalinidadGeneral\"\r\n                            app:layout_constraintTop_toBottomOf=\"@+id/textSalinidadGeneral\" />\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/imgSalinidadGeneral\"\r\n                            android:layout_width=\"53dp\"\r\n                            android:layout_height=\"55dp\"\r\n                            android:layout_marginEnd=\"1dp\"\r\n                            android:src=\"@drawable/icons_humedad_ambiente\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaSalinidadGeneral\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaSalinidadGeneral\"\r\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaSalinidadGeneral\" />\r\n                    </androidx.constraintlayout.widget.ConstraintLayout>\r\n                </LinearLayout>\r\n            </androidx.cardview.widget.CardView>\r\n            <!--Luminosidad-->\r\n            <androidx.cardview.widget.CardView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_columnWeight=\"1\"\r\n                android:layout_rowWeight=\"1\"\r\n                app:cardElevation=\"6dp\"\r\n                app:cardCornerRadius=\"12dp\"\r\n                android:layout_marginBottom=\"12dp\"\r\n                android:layout_margin=\"12dp\"\r\n                >\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n\r\n                    android:orientation=\"vertical\"\r\n                    android:padding=\"2dp\">\r\n\r\n                    <androidx.constraintlayout.widget.ConstraintLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_marginBottom=\"12dp\"\r\n                        android:layout_height=\"match_parent\">\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textLuminosidadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"8dp\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:text=\"Luminosidad\"\r\n                            android:textSize=\"16sp\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchLuminosidadGeneral\"\r\n                            app:layout_constraintStart_toStartOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <Switch\r\n                            android:id=\"@+id/switchLuminosidadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:layout_marginEnd=\"8dp\"\r\n                            android:checked=\"true\"\r\n                            android:textColorHighlight=\"#FFFFFF\"\r\n                            android:textColorLink=\"#a0c63e\"\r\n                            android:textSize=\"8sp\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/medidasLuminosidadGeneral\"\r\n                            android:layout_width=\"90dp\"\r\n                            android:layout_height=\"39dp\"\r\n                            android:layout_marginTop=\"24dp\"\r\n                            android:text=\"90%\"\r\n                            android:textSize=\"31sp\"\r\n                            app:layout_constraintStart_toStartOf=\"@+id/textLuminosidadGeneral\"\r\n                            app:layout_constraintTop_toBottomOf=\"@+id/textLuminosidadGeneral\" />\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/imgLuminosidadGeneral\"\r\n                            android:layout_width=\"53dp\"\r\n                            android:layout_height=\"55dp\"\r\n                            android:layout_marginEnd=\"1dp\"\r\n                            android:src=\"@drawable/icons_luminosity\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidasLuminosidadGeneral\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintStart_toEndOf=\"@+id/medidasLuminosidadGeneral\"\r\n                            app:layout_constraintTop_toTopOf=\"@+id/medidasLuminosidadGeneral\" />\r\n                    </androidx.constraintlayout.widget.ConstraintLayout>\r\n                </LinearLayout>\r\n            </androidx.cardview.widget.CardView>\r\n\r\n\r\n\r\n\r\n        </GridLayout>\r\n\r\n    </LinearLayout>\r\n</ScrollView>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/fragment_general.xml	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
+++ app/src/main/res/layout/fragment_general.xml	(date 1610497395862)
@@ -35,6 +35,32 @@
 
                 android:textSize="14sp" />
 
+            <LinearLayout
+                android:layout_width="243dp"
+                android:layout_height="93dp"
+                android:layout_alignBottom="@id/textDashboardGeneral"
+                android:layout_alignParentTop="true"
+                android:layout_alignParentEnd="true"
+                android:layout_marginStart="25dp"
+                android:layout_marginTop="0dp"
+                android:layout_marginEnd="-9dp"
+                android:layout_marginBottom="-87dp"
+                android:layout_toEndOf="@+id/textDashboardGeneral"
+                android:orientation="vertical">
+
+                <Button
+                    android:id="@+id/btnMyMachine"
+                    android:layout_width="182dp"
+                    android:layout_height="38dp"
+                    android:layout_marginStart="0dp"
+                    android:layout_marginTop="1dp"
+                    android:layout_marginEnd="38dp"
+                    android:layout_marginBottom="-22dp"
+                    android:background="@drawable/btn_scan"
+                    android:textColor="@color/white"
+                    android:text="MI maquina" />
+            </LinearLayout>
+
             <!--<ImageView
                 android:layout_width="62dp"
                 android:layout_height="62dp"
