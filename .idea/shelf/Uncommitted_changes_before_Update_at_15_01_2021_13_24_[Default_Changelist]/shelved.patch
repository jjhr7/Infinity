Index: app/src/main/java/com/example/infinitycrop/ui/Foro/lets_start/choose_community.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.infinitycrop.ui.Foro.lets_start;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.Foro.lets_start.rv_community.CommunityAdapter;\r\nimport com.example.infinitycrop.ui.Foro.lets_start.rv_community.CommunityModel;\r\nimport com.example.infinitycrop.ui.list_machine.Adapter;\r\nimport com.example.infinitycrop.ui.list_machine.MachineModel;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\nimport com.google.android.material.bottomsheet.BottomSheetDialog;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.google.firebase.firestore.Query;\r\nimport com.google.firebase.firestore.ThrowOnExtraProperties;\r\nimport com.makeramen.roundedimageview.RoundedImageView;\r\nimport com.squareup.picasso.Picasso;\r\n\r\npublic class choose_community extends AppCompatActivity {\r\n\r\n    //1. declaro la variable del recyclerView\r\n    private RecyclerView mFirestoreList;\r\n    private RecyclerView communitiesRv;\r\n    //2. Firebase variables\r\n    private FirebaseFirestore firebaseFirestore;\r\n    private FirebaseAuth firebaseAuth;\r\n    private String uid;\r\n    //5. declaro viewHolder\r\n    private CommunityAdapter communityAdapter;\r\n    private CommunityAdapter communitiesAdapter;\r\n    //variables del layout\r\n    private ImageView btn_back;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_choose_community);\r\n\r\n        //1. initialice the ETE SETCH recyclerView\r\n        mFirestoreList=findViewById(R.id.myCommunity_list);\r\n        communitiesRv=findViewById(R.id.communities_list);\r\n        //2. firebase variables\r\n        firebaseFirestore=FirebaseFirestore.getInstance();\r\n        firebaseAuth=FirebaseAuth.getInstance();\r\n        uid=firebaseAuth.getUid();\r\n        //variables del layout\r\n        btn_back=findViewById(R.id.btn_back_welcome2);\r\n        //onClick\r\n        btn_back.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                finish();\r\n            }\r\n        });\r\n\r\n        //RV my communities\r\n\r\n        //3.Query\r\n        //3.1 saco todos los documentos\r\n        Query query= firebaseFirestore.collection(\"Community\")\r\n                .whereEqualTo(\"creator\",uid);\r\n\r\n        //4.Recycler optiones\r\n        FirestoreRecyclerOptions<CommunityModel> options=new FirestoreRecyclerOptions.Builder<CommunityModel>()\r\n                .setQuery(query,CommunityModel.class)\r\n                .build();\r\n\r\n        //5. View holder\r\n        communityAdapter=new CommunityAdapter(options);\r\n        mFirestoreList.setHasFixedSize(false);\r\n        mFirestoreList.setLayoutManager(new GridLayoutManager(this,4,GridLayoutManager.VERTICAL,false));\r\n        mFirestoreList.setAdapter(communityAdapter);\r\n\r\n       communityAdapter.setOnItemClickListener(new CommunityAdapter.OnItemClickListener() {\r\n           @Override\r\n           public void onItemClick(DocumentSnapshot documentSnapshot, int position) {\r\n               CommunityModel communityModel = documentSnapshot.toObject(CommunityModel.class);\r\n               final String id = documentSnapshot.getId();\r\n               //final String path = documentSnapshot.getString(\"name\");\r\n               //Toast.makeText(getApplicationContext(),id, Toast.LENGTH_LONG).show();\r\n               bottomSheetCommunity(communityModel,id,position);\r\n\r\n           }\r\n       });\r\n\r\n       //RV most popular communities\r\n\r\n        //3.Query\r\n        //3.1 saco todos los documentos\r\n        Query queryCommunities= firebaseFirestore.collection(\"Community\")\r\n                .orderBy(\"followers\",Query.Direction.DESCENDING)\r\n                .limit(30);\r\n\r\n        //4.Recycler optiones\r\n        FirestoreRecyclerOptions<CommunityModel> optionsCommunities=new FirestoreRecyclerOptions.Builder<CommunityModel>()\r\n                .setQuery(queryCommunities,CommunityModel.class)\r\n                .build();\r\n\r\n        //5. View holder\r\n        communitiesAdapter=new CommunityAdapter(optionsCommunities);\r\n        communitiesRv.setHasFixedSize(false);\r\n        communitiesRv.setLayoutManager(new GridLayoutManager(this,4,GridLayoutManager.VERTICAL,false));\r\n        communitiesRv.setAdapter(communitiesAdapter);\r\n\r\n        communitiesAdapter.setOnItemClickListener(new CommunityAdapter.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(DocumentSnapshot documentSnapshot, int position) {\r\n                CommunityModel communityModel = documentSnapshot.toObject(CommunityModel.class);\r\n                final String id = documentSnapshot.getId();\r\n                //final String path = documentSnapshot.getString(\"name\");\r\n                //Toast.makeText(getApplicationContext(),id, Toast.LENGTH_LONG).show();\r\n                bottomSheetCommunity(communityModel,id,position);\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        communityAdapter.startListening();\r\n        communitiesAdapter.startListening();\r\n    }\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        communityAdapter.stopListening();\r\n        communitiesAdapter.startListening();\r\n    }\r\n\r\n    private void bottomSheetCommunity(final CommunityModel communityModel, final String uiDocument, final int position){\r\n        final BottomSheetDialog bottomSheetDialog=new BottomSheetDialog(choose_community.this,R.style.BottomSheetDialogTheme);\r\n        bottomSheetDialog.setContentView(R.layout.bottom_sheet_community);\r\n        if(communityModel.getCreator().equals(\"pepe\")){ //cuando haces click sobre tu comunidad\r\n            //variables from the botomSheet layout\r\n            TextView name=bottomSheetDialog.findViewById(R.id.name_bS_community);\r\n            TextView name2=bottomSheetDialog.findViewById(R.id.name_bS_community2);\r\n            name.setText(communityModel.getName());\r\n            name2.setText(communityModel.getName());\r\n            RoundedImageView img=bottomSheetDialog.findViewById(R.id.img_bS_community);\r\n            Picasso.get().load(communityModel.getImg()).into(img);\r\n            TextView desc=bottomSheetDialog.findViewById(R.id.desc_bS_community);\r\n            desc.setText(communityModel.getDescription());\r\n            TextView posts=bottomSheetDialog.findViewById(R.id.num_posts);\r\n            String post= String.valueOf(communityModel.getPosts());\r\n            posts.setText(post);\r\n            TextView followers=bottomSheetDialog.findViewById(R.id.num_followers);\r\n            String followersString= String.valueOf(communityModel.getFollowers());\r\n            followers.setText(followersString);\r\n            //button follow , unfollow\r\n            final Button button=bottomSheetDialog.findViewById(R.id.btn_follow);\r\n            firebaseFirestore.collection(\"Foro user\").document(uid)\r\n                    .collection(\"Following\").document(uiDocument)\r\n                    .addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                        @Override\r\n                        public void onEvent(@Nullable DocumentSnapshot value, @Nullable FirebaseFirestoreException error) {\r\n                            if(value.exists()){\r\n                                button.setText(R.string.community_sheet_text5);\r\n                                button.setBackgroundResource(R.drawable.button_unfollow);\r\n                                button.setTextColor(getResources().getColor(R.color.black));\r\n                            }else{\r\n                                button.setText(R.string.community_sheet_text4);\r\n                            }\r\n                        }\r\n                    });\r\n            button.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    //ya es suscrito\r\n                    String textButton=button.getText().toString();\r\n                    String ifText=getResources().getString(R.string.community_sheet_text5);\r\n                    if(textButton.equals(ifText)){\r\n                        //eliminar de la coleccion following de Foro user\r\n                        communitiesAdapter.unFollow(position,uiDocument);\r\n                        communityAdapter.unFollow(position,uiDocument);\r\n                    }else{ //no esta suscrito\r\n                        //añadir comunidad a la coleccion Following\r\n                        communitiesAdapter.follow(position,uiDocument);\r\n                        communityAdapter.follow(position,uiDocument);\r\n                    }\r\n                    bottomSheetDialog.dismiss();\r\n                }\r\n            });\r\n            bottomSheetDialog.findViewById(R.id.btn_cancelBottomSheet).setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    bottomSheetDialog.dismiss();\r\n                }\r\n            });\r\n\r\n        }else if(communityModel.getCreator().equals(\"asfa\")){ //cuando hago click en otra comunidad\r\n            //variables from the botomSheet layout\r\n            TextView name=bottomSheetDialog.findViewById(R.id.name_bS_community);\r\n            TextView name2=bottomSheetDialog.findViewById(R.id.name_bS_community2);\r\n            name.setText(communityModel.getName());\r\n            name2.setText(communityModel.getName());\r\n            RoundedImageView img=bottomSheetDialog.findViewById(R.id.img_bS_community);\r\n            Picasso.get().load(communityModel.getImg()).into(img);\r\n            TextView desc=bottomSheetDialog.findViewById(R.id.desc_bS_community);\r\n            desc.setText(communityModel.getDescription());\r\n            TextView posts=bottomSheetDialog.findViewById(R.id.num_posts);\r\n            String post= String.valueOf(communityModel.getPosts());\r\n            posts.setText(post);\r\n            TextView followers=bottomSheetDialog.findViewById(R.id.num_followers);\r\n            String followersString= String.valueOf(communityModel.getFollowers());\r\n            followers.setText(followersString);\r\n            //button follow , unfollow\r\n            final Button button=bottomSheetDialog.findViewById(R.id.btn_follow);\r\n            firebaseFirestore.collection(\"Foro user\").document(uid)\r\n                    .collection(\"Following\").document(uiDocument)\r\n                    .addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                        @Override\r\n                        public void onEvent(@Nullable DocumentSnapshot value, @Nullable FirebaseFirestoreException error) {\r\n                            if(value.exists()){\r\n                                button.setText(R.string.community_sheet_text5);\r\n                                button.setBackgroundResource(R.drawable.button_unfollow);\r\n                                button.setTextColor(getResources().getColor(R.color.black));\r\n                            }else{\r\n                                button.setText(R.string.community_sheet_text4);\r\n                            }\r\n                        }\r\n                    });\r\n            button.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    //ya es suscrito\r\n                    String textButton=button.getText().toString();\r\n                    String ifText=getResources().getString(R.string.community_sheet_text5);\r\n                    if(textButton.equals(ifText)){\r\n                        //eliminar de la coleccion following de Foro user\r\n                        communitiesAdapter.unFollow(position,uiDocument);\r\n                        communityAdapter.unFollow(position,uiDocument);\r\n                    }else{ //no esta suscrito\r\n                        //añadir comunidad a la coleccion Following\r\n                        communitiesAdapter.follow(position,uiDocument);\r\n                        communityAdapter.follow(position,uiDocument);\r\n                    }\r\n                    bottomSheetDialog.dismiss();\r\n                }\r\n            });\r\n            bottomSheetDialog.findViewById(R.id.btn_cancelBottomSheet).setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    bottomSheetDialog.dismiss();\r\n                }\r\n            });\r\n        }\r\n        bottomSheetDialog.show();\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/infinitycrop/ui/Foro/lets_start/choose_community.java	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
+++ app/src/main/java/com/example/infinitycrop/ui/Foro/lets_start/choose_community.java	(date 1610374813296)
@@ -15,6 +15,7 @@
 import android.widget.TextView;
 import android.widget.Toast;
 
+import com.example.infinitycrop.MainActivity;
 import com.example.infinitycrop.R;
 import com.example.infinitycrop.ui.Foro.lets_start.rv_community.CommunityAdapter;
 import com.example.infinitycrop.ui.Foro.lets_start.rv_community.CommunityModel;
@@ -22,6 +23,7 @@
 import com.example.infinitycrop.ui.list_machine.MachineModel;
 import com.firebase.ui.firestore.FirestoreRecyclerOptions;
 import com.google.android.material.bottomsheet.BottomSheetDialog;
+import com.google.android.material.floatingactionbutton.FloatingActionButton;
 import com.google.firebase.auth.FirebaseAuth;
 import com.google.firebase.firestore.DocumentSnapshot;
 import com.google.firebase.firestore.EventListener;
@@ -46,6 +48,7 @@
     private CommunityAdapter communitiesAdapter;
     //variables del layout
     private ImageView btn_back;
+    private FloatingActionButton btn_addCommunity;
 
     @Override
     protected void onCreate(Bundle savedInstanceState) {
@@ -61,6 +64,7 @@
         uid=firebaseAuth.getUid();
         //variables del layout
         btn_back=findViewById(R.id.btn_back_welcome2);
+        btn_addCommunity=findViewById(R.id.button_add_community);
         //onClick
         btn_back.setOnClickListener(new View.OnClickListener() {
             @Override
@@ -68,6 +72,13 @@
                 finish();
             }
         });
+        btn_addCommunity.setOnClickListener(new View.OnClickListener() {
+            @Override
+            public void onClick(View v) {
+                Intent intent = new Intent(getApplicationContext(), AddCommunity.class);
+                startActivity(intent);
+            }
+        });
 
         //RV my communities
 
@@ -149,7 +160,7 @@
     private void bottomSheetCommunity(final CommunityModel communityModel, final String uiDocument, final int position){
         final BottomSheetDialog bottomSheetDialog=new BottomSheetDialog(choose_community.this,R.style.BottomSheetDialogTheme);
         bottomSheetDialog.setContentView(R.layout.bottom_sheet_community);
-        if(communityModel.getCreator().equals("pepe")){ //cuando haces click sobre tu comunidad
+        if(communityModel.getCreator().equals(uid)){ //cuando haces click sobre tu comunidad
             //variables from the botomSheet layout
             TextView name=bottomSheetDialog.findViewById(R.id.name_bS_community);
             TextView name2=bottomSheetDialog.findViewById(R.id.name_bS_community2);
@@ -167,35 +178,16 @@
             followers.setText(followersString);
             //button follow , unfollow
             final Button button=bottomSheetDialog.findViewById(R.id.btn_follow);
-            firebaseFirestore.collection("Foro user").document(uid)
-                    .collection("Following").document(uiDocument)
-                    .addSnapshotListener(new EventListener<DocumentSnapshot>() {
-                        @Override
-                        public void onEvent(@Nullable DocumentSnapshot value, @Nullable FirebaseFirestoreException error) {
-                            if(value.exists()){
-                                button.setText(R.string.community_sheet_text5);
-                                button.setBackgroundResource(R.drawable.button_unfollow);
-                                button.setTextColor(getResources().getColor(R.color.black));
-                            }else{
-                                button.setText(R.string.community_sheet_text4);
-                            }
-                        }
-                    });
+            button.setText(R.string.community_sheet_text7);
+            button.setBackgroundResource(R.drawable.button_action_machine);
+            button.setTextColor(getResources().getColor(R.color.colorPrimaryDashboard));
             button.setOnClickListener(new View.OnClickListener() {
                 @Override
                 public void onClick(View v) {
-                    //ya es suscrito
-                    String textButton=button.getText().toString();
-                    String ifText=getResources().getString(R.string.community_sheet_text5);
-                    if(textButton.equals(ifText)){
-                        //eliminar de la coleccion following de Foro user
-                        communitiesAdapter.unFollow(position,uiDocument);
-                        communityAdapter.unFollow(position,uiDocument);
-                    }else{ //no esta suscrito
-                        //añadir comunidad a la coleccion Following
-                        communitiesAdapter.follow(position,uiDocument);
-                        communityAdapter.follow(position,uiDocument);
-                    }
+                    //Intent modificar community
+                    Intent intent = new Intent(getBaseContext(), EditCommunity.class);
+                    intent.putExtra("community", uiDocument);
+                    startActivity(intent);
                     bottomSheetDialog.dismiss();
                 }
             });
@@ -206,8 +198,9 @@
                 }
             });
 
-        }else if(communityModel.getCreator().equals("asfa")){ //cuando hago click en otra comunidad
+        }else{ //cuando hago click en otra comunidad
             //variables from the botomSheet layout
+            final int suscriptores=communityModel.getFollowers();
             TextView name=bottomSheetDialog.findViewById(R.id.name_bS_community);
             TextView name2=bottomSheetDialog.findViewById(R.id.name_bS_community2);
             name.setText(communityModel.getName());
@@ -246,12 +239,10 @@
                     String ifText=getResources().getString(R.string.community_sheet_text5);
                     if(textButton.equals(ifText)){
                         //eliminar de la coleccion following de Foro user
-                        communitiesAdapter.unFollow(position,uiDocument);
-                        communityAdapter.unFollow(position,uiDocument);
+                        communitiesAdapter.unFollow(position,uiDocument,suscriptores);
                     }else{ //no esta suscrito
                         //añadir comunidad a la coleccion Following
-                        communitiesAdapter.follow(position,uiDocument);
-                        communityAdapter.follow(position,uiDocument);
+                        communitiesAdapter.follow(position,uiDocument,suscriptores);
                     }
                     bottomSheetDialog.dismiss();
                 }
Index: app/src/main/res/layout/activity_add_community.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.Foro.lets_start.AddCommunity\">\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_add_community.xml	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
+++ app/src/main/res/layout/activity_add_community.xml	(date 1610356720290)
@@ -1,9 +1,149 @@
 <?xml version="1.0" encoding="utf-8"?>
-<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
+<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:app="http://schemas.android.com/apk/res-auto"
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
+    android:background="#EFE9E9"
     tools:context=".ui.Foro.lets_start.AddCommunity">
 
-</androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
+    <androidx.constraintlayout.widget.ConstraintLayout
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content">
+
+        <RelativeLayout
+            android:id="@+id/relativeLayout4AddCommunity"
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content"
+            android:layout_marginStart="24dp"
+            android:layout_marginTop="34dp"
+            android:layout_marginEnd="24dp"
+            android:padding="12dp"
+            app:layout_constraintEnd_toEndOf="parent"
+            app:layout_constraintStart_toStartOf="parent"
+            app:layout_constraintTop_toTopOf="parent">
+
+
+            <TextView
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:layout_alignParentTop="false"
+                android:layout_centerHorizontal="true"
+                android:layout_centerVertical="true"
+                android:layout_marginLeft="16dp"
+                android:text="@string/editCommunity_text1"
+                android:textColor="#202020"
+                android:textSize="20sp" />
+
+            <ImageView
+                android:id="@+id/backToChooseCommunity"
+                android:layout_width="40dp"
+                android:layout_height="40dp"
+                android:layout_alignParentLeft="true"
+                android:layout_centerVertical="true"
+                android:src="@drawable/icons_arrow_left_green">
+
+            </ImageView>
+        </RelativeLayout>
+
+        <LinearLayout
+            android:id="@+id/linearLayout3"
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content"
+            android:layout_marginTop="8dp"
+            android:gravity="center"
+            android:orientation="vertical"
+            android:padding="5dp"
+            app:layout_constraintEnd_toEndOf="parent"
+            app:layout_constraintStart_toStartOf="parent"
+            app:layout_constraintTop_toBottomOf="@+id/relativeLayout4AddCommunity">
+
+            <com.makeramen.roundedimageview.RoundedImageView
+                android:id="@+id/img_bS_Addcommunity"
+                android:layout_width="120dp"
+                android:layout_height="120dp"
+                android:layout_margin="10dp"
+                android:scaleType="centerCrop"
+                android:src="@drawable/log_portada"
+                app:riv_corner_radius="10dp" />
+
+            <TextView
+                android:id="@+id/changeImg_addCommunity"
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:text="@string/editCommunity_text2"
+                android:textColor="@color/blue" />
+        </LinearLayout>
+
+        <LinearLayout
+            android:id="@+id/linearLayout4"
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content"
+            android:layout_marginTop="16dp"
+            android:orientation="vertical"
+            android:padding="20dp"
+            app:layout_constraintEnd_toEndOf="parent"
+            app:layout_constraintStart_toStartOf="parent"
+            app:layout_constraintTop_toBottomOf="@+id/linearLayout3">
+
+            <TextView
+                android:id="@+id/textView26"
+                android:layout_width="match_parent"
+                android:layout_height="wrap_content"
+                android:layout_marginBottom="8dp"
+                android:text="@string/editCommunity_text3" />
+
+            <EditText
+                android:id="@+id/input_name_addCommunity"
+                android:layout_width="match_parent"
+                android:layout_height="wrap_content"
+                android:ems="10"
+                android:inputType="textPersonName" />
+        </LinearLayout>
+
+        <LinearLayout
+            android:id="@+id/linearLayout"
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content"
+            android:layout_marginTop="8dp"
+            android:orientation="vertical"
+            android:padding="20dp"
+            app:layout_constraintEnd_toEndOf="parent"
+            app:layout_constraintHorizontal_bias="0.0"
+            app:layout_constraintStart_toStartOf="parent"
+            app:layout_constraintTop_toBottomOf="@+id/linearLayout4">
+
+            <TextView
+                android:id="@+id/textView27"
+                android:layout_width="match_parent"
+                android:layout_height="wrap_content"
+                android:layout_marginBottom="8dp"
+                android:text="@string/editCommunity_text5" />
+
+            <EditText
+                android:id="@+id/input_desc_addCommunity"
+                android:layout_width="match_parent"
+                android:layout_height="wrap_content"
+                android:ems="10"
+                android:gravity="start|top"
+                android:inputType="textMultiLine" />
+
+        </LinearLayout>
+
+        <Button
+            android:id="@+id/btn_createCommunity"
+            android:layout_width="0dp"
+            android:layout_height="wrap_content"
+            android:layout_marginTop="16dp"
+            android:layout_marginEnd="20dp"
+            android:layout_marginBottom="20dp"
+            android:background="@drawable/button_enter_machine"
+            android:text="@string/editCommunity_text6"
+            android:textColor="@color/white"
+            app:layout_constraintBottom_toBottomOf="parent"
+            app:layout_constraintEnd_toEndOf="parent"
+            app:layout_constraintTop_toBottomOf="@+id/linearLayout" />
+
+    </androidx.constraintlayout.widget.ConstraintLayout>
+
+</ScrollView>
\ No newline at end of file
Index: app/src/main/java/com/example/infinitycrop/ui/Foro/lets_start/rv_community/CommunityAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.infinitycrop.ui.Foro.lets_start.rv_community;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.cardview.widget.CardView;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.Adapter;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerAdapter;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.squareup.picasso.Picasso;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class CommunityAdapter extends FirestoreRecyclerAdapter<CommunityModel, CommunityAdapter.CommunityViewHolder> {\r\n    private OnItemClickListener listener;\r\n    private FirebaseFirestore db;\r\n    private FirebaseAuth firebaseAuth;\r\n    public CommunityAdapter(@NonNull FirestoreRecyclerOptions<CommunityModel> options) {\r\n        super(options);\r\n    }\r\n\r\n    @Override\r\n    protected void onBindViewHolder(@NonNull final CommunityViewHolder holder, int position, @NonNull CommunityModel model) {\r\n        holder.name_community.setText(model.getName());\r\n        Picasso.get().load(model.getImg()).into(holder.img_community);\r\n        DocumentSnapshot snapshot = getSnapshots().getSnapshot(holder.getAdapterPosition());\r\n        final String uid=snapshot.getId();\r\n        db=FirebaseFirestore.getInstance();\r\n        firebaseAuth=FirebaseAuth.getInstance();\r\n        String id=firebaseAuth.getUid();\r\n        db.collection(\"Foro user\").document(id).collection(\"Following\").document(uid)\r\n                .get().addOnCompleteListener(new OnCompleteListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<DocumentSnapshot> task) {\r\n                if (task.isSuccessful()) {\r\n                    DocumentSnapshot document = task.getResult();\r\n                    if (document.exists()) {\r\n                        holder.cardView_community.setBackgroundResource(R.color.colorPrimaryDashboard);\r\n                    }\r\n                } else {\r\n\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    public void unFollow(int posicion,String uiDocument){\r\n        db=FirebaseFirestore.getInstance();\r\n        firebaseAuth=FirebaseAuth.getInstance();\r\n        String id=firebaseAuth.getUid();\r\n        db.collection(\"Foro user\").document(id)\r\n                .collection(\"Following\").document(uiDocument).delete();\r\n        //actualizar RV\r\n        notifyItemChanged(posicion);\r\n    }\r\n    public void follow(int posicion,String uiDocument){\r\n        db=FirebaseFirestore.getInstance();\r\n        firebaseAuth=FirebaseAuth.getInstance();\r\n        String id=firebaseAuth.getUid();\r\n        Map<String, Object> data = new HashMap<>();\r\n        data.put(\"user id\", id);\r\n        db.collection(\"Foro user\").document(id)\r\n                .collection(\"Following\").document(uiDocument).set(data);\r\n        //actualizar RV\r\n        notifyItemChanged(posicion);\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public CommunityViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view= LayoutInflater.from(parent.getContext()).inflate(R.layout.community_item,parent,false);\r\n        return new CommunityViewHolder(view);\r\n    }\r\n\r\n    class CommunityViewHolder extends RecyclerView.ViewHolder{\r\n        protected TextView name_community;\r\n        protected TextView creator_community;\r\n        protected ImageView img_community;\r\n        protected CardView cardView_community;\r\n        public CommunityViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            name_community=itemView.findViewById(R.id.name_community);\r\n            img_community=itemView.findViewById(R.id.img_community);\r\n            cardView_community=itemView.findViewById(R.id.cardView_community);\r\n            itemView.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    int position=getAdapterPosition();\r\n                    if (position != RecyclerView.NO_POSITION && listener != null) {\r\n                        listener.onItemClick(getSnapshots().getSnapshot(position), position);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    public interface OnItemClickListener {\r\n        void onItemClick(DocumentSnapshot documentSnapshot, int position);\r\n    }\r\n    public void setOnItemClickListener(OnItemClickListener listener) {\r\n        this.listener = listener;\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/infinitycrop/ui/Foro/lets_start/rv_community/CommunityAdapter.java	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
+++ app/src/main/java/com/example/infinitycrop/ui/Foro/lets_start/rv_community/CommunityAdapter.java	(date 1610228484649)
@@ -38,7 +38,7 @@
     }
 
     @Override
-    protected void onBindViewHolder(@NonNull final CommunityViewHolder holder, int position, @NonNull CommunityModel model) {
+    protected void onBindViewHolder(@NonNull final CommunityViewHolder holder, int position, @NonNull final CommunityModel model) {
         holder.name_community.setText(model.getName());
         Picasso.get().load(model.getImg()).into(holder.img_community);
         DocumentSnapshot snapshot = getSnapshots().getSnapshot(holder.getAdapterPosition());
@@ -54,6 +54,8 @@
                     DocumentSnapshot document = task.getResult();
                     if (document.exists()) {
                         holder.cardView_community.setBackgroundResource(R.color.colorPrimaryDashboard);
+                    }else{
+                        holder.cardView_community.setBackgroundResource(R.color.white);
                     }
                 } else {
 
@@ -64,16 +66,20 @@
 
     }
 
-    public void unFollow(int posicion,String uiDocument){
+    public void unFollow(int posicion,String uiDocument,int followers){
         db=FirebaseFirestore.getInstance();
         firebaseAuth=FirebaseAuth.getInstance();
         String id=firebaseAuth.getUid();
         db.collection("Foro user").document(id)
                 .collection("Following").document(uiDocument).delete();
+        db.collection("Community").document(uiDocument)
+                .collection("Following").document(id).delete();
+        followers--;
+        db.collection("Community").document(uiDocument).update("followers",followers);
         //actualizar RV
         notifyItemChanged(posicion);
     }
-    public void follow(int posicion,String uiDocument){
+    public void follow(int posicion,String uiDocument,int followers){
         db=FirebaseFirestore.getInstance();
         firebaseAuth=FirebaseAuth.getInstance();
         String id=firebaseAuth.getUid();
@@ -81,6 +87,10 @@
         data.put("user id", id);
         db.collection("Foro user").document(id)
                 .collection("Following").document(uiDocument).set(data);
+        db.collection("Community").document(uiDocument)
+                .collection("Following").document(id).set(data);
+        followers++;
+        db.collection("Community").document(uiDocument).update("followers",followers);
         //actualizar RV
         notifyItemChanged(posicion);
     }
Index: github.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>gpr.usr = 61469172\ngpr.key = 72a0f63b7097b413e8ff78a7dd6ca9412aaf232c
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
--- github.properties	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
+++ github.properties	(date 1609365746853)
@@ -1,2 +1,2 @@
-gpr.usr = 61469172
-gpr.key = 72a0f63b7097b413e8ff78a7dd6ca9412aaf232c
\ No newline at end of file
+gpr.usr = 61473165
+gpr.key = 9671a8c2e26934b214e49dd99b96077296ee2aca
\ No newline at end of file
Index: app/src/main/res/layout/activity_choose_community.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"#EFE9E9\"\r\n    tools:context=\".ui.Foro.lets_start.choose_community\">\r\n\r\n\r\n<ScrollView\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\">\r\n\r\n    <androidx.constraintlayout.widget.ConstraintLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n        <androidx.constraintlayout.widget.ConstraintLayout\r\n            android:id=\"@+id/constraintLayout2\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"20dp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n\r\n            <ImageView\r\n                android:id=\"@+id/btn_back_welcome2\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"40dp\"\r\n                android:layout_marginStart=\"20dp\"\r\n                android:layout_marginTop=\"20dp\"\r\n                android:src=\"@drawable/icons_arrow_left_green\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/textView13\"\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginStart=\"20dp\"\r\n                android:layout_marginTop=\"20dp\"\r\n                android:text=\"@string/community_text1\"\r\n                android:textSize=\"24dp\"\r\n                android:textStyle=\"bold\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toBottomOf=\"@+id/btn_back_welcome2\" />\r\n\r\n            <ProgressBar\r\n                android:id=\"@+id/progressBar\"\r\n                style=\"@style/Widget.AppCompat.ProgressBar.Horizontal\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:layout_marginStart=\"20dp\"\r\n                android:layout_marginTop=\"16dp\"\r\n                android:layout_marginEnd=\"20dp\"\r\n                android:indeterminate=\"false\"\r\n                android:max=\"100\"\r\n                android:progress=\"60\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toBottomOf=\"@+id/textView13\" />\r\n        </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n\r\n        <TextView\r\n            android:id=\"@+id/textView19\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginEnd=\"20dp\"\r\n            android:text=\"@string/community_text2\"\r\n            android:textSize=\"20sp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/constraintLayout2\" />\r\n\r\n        <androidx.recyclerview.widget.RecyclerView\r\n            android:id=\"@+id/myCommunity_list\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:layout_marginTop=\"8dp\"\r\n            android:layout_marginEnd=\"20dp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/textView19\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/textView27\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:layout_marginTop=\"8dp\"\r\n            android:layout_marginEnd=\"20dp\"\r\n            android:text=\"@string/community_text3\"\r\n            android:textSize=\"20sp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/myCommunity_list\" />\r\n\r\n        <androidx.recyclerview.widget.RecyclerView\r\n            android:id=\"@+id/communities_list\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:layout_marginTop=\"8dp\"\r\n            android:layout_marginEnd=\"20dp\"\r\n            app:layout_constraintBottom_toBottomOf=\"parent\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/textView27\" />\r\n    </androidx.constraintlayout.widget.ConstraintLayout>\r\n</ScrollView>\r\n\r\n    <Button\r\n        android:id=\"@+id/btn_continue_2\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_alignParentStart=\"true\"\r\n        android:layout_alignParentBottom=\"true\"\r\n        android:layout_marginStart=\"20dp\"\r\n        android:layout_marginEnd=\"0dp\"\r\n        android:layout_marginBottom=\"20dp\"\r\n        android:layout_toStartOf=\"@+id/button_add_community\"\r\n        android:background=\"@drawable/button_enter_machine\"\r\n        android:text=\"@string/community_sheet_text6\"\r\n        android:textColor=\"@color/white\" />\r\n\r\n    <com.google.android.material.floatingactionbutton.FloatingActionButton\r\n        android:id=\"@+id/button_add_community\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_alignParentEnd=\"true\"\r\n        android:layout_alignParentBottom=\"true\"\r\n        android:layout_gravity=\"bottom|end\"\r\n        android:layout_marginStart=\"16dp\"\r\n        android:backgroundTint=\"#fff\"\r\n        android:layout_marginTop=\"16dp\"\r\n        android:layout_marginEnd=\"20dp\"\r\n        android:layout_marginBottom=\"20dp\"\r\n        android:src=\"@drawable/icons_add_community\" />\r\n</RelativeLayout>\r\n\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_choose_community.xml	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
+++ app/src/main/res/layout/activity_choose_community.xml	(date 1610359820544)
@@ -110,6 +110,7 @@
             android:layout_marginStart="20dp"
             android:layout_marginTop="8dp"
             android:layout_marginEnd="20dp"
+            android:layout_marginBottom="150dp"
             app:layout_constraintBottom_toBottomOf="parent"
             app:layout_constraintEnd_toEndOf="parent"
             app:layout_constraintStart_toStartOf="parent"
Index: app/src/main/res/values/strings.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><resources>\n    <string name=\"app_name\">Infinity Crop</string>\n    <string name=\"title_home\">Infinity Crop</string>\n    <string name=\"title_inicio\">Inicio</string>\n    <string name=\"title_dashboard\">Panel de control</string>\n    <string name=\"title_notifications\">Notificaciones</string>\n    <string name=\"title_wellcome_login\">¡Te damos la bienvenida!</string>\n    <string name=\"title_orderLog\">Inicia sesión</string>\n    <string name=\"title_cont_faceboock\">Iniciar sesión con Facebook</string>\n    <string name=\"title_cont_google\">Iniciar sesión con Google</string>\n    <string name=\"title_cont_mail\">Iniciar sesión con Email</string>\n\n    <string name=\"title_register\">Registrate</string>\n    <string name=\"title_bienv\">Hola de nuevo!</string>\n    <string name=\"title_bienvR\">¡Hola, es un placer!</string>\n    <string name=\"title_userR\">Introduce un correo:</string>\n    <string name=\"title_nameR\">Introduce un nombre:</string>\n    <string name=\"title_passwordR\">Introduce una contraseña:</string>\n    <string name=\"title_registrar\">Acceder</string>\n    <string name=\"btn_newuser\">Si no tienes una cuenta, puedes registarte <u>Aquí</u> </string>\n    <string name=\"title_olvidado\">He olvidado mi contraseña</string>\n    <!-- ANYADIR UNA NUEVA MAQUINA STRINGS -->\n    <string name=\"title_register_machine\">Registra una nueva máquina</string>\n    <string name=\"title_infoMachine\">Completa estos campos</string>\n    <string name=\"btn_registMachine\">Añadir máquina</string>\n    <string name=\"title_name_machine\">Introduce el nombre de tu máquina:</string>\n    <string name=\"title_name_model\">Modelo de tu máquina:</string>\n    <string name=\"title_name_favorites\">Añadir tu máquina a favoritos</string>\n    <string name=\"title_scan_machine\">Escanear máquina</string>\n\n\n    <!-- TODO: Remove or change this placeholder text -->\n\n    <string name=\"change_city\">Change city</string>\n\n    <!-- Put your own APP ID here -->\n    <string name=\"open_weather_maps_app_id\">11111</string>\n\n    <string name=\"weather_sunny\">&#xf00d;</string>\n    <string name=\"weather_clear_night\">&#xf02e;</string>\n\n    <string name=\"weather_foggy\">&#xf014;</string>\n    <string name=\"weather_cloudy\">&#xf013;</string>\n    <string name=\"weather_rainy\">&#xf019;</string>\n    <string name=\"weather_snowy\">&#xf01b;</string>\n    <string name=\"weather_thunder\">&#xf01e;</string>\n    <string name=\"weather_drizzle\">&#xf01c;</string>\n\n    <string name=\"place_not_found\">Sorry, no weather data found.</string>\n    <string name=\"facebook_app_id\">140146287567868</string>\n    <string name=\"fb_login_protocol_scheme\">fb140146287567868</string>\n    <!-- TODO: Remove or change this placeholder text -->\n    <string name=\"hello_blank_fragment\">Hello blank fragment</string>\n\n\n    <!-- foro -->\n    <!-- welcome user -->\n    <string name=\"welcome_text1\">Vamos a empezar...</string>\n    <string name=\"welcome_text2\">Bienvenido al</string>\n    <string name=\"welcome_text3\"> <b>Foro</b> de <i>Infinity Crop</i></string>\n    <string name=\"welcome_text4\">Continuar como</string>\n    <string name=\"welcome_text5\">Cambiar imagen</string>\n    <string name=\"welcome_text6\">Nombre del usuario: </string>\n    <string name=\"welcome_text7\">Continuar </string>\n    <string name=\"welcome_text8\">Descripción (opcional): </string>ç\n    <!-- choose community -->\n    <string name=\"community_text1\">Uno más y hemos terminado...</string>\n    <string name=\"community_text2\"><b>Tus comunidadades</b></string>\n    <string name=\"community_text3\"><b>Lo más popular</b></string>\n    <!-- choose community -> bottom Sheet community -->\n    <string name=\"community_sheet_text1\">Posts</string>\n    <string name=\"community_sheet_text2\">Followers</string>\n    <string name=\"community_sheet_text3\">Cancelar</string>\n    <string name=\"community_sheet_text4\">Suscribirse</string>\n    <string name=\"community_sheet_text5\">Dejar de seguir</string>\n    <string name=\"community_sheet_text6\">Finalizar</string>\n\n</resources>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/values/strings.xml	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
+++ app/src/main/res/values/strings.xml	(date 1610365441180)
@@ -74,5 +74,15 @@
     <string name="community_sheet_text4">Suscribirse</string>
     <string name="community_sheet_text5">Dejar de seguir</string>
     <string name="community_sheet_text6">Finalizar</string>
-
+    <string name="community_sheet_text7">Editar</string>
+    <!-- addCommunity  -->
+    <string name="editCommunity_text1">Crear communidad</string>
+    <string name="editCommunity_text2"><b>Cambiar imagen</b></string>
+    <string name="editCommunity_text3">Nombre (obligatorio)</string>
+    <string name="editCommunity_text4">Nombre</string>
+    <string name="editCommunity_text5">Descripción (opcional)</string>
+    <string name="editCommunity_text6">Guardar</string>
+    <!-- EditCommunity  -->
+    <string name="editCommunity_text7">Editar Communidad</string>
+    <string name="editCommunity_text8">Guardar cambios</string>
 </resources>
\ No newline at end of file
Index: app/src/main/AndroidManifest.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    package=\"com.example.infinitycrop\">\n\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\n    <uses-permission android:name=\"android.permission.INTERNET\" />\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" /> <!-- Permisos Qr -->\n    <uses-permission android:name=\"android.permission.CAMERA\" />\n\n    <uses-feature android:name=\"android.hardware.camera\" />\n    <uses-feature android:name=\"android.hardware.camera.autofocus\" />\n\n    <application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher\"\n        android:theme=\"@style/AppThemeHome\">\n        <activity android:name=\".ui.list_machine.ModifyMachine\"></activity>\n        <activity android:name=\".ui.Foro.main.ForoMain\" />\n        <activity android:name=\".ui.Foro.lets_start.AddCommunity\" />\n        <activity android:name=\".ui.Foro.lets_start.choose_community\" />\n        <activity android:name=\".ui.Foro.lets_start.welcome_forum\" />\n        <activity android:name=\".MainActivity\" />\n\n        <service android:name=\".ui.service.ServicioMqtt\" />\n\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity\">\n            <intent-filter>\n                <action android:name=\"android.intent.action.MAIN\" />\n\n                <category android:name=\"android.intent.category.LAUNCHER\" />\n            </intent-filter>\n        </activity>\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\" />\n        <activity android:name=\".ui.profile.settings.HelpProfile\" />\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\" />\n        <activity android:name=\".ui.list_machine.AddMachine\" />\n        <activity android:name=\".ui.profile.settings.ModifyProfile\" />\n        <activity android:name=\".ui.logmail.RegisterActivity\" />\n        <activity android:name=\".ui.logmail.LoginActivity\" />\n        <activity android:name=\".ui.list_machine.CaptureAct\" />\n        <activity android:name=\".ui.login.LogActivity\" />\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\" />\n        <activity android:name=\".ui.LoadAnimations.LogprimeraActivity\" />\n        <activity android:name=\".ui.graphics.GraphicsActivity\" />\n        <activity android:name=\".ui.list_machine.ModifyMachine\" />\n\n        <meta-data\n            android:name=\"com.google.android.geo.API_KEY\"\n            android:value=\"@string/google_maps_key\" />\n        <meta-data\n            android:name=\"com.facebook.sdk.ApplicationId\"\n            android:value=\"@string/facebook_app_id\"\n            tools:replace=\"android:value\" />\n        <meta-data\n            android:name=\"preloaded_fonts\"\n            android:resource=\"@array/preloaded_fonts\" />\n\n        <activity\n            android:name=\"com.theartofdev.edmodo.cropper.CropImageActivity\"\n            android:theme=\"@style/Base.Theme.AppCompat\" />\n    </application>\n\n</manifest>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/AndroidManifest.xml	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
+++ app/src/main/AndroidManifest.xml	(date 1610364270532)
@@ -21,7 +21,8 @@
         android:label="@string/app_name"
         android:roundIcon="@mipmap/ic_launcher"
         android:theme="@style/AppThemeHome">
-        <activity android:name=".ui.list_machine.ModifyMachine"></activity>
+        <activity android:name=".ui.Foro.lets_start.EditCommunity"></activity>
+        <activity android:name=".ui.list_machine.ModifyMachine" />
         <activity android:name=".ui.Foro.main.ForoMain" />
         <activity android:name=".ui.Foro.lets_start.AddCommunity" />
         <activity android:name=".ui.Foro.lets_start.choose_community" />
Index: app/src/main/java/com/example/infinitycrop/ui/Foro/lets_start/AddCommunity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.infinitycrop.ui.Foro.lets_start;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport com.example.infinitycrop.R;\r\n\r\npublic class AddCommunity extends AppCompatActivity {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_add_community);\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/infinitycrop/ui/Foro/lets_start/AddCommunity.java	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
+++ app/src/main/java/com/example/infinitycrop/ui/Foro/lets_start/AddCommunity.java	(date 1610375353677)
@@ -1,16 +1,211 @@
 package com.example.infinitycrop.ui.Foro.lets_start;
 
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
 import androidx.appcompat.app.AppCompatActivity;
 
+import android.app.Activity;
+import android.content.Intent;
+import android.graphics.Bitmap;
+import android.net.Uri;
 import android.os.Bundle;
+import android.view.View;
+import android.widget.Button;
+import android.widget.EditText;
+import android.widget.ImageView;
+import android.widget.TextView;
+import android.widget.Toast;
 
 import com.example.infinitycrop.R;
+import com.example.infinitycrop.ui.Foro.lets_start.rv_community.CommunityModel;
+import com.google.android.gms.tasks.Continuation;
+import com.google.android.gms.tasks.OnCompleteListener;
+import com.google.android.gms.tasks.OnFailureListener;
+import com.google.android.gms.tasks.OnSuccessListener;
+import com.google.android.gms.tasks.Task;
+import com.google.firebase.auth.FirebaseAuth;
+import com.google.firebase.auth.FirebaseUser;
+import com.google.firebase.firestore.DocumentReference;
+import com.google.firebase.firestore.FirebaseFirestore;
+import com.google.firebase.firestore.QueryDocumentSnapshot;
+import com.google.firebase.firestore.QuerySnapshot;
+import com.google.firebase.storage.FirebaseStorage;
+import com.google.firebase.storage.StorageReference;
+import com.google.firebase.storage.UploadTask;
+import com.squareup.picasso.Picasso;
+import com.theartofdev.edmodo.cropper.CropImage;
+import com.theartofdev.edmodo.cropper.CropImageView;
+
+import java.io.ByteArrayOutputStream;
+import java.io.File;
+import java.io.IOException;
+import java.util.HashMap;
+import java.util.Map;
+
+import id.zelory.compressor.Compressor;
 
 public class AddCommunity extends AppCompatActivity {
 
+    //layout variables
+    private EditText input_name;
+    private TextView change_img;
+    private EditText input_desc;
+    private ImageView img_addCommunity;
+    private ImageView btn_back;
+    private Button btn_create;
+    private String name;
+    //firebase variables
+    private FirebaseUser usuario;
+    private FirebaseFirestore db;
+    private DocumentReference documentReference;
+    private StorageReference mStorageRef;
+    private String id;
+    //change image variables
+    private String image_url;
+    private Bitmap thumb_bitmap;
+    private byte[] thumb_byte;
     @Override
     protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_add_community);
+
+        //layout variables
+        input_name=findViewById(R.id.input_name_addCommunity);
+        input_desc=findViewById(R.id.input_desc_addCommunity);
+        change_img=findViewById(R.id.changeImg_addCommunity);
+        img_addCommunity=findViewById(R.id.img_bS_Addcommunity);
+        btn_back=findViewById(R.id.backToChooseCommunity);
+        btn_create=findViewById(R.id.btn_createCommunity);
+        //change img variables
+        thumb_bitmap=null;
+        image_url="";
+        //firebase variables
+        usuario = FirebaseAuth.getInstance().getCurrentUser();
+        db= FirebaseFirestore.getInstance();
+        mStorageRef = FirebaseStorage.getInstance().getReference();
+        id=usuario.getUid();
+        mStorageRef.child("foro/user/Default/default.jpg").getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {
+            @Override
+            public void onSuccess(Uri uri) {
+                // Got the download URL for 'users/me/profile.png'
+                Picasso.get().load(uri).into(img_addCommunity);
+                image_url=uri.toString();
+            }
+        }).addOnFailureListener(new OnFailureListener() {
+            @Override
+            public void onFailure(@NonNull Exception exception) {
+                // Handle any errors
+            }
+        });
+        //Onclick
+        btn_back.setOnClickListener(new View.OnClickListener() {
+            @Override
+            public void onClick(View v) {
+                finish();
+            }
+        });
+        change_img.setOnClickListener(new View.OnClickListener() {
+            @Override
+            public void onClick(View v) {
+                if(input_name.getText().toString().equals("")){
+                    Toast.makeText(getApplicationContext(),"Indique un nombre valido",Toast.LENGTH_LONG).show();
+                }else{
+                    CropImage.startPickImageActivity(AddCommunity.this);
+                }
+            }
+        });
+        btn_create.setOnClickListener(new View.OnClickListener() {
+            @Override
+            public void onClick(View v) {
+                name=input_name.getText().toString();
+                if(name.equals("")){
+                    Toast.makeText(getApplicationContext(),"Indique un nombre valido",Toast.LENGTH_LONG).show();
+                }else{
+                    NameIsUsed();
+                }
+            }
+        });
+    }
+
+    public void NameIsUsed(){
+        db.collection("Community")
+                .whereEqualTo("name", name)
+                .get()
+                .addOnCompleteListener(new OnCompleteListener<QuerySnapshot>() {
+                    @Override
+                    public void onComplete(@NonNull Task<QuerySnapshot> task) {
+                        if (task.isSuccessful()) {
+                            QuerySnapshot document = task.getResult();
+                            if (document.size()>=1) {
+                                Toast.makeText(getApplicationContext(),"El nombre ya existe",Toast.LENGTH_LONG).show();
+                            } else {
+                                saveCommunity();
+                            }
+                        } else {
+
+                        }
+                    }
+                });
+    }
+
+    @Override
+    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {
+        super.onActivityResult(requestCode, resultCode, data);
+
+        if(requestCode==CropImage.PICK_IMAGE_CHOOSER_REQUEST_CODE && resultCode == Activity.RESULT_OK){
+            Uri imageuri=CropImage.getPickImageResultUri(this,data);
+            //recortar imagen
+            CropImage.activity(imageuri)
+                    .setGuidelines(CropImageView.Guidelines.ON)
+                    .start(AddCommunity.this);
+        }
+        if(requestCode==CropImage.CROP_IMAGE_ACTIVITY_REQUEST_CODE){
+            CropImage.ActivityResult result=CropImage.getActivityResult(data);
+            if(resultCode==RESULT_OK){
+                Uri resultUri=result.getUri();
+                File url=new File(resultUri.getPath());
+                Picasso.get().load(url).into(img_addCommunity);
+                //comprimir imagen
+                try{
+                    thumb_bitmap=new Compressor(this)
+                            .setQuality(90)
+                            .compressToBitmap(url);
+                }catch (IOException e){
+                    e.printStackTrace();
+                }
+                ByteArrayOutputStream byteArrayOutputStream=new ByteArrayOutputStream();
+                thumb_bitmap.compress(Bitmap.CompressFormat.JPEG,90,byteArrayOutputStream);
+                 thumb_byte= byteArrayOutputStream.toByteArray();
+                //save img in storage
+                name=input_name.getText().toString();
+                String urlStorage="foro/user/"+id+"/community";
+                final StorageReference ref = mStorageRef.child(urlStorage).child(name);
+                UploadTask uploadTask=ref.putBytes(thumb_byte);
+                //subit imagen storage
+                Task<Uri> uriTask=uploadTask.continueWithTask(new Continuation<UploadTask.TaskSnapshot, Task<Uri>>() {
+                    @Override
+                    public Task<Uri> then(@NonNull Task<UploadTask.TaskSnapshot> task) throws Exception {
+                        return ref.getDownloadUrl();
+                    }
+                }).addOnCompleteListener(new OnCompleteListener<Uri>() {
+                    @Override
+                    public void onComplete(@NonNull Task<Uri> task) {
+                        Uri dowloadUri=task.getResult();
+                        image_url=dowloadUri.toString();
+                    }
+                });
+            }
+        }
+    }
+
+
+    public void saveCommunity(){
+        name=input_name.getText().toString();
+        //create the community document
+        CommunityModel communityModel=
+                new CommunityModel(image_url,name,input_desc.getText().toString(),id,0,false,0);
+        db.collection("Community").add(communityModel);
+
+        finish();
     }
 }
\ No newline at end of file
