Index: app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.infinitycrop.ui.profile;\r\n\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.graphics.Bitmap;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.util.LruCache;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.android.volley.RequestQueue;\r\nimport com.android.volley.toolbox.ImageLoader;\r\nimport com.android.volley.toolbox.NetworkImageView;\r\nimport com.android.volley.toolbox.Volley;\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.MainActivityMachineList;\r\nimport com.example.infinitycrop.ui.login.LogActivity;\r\nimport com.example.infinitycrop.ui.profile.settings.AboutInfinityCrap;\r\nimport com.example.infinitycrop.ui.profile.settings.HelpProfile;\r\nimport com.example.infinitycrop.ui.profile.settings.ModifyProfile;\r\nimport com.firebase.ui.auth.AuthUI;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link ProfileFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class ProfileFragment extends Fragment {\r\n    //atributos para confirmación de correo\r\n    private FirebaseUser us;\r\n    private TextView txtverf;\r\n    private Button btnconf;\r\n\r\n\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public ProfileFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment ProfileFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static ProfileFragment newInstance(String param1, String param2) {\r\n        ProfileFragment fragment = new ProfileFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_profile, container, false);\r\n\r\n        ImageView irAPerfil =v.findViewById(R.id.irAEditarPerfil);\r\n        irAPerfil.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), ModifyProfile.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n        //Enlaces de los botones de configuracion\r\n        //personalice colors\r\n        RelativeLayout customColors_btn =v.findViewById(R.id.relativeLayout4);\r\n        customColors_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n            }\r\n        });\r\n        //about us\r\n        RelativeLayout aboutInfinity_btn =v.findViewById(R.id.relativeLayout6);\r\n        aboutInfinity_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), AboutInfinityCrap.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        //help\r\n        RelativeLayout help_profile =v.findViewById(R.id.relativeLayout5);\r\n        help_profile.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), HelpProfile.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        //firebase\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=mAuth.getCurrentUser().getUid();\r\n        final GoogleSignInClient mGoogleSignInClient;\r\n        GoogleSignInOptions gso;\r\n        final FirebaseUser usuario = FirebaseAuth.getInstance().getCurrentUser();\r\n        //guardo la imagen en un ImagenView\r\n        final ImageView img = (ImageView) v.findViewById(R.id.profile);\r\n        //guardo el nombre en un textView\r\n        final TextView nombre = (TextView) v.findViewById(R.id.username);\r\n        nombre.setText(usuario.getDisplayName());\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(nombre.getText() == \"\"){\r\n                    nombre.setText(snapshot.getString(\"username\"));\r\n                    img.setImageResource(R.drawable.icons_user);\r\n                }\r\n            }\r\n        });\r\n\r\n        //guardo el mail en un textView\r\n        TextView correo = (TextView) v.findViewById(R.id.mailUser);\r\n        correo.setText(usuario.getEmail());\r\n        //cargar imágen con glide:\r\n        Glide.with(this).load(usuario.getPhotoUrl()).into(img);\r\n        //boton cerrar sesion\r\n\r\n        //Configurar las gso para google signIn con el fin de luego desloguear de google\r\n        gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestIdToken(getString(R.string.default_web_client_id))\r\n                .requestEmail()\r\n                .build();\r\n        mGoogleSignInClient = GoogleSignIn.getClient(getActivity(), gso);\r\n\r\n        RelativeLayout cerrarSesion =(RelativeLayout) v.findViewById(R.id.btn_end_session);\r\n        cerrarSesion.setOnClickListener(new View.OnClickListener() {\r\n            public void onClick(View view) {\r\n                new AlertDialog.Builder(requireContext())\r\n                        .setTitle(\"Cerrar sesión\")\r\n                        .setMessage(\"¿Estas seguro que quieres cerrar sesión?\")\r\n                        .setPositiveButton(\"Confirmar\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n                                //Cerrar session con Firebase\r\n                                mAuth.signOut();\r\n                                //Cerrar sesión con google tambien: Google sign out\r\n                                mGoogleSignInClient.signOut().addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                                    @Override\r\n                                    public void onComplete(@NonNull Task<Void> task) {\r\n                                        //Abrir MainActivity con SigIn button\r\n                                        if(task.isSuccessful()){\r\n                                            Intent logActivity = new Intent(getActivity().getApplicationContext(), LogActivity.class);\r\n                                            startActivity(logActivity);\r\n                                            getActivity().finish();\r\n                                        }else{\r\n                                            Toast.makeText(getActivity().getApplicationContext(), \"No se pudo cerrar sesión con google\",\r\n                                                    Toast.LENGTH_LONG).show();\r\n                                        }\r\n                                    }\r\n                                });\r\n\r\n                            }\r\n                        })\r\n                        .setNegativeButton(\"Cancelar\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                            }\r\n                        })\r\n                        .show();\r\n\r\n\r\n            }\r\n        });\r\n\r\n        //Confirmación de verificación de correo\r\n        TextView txtverify = (TextView) v.findViewById(R.id.txtVerif);\r\n        Button btnverify = (Button) v.findViewById(R.id.btnverif);\r\n        final FirebaseUser user = mAuth.getCurrentUser();\r\n        if(!user.isEmailVerified()){\r\n            us=user;\r\n            txtverf = txtverify;\r\n            btnconf = btnverify;\r\n\r\n            txtverify.setVisibility(View.VISIBLE);\r\n            btnverify.setVisibility(View.VISIBLE);\r\n\r\n            btnverify.setOnClickListener(new View.OnClickListener()\r\n            {\r\n                @Override\r\n                public void onClick(final View v)\r\n                {\r\n\r\n                    FirebaseUser user = mAuth.getCurrentUser();\r\n                    user.sendEmailVerification().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            Toast.makeText(getActivity(),\"Enviando correo de confirmación\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n\r\n                            Toast.makeText(getActivity(),\"Error en el envío de correo\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            /*}else{\r\n            txtverify.setVisibility(View.GONE);\r\n            btnverify.setVisibility(View.GONE);*/\r\n        }\r\n        /*RequestQueue colaPeticiones = Volley.newRequestQueue(getActivity()\r\n                .getApplicationContext());\r\n        ImageLoader lectorImagenes = new ImageLoader(colaPeticiones,\r\n                new ImageLoader.ImageCache() {\r\n                    private final LruCache<String, Bitmap> cache =\r\n                            new LruCache<String, Bitmap>(10);\r\n                    public void putBitmap(String url, Bitmap bitmap) {\r\n                        cache.put(url, bitmap);\r\n                    }\r\n                    public Bitmap getBitmap(String url) {\r\n                        return cache.get(url);\r\n                    }\r\n                });\r\n        Uri urlImagen = usuario.getPhotoUrl();\r\n        if (urlImagen != null) {\r\n            NetworkImageView fotoUsuario = (NetworkImageView)\r\n                    v.findViewById(R.id.profile);\r\n            fotoUsuario.setImageUrl(urlImagen.toString(), lectorImagenes);\r\n        }else{\r\n            NetworkImageView fotoUsuario = (NetworkImageView)\r\n                    v.findViewById(R.id.profile);\r\n            fotoUsuario.setImageUrl(String.valueOf(R.drawable.icons_user), lectorImagenes);\r\n        }*/\r\n        return v;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java	(revision 3eb9f21b60ebfff51498bfb1b27f941eaf3f6559)
+++ app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java	(date 1609175744817)
@@ -32,7 +32,7 @@
 import com.example.infinitycrop.ui.login.LogActivity;
 import com.example.infinitycrop.ui.profile.settings.AboutInfinityCrap;
 import com.example.infinitycrop.ui.profile.settings.HelpProfile;
-import com.example.infinitycrop.ui.profile.settings.ModifyProfile;
+/*import com.example.infinitycrop.ui.profile.settings.ModifyProfile;*/
 import com.firebase.ui.auth.AuthUI;
 import com.google.android.gms.auth.api.signin.GoogleSignIn;
 import com.google.android.gms.auth.api.signin.GoogleSignInClient;
@@ -112,8 +112,8 @@
         irAPerfil.setOnClickListener(new View.OnClickListener() {
             @Override
             public void onClick(View v) {
-                Intent intent = new Intent(getActivity(), ModifyProfile.class);
-                startActivity(intent);
+              /*  Intent intent = new Intent(getActivity(), ModifyProfile.class);
+                startActivity(intent);*/
             }
         });
 
Index: comun/src/main/java/com/example/comun/Mqtt.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.comun;\r\n\r\npublic class Mqtt {\r\n    public static final String TAG = \"MQTT\";\r\n    public static final String topicRoot=\"infinity/senyal/\";\r\n\r\n\r\n    //Reemplaza equipo por el nombre de tu equipo de prácticas\r\n    public static final int qos = 1;\r\n    public static final String broker = \"tcp://broker.hivemq.com:1883\";\r\n    public static final String clientId = \"IotTestInfinity123434\";\r\n//Reemplaza ClientId con un valor diferente\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- comun/src/main/java/com/example/comun/Mqtt.java	(revision 3eb9f21b60ebfff51498bfb1b27f941eaf3f6559)
+++ comun/src/main/java/com/example/comun/Mqtt.java	(date 1609175420200)
@@ -8,6 +8,6 @@
     //Reemplaza equipo por el nombre de tu equipo de prácticas
     public static final int qos = 1;
     public static final String broker = "tcp://broker.hivemq.com:1883";
-    public static final String clientId = "IotTestInfinity123434";
+    public static final String clientId = "IotTestInfinity1234";
 //Reemplaza ClientId con un valor diferente
 }
\ No newline at end of file
