Index: app/src/main/java/com/example/infinitycrop/ui/Foro/main/Profile/ProfileForoFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.infinitycrop.ui.Foro.main.Profile;\r\n\r\nimport android.app.Activity;\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.Foro.main.Community.NewPost.CreatePost.CreatePost;\r\nimport com.example.infinitycrop.ui.MachineControl.planta1;\r\nimport com.google.android.gms.tasks.Continuation;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.Timestamp;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\nimport com.squareup.picasso.Picasso;\r\nimport com.theartofdev.edmodo.cropper.CropImage;\r\nimport com.theartofdev.edmodo.cropper.CropImageView;\r\n\r\nimport java.io.File;\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.HashSet;\r\nimport java.util.Map;\r\nimport java.util.UUID;\r\n\r\nimport static android.app.Activity.RESULT_OK;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link ProfileForoFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class ProfileForoFragment extends Fragment {\r\n    private StorageReference mStorageRef;\r\n    private String image_url;\r\n    private FirebaseFirestore db;\r\n    private FirebaseAuth firebaseAuth;\r\n    private String uid;\r\n    private String Nuser;\r\n    Button btnEdit,btnSave;\r\n    EditText txtNamep,descriptionP;\r\n    ImageView imgP;\r\n    ImageView lapiz1,lapiz2,lapiz3;\r\n    TextView txtPost,txtFollow;\r\n    LinearLayout l1p;\r\n    private  Uri resultUri;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public ProfileForoFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment ProfileForoFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static ProfileForoFragment newInstance(String param1, String param2) {\r\n        ProfileForoFragment fragment = new ProfileForoFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n\r\n        // Inflate the layout for this fragment\r\n        final View root = inflater.inflate(R.layout.fragment_profile_foro, container, false);\r\n        db = FirebaseFirestore.getInstance();\r\n        firebaseAuth = FirebaseAuth.getInstance();\r\n        uid = firebaseAuth.getUid();\r\n        //Declaracion de los elementos\r\n        lapiz1 = root.findViewById(R.id.pencil1);\r\n        lapiz2 = root.findViewById(R.id.pencil2);\r\n        lapiz3 = root.findViewById(R.id.pencil3);\r\n        l1p = root.findViewById(R.id.layout1P);\r\n        imgP = root.findViewById(R.id.imgP);\r\n        imgP.setEnabled(false);\r\n        btnEdit = root.findViewById(R.id.btneditDesc);\r\n        btnSave = root.findViewById(R.id.btn_saveP);\r\n        txtNamep = root.findViewById(R.id.nameP);\r\n        txtNamep.setEnabled(false);\r\n        descriptionP = root.findViewById(R.id.progiledescription);\r\n        descriptionP.setEnabled(false);\r\n        txtFollow = root.findViewById(R.id.followingP);\r\n        txtPost = root.findViewById(R.id.txtPostN);\r\n\r\n\r\n        String name;\r\n            //firebase\r\n        DocumentReference docRef = db.collection(\"Foro user\").document(uid);\r\n        docRef.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot,\r\n                                @Nullable FirebaseFirestoreException e) {\r\n                if (e != null) {\r\n\r\n                    return;\r\n                }\r\n\r\n                if (snapshot != null && snapshot.exists()) {\r\n                    String nombre = snapshot.getString(\"name\");\r\n                    String descipcion = snapshot.getString(\"description\");\r\n                    String foto =snapshot.getString(\"url\");\r\n\r\n                    txtNamep.setText(nombre);\r\n                    /*imgP.setText(link);*/\r\n                    descriptionP.setText(descipcion);\r\n                    if(!foto.equals(\"\")){\r\n                        Picasso.get().load(foto).into(imgP);\r\n                    }\r\n                } else {\r\n\r\n                }\r\n            }\r\n        });\r\n\r\n        db.collection(\"Foro user\").document(uid).collection(\"Following\")\r\n\r\n                .addSnapshotListener(new EventListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable QuerySnapshot snapshots,\r\n                                        @Nullable FirebaseFirestoreException e) {\r\n                        if (e != null) {\r\n\r\n                            return;\r\n                        }\r\n\r\n                        int cont=0;\r\n                        for (DocumentSnapshot doc : snapshots) {\r\n                            cont++;\r\n\r\n                        }\r\n                        String contador=String.valueOf(cont);\r\n                        txtFollow.setText(contador);\r\n                    }\r\n                });\r\n        db.collection(\"Posts\").addSnapshotListener(new EventListener<QuerySnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable QuerySnapshot snapshots,\r\n                                @Nullable FirebaseFirestoreException e) {\r\n                if (e != null) {\r\n\r\n                    return;\r\n                }\r\n\r\n                int cont=0;\r\n                for (DocumentSnapshot doc : snapshots) {\r\n                    if(doc.getString(\"creator\").equals(uid)) {\r\n                        cont++;\r\n                    }\r\n                }\r\n                String contador=String.valueOf(cont);\r\n                txtPost.setText(contador);\r\n            }\r\n        });\r\n\r\n        //boton editar\r\n        btnEdit.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity().getApplication(), EditProfileActivity.class);\r\n                startActivity(intent);\r\n            }\r\n\r\n            });\r\n\r\n\r\n        return root;\r\n\r\n    }\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/infinitycrop/ui/Foro/main/Profile/ProfileForoFragment.java	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ app/src/main/java/com/example/infinitycrop/ui/Foro/main/Profile/ProfileForoFragment.java	(date 1611432385560)
@@ -127,7 +127,7 @@
         imgP = root.findViewById(R.id.imgP);
         imgP.setEnabled(false);
         btnEdit = root.findViewById(R.id.btneditDesc);
-        btnSave = root.findViewById(R.id.btn_saveP);
+
         txtNamep = root.findViewById(R.id.nameP);
         txtNamep.setEnabled(false);
         descriptionP = root.findViewById(R.id.progiledescription);
Index: .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_19_07_[Default_Changelist]/shelved.patch
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_19_07_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_19_07_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,85 +0,0 @@
-Index: github.properties
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>gpr.usr = 61469172\ngpr.key = 72a0f63b7097b413e8ff78a7dd6ca9412aaf232c
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>windows-1252
-===================================================================
---- github.properties	(revision 7642a63b1487ac3b4a14d644ddb96d86b57b1345)
-+++ github.properties	(date 1610713458354)
-@@ -1,2 +1,2 @@
--gpr.usr = 61469172
--gpr.key = 72a0f63b7097b413e8ff78a7dd6ca9412aaf232c
-\ No newline at end of file
-+gpr.usr = 61473165
-+gpr.key = 9671a8c2e26934b214e49dd99b96077296ee2aca
-\ No newline at end of file
-Index: app/src/main/res/layout/activity_foro_main.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.Foro.main.ForoMain\">\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_foro_main.xml	(revision 7642a63b1487ac3b4a14d644ddb96d86b57b1345)
-+++ app/src/main/res/layout/activity_foro_main.xml	(date 1610813155168)
-@@ -1,9 +1,13 @@
- <?xml version="1.0" encoding="utf-8"?>
--<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
-+<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
-     xmlns:app="http://schemas.android.com/apk/res-auto"
-     xmlns:tools="http://schemas.android.com/tools"
-     android:layout_width="match_parent"
-     android:layout_height="match_parent"
-     tools:context=".ui.Foro.main.ForoMain">
- 
--</androidx.constraintlayout.widget.ConstraintLayout>
-\ No newline at end of file
-+    <com.ismaeldivita.chipnavigation.ChipNavigationBar
-+        android:layout_width="match_parent"
-+        android:layout_height="wrap_content"></com.ismaeldivita.chipnavigation.ChipNavigationBar>
-+
-+</RelativeLayout>
-\ No newline at end of file
-Index: app/src/main/res/menu/foro_nav_item.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/menu/foro_nav_item.xml	(date 1610813155220)
-+++ app/src/main/res/menu/foro_nav_item.xml	(date 1610813155220)
-@@ -0,0 +1,33 @@
-+<?xml version="1.0" encoding="utf-8"?>
-+<menu xmlns:android="http://schemas.android.com/apk/res/android"
-+    xmlns:app="http://schemas.android.com/apk/res-auto">
-+    <!-- home, buscar, panel de comunidades, pefil -->
-+    <item
-+        android:id="@+id/home"
-+        android:icon="@drawable/ic_home"
-+        android:title="Inicio"
-+        app:cnb_backgroundColor="@color/colorPrimaryDashboard"
-+        app:cnb_iconColor="#ffffff"
-+        app:cnb_textColor="#ffffff" />
-+    <item
-+        android:id="@+id/graphics"
-+        android:icon="@drawable/icons_dashboard"
-+        android:title="Panel de control"
-+        app:cnb_backgroundColor="@color/colorPrimaryDashboard"
-+        app:cnb_iconColor="#ffffff"
-+        app:cnb_textColor="#ffffff" />
-+    <item
-+        android:id="@+id/notifications"
-+        android:icon="@drawable/ic_baseline_map"
-+        android:title="Mapa"
-+        app:cnb_backgroundColor="@color/colorPrimaryDashboard"
-+        app:cnb_iconColor="#ffffff"
-+        app:cnb_textColor="#ffffff" />
-+    <item
-+        android:id="@+id/profile"
-+        android:icon="@drawable/ic_profile"
-+        android:title="Perfil"
-+        app:cnb_backgroundColor="@color/colorPrimaryDashboard"
-+        app:cnb_iconColor="#ffffff"
-+        app:cnb_textColor="#ffffff" />
-+</menu>
-\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_13_14_[Default_Changelist]/shelved.patch
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_13_14_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_13_14_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,3485 +0,0 @@
-Index: app/src/main/res/layout/activity_planta1.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:background=\"@drawable/bg4\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\"com.example.infinitycrop.ui.MachineControl.planta1\">\r\n\r\n    <RelativeLayout\r\n\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:layout_marginBottom=\"7.3dp\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n\r\n            android:orientation=\"vertical\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/backDashboard\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"40dp\"\r\n                android:layout_marginLeft=\"10dp\"\r\n                android:layout_marginTop=\"30dp\"\r\n                android:src=\"@drawable/icons_arrow_left_green\">\r\n\r\n            </ImageView>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"12dp\"\r\n                android:orientation=\"horizontal\">\r\n\r\n                <TextView\r\n                    android:id=\"@+id/textView\"\r\n                    android:layout_width=\"469dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginLeft=\"10dp\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"clip_horizontal\"\r\n                    android:text=\"Piso 1\"\r\n                    android:textColor=\"@color/white\"\r\n                    android:textSize=\"25dp\"\r\n                    android:textStyle=\"bold\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"bottom|right\"\r\n                    android:orientation=\"vertical\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:orientation=\"vertical\" />\r\n            </LinearLayout>\r\n\r\n            <me.sujanpoudel.wheelview.WheelView\r\n                android:id=\"@+id/wheelview\"\r\n                android:layout_width=\"290dp\"\r\n                android:layout_height=\"203dp\"\r\n                android:layout_gravity=\"center\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\"\r\n                app:wheelAnchorAngle=\"270\"\r\n                app:wheelAnimationDuration=\"500\"\r\n                app:wheelArcBackgroundColor=\"@color/colorSecondaryDark\"\r\n                app:wheelCenterIcon=\"@drawable/logo_without_background\"\r\n                app:wheelDividerStrokeWidth=\"1dp\"\r\n                app:wheelMode=\"ANIMATE_TO_ANCHOR\"\r\n                app:wheelSelectedArcBackgroundColor=\"@color/colorSecondary\"\r\n                app:wheelSelectedTextColor=\"@color/white\"\r\n                app:wheelStartAngle=\"315\"\r\n                app:wheelTextColor=\"@color/white\"\r\n                app:wheelTextSize=\"16sp\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_marginTop=\"10dp\"\r\n                android:orientation=\"horizontal\"\r\n                android:paddingLeft=\"20dp\">\r\n\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_marginLeft=\"1dp\"\r\n                    android:layout_marginRight=\"20dp\"\r\n                    android:background=\"@drawable/rectangle\"\r\n                    android:orientation=\"horizontal\">\r\n\r\n                    <LinearLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:layout_gravity=\"center\"\r\n                        android:layout_marginLeft=\"10dp\"\r\n                        android:layout_marginRight=\"15dp\"\r\n                        android:orientation=\"vertical\">\r\n\r\n                        <LinearLayout\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"40dp\"\r\n\r\n                            android:orientation=\"horizontal\">\r\n\r\n                            <TextView\r\n                                android:id=\"@+id/textViewinfo\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_gravity=\"center\"\r\n                                android:text=\"Pulsa el botón para editar:\"\r\n                                android:textColor=\"#000000\"\r\n                                android:textSize=\"16.7sp\"\r\n                                android:textStyle=\"normal\" />\r\n\r\n                            <Button\r\n                                android:id=\"@+id/btnedit\"\r\n                                android:layout_width=\"match_parent\"\r\n                                android:layout_marginTop=\"2dp\"\r\n                                android:layout_height=\"30dp\"\r\n                                android:background=\"@drawable/btn_scan\"\r\n                                android:layout_marginLeft=\"10dp\"\r\n                                android:text=\"Editar\"\r\n                                android:textColor=\"#FFFFFF\" />\r\n\r\n                        </LinearLayout>\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textView23\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"12dp\"\r\n                            android:text=\"Sección ocupada:\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n\r\n                        <LinearLayout\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:orientation=\"horizontal\">\r\n\r\n                            <CheckBox\r\n                                android:id=\"@+id/checkBoxSi\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_weight=\"1\"\r\n                                android:text=\"Si\" />\r\n\r\n                            <CheckBox\r\n                                android:id=\"@+id/checkBoxNo\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_weight=\"1\"\r\n                                android:checked=\"true\"\r\n                                android:clickable=\"false\"\r\n                                android:text=\"No\" />\r\n                        </LinearLayout>\r\n\r\n\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textView7\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"12dp\"\r\n                            android:text=\"Nombre de la especie:\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n\r\n                        <EditText\r\n                            android:id=\"@+id/editTextNobrep\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:background=\"@android:color/transparent\"\r\n                            android:maxLines=\"1\"\r\n                            android:paddingTop=\"5dp\"\r\n                            android:textColorHint=\"#9E9D9D\"\r\n                            android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                            android:textSize=\"15sp\"\r\n                            android:hint=\"Toca para añadir\"\r\n\r\n                            />\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textedit\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"22.3dp\"\r\n                            android:text=\"Hora de fin\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/editHour\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:background=\"@android:color/transparent\"\r\n                            android:ems=\"10\"\r\n                            android:text=\"Toca para añdir\"\r\n                            android:inputType=\"time\"\r\n                            android:maxLines=\"1\"\r\n                            android:paddingTop=\"5dp\"\r\n                            android:textColorHint=\"#333232\"\r\n                            android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                            android:textSize=\"15sp\" />\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textView11\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"22.3dp\"\r\n                            android:text=\"Fecha de fin\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n                        <TextView\r\n                            android:id=\"@+id/tvDate\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:background=\"@android:color/transparent\"\r\n                            android:ems=\"10\"\r\n                            android:text=\"Toca para añdir\"\r\n                            android:inputType=\"time\"\r\n                            android:editable=\"false\"\r\n                            android:maxLines=\"1\"\r\n                            android:paddingTop=\"5dp\"\r\n                            android:textColorHint=\"#333232\"\r\n                            android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                            android:textSize=\"15sp\" />\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:layout_marginBottom=\"20dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <Button\r\n\r\n                            android:id=\"@+id/btn_save\"\r\n                            android:layout_width=\"151dp\"\r\n                            android:layout_height=\"49dp\"\r\n                            android:layout_gravity=\"center\"\r\n                            android:background=\"@drawable/btn_scan\"\r\n                            android:onClick=\"saveNote\"\r\n                            android:text=\"Guardar cambios\"\r\n                            android:textColor=\"#FFFFFF\"\r\n                            android:visibility=\"gone\">\r\n\r\n                        </Button>\r\n\r\n                        <RelativeLayout\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:paddingTop=\"5dp\">\r\n\r\n                        </RelativeLayout>\r\n\r\n\r\n                    </LinearLayout>\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:id=\"@+id/btn_registMachine\"\r\n                android:layout_width=\"90dp\"\r\n                android:layout_height=\"41dp\"\r\n                android:layout_gravity=\"right\"\r\n                android:layout_marginTop=\"40.3dp\"\r\n                android:layout_marginBottom=\"16.7dp\"\r\n                android:background=\"@drawable/btn_login\"\r\n                android:foregroundGravity=\"right\"\r\n                android:gravity=\"center\"\r\n                android:orientation=\"vertical\"\r\n\r\n                android:visibility=\"gone\">\r\n\r\n\r\n            </LinearLayout>\r\n\r\n\r\n        </LinearLayout>\r\n\r\n        <androidx.constraintlayout.widget.ConstraintLayout\r\n            android:id=\"@+id/constraitR\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            tools:visibility=\"gone\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/imageprevius\"\r\n                android:layout_width=\"400dp\"\r\n                android:layout_height=\"731dp\"\r\n                android:alpha=\"0.4\"\r\n                app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\"\r\n                app:srcCompat=\"@color/black\"\r\n                tools:visibility=\"gone\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/txtInfoD\"\r\n                android:layout_width=\"264dp\"\r\n                android:layout_height=\"81dp\"\r\n                android:background=\"@color/white\"\r\n                android:paddingTop=\"10dp\"\r\n                android:text=\"Toca una casilla para visualizar los datos\"\r\n                android:textAlignment=\"center\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"20sp\"\r\n                app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"@+id/imageprevius\"\r\n                tools:visibility=\"gone\" />\r\n        </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n\r\n    </RelativeLayout>\r\n\r\n\r\n</ScrollView>\r\n\r\n\r\n\r\n\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_planta1.xml	(revision df2a90af626ba36415241c1dd15ab9103c4ae319)
-+++ app/src/main/res/layout/activity_planta1.xml	(date 1611100778772)
-@@ -204,7 +204,7 @@
-                             android:layout_width="wrap_content"
-                             android:layout_height="wrap_content"
-                             android:layout_marginTop="22.3dp"
--                            android:text="Hora de fin"
-+                            android:text="Programar una alarma"
-                             android:textColor="#9E9D9D" />
- 
-                         <TextView
-@@ -213,8 +213,7 @@
-                             android:layout_height="wrap_content"
-                             android:background="@android:color/transparent"
-                             android:ems="10"
--                            android:text="Toca para añdir"
--                            android:inputType="time"
-+                            android:text="Toca para añadir"
-                             android:maxLines="1"
-                             android:paddingTop="5dp"
-                             android:textColorHint="#333232"
-@@ -232,22 +231,21 @@
-                             android:layout_width="wrap_content"
-                             android:layout_height="wrap_content"
-                             android:layout_marginTop="22.3dp"
--                            android:text="Fecha de fin"
-+                            android:text="Ubicación de la planta"
-                             android:textColor="#9E9D9D" />
-                         <TextView
--                            android:id="@+id/tvDate"
-+                            android:id="@+id/txtStation"
-                             android:layout_width="match_parent"
-                             android:layout_height="wrap_content"
-                             android:background="@android:color/transparent"
-                             android:ems="10"
--                            android:text="Toca para añdir"
--                            android:inputType="time"
-+                            android:text="Esta planta se encuentra en la estación número: "
-                             android:editable="false"
-                             android:maxLines="1"
-                             android:paddingTop="5dp"
-                             android:textColorHint="#333232"
-                             android:textCursorDrawable="@drawable/cursor_color"
--                            android:textSize="15sp" />
-+                            android:textSize="13sp" />
- 
-                         <View
-                             android:layout_width="match_parent"
-Index: app/src/main/res/layout/fragment_profile_foro.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.Foro.main.Profile.ProfileForoFragment\">\r\n\r\n    <!-- TODO: Update blank fragment layout -->\r\n    <TextView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:gravity=\"center\"\r\n        android:text=\"profile\" />\r\n\r\n</FrameLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_profile_foro.xml	(revision df2a90af626ba36415241c1dd15ab9103c4ae319)
-+++ app/src/main/res/layout/fragment_profile_foro.xml	(date 1611144858506)
-@@ -1,15 +1,141 @@
- <?xml version="1.0" encoding="utf-8"?>
--<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
--    xmlns:tools="http://schemas.android.com/tools"
-+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
-+
-     android:layout_width="match_parent"
-     android:layout_height="match_parent"
--    tools:context=".ui.Foro.main.Profile.ProfileForoFragment">
-+    android:background="#EFE9E9"
-+    android:orientation="vertical">
-+
-+    <RelativeLayout
-+        android:layout_width="match_parent"
-+        android:layout_height="405dp">
- 
--    <!-- TODO: Update blank fragment layout -->
--    <TextView
--        android:layout_width="match_parent"
--        android:layout_height="match_parent"
--        android:gravity="center"
--        android:text="profile" />
-+        <LinearLayout
-+            android:layout_width="match_parent"
-+            android:layout_height="350dp"
-+            android:background="@color/colorSecondary"
-+            android:orientation="vertical">
-+
-+            <ImageView
-+                android:layout_width="150dp"
-+                android:layout_height="150dp"
-+                android:layout_gravity="center_horizontal"
-+                android:layout_marginTop="45dp"
-+                android:src="@drawable/rectangle" />
-+
-+            <TextView
-+                android:layout_width="wrap_content"
-+                android:layout_height="wrap_content"
-+                android:layout_gravity="center_horizontal"
-+                android:layout_marginTop="10dp"
-+                android:text="Angle Triangle"
-+                android:textColor="#fff"
-+                android:textSize="21sp"
-+                android:textStyle="bold" />
-+        </LinearLayout>
-+
-+        <androidx.cardview.widget.CardView
-+            android:layout_width="400dp"
-+            android:layout_height="120dp"
-+            android:layout_centerHorizontal="true"
-+            android:layout_marginTop="275dp">
-+
-+            <LinearLayout
-+                android:layout_width="match_parent"
-+                android:layout_height="match_parent"
-+                android:orientation="horizontal"
-+                android:weightSum="2">
-+
-+                <LinearLayout
-+                    android:layout_width="0dp"
-+                    android:layout_height="match_parent"
-+                    android:layout_weight="1"
-+                    android:gravity="center"
-+                    android:orientation="vertical">
-+
-+                    <TextView
-+                        android:layout_width="wrap_content"
-+                        android:layout_height="wrap_content"
-+                        android:text="Posts"
-+                        android:textSize="20sp" />
-+
-+                    <TextView
-+                        android:layout_width="wrap_content"
-+                        android:layout_height="wrap_content"
-+                        android:paddingTop="10dp"
-+                        android:text="125"
-+                        android:textColor="@color/green"
-+                        android:textSize="20sp"
-+                        android:textStyle="bold" />
-+                </LinearLayout>
-+
-+                <LinearLayout
-+                    android:layout_width="0dp"
-+                    android:layout_height="match_parent"
-+                    android:layout_weight="1"
-+                    android:gravity="center"
-+                    android:orientation="vertical"
-+                    android:visibility="gone">
-+
-+                    <TextView
-+                        android:layout_width="wrap_content"
-+                        android:layout_height="wrap_content"
-+                        android:text="Followers"
-+                        android:textSize="20sp"
-+                        android:visibility="gone" />
-+
-+                    <TextView
-+                        android:layout_width="wrap_content"
-+                        android:layout_height="wrap_content"
-+                        android:paddingTop="10dp"
-+                        android:text="1205"
-+                        android:textColor="@color/green"
-+                        android:textSize="20sp"
-+                        android:textStyle="bold"
-+                        android:visibility="gone" />
-+                </LinearLayout>
-+
-+                <LinearLayout
-+                    android:layout_width="0dp"
-+                    android:layout_height="match_parent"
-+                    android:layout_weight="1"
-+                    android:gravity="center"
-+                    android:orientation="vertical">
-+
-+                    <TextView
-+                        android:layout_width="wrap_content"
-+                        android:layout_height="wrap_content"
-+                        android:text="Following"
-+                        android:textSize="20sp" />
-+
-+                    <TextView
-+                        android:layout_width="wrap_content"
-+                        android:layout_height="wrap_content"
-+                        android:paddingTop="10dp"
-+                        android:text="360"
-+                        android:textColor="@color/green"
-+                        android:textSize="20sp"
-+                        android:textStyle="bold" />
-+                </LinearLayout>
-+            </LinearLayout>
-+        </androidx.cardview.widget.CardView>
-+    </RelativeLayout>
-+
-+    <LinearLayout
-+        android:layout_width="wrap_content"
-+        android:layout_height="wrap_content"
-+        android:layout_gravity="center"
-+        android:layout_marginTop="45dp"
-+        android:orientation="vertical">
-+
-+        <TextView
-+            android:id="@+id/textView35"
-+            android:layout_width="379dp"
-+            android:layout_height="100dp"
-+            android:background="@color/white"
-+            android:hint="Descripción:"
-+            android:textSize="20sp"
-+          />
-+    </LinearLayout>
- 
--</FrameLayout>
-\ No newline at end of file
-+</LinearLayout>
-\ No newline at end of file
-Index: app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.MachineControl;\r\n\r\nimport android.app.AlarmManager;\r\nimport android.app.DatePickerDialog;\r\nimport android.app.FragmentTransaction;\r\nimport android.app.TimePickerDialog;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.graphics.drawable.ColorDrawable;\r\nimport android.os.Bundle;\r\nimport android.os.CountDownTimer;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.CheckBox;\r\nimport android.widget.DatePicker;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.TimePicker;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.constraintlayout.widget.ConstraintLayout;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.dashboard.DashboardFragment;\r\nimport com.example.infinitycrop.ui.dashboard.GeneralFragment;\r\nimport com.example.infinitycrop.ui.logmail.LoginActivity;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.google.firebase.firestore.ListenerRegistration;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\nimport java.text.ParseException;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.Calendar;\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\nimport kotlin.Unit;\r\nimport kotlin.jvm.functions.Function1;\r\nimport me.sujanpoudel.wheelview.WheelView;\r\n\r\npublic class planta1 extends AppCompatActivity {\r\n    private List<String> nombres;\r\n    private List<String> estado;\r\n    //Aviso al entrar\r\n    private ConstraintLayout fondoR;\r\n    private ImageView imgr,goBack;\r\n    private TextView textR;\r\n    //\r\n\r\n    private int piso = 1;\r\n    String one = String.valueOf(piso);\r\n    private int stated = 1;\r\n    String state = String.valueOf(stated);\r\n\r\n\r\n    private CheckBox checkYes, checkNo;\r\n    private Button editInfo, saveChanges;\r\n    private TextView mDisplayDate,mDisplayHour,infoTitle;\r\n    private EditText nameplant;\r\n    private FirebaseFirestore db;\r\n\r\n    private String idDocument;\r\n    private String id;\r\n\r\n\r\n\r\n    //Reloj\r\n    int t2Hour, t2Minute;\r\n    private DatePickerDialog.OnDateSetListener mDateSetListener;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_planta1);\r\n\r\n        //Aviso al entrar\r\n        fondoR = findViewById(R.id.constraitR);\r\n        imgr = findViewById(R.id.imageprevius);\r\n        textR = findViewById(R.id.txtInfoD);\r\n        CountDownTimer countDownTimer = new CountDownTimer(3000, 1000) {//Se pone la cuenta atras para que no se superponga con la animación\r\n            public void onTick(long millisUntilFinished) {\r\n\r\n            }\r\n\r\n            public void onFinish() {\r\n\r\n                fondoR.setVisibility(View.GONE);\r\n                imgr.setVisibility(View.GONE);\r\n                textR.setVisibility(View.GONE);\r\n\r\n            }\r\n        }.start();\r\n        //boton para volver\r\n        goBack= findViewById(R.id.backDashboard);\r\n        goBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n               finish();\r\n            }\r\n        });\r\n\r\n        db=FirebaseFirestore.getInstance();\r\n        //bungle get extra\r\n        Bundle extras = getIntent().getExtras();\r\n        id = extras.getString(\"idMachine\");\r\n\r\n        //arrays\r\n        nombres=new ArrayList<>();\r\n        estado=new ArrayList<>();\r\n        //firestore\r\n        db.collection(\"Mediciones planta 1\").document(id).collection(\"DatosPiso\")\r\n                .addSnapshotListener(new EventListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable QuerySnapshot snapshots,\r\n                                        @Nullable FirebaseFirestoreException e) {\r\n                        if (e != null) {\r\n                            return;\r\n                        }\r\n                        nombres.clear();\r\n                        for (DocumentSnapshot doc : snapshots) {\r\n                                nombres.add(doc.getString(\"name\"));\r\n                                estado.add(doc.getId());\r\n                        }\r\n                       /* Toast.makeText(getApplicationContext(),nombres.toString(), Toast.LENGTH_LONG).show();*/\r\n\r\n\r\n\r\n                        final WheelView wheelView = (WheelView) findViewById(R.id.wheelview);\r\n                        wheelView.setTitles(nombres);\r\n\r\n                        wheelView.setSelectListener(new Function1<Integer, Unit>() {\r\n                            @Override\r\n                            public Unit invoke(Integer integer) {\r\n                                showToast(integer);\r\n                                return Unit.INSTANCE;\r\n                            }\r\n                            private final  void showToast(Integer index) {\r\n                               // Toast.makeText(planta1.this,\"\"+wheelView.getTitles().get(index),Toast.LENGTH_SHORT).show();\r\n                                idDocument=estado.get(index);\r\n                                Toast.makeText(planta1.this,\"\"+idDocument,Toast.LENGTH_SHORT).show();\r\n                                itenInfo(idDocument);\r\n\r\n\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                });\r\n\r\n\r\n\r\n\r\n\r\n        //Nombre de la planta\r\n        nameplant = (EditText)findViewById(R.id.editTextNobrep);\r\n        nameplant.setEnabled(false);\r\n        //Checkboxes\r\n        checkYes=(CheckBox)findViewById(R.id.checkBoxSi);\r\n        checkYes.setKeyListener(null);\r\n        checkNo=(CheckBox)findViewById(R.id.checkBoxNo);\r\n        checkNo.setKeyListener(null);\r\n\r\n        //Boton guardar cambios\r\n        saveChanges = (Button)findViewById(R.id.btn_save);\r\n        saveChanges.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                saveNote(v);\r\n                editInfo.setVisibility(View.VISIBLE);\r\n                saveChanges.setVisibility(View.GONE);\r\n                mDisplayDate.setEnabled(false);\r\n                mDisplayHour.setEnabled(false);\r\n                nameplant.setEnabled(false);\r\n                infoTitle.setText(\"Pulsa el botón para editar:\");\r\n\r\n\r\n\r\n\r\n            }\r\n        });\r\n\r\n        //Boton editar informacion\r\n        editInfo = (Button) findViewById(R.id.btnedit);\r\n        editInfo.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                saveChanges.setVisibility(View.VISIBLE);\r\n                editInfo.setVisibility(View.GONE);\r\n                mDisplayDate.setEnabled(true);\r\n                mDisplayHour.setEnabled(true);\r\n                nameplant.setEnabled(true);\r\n                infoTitle.setText(\"Información completa:\");\r\n\r\n\r\n            }\r\n        });\r\n        infoTitle = (TextView) findViewById(R.id.textViewinfo);\r\n        //HORA\r\n        mDisplayHour =(TextView) findViewById(R.id.editHour);\r\n        mDisplayHour.setEnabled(false);\r\n        mDisplayHour.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                TimePickerDialog timePickerDialog = new TimePickerDialog(\r\n                        planta1.this, android.R.style.Theme_Holo_Light_Dialog_MinWidth, new TimePickerDialog.OnTimeSetListener() {\r\n                    @Override\r\n                    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {\r\n                        Calendar c = Calendar.getInstance();\r\n                        t2Hour = hourOfDay;\r\n                        t2Minute = minute;\r\n                        String time = t2Hour + \":\" + t2Minute;\r\n                        SimpleDateFormat f24Hours = new SimpleDateFormat(\"HH:mm\");\r\n                        try {\r\n                            Date date = f24Hours.parse(time);\r\n                            SimpleDateFormat f12Hours = new SimpleDateFormat(\"hh:mm aa\");\r\n                            mDisplayHour.setText(f12Hours.format(date));\r\n                        } catch (ParseException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                        c.set(Calendar.HOUR_OF_DAY,hourOfDay);\r\n                        c.set(Calendar.MINUTE,minute);\r\n                        c.set(Calendar.SECOND,0);\r\n                        startAlarm(c);\r\n                    }\r\n                },12,0,false\r\n                );\r\n                timePickerDialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n                timePickerDialog.updateTime(t2Hour,t2Minute);\r\n                timePickerDialog.show();\r\n\r\n            }\r\n        });\r\n\r\n\r\n\r\n        //CALENDARIO\r\n        mDisplayDate = (TextView) findViewById(R.id.tvDate);\r\n        mDisplayDate.setEnabled(false);\r\n        mDisplayDate.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Calendar cal = Calendar.getInstance();\r\n                int year = cal.get(Calendar.YEAR);\r\n                int month = cal.get(Calendar.MONTH);\r\n                int day = cal.get(Calendar.DAY_OF_MONTH);\r\n\r\n                DatePickerDialog dialog = new DatePickerDialog(planta1.this,android.R.style.Theme_Holo_Dialog_MinWidth, mDateSetListener,year,month,day);\r\n                dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n                dialog.show();\r\n            }\r\n\r\n        });\r\n        mDateSetListener = new DatePickerDialog.OnDateSetListener() {\r\n            @Override\r\n            public void onDateSet(DatePicker datePicker, int year, int month, int day) {\r\n                month = month+1;\r\n                String date = day +\"/\" + month +\"/\"+ year;\r\n                mDisplayDate.setText(date);\r\n            }\r\n        };\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n\r\n\r\n    }\r\n    private void startAlarm(Calendar c){\r\n        AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);\r\n\r\n    }\r\n    public void saveNote(View v){\r\n        String cola = idDocument;\r\n        String nombre = nameplant.getText().toString();\r\n        String hora = mDisplayHour.getText().toString();\r\n        String dia = mDisplayDate.getText().toString();\r\n        String piso = one;\r\n\r\n        Map<String, Object> note = new HashMap<>();\r\n        note.put(\"name\",nombre);\r\n        note.put(\"fecha\",dia);\r\n        note.put(\"hora\",hora);\r\n        note.put(\"piso\",piso);\r\n\r\n        db.collection(\"Mediciones planta 1\").document(id).collection(\"DatosPiso\").document(cola).update(note).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n            @Override\r\n            public void onSuccess(Void aVoid) {\r\n            Toast.makeText(planta1.this,\"va bien\",Toast.LENGTH_SHORT).show();\r\n            }\r\n        }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Toast.makeText(planta1.this,\"va mal\",Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    private void itenInfo(String uiDoc){\r\n        //hacer consulta a ese documento con uiDOc y sacar su info\r\n        //luego set Text a all\r\n        db.collection(\"Mediciones planta 1\").document(id).collection(\"DatosPiso\").document(uiDoc).get()\r\n                .addOnSuccessListener(new OnSuccessListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onSuccess(DocumentSnapshot documentSnapshot) {\r\n                        if(documentSnapshot.exists()){\r\n                            String nombre = documentSnapshot.getString(\"name\");\r\n                            String fecha = documentSnapshot.getString(\"fecha\");\r\n                            String hora = documentSnapshot.getString(\"hora\");\r\n\r\n                           // Map<String,Object> note = documentSnapshot.getData();\r\n                            nameplant.setText(nombre);\r\n                            mDisplayHour.setText(hora);\r\n                            mDisplayDate.setText(fecha);\r\n\r\n                        }else{\r\n                            Toast.makeText(planta1.this,\"Document does exist\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }\r\n                }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Toast.makeText(planta1.this,\"va mal\",Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n                /*.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable DocumentSnapshot value, @Nullable FirebaseFirestoreException error) {\r\n\r\n                    }\r\n                });*/\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java	(revision df2a90af626ba36415241c1dd15ab9103c4ae319)
-+++ app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java	(date 1611141319340)
-@@ -8,8 +8,10 @@
- import android.content.Intent;
- import android.graphics.Color;
- import android.graphics.drawable.ColorDrawable;
-+import android.os.Build;
- import android.os.Bundle;
- import android.os.CountDownTimer;
-+import android.provider.AlarmClock;
- import android.view.View;
- import android.widget.Button;
- import android.widget.CheckBox;
-@@ -23,6 +25,7 @@
- 
- import androidx.annotation.NonNull;
- import androidx.annotation.Nullable;
-+import androidx.annotation.RequiresApi;
- import androidx.appcompat.app.AppCompatActivity;
- import androidx.constraintlayout.widget.ConstraintLayout;
- import androidx.fragment.app.Fragment;
-@@ -41,14 +44,18 @@
- import com.google.firebase.firestore.ListenerRegistration;
- import com.google.firebase.firestore.QuerySnapshot;
- 
-+import java.sql.Time;
- import java.text.ParseException;
- import java.text.SimpleDateFormat;
-+import java.time.LocalDate;
-+import java.time.LocalTime;
- import java.util.ArrayList;
- import java.util.Arrays;
- import java.util.Calendar;
- import java.util.Date;
- import java.util.HashMap;
- import java.util.List;
-+import java.util.Locale;
- import java.util.Map;
- 
- import kotlin.Unit;
-@@ -72,7 +79,7 @@
- 
-     private CheckBox checkYes, checkNo;
-     private Button editInfo, saveChanges;
--    private TextView mDisplayDate,mDisplayHour,infoTitle;
-+    private TextView mDisplayHour,infoTitle,mStation;
-     private EditText nameplant;
-     private FirebaseFirestore db;
- 
-@@ -137,6 +144,8 @@
-                                 nombres.add(doc.getString("name"));
-                                 estado.add(doc.getId());
-                         }
-+
-+
-                        /* Toast.makeText(getApplicationContext(),nombres.toString(), Toast.LENGTH_LONG).show();*/
- 
- 
-@@ -170,6 +179,9 @@
-         //Nombre de la planta
-         nameplant = (EditText)findViewById(R.id.editTextNobrep);
-         nameplant.setEnabled(false);
-+        mDisplayHour=(TextView) findViewById(R.id.editHour);
-+        mDisplayHour.setEnabled(false);
-+        mStation=(TextView)findViewById(R.id.txtStation);
-         //Checkboxes
-         checkYes=(CheckBox)findViewById(R.id.checkBoxSi);
-         checkYes.setKeyListener(null);
-@@ -184,7 +196,6 @@
-                 saveNote(v);
-                 editInfo.setVisibility(View.VISIBLE);
-                 saveChanges.setVisibility(View.GONE);
--                mDisplayDate.setEnabled(false);
-                 mDisplayHour.setEnabled(false);
-                 nameplant.setEnabled(false);
-                 infoTitle.setText("Pulsa el botón para editar:");
-@@ -203,54 +214,32 @@
- 
-                 saveChanges.setVisibility(View.VISIBLE);
-                 editInfo.setVisibility(View.GONE);
--                mDisplayDate.setEnabled(true);
-                 mDisplayHour.setEnabled(true);
-                 nameplant.setEnabled(true);
-                 infoTitle.setText("Información completa:");
- 
- 
-+
-             }
-         });
-         infoTitle = (TextView) findViewById(R.id.textViewinfo);
-         //HORA
--        mDisplayHour =(TextView) findViewById(R.id.editHour);
--        mDisplayHour.setEnabled(false);
-+
-         mDisplayHour.setOnClickListener(new View.OnClickListener() {
-             @Override
-             public void onClick(View v) {
--                TimePickerDialog timePickerDialog = new TimePickerDialog(
--                        planta1.this, android.R.style.Theme_Holo_Light_Dialog_MinWidth, new TimePickerDialog.OnTimeSetListener() {
--                    @Override
--                    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
--                        Calendar c = Calendar.getInstance();
--                        t2Hour = hourOfDay;
--                        t2Minute = minute;
--                        String time = t2Hour + ":" + t2Minute;
--                        SimpleDateFormat f24Hours = new SimpleDateFormat("HH:mm");
--                        try {
--                            Date date = f24Hours.parse(time);
--                            SimpleDateFormat f12Hours = new SimpleDateFormat("hh:mm aa");
--                            mDisplayHour.setText(f12Hours.format(date));
--                        } catch (ParseException e) {
--                            e.printStackTrace();
--                        }
--                        c.set(Calendar.HOUR_OF_DAY,hourOfDay);
--                        c.set(Calendar.MINUTE,minute);
--                        c.set(Calendar.SECOND,0);
--                        startAlarm(c);
--                    }
--                },12,0,false
--                );
--                timePickerDialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));
--                timePickerDialog.updateTime(t2Hour,t2Minute);
--                timePickerDialog.show();
-+                Intent intent = new Intent(AlarmClock.ACTION_SET_ALARM);
-+                if(intent.resolveActivity(getPackageManager())!=null){
-+                    startActivity(intent);
-+                }
- 
--            }
-+        }
-         });
- 
- 
- 
--        //CALENDARIO
-+
-+        /*//CALENDARIO
-         mDisplayDate = (TextView) findViewById(R.id.tvDate);
-         mDisplayDate.setEnabled(false);
-         mDisplayDate.setOnClickListener(new View.OnClickListener() {
-@@ -275,7 +264,7 @@
-                 mDisplayDate.setText(date);
-             }
-         };
--
-+            */
-     }
- 
-     @Override
-@@ -284,21 +273,25 @@
- 
- 
-     }
--    private void startAlarm(Calendar c){
--        AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
--
--    }
-+    /*public void establecerAlarma(String mensaje,int dias,int hora,int minutos){
-+        Intent intent = new Intent(AlarmClock.ACTION_SET_ALARM)
-+                .putExtra(AlarmClock.EXTRA_DAYS,dias)
-+                .putExtra(AlarmClock.EXTRA_MESSAGE,mensaje)
-+                .putExtra(AlarmClock.EXTRA_HOUR,hora)
-+                .putExtra(AlarmClock.EXTRA_MINUTES,minutos);
-+        if(intent.resolveActivity(getPackageManager())!=null){
-+            startActivity(intent);
-+        }
-+    }*/
-+
-     public void saveNote(View v){
-         String cola = idDocument;
-         String nombre = nameplant.getText().toString();
--        String hora = mDisplayHour.getText().toString();
--        String dia = mDisplayDate.getText().toString();
-+
-         String piso = one;
- 
-         Map<String, Object> note = new HashMap<>();
-         note.put("name",nombre);
--        note.put("fecha",dia);
--        note.put("hora",hora);
-         note.put("piso",piso);
- 
-         db.collection("Mediciones planta 1").document(id).collection("DatosPiso").document(cola).update(note).addOnSuccessListener(new OnSuccessListener<Void>() {
-@@ -325,13 +318,26 @@
-                     public void onSuccess(DocumentSnapshot documentSnapshot) {
-                         if(documentSnapshot.exists()){
-                             String nombre = documentSnapshot.getString("name");
--                            String fecha = documentSnapshot.getString("fecha");
--                            String hora = documentSnapshot.getString("hora");
-+                            String estacion = documentSnapshot.getString("estacion");
-+                            int resultado =documentSnapshot.getLong("estado").intValue();
-+                            if(resultado==1){
-+                                checkYes.isSelected();
-+                                checkYes.setChecked(true);
-+                                checkYes.isChecked();
-+                                checkNo.setChecked(false);
-+                            }else{
-+                                checkNo.isSelected();
-+                                checkNo.setChecked(true);
-+                                checkNo.isChecked();
-+                                checkYes.setChecked(false);
-+                            }
-+
- 
-                            // Map<String,Object> note = documentSnapshot.getData();
-                             nameplant.setText(nombre);
--                            mDisplayHour.setText(hora);
--                            mDisplayDate.setText(fecha);
-+                            mStation.setText(estacion);
-+
-+
- 
-                         }else{
-                             Toast.makeText(planta1.this,"Document does exist",Toast.LENGTH_SHORT).show();
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_13_01_2021_1_20_[Default_Changelist]/shelved.patch
-===================================================================
---- .idea/shelf/Uncommitted_changes_before_Update_at_13_01_2021_1_20_[Default_Changelist]/shelved.patch	(revision df2a90af626ba36415241c1dd15ab9103c4ae319)
-+++ .idea/shelf/Uncommitted_changes_before_Update_at_13_01_2021_1_20_[Default_Changelist]/shelved.patch	(revision df2a90af626ba36415241c1dd15ab9103c4ae319)
-@@ -1,3000 +0,0 @@
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44__Default_Changelist_.xml
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_28_12_2020_17_44_[Default_Changelist]" date="1609173893621" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44_[Default_Changelist]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 28/12/2020 17:44 [Default Changelist]" />
---</changelist>
--\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44_[Default_Changelist]/shelved.patch
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--@@ -1,1019 +0,0 @@
---Index: app/src/main/AndroidManifest.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    package=\"com.example.infinitycrop\">\n\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/>\n    <uses-permission android:name=\"android.permission.INTERNET\"/>\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" />\n    <!--Permisos Qr-->\n    <uses-permission android:name=\"android.permission.CAMERA\"/>\n    <uses-feature android:name=\"android.hardware.camera\"></uses-feature>\n    <uses-feature android:name=\"android.hardware.camera.autofocus\"></uses-feature>\n\n    <application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher\"\n        android:theme=\"@style/AppThemeHome\"\n        >\n\n        <activity android:name=\".MainActivity\" android:theme=\"@style/SplashTheme\">\n        </activity>\n\n        <activity android:name=\"com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity\">\n            <intent-filter>\n                <action android:name=\"android.intent.action.MAIN\" />\n                <category android:name=\"android.intent.category.LAUNCHER\" />\n            </intent-filter>\n        </activity>\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\">\n\n        </activity>\n        <activity android:name=\".ui.profile.settings.HelpProfile\">\n\n        </activity>\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\"></activity>\n        <activity android:name=\".ui.list_machine.AddMachine\"></activity>\n        <activity android:name=\".ui.logmail.RegisterActivity\"></activity>\n        <activity android:name=\".ui.logmail.LoginActivity\"></activity>\n        <activity android:name=\".ui.list_machine.CaptureAct\"></activity>\n        <activity android:name=\"com.example.infinitycrop.ui.login.LogActivity\"></activity>\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\"></activity>\n\n\n\n\n        <meta-data android:name=\"com.google.android.geo.API_KEY\"\n            android:value=\"@string/google_maps_key\" />\n\n        <meta-data android:name=\"com.facebook.sdk.ApplicationId\"\n            tools:replace=\"android:value\"\n            android:value=\"@string/facebook_app_id\"/>\n        <meta-data\n            android:name=\"preloaded_fonts\"\n            android:resource=\"@array/preloaded_fonts\" />\n\n\n    </application>\n\n</manifest>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/AndroidManifest.xml	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ app/src/main/AndroidManifest.xml	(date 1607643785311)
---@@ -2,7 +2,8 @@
--- <manifest xmlns:android="http://schemas.android.com/apk/res/android"
---     xmlns:tools="http://schemas.android.com/tools"
---     package="com.example.infinitycrop">
----
---+    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
---+    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
---     <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
---     <uses-permission android:name="android.permission.INTERNET"/>
---     <uses-permission android:name="com.google.android.things.permission.MANAGE_INPUT_DRIVERS" />
---Index: .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25__Default_Changelist_.xml
---===================================================================
------ .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25__Default_Changelist_.xml	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25__Default_Changelist_.xml	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---@@ -1,4 +0,0 @@
----<changelist name="Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]" date="1607628338928" recycled="true" deleted="true">
----  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]/shelved.patch" />
----  <option name="DESCRIPTION" value="Uncommitted changes before Update at 10/12/2020 20:25 [Default Changelist]" />
----</changelist>
---\ No newline at end of file
---Index: .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]/shelved.patch
---===================================================================
------ .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]/shelved.patch	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]/shelved.patch	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---@@ -1,729 +0,0 @@
----Index: app/src/main/AndroidManifest.xml
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    package=\"com.example.infinitycrop\">\n\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/>\n    <uses-permission android:name=\"android.permission.INTERNET\"/>\n    <!--Permisos Qr-->\n    <uses-permission android:name=\"android.permission.CAMERA\"/>\n    <uses-feature android:name=\"android.hardware.camera\"></uses-feature>\n    <uses-feature android:name=\"android.hardware.camera.autofocus\"></uses-feature>\n\n    <application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher\"\n        android:theme=\"@style/AppThemeHome\"\n        >\n\n        <activity android:name=\".MainActivity\" android:theme=\"@style/SplashTheme\">\n        </activity>\n\n        <activity android:name=\"com.example.infinitycrop.ui.login.LogActivity\">\n            <intent-filter>\n                <action android:name=\"android.intent.action.MAIN\" />\n                <category android:name=\"android.intent.category.LAUNCHER\" />\n            </intent-filter>\n        </activity>\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\">\n\n        </activity>\n        <activity android:name=\".ui.profile.settings.HelpProfile\">\n\n        </activity>\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\"></activity>\n        <activity android:name=\".ui.list_machine.AddMachine\"></activity>\n        <activity android:name=\".ui.logmail.RegisterActivity\"></activity>\n        <activity android:name=\".ui.logmail.LoginActivity\"></activity>\n        <activity android:name=\".ui.list_machine.CaptureAct\"></activity>\n\n\n\n\n        <meta-data android:name=\"com.google.android.geo.API_KEY\"\n            android:value=\"@string/google_maps_key\" />\n\n        <meta-data android:name=\"com.facebook.sdk.ApplicationId\"\n            tools:replace=\"android:value\"\n            android:value=\"@string/facebook_app_id\"/>\n\n\n    </application>\n\n</manifest>
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/AndroidManifest.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/AndroidManifest.xml	(date 1607539967252)
----@@ -5,6 +5,8 @@
---- 
----     <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
----     <uses-permission android:name="android.permission.INTERNET"/>
----+    <uses-permission android:name="com.google.android.things.permission.MANAGE_INPUT_DRIVERS" />
----+    <uses-permission android:name="com.google.android.things.permission.USE_PERIPHERAL_IO" />
----     <!--Permisos Qr-->
----     <uses-permission android:name="android.permission.CAMERA"/>
----     <uses-feature android:name="android.hardware.camera"></uses-feature>
----Index: app/src/main/res/layout/fragment_graphic.xml
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.graphic.GraphicFragment\">\r\n\r\n    <!-- TODO: Update blank fragment layout -->\r\n    <TextView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_centerInParent=\"true\"\r\n        android:textSize=\"50dp\"\r\n        android:text=\"Graphic fragment\" />\r\n\r\n</RelativeLayout>
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/res/layout/fragment_graphic.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/res/layout/fragment_graphic.xml	(date 1607520842759)
----@@ -1,16 +1,64 @@
---- <?xml version="1.0" encoding="utf-8"?>
-----<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
----+<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
----     xmlns:tools="http://schemas.android.com/tools"
----     android:layout_width="match_parent"
----     android:layout_height="match_parent"
----+    xmlns:app="http://schemas.android.com/apk/res-auto"
----+    android:background="#EFE9E9"
----     tools:context=".ui.graphic.GraphicFragment">
---- 
-----    <!-- TODO: Update blank fragment layout -->
-----    <TextView
-----        android:layout_width="match_parent"
----+    <androidx.constraintlayout.widget.ConstraintLayout
----+        android:layout_width="match_parent"
----+        android:layout_height="match_parent">
----+
----+
----+        <RelativeLayout
----+            android:id="@+id/relativeLayout2"
----+            android:layout_width="match_parent"
----+            android:layout_height="wrap_content"
----+            android:layout_marginStart="20dp"
----+            android:layout_marginEnd="20dp"
----+            app:layout_constraintBottom_toTopOf="@+id/image_list"
----+            app:layout_constraintEnd_toEndOf="parent"
----+            app:layout_constraintStart_toStartOf="parent"
----+            app:layout_constraintTop_toTopOf="parent">
----+
----+            <TextView
----+                android:id="@+id/textMode"
----+                android:layout_width="wrap_content"
----+                android:layout_height="wrap_content"
----+                android:text="Lista de fotografías  >"
----+
----+                android:textSize="19sp" />
----+
----+            <!--<ImageView
----+                android:layout_width="62dp"
----+                android:layout_height="62dp"
----+                android:layout_alignParentRight="true"
----+                android:src="@drawable/ic_sun" />-->
----+        </RelativeLayout>
----+
----+        <androidx.recyclerview.widget.RecyclerView
----+            android:id="@+id/image_list"
----+            android:layout_width="match_parent"
----+            android:layout_height="match_parent"
----+            android:layout_marginStart="16dp"
----+            android:layout_marginTop="70dp"
----+            android:layout_marginEnd="16dp"
----+            app:layout_constraintBottom_toBottomOf="parent"
----+            app:layout_constraintEnd_toEndOf="parent"
----+            app:layout_constraintStart_toStartOf="parent"
----+            app:layout_constraintTop_toBottomOf="@+id/constraintLayout3" />
----+    </androidx.constraintlayout.widget.ConstraintLayout>
----+
----+
----+    <com.google.android.material.floatingactionbutton.FloatingActionButton
----+        android:id="@+id/button_add_image"
----+        android:layout_width="wrap_content"
----         android:layout_height="wrap_content"
-----        android:layout_centerInParent="true"
-----        android:textSize="50dp"
-----        android:text="Graphic fragment" />
----+        android:layout_gravity="top|end"
----+        android:layout_margin="16dp"
----+
----+        android:src="@drawable/icons_plus" />
---- 
-----</RelativeLayout>
----\ No newline at end of file
----+</androidx.coordinatorlayout.widget.CoordinatorLayout>
----\ No newline at end of file
----Index: app/build.gradle
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+>apply plugin: 'com.android.application'\n\n\nandroid {\n    compileSdkVersion 30\n    buildToolsVersion \"30.0.2\"\n\n    defaultConfig {\n        applicationId \"com.example.infinitycrop\"\n        minSdkVersion 23\n        targetSdkVersion 30\n        versionCode 1\n        versionName \"1.0\"\n        multiDexEnabled true\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: \"libs\", include: [\"*.jar\"])\n    implementation 'androidx.appcompat:appcompat:1.2.0'\n    implementation 'com.google.android.material:material:1.2.1'\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.2'\n    implementation 'androidx.navigation:navigation-fragment:2.1.0'\n    implementation 'androidx.navigation:navigation-ui:2.1.0'\n    implementation 'androidx.lifecycle:lifecycle-extensions:2.2.0'\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\n    implementation 'com.google.firebase:firebase-auth:16.0.5'\n    implementation 'com.firebaseui:firebase-ui-auth:6.2.0'\n    implementation project(path: ':comun')\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\n    implementation 'com.google.firebase:firebase-analytics'\n    implementation 'com.ismaeldivita.chipnavigation:chip-navigation-bar:1.3.4'\n    implementation 'org.jetbrains.kotlin:kotlin-stdlib:1.4.10'\n    implementation 'androidx.recyclerview:recyclerview:1.1.0'\n    implementation 'com.android.volley:volley:1.1.0'\n    // Also declare the dependency for the Google Play services library and specify its version\n    implementation 'com.google.android.gms:play-services-auth:18.1.0'\n    // Import the BoM for the Firebase platform\n    implementation platform('com.google.firebase:firebase-bom:26.0.0')\n    implementation 'com.google.firebase:firebase-firestore:17.1.2'\n    implementation 'com.android.support:multidex:1.0.3'\n    implementation 'com.firebaseui:firebase-ui-firestore:6.3.0'\n    //biblioteca para mostrar images a través de URL\n    implementation 'com.github.bumptech.glide:glide:4.11.0'\n    //import del mqtt\n    implementation 'org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.1.1'\n    implementation 'com.google.android.gms:play-services-maps:17.0.0'\n    compile 'com.google.android.gms:play-services-location:16.0.0'\n    implementation 'com.journeyapps:zxing-android-embedded:3.4.0'//añadimos esta libreria para qr\n    implementation 'com.facebook.android:facebook-android-sdk:[4,5)'\n\n    implementation \"androidx.viewpager2:viewpager2:1.0.0\" //libreria viewpager\n}\napply plugin: 'com.google.gms.google-services'
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/build.gradle	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/build.gradle	(date 1607543533244)
----@@ -35,6 +35,8 @@
----     implementation 'com.google.firebase:firebase-auth:16.0.5'
----     implementation 'com.firebaseui:firebase-ui-auth:6.2.0'
----     implementation project(path: ':comun')
----+    implementation 'com.google.firebase:firebase-database:19.5.1'
----+    implementation 'com.google.firebase:firebase-storage:19.2.0'
----     testImplementation 'junit:junit:4.12'
----     androidTestImplementation 'androidx.test.ext:junit:1.1.2'
----     androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'
----Index: app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+>package com.example.infinitycrop.ui.graphic;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport com.example.infinitycrop.R;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link GraphicFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class GraphicFragment extends Fragment {\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public GraphicFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment GraphicFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static GraphicFragment newInstance(String param1, String param2) {\r\n        GraphicFragment fragment = new GraphicFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        return inflater.inflate(R.layout.fragment_graphic, container, false);\r\n    }\r\n}
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java	(date 1607543099075)
----@@ -3,12 +3,19 @@
---- import android.os.Bundle;
---- 
---- import androidx.fragment.app.Fragment;
----+import androidx.recyclerview.widget.LinearLayoutManager;
----+import androidx.recyclerview.widget.RecyclerView;
---- 
---- import android.view.LayoutInflater;
---- import android.view.View;
---- import android.view.ViewGroup;
---- 
---- import com.example.infinitycrop.R;
----+import com.firebase.ui.firestore.FirestoreRecyclerOptions;
----+import com.google.firebase.database.FirebaseDatabase;
----+import com.google.firebase.firestore.FirebaseFirestore;
----+import com.google.firebase.firestore.Query;
----+import com.google.firebase.storage.FirebaseStorage;
---- 
---- /**
----  * A simple {@link Fragment} subclass.
----@@ -16,7 +23,7 @@
----  * create an instance of this fragment.
----  */
---- public class GraphicFragment extends Fragment {
-----
----+    private AdaptadorImagenes adaptador;
----     // TODO: Rename parameter arguments, choose names that match
----     // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
----     private static final String ARG_PARAM1 = "param1";
----@@ -61,6 +68,26 @@
----     public View onCreateView(LayoutInflater inflater, ViewGroup container,
----                              Bundle savedInstanceState) {
----         // Inflate the layout for this fragment
-----        return inflater.inflate(R.layout.fragment_graphic, container, false);
----+        View v= inflater.inflate(R.layout.fragment_graphic, container, false);
----+
----+        RecyclerView recyclerView = v.findViewById(R.id.image_list);
----+        Query query = FirebaseFirestore.getInstance()
----+                .collection("imagenes");
----+        FirestoreRecyclerOptions<Imagen> opciones = new FirestoreRecyclerOptions
----+                .Builder<Imagen>().setQuery(query, Imagen.class).build();
----+        adaptador = new AdaptadorImagenes(getContext(), opciones);
----+        recyclerView.setAdapter(adaptador);
----+        recyclerView.setLayoutManager(new LinearLayoutManager(getContext()));
----+
----+        return v;
----+    }
----+    @Override public void onStart() {
----+        super.onStart();
----+        adaptador.startListening();
----     }
----+    @Override public void onStop() {
----+        super.onStop();
----+        adaptador.stopListening();
----+    }
----+
---- }
----\ No newline at end of file
----Index: comun/src/main/java/com/example/comun/Mqtt.java
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+>package com.example.comun;\n\npublic class Mqtt {\n    public static final String TAG = \"MQTT\";\n    public static final String topicRoot=\"infinity/senyal/\";\n\n\n    //Reemplaza equipo por el nombre de tu equipo de prácticas\n    public static final int qos = 1;\n    public static final String broker = \"tcp://mqtt.eclipse.org:1883\";\n    public static final String clientId = \"IotTestInfinity123\";\n//Reemplaza ClientId con un valor diferente\n}
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- comun/src/main/java/com/example/comun/Mqtt.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ comun/src/main/java/com/example/comun/Mqtt.java	(date 1607524175548)
----@@ -7,7 +7,7 @@
---- 
----     //Reemplaza equipo por el nombre de tu equipo de prácticas
----     public static final int qos = 1;
-----    public static final String broker = "tcp://mqtt.eclipse.org:1883";
----+    public static final String broker = "tcp://broker.hivemq.com:1883";
----     public static final String clientId = "IotTestInfinity123";
---- //Reemplaza ClientId con un valor diferente
---- }
----\ No newline at end of file
----Index: app/src/main/res/layout/fragment_general.xml
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+><ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    tools:context=\".ui.dashboard.DashboardFragment\">\n\n\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\n\n        <RelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginLeft=\"20dp\"\n            android:layout_marginTop=\"10dp\"\n            android:layout_marginRight=\"20dp\">\n\n            <TextView\n                android:id=\"@+id/textDashboard\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Dashboard  >\"\n\n                android:textSize=\"19sp\" />\n\n            <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_below=\"@+id/textDashboard\"\n                android:text=\"4 sensores\"\n\n                android:textSize=\"14sp\" />\n\n            <!--<ImageView\n                android:layout_width=\"62dp\"\n                android:layout_height=\"62dp\"\n                android:layout_alignParentRight=\"true\"\n                android:src=\"@drawable/ic_sun\" />-->\n        </RelativeLayout>\n        <GridLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:columnCount=\"2\"\n            android:rowCount=\"3\"\n            android:alignmentMode=\"alignMargins\"\n            android:columnOrderPreserved=\"false\">\n            <!--temperatura-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Temperatura\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchTemperatura\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:buttonTint=\"#FFFFFF\"\n                            android:checked=\"true\"\n                            android:fitsSystemWindows=\"false\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaTemperatura\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"34°C\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textTemperatura\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textTemperatura\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgTemperatura\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_temperature\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaTemperatura\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--humedad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Humedad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchHumedad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaHumedad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"68%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textHumedad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textHumedad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgHumedad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_humidity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaHumedad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--salinidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Salinidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchSalinidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaSalinidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"10%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textSalinidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textSalinidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgSalinidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_salt\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaSalinidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--Luminosidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Luminosidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchLuminosidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorHighlight=\"#FFFFFF\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidasLuminosidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"90%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textLuminosidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textLuminosidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgLuminosidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_luminosity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidasLuminosidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n\n\n\n\n        </GridLayout>\n\n    </LinearLayout>\n</ScrollView>\n
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/res/layout/fragment_general.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/res/layout/fragment_general.xml	(date 1607536086761)
----@@ -20,7 +20,7 @@
----             android:layout_marginRight="20dp">
---- 
----             <TextView
-----                android:id="@+id/textDashboard"
----+                android:id="@+id/textDashboardGeneral"
----                 android:layout_width="wrap_content"
----                 android:layout_height="wrap_content"
----                 android:text="Dashboard  >"
----@@ -30,7 +30,7 @@
----             <TextView
----                 android:layout_width="wrap_content"
----                 android:layout_height="wrap_content"
-----                android:layout_below="@+id/textDashboard"
----+                android:layout_below="@+id/textDashboardGeneral"
----                 android:text="4 sensores"
---- 
----                 android:textSize="14sp" />
----@@ -74,19 +74,19 @@
---- 
---- 
----                         <TextView
-----                            android:id="@+id/textTemperatura"
----+                            android:id="@+id/textTemperaturaGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginStart="8dp"
----                             android:layout_marginTop="8dp"
----                             android:text="Temperatura"
----                             android:textSize="16sp"
-----                            app:layout_constraintBottom_toBottomOf="@+id/switchTemperatura"
----+                            app:layout_constraintBottom_toBottomOf="@+id/switchTemperaturaGeneral"
----                             app:layout_constraintStart_toStartOf="parent"
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <Switch
-----                            android:id="@+id/switchTemperatura"
----+                            android:id="@+id/switchTemperaturaGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginTop="8dp"
----@@ -100,25 +100,25 @@
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <TextView
-----                            android:id="@+id/medidaTemperatura"
----+                            android:id="@+id/medidaTemperaturaGeneral"
----                             android:layout_width="90dp"
----                             android:layout_height="39dp"
----                             android:layout_marginTop="24dp"
----                             android:text="34°C"
----                             android:textSize="31sp"
-----                            app:layout_constraintStart_toStartOf="@+id/textTemperatura"
-----                            app:layout_constraintTop_toBottomOf="@+id/textTemperatura" />
----+                            app:layout_constraintStart_toStartOf="@+id/textTemperaturaGeneral"
----+                            app:layout_constraintTop_toBottomOf="@+id/textTemperaturaGeneral" />
---- 
----                         <ImageView
-----                            android:id="@+id/imgTemperatura"
----+                            android:id="@+id/imgTemperaturaGeneral"
----                             android:layout_width="53dp"
----                             android:layout_height="55dp"
----                             android:layout_marginEnd="1dp"
----                             android:src="@drawable/icons_temperature"
-----                            app:layout_constraintBottom_toBottomOf="@+id/medidaTemperatura"
----+                            app:layout_constraintBottom_toBottomOf="@+id/medidaTemperaturaGeneral"
----                             app:layout_constraintEnd_toEndOf="parent"
-----                            app:layout_constraintStart_toEndOf="@+id/medidaTemperatura"
-----                            app:layout_constraintTop_toTopOf="@+id/medidaTemperatura" />
----+                            app:layout_constraintStart_toEndOf="@+id/medidaTemperaturaGeneral"
----+                            app:layout_constraintTop_toTopOf="@+id/medidaTemperaturaGeneral" />
----                     </androidx.constraintlayout.widget.ConstraintLayout>
----                 </LinearLayout>
----             </androidx.cardview.widget.CardView>
----@@ -148,19 +148,19 @@
---- 
---- 
----                         <TextView
-----                            android:id="@+id/textHumedad"
----+                            android:id="@+id/textHumedadGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginStart="8dp"
----                             android:layout_marginTop="8dp"
----                             android:text="Humedad"
----                             android:textSize="16sp"
-----                            app:layout_constraintBottom_toBottomOf="@+id/switchHumedad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/switchHumedadGeneral"
----                             app:layout_constraintStart_toStartOf="parent"
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <Switch
-----                            android:id="@+id/switchHumedad"
----+                            android:id="@+id/switchHumedadGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginTop="8dp"
----@@ -172,25 +172,25 @@
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <TextView
-----                            android:id="@+id/medidaHumedad"
----+                            android:id="@+id/medidaHumedadGeneral"
----                             android:layout_width="90dp"
----                             android:layout_height="39dp"
----                             android:layout_marginTop="24dp"
----                             android:text="68%"
----                             android:textSize="31sp"
-----                            app:layout_constraintStart_toStartOf="@+id/textHumedad"
-----                            app:layout_constraintTop_toBottomOf="@+id/textHumedad" />
----+                            app:layout_constraintStart_toStartOf="@+id/textHumedadGeneral"
----+                            app:layout_constraintTop_toBottomOf="@+id/textHumedadGeneral" />
---- 
----                         <ImageView
-----                            android:id="@+id/imgHumedad"
----+                            android:id="@+id/imgHumedadGeneral"
----                             android:layout_width="53dp"
----                             android:layout_height="55dp"
----                             android:layout_marginEnd="1dp"
----                             android:src="@drawable/icons_humidity"
-----                            app:layout_constraintBottom_toBottomOf="@+id/medidaHumedad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/medidaHumedadGeneral"
----                             app:layout_constraintEnd_toEndOf="parent"
-----                            app:layout_constraintStart_toEndOf="@+id/medidaHumedad"
-----                            app:layout_constraintTop_toTopOf="@+id/medidaHumedad" />
----+                            app:layout_constraintStart_toEndOf="@+id/medidaHumedadGeneral"
----+                            app:layout_constraintTop_toTopOf="@+id/medidaHumedadGeneral" />
----                     </androidx.constraintlayout.widget.ConstraintLayout>
----                 </LinearLayout>
----             </androidx.cardview.widget.CardView>
----@@ -220,19 +220,19 @@
---- 
---- 
----                         <TextView
-----                            android:id="@+id/textSalinidad"
----+                            android:id="@+id/textSalinidadGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginStart="8dp"
----                             android:layout_marginTop="8dp"
----                             android:text="Salinidad"
----                             android:textSize="16sp"
-----                            app:layout_constraintBottom_toBottomOf="@+id/switchSalinidad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/switchSalinidadGeneral"
----                             app:layout_constraintStart_toStartOf="parent"
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <Switch
-----                            android:id="@+id/switchSalinidad"
----+                            android:id="@+id/switchSalinidadGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginTop="8dp"
----@@ -244,25 +244,25 @@
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <TextView
-----                            android:id="@+id/medidaSalinidad"
----+                            android:id="@+id/medidaSalinidadGeneral"
----                             android:layout_width="90dp"
----                             android:layout_height="39dp"
----                             android:layout_marginTop="24dp"
----                             android:text="10%"
----                             android:textSize="31sp"
-----                            app:layout_constraintStart_toStartOf="@+id/textSalinidad"
-----                            app:layout_constraintTop_toBottomOf="@+id/textSalinidad" />
----+                            app:layout_constraintStart_toStartOf="@+id/textSalinidadGeneral"
----+                            app:layout_constraintTop_toBottomOf="@+id/textSalinidadGeneral" />
---- 
----                         <ImageView
-----                            android:id="@+id/imgSalinidad"
----+                            android:id="@+id/imgSalinidadGeneral"
----                             android:layout_width="53dp"
----                             android:layout_height="55dp"
----                             android:layout_marginEnd="1dp"
----                             android:src="@drawable/icons_salt"
-----                            app:layout_constraintBottom_toBottomOf="@+id/medidaSalinidad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/medidaSalinidadGeneral"
----                             app:layout_constraintEnd_toEndOf="parent"
-----                            app:layout_constraintStart_toEndOf="@+id/medidaSalinidad"
-----                            app:layout_constraintTop_toTopOf="@+id/medidaSalinidad" />
----+                            app:layout_constraintStart_toEndOf="@+id/medidaSalinidadGeneral"
----+                            app:layout_constraintTop_toTopOf="@+id/medidaSalinidadGeneral" />
----                     </androidx.constraintlayout.widget.ConstraintLayout>
----                 </LinearLayout>
----             </androidx.cardview.widget.CardView>
----@@ -292,19 +292,19 @@
---- 
---- 
----                         <TextView
-----                            android:id="@+id/textLuminosidad"
----+                            android:id="@+id/textLuminosidadGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginStart="8dp"
----                             android:layout_marginTop="8dp"
----                             android:text="Luminosidad"
----                             android:textSize="16sp"
-----                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidadGeneral"
----                             app:layout_constraintStart_toStartOf="parent"
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <Switch
-----                            android:id="@+id/switchLuminosidad"
----+                            android:id="@+id/switchLuminosidadGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginTop="8dp"
----@@ -317,25 +317,25 @@
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <TextView
-----                            android:id="@+id/medidasLuminosidad"
----+                            android:id="@+id/medidasLuminosidadGeneral"
----                             android:layout_width="90dp"
----                             android:layout_height="39dp"
----                             android:layout_marginTop="24dp"
----                             android:text="90%"
----                             android:textSize="31sp"
-----                            app:layout_constraintStart_toStartOf="@+id/textLuminosidad"
-----                            app:layout_constraintTop_toBottomOf="@+id/textLuminosidad" />
----+                            app:layout_constraintStart_toStartOf="@+id/textLuminosidadGeneral"
----+                            app:layout_constraintTop_toBottomOf="@+id/textLuminosidadGeneral" />
---- 
----                         <ImageView
-----                            android:id="@+id/imgLuminosidad"
----+                            android:id="@+id/imgLuminosidadGeneral"
----                             android:layout_width="53dp"
----                             android:layout_height="55dp"
----                             android:layout_marginEnd="1dp"
----                             android:src="@drawable/icons_luminosity"
-----                            app:layout_constraintBottom_toBottomOf="@+id/medidasLuminosidad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/medidasLuminosidadGeneral"
----                             app:layout_constraintEnd_toEndOf="parent"
-----                            app:layout_constraintStart_toEndOf="@+id/medidasLuminosidad"
-----                            app:layout_constraintTop_toTopOf="@+id/medidasLuminosidad" />
----+                            app:layout_constraintStart_toEndOf="@+id/medidasLuminosidadGeneral"
----+                            app:layout_constraintTop_toTopOf="@+id/medidasLuminosidadGeneral" />
----                     </androidx.constraintlayout.widget.ConstraintLayout>
----                 </LinearLayout>
----             </androidx.cardview.widget.CardView>
----Index: app/src/main/res/layout/fragment_planta1.xml
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+><ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    tools:context=\".ui.dashboard.DashboardFragment\">\n\n\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\n\n        <RelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginLeft=\"20dp\"\n            android:layout_marginTop=\"10dp\"\n            android:layout_marginRight=\"20dp\">\n\n            <TextView\n                android:id=\"@+id/textDashboard\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Dashboard  >\"\n\n                android:textSize=\"19sp\" />\n\n            <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_below=\"@+id/textDashboard\"\n                android:text=\"4 sensores\"\n\n                android:textSize=\"14sp\" />\n\n            <!--<ImageView\n                android:layout_width=\"62dp\"\n                android:layout_height=\"62dp\"\n                android:layout_alignParentRight=\"true\"\n                android:src=\"@drawable/ic_sun\" />-->\n        </RelativeLayout>\n        <GridLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:columnCount=\"2\"\n            android:rowCount=\"3\"\n            android:alignmentMode=\"alignMargins\"\n            android:columnOrderPreserved=\"false\">\n            <!--temperatura-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Temperatura\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchTemperatura\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:buttonTint=\"#FFFFFF\"\n                            android:checked=\"true\"\n                            android:fitsSystemWindows=\"false\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaTemperatura\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"34°C\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textTemperatura\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textTemperatura\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgTemperatura\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_temperature\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaTemperatura\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--humedad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Humedad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchHumedad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaHumedad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"68%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textHumedad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textHumedad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgHumedad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_humidity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaHumedad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--salinidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Salinidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchSalinidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaSalinidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"10%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textSalinidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textSalinidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgSalinidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_salt\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaSalinidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--Luminosidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Luminosidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchLuminosidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorHighlight=\"#FFFFFF\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidasLuminosidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"90%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textLuminosidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textLuminosidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgLuminosidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_luminosity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidasLuminosidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n\n\n\n\n        </GridLayout>\n\n    </LinearLayout>\n</ScrollView>\n
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/res/layout/fragment_planta1.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/res/layout/fragment_planta1.xml	(date 1607537539251)
----@@ -299,12 +299,12 @@
----                             android:layout_marginTop="8dp"
----                             android:text="Luminosidad"
----                             android:textSize="16sp"
-----                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidadPlamta1"
----                             app:layout_constraintStart_toStartOf="parent"
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <Switch
-----                            android:id="@+id/switchLuminosidad"
----+                            android:id="@+id/switchLuminosidadPlamta1"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginTop="8dp"
----Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+>package com.example.infinitycrop.ui.dashboard;\n\nimport android.os.Bundle;\n\nimport androidx.fragment.app.Fragment;\n\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.TextView;\n\nimport com.example.infinitycrop.R;\n\n/**\n * A simple {@link Fragment} subclass.\n * Use the {@link GeneralFragment#newInstance} factory method to\n * create an instance of this fragment.\n */\npublic class GeneralFragment extends Fragment {\n\n    // TODO: Rename parameter arguments, choose names that match\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\n    private static final String ARG_PARAM1 = \"param1\";\n    private static final String ARG_PARAM2 = \"param2\";\n\n    // TODO: Rename and change types of parameters\n    private String mParam1;\n    private String mParam2;\n\n    public GeneralFragment() {\n        // Required empty public constructor\n    }\n\n    /**\n     * Use this factory method to create a new instance of\n     * this fragment using the provided parameters.\n     *\n     * @param param1 Parameter 1.\n     * @param param2 Parameter 2.\n     * @return A new instance of fragment GeneralFragment.\n     */\n    // TODO: Rename and change types and number of parameters\n    public static GeneralFragment newInstance(String param1, String param2) {\n        GeneralFragment fragment = new GeneralFragment();\n        Bundle args = new Bundle();\n        args.putString(ARG_PARAM1, param1);\n        args.putString(ARG_PARAM2, param2);\n        fragment.setArguments(args);\n        return fragment;\n    }\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        if (getArguments() != null) {\n            mParam1 = getArguments().getString(ARG_PARAM1);\n            mParam2 = getArguments().getString(ARG_PARAM2);\n        }\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        View v = inflater.inflate(R.layout.fragment_general, container, false);\n\n        return v;\n    }\n}
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(date 1607537068118)
----@@ -4,20 +4,34 @@
---- 
---- import androidx.fragment.app.Fragment;
---- 
----+import android.util.Log;
---- import android.view.LayoutInflater;
---- import android.view.View;
---- import android.view.ViewGroup;
----+import android.widget.CompoundButton;
----+import android.widget.Switch;
---- import android.widget.TextView;
---- 
----+import com.example.comun.Mqtt;
---- import com.example.infinitycrop.R;
---- 
----+import org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;
----+import org.eclipse.paho.client.mqttv3.MqttCallback;
----+import org.eclipse.paho.client.mqttv3.MqttClient;
----+import org.eclipse.paho.client.mqttv3.MqttConnectOptions;
----+import org.eclipse.paho.client.mqttv3.MqttException;
----+import org.eclipse.paho.client.mqttv3.MqttMessage;
----+import org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;
----+
----+import static com.example.comun.Mqtt.topicRoot;
----+
---- /**
----  * A simple {@link Fragment} subclass.
----  * Use the {@link GeneralFragment#newInstance} factory method to
----  * create an instance of this fragment.
----  */
-----public class GeneralFragment extends Fragment {
-----
----+public class GeneralFragment extends Fragment implements MqttCallback{
----+    public static MqttClient client = null;
----     // TODO: Rename parameter arguments, choose names that match
----     // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
----     private static final String ARG_PARAM1 = "param1";
----@@ -63,7 +77,108 @@
----                              Bundle savedInstanceState) {
----         // Inflate the layout for this fragment
----         View v = inflater.inflate(R.layout.fragment_general, container, false);
-----
----+        //switch methods
----+        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);
----+        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
----+            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
----+                if (isChecked) {
----+                    // The toggle is enabled
----+                    enviarLucesOn();
----+                } else {
----+                    // The toggle is disabled
----+                    enviarLucesOff();
----+                }
----+            }
----+        });
----         return v;
----     }
----+    public void enviarLucesOff(){
----+        try {
----+            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new
----+                    MemoryPersistence());
----+        } catch (MqttException e) {
----+            e.printStackTrace();
----+        }
----+        MqttConnectOptions connOpts = new MqttConnectOptions();
----+        connOpts.setCleanSession(true);
----+        connOpts.setKeepAliveInterval(60);
----+        connOpts.setWill(topicRoot+"WillTopic", "App desconectada".getBytes(),Mqtt.qos, false);
----+
----+        try {
----+            client.connect(connOpts);
----+        } catch (MqttException e) {
----+            e.printStackTrace();
----+        }
----+
----+        //conexión con el broker Root1 = Lector de datos
----+        //nos subscribimos a topic lectura
----+        try {
----+            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "luces");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
----+            client.subscribe(topicRoot + "luces", Mqtt.qos);
----+            client.setCallback((MqttCallback) this);
----+        } catch (MqttException e) {
----+            Log.e(Mqtt.TAG, "Error al suscribir.", e);
----+        }
----+        try {
----+            Log.i(Mqtt.TAG, "Publicando mensaje: " + "mensaje");
----+            MqttMessage message = new MqttMessage("Superior OFF".getBytes());
----+            message.setQos(Mqtt.qos);
----+            message.setRetained(false);
----+            client.publish(topicRoot+"luces", message);
----+        } catch (MqttException e) {
----+            Log.e(Mqtt.TAG, "Error al publicar.", e);
----+        }
----+    }
----+    public void enviarLucesOn(){
----+        try {
----+            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new
----+                    MemoryPersistence());
----+        } catch (MqttException e) {
----+            e.printStackTrace();
----+        }
----+        MqttConnectOptions connOpts = new MqttConnectOptions();
----+        connOpts.setCleanSession(true);
----+        connOpts.setKeepAliveInterval(60);
----+        connOpts.setWill(topicRoot+"WillTopic", "App desconectada".getBytes(),Mqtt.qos, false);
----+
----+        try {
----+            client.connect(connOpts);
----+        } catch (MqttException e) {
----+            e.printStackTrace();
----+        }
----+
----+        //conexión con el broker Root1 = Lector de datos
----+        //nos subscribimos a topic lectura
----+        try {
----+            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "luces");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
----+            client.subscribe(topicRoot + "luces", Mqtt.qos);
----+            client.setCallback((MqttCallback) this);
----+        } catch (MqttException e) {
----+            Log.e(Mqtt.TAG, "Error al suscribir.", e);
----+        }
----+        try {
----+            Log.i(Mqtt.TAG, "Publicando mensaje: " + "mensaje");
----+            MqttMessage message = new MqttMessage("Superior ON".getBytes());
----+            message.setQos(Mqtt.qos);
----+            message.setRetained(false);
----+            client.publish(topicRoot+"luces", message);
----+        } catch (MqttException e) {
----+            Log.e(Mqtt.TAG, "Error al publicar.", e);
----+        }
----+    }
----+
----+    @Override
----+    public void connectionLost(Throwable cause) {
----+        Log.d(Mqtt.TAG, "Conexión perdida");
----+    }
----+
----+    @Override
----+    public void messageArrived(String topic, MqttMessage message) throws Exception {
----+
----+    }
----+
----+    @Override
----+    public void deliveryComplete(IMqttDeliveryToken token) {
----+        Log.d(Mqtt.TAG, "Entrega completa");
----+    }
---- }
----\ No newline at end of file
----Index: app/src/main/res/layout/fragment_planta2.xml
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+><ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    tools:context=\".ui.dashboard.DashboardFragment\">\n\n\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\n\n        <RelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginLeft=\"20dp\"\n            android:layout_marginTop=\"10dp\"\n            android:layout_marginRight=\"20dp\">\n\n            <TextView\n                android:id=\"@+id/textDashboard\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Dashboard  >\"\n\n                android:textSize=\"19sp\" />\n\n            <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_below=\"@+id/textDashboard\"\n                android:text=\"4 sensores\"\n\n                android:textSize=\"14sp\" />\n\n            <!--<ImageView\n                android:layout_width=\"62dp\"\n                android:layout_height=\"62dp\"\n                android:layout_alignParentRight=\"true\"\n                android:src=\"@drawable/ic_sun\" />-->\n        </RelativeLayout>\n        <GridLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:columnCount=\"2\"\n            android:rowCount=\"3\"\n            android:alignmentMode=\"alignMargins\"\n            android:columnOrderPreserved=\"false\">\n            <!--temperatura-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Temperatura\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchTemperatura\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:buttonTint=\"#FFFFFF\"\n                            android:checked=\"true\"\n                            android:fitsSystemWindows=\"false\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaTemperatura\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"34°C\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textTemperatura\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textTemperatura\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgTemperatura\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_temperature\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaTemperatura\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--humedad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Humedad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchHumedad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaHumedad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"68%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textHumedad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textHumedad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgHumedad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_humidity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaHumedad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--salinidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Salinidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchSalinidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaSalinidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"10%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textSalinidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textSalinidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgSalinidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_salt\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaSalinidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--Luminosidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Luminosidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchLuminosidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorHighlight=\"#FFFFFF\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidasLuminosidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"90%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textLuminosidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textLuminosidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgLuminosidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_luminosity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidasLuminosidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n\n\n\n\n        </GridLayout>\n\n    </LinearLayout>\n</ScrollView>\n
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/res/layout/fragment_planta2.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/res/layout/fragment_planta2.xml	(date 1607537539258)
----@@ -299,12 +299,12 @@
----                             android:layout_marginTop="8dp"
----                             android:text="Luminosidad"
----                             android:textSize="16sp"
-----                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidadPlanta2"
----                             app:layout_constraintStart_toStartOf="parent"
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <Switch
-----                            android:id="@+id/switchLuminosidad"
----+                            android:id="@+id/switchLuminosidadPlanta2"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginTop="8dp"
----Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.app.Activity;\r\nimport android.content.res.ColorStateList;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvModel;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\n\r\nimport java.util.ArrayList;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link DashboardFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class DashboardFragment extends Fragment implements MqttCallback{\r\n\r\n    private RecyclerView recyclerView;\r\n    private StaticRvAdapter staticRvAdapter;\r\n    private TabLayout tabLayout;\r\n    private ViewPager viewPager;\r\n    private ColorStateList def;\r\n\r\n\r\n    public static MqttClient client = null;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public DashboardFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment DashboardFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static DashboardFragment newInstance(String param1, String param2) {\r\n        DashboardFragment fragment = new DashboardFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_dashboard, container, false);\r\n        //FIREBASE\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        final FirebaseUser usuario = mAuth.getCurrentUser();\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=usuario.getUid();\r\n        //guardo el nombre en un textView\r\n        /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);\r\n        String res=\"Hola\"+\" \"+usuario.getDisplayName();\r\n        nombre.setText(res);\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(usuario.getDisplayName() == null){\r\n                    String res1=\"Hola\"+\" \"+snapshot.getString(\"username\");\r\n                    nombre.setText(res1);\r\n                }\r\n            }\r\n        });*/\r\n/*\r\n        //switch methods\r\n        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidad);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n */\r\n\r\n        //RECYCLER VIEW\r\n        ArrayList<StaticRvModel> item=new ArrayList<>();\r\n        item.add(new StaticRvModel(R.drawable.icons_sun,\"Soleado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_night_mode,\"Nocturno\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_energy_saving,\"Ahorro\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_power_off,\"Apagado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_custom,\"Custom\"));\r\n\r\n        final TextView medidasT=v.findViewById(R.id.medidaTemperatura);\r\n        final TextView medidasH=v.findViewById(R.id.medidaHumedad);\r\n        final TextView medidasS=v.findViewById(R.id.medidaSalinidad);\r\n        final TextView medidasL=v.findViewById(R.id.medidasLuminosidad);\r\n\r\n        recyclerView=v.findViewById(R.id.rv_1);\r\n        staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(),LinearLayoutManager.HORIZONTAL,false));\r\n        recyclerView.setAdapter(staticRvAdapter);\r\n\r\n\r\n        //TABS\r\n        tabLayout = v.findViewById(R.id.tab_layout);\r\n        viewPager = v.findViewById(R.id.view_pager);\r\n         //Array\r\n        ArrayList<String> arrayList = new ArrayList<>();\r\n\r\n        //set up with viewpager\r\n        tabLayout.setupWithViewPager(viewPager);\r\n\r\n        TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());\r\n        //Pestañas\r\n        adapter.addFrag(new GeneralFragment(),\"General\");\r\n        adapter.addFrag(new Planta1Fragment(),\"Planta 1\");\r\n        adapter.addFrag(new Planta2Fragment(),\"Planta 2\");\r\n\r\n        viewPager.setAdapter(adapter );\r\n\r\n        /*((MainActivity)getActivity()).ola();*/\r\n     /*   //LEER DATOS FIREBASE\r\n        //Temperatura\r\n       DocumentReference documentTemperatura=fStore.collection(\"SensoresA-T\").document(\"Temperatura\");\r\n        documentTemperatura.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediTemp=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasT.setText(resMediTemp);\r\n            }\r\n        });\r\n        //Humedad\r\n        DocumentReference documentHumedad=fStore.collection(\"SensoresA-T\").document(\"Humedad\");\r\n        documentHumedad.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediHum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasH.setText(resMediHum);\r\n            }\r\n        });\r\n        //Iluminación\r\n        DocumentReference documentIluminación=fStore.collection(\"SensoresA-T\").document(\"Iluminación\");\r\n        documentIluminación.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIlum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasL.setText(resMediIlum);\r\n            }\r\n        });\r\n        //Temperatura ambiente\r\n        DocumentReference documentambiente=fStore.collection(\"SensoresA-T\").document(\"Temperatura ambiente\");\r\n        documentambiente.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIAmb=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasS.setText(resMediIAmb);\r\n            }\r\n        });\r\n\r\n      */\r\n\r\n        return v;\r\n    }\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n}
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(date 1607536963984)
----@@ -128,9 +128,9 @@
----                 }
----             }
----         });*/
-----/*
----+
----         //switch methods
-----        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidad);
----+ /*     Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);
----         switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
----             public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
----                 if (isChecked) {
----@@ -141,10 +141,10 @@
----                     enviarLucesOff();
----                 }
----             }
-----        });
----+        });*/
---- 
---- 
----- */
----+
---- 
----         //RECYCLER VIEW
----         ArrayList<StaticRvModel> item=new ArrayList<>();
----@@ -154,10 +154,10 @@
----         item.add(new StaticRvModel(R.drawable.icons_power_off,"Apagado"));
----         item.add(new StaticRvModel(R.drawable.icons_custom,"Custom"));
---- 
-----        final TextView medidasT=v.findViewById(R.id.medidaTemperatura);
-----        final TextView medidasH=v.findViewById(R.id.medidaHumedad);
-----        final TextView medidasS=v.findViewById(R.id.medidaSalinidad);
-----        final TextView medidasL=v.findViewById(R.id.medidasLuminosidad);
----+        final TextView medidasT=v.findViewById(R.id.medidaTemperaturaGeneral);
----+        final TextView medidasH=v.findViewById(R.id.medidaHumedadGeneral);
----+        final TextView medidasS=v.findViewById(R.id.medidaSalinidadGeneral);
----+        final TextView medidasL=v.findViewById(R.id.medidasLuminosidadGeneral);
---- 
----         recyclerView=v.findViewById(R.id.rv_1);
----         staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);
----Index: things/src/main/java/com/example/things/MainActivity.java
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+>package com.example.things;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.util.Log;\n\nimport com.example.comun.Mqtt;\nimport com.google.android.gms.tasks.OnCompleteListener;\nimport com.google.android.gms.tasks.Task;\nimport com.google.firebase.firestore.FirebaseFirestore;\nimport com.google.firebase.firestore.QuerySnapshot;\n\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\nimport org.eclipse.paho.client.mqttv3.MqttClient;\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\nimport org.eclipse.paho.client.mqttv3.MqttException;\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport static com.example.comun.Mqtt.qos;\nimport static com.example.comun.Mqtt.topicRoot;\n\n\n/**\n * Skeleton of an Android Things activity.\n * <p>\n * Android Things peripheral APIs are accessible through the PeripheralManager\n * For example, the snippet below will open a GPIO pin and set it to HIGH:\n * <p>\n * PeripheralManager manager = PeripheralManager.getInstance();\n * try {\n * Gpio gpio = manager.openGpio(\"BCM6\");\n * gpio.setDirection(Gpio.DIRECTION_OUT_INITIALLY_LOW);\n * gpio.setValue(true);\n * } catch (IOException e) {\n * Log.e(TAG, \"Unable to access GPIO\");\n * }\n * <p>\n * You can find additional examples on GitHub: https://github.com/androidthings\n */\npublic class MainActivity extends AppCompatActivity implements MqttCallback {\n    public static MqttClient client = null;\n    FirebaseFirestore db;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        db = FirebaseFirestore.getInstance();\n\n        try {\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\n                    MemoryPersistence());\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n        MqttConnectOptions connOpts = new MqttConnectOptions();\n        connOpts.setCleanSession(true);\n        connOpts.setKeepAliveInterval(60);\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\n\n        try {\n            client.connect(connOpts);\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n\n\n        //conexión con el broker Root1 = Lector de datos\n        //nos subscribimos a topic lectura\n        try {\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"lecturaDatos\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\n            client.subscribe(topicRoot + \"lecturaDatos\", Mqtt.qos);\n            client.setCallback(this);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\n        }\n\n    }\n    // Se ejecuta cuando se pierde la conexión\n    @Override\n    public void connectionLost(Throwable cause) {\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\n\n    }\n    @Override\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\n        String payload = new String(message.getPayload());\n        Log.d(Mqtt.TAG, \"Recibiendo: \" + topic + \"->\" + payload);\n\n        if(topic.equals(topicRoot+\"lecturaDatos\")){\n            //topicLectura(payload);\n            // parts0=humedad,parts1=iluminosidad,parts2=humedadHambiente,parts3=temperatura\n            String[] parts = payload.split(\"-\");//comprueba si los datos introducidos van referentes a cada sensor: nombre,medición, estado\n            Log.d(\"PRUUEBA\",parts[0] + \" \"+parts[1] + \" \"+parts[2] + \" \"+parts[3] + \" \");\n            Map<String, Object> dataTemp = new HashMap<>();\n            dataTemp.put(\"Estado:\", \"Activado\");\n            dataTemp.put(\"Medición\", parts[3]);\n            db.collection(\"SensoresA-T\").document(\"Temperatura\").set(dataTemp);\n\n        }\n\n    }\n     private  void topicLectura(final String payload)  {}\n\n    private void topicLuces(final String payload) {\n    }\n\n    private void topicRiego(final String payload) {\n    }\n\n    private void topicVentiladores(final String payload) {\n    }\n\n\n\n\n\n\n\n    @Override\n    public void onDestroy() {\n        try {\n            Log.i(Mqtt.TAG, \"Desconectado\");\n            client.disconnect();\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al desconectar.\", e);\n        }\n        super.onDestroy();\n    }\n\n\n\n\n\n    @Override\n    public void deliveryComplete(IMqttDeliveryToken token) {\n        Log.d(Mqtt.TAG, \"Entrega completa\");\n\n    }\n}
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- things/src/main/java/com/example/things/MainActivity.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ things/src/main/java/com/example/things/MainActivity.java	(date 1607533992044)
----@@ -93,7 +93,7 @@
----     public void messageArrived(String topic, MqttMessage message) throws Exception {
----         String payload = new String(message.getPayload());
----         Log.d(Mqtt.TAG, "Recibiendo: " + topic + "->" + payload);
-----
----+        db.collection("prueba").add(payload);
----         if(topic.equals(topicRoot+"lecturaDatos")){
----             //topicLectura(payload);
----             // parts0=humedad,parts1=iluminosidad,parts2=humedadHambiente,parts3=temperatura
---Index: app/src/main/res/values/strings.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><resources>\n    <string name=\"app_name\">Infinity Crop</string>\n    <string name=\"title_home\">Infinity Crop</string>\n    <string name=\"title_inicio\">Inicio</string>\n    <string name=\"title_dashboard\">Panel de control</string>\n    <string name=\"title_notifications\">Notificaciones</string>\n    <string name=\"title_wellcome_login\">¡Te damos la bienvenida!</string>\n    <string name=\"title_orderLog\">Inicia sesión</string>\n    <string name=\"title_cont_faceboock\">Iniciar sesión con Facebook</string>\n    <string name=\"title_cont_google\">Iniciar sesión con Google</string>\n    <string name=\"title_cont_mail\">Iniciar sesión con Email</string>\n\n    <string name=\"title_register\">Registrate</string>\n    <string name=\"title_bienv\">Hola de nuevo!</string>\n    <string name=\"title_bienvR\">¡Hola, es un placer!</string>\n    <string name=\"title_userR\">Introduce un correo:</string>\n    <string name=\"title_nameR\">Introduce un nombre:</string>\n    <string name=\"title_passwordR\">Introduce una contraseña:</string>\n    <string name=\"title_registrar\">Acceder</string>\n    <string name=\"btn_newuser\">Si no tienes una cuenta, puedes registarte <u>Aquí</u> </string>\n    <string name=\"title_olvidado\">He olvidado mi contraseña</string>\n    <!-- ANYADIR UNA NUEVA MAQUINA STRINGS -->\n    <string name=\"title_register_machine\">Registra una nueva máquina</string>\n    <string name=\"title_infoMachine\">Completa estos campos</string>\n    <string name=\"btn_registMachine\">Añadir máquina</string>\n    <string name=\"title_name_machine\">Introduce el nombre de tu máquina:</string>\n    <string name=\"title_name_model\">Modelo de tu máquina:</string>\n    <string name=\"title_name_favorites\">Añadir tu máquina a favoritos</string>\n    <string name=\"title_scan_machine\">Escanear máquina</string>\n\n\n\n    <!-- TODO: Remove or change this placeholder text -->\n\n        <string name=\"change_city\">Change city</string>\n\n        <!-- Put your own APP ID here -->\n        <string name=\"open_weather_maps_app_id\">11111</string>\n\n        <string name=\"weather_sunny\">&#xf00d;</string>\n        <string name=\"weather_clear_night\">&#xf02e;</string>\n\n        <string name=\"weather_foggy\">&#xf014;</string>\n        <string name=\"weather_cloudy\">&#xf013;</string>\n        <string name=\"weather_rainy\">&#xf019;</string>\n        <string name=\"weather_snowy\">&#xf01b;</string>\n        <string name=\"weather_thunder\">&#xf01e;</string>\n        <string name=\"weather_drizzle\">&#xf01c;</string>\n\n        <string name=\"place_not_found\">Sorry, no weather data found.</string>\n        <string name=\"facebook_app_id\">140146287567868</string>\n        <string name=\"fb_login_protocol_scheme\">fb140146287567868</string>\n\n\n</resources>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/res/values/strings.xml	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ app/src/main/res/values/strings.xml	(date 1607987125225)
---@@ -29,27 +29,28 @@
---     <string name="title_scan_machine">Escanear máquina</string>
--- 
--- 
----
---     <!-- TODO: Remove or change this placeholder text -->
--- 
----        <string name="change_city">Change city</string>
---+    <string name="change_city">Change city</string>
--- 
----        <!-- Put your own APP ID here -->
----        <string name="open_weather_maps_app_id">11111</string>
---+    <!-- Put your own APP ID here -->
---+    <string name="open_weather_maps_app_id">11111</string>
--- 
----        <string name="weather_sunny">&#xf00d;</string>
----        <string name="weather_clear_night">&#xf02e;</string>
---+    <string name="weather_sunny">&#xf00d;</string>
---+    <string name="weather_clear_night">&#xf02e;</string>
--- 
----        <string name="weather_foggy">&#xf014;</string>
----        <string name="weather_cloudy">&#xf013;</string>
----        <string name="weather_rainy">&#xf019;</string>
----        <string name="weather_snowy">&#xf01b;</string>
----        <string name="weather_thunder">&#xf01e;</string>
----        <string name="weather_drizzle">&#xf01c;</string>
---+    <string name="weather_foggy">&#xf014;</string>
---+    <string name="weather_cloudy">&#xf013;</string>
---+    <string name="weather_rainy">&#xf019;</string>
---+    <string name="weather_snowy">&#xf01b;</string>
---+    <string name="weather_thunder">&#xf01e;</string>
---+    <string name="weather_drizzle">&#xf01c;</string>
--- 
----        <string name="place_not_found">Sorry, no weather data found.</string>
----        <string name="facebook_app_id">140146287567868</string>
----        <string name="fb_login_protocol_scheme">fb140146287567868</string>
---+    <string name="place_not_found">Sorry, no weather data found.</string>
---+    <string name="facebook_app_id">140146287567868</string>
---+    <string name="fb_login_protocol_scheme">fb140146287567868</string>
---+    <!-- TODO: Remove or change this placeholder text -->
---+    <string name="hello_blank_fragment">Hello blank fragment</string>
--- 
--- 
--- </resources>
---\ No newline at end of file
---Index: things/src/main/java/com/example/things/MainActivity.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.things;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.util.Log;\n\nimport com.example.comun.Mqtt;\nimport com.google.android.gms.tasks.OnCompleteListener;\nimport com.google.android.gms.tasks.Task;\nimport com.google.firebase.firestore.FirebaseFirestore;\nimport com.google.firebase.firestore.QuerySnapshot;\n\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\nimport org.eclipse.paho.client.mqttv3.MqttClient;\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\nimport org.eclipse.paho.client.mqttv3.MqttException;\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport static com.example.comun.Mqtt.qos;\nimport static com.example.comun.Mqtt.topicRoot;\n\n\n/**\n * Skeleton of an Android Things activity.\n * <p>\n * Android Things peripheral APIs are accessible through the PeripheralManager\n * For example, the snippet below will open a GPIO pin and set it to HIGH:\n * <p>\n * PeripheralManager manager = PeripheralManager.getInstance();\n * try {\n * Gpio gpio = manager.openGpio(\"BCM6\");\n * gpio.setDirection(Gpio.DIRECTION_OUT_INITIALLY_LOW);\n * gpio.setValue(true);\n * } catch (IOException e) {\n * Log.e(TAG, \"Unable to access GPIO\");\n * }\n * <p>\n * You can find additional examples on GitHub: https://github.com/androidthings\n */\npublic class MainActivity extends AppCompatActivity implements MqttCallback {\n    public static MqttClient client = null;\n    FirebaseFirestore db;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        db = FirebaseFirestore.getInstance();\n\n        try {\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\n                    MemoryPersistence());\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n        MqttConnectOptions connOpts = new MqttConnectOptions();\n        connOpts.setCleanSession(true);\n        connOpts.setKeepAliveInterval(60);\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\n\n        try {\n            client.connect(connOpts);\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n\n\n        //conexión con el broker Root1 = Lector de datos\n        //nos subscribimos a topic lectura\n        try {\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"lecturaDatos\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\n            client.subscribe(topicRoot + \"lecturaDatos\", Mqtt.qos);\n            client.setCallback(this);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\n        }\n\n    }\n    // Se ejecuta cuando se pierde la conexión\n    @Override\n    public void connectionLost(Throwable cause) {\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\n\n    }\n    @Override\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\n        String payload = new String(message.getPayload());\n        Log.d(Mqtt.TAG, \"Recibiendo: \" + topic + \"->\" + payload);\n        db.collection(\"prueba\").add(payload);\n        if(topic.equals(topicRoot+\"lecturaDatos\")){\n            //topicLectura(payload);\n            // parts0=humedad,parts1=iluminosidad,parts2=humedadHambiente,parts3=temperatura\n            String[] parts = payload.split(\"-\");//comprueba si los datos introducidos van referentes a cada sensor: nombre,medición, estado\n            Log.d(\"PRUUEBA\",parts[0] + \" \"+parts[1] + \" \"+parts[2] + \" \"+parts[3] + \" \");\n\n\n        }\n\n    }\n     private  void topicLectura(final String payload)  {}\n\n    private void topicLuces(final String payload) {\n    }\n\n    private void topicRiego(final String payload) {\n    }\n\n    private void topicVentiladores(final String payload) {\n    }\n\n\n\n\n\n\n\n    @Override\n    public void onDestroy() {\n        try {\n            Log.i(Mqtt.TAG, \"Desconectado\");\n            client.disconnect();\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al desconectar.\", e);\n        }\n        super.onDestroy();\n    }\n\n\n\n\n\n    @Override\n    public void deliveryComplete(IMqttDeliveryToken token) {\n        Log.d(Mqtt.TAG, \"Entrega completa\");\n\n    }\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ things/src/main/java/com/example/things/MainActivity.java	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ things/src/main/java/com/example/things/MainActivity.java	(date 1608559850991)
---@@ -64,19 +64,16 @@
---         connOpts.setCleanSession(true);
---         connOpts.setKeepAliveInterval(60);
---         connOpts.setWill(topicRoot+"WillTopic", "App desconectada".getBytes(),Mqtt.qos, false);
----
---         try {
---             client.connect(connOpts);
---         } catch (MqttException e) {
---             e.printStackTrace();
---         }
--- 
----
----        //conexión con el broker Root1 = Lector de datos
----        //nos subscribimos a topic lectura
---+        // Nos suscribimos al topic rfid
---         try {
----            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "lecturaDatos");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
----            client.subscribe(topicRoot + "lecturaDatos", Mqtt.qos);
---+            Log.i(Mqtt.TAG, "Suscrito a " + topicRoot+"lecturaDatos");
---+            client.subscribe(topicRoot+"lecturaDatos", qos);
---             client.setCallback(this);
---         } catch (MqttException e) {
---             Log.e(Mqtt.TAG, "Error al suscribir.", e);
---@@ -87,39 +84,17 @@
---     @Override
---     public void connectionLost(Throwable cause) {
---         Log.d(Mqtt.TAG, "Conexión perdida");
----
---     }
---+
---+    // Se ejecuta cuando se publica algo en los topics subscritos
---     @Override
---     public void messageArrived(String topic, MqttMessage message) throws Exception {
---         String payload = new String(message.getPayload());
---         Log.d(Mqtt.TAG, "Recibiendo: " + topic + "->" + payload);
----        db.collection("prueba").add(payload);
----        if(topic.equals(topicRoot+"lecturaDatos")){
----            //topicLectura(payload);
----            // parts0=humedad,parts1=iluminosidad,parts2=humedadHambiente,parts3=temperatura
----            String[] parts = payload.split("-");//comprueba si los datos introducidos van referentes a cada sensor: nombre,medición, estado
----            Log.d("PRUUEBA",parts[0] + " "+parts[1] + " "+parts[2] + " "+parts[3] + " ");
----
----
----        }
----
----    }
----     private  void topicLectura(final String payload)  {}
----
----    private void topicLuces(final String payload) {
----    }
--- 
----    private void topicRiego(final String payload) {
----    }
---+        db.collection("pruebaaaa").add(payload);
--- 
----    private void topicVentiladores(final String payload) {
---     }
----
----
----
----
----
----
--- 
---     @Override
---     public void onDestroy() {
---Index: github.properties
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>gpr.usr = 61469172\ngpr.key = 72a0f63b7097b413e8ff78a7dd6ca9412aaf232c
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>windows-1252
---===================================================================
------ github.properties	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ github.properties	(date 1607628748873)
---@@ -1,2 +1,2 @@
----gpr.usr = 61469172
----gpr.key = 72a0f63b7097b413e8ff78a7dd6ca9412aaf232c
---\ No newline at end of file
---+gpr.usr = 61473165
---+gpr.key = 9671a8c2e26934b214e49dd99b96077296ee2aca
---\ No newline at end of file
---Index: app/src/main/res/menu/nav_item.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\">\r\n    <item\r\n        android:id=\"@+id/home\"\r\n        android:icon=\"@drawable/ic_home\"\r\n        android:title=\"Inicio\"\r\n        app:cnb_backgroundColor=\"@color/colorPrimaryDashboard\"\r\n        app:cnb_iconColor=\"#ffffff\"\r\n        app:cnb_textColor=\"#ffffff\" />\r\n    <item\r\n        android:id=\"@+id/graphics\"\r\n        android:icon=\"@drawable/icons_line_chart\"\r\n        android:title=\"Graphics\"\r\n        app:cnb_backgroundColor=\"@color/colorPrimaryDashboard\"\r\n        app:cnb_iconColor=\"#ffffff\"\r\n        app:cnb_textColor=\"#ffffff\" />\r\n    <item\r\n        android:id=\"@+id/notifications\"\r\n        android:icon=\"@drawable/ic_baseline_map\"\r\n        android:title=\"Mapa\"\r\n        app:cnb_backgroundColor=\"@color/colorPrimaryDashboard\"\r\n        app:cnb_iconColor=\"#ffffff\"\r\n        app:cnb_textColor=\"#ffffff\" />\r\n    <item\r\n        android:id=\"@+id/profile\"\r\n        android:icon=\"@drawable/ic_profile\"\r\n        android:title=\"Perfil\"\r\n        app:cnb_backgroundColor=\"@color/colorPrimaryDashboard\"\r\n        app:cnb_iconColor=\"#ffffff\"\r\n        app:cnb_textColor=\"#ffffff\" />\r\n</menu>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/res/menu/nav_item.xml	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ app/src/main/res/menu/nav_item.xml	(date 1607985987066)
---@@ -10,8 +10,8 @@
---         app:cnb_textColor="#ffffff" />
---     <item
---         android:id="@+id/graphics"
----        android:icon="@drawable/icons_line_chart"
----        android:title="Graphics"
---+        android:icon="@drawable/icons_dashboard"
---+        android:title="Panel de control"
---         app:cnb_backgroundColor="@color/colorPrimaryDashboard"
---         app:cnb_iconColor="#ffffff"
---         app:cnb_textColor="#ffffff" />
---Index: app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.graphic;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.Query;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link GraphicFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class GraphicFragment extends Fragment {\r\n    private AdaptadorImagenes adaptador;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public GraphicFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment GraphicFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static GraphicFragment newInstance(String param1, String param2) {\r\n        GraphicFragment fragment = new GraphicFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_graphic, container, false);\r\n\r\n        RecyclerView recyclerView = v.findViewById(R.id.image_list);\r\n        Query query = FirebaseFirestore.getInstance()\r\n                .collection(\"imagenes\");\r\n        FirestoreRecyclerOptions<Imagen> opciones = new FirestoreRecyclerOptions\r\n                .Builder<Imagen>().setQuery(query, Imagen.class).build();\r\n        adaptador = new AdaptadorImagenes(getContext(), opciones);\r\n        recyclerView.setAdapter(adaptador);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(getContext()));\r\n\r\n        return v;\r\n    }\r\n    @Override public void onStart() {\r\n        super.onStart();\r\n        adaptador.startListening();\r\n    }\r\n    @Override public void onStop() {\r\n        super.onStop();\r\n        adaptador.stopListening();\r\n    }\r\n\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java	(date 1607644902576)
---@@ -9,6 +9,7 @@
--- import android.view.LayoutInflater;
--- import android.view.View;
--- import android.view.ViewGroup;
---+import android.widget.Button;
--- 
--- import com.example.infinitycrop.R;
--- import com.firebase.ui.firestore.FirestoreRecyclerOptions;
---Index: app/src/main/java/com/example/infinitycrop/MainActivity.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop;\nimport android.os.Bundle;\n\nimport com.example.infinitycrop.ui.dashboard.DashboardFragment;\nimport com.example.infinitycrop.ui.graphic.GraphicFragment;\nimport com.example.infinitycrop.ui.map.MapFragment;\nimport com.example.infinitycrop.ui.profile.ProfileFragment;\nimport com.google.firebase.firestore.FirebaseFirestore;\nimport com.ismaeldivita.chipnavigation.ChipNavigationBar;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.fragment.app.Fragment;\nimport androidx.fragment.app.FragmentManager;\nimport androidx.fragment.app.FragmentPagerAdapter;\nimport androidx.viewpager.widget.ViewPager;\n\nimport java.util.ArrayList;\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private ChipNavigationBar chipNavigationBar;\n    private ViewPager viewPager;\n    private Fragment fragment=null;\n    private int index = 0;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        setTheme(R.style.AppThemeHome);\n        super.onCreate(savedInstanceState);\n\n        setContentView(R.layout.activity_main);\n        chipNavigationBar=findViewById(R.id.chipNavigation);\n        viewPager = findViewById(R.id.view_pager11);\n        chipNavigationBar.setItemSelected(R.id.home,true);\n\n        ViewPagerAdapter viewPagerAdapter = new ViewPagerAdapter(getSupportFragmentManager());\n        viewPager.setAdapter(viewPagerAdapter);\n\n        final ViewPagerAdapter adapter = new ViewPagerAdapter(getSupportFragmentManager());\n        final DashboardFragment fragment_1 = new DashboardFragment();\n        final GraphicFragment fragment_2 = new GraphicFragment();\n        final MapFragment fragment_3 = new MapFragment();\n        final ProfileFragment fragment_4 = new ProfileFragment();\n        adapter.addFragment(fragment_1);\n        adapter.addFragment(fragment_2);\n        adapter.addFragment(fragment_3);\n        adapter.addFragment(fragment_4);\n        viewPager.setAdapter(adapter);\n        viewPager.setOffscreenPageLimit(4);\n        index = 1;\n        chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {\n            @Override\n            public void onItemSelected(int i) {\n                switch(i){\n                    case R.id.home:\n                        viewPager.setCurrentItem(0);\n                        break;\n                    case R.id.graphics:\n                        viewPager.setCurrentItem(1);\n                        break;\n                    case R.id.notifications:\n                        viewPager.setCurrentItem(2);\n                        break;\n                    case R.id.profile:\n                        viewPager.setCurrentItem(3);\n                        break;\n                }\n\n\n            }\n        });\n\n\n        viewPager.addOnPageChangeListener(new ViewPager.OnPageChangeListener() {\n            @Override\n            public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {\n\n            }\n\n            @Override\n            public void onPageSelected(int position) {\n\n                if (position == 0){\n\n                    chipNavigationBar.setItemSelected(R.id.home, true);\n                    chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {\n                        @Override\n                        public void onItemSelected(int id) {\n\n                            switch(id){\n                                case R.id.home:\n                                    viewPager.setCurrentItem(0);\n                                    break;\n                                case R.id.graphics:\n                                    viewPager.setCurrentItem(1);\n                                    break;\n                                case R.id.notifications:\n                                    viewPager.setCurrentItem(2);\n                                    break;\n                                case R.id.profile:\n                                    viewPager.setCurrentItem(3);\n                                    break;\n                            }\n                        }\n                    });\n\n                    index = 0;\n\n                }else if (position == 1){\n\n                    chipNavigationBar.setItemSelected(R.id.graphics, true);\n\n                    if(index == 0 || index == 2){\n\n                        //fragment_2.downloadPlates_2();\n                    }\n                    index = 1;\n                    //Toast.makeText(Home.this, \"\"+index, Toast.LENGTH_SHORT).show();\n                }else if (position == 2){\n\n                    chipNavigationBar.setItemSelected(R.id.notifications, true);\n                    chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {\n                        @Override\n                        public void onItemSelected(int id) {\n\n                            switch(id){\n                                case R.id.home:\n                                    viewPager.setCurrentItem(0);\n                                    break;\n                                case R.id.graphics:\n                                    viewPager.setCurrentItem(1);\n                                    break;\n                                case R.id.notifications:\n                                    viewPager.setCurrentItem(2);\n                                    break;\n                                case R.id.profile:\n                                    viewPager.setCurrentItem(3);\n                                    break;\n                            }\n                        }\n                    });\n\n                    index = 2;\n\n                }else if (position == 3){\n\n                    chipNavigationBar.setItemSelected(R.id.profile, true);\n                    chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {\n                        @Override\n                        public void onItemSelected(int id) {\n\n                            switch(id){\n                                case R.id.home:\n                                    viewPager.setCurrentItem(0);\n                                    break;\n                                case R.id.graphics:\n                                    viewPager.setCurrentItem(1);\n                                    break;\n                                case R.id.notifications:\n                                    viewPager.setCurrentItem(2);\n                                    break;\n                                case R.id.profile:\n                                    viewPager.setCurrentItem(3);\n                                    break;\n                            }\n                        }\n                    });\n\n                    index = 3;\n                }\n            }\n\n            @Override\n            public void onPageScrollStateChanged(int state) {\n\n            }\n        });\n    }\n\n\n    class ViewPagerAdapter extends FragmentPagerAdapter {\n\n\n\n        private ArrayList<Fragment> fragments;\n        private ArrayList<String> titles;\n\n        ViewPagerAdapter (FragmentManager fm){\n            super(fm);\n            this.fragments = new ArrayList<>();\n            this.titles = new ArrayList<>();\n\n        }\n\n        @NonNull\n        @Override\n        public Fragment getItem(int position) {\n            return fragments.get(position);\n        }\n\n        @Override\n        public int getCount() {\n            return fragments.size();\n        }\n\n        public void addFragment(Fragment fragment){\n            fragments.add(fragment);\n\n        }\n\n    }\n\n\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/MainActivity.java	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ app/src/main/java/com/example/infinitycrop/MainActivity.java	(date 1608935788889)
---@@ -1,6 +1,8 @@
--- package com.example.infinitycrop;
--- import android.os.Bundle;
---+import android.widget.Toast;
--- 
---+import com.example.infinitycrop.ui.control_panel.Control_panelFragment;
--- import com.example.infinitycrop.ui.dashboard.DashboardFragment;
--- import com.example.infinitycrop.ui.graphic.GraphicFragment;
--- import com.example.infinitycrop.ui.map.MapFragment;
---@@ -32,6 +34,10 @@
---         setTheme(R.style.AppThemeHome);
---         super.onCreate(savedInstanceState);
--- 
---+        Bundle extras = getIntent().getExtras();
---+        String s = extras.getString("machine");
---+        Toast.makeText(this, s , Toast.LENGTH_SHORT).show();
---+
---         setContentView(R.layout.activity_main);
---         chipNavigationBar=findViewById(R.id.chipNavigation);
---         viewPager = findViewById(R.id.view_pager11);
---@@ -42,7 +48,8 @@
--- 
---         final ViewPagerAdapter adapter = new ViewPagerAdapter(getSupportFragmentManager());
---         final DashboardFragment fragment_1 = new DashboardFragment();
----        final GraphicFragment fragment_2 = new GraphicFragment();
---+        //final GraphicFragment fragment_2 = new GraphicFragment();
---+        final Control_panelFragment fragment_2 = new Control_panelFragment();
---         final MapFragment fragment_3 = new MapFragment();
---         final ProfileFragment fragment_4 = new ProfileFragment();
---         adapter.addFragment(fragment_1);
---Index: app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.list_machine;\r\n\r\nimport android.content.Intent;\r\nimport android.media.Image;\r\nimport android.os.Bundle;\r\nimport android.os.Parcelable;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.ItemTouchHelper;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.logmail.RegisterActivity;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerAdapter;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.Query;\r\n\r\nimport java.text.BreakIterator;\r\nimport java.util.Map;\r\n\r\npublic class MainActivityMachineList extends AppCompatActivity {\r\n    private FirebaseFirestore firebaseFirestore;\r\n    private RecyclerView mFirestoreList;\r\n    private Adapter adapter;\r\n    private FirebaseAuth firebaseAuth;\r\n    Button addBtn;//boton añadir nueva maquina\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_list_machines);\r\n        firebaseFirestore=FirebaseFirestore.getInstance();\r\n        mFirestoreList=findViewById(R.id.firestore_list);\r\n        firebaseAuth=FirebaseAuth.getInstance();\r\n        String uid=firebaseAuth.getUid();\r\n        //Query\r\n        Query query=firebaseFirestore\r\n                .collection(\"Machine\")\r\n                .whereEqualTo(\"userUID\", uid)\r\n                .orderBy(\"priority\",Query.Direction.ASCENDING);\r\n        //RecyclerView\r\n        FirestoreRecyclerOptions<MachineModel> options=new FirestoreRecyclerOptions.Builder<MachineModel>()\r\n                .setQuery(query, MachineModel.class)\r\n                .build();\r\n        //View Holder\r\n        adapter= new Adapter(options);\r\n        mFirestoreList.setHasFixedSize(true);\r\n        mFirestoreList.setLayoutManager(new LinearLayoutManager(this));\r\n        mFirestoreList.setAdapter(adapter);\r\n\r\n        new ItemTouchHelper(new ItemTouchHelper.SimpleCallback(0,\r\n                ItemTouchHelper.LEFT | ItemTouchHelper.RIGHT) {\r\n            @Override\r\n            public boolean onMove(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder, RecyclerView.ViewHolder target) {\r\n                return false;\r\n            }\r\n            @Override\r\n            public void onSwiped(RecyclerView.ViewHolder viewHolder, int direction) {\r\n                Toast.makeText(getApplicationContext(), \"Maquina eliminada con éxito\", Toast.LENGTH_SHORT).show();\r\n                adapter.deleteItem(viewHolder.getAdapterPosition());\r\n            }\r\n        }).attachToRecyclerView(mFirestoreList);\r\n\r\n        adapter.setOnItemClickListener(new Adapter.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(DocumentSnapshot documentSnapshot, int position) {\r\n                //documentSnapshot.getData() -> devuelve all que tiene la maquina en firebase\r\n                MachineModel machine = documentSnapshot.toObject(MachineModel.class);\r\n                String id = documentSnapshot.getId();\r\n                String path = documentSnapshot.getReference().getPath(); //devuelve ruta en firebase Machine\\madara\r\n                /*Toast.makeText(MainActivityMachineList.this,\r\n                        \"Position: \" + position + \" ID: \" + id +\"  algo   \"+ documentSnapshot.getData(), Toast.LENGTH_SHORT).show();*/\r\n                Intent intent = new Intent(getBaseContext(), MainActivity.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n        FloatingActionButton addbtn = (FloatingActionButton) findViewById(R.id.button_add_machine);\r\n        addbtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent (getApplicationContext(), AddMachine.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        adapter.stopListening();\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        adapter.startListening();\r\n    }\r\n}\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(date 1608935788825)
---@@ -84,6 +84,7 @@
---                 /*Toast.makeText(MainActivityMachineList.this,
---                         "Position: " + position + " ID: " + id +"  algo   "+ documentSnapshot.getData(), Toast.LENGTH_SHORT).show();*/
---                 Intent intent = new Intent(getBaseContext(), MainActivity.class);
---+                intent.putExtra("machine", id);
---                 startActivity(intent);
---             }
---         });
---Index: comun/src/main/java/com/example/comun/Mqtt.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.comun;\n\npublic class Mqtt {\n    public static final String TAG = \"MQTT\";\n    public static final String topicRoot=\"infinity/senyal/\";\n\n\n    //Reemplaza equipo por el nombre de tu equipo de prácticas\n    public static final int qos = 1;\n    public static final String broker = \"tcp://broker.hivemq.com:1883\";\n    public static final String clientId = \"IotTestInfinity123434\";\n//Reemplaza ClientId con un valor diferente\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ comun/src/main/java/com/example/comun/Mqtt.java	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ comun/src/main/java/com/example/comun/Mqtt.java	(date 1607641263326)
---@@ -8,6 +8,6 @@
---     //Reemplaza equipo por el nombre de tu equipo de prácticas
---     public static final int qos = 1;
---     public static final String broker = "tcp://broker.hivemq.com:1883";
----    public static final String clientId = "IotTestInfinity123434";
---+    public static final String clientId = "IotTestInfinity1234";
--- //Reemplaza ClientId con un valor diferente
--- }
---\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20_[Default_Changelist]/shelved.patch
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--@@ -1,248 +0,0 @@
---Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.Manifest;\r\nimport android.app.Activity;\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.content.res.ColorStateList;\r\nimport android.location.Address;\r\nimport android.location.Geocoder;\r\nimport android.location.Location;\r\nimport android.location.LocationManager;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.os.StrictMode;\r\nimport android.provider.Settings;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvModel;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.location.FusedLocationProviderClient;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.annotations.NotNull;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.squareup.okhttp.Call;\r\nimport com.squareup.okhttp.Callback;\r\nimport com.squareup.okhttp.OkHttpClient;\r\nimport com.squareup.okhttp.Request;\r\nimport com.squareup.okhttp.Response;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link DashboardFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class DashboardFragment extends Fragment implements MqttCallback{\r\n\r\n    private RecyclerView recyclerView;\r\n    private StaticRvAdapter staticRvAdapter;\r\n    private TabLayout tabLayout;\r\n    private ViewPager viewPager;\r\n    //WEATHER\r\n    private static  final int REQUEST_LOCATION=1;\r\n    double lat;\r\n    double longi;\r\n\r\n    TextView showLocationTxt;\r\n\r\n    LocationManager locationManager;\r\n    String latitude,longitude;\r\n\r\n    TextView view_city;\r\n    TextView view_temp;\r\n    TextView view_desc;\r\n    TextView view_country;\r\n\r\n    ImageView view_weather;\r\n    //\r\n\r\n\r\n    public static MqttClient client = null;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public DashboardFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment DashboardFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static DashboardFragment newInstance(String param1, String param2) {\r\n        DashboardFragment fragment = new DashboardFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_dashboard, container, false);\r\n        //FIREBASE\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        final FirebaseUser usuario = mAuth.getCurrentUser();\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=usuario.getUid();\r\n        //guardo el nombre en un textView\r\n        /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);\r\n        String res=\"Hola\"+\" \"+usuario.getDisplayName();\r\n        nombre.setText(res);\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(usuario.getDisplayName() == null){\r\n                    String res1=\"Hola\"+\" \"+snapshot.getString(\"username\");\r\n                    nombre.setText(res1);\r\n                }\r\n            }\r\n        });*/\r\n\r\n        //switch methods\r\n /*     Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });*/\r\n\r\n\r\n        //WEATHER\r\n        ActivityCompat.requestPermissions(getActivity(),new String[]\r\n                {Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n\r\n        view_city =v.findViewById(R.id.town);\r\n        view_city.setText(\"\");\r\n        view_temp =v.findViewById(R.id.temp);\r\n        view_temp.setText(\"\");\r\n        view_desc =v.findViewById(R.id.desc);\r\n        view_desc.setText(\"\");\r\n        view_country=v.findViewById(R.id.txtCountry);\r\n        view_country.setText(\"\");\r\n        view_weather =v.findViewById(R.id.wheather_image);\r\n\r\n        locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);\r\n        inicioGPS();\r\n        //\r\n\r\n\r\n\r\n\r\n        //RECYCLER VIEW\r\n        ArrayList<StaticRvModel> item=new ArrayList<>();\r\n        item.add(new StaticRvModel(R.drawable.icons_sun,\"Soleado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_night_mode,\"Nocturno\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_energy_saving,\"Ahorro\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_power_off,\"Apagado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_custom,\"Custom\"));\r\n\r\n        final TextView medidasT=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidasH=v.findViewById(R.id.medidaHumedadGeneral);\r\n        final TextView medidasS=v.findViewById(R.id.medidaSalinidadGeneral);\r\n        final TextView medidasL=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n\r\n        recyclerView=v.findViewById(R.id.rv_1);\r\n        staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(),LinearLayoutManager.HORIZONTAL,false));\r\n        recyclerView.setAdapter(staticRvAdapter);\r\n\r\n\r\n        //TABS\r\n        tabLayout = v.findViewById(R.id.tab_layout);\r\n        viewPager = v.findViewById(R.id.view_pager);\r\n         //Array\r\n        ArrayList<String> arrayList = new ArrayList<>();\r\n\r\n        //set up with viewpager\r\n        tabLayout.setupWithViewPager(viewPager);\r\n\r\n        TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());\r\n        //Pestañas\r\n        adapter.addFrag(new GeneralFragment(),\"General\");\r\n        adapter.addFrag(new Planta1Fragment(),\"Planta 1\");\r\n        adapter.addFrag(new Planta2Fragment(),\"Planta 2\");\r\n\r\n        viewPager.setAdapter(adapter );\r\n\r\n        /*((MainActivity)getActivity()).ola();*/\r\n     /*   //LEER DATOS FIREBASE\r\n        //Temperatura\r\n       DocumentReference documentTemperatura=fStore.collection(\"SensoresA-T\").document(\"Temperatura\");\r\n        documentTemperatura.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediTemp=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasT.setText(resMediTemp);\r\n            }\r\n        });\r\n        //Humedad\r\n        DocumentReference documentHumedad=fStore.collection(\"SensoresA-T\").document(\"Humedad\");\r\n        documentHumedad.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediHum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasH.setText(resMediHum);\r\n            }\r\n        });\r\n        //Iluminación\r\n        DocumentReference documentIluminación=fStore.collection(\"SensoresA-T\").document(\"Iluminación\");\r\n        documentIluminación.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIlum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasL.setText(resMediIlum);\r\n            }\r\n        });\r\n        //Temperatura ambiente\r\n        DocumentReference documentambiente=fStore.collection(\"SensoresA-T\").document(\"Temperatura ambiente\");\r\n        documentambiente.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIAmb=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasS.setText(resMediIAmb);\r\n            }\r\n        });\r\n\r\n      */\r\n\r\n        return v;\r\n    }\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n\r\n\r\n    //WEATHER METHODS\r\n    private void api_key(final String City) {\r\n        OkHttpClient client = new OkHttpClient();\r\n\r\n        Request request = new Request.Builder()\r\n                .url(\"https://api.openweathermap.org/data/2.5/weather?q=\" + City + \"&appid=a6f41d947e0542a26580bcd5c3fb90ef&units=metric\")\r\n                .get()\r\n                .build();\r\n        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n        StrictMode.setThreadPolicy(policy);\r\n        try {\r\n            Response response = client.newCall(request).execute();\r\n            client.newCall(request).enqueue(new Callback() {\r\n                @Override\r\n                public void onFailure(Request request, IOException e) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onResponse(Response response) throws IOException {\r\n                    String responseData = response.body().string();\r\n                    try {\r\n                        JSONObject json = new JSONObject(responseData);\r\n                        JSONArray array = json.getJSONArray(\"weather\");\r\n                        JSONObject object = array.getJSONObject(0);\r\n\r\n                        String description = object.getString(\"description\");\r\n                        String icons = object.getString(\"icon\");\r\n\r\n                        JSONObject temp1 = json.getJSONObject(\"main\");\r\n                        Double Temperature = temp1.getDouble(\"temp\");\r\n\r\n                        setText(view_city, City);\r\n\r\n                        String temps = Math.round(Temperature) + \" °C\";\r\n                        setText(view_temp, temps);\r\n                        setText(view_desc, description);\r\n                        setImage(view_weather, icons);\r\n\r\n                    } catch (JSONException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n\r\n            });\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    private void setText(final TextView text, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                text.setText(value);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setImage(final ImageView imageView, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                //paste switch\r\n                switch (value) {\r\n                    case \"01d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"01n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"02d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"02n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"03d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"03n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"04d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"04n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"09d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"09n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"10d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"10n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"11d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"11n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"13d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    case \"13n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    default:\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.wheather));\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    //App location\r\n    private void getLocation() {\r\n\r\n        //Check Permissions again\r\n\r\n        /*if (ActivityCompat.checkSelfPermission(\r\n                getContext(),Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(\r\n                getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n        } else {\r\n\r\n            Location LocationNetwork=locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);\r\n             if (LocationNetwork !=null)\r\n            {\r\n                double lat=LocationNetwork.getLatitude();\r\n                double longi=LocationNetwork.getLongitude();\r\n\r\n                latitude=String.valueOf(lat);\r\n                longitude=String.valueOf(longi);\r\n                loc_func(LocationNetwork);\r\n                api_key(String.valueOf(view_city.getText()));\r\n                showLocationTxt.setText(\"Your Location:\"+\"\\n\"+\"Latitude= \"+latitude+\"\\n\"+\"Longitude= \"+longitude);\r\n            }\r\n\r\n        }*/\r\n\r\n    }\r\n\r\n    private void OnGPS() {\r\n\r\n        final AlertDialog.Builder builder= new AlertDialog.Builder(getContext());\r\n\r\n        builder.setMessage(\"Enable GPS\").setCancelable(false).setPositiveButton(\"YES\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS));\r\n                getLocation();\r\n            }\r\n        }).setNegativeButton(\"NO\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                dialog.cancel();\r\n            }\r\n        });\r\n        final AlertDialog alertDialog=builder.create();\r\n        alertDialog.show();\r\n    }\r\n\r\n    private void loc_func(Location location){\r\n        try {\r\n            Geocoder geocoder=new Geocoder(getContext());\r\n            List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);\r\n            String address = addresses.get(0).getSubLocality();\r\n            String cityName = addresses.get(0).getLocality();\r\n            String stateName = addresses.get(0).getAdminArea();\r\n            String country = addresses.get(0).getCountryName();\r\n            //txt_paddress.setText(address);\r\n            view_city.setText(cityName);\r\n            view_country.setText(country);\r\n            //txt_state.setText(stateName);*/\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            Toast.makeText(getContext(), \"Error:\"+e, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void inicioGPS(){\r\n\r\n\r\n        //Check gps is enable or not\r\n\r\n        if (!locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))\r\n        {\r\n            //Write Function To enable gps\r\n\r\n            OnGPS();\r\n        }\r\n        else\r\n        {\r\n            //GPS is already On then\r\n\r\n            getLocation();\r\n        }\r\n    }\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
---+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(date 1609523605203)
---@@ -201,7 +201,7 @@
---         view_weather =v.findViewById(R.id.wheather_image);
--- 
---         locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);
----        inicioGPS();
---+       /* inicioGPS();*/
---         //
--- 
--- 
---@@ -501,7 +501,7 @@
---     }
--- 
---     //App location
----    private void getLocation() {
---+   /* private void getLocation() {
--- 
---         //Check Permissions again
--- 
---@@ -519,12 +519,12 @@
--- 
---                 latitude=String.valueOf(lat);
---                 longitude=String.valueOf(longi);
----                loc_func(LocationNetwork);
----                api_key(String.valueOf(view_city.getText()));
---+               /* loc_func(LocationNetwork);*/
---+              /*  api_key(String.valueOf(view_city.getText()));
---                 showLocationTxt.setText("Your Location:"+"\n"+"Latitude= "+latitude+"\n"+"Longitude= "+longitude);
---             }
--- 
----        }*/
---+        }
--- 
---     }
--- 
---@@ -553,8 +553,8 @@
---         try {
---             Geocoder geocoder=new Geocoder(getContext());
---             List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);
----            String address = addresses.get(0).getSubLocality();
----            String cityName = addresses.get(0).getLocality();
---+            /*String address = addresses.get(0).getSubLocality();*/
---+           /* String cityName = addresses.get(0).getLocality();
---             String stateName = addresses.get(0).getAdminArea();
---             String country = addresses.get(0).getCountryName();
---             //txt_paddress.setText(address);
---@@ -562,7 +562,7 @@
---             view_country.setText(country);
---             //txt_state.setText(stateName);*/
--- 
----        } catch (IOException e) {
---+       /* } catch (IOException e) {
---             e.printStackTrace();
---             Toast.makeText(getContext(), "Error:"+e, Toast.LENGTH_SHORT).show();
---         }
---@@ -583,7 +583,7 @@
---         {
---             //GPS is already On then
--- 
----            getLocation();
----        }
----    }
---+            /*getLocation();*/
---+ /*       }
---+    }*/
--- }
---\ No newline at end of file
---Index: app/src/main/res/layout/fragment_login.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.login.LogActivity\" >\r\n\r\n    <ImageView\r\n        android:id=\"@+id/imageView4\"\r\n        android:layout_width=\"254dp\"\r\n        android:layout_height=\"188dp\"\r\n        android:contentDescription=\"@string/title_wellcome_login\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"\r\n        app:layout_constraintVertical_bias=\"0.0\"\r\n        app:srcCompat=\"@drawable/stickerlog\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/textView3\"\r\n        android:layout_width=\"184dp\"\r\n        android:layout_height=\"20dp\"\r\n        android:layout_marginTop=\"40dp\"\r\n        android:layout_marginEnd=\"52dp\"\r\n        android:text=\"@string/title_wellcome_login\"\r\n        android:textColor=\"@color/colorPrimaryLight\"\r\n        android:textSize=\"16sp\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/imageView4\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n    <TextView\r\n        android:id=\"@+id/textView4\"\r\n        android:layout_width=\"151dp\"\r\n        android:layout_height=\"32dp\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:layout_marginEnd=\"84dp\"\r\n        android:text=\"@string/title_orderLog\"\r\n        android:textColor=\"@color/colorPrimary\"\r\n        android:textSize=\"26sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/imageView4\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/textView3\" />\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"530dp\"\r\n        android:orientation=\"vertical\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/imageView4\"\r\n        app:layout_constraintVertical_bias=\"0.527\">\r\n\r\n        <ImageView\r\n            android:id=\"@+id/imageView3\"\r\n            android:layout_width=\"254dp\"\r\n            android:layout_height=\"146dp\"\r\n            android:layout_gravity=\"center_horizontal\"\r\n            android:layout_marginBottom=\"70dp\"\r\n            android:contentDescription=\"@string/title_wellcome_login\"\r\n            app:srcCompat=\"@drawable/logo_and_text\" />\r\n\r\n        <!--<Button\r\n               android:id=\"@+id/btn_facebook\"\r\n               android:layout_width=\"match_parent\"\r\n               android:layout_height=\"wrap_content\"\r\n               android:background=\"@drawable/btn_facebook\"\r\n               android:drawableLeft=\"@drawable/ic_facebook_icon\"\r\n               android:paddingLeft=\"20dp\"\r\n               android:textColor=\"#FFFF\"\r\n               android:layout_marginLeft=\"20dp\"\r\n               android:layout_marginRight=\"20dp\"\r\n               android:text=\"@string/title_cont_faceboock\" /> -->\r\n        <com.facebook.login.widget.LoginButton\r\n            android:id=\"@+id/btn_facebook\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:background=\"@drawable/btn_facebook\"\r\n            android:drawableLeft=\"@drawable/ic_facebook_icon\"\r\n            android:paddingLeft=\"20dp\"\r\n            android:textColor=\"#FFFF\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginRight=\"20dp\"\r\n            android:text=\"@string/title_cont_faceboock\" />\r\n        <!-- <com.facebook.login.widget.LoginButton\r\n            android:id=\"@+id/login_button\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center_horizontal\"\r\n            android:layout_marginTop=\"30dp\"\r\n            android:layout_marginBottom=\"30dp\" />  -->\r\n\r\n        <com.google.android.gms.common.SignInButton\r\n            android:id=\"@+id/btn_google\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginRight=\"20dp\"\r\n            android:background=\"@drawable/btn_google\"\r\n            android:drawableLeft=\"@drawable/ic_google_icon\"\r\n            android:text=\"@string/title_cont_google\"\r\n            android:textColor=\"#000000\" />\r\n\r\n        <Button\r\n            android:id=\"@+id/btn_mail\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginRight=\"20dp\"\r\n            android:background=\"@drawable/btn_mail\"\r\n            android:drawableLeft=\"@drawable/ic_mail_icon\"\r\n            android:onClick=\"Email\"\r\n            android:paddingLeft=\"20dp\"\r\n            android:text=\"@string/title_cont_mail\"\r\n            android:textColor=\"#000000\" />\r\n\r\n    </LinearLayout>\r\n\r\n\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/res/layout/fragment_login.xml	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
---+++ app/src/main/res/layout/fragment_login.xml	(date 1609520835155)
---@@ -5,7 +5,7 @@
---     xmlns:tools="http://schemas.android.com/tools"
---     android:layout_width="match_parent"
---     android:layout_height="match_parent"
----    tools:context=".ui.login.LogActivity" >
---+     >
--- 
---     <ImageView
---         android:id="@+id/imageView4"
---Index: app/src/main/AndroidManifest.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.infinitycrop\">\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/>\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\"/>\r\n    <uses-permission android:name=\"android.permission.INTERNET\"/>\r\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" />\r\n    <!--Permisos Qr-->\r\n    <uses-permission android:name=\"android.permission.CAMERA\"/>\r\n    <uses-feature android:name=\"android.hardware.camera\"></uses-feature>\r\n    <uses-feature android:name=\"android.hardware.camera.autofocus\"></uses-feature>\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher\"\r\n        android:theme=\"@style/AppThemeHome\"\r\n        >\r\n\r\n        <activity android:name=\".MainActivity\" android:theme=\"@style/SplashTheme\">\r\n        </activity>\r\n        <service android:name=\"com.example.infinitycrop.ui.service.ServicioMqtt\" />\r\n        <activity android:name=\"com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\">\r\n\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.HelpProfile\">\r\n\r\n        </activity>\r\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\"></activity>\r\n        <activity android:name=\".ui.list_machine.AddMachine\"></activity>\r\n        <activity android:name=\".ui.logmail.RegisterActivity\"></activity>\r\n        <activity android:name=\".ui.logmail.LoginActivity\"></activity>\r\n        <activity android:name=\".ui.list_machine.CaptureAct\"></activity>\r\n        <activity android:name=\"com.example.infinitycrop.ui.login.LogActivity\"></activity>\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\"></activity>\r\n        <activity android:name=\".ui.profile.settings.ModifyProfile\"></activity>\r\n\r\n\r\n\r\n\r\n        <meta-data android:name=\"com.google.android.geo.API_KEY\"\r\n            android:value=\"@string/google_maps_key\" />\r\n\r\n        <meta-data android:name=\"com.facebook.sdk.ApplicationId\"\r\n            tools:replace=\"android:value\"\r\n            android:value=\"@string/facebook_app_id\"/>\r\n        <meta-data\r\n            android:name=\"preloaded_fonts\"\r\n            android:resource=\"@array/preloaded_fonts\" />\r\n\r\n\r\n    </application>\r\n\r\n</manifest>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/AndroidManifest.xml	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
---+++ app/src/main/AndroidManifest.xml	(date 1609520835161)
---@@ -44,7 +44,7 @@
---         <activity android:name=".ui.list_machine.CaptureAct"></activity>
---         <activity android:name="com.example.infinitycrop.ui.login.LogActivity"></activity>
---         <activity android:name=".ui.LoadAnimations.IntroductoryActivity2"></activity>
----        <activity android:name=".ui.profile.settings.ModifyProfile"></activity>
---+        <activity android:name=".ui.LoadAnimations.LogprimeraActivity"></activity>
--- 
--- 
--- 
---Index: app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.list_machine;\r\n\r\nimport android.content.Intent;\r\nimport android.media.Image;\r\nimport android.os.Bundle;\r\nimport android.os.Parcelable;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.ItemTouchHelper;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.logmail.RegisterActivity;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerAdapter;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\nimport com.google.android.material.bottomsheet.BottomSheetDialog;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.Query;\r\n\r\nimport java.text.BreakIterator;\r\nimport java.util.Map;\r\n\r\npublic class MainActivityMachineList extends AppCompatActivity {\r\n    private FirebaseFirestore firebaseFirestore;\r\n    private RecyclerView mFirestoreList;\r\n    private Adapter adapter;\r\n    private FirebaseAuth firebaseAuth;\r\n    Button addBtn;//boton añadir nueva maquina\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_list_machines);\r\n        firebaseFirestore=FirebaseFirestore.getInstance();\r\n        mFirestoreList=findViewById(R.id.firestore_list);\r\n        firebaseAuth=FirebaseAuth.getInstance();\r\n        String uid=firebaseAuth.getUid();\r\n        //Query\r\n        Query query=firebaseFirestore\r\n                .collection(\"Machine\")\r\n                .whereEqualTo(\"userUID\", uid)\r\n                .orderBy(\"priority\",Query.Direction.ASCENDING);\r\n        //RecyclerView\r\n        FirestoreRecyclerOptions<MachineModel> options=new FirestoreRecyclerOptions.Builder<MachineModel>()\r\n                .setQuery(query, MachineModel.class)\r\n                .build();\r\n        //View Holder\r\n        adapter= new Adapter(options);\r\n        mFirestoreList.setHasFixedSize(true);\r\n        mFirestoreList.setLayoutManager(new LinearLayoutManager(this));\r\n        mFirestoreList.setAdapter(adapter);\r\n\r\n        new ItemTouchHelper(new ItemTouchHelper.SimpleCallback(0,\r\n                ItemTouchHelper.LEFT | ItemTouchHelper.RIGHT) {\r\n            @Override\r\n            public boolean onMove(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder, RecyclerView.ViewHolder target) {\r\n                return false;\r\n            }\r\n            @Override\r\n            public void onSwiped(RecyclerView.ViewHolder viewHolder, int direction) {\r\n                Toast.makeText(getApplicationContext(), \"Maquina eliminada con éxito\", Toast.LENGTH_SHORT).show();\r\n                adapter.deleteItem(viewHolder.getAdapterPosition());\r\n            }\r\n        }).attachToRecyclerView(mFirestoreList);\r\n\r\n        adapter.setOnItemClickListener(new Adapter.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(DocumentSnapshot documentSnapshot, int position) {\r\n                //documentSnapshot.getData() -> devuelve all que tiene la maquina en firebase\r\n                MachineModel machine = documentSnapshot.toObject(MachineModel.class);\r\n                final String id = documentSnapshot.getId();\r\n                final String path = documentSnapshot.getString(\"description\"); //devuelve ruta en firebase Machine\\madara\r\n                //botttom sheet\r\n                final BottomSheetDialog bottomSheetDialog=new BottomSheetDialog(MainActivityMachineList.this);\r\n                bottomSheetDialog.setContentView(R.layout.machine_bottom_sheet);\r\n                Button btnenter=bottomSheetDialog.findViewById(R.id.enterMachineButton);\r\n                Button btnmodify=bottomSheetDialog.findViewById(R.id.madifyMachineButton);\r\n                Button btncancel=bottomSheetDialog.findViewById(R.id.cancelMachineButton);\r\n                btnenter.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        Intent intent = new Intent(getBaseContext(), MainActivity.class);\r\n                        intent.putExtra(\"machine\", id);\r\n                        intent.putExtra(\"description\", path);\r\n                        startActivity(intent);\r\n                    }\r\n                });\r\n                btnmodify.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        //poner aca Intent para acceder al layout de modificar maquina\r\n                        //hay que pasarle un intent con extra como he hecho en el onClick de arriba\r\n                        //lo que necesitas para modificar es la variable id\r\n                        //encuentras en firebase la maquina con el id y haces la magia de modificar etc..\r\n                        //lo de maquina a favoritos es facil , si es 1 es favoirto si es 2 no lo es.\r\n                        //ejemplo\r\n                        /*Intent intent = new Intent(getBaseContext(), MainActivity.class);//Main por tu clase\r\n                        intent.putExtra(\"machine\", id);\r\n                        startActivity(intent);*/\r\n                    }\r\n                });\r\n                btncancel.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        bottomSheetDialog.cancel();\r\n                    }\r\n                });\r\n                bottomSheetDialog.show();\r\n\r\n\r\n            }\r\n        });\r\n\r\n        FloatingActionButton addbtn = (FloatingActionButton) findViewById(R.id.button_add_machine);\r\n        addbtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent (getApplicationContext(), AddMachine.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        adapter.stopListening();\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        adapter.startListening();\r\n    }\r\n}\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
---+++ app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(date 1609606384560)
---@@ -50,7 +50,7 @@
---         //Query
---         Query query=firebaseFirestore
---                 .collection("Machine")
----                .whereEqualTo("userUID", uid)
---+               .whereEqualTo("userUID", uid)
---                 .orderBy("priority",Query.Direction.ASCENDING);
---         //RecyclerView
---         FirestoreRecyclerOptions<MachineModel> options=new FirestoreRecyclerOptions.Builder<MachineModel>()
---Index: app/src/main/java/com/example/infinitycrop/ui/login/LogActivity.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.login;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity2;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.MainActivityMachineList;\r\nimport com.example.infinitycrop.ui.logmail.LoginActivity;\r\nimport com.facebook.AccessToken;\r\nimport com.facebook.AccessTokenTracker;\r\nimport com.facebook.CallbackManager;\r\nimport com.facebook.FacebookCallback;\r\nimport com.facebook.FacebookException;\r\nimport com.facebook.login.LoginResult;\r\nimport com.facebook.login.widget.LoginButton;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInAccount;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.common.SignInButton;\r\nimport com.google.android.gms.common.api.ApiException;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthCredential;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FacebookAuthProvider;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.auth.GoogleAuthProvider;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.facebook.FacebookSdk;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\n\r\npublic class LogActivity extends AppCompatActivity{\r\n    /*private GoogleApiClient googleApiClient;\r\n    private SignInButton signInButton;\r\n    public static final int SIGN_IN_CODE = 777;*/\r\n    //Variable para gestionar FirebaseAuth\r\n    private FirebaseAuth mAuth;\r\n    //Agregar cliente de inicio de sesión de Google\r\n    private GoogleSignInClient mGoogleSignInClient;\r\n    //Constante\r\n    int RC_SIGN_IN = 1;\r\n    SignInButton btnLogin,btnGoogle;\r\n    String TAG = \"GoogleSignIn\";\r\n\r\n    private FirebaseAuth.AuthStateListener authStateListener;\r\n    private AccessTokenTracker accessTokenTracker;\r\n    private LoginButton loginButtonFacebook;\r\n    private CallbackManager mCallbackManager;\r\n    private  static  final String TAG2 = \"FacebookAuthentication\";\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.fragment_login);\r\n        /*GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestEmail()\r\n                .build();\r\n        googleApiClient = new GoogleApiClient.Builder(this)\r\n        .enableAutoManage(this, this)\r\n        .addApi(Auth.GOOGLE_SIGN_IN_API,gso)\r\n        .build();\r\n        signInButton =findViewById(R.id.btn_google);\r\n        signInButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = Auth.GoogleSignInApi.getSignInIntent(googleApiClient);\r\n                startActivityForResult(intent,SIGN_IN_CODE);\r\n            }\r\n        });*/\r\n\r\n        //Botones\r\n        btnGoogle=findViewById(R.id.btn_google);\r\n        loginButtonFacebook = findViewById(R.id.btn_facebook);\r\n        loginButtonFacebook.setReadPermissions(\"email\",\"public_profile\");\r\n\r\n        //Listeners\r\n        btnGoogle.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                signIn();\r\n            }\r\n        });\r\n\r\n        // Configurar Google Sign In\r\n        GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestIdToken(getString(R.string.default_web_client_id))\r\n                .requestEmail()\r\n                .build();\r\n        // Crear un GoogleSignInClient con las opciones especificadas por gso.\r\n        mGoogleSignInClient = GoogleSignIn.getClient(this, gso);\r\n\r\n\r\n\r\n        // Inicializar Firebase Auth\r\n        mAuth = FirebaseAuth.getInstance();\r\n        FacebookSdk.sdkInitialize(getApplicationContext());\r\n\r\n        //Facebook\r\n        mCallbackManager = CallbackManager.Factory.create();\r\n        loginButtonFacebook.registerCallback(mCallbackManager, new FacebookCallback<LoginResult>() {\r\n            @Override\r\n            public void onSuccess(LoginResult loginResult) {\r\n                Log.d(TAG2,\"onSuccess\"+loginResult);\r\n                handleFacebookToken(loginResult.getAccessToken());\r\n            }\r\n\r\n            @Override\r\n            public void onCancel() {\r\n                Log.d(TAG2,\"onCancel\");\r\n            }\r\n\r\n            @Override\r\n            public void onError(FacebookException error) {\r\n                Log.d(TAG2,\"onError: \"+error);\r\n            }\r\n\r\n        });\r\n\r\n        authStateListener = new FirebaseAuth.AuthStateListener() {\r\n            @Override\r\n            public void onAuthStateChanged(@NonNull FirebaseAuth firebaseAuth) {\r\n                FirebaseUser user = firebaseAuth.getCurrentUser();\r\n                if(user!=null){\r\n                    Intent dashboardActivity = new Intent(LogActivity.this, MainActivityMachineList.class);\r\n                    startActivity(dashboardActivity);\r\n                    LogActivity.this.finish();\r\n                }\r\n            }\r\n        };\r\n\r\n        accessTokenTracker = new AccessTokenTracker() {\r\n            @Override\r\n            protected void onCurrentAccessTokenChanged(AccessToken oldAccessToken, AccessToken currentAccessToken) {\r\n                if(currentAccessToken == null){\r\n                    mAuth.signOut();\r\n                }\r\n            }\r\n        };\r\n\r\n    }\r\n    private void signIn() {\r\n        Intent signInIntent = mGoogleSignInClient.getSignInIntent();\r\n        startActivityForResult(signInIntent, RC_SIGN_IN);\r\n    }\r\n\r\n    @Override\r\n    public void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        mCallbackManager.onActivityResult(requestCode,resultCode,data);\r\n\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        //Resultado devuelto al iniciar el Intent de GoogleSignInApi.getSignInIntent (...);\r\n        // Result returned from launching the Intent from GoogleSignInApi.getSignInIntent(...);\r\n        if (requestCode == RC_SIGN_IN) {\r\n            Task<GoogleSignInAccount> task = GoogleSignIn.getSignedInAccountFromIntent(data);\r\n            if(task.isSuccessful()){\r\n                try {\r\n                    // Google Sign In was successful, authenticate with Firebase\r\n                    GoogleSignInAccount account = task.getResult(ApiException.class);\r\n                    Log.d(TAG, \"firebaseAuthWithGoogle:\" + account.getId());\r\n                    firebaseAuthWithGoogle(account.getIdToken());\r\n                } catch (ApiException e) {\r\n                    // Google Sign In fallido, actualizar GUI\r\n                    Log.w(TAG, \"Google sign in failed\", e);\r\n                }\r\n            }else{\r\n                Log.d(TAG, \"Error, login no exitoso:\" + task.getException().toString());\r\n                Toast.makeText(this, \"Ocurrio un error. \"+task.getException().toString(),\r\n                        Toast.LENGTH_LONG).show();\r\n            }\r\n        }\r\n    }\r\n    private void firebaseAuthWithGoogle(String idToken) {\r\n        AuthCredential credential = GoogleAuthProvider.getCredential(idToken, null);\r\n        mAuth.signInWithCredential(credential)\r\n                .addOnCompleteListener(this, new OnCompleteListener<AuthResult>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<AuthResult> task) {\r\n                        if (task.isSuccessful()) {\r\n                            FirebaseFirestore db=FirebaseFirestore.getInstance();\r\n                            String userID= mAuth.getCurrentUser().getUid();\r\n                            String name= mAuth.getCurrentUser().getDisplayName();\r\n                            String mail= mAuth.getCurrentUser().getEmail();\r\n                            Map<String, Object> data = new HashMap<>();\r\n                            data.put(\"username\", name);\r\n                            data.put(\"mail\", mail);\r\n                            db.collection(\"Usuarios\").document(userID)\r\n                                    .set(data);\r\n                            /*db.collection(\"Usuarios\").document(userID)\r\n                                    .collection(\"Maquinas\").document(\"fecha\")\r\n                                    .set(data);*/\r\n\r\n                            // Sign in success, update UI with the signed-in user's information\r\n                            Log.d(TAG, \"signInWithCredential:success\");\r\n                            //FirebaseUser user = mAuth.getCurrentUser();\r\n                            //Iniciar DASHBOARD u otra actividad luego del SigIn Exitoso\r\n                            Intent dashboardActivity = new Intent(LogActivity.this, IntroductoryActivity2.class);\r\n                            startActivity(dashboardActivity);\r\n                            LogActivity.this.finish();\r\n                        } else {\r\n                            // If sign in fails, display a message to the user.\r\n                            Log.w(TAG, \"signInWithCredential:failure\", task.getException());\r\n\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n    @Override\r\n    protected void onStart() {\r\n        FirebaseUser user = mAuth.getCurrentUser();\r\n        if(user!=null){ //si no es null el usuario ya esta logueado\r\n            //mover al usuario al dashboard\r\n            Intent dashboardActivity = new Intent(LogActivity.this, MainActivityMachineList.class);\r\n            startActivity(dashboardActivity);\r\n        }\r\n        super.onStart();\r\n        mAuth.addAuthStateListener(authStateListener);\r\n    }\r\n    //metodo para navegar entre activitys con los botones\r\n    public void Email (View view){\r\n        Intent email = new Intent(this, LoginActivity.class);\r\n        startActivity(email);\r\n    }\r\n   /* @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if(requestCode == SIGN_IN_CODE){\r\n            GoogleSignInResult result = Auth.GoogleSignInApi.getSignInResultFromIntent(data);\r\n            handleSignResult(result);\r\n        }\r\n    }\r\n\r\n    private void handleSignResult(GoogleSignInResult result) {\r\n        if (result.isSuccess()){\r\n            goMainScreen();\r\n        }else{\r\n            Toast.makeText(this, \"Error al iniciar sesión\", Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void goMainScreen() {\r\n       Intent intent=new Intent(this, MainActivity.class);\r\n       startActivity(intent);\r\n    }\r\n\r\n    //metodo para navegar entre activitys con los botones\r\n    public void Email (View view){\r\n        Intent email = new Intent(this, LoginActivity.class);\r\n        startActivity(email);\r\n    }\r\n\r\n    @Override\r\n    public void onConnectionFailed(@NonNull ConnectionResult connectionResult) {\r\n\r\n    }*/\r\n    //Funciones Login con facebook\r\n    private void handleFacebookToken(AccessToken token){\r\n        Log.d(TAG2,\"handleFacebookToken\" + token);\r\n\r\n        AuthCredential credential = FacebookAuthProvider.getCredential(token.getToken());\r\n        mAuth.signInWithCredential(credential).addOnCompleteListener(this, new OnCompleteListener<AuthResult>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<AuthResult> task) {\r\n                if(task.isSuccessful()){\r\n                    Log.d(TAG2,\"sing in with credential: successfully\");\r\n                    FirebaseUser user = mAuth.getCurrentUser();\r\n                    if(user!=null){ //si no es null el usuario ya esta logueado\r\n                        Intent dashboardActivity = new Intent(LogActivity.this, MainActivityMachineList.class);\r\n                        startActivity(dashboardActivity);\r\n                    }\r\n                }else{\r\n                    Log.d(TAG2,\"sing in with credential: failed\", task.getException());\r\n                    Toast.makeText(LogActivity.this,\"Authentication Failed\", Toast.LENGTH_SHORT);\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        if(authStateListener != null){\r\n            mAuth.removeAuthStateListener(authStateListener);\r\n            finish();\r\n        }\r\n    }\r\n\r\n}\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/login/LogActivity.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
---+++ app/src/main/java/com/example/infinitycrop/ui/login/LogActivity.java	(date 1609520835136)
---@@ -63,7 +63,7 @@
---     @Override
---     protected void onCreate(Bundle savedInstanceState) {
---         super.onCreate(savedInstanceState);
----        setContentView(R.layout.fragment_login);
---+       /* setContentView(R.layout.fragment_login);*/
---         /*GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)
---                 .requestEmail()
---                 .build();
---Index: app/src/main/java/com/example/infinitycrop/ui/logmail/RegisterActivity.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.logmail;\r\n\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.text.TextUtils;\r\nimport android.view.View;\r\nimport android.widget.EditText;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity2;\r\nimport com.example.infinitycrop.R;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseAuthUserCollisionException;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class RegisterActivity extends AppCompatActivity {\r\n    //objetos visibles\r\n    private EditText Textmail;\r\n    private EditText Textname;\r\n    private EditText Textpassword;\r\n    private LinearLayout Btnregistrar;\r\n    private ProgressDialog progressDialog;\r\n    //objeto firebase\r\n    private FirebaseAuth mAuth;\r\n    private FirebaseFirestore fStore;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_register);\r\n        mAuth = FirebaseAuth.getInstance();\r\n        fStore=FirebaseFirestore.getInstance();\r\n        //referenciamos los views\r\n        Textmail = (EditText) findViewById(R.id.editTextTextPersonName);\r\n        Textname = (EditText) findViewById(R.id.editTextTextPersonName2);\r\n        Textpassword = (EditText) findViewById(R.id.editTextTextPassword);\r\n\r\n        Btnregistrar = (LinearLayout) findViewById(R.id.btn_login);\r\n        progressDialog =new ProgressDialog(this);\r\n\r\n        //atacamos el listener al boton\r\n        Btnregistrar.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                onclick(v);\r\n            }\r\n        });\r\n\r\n\r\n\r\n    }\r\n    public void onclick(View view){\r\n        //invocamos al metodo\r\n        registrarUsuario();\r\n    }\r\n    private void registrarUsuario(){\r\n        //obtendremos el email y la contraseña desde la caja de texto\r\n        final String email = Textmail.getText().toString().trim();\r\n        final String nombre = Textname.getText().toString().trim();\r\n        String password = Textpassword.getText().toString().trim();\r\n\r\n        //verificamos si las cajas estan vacias o no\r\n        if(TextUtils.isEmpty(email)){\r\n            Toast.makeText(this,\"Debes introducir un correo\",Toast.LENGTH_LONG).show();\r\n            return;\r\n        }\r\n        if(TextUtils.isEmpty(password)){\r\n            Toast.makeText(this,\"Debes introducir una contraseña\",Toast.LENGTH_LONG).show();\r\n            return;\r\n        }\r\n        if(TextUtils.isEmpty(nombre)){\r\n            Toast.makeText(this,\"Debes introducir una nombre\",Toast.LENGTH_LONG).show();\r\n            return;\r\n        }\r\n        progressDialog.setMessage(\"Registrando obteniendo contenido en línea...\");\r\n        progressDialog.show();\r\n        //creando un nuevo usuario\r\n        mAuth.createUserWithEmailAndPassword(email,password).addOnCompleteListener( this, new OnCompleteListener<AuthResult>() {\r\n\r\n            @Override\r\n            public void onComplete(@NonNull Task<AuthResult> task) {\r\n                //comprovar si el resultado ha sido resuelto correctamente\r\n                if (task.isSuccessful()) {\r\n\r\n                    //enviar coorreo de confirmación\r\n                    FirebaseUser user = mAuth.getCurrentUser();\r\n                    user.sendEmailVerification().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            Toast.makeText(RegisterActivity.this,\"Verification has been send\",Toast.LENGTH_SHORT);\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n\r\n                            Toast.makeText(RegisterActivity.this,\"Error en el envío de correo\",Toast.LENGTH_SHORT);\r\n                        }\r\n                    });\r\n\r\n                    String userID= mAuth.getCurrentUser().getUid();\r\n                    DocumentReference documentReference=fStore.collection(\"Usuarios\").document(userID);\r\n                    Map<String,Object> datauser=new HashMap<>();\r\n                    datauser.put(\"username\",nombre);\r\n                    datauser.put(\"mail\",email);\r\n                    documentReference.set(datauser).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            Toast.makeText(RegisterActivity.this, \"Iniciando sesión\", Toast.LENGTH_LONG).show();\r\n                            Intent intencion = new Intent (getApplication(), IntroductoryActivity2.class);\r\n                            startActivity(intencion);\r\n                            finish();\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n\r\n                        }\r\n                    });\r\n\r\n\r\n\r\n                } else {\r\n                    if (task.getException() instanceof FirebaseAuthUserCollisionException) {//si se presenta una colisión\r\n                        Toast.makeText(RegisterActivity.this, \"Este Usuario ya existe\", Toast.LENGTH_SHORT).show();\r\n                    } else {\r\n                        Toast.makeText(RegisterActivity.this, \"No se puede registrar este usuario\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n\r\n                }\r\n                progressDialog.dismiss();\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void onStop() {\r\n        finish();\r\n        super.onStop();\r\n    }\r\n}\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/logmail/RegisterActivity.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
---+++ app/src/main/java/com/example/infinitycrop/ui/logmail/RegisterActivity.java	(date 1609552727772)
---@@ -149,9 +149,5 @@
---         });
---     }
--- 
----    @Override
----    public void onStop() {
----        finish();
----        super.onStop();
----    }
---+
--- }
---Index: app/src/main/java/com/example/infinitycrop/ui/LoadAnimations/IntroductoryActivity.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.LoadAnimations;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.app.Activity;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.os.CountDownTimer;\r\nimport android.widget.ImageView;\r\n\r\nimport com.airbnb.lottie.LottieAnimationView;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.login.LogActivity;\r\n\r\nimport static java.security.AccessController.getContext;\r\n\r\npublic class IntroductoryActivity extends AppCompatActivity {\r\n    ImageView logo,splashImg;\r\n    LottieAnimationView lottieAnimationView;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_introductory);\r\n        logo = findViewById(R.id.log);\r\n        splashImg = findViewById(R.id.img);\r\n        lottieAnimationView = findViewById(R.id.lottie);\r\n\r\n        splashImg.animate().translationY(-4000).setDuration(1000).setStartDelay(4000);\r\n        logo.animate().translationY(4000).setDuration(1000).setStartDelay(4000);\r\n        lottieAnimationView.animate().translationY(1600).setDuration(800).setStartDelay(3900);\r\n\r\n        if (this.equals(0)) {\r\n            finish();\r\n        }\r\n        new CountDownTimer(4660, 1000) {\r\n\r\n            public void onTick(long millisUntilFinished) {\r\n\r\n\r\n            }\r\n\r\n\r\n            public void onFinish() {\r\n                Intent intent= new Intent (getApplicationContext(), LogActivity.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n\r\n        }.start();\r\n\r\n    }\r\n    @Override\r\n    public void onStop() {\r\n        finish();\r\n        super.onStop();\r\n    }\r\n\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/LoadAnimations/IntroductoryActivity.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
---+++ app/src/main/java/com/example/infinitycrop/ui/LoadAnimations/IntroductoryActivity.java	(date 1609520835167)
---@@ -28,7 +28,7 @@
--- 
---         splashImg.animate().translationY(-4000).setDuration(1000).setStartDelay(4000);
---         logo.animate().translationY(4000).setDuration(1000).setStartDelay(4000);
----        lottieAnimationView.animate().translationY(1600).setDuration(800).setStartDelay(3900);
---+        lottieAnimationView.animate().translationY(1400).setDuration(800).setStartDelay(3900);
--- 
---         if (this.equals(0)) {
---             finish();
---@@ -42,7 +42,7 @@
--- 
--- 
---             public void onFinish() {
----                Intent intent= new Intent (getApplicationContext(), LogActivity.class);
---+                Intent intent= new Intent (getApplicationContext(), LogprimeraActivity.class);
---                 startActivity(intent);
--- 
---             }
---Index: app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.profile;\r\n\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.graphics.Bitmap;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.util.LruCache;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.android.volley.RequestQueue;\r\nimport com.android.volley.toolbox.ImageLoader;\r\nimport com.android.volley.toolbox.NetworkImageView;\r\nimport com.android.volley.toolbox.Volley;\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.MainActivityMachineList;\r\nimport com.example.infinitycrop.ui.login.LogActivity;\r\nimport com.example.infinitycrop.ui.profile.settings.AboutInfinityCrap;\r\nimport com.example.infinitycrop.ui.profile.settings.HelpProfile;\r\n//import com.example.infinitycrop.ui.profile.settings.ModifyProfile;\r\nimport com.firebase.ui.auth.AuthUI;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link ProfileFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class ProfileFragment extends Fragment {\r\n    //atributos para confirmación de correo\r\n    private FirebaseUser us;\r\n    private TextView txtverf;\r\n    private Button btnconf;\r\n\r\n\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public ProfileFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment ProfileFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static ProfileFragment newInstance(String param1, String param2) {\r\n        ProfileFragment fragment = new ProfileFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_profile, container, false);\r\n\r\n        ImageView irAPerfil =v.findViewById(R.id.irAEditarPerfil);\r\n        irAPerfil.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                /*Intent intent = new Intent(getActivity(), ModifyProfile.class);\r\n                startActivity(intent);*/\r\n            }\r\n        });\r\n\r\n        //Enlaces de los botones de configuracion\r\n        //personalice colors\r\n        RelativeLayout customColors_btn =v.findViewById(R.id.relativeLayout4);\r\n        customColors_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n            }\r\n        });\r\n        //about us\r\n        RelativeLayout aboutInfinity_btn =v.findViewById(R.id.relativeLayout6);\r\n        aboutInfinity_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), AboutInfinityCrap.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        //help\r\n        RelativeLayout help_profile =v.findViewById(R.id.relativeLayout5);\r\n        help_profile.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), HelpProfile.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        //firebase\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=mAuth.getCurrentUser().getUid();\r\n        final GoogleSignInClient mGoogleSignInClient;\r\n        GoogleSignInOptions gso;\r\n        final FirebaseUser usuario = FirebaseAuth.getInstance().getCurrentUser();\r\n        //guardo la imagen en un ImagenView\r\n        final ImageView img = (ImageView) v.findViewById(R.id.profile);\r\n        //guardo el nombre en un textView\r\n        final TextView nombre = (TextView) v.findViewById(R.id.username);\r\n        nombre.setText(usuario.getDisplayName());\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(nombre.getText() == \"\"){\r\n                    nombre.setText(snapshot.getString(\"username\"));\r\n                    img.setImageResource(R.drawable.icons_user);\r\n                }\r\n            }\r\n        });\r\n\r\n        //guardo el mail en un textView\r\n        TextView correo = (TextView) v.findViewById(R.id.mailUser);\r\n        correo.setText(usuario.getEmail());\r\n        //cargar imágen con glide:\r\n        Glide.with(this).load(usuario.getPhotoUrl()).into(img);\r\n        //boton cerrar sesion\r\n\r\n        //Configurar las gso para google signIn con el fin de luego desloguear de google\r\n        gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestIdToken(getString(R.string.default_web_client_id))\r\n                .requestEmail()\r\n                .build();\r\n        mGoogleSignInClient = GoogleSignIn.getClient(getActivity(), gso);\r\n\r\n        RelativeLayout cerrarSesion =(RelativeLayout) v.findViewById(R.id.btn_end_session);\r\n        cerrarSesion.setOnClickListener(new View.OnClickListener() {\r\n            public void onClick(View view) {\r\n                new AlertDialog.Builder(requireContext())\r\n                        .setTitle(\"Cerrar sesión\")\r\n                        .setMessage(\"¿Estas seguro que quieres cerrar sesión?\")\r\n                        .setPositiveButton(\"Confirmar\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n                                //Cerrar session con Firebase\r\n                                mAuth.signOut();\r\n                                //Cerrar sesión con google tambien: Google sign out\r\n                                mGoogleSignInClient.signOut().addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                                    @Override\r\n                                    public void onComplete(@NonNull Task<Void> task) {\r\n                                        //Abrir MainActivity con SigIn button\r\n                                        if(task.isSuccessful()){\r\n                                            Intent logActivity = new Intent(getActivity().getApplicationContext(), LogActivity.class);\r\n                                            startActivity(logActivity);\r\n                                            getActivity().finish();\r\n                                        }else{\r\n                                            Toast.makeText(getActivity().getApplicationContext(), \"No se pudo cerrar sesión con google\",\r\n                                                    Toast.LENGTH_LONG).show();\r\n                                        }\r\n                                    }\r\n                                });\r\n\r\n                            }\r\n                        })\r\n                        .setNegativeButton(\"Cancelar\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                            }\r\n                        })\r\n                        .show();\r\n\r\n\r\n            }\r\n        });\r\n\r\n        //Confirmación de verificación de correo\r\n        TextView txtverify = (TextView) v.findViewById(R.id.txtVerif);\r\n        Button btnverify = (Button) v.findViewById(R.id.btnverif);\r\n        final FirebaseUser user = mAuth.getCurrentUser();\r\n        if(!user.isEmailVerified()){\r\n            us=user;\r\n            txtverf = txtverify;\r\n            btnconf = btnverify;\r\n\r\n            txtverify.setVisibility(View.VISIBLE);\r\n            btnverify.setVisibility(View.VISIBLE);\r\n\r\n            btnverify.setOnClickListener(new View.OnClickListener()\r\n            {\r\n                @Override\r\n                public void onClick(final View v)\r\n                {\r\n\r\n                    FirebaseUser user = mAuth.getCurrentUser();\r\n                    user.sendEmailVerification().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            Toast.makeText(getActivity(),\"Enviando correo de confirmación\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n\r\n                            Toast.makeText(getActivity(),\"Error en el envío de correo\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            /*}else{\r\n            txtverify.setVisibility(View.GONE);\r\n            btnverify.setVisibility(View.GONE);*/\r\n        }\r\n        /*RequestQueue colaPeticiones = Volley.newRequestQueue(getActivity()\r\n                .getApplicationContext());\r\n        ImageLoader lectorImagenes = new ImageLoader(colaPeticiones,\r\n                new ImageLoader.ImageCache() {\r\n                    private final LruCache<String, Bitmap> cache =\r\n                            new LruCache<String, Bitmap>(10);\r\n                    public void putBitmap(String url, Bitmap bitmap) {\r\n                        cache.put(url, bitmap);\r\n                    }\r\n                    public Bitmap getBitmap(String url) {\r\n                        return cache.get(url);\r\n                    }\r\n                });\r\n        Uri urlImagen = usuario.getPhotoUrl();\r\n        if (urlImagen != null) {\r\n            NetworkImageView fotoUsuario = (NetworkImageView)\r\n                    v.findViewById(R.id.profile);\r\n            fotoUsuario.setImageUrl(urlImagen.toString(), lectorImagenes);\r\n        }else{\r\n            NetworkImageView fotoUsuario = (NetworkImageView)\r\n                    v.findViewById(R.id.profile);\r\n            fotoUsuario.setImageUrl(String.valueOf(R.drawable.icons_user), lectorImagenes);\r\n        }*/\r\n        return v;\r\n    }\r\n}\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
---+++ app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java	(date 1609520835174)
---@@ -32,7 +32,7 @@
--- import com.example.infinitycrop.ui.login.LogActivity;
--- import com.example.infinitycrop.ui.profile.settings.AboutInfinityCrap;
--- import com.example.infinitycrop.ui.profile.settings.HelpProfile;
----//import com.example.infinitycrop.ui.profile.settings.ModifyProfile;
---+/*import com.example.infinitycrop.ui.profile.settings.ModifyProfile;*/
--- import com.firebase.ui.auth.AuthUI;
--- import com.google.android.gms.auth.api.signin.GoogleSignIn;
--- import com.google.android.gms.auth.api.signin.GoogleSignInClient;
---@@ -112,7 +112,7 @@
---         irAPerfil.setOnClickListener(new View.OnClickListener() {
---             @Override
---             public void onClick(View v) {
----                /*Intent intent = new Intent(getActivity(), ModifyProfile.class);
---+               /* Intent intent = new Intent(getActivity(), ModifyProfile.class);
---                 startActivity(intent);*/
---             }
---         });
---Index: app/src/main/java/com/example/infinitycrop/ui/OnBoardingFragment/OnBoardingFragment4.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.OnBoardingFragment;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.AddMachine;\r\n\r\npublic class OnBoardingFragment4 extends Fragment {\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        final ViewGroup root = (ViewGroup) inflater.inflate(R.layout.fragment_on_boarding4,container,false);\r\n        TextView button = (TextView) root.findViewById(R.id.btn_skip);\r\n        button.setOnClickListener(new View.OnClickListener()\r\n        {\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                Intent intent = new Intent((getActivity().getApplication()), AddMachine.class);\r\n                TextView editText = (TextView) root.findViewById(R.id.btn_skip);\r\n\r\n                startActivity(intent);\r\n\r\n            }\r\n        });\r\n        Button button1 = (Button) root.findViewById(R.id.btn_start);\r\n        button1.setOnClickListener(new View.OnClickListener()\r\n        {\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                Intent i = new Intent((getActivity().getApplication()), AddMachine.class);\r\n                Button button1 = (Button) root.findViewById(R.id.btn_start);\r\n                startActivity(i);\r\n            }\r\n        });\r\n\r\n        return root;\r\n    }\r\n}\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/OnBoardingFragment/OnBoardingFragment4.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
---+++ app/src/main/java/com/example/infinitycrop/ui/OnBoardingFragment/OnBoardingFragment4.java	(date 1609520835179)
---@@ -17,6 +17,7 @@
---     @Override
---     public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
---         final ViewGroup root = (ViewGroup) inflater.inflate(R.layout.fragment_on_boarding4,container,false);
---+
---         TextView button = (TextView) root.findViewById(R.id.btn_skip);
---         button.setOnClickListener(new View.OnClickListener()
---         {
---@@ -30,6 +31,7 @@
--- 
---             }
---         });
---+
---         Button button1 = (Button) root.findViewById(R.id.btn_start);
---         button1.setOnClickListener(new View.OnClickListener()
---         {
---diff --git .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44__Default_Changelist_.xml
---diff --git .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02__Default_Changelist_.xml
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_29_12_2020_0_38_[Default_Changelist]/shelved.patch
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_29_12_2020_0_38_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_29_12_2020_0_38_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--@@ -1,47 +0,0 @@
---Index: app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.profile;\r\n\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.graphics.Bitmap;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.util.LruCache;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.android.volley.RequestQueue;\r\nimport com.android.volley.toolbox.ImageLoader;\r\nimport com.android.volley.toolbox.NetworkImageView;\r\nimport com.android.volley.toolbox.Volley;\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.MainActivityMachineList;\r\nimport com.example.infinitycrop.ui.login.LogActivity;\r\nimport com.example.infinitycrop.ui.profile.settings.AboutInfinityCrap;\r\nimport com.example.infinitycrop.ui.profile.settings.HelpProfile;\r\nimport com.example.infinitycrop.ui.profile.settings.ModifyProfile;\r\nimport com.firebase.ui.auth.AuthUI;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link ProfileFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class ProfileFragment extends Fragment {\r\n    //atributos para confirmación de correo\r\n    private FirebaseUser us;\r\n    private TextView txtverf;\r\n    private Button btnconf;\r\n\r\n\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public ProfileFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment ProfileFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static ProfileFragment newInstance(String param1, String param2) {\r\n        ProfileFragment fragment = new ProfileFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_profile, container, false);\r\n\r\n        ImageView irAPerfil =v.findViewById(R.id.irAEditarPerfil);\r\n        irAPerfil.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), ModifyProfile.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n        //Enlaces de los botones de configuracion\r\n        //personalice colors\r\n        RelativeLayout customColors_btn =v.findViewById(R.id.relativeLayout4);\r\n        customColors_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n            }\r\n        });\r\n        //about us\r\n        RelativeLayout aboutInfinity_btn =v.findViewById(R.id.relativeLayout6);\r\n        aboutInfinity_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), AboutInfinityCrap.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        //help\r\n        RelativeLayout help_profile =v.findViewById(R.id.relativeLayout5);\r\n        help_profile.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), HelpProfile.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        //firebase\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=mAuth.getCurrentUser().getUid();\r\n        final GoogleSignInClient mGoogleSignInClient;\r\n        GoogleSignInOptions gso;\r\n        final FirebaseUser usuario = FirebaseAuth.getInstance().getCurrentUser();\r\n        //guardo la imagen en un ImagenView\r\n        final ImageView img = (ImageView) v.findViewById(R.id.profile);\r\n        //guardo el nombre en un textView\r\n        final TextView nombre = (TextView) v.findViewById(R.id.username);\r\n        nombre.setText(usuario.getDisplayName());\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(nombre.getText() == \"\"){\r\n                    nombre.setText(snapshot.getString(\"username\"));\r\n                    img.setImageResource(R.drawable.icons_user);\r\n                }\r\n            }\r\n        });\r\n\r\n        //guardo el mail en un textView\r\n        TextView correo = (TextView) v.findViewById(R.id.mailUser);\r\n        correo.setText(usuario.getEmail());\r\n        //cargar imágen con glide:\r\n        Glide.with(this).load(usuario.getPhotoUrl()).into(img);\r\n        //boton cerrar sesion\r\n\r\n        //Configurar las gso para google signIn con el fin de luego desloguear de google\r\n        gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestIdToken(getString(R.string.default_web_client_id))\r\n                .requestEmail()\r\n                .build();\r\n        mGoogleSignInClient = GoogleSignIn.getClient(getActivity(), gso);\r\n\r\n        RelativeLayout cerrarSesion =(RelativeLayout) v.findViewById(R.id.btn_end_session);\r\n        cerrarSesion.setOnClickListener(new View.OnClickListener() {\r\n            public void onClick(View view) {\r\n                new AlertDialog.Builder(requireContext())\r\n                        .setTitle(\"Cerrar sesión\")\r\n                        .setMessage(\"¿Estas seguro que quieres cerrar sesión?\")\r\n                        .setPositiveButton(\"Confirmar\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n                                //Cerrar session con Firebase\r\n                                mAuth.signOut();\r\n                                //Cerrar sesión con google tambien: Google sign out\r\n                                mGoogleSignInClient.signOut().addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                                    @Override\r\n                                    public void onComplete(@NonNull Task<Void> task) {\r\n                                        //Abrir MainActivity con SigIn button\r\n                                        if(task.isSuccessful()){\r\n                                            Intent logActivity = new Intent(getActivity().getApplicationContext(), LogActivity.class);\r\n                                            startActivity(logActivity);\r\n                                            getActivity().finish();\r\n                                        }else{\r\n                                            Toast.makeText(getActivity().getApplicationContext(), \"No se pudo cerrar sesión con google\",\r\n                                                    Toast.LENGTH_LONG).show();\r\n                                        }\r\n                                    }\r\n                                });\r\n\r\n                            }\r\n                        })\r\n                        .setNegativeButton(\"Cancelar\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                            }\r\n                        })\r\n                        .show();\r\n\r\n\r\n            }\r\n        });\r\n\r\n        //Confirmación de verificación de correo\r\n        TextView txtverify = (TextView) v.findViewById(R.id.txtVerif);\r\n        Button btnverify = (Button) v.findViewById(R.id.btnverif);\r\n        final FirebaseUser user = mAuth.getCurrentUser();\r\n        if(!user.isEmailVerified()){\r\n            us=user;\r\n            txtverf = txtverify;\r\n            btnconf = btnverify;\r\n\r\n            txtverify.setVisibility(View.VISIBLE);\r\n            btnverify.setVisibility(View.VISIBLE);\r\n\r\n            btnverify.setOnClickListener(new View.OnClickListener()\r\n            {\r\n                @Override\r\n                public void onClick(final View v)\r\n                {\r\n\r\n                    FirebaseUser user = mAuth.getCurrentUser();\r\n                    user.sendEmailVerification().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            Toast.makeText(getActivity(),\"Enviando correo de confirmación\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n\r\n                            Toast.makeText(getActivity(),\"Error en el envío de correo\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            /*}else{\r\n            txtverify.setVisibility(View.GONE);\r\n            btnverify.setVisibility(View.GONE);*/\r\n        }\r\n        /*RequestQueue colaPeticiones = Volley.newRequestQueue(getActivity()\r\n                .getApplicationContext());\r\n        ImageLoader lectorImagenes = new ImageLoader(colaPeticiones,\r\n                new ImageLoader.ImageCache() {\r\n                    private final LruCache<String, Bitmap> cache =\r\n                            new LruCache<String, Bitmap>(10);\r\n                    public void putBitmap(String url, Bitmap bitmap) {\r\n                        cache.put(url, bitmap);\r\n                    }\r\n                    public Bitmap getBitmap(String url) {\r\n                        return cache.get(url);\r\n                    }\r\n                });\r\n        Uri urlImagen = usuario.getPhotoUrl();\r\n        if (urlImagen != null) {\r\n            NetworkImageView fotoUsuario = (NetworkImageView)\r\n                    v.findViewById(R.id.profile);\r\n            fotoUsuario.setImageUrl(urlImagen.toString(), lectorImagenes);\r\n        }else{\r\n            NetworkImageView fotoUsuario = (NetworkImageView)\r\n                    v.findViewById(R.id.profile);\r\n            fotoUsuario.setImageUrl(String.valueOf(R.drawable.icons_user), lectorImagenes);\r\n        }*/\r\n        return v;\r\n    }\r\n}\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java	(revision 3eb9f21b60ebfff51498bfb1b27f941eaf3f6559)
---+++ app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java	(date 1609175744817)
---@@ -32,7 +32,7 @@
--- import com.example.infinitycrop.ui.login.LogActivity;
--- import com.example.infinitycrop.ui.profile.settings.AboutInfinityCrap;
--- import com.example.infinitycrop.ui.profile.settings.HelpProfile;
----import com.example.infinitycrop.ui.profile.settings.ModifyProfile;
---+/*import com.example.infinitycrop.ui.profile.settings.ModifyProfile;*/
--- import com.firebase.ui.auth.AuthUI;
--- import com.google.android.gms.auth.api.signin.GoogleSignIn;
--- import com.google.android.gms.auth.api.signin.GoogleSignInClient;
---@@ -112,8 +112,8 @@
---         irAPerfil.setOnClickListener(new View.OnClickListener() {
---             @Override
---             public void onClick(View v) {
----                Intent intent = new Intent(getActivity(), ModifyProfile.class);
----                startActivity(intent);
---+              /*  Intent intent = new Intent(getActivity(), ModifyProfile.class);
---+                startActivity(intent);*/
---             }
---         });
--- 
---Index: comun/src/main/java/com/example/comun/Mqtt.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.comun;\r\n\r\npublic class Mqtt {\r\n    public static final String TAG = \"MQTT\";\r\n    public static final String topicRoot=\"infinity/senyal/\";\r\n\r\n\r\n    //Reemplaza equipo por el nombre de tu equipo de prácticas\r\n    public static final int qos = 1;\r\n    public static final String broker = \"tcp://broker.hivemq.com:1883\";\r\n    public static final String clientId = \"IotTestInfinity123434\";\r\n//Reemplaza ClientId con un valor diferente\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ comun/src/main/java/com/example/comun/Mqtt.java	(revision 3eb9f21b60ebfff51498bfb1b27f941eaf3f6559)
---+++ comun/src/main/java/com/example/comun/Mqtt.java	(date 1609175420200)
---@@ -8,6 +8,6 @@
---     //Reemplaza equipo por el nombre de tu equipo de prácticas
---     public static final int qos = 1;
---     public static final String broker = "tcp://broker.hivemq.com:1883";
----    public static final String clientId = "IotTestInfinity123434";
---+    public static final String clientId = "IotTestInfinity1234";
--- //Reemplaza ClientId con un valor diferente
--- }
---\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_29_12_2020_0_38__Default_Changelist_.xml
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_29_12_2020_0_38__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_29_12_2020_0_38__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_29_12_2020_0_38_[Default_Changelist]" date="1609198713127" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_29_12_2020_0_38_[Default_Changelist]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 29/12/2020 0:38 [Default Changelist]" />
---</changelist>
--\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_18_10_[Default_Changelist]/shelved.patch
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_18_10_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_18_10_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--@@ -1,762 +0,0 @@
---Index: .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25__Default_Changelist_.xml
---===================================================================
------ .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25__Default_Changelist_.xml	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25__Default_Changelist_.xml	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---@@ -1,4 +0,0 @@
----<changelist name="Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]" date="1607628338928" recycled="true" deleted="true">
----  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]/shelved.patch" />
----  <option name="DESCRIPTION" value="Uncommitted changes before Update at 10/12/2020 20:25 [Default Changelist]" />
----</changelist>
---\ No newline at end of file
---Index: .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]/shelved.patch
---===================================================================
------ .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]/shelved.patch	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]/shelved.patch	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---@@ -1,729 +0,0 @@
----Index: app/src/main/AndroidManifest.xml
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    package=\"com.example.infinitycrop\">\n\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/>\n    <uses-permission android:name=\"android.permission.INTERNET\"/>\n    <!--Permisos Qr-->\n    <uses-permission android:name=\"android.permission.CAMERA\"/>\n    <uses-feature android:name=\"android.hardware.camera\"></uses-feature>\n    <uses-feature android:name=\"android.hardware.camera.autofocus\"></uses-feature>\n\n    <application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher\"\n        android:theme=\"@style/AppThemeHome\"\n        >\n\n        <activity android:name=\".MainActivity\" android:theme=\"@style/SplashTheme\">\n        </activity>\n\n        <activity android:name=\"com.example.infinitycrop.ui.login.LogActivity\">\n            <intent-filter>\n                <action android:name=\"android.intent.action.MAIN\" />\n                <category android:name=\"android.intent.category.LAUNCHER\" />\n            </intent-filter>\n        </activity>\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\">\n\n        </activity>\n        <activity android:name=\".ui.profile.settings.HelpProfile\">\n\n        </activity>\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\"></activity>\n        <activity android:name=\".ui.list_machine.AddMachine\"></activity>\n        <activity android:name=\".ui.logmail.RegisterActivity\"></activity>\n        <activity android:name=\".ui.logmail.LoginActivity\"></activity>\n        <activity android:name=\".ui.list_machine.CaptureAct\"></activity>\n\n\n\n\n        <meta-data android:name=\"com.google.android.geo.API_KEY\"\n            android:value=\"@string/google_maps_key\" />\n\n        <meta-data android:name=\"com.facebook.sdk.ApplicationId\"\n            tools:replace=\"android:value\"\n            android:value=\"@string/facebook_app_id\"/>\n\n\n    </application>\n\n</manifest>
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/AndroidManifest.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/AndroidManifest.xml	(date 1607539967252)
----@@ -5,6 +5,8 @@
---- 
----     <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
----     <uses-permission android:name="android.permission.INTERNET"/>
----+    <uses-permission android:name="com.google.android.things.permission.MANAGE_INPUT_DRIVERS" />
----+    <uses-permission android:name="com.google.android.things.permission.USE_PERIPHERAL_IO" />
----     <!--Permisos Qr-->
----     <uses-permission android:name="android.permission.CAMERA"/>
----     <uses-feature android:name="android.hardware.camera"></uses-feature>
----Index: app/src/main/res/layout/fragment_graphic.xml
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.graphic.GraphicFragment\">\r\n\r\n    <!-- TODO: Update blank fragment layout -->\r\n    <TextView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_centerInParent=\"true\"\r\n        android:textSize=\"50dp\"\r\n        android:text=\"Graphic fragment\" />\r\n\r\n</RelativeLayout>
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/res/layout/fragment_graphic.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/res/layout/fragment_graphic.xml	(date 1607520842759)
----@@ -1,16 +1,64 @@
---- <?xml version="1.0" encoding="utf-8"?>
-----<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
----+<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
----     xmlns:tools="http://schemas.android.com/tools"
----     android:layout_width="match_parent"
----     android:layout_height="match_parent"
----+    xmlns:app="http://schemas.android.com/apk/res-auto"
----+    android:background="#EFE9E9"
----     tools:context=".ui.graphic.GraphicFragment">
---- 
-----    <!-- TODO: Update blank fragment layout -->
-----    <TextView
-----        android:layout_width="match_parent"
----+    <androidx.constraintlayout.widget.ConstraintLayout
----+        android:layout_width="match_parent"
----+        android:layout_height="match_parent">
----+
----+
----+        <RelativeLayout
----+            android:id="@+id/relativeLayout2"
----+            android:layout_width="match_parent"
----+            android:layout_height="wrap_content"
----+            android:layout_marginStart="20dp"
----+            android:layout_marginEnd="20dp"
----+            app:layout_constraintBottom_toTopOf="@+id/image_list"
----+            app:layout_constraintEnd_toEndOf="parent"
----+            app:layout_constraintStart_toStartOf="parent"
----+            app:layout_constraintTop_toTopOf="parent">
----+
----+            <TextView
----+                android:id="@+id/textMode"
----+                android:layout_width="wrap_content"
----+                android:layout_height="wrap_content"
----+                android:text="Lista de fotografías  >"
----+
----+                android:textSize="19sp" />
----+
----+            <!--<ImageView
----+                android:layout_width="62dp"
----+                android:layout_height="62dp"
----+                android:layout_alignParentRight="true"
----+                android:src="@drawable/ic_sun" />-->
----+        </RelativeLayout>
----+
----+        <androidx.recyclerview.widget.RecyclerView
----+            android:id="@+id/image_list"
----+            android:layout_width="match_parent"
----+            android:layout_height="match_parent"
----+            android:layout_marginStart="16dp"
----+            android:layout_marginTop="70dp"
----+            android:layout_marginEnd="16dp"
----+            app:layout_constraintBottom_toBottomOf="parent"
----+            app:layout_constraintEnd_toEndOf="parent"
----+            app:layout_constraintStart_toStartOf="parent"
----+            app:layout_constraintTop_toBottomOf="@+id/constraintLayout3" />
----+    </androidx.constraintlayout.widget.ConstraintLayout>
----+
----+
----+    <com.google.android.material.floatingactionbutton.FloatingActionButton
----+        android:id="@+id/button_add_image"
----+        android:layout_width="wrap_content"
----         android:layout_height="wrap_content"
-----        android:layout_centerInParent="true"
-----        android:textSize="50dp"
-----        android:text="Graphic fragment" />
----+        android:layout_gravity="top|end"
----+        android:layout_margin="16dp"
----+
----+        android:src="@drawable/icons_plus" />
---- 
-----</RelativeLayout>
----\ No newline at end of file
----+</androidx.coordinatorlayout.widget.CoordinatorLayout>
----\ No newline at end of file
----Index: app/build.gradle
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+>apply plugin: 'com.android.application'\n\n\nandroid {\n    compileSdkVersion 30\n    buildToolsVersion \"30.0.2\"\n\n    defaultConfig {\n        applicationId \"com.example.infinitycrop\"\n        minSdkVersion 23\n        targetSdkVersion 30\n        versionCode 1\n        versionName \"1.0\"\n        multiDexEnabled true\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: \"libs\", include: [\"*.jar\"])\n    implementation 'androidx.appcompat:appcompat:1.2.0'\n    implementation 'com.google.android.material:material:1.2.1'\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.2'\n    implementation 'androidx.navigation:navigation-fragment:2.1.0'\n    implementation 'androidx.navigation:navigation-ui:2.1.0'\n    implementation 'androidx.lifecycle:lifecycle-extensions:2.2.0'\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\n    implementation 'com.google.firebase:firebase-auth:16.0.5'\n    implementation 'com.firebaseui:firebase-ui-auth:6.2.0'\n    implementation project(path: ':comun')\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\n    implementation 'com.google.firebase:firebase-analytics'\n    implementation 'com.ismaeldivita.chipnavigation:chip-navigation-bar:1.3.4'\n    implementation 'org.jetbrains.kotlin:kotlin-stdlib:1.4.10'\n    implementation 'androidx.recyclerview:recyclerview:1.1.0'\n    implementation 'com.android.volley:volley:1.1.0'\n    // Also declare the dependency for the Google Play services library and specify its version\n    implementation 'com.google.android.gms:play-services-auth:18.1.0'\n    // Import the BoM for the Firebase platform\n    implementation platform('com.google.firebase:firebase-bom:26.0.0')\n    implementation 'com.google.firebase:firebase-firestore:17.1.2'\n    implementation 'com.android.support:multidex:1.0.3'\n    implementation 'com.firebaseui:firebase-ui-firestore:6.3.0'\n    //biblioteca para mostrar images a través de URL\n    implementation 'com.github.bumptech.glide:glide:4.11.0'\n    //import del mqtt\n    implementation 'org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.1.1'\n    implementation 'com.google.android.gms:play-services-maps:17.0.0'\n    compile 'com.google.android.gms:play-services-location:16.0.0'\n    implementation 'com.journeyapps:zxing-android-embedded:3.4.0'//añadimos esta libreria para qr\n    implementation 'com.facebook.android:facebook-android-sdk:[4,5)'\n\n    implementation \"androidx.viewpager2:viewpager2:1.0.0\" //libreria viewpager\n}\napply plugin: 'com.google.gms.google-services'
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/build.gradle	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/build.gradle	(date 1607543533244)
----@@ -35,6 +35,8 @@
----     implementation 'com.google.firebase:firebase-auth:16.0.5'
----     implementation 'com.firebaseui:firebase-ui-auth:6.2.0'
----     implementation project(path: ':comun')
----+    implementation 'com.google.firebase:firebase-database:19.5.1'
----+    implementation 'com.google.firebase:firebase-storage:19.2.0'
----     testImplementation 'junit:junit:4.12'
----     androidTestImplementation 'androidx.test.ext:junit:1.1.2'
----     androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'
----Index: app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+>package com.example.infinitycrop.ui.graphic;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport com.example.infinitycrop.R;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link GraphicFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class GraphicFragment extends Fragment {\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public GraphicFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment GraphicFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static GraphicFragment newInstance(String param1, String param2) {\r\n        GraphicFragment fragment = new GraphicFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        return inflater.inflate(R.layout.fragment_graphic, container, false);\r\n    }\r\n}
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java	(date 1607543099075)
----@@ -3,12 +3,19 @@
---- import android.os.Bundle;
---- 
---- import androidx.fragment.app.Fragment;
----+import androidx.recyclerview.widget.LinearLayoutManager;
----+import androidx.recyclerview.widget.RecyclerView;
---- 
---- import android.view.LayoutInflater;
---- import android.view.View;
---- import android.view.ViewGroup;
---- 
---- import com.example.infinitycrop.R;
----+import com.firebase.ui.firestore.FirestoreRecyclerOptions;
----+import com.google.firebase.database.FirebaseDatabase;
----+import com.google.firebase.firestore.FirebaseFirestore;
----+import com.google.firebase.firestore.Query;
----+import com.google.firebase.storage.FirebaseStorage;
---- 
---- /**
----  * A simple {@link Fragment} subclass.
----@@ -16,7 +23,7 @@
----  * create an instance of this fragment.
----  */
---- public class GraphicFragment extends Fragment {
-----
----+    private AdaptadorImagenes adaptador;
----     // TODO: Rename parameter arguments, choose names that match
----     // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
----     private static final String ARG_PARAM1 = "param1";
----@@ -61,6 +68,26 @@
----     public View onCreateView(LayoutInflater inflater, ViewGroup container,
----                              Bundle savedInstanceState) {
----         // Inflate the layout for this fragment
-----        return inflater.inflate(R.layout.fragment_graphic, container, false);
----+        View v= inflater.inflate(R.layout.fragment_graphic, container, false);
----+
----+        RecyclerView recyclerView = v.findViewById(R.id.image_list);
----+        Query query = FirebaseFirestore.getInstance()
----+                .collection("imagenes");
----+        FirestoreRecyclerOptions<Imagen> opciones = new FirestoreRecyclerOptions
----+                .Builder<Imagen>().setQuery(query, Imagen.class).build();
----+        adaptador = new AdaptadorImagenes(getContext(), opciones);
----+        recyclerView.setAdapter(adaptador);
----+        recyclerView.setLayoutManager(new LinearLayoutManager(getContext()));
----+
----+        return v;
----+    }
----+    @Override public void onStart() {
----+        super.onStart();
----+        adaptador.startListening();
----     }
----+    @Override public void onStop() {
----+        super.onStop();
----+        adaptador.stopListening();
----+    }
----+
---- }
----\ No newline at end of file
----Index: comun/src/main/java/com/example/comun/Mqtt.java
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+>package com.example.comun;\n\npublic class Mqtt {\n    public static final String TAG = \"MQTT\";\n    public static final String topicRoot=\"infinity/senyal/\";\n\n\n    //Reemplaza equipo por el nombre de tu equipo de prácticas\n    public static final int qos = 1;\n    public static final String broker = \"tcp://mqtt.eclipse.org:1883\";\n    public static final String clientId = \"IotTestInfinity123\";\n//Reemplaza ClientId con un valor diferente\n}
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- comun/src/main/java/com/example/comun/Mqtt.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ comun/src/main/java/com/example/comun/Mqtt.java	(date 1607524175548)
----@@ -7,7 +7,7 @@
---- 
----     //Reemplaza equipo por el nombre de tu equipo de prácticas
----     public static final int qos = 1;
-----    public static final String broker = "tcp://mqtt.eclipse.org:1883";
----+    public static final String broker = "tcp://broker.hivemq.com:1883";
----     public static final String clientId = "IotTestInfinity123";
---- //Reemplaza ClientId con un valor diferente
---- }
----\ No newline at end of file
----Index: app/src/main/res/layout/fragment_general.xml
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+><ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    tools:context=\".ui.dashboard.DashboardFragment\">\n\n\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\n\n        <RelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginLeft=\"20dp\"\n            android:layout_marginTop=\"10dp\"\n            android:layout_marginRight=\"20dp\">\n\n            <TextView\n                android:id=\"@+id/textDashboard\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Dashboard  >\"\n\n                android:textSize=\"19sp\" />\n\n            <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_below=\"@+id/textDashboard\"\n                android:text=\"4 sensores\"\n\n                android:textSize=\"14sp\" />\n\n            <!--<ImageView\n                android:layout_width=\"62dp\"\n                android:layout_height=\"62dp\"\n                android:layout_alignParentRight=\"true\"\n                android:src=\"@drawable/ic_sun\" />-->\n        </RelativeLayout>\n        <GridLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:columnCount=\"2\"\n            android:rowCount=\"3\"\n            android:alignmentMode=\"alignMargins\"\n            android:columnOrderPreserved=\"false\">\n            <!--temperatura-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Temperatura\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchTemperatura\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:buttonTint=\"#FFFFFF\"\n                            android:checked=\"true\"\n                            android:fitsSystemWindows=\"false\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaTemperatura\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"34°C\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textTemperatura\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textTemperatura\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgTemperatura\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_temperature\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaTemperatura\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--humedad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Humedad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchHumedad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaHumedad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"68%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textHumedad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textHumedad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgHumedad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_humidity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaHumedad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--salinidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Salinidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchSalinidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaSalinidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"10%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textSalinidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textSalinidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgSalinidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_salt\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaSalinidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--Luminosidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Luminosidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchLuminosidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorHighlight=\"#FFFFFF\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidasLuminosidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"90%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textLuminosidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textLuminosidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgLuminosidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_luminosity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidasLuminosidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n\n\n\n\n        </GridLayout>\n\n    </LinearLayout>\n</ScrollView>\n
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/res/layout/fragment_general.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/res/layout/fragment_general.xml	(date 1607536086761)
----@@ -20,7 +20,7 @@
----             android:layout_marginRight="20dp">
---- 
----             <TextView
-----                android:id="@+id/textDashboard"
----+                android:id="@+id/textDashboardGeneral"
----                 android:layout_width="wrap_content"
----                 android:layout_height="wrap_content"
----                 android:text="Dashboard  >"
----@@ -30,7 +30,7 @@
----             <TextView
----                 android:layout_width="wrap_content"
----                 android:layout_height="wrap_content"
-----                android:layout_below="@+id/textDashboard"
----+                android:layout_below="@+id/textDashboardGeneral"
----                 android:text="4 sensores"
---- 
----                 android:textSize="14sp" />
----@@ -74,19 +74,19 @@
---- 
---- 
----                         <TextView
-----                            android:id="@+id/textTemperatura"
----+                            android:id="@+id/textTemperaturaGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginStart="8dp"
----                             android:layout_marginTop="8dp"
----                             android:text="Temperatura"
----                             android:textSize="16sp"
-----                            app:layout_constraintBottom_toBottomOf="@+id/switchTemperatura"
----+                            app:layout_constraintBottom_toBottomOf="@+id/switchTemperaturaGeneral"
----                             app:layout_constraintStart_toStartOf="parent"
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <Switch
-----                            android:id="@+id/switchTemperatura"
----+                            android:id="@+id/switchTemperaturaGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginTop="8dp"
----@@ -100,25 +100,25 @@
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <TextView
-----                            android:id="@+id/medidaTemperatura"
----+                            android:id="@+id/medidaTemperaturaGeneral"
----                             android:layout_width="90dp"
----                             android:layout_height="39dp"
----                             android:layout_marginTop="24dp"
----                             android:text="34°C"
----                             android:textSize="31sp"
-----                            app:layout_constraintStart_toStartOf="@+id/textTemperatura"
-----                            app:layout_constraintTop_toBottomOf="@+id/textTemperatura" />
----+                            app:layout_constraintStart_toStartOf="@+id/textTemperaturaGeneral"
----+                            app:layout_constraintTop_toBottomOf="@+id/textTemperaturaGeneral" />
---- 
----                         <ImageView
-----                            android:id="@+id/imgTemperatura"
----+                            android:id="@+id/imgTemperaturaGeneral"
----                             android:layout_width="53dp"
----                             android:layout_height="55dp"
----                             android:layout_marginEnd="1dp"
----                             android:src="@drawable/icons_temperature"
-----                            app:layout_constraintBottom_toBottomOf="@+id/medidaTemperatura"
----+                            app:layout_constraintBottom_toBottomOf="@+id/medidaTemperaturaGeneral"
----                             app:layout_constraintEnd_toEndOf="parent"
-----                            app:layout_constraintStart_toEndOf="@+id/medidaTemperatura"
-----                            app:layout_constraintTop_toTopOf="@+id/medidaTemperatura" />
----+                            app:layout_constraintStart_toEndOf="@+id/medidaTemperaturaGeneral"
----+                            app:layout_constraintTop_toTopOf="@+id/medidaTemperaturaGeneral" />
----                     </androidx.constraintlayout.widget.ConstraintLayout>
----                 </LinearLayout>
----             </androidx.cardview.widget.CardView>
----@@ -148,19 +148,19 @@
---- 
---- 
----                         <TextView
-----                            android:id="@+id/textHumedad"
----+                            android:id="@+id/textHumedadGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginStart="8dp"
----                             android:layout_marginTop="8dp"
----                             android:text="Humedad"
----                             android:textSize="16sp"
-----                            app:layout_constraintBottom_toBottomOf="@+id/switchHumedad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/switchHumedadGeneral"
----                             app:layout_constraintStart_toStartOf="parent"
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <Switch
-----                            android:id="@+id/switchHumedad"
----+                            android:id="@+id/switchHumedadGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginTop="8dp"
----@@ -172,25 +172,25 @@
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <TextView
-----                            android:id="@+id/medidaHumedad"
----+                            android:id="@+id/medidaHumedadGeneral"
----                             android:layout_width="90dp"
----                             android:layout_height="39dp"
----                             android:layout_marginTop="24dp"
----                             android:text="68%"
----                             android:textSize="31sp"
-----                            app:layout_constraintStart_toStartOf="@+id/textHumedad"
-----                            app:layout_constraintTop_toBottomOf="@+id/textHumedad" />
----+                            app:layout_constraintStart_toStartOf="@+id/textHumedadGeneral"
----+                            app:layout_constraintTop_toBottomOf="@+id/textHumedadGeneral" />
---- 
----                         <ImageView
-----                            android:id="@+id/imgHumedad"
----+                            android:id="@+id/imgHumedadGeneral"
----                             android:layout_width="53dp"
----                             android:layout_height="55dp"
----                             android:layout_marginEnd="1dp"
----                             android:src="@drawable/icons_humidity"
-----                            app:layout_constraintBottom_toBottomOf="@+id/medidaHumedad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/medidaHumedadGeneral"
----                             app:layout_constraintEnd_toEndOf="parent"
-----                            app:layout_constraintStart_toEndOf="@+id/medidaHumedad"
-----                            app:layout_constraintTop_toTopOf="@+id/medidaHumedad" />
----+                            app:layout_constraintStart_toEndOf="@+id/medidaHumedadGeneral"
----+                            app:layout_constraintTop_toTopOf="@+id/medidaHumedadGeneral" />
----                     </androidx.constraintlayout.widget.ConstraintLayout>
----                 </LinearLayout>
----             </androidx.cardview.widget.CardView>
----@@ -220,19 +220,19 @@
---- 
---- 
----                         <TextView
-----                            android:id="@+id/textSalinidad"
----+                            android:id="@+id/textSalinidadGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginStart="8dp"
----                             android:layout_marginTop="8dp"
----                             android:text="Salinidad"
----                             android:textSize="16sp"
-----                            app:layout_constraintBottom_toBottomOf="@+id/switchSalinidad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/switchSalinidadGeneral"
----                             app:layout_constraintStart_toStartOf="parent"
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <Switch
-----                            android:id="@+id/switchSalinidad"
----+                            android:id="@+id/switchSalinidadGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginTop="8dp"
----@@ -244,25 +244,25 @@
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <TextView
-----                            android:id="@+id/medidaSalinidad"
----+                            android:id="@+id/medidaSalinidadGeneral"
----                             android:layout_width="90dp"
----                             android:layout_height="39dp"
----                             android:layout_marginTop="24dp"
----                             android:text="10%"
----                             android:textSize="31sp"
-----                            app:layout_constraintStart_toStartOf="@+id/textSalinidad"
-----                            app:layout_constraintTop_toBottomOf="@+id/textSalinidad" />
----+                            app:layout_constraintStart_toStartOf="@+id/textSalinidadGeneral"
----+                            app:layout_constraintTop_toBottomOf="@+id/textSalinidadGeneral" />
---- 
----                         <ImageView
-----                            android:id="@+id/imgSalinidad"
----+                            android:id="@+id/imgSalinidadGeneral"
----                             android:layout_width="53dp"
----                             android:layout_height="55dp"
----                             android:layout_marginEnd="1dp"
----                             android:src="@drawable/icons_salt"
-----                            app:layout_constraintBottom_toBottomOf="@+id/medidaSalinidad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/medidaSalinidadGeneral"
----                             app:layout_constraintEnd_toEndOf="parent"
-----                            app:layout_constraintStart_toEndOf="@+id/medidaSalinidad"
-----                            app:layout_constraintTop_toTopOf="@+id/medidaSalinidad" />
----+                            app:layout_constraintStart_toEndOf="@+id/medidaSalinidadGeneral"
----+                            app:layout_constraintTop_toTopOf="@+id/medidaSalinidadGeneral" />
----                     </androidx.constraintlayout.widget.ConstraintLayout>
----                 </LinearLayout>
----             </androidx.cardview.widget.CardView>
----@@ -292,19 +292,19 @@
---- 
---- 
----                         <TextView
-----                            android:id="@+id/textLuminosidad"
----+                            android:id="@+id/textLuminosidadGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginStart="8dp"
----                             android:layout_marginTop="8dp"
----                             android:text="Luminosidad"
----                             android:textSize="16sp"
-----                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidadGeneral"
----                             app:layout_constraintStart_toStartOf="parent"
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <Switch
-----                            android:id="@+id/switchLuminosidad"
----+                            android:id="@+id/switchLuminosidadGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginTop="8dp"
----@@ -317,25 +317,25 @@
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <TextView
-----                            android:id="@+id/medidasLuminosidad"
----+                            android:id="@+id/medidasLuminosidadGeneral"
----                             android:layout_width="90dp"
----                             android:layout_height="39dp"
----                             android:layout_marginTop="24dp"
----                             android:text="90%"
----                             android:textSize="31sp"
-----                            app:layout_constraintStart_toStartOf="@+id/textLuminosidad"
-----                            app:layout_constraintTop_toBottomOf="@+id/textLuminosidad" />
----+                            app:layout_constraintStart_toStartOf="@+id/textLuminosidadGeneral"
----+                            app:layout_constraintTop_toBottomOf="@+id/textLuminosidadGeneral" />
---- 
----                         <ImageView
-----                            android:id="@+id/imgLuminosidad"
----+                            android:id="@+id/imgLuminosidadGeneral"
----                             android:layout_width="53dp"
----                             android:layout_height="55dp"
----                             android:layout_marginEnd="1dp"
----                             android:src="@drawable/icons_luminosity"
-----                            app:layout_constraintBottom_toBottomOf="@+id/medidasLuminosidad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/medidasLuminosidadGeneral"
----                             app:layout_constraintEnd_toEndOf="parent"
-----                            app:layout_constraintStart_toEndOf="@+id/medidasLuminosidad"
-----                            app:layout_constraintTop_toTopOf="@+id/medidasLuminosidad" />
----+                            app:layout_constraintStart_toEndOf="@+id/medidasLuminosidadGeneral"
----+                            app:layout_constraintTop_toTopOf="@+id/medidasLuminosidadGeneral" />
----                     </androidx.constraintlayout.widget.ConstraintLayout>
----                 </LinearLayout>
----             </androidx.cardview.widget.CardView>
----Index: app/src/main/res/layout/fragment_planta1.xml
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+><ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    tools:context=\".ui.dashboard.DashboardFragment\">\n\n\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\n\n        <RelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginLeft=\"20dp\"\n            android:layout_marginTop=\"10dp\"\n            android:layout_marginRight=\"20dp\">\n\n            <TextView\n                android:id=\"@+id/textDashboard\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Dashboard  >\"\n\n                android:textSize=\"19sp\" />\n\n            <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_below=\"@+id/textDashboard\"\n                android:text=\"4 sensores\"\n\n                android:textSize=\"14sp\" />\n\n            <!--<ImageView\n                android:layout_width=\"62dp\"\n                android:layout_height=\"62dp\"\n                android:layout_alignParentRight=\"true\"\n                android:src=\"@drawable/ic_sun\" />-->\n        </RelativeLayout>\n        <GridLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:columnCount=\"2\"\n            android:rowCount=\"3\"\n            android:alignmentMode=\"alignMargins\"\n            android:columnOrderPreserved=\"false\">\n            <!--temperatura-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Temperatura\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchTemperatura\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:buttonTint=\"#FFFFFF\"\n                            android:checked=\"true\"\n                            android:fitsSystemWindows=\"false\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaTemperatura\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"34°C\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textTemperatura\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textTemperatura\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgTemperatura\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_temperature\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaTemperatura\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--humedad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Humedad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchHumedad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaHumedad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"68%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textHumedad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textHumedad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgHumedad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_humidity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaHumedad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--salinidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Salinidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchSalinidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaSalinidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"10%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textSalinidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textSalinidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgSalinidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_salt\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaSalinidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--Luminosidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Luminosidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchLuminosidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorHighlight=\"#FFFFFF\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidasLuminosidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"90%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textLuminosidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textLuminosidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgLuminosidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_luminosity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidasLuminosidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n\n\n\n\n        </GridLayout>\n\n    </LinearLayout>\n</ScrollView>\n
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/res/layout/fragment_planta1.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/res/layout/fragment_planta1.xml	(date 1607537539251)
----@@ -299,12 +299,12 @@
----                             android:layout_marginTop="8dp"
----                             android:text="Luminosidad"
----                             android:textSize="16sp"
-----                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidadPlamta1"
----                             app:layout_constraintStart_toStartOf="parent"
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <Switch
-----                            android:id="@+id/switchLuminosidad"
----+                            android:id="@+id/switchLuminosidadPlamta1"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginTop="8dp"
----Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+>package com.example.infinitycrop.ui.dashboard;\n\nimport android.os.Bundle;\n\nimport androidx.fragment.app.Fragment;\n\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.TextView;\n\nimport com.example.infinitycrop.R;\n\n/**\n * A simple {@link Fragment} subclass.\n * Use the {@link GeneralFragment#newInstance} factory method to\n * create an instance of this fragment.\n */\npublic class GeneralFragment extends Fragment {\n\n    // TODO: Rename parameter arguments, choose names that match\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\n    private static final String ARG_PARAM1 = \"param1\";\n    private static final String ARG_PARAM2 = \"param2\";\n\n    // TODO: Rename and change types of parameters\n    private String mParam1;\n    private String mParam2;\n\n    public GeneralFragment() {\n        // Required empty public constructor\n    }\n\n    /**\n     * Use this factory method to create a new instance of\n     * this fragment using the provided parameters.\n     *\n     * @param param1 Parameter 1.\n     * @param param2 Parameter 2.\n     * @return A new instance of fragment GeneralFragment.\n     */\n    // TODO: Rename and change types and number of parameters\n    public static GeneralFragment newInstance(String param1, String param2) {\n        GeneralFragment fragment = new GeneralFragment();\n        Bundle args = new Bundle();\n        args.putString(ARG_PARAM1, param1);\n        args.putString(ARG_PARAM2, param2);\n        fragment.setArguments(args);\n        return fragment;\n    }\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        if (getArguments() != null) {\n            mParam1 = getArguments().getString(ARG_PARAM1);\n            mParam2 = getArguments().getString(ARG_PARAM2);\n        }\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        View v = inflater.inflate(R.layout.fragment_general, container, false);\n\n        return v;\n    }\n}
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(date 1607537068118)
----@@ -4,20 +4,34 @@
---- 
---- import androidx.fragment.app.Fragment;
---- 
----+import android.util.Log;
---- import android.view.LayoutInflater;
---- import android.view.View;
---- import android.view.ViewGroup;
----+import android.widget.CompoundButton;
----+import android.widget.Switch;
---- import android.widget.TextView;
---- 
----+import com.example.comun.Mqtt;
---- import com.example.infinitycrop.R;
---- 
----+import org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;
----+import org.eclipse.paho.client.mqttv3.MqttCallback;
----+import org.eclipse.paho.client.mqttv3.MqttClient;
----+import org.eclipse.paho.client.mqttv3.MqttConnectOptions;
----+import org.eclipse.paho.client.mqttv3.MqttException;
----+import org.eclipse.paho.client.mqttv3.MqttMessage;
----+import org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;
----+
----+import static com.example.comun.Mqtt.topicRoot;
----+
---- /**
----  * A simple {@link Fragment} subclass.
----  * Use the {@link GeneralFragment#newInstance} factory method to
----  * create an instance of this fragment.
----  */
-----public class GeneralFragment extends Fragment {
-----
----+public class GeneralFragment extends Fragment implements MqttCallback{
----+    public static MqttClient client = null;
----     // TODO: Rename parameter arguments, choose names that match
----     // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
----     private static final String ARG_PARAM1 = "param1";
----@@ -63,7 +77,108 @@
----                              Bundle savedInstanceState) {
----         // Inflate the layout for this fragment
----         View v = inflater.inflate(R.layout.fragment_general, container, false);
-----
----+        //switch methods
----+        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);
----+        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
----+            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
----+                if (isChecked) {
----+                    // The toggle is enabled
----+                    enviarLucesOn();
----+                } else {
----+                    // The toggle is disabled
----+                    enviarLucesOff();
----+                }
----+            }
----+        });
----         return v;
----     }
----+    public void enviarLucesOff(){
----+        try {
----+            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new
----+                    MemoryPersistence());
----+        } catch (MqttException e) {
----+            e.printStackTrace();
----+        }
----+        MqttConnectOptions connOpts = new MqttConnectOptions();
----+        connOpts.setCleanSession(true);
----+        connOpts.setKeepAliveInterval(60);
----+        connOpts.setWill(topicRoot+"WillTopic", "App desconectada".getBytes(),Mqtt.qos, false);
----+
----+        try {
----+            client.connect(connOpts);
----+        } catch (MqttException e) {
----+            e.printStackTrace();
----+        }
----+
----+        //conexión con el broker Root1 = Lector de datos
----+        //nos subscribimos a topic lectura
----+        try {
----+            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "luces");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
----+            client.subscribe(topicRoot + "luces", Mqtt.qos);
----+            client.setCallback((MqttCallback) this);
----+        } catch (MqttException e) {
----+            Log.e(Mqtt.TAG, "Error al suscribir.", e);
----+        }
----+        try {
----+            Log.i(Mqtt.TAG, "Publicando mensaje: " + "mensaje");
----+            MqttMessage message = new MqttMessage("Superior OFF".getBytes());
----+            message.setQos(Mqtt.qos);
----+            message.setRetained(false);
----+            client.publish(topicRoot+"luces", message);
----+        } catch (MqttException e) {
----+            Log.e(Mqtt.TAG, "Error al publicar.", e);
----+        }
----+    }
----+    public void enviarLucesOn(){
----+        try {
----+            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new
----+                    MemoryPersistence());
----+        } catch (MqttException e) {
----+            e.printStackTrace();
----+        }
----+        MqttConnectOptions connOpts = new MqttConnectOptions();
----+        connOpts.setCleanSession(true);
----+        connOpts.setKeepAliveInterval(60);
----+        connOpts.setWill(topicRoot+"WillTopic", "App desconectada".getBytes(),Mqtt.qos, false);
----+
----+        try {
----+            client.connect(connOpts);
----+        } catch (MqttException e) {
----+            e.printStackTrace();
----+        }
----+
----+        //conexión con el broker Root1 = Lector de datos
----+        //nos subscribimos a topic lectura
----+        try {
----+            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "luces");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
----+            client.subscribe(topicRoot + "luces", Mqtt.qos);
----+            client.setCallback((MqttCallback) this);
----+        } catch (MqttException e) {
----+            Log.e(Mqtt.TAG, "Error al suscribir.", e);
----+        }
----+        try {
----+            Log.i(Mqtt.TAG, "Publicando mensaje: " + "mensaje");
----+            MqttMessage message = new MqttMessage("Superior ON".getBytes());
----+            message.setQos(Mqtt.qos);
----+            message.setRetained(false);
----+            client.publish(topicRoot+"luces", message);
----+        } catch (MqttException e) {
----+            Log.e(Mqtt.TAG, "Error al publicar.", e);
----+        }
----+    }
----+
----+    @Override
----+    public void connectionLost(Throwable cause) {
----+        Log.d(Mqtt.TAG, "Conexión perdida");
----+    }
----+
----+    @Override
----+    public void messageArrived(String topic, MqttMessage message) throws Exception {
----+
----+    }
----+
----+    @Override
----+    public void deliveryComplete(IMqttDeliveryToken token) {
----+        Log.d(Mqtt.TAG, "Entrega completa");
----+    }
---- }
----\ No newline at end of file
----Index: app/src/main/res/layout/fragment_planta2.xml
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+><ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    tools:context=\".ui.dashboard.DashboardFragment\">\n\n\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\n\n        <RelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginLeft=\"20dp\"\n            android:layout_marginTop=\"10dp\"\n            android:layout_marginRight=\"20dp\">\n\n            <TextView\n                android:id=\"@+id/textDashboard\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Dashboard  >\"\n\n                android:textSize=\"19sp\" />\n\n            <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_below=\"@+id/textDashboard\"\n                android:text=\"4 sensores\"\n\n                android:textSize=\"14sp\" />\n\n            <!--<ImageView\n                android:layout_width=\"62dp\"\n                android:layout_height=\"62dp\"\n                android:layout_alignParentRight=\"true\"\n                android:src=\"@drawable/ic_sun\" />-->\n        </RelativeLayout>\n        <GridLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:columnCount=\"2\"\n            android:rowCount=\"3\"\n            android:alignmentMode=\"alignMargins\"\n            android:columnOrderPreserved=\"false\">\n            <!--temperatura-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Temperatura\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchTemperatura\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:buttonTint=\"#FFFFFF\"\n                            android:checked=\"true\"\n                            android:fitsSystemWindows=\"false\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaTemperatura\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"34°C\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textTemperatura\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textTemperatura\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgTemperatura\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_temperature\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaTemperatura\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--humedad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Humedad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchHumedad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaHumedad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"68%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textHumedad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textHumedad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgHumedad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_humidity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaHumedad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--salinidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Salinidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchSalinidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaSalinidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"10%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textSalinidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textSalinidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgSalinidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_salt\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaSalinidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--Luminosidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Luminosidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchLuminosidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorHighlight=\"#FFFFFF\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidasLuminosidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"90%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textLuminosidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textLuminosidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgLuminosidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_luminosity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidasLuminosidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n\n\n\n\n        </GridLayout>\n\n    </LinearLayout>\n</ScrollView>\n
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/res/layout/fragment_planta2.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/res/layout/fragment_planta2.xml	(date 1607537539258)
----@@ -299,12 +299,12 @@
----                             android:layout_marginTop="8dp"
----                             android:text="Luminosidad"
----                             android:textSize="16sp"
-----                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidadPlanta2"
----                             app:layout_constraintStart_toStartOf="parent"
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <Switch
-----                            android:id="@+id/switchLuminosidad"
----+                            android:id="@+id/switchLuminosidadPlanta2"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginTop="8dp"
----Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.app.Activity;\r\nimport android.content.res.ColorStateList;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvModel;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\n\r\nimport java.util.ArrayList;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link DashboardFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class DashboardFragment extends Fragment implements MqttCallback{\r\n\r\n    private RecyclerView recyclerView;\r\n    private StaticRvAdapter staticRvAdapter;\r\n    private TabLayout tabLayout;\r\n    private ViewPager viewPager;\r\n    private ColorStateList def;\r\n\r\n\r\n    public static MqttClient client = null;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public DashboardFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment DashboardFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static DashboardFragment newInstance(String param1, String param2) {\r\n        DashboardFragment fragment = new DashboardFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_dashboard, container, false);\r\n        //FIREBASE\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        final FirebaseUser usuario = mAuth.getCurrentUser();\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=usuario.getUid();\r\n        //guardo el nombre en un textView\r\n        /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);\r\n        String res=\"Hola\"+\" \"+usuario.getDisplayName();\r\n        nombre.setText(res);\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(usuario.getDisplayName() == null){\r\n                    String res1=\"Hola\"+\" \"+snapshot.getString(\"username\");\r\n                    nombre.setText(res1);\r\n                }\r\n            }\r\n        });*/\r\n/*\r\n        //switch methods\r\n        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidad);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n */\r\n\r\n        //RECYCLER VIEW\r\n        ArrayList<StaticRvModel> item=new ArrayList<>();\r\n        item.add(new StaticRvModel(R.drawable.icons_sun,\"Soleado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_night_mode,\"Nocturno\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_energy_saving,\"Ahorro\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_power_off,\"Apagado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_custom,\"Custom\"));\r\n\r\n        final TextView medidasT=v.findViewById(R.id.medidaTemperatura);\r\n        final TextView medidasH=v.findViewById(R.id.medidaHumedad);\r\n        final TextView medidasS=v.findViewById(R.id.medidaSalinidad);\r\n        final TextView medidasL=v.findViewById(R.id.medidasLuminosidad);\r\n\r\n        recyclerView=v.findViewById(R.id.rv_1);\r\n        staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(),LinearLayoutManager.HORIZONTAL,false));\r\n        recyclerView.setAdapter(staticRvAdapter);\r\n\r\n\r\n        //TABS\r\n        tabLayout = v.findViewById(R.id.tab_layout);\r\n        viewPager = v.findViewById(R.id.view_pager);\r\n         //Array\r\n        ArrayList<String> arrayList = new ArrayList<>();\r\n\r\n        //set up with viewpager\r\n        tabLayout.setupWithViewPager(viewPager);\r\n\r\n        TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());\r\n        //Pestañas\r\n        adapter.addFrag(new GeneralFragment(),\"General\");\r\n        adapter.addFrag(new Planta1Fragment(),\"Planta 1\");\r\n        adapter.addFrag(new Planta2Fragment(),\"Planta 2\");\r\n\r\n        viewPager.setAdapter(adapter );\r\n\r\n        /*((MainActivity)getActivity()).ola();*/\r\n     /*   //LEER DATOS FIREBASE\r\n        //Temperatura\r\n       DocumentReference documentTemperatura=fStore.collection(\"SensoresA-T\").document(\"Temperatura\");\r\n        documentTemperatura.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediTemp=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasT.setText(resMediTemp);\r\n            }\r\n        });\r\n        //Humedad\r\n        DocumentReference documentHumedad=fStore.collection(\"SensoresA-T\").document(\"Humedad\");\r\n        documentHumedad.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediHum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasH.setText(resMediHum);\r\n            }\r\n        });\r\n        //Iluminación\r\n        DocumentReference documentIluminación=fStore.collection(\"SensoresA-T\").document(\"Iluminación\");\r\n        documentIluminación.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIlum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasL.setText(resMediIlum);\r\n            }\r\n        });\r\n        //Temperatura ambiente\r\n        DocumentReference documentambiente=fStore.collection(\"SensoresA-T\").document(\"Temperatura ambiente\");\r\n        documentambiente.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIAmb=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasS.setText(resMediIAmb);\r\n            }\r\n        });\r\n\r\n      */\r\n\r\n        return v;\r\n    }\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n}
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(date 1607536963984)
----@@ -128,9 +128,9 @@
----                 }
----             }
----         });*/
-----/*
----+
----         //switch methods
-----        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidad);
----+ /*     Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);
----         switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
----             public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
----                 if (isChecked) {
----@@ -141,10 +141,10 @@
----                     enviarLucesOff();
----                 }
----             }
-----        });
----+        });*/
---- 
---- 
----- */
----+
---- 
----         //RECYCLER VIEW
----         ArrayList<StaticRvModel> item=new ArrayList<>();
----@@ -154,10 +154,10 @@
----         item.add(new StaticRvModel(R.drawable.icons_power_off,"Apagado"));
----         item.add(new StaticRvModel(R.drawable.icons_custom,"Custom"));
---- 
-----        final TextView medidasT=v.findViewById(R.id.medidaTemperatura);
-----        final TextView medidasH=v.findViewById(R.id.medidaHumedad);
-----        final TextView medidasS=v.findViewById(R.id.medidaSalinidad);
-----        final TextView medidasL=v.findViewById(R.id.medidasLuminosidad);
----+        final TextView medidasT=v.findViewById(R.id.medidaTemperaturaGeneral);
----+        final TextView medidasH=v.findViewById(R.id.medidaHumedadGeneral);
----+        final TextView medidasS=v.findViewById(R.id.medidaSalinidadGeneral);
----+        final TextView medidasL=v.findViewById(R.id.medidasLuminosidadGeneral);
---- 
----         recyclerView=v.findViewById(R.id.rv_1);
----         staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);
----Index: things/src/main/java/com/example/things/MainActivity.java
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+>package com.example.things;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.util.Log;\n\nimport com.example.comun.Mqtt;\nimport com.google.android.gms.tasks.OnCompleteListener;\nimport com.google.android.gms.tasks.Task;\nimport com.google.firebase.firestore.FirebaseFirestore;\nimport com.google.firebase.firestore.QuerySnapshot;\n\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\nimport org.eclipse.paho.client.mqttv3.MqttClient;\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\nimport org.eclipse.paho.client.mqttv3.MqttException;\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport static com.example.comun.Mqtt.qos;\nimport static com.example.comun.Mqtt.topicRoot;\n\n\n/**\n * Skeleton of an Android Things activity.\n * <p>\n * Android Things peripheral APIs are accessible through the PeripheralManager\n * For example, the snippet below will open a GPIO pin and set it to HIGH:\n * <p>\n * PeripheralManager manager = PeripheralManager.getInstance();\n * try {\n * Gpio gpio = manager.openGpio(\"BCM6\");\n * gpio.setDirection(Gpio.DIRECTION_OUT_INITIALLY_LOW);\n * gpio.setValue(true);\n * } catch (IOException e) {\n * Log.e(TAG, \"Unable to access GPIO\");\n * }\n * <p>\n * You can find additional examples on GitHub: https://github.com/androidthings\n */\npublic class MainActivity extends AppCompatActivity implements MqttCallback {\n    public static MqttClient client = null;\n    FirebaseFirestore db;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        db = FirebaseFirestore.getInstance();\n\n        try {\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\n                    MemoryPersistence());\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n        MqttConnectOptions connOpts = new MqttConnectOptions();\n        connOpts.setCleanSession(true);\n        connOpts.setKeepAliveInterval(60);\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\n\n        try {\n            client.connect(connOpts);\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n\n\n        //conexión con el broker Root1 = Lector de datos\n        //nos subscribimos a topic lectura\n        try {\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"lecturaDatos\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\n            client.subscribe(topicRoot + \"lecturaDatos\", Mqtt.qos);\n            client.setCallback(this);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\n        }\n\n    }\n    // Se ejecuta cuando se pierde la conexión\n    @Override\n    public void connectionLost(Throwable cause) {\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\n\n    }\n    @Override\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\n        String payload = new String(message.getPayload());\n        Log.d(Mqtt.TAG, \"Recibiendo: \" + topic + \"->\" + payload);\n\n        if(topic.equals(topicRoot+\"lecturaDatos\")){\n            //topicLectura(payload);\n            // parts0=humedad,parts1=iluminosidad,parts2=humedadHambiente,parts3=temperatura\n            String[] parts = payload.split(\"-\");//comprueba si los datos introducidos van referentes a cada sensor: nombre,medición, estado\n            Log.d(\"PRUUEBA\",parts[0] + \" \"+parts[1] + \" \"+parts[2] + \" \"+parts[3] + \" \");\n            Map<String, Object> dataTemp = new HashMap<>();\n            dataTemp.put(\"Estado:\", \"Activado\");\n            dataTemp.put(\"Medición\", parts[3]);\n            db.collection(\"SensoresA-T\").document(\"Temperatura\").set(dataTemp);\n\n        }\n\n    }\n     private  void topicLectura(final String payload)  {}\n\n    private void topicLuces(final String payload) {\n    }\n\n    private void topicRiego(final String payload) {\n    }\n\n    private void topicVentiladores(final String payload) {\n    }\n\n\n\n\n\n\n\n    @Override\n    public void onDestroy() {\n        try {\n            Log.i(Mqtt.TAG, \"Desconectado\");\n            client.disconnect();\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al desconectar.\", e);\n        }\n        super.onDestroy();\n    }\n\n\n\n\n\n    @Override\n    public void deliveryComplete(IMqttDeliveryToken token) {\n        Log.d(Mqtt.TAG, \"Entrega completa\");\n\n    }\n}
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- things/src/main/java/com/example/things/MainActivity.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ things/src/main/java/com/example/things/MainActivity.java	(date 1607533992044)
----@@ -93,7 +93,7 @@
----     public void messageArrived(String topic, MqttMessage message) throws Exception {
----         String payload = new String(message.getPayload());
----         Log.d(Mqtt.TAG, "Recibiendo: " + topic + "->" + payload);
-----
----+        db.collection("prueba").add(payload);
----         if(topic.equals(topicRoot+"lecturaDatos")){
----             //topicLectura(payload);
----             // parts0=humedad,parts1=iluminosidad,parts2=humedadHambiente,parts3=temperatura
---Index: comun/src/main/java/com/example/comun/Mqtt.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.comun;\r\n\r\npublic class Mqtt {\r\n    public static final String TAG = \"MQTT\";\r\n    public static final String topicRoot=\"infinity/senyal/\";\r\n\r\n\r\n    //Reemplaza equipo por el nombre de tu equipo de prácticas\r\n    public static final int qos = 1;\r\n    public static final String broker = \"tcp://broker.hivemq.com:1883\";\r\n    public static final String clientId = \"IotTestInfinity123434\";\r\n//Reemplaza ClientId con un valor diferente\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ comun/src/main/java/com/example/comun/Mqtt.java	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ comun/src/main/java/com/example/comun/Mqtt.java	(date 1607642637074)
---@@ -8,6 +8,6 @@
---     //Reemplaza equipo por el nombre de tu equipo de prácticas
---     public static final int qos = 1;
---     public static final String broker = "tcp://broker.hivemq.com:1883";
----    public static final String clientId = "IotTestInfinity123434";
---+    public static final String clientId = "IotTestInfinity1234";
--- //Reemplaza ClientId con un valor diferente
--- }
---\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_01_01_2021_18_07__Default_Changelist_.xml
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_01_01_2021_18_07__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_01_01_2021_18_07__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_01_01_2021_18_07_[Default_Changelist]" date="1609520835203" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_01_01_2021_18_07_[Default_Changelist]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 01/01/2021 18:07 [Default Changelist]" />
---</changelist>
--\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_01_01_2021_18_07_[Default_Changelist]/shelved.patch
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_01_01_2021_18_07_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_01_01_2021_18_07_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--@@ -1,179 +0,0 @@
---Index: app/src/main/java/com/example/infinitycrop/ui/login/LogActivity.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.login;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity2;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.MainActivityMachineList;\r\nimport com.example.infinitycrop.ui.logmail.LoginActivity;\r\nimport com.facebook.AccessToken;\r\nimport com.facebook.AccessTokenTracker;\r\nimport com.facebook.CallbackManager;\r\nimport com.facebook.FacebookCallback;\r\nimport com.facebook.FacebookException;\r\nimport com.facebook.login.LoginResult;\r\nimport com.facebook.login.widget.LoginButton;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInAccount;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.common.SignInButton;\r\nimport com.google.android.gms.common.api.ApiException;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthCredential;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FacebookAuthProvider;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.auth.GoogleAuthProvider;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.facebook.FacebookSdk;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\n\r\npublic class LogActivity extends AppCompatActivity{\r\n    /*private GoogleApiClient googleApiClient;\r\n    private SignInButton signInButton;\r\n    public static final int SIGN_IN_CODE = 777;*/\r\n    //Variable para gestionar FirebaseAuth\r\n    private FirebaseAuth mAuth;\r\n    //Agregar cliente de inicio de sesión de Google\r\n    private GoogleSignInClient mGoogleSignInClient;\r\n    //Constante\r\n    int RC_SIGN_IN = 1;\r\n    SignInButton btnLogin,btnGoogle;\r\n    String TAG = \"GoogleSignIn\";\r\n\r\n    private FirebaseAuth.AuthStateListener authStateListener;\r\n    private AccessTokenTracker accessTokenTracker;\r\n    private LoginButton loginButtonFacebook;\r\n    private CallbackManager mCallbackManager;\r\n    private  static  final String TAG2 = \"FacebookAuthentication\";\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.fragment_login);\r\n        /*GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestEmail()\r\n                .build();\r\n        googleApiClient = new GoogleApiClient.Builder(this)\r\n        .enableAutoManage(this, this)\r\n        .addApi(Auth.GOOGLE_SIGN_IN_API,gso)\r\n        .build();\r\n        signInButton =findViewById(R.id.btn_google);\r\n        signInButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = Auth.GoogleSignInApi.getSignInIntent(googleApiClient);\r\n                startActivityForResult(intent,SIGN_IN_CODE);\r\n            }\r\n        });*/\r\n\r\n        //Botones\r\n        btnGoogle=findViewById(R.id.btn_google);\r\n        loginButtonFacebook = findViewById(R.id.btn_facebook);\r\n        loginButtonFacebook.setReadPermissions(\"email\",\"public_profile\");\r\n\r\n        //Listeners\r\n        btnGoogle.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                signIn();\r\n            }\r\n        });\r\n\r\n        // Configurar Google Sign In\r\n        GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestIdToken(getString(R.string.default_web_client_id))\r\n                .requestEmail()\r\n                .build();\r\n        // Crear un GoogleSignInClient con las opciones especificadas por gso.\r\n        mGoogleSignInClient = GoogleSignIn.getClient(this, gso);\r\n\r\n\r\n\r\n        // Inicializar Firebase Auth\r\n        mAuth = FirebaseAuth.getInstance();\r\n        FacebookSdk.sdkInitialize(getApplicationContext());\r\n\r\n        //Facebook\r\n        mCallbackManager = CallbackManager.Factory.create();\r\n        loginButtonFacebook.registerCallback(mCallbackManager, new FacebookCallback<LoginResult>() {\r\n            @Override\r\n            public void onSuccess(LoginResult loginResult) {\r\n                Log.d(TAG2,\"onSuccess\"+loginResult);\r\n                handleFacebookToken(loginResult.getAccessToken());\r\n            }\r\n\r\n            @Override\r\n            public void onCancel() {\r\n                Log.d(TAG2,\"onCancel\");\r\n            }\r\n\r\n            @Override\r\n            public void onError(FacebookException error) {\r\n                Log.d(TAG2,\"onError: \"+error);\r\n            }\r\n\r\n        });\r\n\r\n        authStateListener = new FirebaseAuth.AuthStateListener() {\r\n            @Override\r\n            public void onAuthStateChanged(@NonNull FirebaseAuth firebaseAuth) {\r\n                FirebaseUser user = firebaseAuth.getCurrentUser();\r\n                if(user!=null){\r\n                    Intent dashboardActivity = new Intent(LogActivity.this, MainActivityMachineList.class);\r\n                    startActivity(dashboardActivity);\r\n                    LogActivity.this.finish();\r\n                }\r\n            }\r\n        };\r\n\r\n        accessTokenTracker = new AccessTokenTracker() {\r\n            @Override\r\n            protected void onCurrentAccessTokenChanged(AccessToken oldAccessToken, AccessToken currentAccessToken) {\r\n                if(currentAccessToken == null){\r\n                    mAuth.signOut();\r\n                }\r\n            }\r\n        };\r\n\r\n    }\r\n    private void signIn() {\r\n        Intent signInIntent = mGoogleSignInClient.getSignInIntent();\r\n        startActivityForResult(signInIntent, RC_SIGN_IN);\r\n    }\r\n\r\n    @Override\r\n    public void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        mCallbackManager.onActivityResult(requestCode,resultCode,data);\r\n\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        //Resultado devuelto al iniciar el Intent de GoogleSignInApi.getSignInIntent (...);\r\n        // Result returned from launching the Intent from GoogleSignInApi.getSignInIntent(...);\r\n        if (requestCode == RC_SIGN_IN) {\r\n            Task<GoogleSignInAccount> task = GoogleSignIn.getSignedInAccountFromIntent(data);\r\n            if(task.isSuccessful()){\r\n                try {\r\n                    // Google Sign In was successful, authenticate with Firebase\r\n                    GoogleSignInAccount account = task.getResult(ApiException.class);\r\n                    Log.d(TAG, \"firebaseAuthWithGoogle:\" + account.getId());\r\n                    firebaseAuthWithGoogle(account.getIdToken());\r\n                } catch (ApiException e) {\r\n                    // Google Sign In fallido, actualizar GUI\r\n                    Log.w(TAG, \"Google sign in failed\", e);\r\n                }\r\n            }else{\r\n                Log.d(TAG, \"Error, login no exitoso:\" + task.getException().toString());\r\n                Toast.makeText(this, \"Ocurrio un error. \"+task.getException().toString(),\r\n                        Toast.LENGTH_LONG).show();\r\n            }\r\n        }\r\n    }\r\n    private void firebaseAuthWithGoogle(String idToken) {\r\n        AuthCredential credential = GoogleAuthProvider.getCredential(idToken, null);\r\n        mAuth.signInWithCredential(credential)\r\n                .addOnCompleteListener(this, new OnCompleteListener<AuthResult>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<AuthResult> task) {\r\n                        if (task.isSuccessful()) {\r\n                            FirebaseFirestore db=FirebaseFirestore.getInstance();\r\n                            String userID= mAuth.getCurrentUser().getUid();\r\n                            String name= mAuth.getCurrentUser().getDisplayName();\r\n                            String mail= mAuth.getCurrentUser().getEmail();\r\n                            Map<String, Object> data = new HashMap<>();\r\n                            data.put(\"username\", name);\r\n                            data.put(\"mail\", mail);\r\n                            db.collection(\"Usuarios\").document(userID)\r\n                                    .set(data);\r\n                            /*db.collection(\"Usuarios\").document(userID)\r\n                                    .collection(\"Maquinas\").document(\"fecha\")\r\n                                    .set(data);*/\r\n\r\n                            // Sign in success, update UI with the signed-in user's information\r\n                            Log.d(TAG, \"signInWithCredential:success\");\r\n                            //FirebaseUser user = mAuth.getCurrentUser();\r\n                            //Iniciar DASHBOARD u otra actividad luego del SigIn Exitoso\r\n                            Intent dashboardActivity = new Intent(LogActivity.this, IntroductoryActivity2.class);\r\n                            startActivity(dashboardActivity);\r\n                            LogActivity.this.finish();\r\n                        } else {\r\n                            // If sign in fails, display a message to the user.\r\n                            Log.w(TAG, \"signInWithCredential:failure\", task.getException());\r\n\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n    @Override\r\n    protected void onStart() {\r\n        FirebaseUser user = mAuth.getCurrentUser();\r\n        if(user!=null){ //si no es null el usuario ya esta logueado\r\n            //mover al usuario al dashboard\r\n            Intent dashboardActivity = new Intent(LogActivity.this, MainActivityMachineList.class);\r\n            startActivity(dashboardActivity);\r\n        }\r\n        super.onStart();\r\n        mAuth.addAuthStateListener(authStateListener);\r\n    }\r\n    //metodo para navegar entre activitys con los botones\r\n    public void Email (View view){\r\n        Intent email = new Intent(this, LoginActivity.class);\r\n        startActivity(email);\r\n    }\r\n   /* @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if(requestCode == SIGN_IN_CODE){\r\n            GoogleSignInResult result = Auth.GoogleSignInApi.getSignInResultFromIntent(data);\r\n            handleSignResult(result);\r\n        }\r\n    }\r\n\r\n    private void handleSignResult(GoogleSignInResult result) {\r\n        if (result.isSuccess()){\r\n            goMainScreen();\r\n        }else{\r\n            Toast.makeText(this, \"Error al iniciar sesión\", Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void goMainScreen() {\r\n       Intent intent=new Intent(this, MainActivity.class);\r\n       startActivity(intent);\r\n    }\r\n\r\n    //metodo para navegar entre activitys con los botones\r\n    public void Email (View view){\r\n        Intent email = new Intent(this, LoginActivity.class);\r\n        startActivity(email);\r\n    }\r\n\r\n    @Override\r\n    public void onConnectionFailed(@NonNull ConnectionResult connectionResult) {\r\n\r\n    }*/\r\n    //Funciones Login con facebook\r\n    private void handleFacebookToken(AccessToken token){\r\n        Log.d(TAG2,\"handleFacebookToken\" + token);\r\n\r\n        AuthCredential credential = FacebookAuthProvider.getCredential(token.getToken());\r\n        mAuth.signInWithCredential(credential).addOnCompleteListener(this, new OnCompleteListener<AuthResult>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<AuthResult> task) {\r\n                if(task.isSuccessful()){\r\n                    Log.d(TAG2,\"sing in with credential: successfully\");\r\n                    FirebaseUser user = mAuth.getCurrentUser();\r\n                    if(user!=null){ //si no es null el usuario ya esta logueado\r\n                        Intent dashboardActivity = new Intent(LogActivity.this, MainActivityMachineList.class);\r\n                        startActivity(dashboardActivity);\r\n                    }\r\n                }else{\r\n                    Log.d(TAG2,\"sing in with credential: failed\", task.getException());\r\n                    Toast.makeText(LogActivity.this,\"Authentication Failed\", Toast.LENGTH_SHORT);\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        if(authStateListener != null){\r\n            mAuth.removeAuthStateListener(authStateListener);\r\n            finish();\r\n        }\r\n    }\r\n\r\n}\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/login/LogActivity.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
---+++ app/src/main/java/com/example/infinitycrop/ui/login/LogActivity.java	(date 1609283329946)
---@@ -63,7 +63,7 @@
---     @Override
---     protected void onCreate(Bundle savedInstanceState) {
---         super.onCreate(savedInstanceState);
----        setContentView(R.layout.fragment_login);
---+       /* setContentView(R.layout.fragment_login);*/
---         /*GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)
---                 .requestEmail()
---                 .build();
---Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.Manifest;\r\nimport android.app.Activity;\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.content.res.ColorStateList;\r\nimport android.location.Address;\r\nimport android.location.Geocoder;\r\nimport android.location.Location;\r\nimport android.location.LocationManager;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.os.StrictMode;\r\nimport android.provider.Settings;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvModel;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.location.FusedLocationProviderClient;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.annotations.NotNull;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.squareup.okhttp.Call;\r\nimport com.squareup.okhttp.Callback;\r\nimport com.squareup.okhttp.OkHttpClient;\r\nimport com.squareup.okhttp.Request;\r\nimport com.squareup.okhttp.Response;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link DashboardFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class DashboardFragment extends Fragment implements MqttCallback{\r\n\r\n    private RecyclerView recyclerView;\r\n    private StaticRvAdapter staticRvAdapter;\r\n    private TabLayout tabLayout;\r\n    private ViewPager viewPager;\r\n    //WEATHER\r\n    private static  final int REQUEST_LOCATION=1;\r\n    double lat;\r\n    double longi;\r\n\r\n    TextView showLocationTxt;\r\n\r\n    LocationManager locationManager;\r\n    String latitude,longitude;\r\n\r\n    TextView view_city;\r\n    TextView view_temp;\r\n    TextView view_desc;\r\n    TextView view_country;\r\n\r\n    ImageView view_weather;\r\n    //\r\n\r\n\r\n    public static MqttClient client = null;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public DashboardFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment DashboardFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static DashboardFragment newInstance(String param1, String param2) {\r\n        DashboardFragment fragment = new DashboardFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_dashboard, container, false);\r\n        //FIREBASE\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        final FirebaseUser usuario = mAuth.getCurrentUser();\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=usuario.getUid();\r\n        //guardo el nombre en un textView\r\n        /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);\r\n        String res=\"Hola\"+\" \"+usuario.getDisplayName();\r\n        nombre.setText(res);\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(usuario.getDisplayName() == null){\r\n                    String res1=\"Hola\"+\" \"+snapshot.getString(\"username\");\r\n                    nombre.setText(res1);\r\n                }\r\n            }\r\n        });*/\r\n\r\n        //switch methods\r\n /*     Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });*/\r\n\r\n\r\n        //WEATHER\r\n        ActivityCompat.requestPermissions(getActivity(),new String[]\r\n                {Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n\r\n        view_city =v.findViewById(R.id.town);\r\n        view_city.setText(\"\");\r\n        view_temp =v.findViewById(R.id.temp);\r\n        view_temp.setText(\"\");\r\n        view_desc =v.findViewById(R.id.desc);\r\n        view_desc.setText(\"\");\r\n        view_country=v.findViewById(R.id.txtCountry);\r\n        view_country.setText(\"\");\r\n        view_weather =v.findViewById(R.id.wheather_image);\r\n\r\n        locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);\r\n        inicioGPS();\r\n        //\r\n\r\n\r\n\r\n\r\n        //RECYCLER VIEW\r\n        ArrayList<StaticRvModel> item=new ArrayList<>();\r\n        item.add(new StaticRvModel(R.drawable.icons_sun,\"Soleado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_night_mode,\"Nocturno\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_energy_saving,\"Ahorro\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_power_off,\"Apagado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_custom,\"Custom\"));\r\n\r\n        final TextView medidasT=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidasH=v.findViewById(R.id.medidaHumedadGeneral);\r\n        final TextView medidasS=v.findViewById(R.id.medidaSalinidadGeneral);\r\n        final TextView medidasL=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n\r\n        recyclerView=v.findViewById(R.id.rv_1);\r\n        staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(),LinearLayoutManager.HORIZONTAL,false));\r\n        recyclerView.setAdapter(staticRvAdapter);\r\n\r\n\r\n        //TABS\r\n        tabLayout = v.findViewById(R.id.tab_layout);\r\n        viewPager = v.findViewById(R.id.view_pager);\r\n         //Array\r\n        ArrayList<String> arrayList = new ArrayList<>();\r\n\r\n        //set up with viewpager\r\n        tabLayout.setupWithViewPager(viewPager);\r\n\r\n        TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());\r\n        //Pestañas\r\n        adapter.addFrag(new GeneralFragment(),\"General\");\r\n        adapter.addFrag(new Planta1Fragment(),\"Planta 1\");\r\n        adapter.addFrag(new Planta2Fragment(),\"Planta 2\");\r\n\r\n        viewPager.setAdapter(adapter );\r\n\r\n        /*((MainActivity)getActivity()).ola();*/\r\n     /*   //LEER DATOS FIREBASE\r\n        //Temperatura\r\n       DocumentReference documentTemperatura=fStore.collection(\"SensoresA-T\").document(\"Temperatura\");\r\n        documentTemperatura.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediTemp=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasT.setText(resMediTemp);\r\n            }\r\n        });\r\n        //Humedad\r\n        DocumentReference documentHumedad=fStore.collection(\"SensoresA-T\").document(\"Humedad\");\r\n        documentHumedad.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediHum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasH.setText(resMediHum);\r\n            }\r\n        });\r\n        //Iluminación\r\n        DocumentReference documentIluminación=fStore.collection(\"SensoresA-T\").document(\"Iluminación\");\r\n        documentIluminación.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIlum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasL.setText(resMediIlum);\r\n            }\r\n        });\r\n        //Temperatura ambiente\r\n        DocumentReference documentambiente=fStore.collection(\"SensoresA-T\").document(\"Temperatura ambiente\");\r\n        documentambiente.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIAmb=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasS.setText(resMediIAmb);\r\n            }\r\n        });\r\n\r\n      */\r\n\r\n        return v;\r\n    }\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n\r\n\r\n    //WEATHER METHODS\r\n    private void api_key(final String City) {\r\n        OkHttpClient client = new OkHttpClient();\r\n\r\n        Request request = new Request.Builder()\r\n                .url(\"https://api.openweathermap.org/data/2.5/weather?q=\" + City + \"&appid=a6f41d947e0542a26580bcd5c3fb90ef&units=metric\")\r\n                .get()\r\n                .build();\r\n        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n        StrictMode.setThreadPolicy(policy);\r\n        try {\r\n            Response response = client.newCall(request).execute();\r\n            client.newCall(request).enqueue(new Callback() {\r\n                @Override\r\n                public void onFailure(Request request, IOException e) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onResponse(Response response) throws IOException {\r\n                    String responseData = response.body().string();\r\n                    try {\r\n                        JSONObject json = new JSONObject(responseData);\r\n                        JSONArray array = json.getJSONArray(\"weather\");\r\n                        JSONObject object = array.getJSONObject(0);\r\n\r\n                        String description = object.getString(\"description\");\r\n                        String icons = object.getString(\"icon\");\r\n\r\n                        JSONObject temp1 = json.getJSONObject(\"main\");\r\n                        Double Temperature = temp1.getDouble(\"temp\");\r\n\r\n                        setText(view_city, City);\r\n\r\n                        String temps = Math.round(Temperature) + \" °C\";\r\n                        setText(view_temp, temps);\r\n                        setText(view_desc, description);\r\n                        setImage(view_weather, icons);\r\n\r\n                    } catch (JSONException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n\r\n            });\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    private void setText(final TextView text, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                text.setText(value);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setImage(final ImageView imageView, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                //paste switch\r\n                switch (value) {\r\n                    case \"01d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"01n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"02d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"02n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"03d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"03n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"04d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"04n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"09d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"09n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"10d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"10n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"11d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"11n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"13d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    case \"13n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    default:\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.wheather));\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    //App location\r\n    private void getLocation() {\r\n\r\n        //Check Permissions again\r\n\r\n        if (ActivityCompat.checkSelfPermission(\r\n                getContext(),Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(\r\n                getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n        } else {\r\n\r\n            Location LocationNetwork=locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);\r\n             if (LocationNetwork !=null)\r\n            {\r\n                double lat=LocationNetwork.getLatitude();\r\n                double longi=LocationNetwork.getLongitude();\r\n\r\n                latitude=String.valueOf(lat);\r\n                longitude=String.valueOf(longi);\r\n                loc_func(LocationNetwork);\r\n                api_key(String.valueOf(view_city.getText()));\r\n                showLocationTxt.setText(\"Your Location:\"+\"\\n\"+\"Latitude= \"+latitude+\"\\n\"+\"Longitude= \"+longitude);\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private void OnGPS() {\r\n\r\n        final AlertDialog.Builder builder= new AlertDialog.Builder(getContext());\r\n\r\n        builder.setMessage(\"Enable GPS\").setCancelable(false).setPositiveButton(\"YES\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS));\r\n                getLocation();\r\n            }\r\n        }).setNegativeButton(\"NO\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                dialog.cancel();\r\n            }\r\n        });\r\n        final AlertDialog alertDialog=builder.create();\r\n        alertDialog.show();\r\n    }\r\n\r\n    private void loc_func(Location location){\r\n        try {\r\n            Geocoder geocoder=new Geocoder(getContext());\r\n            List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);\r\n            String address = addresses.get(0).getSubLocality();\r\n            String cityName = addresses.get(0).getLocality();\r\n            String stateName = addresses.get(0).getAdminArea();\r\n            String country = addresses.get(0).getCountryName();\r\n            //txt_paddress.setText(address);\r\n            view_city.setText(cityName);\r\n            view_country.setText(country);\r\n            //txt_state.setText(stateName);*/\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            Toast.makeText(getContext(), \"Error:\"+e, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void inicioGPS(){\r\n\r\n\r\n        //Check gps is enable or not\r\n\r\n        if (!locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))\r\n        {\r\n            //Write Function To enable gps\r\n\r\n            OnGPS();\r\n        }\r\n        else\r\n        {\r\n            //GPS is already On then\r\n\r\n            getLocation();\r\n        }\r\n    }\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
---+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(date 1609199163490)
---@@ -201,7 +201,7 @@
---         view_weather =v.findViewById(R.id.wheather_image);
--- 
---         locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);
----        inicioGPS();
---+       /* inicioGPS();*/
---         //
--- 
--- 
---@@ -519,7 +519,7 @@
--- 
---                 latitude=String.valueOf(lat);
---                 longitude=String.valueOf(longi);
----                loc_func(LocationNetwork);
---+               /* loc_func(LocationNetwork);*/
---                 api_key(String.valueOf(view_city.getText()));
---                 showLocationTxt.setText("Your Location:"+"\n"+"Latitude= "+latitude+"\n"+"Longitude= "+longitude);
---             }
---@@ -553,7 +553,7 @@
---         try {
---             Geocoder geocoder=new Geocoder(getContext());
---             List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);
----            String address = addresses.get(0).getSubLocality();
---+            /*String address = addresses.get(0).getSubLocality();*/
---             String cityName = addresses.get(0).getLocality();
---             String stateName = addresses.get(0).getAdminArea();
---             String country = addresses.get(0).getCountryName();
---@@ -583,7 +583,7 @@
---         {
---             //GPS is already On then
--- 
----            getLocation();
---+            /*getLocation();*/
---         }
---     }
--- }
---\ No newline at end of file
---Index: app/src/main/res/layout/fragment_login.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.login.LogActivity\" >\r\n\r\n    <ImageView\r\n        android:id=\"@+id/imageView4\"\r\n        android:layout_width=\"254dp\"\r\n        android:layout_height=\"188dp\"\r\n        android:contentDescription=\"@string/title_wellcome_login\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"\r\n        app:layout_constraintVertical_bias=\"0.0\"\r\n        app:srcCompat=\"@drawable/stickerlog\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/textView3\"\r\n        android:layout_width=\"184dp\"\r\n        android:layout_height=\"20dp\"\r\n        android:layout_marginTop=\"40dp\"\r\n        android:layout_marginEnd=\"52dp\"\r\n        android:text=\"@string/title_wellcome_login\"\r\n        android:textColor=\"@color/colorPrimaryLight\"\r\n        android:textSize=\"16sp\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/imageView4\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n    <TextView\r\n        android:id=\"@+id/textView4\"\r\n        android:layout_width=\"151dp\"\r\n        android:layout_height=\"32dp\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:layout_marginEnd=\"84dp\"\r\n        android:text=\"@string/title_orderLog\"\r\n        android:textColor=\"@color/colorPrimary\"\r\n        android:textSize=\"26sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/imageView4\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/textView3\" />\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"530dp\"\r\n        android:orientation=\"vertical\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/imageView4\"\r\n        app:layout_constraintVertical_bias=\"0.527\">\r\n\r\n        <ImageView\r\n            android:id=\"@+id/imageView3\"\r\n            android:layout_width=\"254dp\"\r\n            android:layout_height=\"146dp\"\r\n            android:layout_gravity=\"center_horizontal\"\r\n            android:layout_marginBottom=\"70dp\"\r\n            android:contentDescription=\"@string/title_wellcome_login\"\r\n            app:srcCompat=\"@drawable/logo_and_text\" />\r\n\r\n        <!--<Button\r\n               android:id=\"@+id/btn_facebook\"\r\n               android:layout_width=\"match_parent\"\r\n               android:layout_height=\"wrap_content\"\r\n               android:background=\"@drawable/btn_facebook\"\r\n               android:drawableLeft=\"@drawable/ic_facebook_icon\"\r\n               android:paddingLeft=\"20dp\"\r\n               android:textColor=\"#FFFF\"\r\n               android:layout_marginLeft=\"20dp\"\r\n               android:layout_marginRight=\"20dp\"\r\n               android:text=\"@string/title_cont_faceboock\" /> -->\r\n        <com.facebook.login.widget.LoginButton\r\n            android:id=\"@+id/btn_facebook\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:background=\"@drawable/btn_facebook\"\r\n            android:drawableLeft=\"@drawable/ic_facebook_icon\"\r\n            android:paddingLeft=\"20dp\"\r\n            android:textColor=\"#FFFF\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginRight=\"20dp\"\r\n            android:text=\"@string/title_cont_faceboock\" />\r\n        <!-- <com.facebook.login.widget.LoginButton\r\n            android:id=\"@+id/login_button\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center_horizontal\"\r\n            android:layout_marginTop=\"30dp\"\r\n            android:layout_marginBottom=\"30dp\" />  -->\r\n\r\n        <com.google.android.gms.common.SignInButton\r\n            android:id=\"@+id/btn_google\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginRight=\"20dp\"\r\n            android:background=\"@drawable/btn_google\"\r\n            android:drawableLeft=\"@drawable/ic_google_icon\"\r\n            android:text=\"@string/title_cont_google\"\r\n            android:textColor=\"#000000\" />\r\n\r\n        <Button\r\n            android:id=\"@+id/btn_mail\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginRight=\"20dp\"\r\n            android:background=\"@drawable/btn_mail\"\r\n            android:drawableLeft=\"@drawable/ic_mail_icon\"\r\n            android:onClick=\"Email\"\r\n            android:paddingLeft=\"20dp\"\r\n            android:text=\"@string/title_cont_mail\"\r\n            android:textColor=\"#000000\" />\r\n\r\n    </LinearLayout>\r\n\r\n\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/res/layout/fragment_login.xml	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
---+++ app/src/main/res/layout/fragment_login.xml	(date 1609283329934)
---@@ -5,7 +5,7 @@
---     xmlns:tools="http://schemas.android.com/tools"
---     android:layout_width="match_parent"
---     android:layout_height="match_parent"
----    tools:context=".ui.login.LogActivity" >
---+     >
--- 
---     <ImageView
---         android:id="@+id/imageView4"
---Index: app/src/main/AndroidManifest.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.infinitycrop\">\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/>\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\"/>\r\n    <uses-permission android:name=\"android.permission.INTERNET\"/>\r\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" />\r\n    <!--Permisos Qr-->\r\n    <uses-permission android:name=\"android.permission.CAMERA\"/>\r\n    <uses-feature android:name=\"android.hardware.camera\"></uses-feature>\r\n    <uses-feature android:name=\"android.hardware.camera.autofocus\"></uses-feature>\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher\"\r\n        android:theme=\"@style/AppThemeHome\"\r\n        >\r\n\r\n        <activity android:name=\".MainActivity\" android:theme=\"@style/SplashTheme\">\r\n        </activity>\r\n\r\n        <activity android:name=\"com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\">\r\n\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.HelpProfile\">\r\n\r\n        </activity>\r\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\"></activity>\r\n        <activity android:name=\".ui.list_machine.AddMachine\"></activity>\r\n        <activity android:name=\".ui.logmail.RegisterActivity\"></activity>\r\n        <activity android:name=\".ui.logmail.LoginActivity\"></activity>\r\n        <activity android:name=\".ui.list_machine.CaptureAct\"></activity>\r\n        <activity android:name=\"com.example.infinitycrop.ui.login.LogActivity\"></activity>\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\"></activity>\r\n        <activity android:name=\".ui.profile.settings.ModifyProfile\"></activity>\r\n\r\n\r\n\r\n\r\n        <meta-data android:name=\"com.google.android.geo.API_KEY\"\r\n            android:value=\"@string/google_maps_key\" />\r\n\r\n        <meta-data android:name=\"com.facebook.sdk.ApplicationId\"\r\n            tools:replace=\"android:value\"\r\n            android:value=\"@string/facebook_app_id\"/>\r\n        <meta-data\r\n            android:name=\"preloaded_fonts\"\r\n            android:resource=\"@array/preloaded_fonts\" />\r\n\r\n\r\n    </application>\r\n\r\n</manifest>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/AndroidManifest.xml	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
---+++ app/src/main/AndroidManifest.xml	(date 1609206354200)
---@@ -44,7 +44,7 @@
---         <activity android:name=".ui.list_machine.CaptureAct"></activity>
---         <activity android:name="com.example.infinitycrop.ui.login.LogActivity"></activity>
---         <activity android:name=".ui.LoadAnimations.IntroductoryActivity2"></activity>
----        <activity android:name=".ui.profile.settings.ModifyProfile"></activity>
---+        <activity android:name=".ui.LoadAnimations.LogprimeraActivity"></activity>
--- 
--- 
--- 
---Index: app/src/main/java/com/example/infinitycrop/ui/LoadAnimations/IntroductoryActivity.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.LoadAnimations;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.app.Activity;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.os.CountDownTimer;\r\nimport android.widget.ImageView;\r\n\r\nimport com.airbnb.lottie.LottieAnimationView;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.login.LogActivity;\r\n\r\nimport static java.security.AccessController.getContext;\r\n\r\npublic class IntroductoryActivity extends AppCompatActivity {\r\n    ImageView logo,splashImg;\r\n    LottieAnimationView lottieAnimationView;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_introductory);\r\n        logo = findViewById(R.id.log);\r\n        splashImg = findViewById(R.id.img);\r\n        lottieAnimationView = findViewById(R.id.lottie);\r\n\r\n        splashImg.animate().translationY(-4000).setDuration(1000).setStartDelay(4000);\r\n        logo.animate().translationY(4000).setDuration(1000).setStartDelay(4000);\r\n        lottieAnimationView.animate().translationY(1600).setDuration(800).setStartDelay(3900);\r\n\r\n        if (this.equals(0)) {\r\n            finish();\r\n        }\r\n        new CountDownTimer(4660, 1000) {\r\n\r\n            public void onTick(long millisUntilFinished) {\r\n\r\n\r\n            }\r\n\r\n\r\n            public void onFinish() {\r\n                Intent intent= new Intent (getApplicationContext(), LogActivity.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n\r\n        }.start();\r\n\r\n    }\r\n    @Override\r\n    public void onStop() {\r\n        finish();\r\n        super.onStop();\r\n    }\r\n\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/LoadAnimations/IntroductoryActivity.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
---+++ app/src/main/java/com/example/infinitycrop/ui/LoadAnimations/IntroductoryActivity.java	(date 1609279216633)
---@@ -28,7 +28,7 @@
--- 
---         splashImg.animate().translationY(-4000).setDuration(1000).setStartDelay(4000);
---         logo.animate().translationY(4000).setDuration(1000).setStartDelay(4000);
----        lottieAnimationView.animate().translationY(1600).setDuration(800).setStartDelay(3900);
---+        lottieAnimationView.animate().translationY(1400).setDuration(800).setStartDelay(3900);
--- 
---         if (this.equals(0)) {
---             finish();
---@@ -42,7 +42,7 @@
--- 
--- 
---             public void onFinish() {
----                Intent intent= new Intent (getApplicationContext(), LogActivity.class);
---+                Intent intent= new Intent (getApplicationContext(), LogprimeraActivity.class);
---                 startActivity(intent);
--- 
---             }
---Index: app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.profile;\r\n\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.graphics.Bitmap;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.util.LruCache;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.android.volley.RequestQueue;\r\nimport com.android.volley.toolbox.ImageLoader;\r\nimport com.android.volley.toolbox.NetworkImageView;\r\nimport com.android.volley.toolbox.Volley;\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.MainActivityMachineList;\r\nimport com.example.infinitycrop.ui.login.LogActivity;\r\nimport com.example.infinitycrop.ui.profile.settings.AboutInfinityCrap;\r\nimport com.example.infinitycrop.ui.profile.settings.HelpProfile;\r\n//import com.example.infinitycrop.ui.profile.settings.ModifyProfile;\r\nimport com.firebase.ui.auth.AuthUI;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link ProfileFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class ProfileFragment extends Fragment {\r\n    //atributos para confirmación de correo\r\n    private FirebaseUser us;\r\n    private TextView txtverf;\r\n    private Button btnconf;\r\n\r\n\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public ProfileFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment ProfileFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static ProfileFragment newInstance(String param1, String param2) {\r\n        ProfileFragment fragment = new ProfileFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_profile, container, false);\r\n\r\n        ImageView irAPerfil =v.findViewById(R.id.irAEditarPerfil);\r\n        irAPerfil.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                /*Intent intent = new Intent(getActivity(), ModifyProfile.class);\r\n                startActivity(intent);*/\r\n            }\r\n        });\r\n\r\n        //Enlaces de los botones de configuracion\r\n        //personalice colors\r\n        RelativeLayout customColors_btn =v.findViewById(R.id.relativeLayout4);\r\n        customColors_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n            }\r\n        });\r\n        //about us\r\n        RelativeLayout aboutInfinity_btn =v.findViewById(R.id.relativeLayout6);\r\n        aboutInfinity_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), AboutInfinityCrap.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        //help\r\n        RelativeLayout help_profile =v.findViewById(R.id.relativeLayout5);\r\n        help_profile.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), HelpProfile.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        //firebase\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=mAuth.getCurrentUser().getUid();\r\n        final GoogleSignInClient mGoogleSignInClient;\r\n        GoogleSignInOptions gso;\r\n        final FirebaseUser usuario = FirebaseAuth.getInstance().getCurrentUser();\r\n        //guardo la imagen en un ImagenView\r\n        final ImageView img = (ImageView) v.findViewById(R.id.profile);\r\n        //guardo el nombre en un textView\r\n        final TextView nombre = (TextView) v.findViewById(R.id.username);\r\n        nombre.setText(usuario.getDisplayName());\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(nombre.getText() == \"\"){\r\n                    nombre.setText(snapshot.getString(\"username\"));\r\n                    img.setImageResource(R.drawable.icons_user);\r\n                }\r\n            }\r\n        });\r\n\r\n        //guardo el mail en un textView\r\n        TextView correo = (TextView) v.findViewById(R.id.mailUser);\r\n        correo.setText(usuario.getEmail());\r\n        //cargar imágen con glide:\r\n        Glide.with(this).load(usuario.getPhotoUrl()).into(img);\r\n        //boton cerrar sesion\r\n\r\n        //Configurar las gso para google signIn con el fin de luego desloguear de google\r\n        gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestIdToken(getString(R.string.default_web_client_id))\r\n                .requestEmail()\r\n                .build();\r\n        mGoogleSignInClient = GoogleSignIn.getClient(getActivity(), gso);\r\n\r\n        RelativeLayout cerrarSesion =(RelativeLayout) v.findViewById(R.id.btn_end_session);\r\n        cerrarSesion.setOnClickListener(new View.OnClickListener() {\r\n            public void onClick(View view) {\r\n                new AlertDialog.Builder(requireContext())\r\n                        .setTitle(\"Cerrar sesión\")\r\n                        .setMessage(\"¿Estas seguro que quieres cerrar sesión?\")\r\n                        .setPositiveButton(\"Confirmar\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n                                //Cerrar session con Firebase\r\n                                mAuth.signOut();\r\n                                //Cerrar sesión con google tambien: Google sign out\r\n                                mGoogleSignInClient.signOut().addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                                    @Override\r\n                                    public void onComplete(@NonNull Task<Void> task) {\r\n                                        //Abrir MainActivity con SigIn button\r\n                                        if(task.isSuccessful()){\r\n                                            Intent logActivity = new Intent(getActivity().getApplicationContext(), LogActivity.class);\r\n                                            startActivity(logActivity);\r\n                                            getActivity().finish();\r\n                                        }else{\r\n                                            Toast.makeText(getActivity().getApplicationContext(), \"No se pudo cerrar sesión con google\",\r\n                                                    Toast.LENGTH_LONG).show();\r\n                                        }\r\n                                    }\r\n                                });\r\n\r\n                            }\r\n                        })\r\n                        .setNegativeButton(\"Cancelar\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                            }\r\n                        })\r\n                        .show();\r\n\r\n\r\n            }\r\n        });\r\n\r\n        //Confirmación de verificación de correo\r\n        TextView txtverify = (TextView) v.findViewById(R.id.txtVerif);\r\n        Button btnverify = (Button) v.findViewById(R.id.btnverif);\r\n        final FirebaseUser user = mAuth.getCurrentUser();\r\n        if(!user.isEmailVerified()){\r\n            us=user;\r\n            txtverf = txtverify;\r\n            btnconf = btnverify;\r\n\r\n            txtverify.setVisibility(View.VISIBLE);\r\n            btnverify.setVisibility(View.VISIBLE);\r\n\r\n            btnverify.setOnClickListener(new View.OnClickListener()\r\n            {\r\n                @Override\r\n                public void onClick(final View v)\r\n                {\r\n\r\n                    FirebaseUser user = mAuth.getCurrentUser();\r\n                    user.sendEmailVerification().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            Toast.makeText(getActivity(),\"Enviando correo de confirmación\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n\r\n                            Toast.makeText(getActivity(),\"Error en el envío de correo\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            /*}else{\r\n            txtverify.setVisibility(View.GONE);\r\n            btnverify.setVisibility(View.GONE);*/\r\n        }\r\n        /*RequestQueue colaPeticiones = Volley.newRequestQueue(getActivity()\r\n                .getApplicationContext());\r\n        ImageLoader lectorImagenes = new ImageLoader(colaPeticiones,\r\n                new ImageLoader.ImageCache() {\r\n                    private final LruCache<String, Bitmap> cache =\r\n                            new LruCache<String, Bitmap>(10);\r\n                    public void putBitmap(String url, Bitmap bitmap) {\r\n                        cache.put(url, bitmap);\r\n                    }\r\n                    public Bitmap getBitmap(String url) {\r\n                        return cache.get(url);\r\n                    }\r\n                });\r\n        Uri urlImagen = usuario.getPhotoUrl();\r\n        if (urlImagen != null) {\r\n            NetworkImageView fotoUsuario = (NetworkImageView)\r\n                    v.findViewById(R.id.profile);\r\n            fotoUsuario.setImageUrl(urlImagen.toString(), lectorImagenes);\r\n        }else{\r\n            NetworkImageView fotoUsuario = (NetworkImageView)\r\n                    v.findViewById(R.id.profile);\r\n            fotoUsuario.setImageUrl(String.valueOf(R.drawable.icons_user), lectorImagenes);\r\n        }*/\r\n        return v;\r\n    }\r\n}\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
---+++ app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java	(date 1609199006251)
---@@ -32,7 +32,7 @@
--- import com.example.infinitycrop.ui.login.LogActivity;
--- import com.example.infinitycrop.ui.profile.settings.AboutInfinityCrap;
--- import com.example.infinitycrop.ui.profile.settings.HelpProfile;
----//import com.example.infinitycrop.ui.profile.settings.ModifyProfile;
---+/*import com.example.infinitycrop.ui.profile.settings.ModifyProfile;*/
--- import com.firebase.ui.auth.AuthUI;
--- import com.google.android.gms.auth.api.signin.GoogleSignIn;
--- import com.google.android.gms.auth.api.signin.GoogleSignInClient;
---@@ -112,7 +112,7 @@
---         irAPerfil.setOnClickListener(new View.OnClickListener() {
---             @Override
---             public void onClick(View v) {
----                /*Intent intent = new Intent(getActivity(), ModifyProfile.class);
---+               /* Intent intent = new Intent(getActivity(), ModifyProfile.class);
---                 startActivity(intent);*/
---             }
---         });
---Index: app/src/main/java/com/example/infinitycrop/ui/OnBoardingFragment/OnBoardingFragment4.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.OnBoardingFragment;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.AddMachine;\r\n\r\npublic class OnBoardingFragment4 extends Fragment {\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        final ViewGroup root = (ViewGroup) inflater.inflate(R.layout.fragment_on_boarding4,container,false);\r\n        TextView button = (TextView) root.findViewById(R.id.btn_skip);\r\n        button.setOnClickListener(new View.OnClickListener()\r\n        {\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                Intent intent = new Intent((getActivity().getApplication()), AddMachine.class);\r\n                TextView editText = (TextView) root.findViewById(R.id.btn_skip);\r\n\r\n                startActivity(intent);\r\n\r\n            }\r\n        });\r\n        Button button1 = (Button) root.findViewById(R.id.btn_start);\r\n        button1.setOnClickListener(new View.OnClickListener()\r\n        {\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                Intent i = new Intent((getActivity().getApplication()), AddMachine.class);\r\n                Button button1 = (Button) root.findViewById(R.id.btn_start);\r\n                startActivity(i);\r\n            }\r\n        });\r\n\r\n        return root;\r\n    }\r\n}\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/OnBoardingFragment/OnBoardingFragment4.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
---+++ app/src/main/java/com/example/infinitycrop/ui/OnBoardingFragment/OnBoardingFragment4.java	(date 1609285300918)
---@@ -17,6 +17,7 @@
---     @Override
---     public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
---         final ViewGroup root = (ViewGroup) inflater.inflate(R.layout.fragment_on_boarding4,container,false);
---+
---         TextView button = (TextView) root.findViewById(R.id.btn_skip);
---         button.setOnClickListener(new View.OnClickListener()
---         {
---@@ -30,6 +31,7 @@
--- 
---             }
---         });
---+
---         Button button1 = (Button) root.findViewById(R.id.btn_start);
---         button1.setOnClickListener(new View.OnClickListener()
---         {
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02__Default_Changelist_.xml
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_30_12_2020_23_02_[Default_Changelist]" date="1609365747965" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02_[Default_Changelist]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 30/12/2020 23:02 [Default Changelist]" />
---</changelist>
--\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20__Default_Changelist_.xml
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_02_01_2021_18_20_[Default_Changelist]" date="1609608028000" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20_[Default_Changelist]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 02/01/2021 18:20 [Default Changelist]" />
---</changelist>
--\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_18_10__Default_Changelist_.xml
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_18_10__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_18_10__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_28_12_2020_18_10_[Default_Changelist]" date="1609175420227" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_18_10_[Default_Changelist]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 28/12/2020 18:10 [Default Changelist]" />
---</changelist>
--\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02_[Default_Changelist]/shelved.patch
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--@@ -1,350 +0,0 @@
---Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.Manifest;\r\nimport android.app.Activity;\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.content.res.ColorStateList;\r\nimport android.location.Address;\r\nimport android.location.Geocoder;\r\nimport android.location.Location;\r\nimport android.location.LocationManager;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.os.StrictMode;\r\nimport android.provider.Settings;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvModel;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.location.FusedLocationProviderClient;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.annotations.NotNull;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.squareup.okhttp.Call;\r\nimport com.squareup.okhttp.Callback;\r\nimport com.squareup.okhttp.OkHttpClient;\r\nimport com.squareup.okhttp.Request;\r\nimport com.squareup.okhttp.Response;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link DashboardFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class DashboardFragment extends Fragment implements MqttCallback{\r\n\r\n    private RecyclerView recyclerView;\r\n    private StaticRvAdapter staticRvAdapter;\r\n    private TabLayout tabLayout;\r\n    private ViewPager viewPager;\r\n    //WEATHER\r\n    private static  final int REQUEST_LOCATION=1;\r\n    double lat;\r\n    double longi;\r\n\r\n    TextView showLocationTxt;\r\n\r\n    LocationManager locationManager;\r\n    String latitude,longitude;\r\n\r\n    TextView view_city;\r\n    TextView view_temp;\r\n    TextView view_desc;\r\n    TextView view_country;\r\n\r\n    ImageView view_weather;\r\n    //\r\n\r\n\r\n    public static MqttClient client = null;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public DashboardFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment DashboardFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static DashboardFragment newInstance(String param1, String param2) {\r\n        DashboardFragment fragment = new DashboardFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_dashboard, container, false);\r\n        //FIREBASE\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        final FirebaseUser usuario = mAuth.getCurrentUser();\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=usuario.getUid();\r\n        //guardo el nombre en un textView\r\n        /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);\r\n        String res=\"Hola\"+\" \"+usuario.getDisplayName();\r\n        nombre.setText(res);\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(usuario.getDisplayName() == null){\r\n                    String res1=\"Hola\"+\" \"+snapshot.getString(\"username\");\r\n                    nombre.setText(res1);\r\n                }\r\n            }\r\n        });*/\r\n\r\n        //switch methods\r\n /*     Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });*/\r\n\r\n\r\n        //WEATHER\r\n        ActivityCompat.requestPermissions(getActivity(),new String[]\r\n                {Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n\r\n        view_city =v.findViewById(R.id.town);\r\n        view_city.setText(\"\");\r\n        view_temp =v.findViewById(R.id.temp);\r\n        view_temp.setText(\"\");\r\n        view_desc =v.findViewById(R.id.desc);\r\n        view_desc.setText(\"\");\r\n        view_country=v.findViewById(R.id.txtCountry);\r\n        view_country.setText(\"\");\r\n        view_weather =v.findViewById(R.id.wheather_image);\r\n\r\n        locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);\r\n        inicioGPS();\r\n        //\r\n\r\n\r\n\r\n\r\n        //RECYCLER VIEW\r\n        ArrayList<StaticRvModel> item=new ArrayList<>();\r\n        item.add(new StaticRvModel(R.drawable.icons_sun,\"Soleado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_night_mode,\"Nocturno\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_energy_saving,\"Ahorro\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_power_off,\"Apagado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_custom,\"Custom\"));\r\n\r\n        final TextView medidasT=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidasH=v.findViewById(R.id.medidaHumedadGeneral);\r\n        final TextView medidasS=v.findViewById(R.id.medidaSalinidadGeneral);\r\n        final TextView medidasL=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n\r\n        recyclerView=v.findViewById(R.id.rv_1);\r\n        staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(),LinearLayoutManager.HORIZONTAL,false));\r\n        recyclerView.setAdapter(staticRvAdapter);\r\n\r\n\r\n        //TABS\r\n        tabLayout = v.findViewById(R.id.tab_layout);\r\n        viewPager = v.findViewById(R.id.view_pager);\r\n         //Array\r\n        ArrayList<String> arrayList = new ArrayList<>();\r\n\r\n        //set up with viewpager\r\n        tabLayout.setupWithViewPager(viewPager);\r\n\r\n        TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());\r\n        //Pestañas\r\n        adapter.addFrag(new GeneralFragment(),\"General\");\r\n        adapter.addFrag(new Planta1Fragment(),\"Planta 1\");\r\n        adapter.addFrag(new Planta2Fragment(),\"Planta 2\");\r\n\r\n        viewPager.setAdapter(adapter );\r\n\r\n        /*((MainActivity)getActivity()).ola();*/\r\n     /*   //LEER DATOS FIREBASE\r\n        //Temperatura\r\n       DocumentReference documentTemperatura=fStore.collection(\"SensoresA-T\").document(\"Temperatura\");\r\n        documentTemperatura.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediTemp=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasT.setText(resMediTemp);\r\n            }\r\n        });\r\n        //Humedad\r\n        DocumentReference documentHumedad=fStore.collection(\"SensoresA-T\").document(\"Humedad\");\r\n        documentHumedad.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediHum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasH.setText(resMediHum);\r\n            }\r\n        });\r\n        //Iluminación\r\n        DocumentReference documentIluminación=fStore.collection(\"SensoresA-T\").document(\"Iluminación\");\r\n        documentIluminación.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIlum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasL.setText(resMediIlum);\r\n            }\r\n        });\r\n        //Temperatura ambiente\r\n        DocumentReference documentambiente=fStore.collection(\"SensoresA-T\").document(\"Temperatura ambiente\");\r\n        documentambiente.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIAmb=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasS.setText(resMediIAmb);\r\n            }\r\n        });\r\n\r\n      */\r\n\r\n        return v;\r\n    }\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n\r\n\r\n    //WEATHER METHODS\r\n    private void api_key(final String City) {\r\n        OkHttpClient client = new OkHttpClient();\r\n\r\n        Request request = new Request.Builder()\r\n                .url(\"https://api.openweathermap.org/data/2.5/weather?q=\" + City + \"&appid=a6f41d947e0542a26580bcd5c3fb90ef&units=metric\")\r\n                .get()\r\n                .build();\r\n        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n        StrictMode.setThreadPolicy(policy);\r\n        try {\r\n            Response response = client.newCall(request).execute();\r\n            client.newCall(request).enqueue(new Callback() {\r\n                @Override\r\n                public void onFailure(Request request, IOException e) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onResponse(Response response) throws IOException {\r\n                    String responseData = response.body().string();\r\n                    try {\r\n                        JSONObject json = new JSONObject(responseData);\r\n                        JSONArray array = json.getJSONArray(\"weather\");\r\n                        JSONObject object = array.getJSONObject(0);\r\n\r\n                        String description = object.getString(\"description\");\r\n                        String icons = object.getString(\"icon\");\r\n\r\n                        JSONObject temp1 = json.getJSONObject(\"main\");\r\n                        Double Temperature = temp1.getDouble(\"temp\");\r\n\r\n                        setText(view_city, City);\r\n\r\n                        String temps = Math.round(Temperature) + \" °C\";\r\n                        setText(view_temp, temps);\r\n                        setText(view_desc, description);\r\n                        setImage(view_weather, icons);\r\n\r\n                    } catch (JSONException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n\r\n            });\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    private void setText(final TextView text, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                text.setText(value);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setImage(final ImageView imageView, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                //paste switch\r\n                switch (value) {\r\n                    case \"01d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"01n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"02d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"02n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"03d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"03n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"04d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"04n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"09d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"09n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"10d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"10n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"11d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"11n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"13d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    case \"13n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    default:\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.wheather));\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    //App location\r\n    private void getLocation() {\r\n\r\n        //Check Permissions again\r\n\r\n        if (ActivityCompat.checkSelfPermission(\r\n                getContext(),Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(\r\n                getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n        } else {\r\n\r\n            Location LocationNetwork=locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);\r\n             if (LocationNetwork !=null)\r\n            {\r\n                double lat=LocationNetwork.getLatitude();\r\n                double longi=LocationNetwork.getLongitude();\r\n\r\n                latitude=String.valueOf(lat);\r\n                longitude=String.valueOf(longi);\r\n                loc_func(LocationNetwork);\r\n                api_key(String.valueOf(view_city.getText()));\r\n                showLocationTxt.setText(\"Your Location:\"+\"\\n\"+\"Latitude= \"+latitude+\"\\n\"+\"Longitude= \"+longitude);\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private void OnGPS() {\r\n\r\n        final AlertDialog.Builder builder= new AlertDialog.Builder(getContext());\r\n\r\n        builder.setMessage(\"Enable GPS\").setCancelable(false).setPositiveButton(\"YES\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS));\r\n                getLocation();\r\n            }\r\n        }).setNegativeButton(\"NO\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                dialog.cancel();\r\n            }\r\n        });\r\n        final AlertDialog alertDialog=builder.create();\r\n        alertDialog.show();\r\n    }\r\n\r\n    private void loc_func(Location location){\r\n        try {\r\n            Geocoder geocoder=new Geocoder(getContext());\r\n            List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);\r\n            String address = addresses.get(0).getSubLocality();\r\n            String cityName = addresses.get(0).getLocality();\r\n            String stateName = addresses.get(0).getAdminArea();\r\n            String country = addresses.get(0).getCountryName();\r\n            //txt_paddress.setText(address);\r\n            view_city.setText(cityName);\r\n            view_country.setText(country);\r\n            //txt_state.setText(stateName);*/\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            Toast.makeText(getContext(), \"Error:\"+e, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void inicioGPS(){\r\n\r\n\r\n        //Check gps is enable or not\r\n\r\n        if (!locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))\r\n        {\r\n            //Write Function To enable gps\r\n\r\n            OnGPS();\r\n        }\r\n        else\r\n        {\r\n            //GPS is already On then\r\n\r\n            getLocation();\r\n        }\r\n    }\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
---+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(date 1609191349849)
---@@ -505,7 +505,7 @@
--- 
---         //Check Permissions again
--- 
----        if (ActivityCompat.checkSelfPermission(
---+        /*if (ActivityCompat.checkSelfPermission(
---                 getContext(),Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(
---                 getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
---             ActivityCompat.requestPermissions(getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);
---@@ -524,7 +524,7 @@
---                 showLocationTxt.setText("Your Location:"+"\n"+"Latitude= "+latitude+"\n"+"Longitude= "+longitude);
---             }
--- 
----        }
---+        }*/
--- 
---     }
--- 
---Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.dashboard;\n\nimport android.os.Bundle;\n\nimport androidx.fragment.app.Fragment;\n\nimport android.util.Log;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.CompoundButton;\nimport android.widget.Switch;\nimport android.widget.TextView;\n\nimport com.example.comun.Mqtt;\nimport com.example.infinitycrop.R;\n\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\nimport org.eclipse.paho.client.mqttv3.MqttClient;\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\nimport org.eclipse.paho.client.mqttv3.MqttException;\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\n\nimport static com.example.comun.Mqtt.topicRoot;\n\n/**\n * A simple {@link Fragment} subclass.\n * Use the {@link GeneralFragment#newInstance} factory method to\n * create an instance of this fragment.\n */\npublic class GeneralFragment extends Fragment implements MqttCallback{\n    public static MqttClient client = null;\n    // TODO: Rename parameter arguments, choose names that match\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\n    private static final String ARG_PARAM1 = \"param1\";\n    private static final String ARG_PARAM2 = \"param2\";\n\n    // TODO: Rename and change types of parameters\n    private String mParam1;\n    private String mParam2;\n\n    public GeneralFragment() {\n        // Required empty public constructor\n    }\n\n    /**\n     * Use this factory method to create a new instance of\n     * this fragment using the provided parameters.\n     *\n     * @param param1 Parameter 1.\n     * @param param2 Parameter 2.\n     * @return A new instance of fragment GeneralFragment.\n     */\n    // TODO: Rename and change types and number of parameters\n    public static GeneralFragment newInstance(String param1, String param2) {\n        GeneralFragment fragment = new GeneralFragment();\n        Bundle args = new Bundle();\n        args.putString(ARG_PARAM1, param1);\n        args.putString(ARG_PARAM2, param2);\n        fragment.setArguments(args);\n        return fragment;\n    }\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        if (getArguments() != null) {\n            mParam1 = getArguments().getString(ARG_PARAM1);\n            mParam2 = getArguments().getString(ARG_PARAM2);\n        }\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        View v = inflater.inflate(R.layout.fragment_general, container, false);\n        //switch methods\n        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\n                if (isChecked) {\n                    // The toggle is enabled\n                    enviarLucesOn();\n                } else {\n                    // The toggle is disabled\n                    enviarLucesOff();\n                }\n            }\n        });\n        return v;\n    }\n    public void enviarLucesOff(){\n        try {\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\n                    MemoryPersistence());\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n        MqttConnectOptions connOpts = new MqttConnectOptions();\n        connOpts.setCleanSession(true);\n        connOpts.setKeepAliveInterval(60);\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\n\n        try {\n            client.connect(connOpts);\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n\n        //conexión con el broker Root1 = Lector de datos\n        //nos subscribimos a topic lectura\n        try {\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\n            client.setCallback((MqttCallback) this);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\n        }\n        try {\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\n            MqttMessage message = new MqttMessage(\"Superior OFF\".getBytes());\n            message.setQos(Mqtt.qos);\n            message.setRetained(false);\n            client.publish(topicRoot+\"luces\", message);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\n        }\n    }\n    public void enviarLucesOn(){\n        try {\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\n                    MemoryPersistence());\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n        MqttConnectOptions connOpts = new MqttConnectOptions();\n        connOpts.setCleanSession(true);\n        connOpts.setKeepAliveInterval(60);\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\n\n        try {\n            client.connect(connOpts);\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n\n        //conexión con el broker Root1 = Lector de datos\n        //nos subscribimos a topic lectura\n        try {\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\n            client.setCallback((MqttCallback) this);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\n        }\n        try {\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\n            MqttMessage message = new MqttMessage(\"Superior ON\".getBytes());\n            message.setQos(Mqtt.qos);\n            message.setRetained(false);\n            client.publish(topicRoot+\"luces\", message);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\n        }\n    }\n\n    @Override\n    public void connectionLost(Throwable cause) {\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\n    }\n\n    @Override\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\n\n    }\n\n    @Override\n    public void deliveryComplete(IMqttDeliveryToken token) {\n        Log.d(Mqtt.TAG, \"Entrega completa\");\n    }\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
---+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(date 1609360979620)
---@@ -2,6 +2,7 @@
--- 
--- import android.os.Bundle;
--- 
---+import androidx.annotation.Nullable;
--- import androidx.fragment.app.Fragment;
--- 
--- import android.util.Log;
---@@ -13,7 +14,14 @@
--- import android.widget.TextView;
--- 
--- import com.example.comun.Mqtt;
---+import com.example.infinitycrop.MainActivity;
--- import com.example.infinitycrop.R;
---+import com.google.firebase.firestore.EventListener;
---+import com.google.firebase.firestore.FirebaseFirestore;
---+import com.google.firebase.firestore.FirebaseFirestoreException;
---+import com.google.firebase.firestore.Query;
---+import com.google.firebase.firestore.QueryDocumentSnapshot;
---+import com.google.firebase.firestore.QuerySnapshot;
--- 
--- import org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;
--- import org.eclipse.paho.client.mqttv3.MqttCallback;
---@@ -32,6 +40,8 @@
---  */
--- public class GeneralFragment extends Fragment implements MqttCallback{
---     public static MqttClient client = null;
---+    private String uid;
---+    private FirebaseFirestore db;
---     // TODO: Rename parameter arguments, choose names that match
---     // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
---     private static final String ARG_PARAM1 = "param1";
---@@ -90,6 +100,45 @@
---                 }
---             }
---         });
---+        db = FirebaseFirestore.getInstance();
---+        MainActivity myActivity = (MainActivity) getActivity();
---+        final TextView medidaTemp=v.findViewById(R.id.medidaTemperaturaGeneral);
---+        final TextView medidaHum=v.findViewById(R.id.medidaHumedadGeneral);
---+        final TextView medidaHumAm=v.findViewById(R.id.medidaSalinidadGeneral);
---+        final TextView medidaLuz=v.findViewById(R.id.medidasLuminosidadGeneral);
---+        uid=myActivity.getMachineUID();
---+        db.collection("Mediciones")
---+                .whereEqualTo("machineId",uid)
---+                .whereEqualTo("Planta","0")
---+                .orderBy("Fecha", Query.Direction.DESCENDING)
---+                .limit(1)
---+                .addSnapshotListener(new EventListener<QuerySnapshot>() {
---+                    @Override
---+                    public void onEvent(@Nullable QuerySnapshot value,
---+                                        @Nullable FirebaseFirestoreException e) {
---+                        if (e != null) {
---+                            return;
---+                        }
---+
---+
---+                        for (QueryDocumentSnapshot doc : value) {
---+                            //Temperatura
---+                            String medidaT=doc.getString("Temperatura");
---+                            medidaTemp.setText(medidaT);
---+                            //Humedad
---+                            String medidaH=doc.getString("Humedad");
---+                            medidaHum.setText(medidaH);
---+                            //Humedad Ambiente
---+                            String medidaHA=doc.getString("Humedad Ambiente");
---+                            medidaHumAm.setText(medidaHA);
---+                            //Luminosidad
---+                            String medidaL=doc.getString("Luminosidad");
---+                            medidaLuz.setText(medidaL);
---+
---+                        }
---+
---+                    }
---+                });
---         return v;
---     }
---     public void enviarLucesOff(){
---Index: github.properties
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>gpr.usr = 61469172\ngpr.key = 72a0f63b7097b413e8ff78a7dd6ca9412aaf232c
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>windows-1252
---===================================================================
------ github.properties	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
---+++ github.properties	(date 1609173892824)
---@@ -1,2 +1,2 @@
----gpr.usr = 61469172
----gpr.key = 72a0f63b7097b413e8ff78a7dd6ca9412aaf232c
---\ No newline at end of file
---+gpr.usr = 61473165
---+gpr.key = 9671a8c2e26934b214e49dd99b96077296ee2aca
---\ No newline at end of file
---Index: app/src/main/java/com/example/infinitycrop/ui/service/ServicioMqtt.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/service/ServicioMqtt.java	(date 1609359437907)
---+++ app/src/main/java/com/example/infinitycrop/ui/service/ServicioMqtt.java	(date 1609359437907)
---@@ -0,0 +1,114 @@
---+package com.example.infinitycrop.ui.service;
---+
---+
---+import android.app.Service;
---+import android.content.Intent;
---+import android.os.IBinder;
---+import android.util.Log;
---+import android.widget.Toast;
---+
---+
---+import com.example.comun.Mqtt;
---+import com.google.firebase.Timestamp;
---+import com.google.firebase.firestore.FirebaseFirestore;
---+
---+import org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;
---+import org.eclipse.paho.client.mqttv3.MqttCallback;
---+import org.eclipse.paho.client.mqttv3.MqttClient;
---+import org.eclipse.paho.client.mqttv3.MqttConnectOptions;
---+import org.eclipse.paho.client.mqttv3.MqttException;
---+import org.eclipse.paho.client.mqttv3.MqttMessage;
---+import org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;
---+
---+import java.text.SimpleDateFormat;
---+import java.util.Date;
---+import java.util.HashMap;
---+import java.util.Map;
---+
---+import static com.example.comun.Mqtt.topicRoot;
---+
---+
---+public class ServicioMqtt extends Service implements MqttCallback {
---+
---+    public static MqttClient client = null;
---+    private FirebaseFirestore db;
---+    private String getId;
---+
---+    @Override public void onCreate(){
---+        Toast.makeText(this,"Conectando con tu maquina......", Toast.LENGTH_LONG).show();
---+        db = FirebaseFirestore.getInstance();
---+        try {
---+            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new
---+                    MemoryPersistence());
---+        } catch (MqttException e) {
---+            e.printStackTrace();
---+        }
---+        MqttConnectOptions connOpts = new MqttConnectOptions();
---+        connOpts.setCleanSession(true);
---+        connOpts.setKeepAliveInterval(60);
---+        connOpts.setWill(topicRoot+"WillTopic", "App desconectada".getBytes(),Mqtt.qos, false);
---+        try {
---+            client.connect(connOpts);
---+        } catch (MqttException e) {
---+            e.printStackTrace();
---+        }
---+
---+        // Nos suscribimos al topic rfid
---+        try {
---+            Log.i(Mqtt.TAG, "Suscrito a " + topicRoot+"lecturaDatos");
---+            client.subscribe(topicRoot+"lecturaDatos", Mqtt.qos);
---+            client.setCallback(this);
---+        } catch (MqttException e) {
---+            Log.e(Mqtt.TAG, "Error al suscribir.", e);
---+        }
---+    }
---+
---+    @Override
---+    public int onStartCommand(Intent intenc, int flags, int idArranque) {
---+        getId =intenc.getStringExtra("machine");
---+        Toast.makeText(this, getId , Toast.LENGTH_SHORT).show();
---+
---+        return START_STICKY;
---+    }
---+    @Override public void onDestroy() {
---+
---+    }
---+    @Override public IBinder onBind(Intent intencion) {
---+        return null;
---+    }
---+
---+    @Override
---+    public void connectionLost(Throwable cause) {
---+
---+    }
---+
---+    @Override
---+    public void messageArrived(String topic, MqttMessage message) throws Exception {
---+        String payload = new String(message.getPayload());
---+
---+        String[] parts = payload.split("-");
---+        String part1 = parts[0];
---+        String part2 = parts[1];
---+        String part3 = parts[2];
---+        String part4 = parts[3];
---+        String part5 = parts[4];
---+        String part6 = parts[5];
---+
---+        Map<String, Object> user = new HashMap<>();
---+        user.put("Humedad", part2);
---+        user.put("Humedad Ambiente", part3);
---+        user.put("Luminosidad", part4);
---+        user.put("Temperatura", part5);
---+        user.put("Fecha", new Timestamp(new Date()));
---+        user.put("machineId", part1);
---+        user.put("Planta", part6);
---+
---+        db.collection("Mediciones").document().set(user);
---+        //db.collection("users").document("9XncSt20DYUov9gGVKoB").set(user);
---+    }
---+
---+    @Override
---+    public void deliveryComplete(IMqttDeliveryToken token) {
---+
---+    }
---+}
---\ No newline at end of file
---Index: app/src/main/AndroidManifest.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    package=\"com.example.infinitycrop\">\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/>\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\"/>\n    <uses-permission android:name=\"android.permission.INTERNET\"/>\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" />\n    <!--Permisos Qr-->\n    <uses-permission android:name=\"android.permission.CAMERA\"/>\n    <uses-feature android:name=\"android.hardware.camera\"></uses-feature>\n    <uses-feature android:name=\"android.hardware.camera.autofocus\"></uses-feature>\n\n    <application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher\"\n        android:theme=\"@style/AppThemeHome\"\n        >\n\n        <activity android:name=\".MainActivity\" android:theme=\"@style/SplashTheme\">\n        </activity>\n\n        <activity android:name=\"com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity\">\n            <intent-filter>\n                <action android:name=\"android.intent.action.MAIN\" />\n                <category android:name=\"android.intent.category.LAUNCHER\" />\n            </intent-filter>\n        </activity>\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\">\n\n        </activity>\n        <activity android:name=\".ui.profile.settings.HelpProfile\">\n\n        </activity>\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\"></activity>\n        <activity android:name=\".ui.list_machine.AddMachine\"></activity>\n        <activity android:name=\".ui.logmail.RegisterActivity\"></activity>\n        <activity android:name=\".ui.logmail.LoginActivity\"></activity>\n        <activity android:name=\".ui.list_machine.CaptureAct\"></activity>\n        <activity android:name=\"com.example.infinitycrop.ui.login.LogActivity\"></activity>\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\"></activity>\n        <activity android:name=\".ui.profile.settings.ModifyProfile\"></activity>\n\n\n\n\n        <meta-data android:name=\"com.google.android.geo.API_KEY\"\n            android:value=\"@string/google_maps_key\" />\n\n        <meta-data android:name=\"com.facebook.sdk.ApplicationId\"\n            tools:replace=\"android:value\"\n            android:value=\"@string/facebook_app_id\"/>\n        <meta-data\n            android:name=\"preloaded_fonts\"\n            android:resource=\"@array/preloaded_fonts\" />\n\n\n    </application>\n\n</manifest>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/AndroidManifest.xml	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
---+++ app/src/main/AndroidManifest.xml	(date 1609352360254)
---@@ -24,7 +24,7 @@
--- 
---         <activity android:name=".MainActivity" android:theme="@style/SplashTheme">
---         </activity>
----
---+        <service android:name="com.example.infinitycrop.ui.service.ServicioMqtt" />
---         <activity android:name="com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity">
---             <intent-filter>
---                 <action android:name="android.intent.action.MAIN" />
---Index: app/src/main/java/com/example/infinitycrop/MainActivity.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop;\nimport android.os.Bundle;\nimport android.widget.Toast;\n\nimport com.example.infinitycrop.ui.control_panel.Control_panelFragment;\nimport com.example.infinitycrop.ui.dashboard.DashboardFragment;\nimport com.example.infinitycrop.ui.graphic.GraphicFragment;\nimport com.example.infinitycrop.ui.map.MapFragment;\nimport com.example.infinitycrop.ui.profile.ProfileFragment;\nimport com.google.firebase.firestore.FirebaseFirestore;\nimport com.ismaeldivita.chipnavigation.ChipNavigationBar;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.fragment.app.Fragment;\nimport androidx.fragment.app.FragmentManager;\nimport androidx.fragment.app.FragmentPagerAdapter;\nimport androidx.viewpager.widget.ViewPager;\n\nimport java.util.ArrayList;\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private ChipNavigationBar chipNavigationBar;\n    private ViewPager viewPager;\n    private Fragment fragment=null;\n    private int index = 0;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        setTheme(R.style.AppThemeHome);\n        super.onCreate(savedInstanceState);\n\n        Bundle extras = getIntent().getExtras();\n        String s = extras.getString(\"machine\");\n        Toast.makeText(this, s , Toast.LENGTH_SHORT).show();\n\n        setContentView(R.layout.activity_main);\n        chipNavigationBar=findViewById(R.id.chipNavigation);\n        viewPager = findViewById(R.id.view_pager11);\n        chipNavigationBar.setItemSelected(R.id.home,true);\n\n        ViewPagerAdapter viewPagerAdapter = new ViewPagerAdapter(getSupportFragmentManager());\n        viewPager.setAdapter(viewPagerAdapter);\n\n        final ViewPagerAdapter adapter = new ViewPagerAdapter(getSupportFragmentManager());\n        final DashboardFragment fragment_1 = new DashboardFragment();\n        //final GraphicFragment fragment_2 = new GraphicFragment();\n        final Control_panelFragment fragment_2 = new Control_panelFragment();\n        final MapFragment fragment_3 = new MapFragment();\n        final ProfileFragment fragment_4 = new ProfileFragment();\n        adapter.addFragment(fragment_1);\n        adapter.addFragment(fragment_2);\n        adapter.addFragment(fragment_3);\n        adapter.addFragment(fragment_4);\n        viewPager.setAdapter(adapter);\n        viewPager.setOffscreenPageLimit(4);\n        index = 1;\n        chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {\n            @Override\n            public void onItemSelected(int i) {\n                switch(i){\n                    case R.id.home:\n                        viewPager.setCurrentItem(0);\n                        break;\n                    case R.id.graphics:\n                        viewPager.setCurrentItem(1);\n                        break;\n                    case R.id.notifications:\n                        viewPager.setCurrentItem(2);\n                        break;\n                    case R.id.profile:\n                        viewPager.setCurrentItem(3);\n                        break;\n                }\n\n\n            }\n        });\n\n\n        viewPager.addOnPageChangeListener(new ViewPager.OnPageChangeListener() {\n            @Override\n            public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {\n\n            }\n\n            @Override\n            public void onPageSelected(int position) {\n\n                if (position == 0){\n\n                    chipNavigationBar.setItemSelected(R.id.home, true);\n                    chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {\n                        @Override\n                        public void onItemSelected(int id) {\n\n                            switch(id){\n                                case R.id.home:\n                                    viewPager.setCurrentItem(0);\n                                    break;\n                                case R.id.graphics:\n                                    viewPager.setCurrentItem(1);\n                                    break;\n                                case R.id.notifications:\n                                    viewPager.setCurrentItem(2);\n                                    break;\n                                case R.id.profile:\n                                    viewPager.setCurrentItem(3);\n                                    break;\n                            }\n                        }\n                    });\n\n                    index = 0;\n\n                }else if (position == 1){\n\n                    chipNavigationBar.setItemSelected(R.id.graphics, true);\n\n                    if(index == 0 || index == 2){\n\n                        //fragment_2.downloadPlates_2();\n                    }\n                    index = 1;\n                    //Toast.makeText(Home.this, \"\"+index, Toast.LENGTH_SHORT).show();\n                }else if (position == 2){\n\n                    chipNavigationBar.setItemSelected(R.id.notifications, true);\n                    chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {\n                        @Override\n                        public void onItemSelected(int id) {\n\n                            switch(id){\n                                case R.id.home:\n                                    viewPager.setCurrentItem(0);\n                                    break;\n                                case R.id.graphics:\n                                    viewPager.setCurrentItem(1);\n                                    break;\n                                case R.id.notifications:\n                                    viewPager.setCurrentItem(2);\n                                    break;\n                                case R.id.profile:\n                                    viewPager.setCurrentItem(3);\n                                    break;\n                            }\n                        }\n                    });\n\n                    index = 2;\n\n                }else if (position == 3){\n\n                    chipNavigationBar.setItemSelected(R.id.profile, true);\n                    chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {\n                        @Override\n                        public void onItemSelected(int id) {\n\n                            switch(id){\n                                case R.id.home:\n                                    viewPager.setCurrentItem(0);\n                                    break;\n                                case R.id.graphics:\n                                    viewPager.setCurrentItem(1);\n                                    break;\n                                case R.id.notifications:\n                                    viewPager.setCurrentItem(2);\n                                    break;\n                                case R.id.profile:\n                                    viewPager.setCurrentItem(3);\n                                    break;\n                            }\n                        }\n                    });\n\n                    index = 3;\n                }\n            }\n\n            @Override\n            public void onPageScrollStateChanged(int state) {\n\n            }\n        });\n    }\n\n\n    class ViewPagerAdapter extends FragmentPagerAdapter {\n\n\n\n        private ArrayList<Fragment> fragments;\n        private ArrayList<String> titles;\n\n        ViewPagerAdapter (FragmentManager fm){\n            super(fm);\n            this.fragments = new ArrayList<>();\n            this.titles = new ArrayList<>();\n\n        }\n\n        @NonNull\n        @Override\n        public Fragment getItem(int position) {\n            return fragments.get(position);\n        }\n\n        @Override\n        public int getCount() {\n            return fragments.size();\n        }\n\n        public void addFragment(Fragment fragment){\n            fragments.add(fragment);\n\n        }\n\n    }\n\n\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/MainActivity.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
---+++ app/src/main/java/com/example/infinitycrop/MainActivity.java	(date 1609360237025)
---@@ -1,4 +1,5 @@
--- package com.example.infinitycrop;
---+import android.content.Intent;
--- import android.os.Bundle;
--- import android.widget.Toast;
--- 
---@@ -7,6 +8,7 @@
--- import com.example.infinitycrop.ui.graphic.GraphicFragment;
--- import com.example.infinitycrop.ui.map.MapFragment;
--- import com.example.infinitycrop.ui.profile.ProfileFragment;
---+import com.example.infinitycrop.ui.service.ServicioMqtt;
--- import com.google.firebase.firestore.FirebaseFirestore;
--- import com.ismaeldivita.chipnavigation.ChipNavigationBar;
--- 
---@@ -28,15 +30,17 @@
---     private ViewPager viewPager;
---     private Fragment fragment=null;
---     private int index = 0;
----
---+    private String s;
---     @Override
---     protected void onCreate(Bundle savedInstanceState) {
---         setTheme(R.style.AppThemeHome);
---         super.onCreate(savedInstanceState);
--- 
---         Bundle extras = getIntent().getExtras();
----        String s = extras.getString("machine");
----        Toast.makeText(this, s , Toast.LENGTH_SHORT).show();
---+        s = extras.getString("description");
---+        Intent intent = new Intent(MainActivity.this, ServicioMqtt.class);
---+        intent.putExtra("machine", s);
---+        startService(intent);
--- 
---         setContentView(R.layout.activity_main);
---         chipNavigationBar=findViewById(R.id.chipNavigation);
---@@ -221,5 +225,10 @@
--- 
---     }
--- 
---+    public String getMachineUID(){
---+        return s;
---+    }
---+
---+
--- 
--- }
---\ No newline at end of file
---Index: app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.list_machine;\r\n\r\nimport android.content.Intent;\r\nimport android.media.Image;\r\nimport android.os.Bundle;\r\nimport android.os.Parcelable;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.ItemTouchHelper;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.logmail.RegisterActivity;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerAdapter;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.Query;\r\n\r\nimport java.text.BreakIterator;\r\nimport java.util.Map;\r\n\r\npublic class MainActivityMachineList extends AppCompatActivity {\r\n    private FirebaseFirestore firebaseFirestore;\r\n    private RecyclerView mFirestoreList;\r\n    private Adapter adapter;\r\n    private FirebaseAuth firebaseAuth;\r\n    Button addBtn;//boton añadir nueva maquina\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_list_machines);\r\n        firebaseFirestore=FirebaseFirestore.getInstance();\r\n        mFirestoreList=findViewById(R.id.firestore_list);\r\n        firebaseAuth=FirebaseAuth.getInstance();\r\n        String uid=firebaseAuth.getUid();\r\n        //Query\r\n        Query query=firebaseFirestore\r\n                .collection(\"Machine\")\r\n                .whereEqualTo(\"userUID\", uid)\r\n                .orderBy(\"priority\",Query.Direction.ASCENDING);\r\n        //RecyclerView\r\n        FirestoreRecyclerOptions<MachineModel> options=new FirestoreRecyclerOptions.Builder<MachineModel>()\r\n                .setQuery(query, MachineModel.class)\r\n                .build();\r\n        //View Holder\r\n        adapter= new Adapter(options);\r\n        mFirestoreList.setHasFixedSize(true);\r\n        mFirestoreList.setLayoutManager(new LinearLayoutManager(this));\r\n        mFirestoreList.setAdapter(adapter);\r\n\r\n        new ItemTouchHelper(new ItemTouchHelper.SimpleCallback(0,\r\n                ItemTouchHelper.LEFT | ItemTouchHelper.RIGHT) {\r\n            @Override\r\n            public boolean onMove(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder, RecyclerView.ViewHolder target) {\r\n                return false;\r\n            }\r\n            @Override\r\n            public void onSwiped(RecyclerView.ViewHolder viewHolder, int direction) {\r\n                Toast.makeText(getApplicationContext(), \"Maquina eliminada con éxito\", Toast.LENGTH_SHORT).show();\r\n                adapter.deleteItem(viewHolder.getAdapterPosition());\r\n            }\r\n        }).attachToRecyclerView(mFirestoreList);\r\n\r\n        adapter.setOnItemClickListener(new Adapter.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(DocumentSnapshot documentSnapshot, int position) {\r\n                //documentSnapshot.getData() -> devuelve all que tiene la maquina en firebase\r\n                MachineModel machine = documentSnapshot.toObject(MachineModel.class);\r\n                String id = documentSnapshot.getId();\r\n                String path = documentSnapshot.getReference().getPath(); //devuelve ruta en firebase Machine\\madara\r\n                /*Toast.makeText(MainActivityMachineList.this,\r\n                        \"Position: \" + position + \" ID: \" + id +\"  algo   \"+ documentSnapshot.getData(), Toast.LENGTH_SHORT).show();*/\r\n                Intent intent = new Intent(getBaseContext(), MainActivity.class);\r\n                intent.putExtra(\"machine\", id);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n        FloatingActionButton addbtn = (FloatingActionButton) findViewById(R.id.button_add_machine);\r\n        addbtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent (getApplicationContext(), AddMachine.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        adapter.stopListening();\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        adapter.startListening();\r\n    }\r\n}\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
---+++ app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(date 1609360236960)
---@@ -80,11 +80,12 @@
---                 //documentSnapshot.getData() -> devuelve all que tiene la maquina en firebase
---                 MachineModel machine = documentSnapshot.toObject(MachineModel.class);
---                 String id = documentSnapshot.getId();
----                String path = documentSnapshot.getReference().getPath(); //devuelve ruta en firebase Machine\madara
---+                String path = documentSnapshot.getString("description"); //devuelve ruta en firebase Machine\madara
---                 /*Toast.makeText(MainActivityMachineList.this,
---                         "Position: " + position + " ID: " + id +"  algo   "+ documentSnapshot.getData(), Toast.LENGTH_SHORT).show();*/
---                 Intent intent = new Intent(getBaseContext(), MainActivity.class);
---                 intent.putExtra("machine", id);
---+                intent.putExtra("description", path);
---                 startActivity(intent);
---             }
---         });
--Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.Manifest;\r\nimport android.app.Activity;\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.content.res.ColorStateList;\r\nimport android.location.Address;\r\nimport android.location.Geocoder;\r\nimport android.location.Location;\r\nimport android.location.LocationManager;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.os.StrictMode;\r\nimport android.provider.Settings;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvModel;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.location.FusedLocationProviderClient;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.annotations.NotNull;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.squareup.okhttp.Call;\r\nimport com.squareup.okhttp.Callback;\r\nimport com.squareup.okhttp.OkHttpClient;\r\nimport com.squareup.okhttp.Request;\r\nimport com.squareup.okhttp.Response;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link DashboardFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class DashboardFragment extends Fragment implements MqttCallback{\r\n\r\n    private RecyclerView recyclerView;\r\n    private StaticRvAdapter staticRvAdapter;\r\n    private TabLayout tabLayout;\r\n    private ViewPager viewPager;\r\n    //WEATHER\r\n    private static  final int REQUEST_LOCATION=1;\r\n    double lat;\r\n    double longi;\r\n\r\n    TextView showLocationTxt;\r\n\r\n    LocationManager locationManager;\r\n    String latitude,longitude;\r\n\r\n    TextView view_city;\r\n    TextView view_temp;\r\n    TextView view_desc;\r\n    TextView view_country;\r\n\r\n    ImageView view_weather;\r\n    //\r\n\r\n\r\n    public static MqttClient client = null;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public DashboardFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment DashboardFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static DashboardFragment newInstance(String param1, String param2) {\r\n        DashboardFragment fragment = new DashboardFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_dashboard, container, false);\r\n        //FIREBASE\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        final FirebaseUser usuario = mAuth.getCurrentUser();\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=usuario.getUid();\r\n        //guardo el nombre en un textView\r\n        /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);\r\n        String res=\"Hola\"+\" \"+usuario.getDisplayName();\r\n        nombre.setText(res);\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(usuario.getDisplayName() == null){\r\n                    String res1=\"Hola\"+\" \"+snapshot.getString(\"username\");\r\n                    nombre.setText(res1);\r\n                }\r\n            }\r\n        });*/\r\n\r\n        //switch methods\r\n /*     Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });*/\r\n\r\n\r\n        //WEATHER\r\n        ActivityCompat.requestPermissions(getActivity(),new String[]\r\n                {Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n\r\n        view_city =v.findViewById(R.id.town);\r\n        view_city.setText(\"\");\r\n        view_temp =v.findViewById(R.id.temp);\r\n        view_temp.setText(\"\");\r\n        view_desc =v.findViewById(R.id.desc);\r\n        view_desc.setText(\"\");\r\n        view_country=v.findViewById(R.id.txtCountry);\r\n        view_country.setText(\"\");\r\n        view_weather =v.findViewById(R.id.wheather_image);\r\n\r\n        locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);\r\n       /* inicioGPS();*/\r\n        //\r\n\r\n\r\n\r\n\r\n        //RECYCLER VIEW\r\n        ArrayList<StaticRvModel> item=new ArrayList<>();\r\n        item.add(new StaticRvModel(R.drawable.icons_sun,\"Soleado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_night_mode,\"Nocturno\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_energy_saving,\"Ahorro\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_power_off,\"Apagado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_custom,\"Custom\"));\r\n\r\n        final TextView medidasT=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidasH=v.findViewById(R.id.medidaHumedadGeneral);\r\n        final TextView medidasS=v.findViewById(R.id.medidaSalinidadGeneral);\r\n        final TextView medidasL=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n\r\n        recyclerView=v.findViewById(R.id.rv_1);\r\n        staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(),LinearLayoutManager.HORIZONTAL,false));\r\n        recyclerView.setAdapter(staticRvAdapter);\r\n\r\n\r\n        //TABS\r\n        tabLayout = v.findViewById(R.id.tab_layout);\r\n        viewPager = v.findViewById(R.id.view_pager);\r\n         //Array\r\n        ArrayList<String> arrayList = new ArrayList<>();\r\n\r\n        //set up with viewpager\r\n        tabLayout.setupWithViewPager(viewPager);\r\n\r\n        TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());\r\n        //Pestañas\r\n        adapter.addFrag(new GeneralFragment(),\"General\");\r\n        adapter.addFrag(new Planta1Fragment(),\"Planta 1\");\r\n        adapter.addFrag(new Planta2Fragment(),\"Planta 2\");\r\n\r\n        viewPager.setAdapter(adapter );\r\n\r\n        /*((MainActivity)getActivity()).ola();*/\r\n     /*   //LEER DATOS FIREBASE\r\n        //Temperatura\r\n       DocumentReference documentTemperatura=fStore.collection(\"SensoresA-T\").document(\"Temperatura\");\r\n        documentTemperatura.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediTemp=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasT.setText(resMediTemp);\r\n            }\r\n        });\r\n        //Humedad\r\n        DocumentReference documentHumedad=fStore.collection(\"SensoresA-T\").document(\"Humedad\");\r\n        documentHumedad.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediHum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasH.setText(resMediHum);\r\n            }\r\n        });\r\n        //Iluminación\r\n        DocumentReference documentIluminación=fStore.collection(\"SensoresA-T\").document(\"Iluminación\");\r\n        documentIluminación.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIlum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasL.setText(resMediIlum);\r\n            }\r\n        });\r\n        //Temperatura ambiente\r\n        DocumentReference documentambiente=fStore.collection(\"SensoresA-T\").document(\"Temperatura ambiente\");\r\n        documentambiente.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIAmb=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasS.setText(resMediIAmb);\r\n            }\r\n        });\r\n\r\n      */\r\n\r\n        return v;\r\n    }\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n\r\n\r\n    //WEATHER METHODS\r\n    private void api_key(final String City) {\r\n        OkHttpClient client = new OkHttpClient();\r\n\r\n        Request request = new Request.Builder()\r\n                .url(\"https://api.openweathermap.org/data/2.5/weather?q=\" + City + \"&appid=a6f41d947e0542a26580bcd5c3fb90ef&units=metric\")\r\n                .get()\r\n                .build();\r\n        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n        StrictMode.setThreadPolicy(policy);\r\n        try {\r\n            Response response = client.newCall(request).execute();\r\n            client.newCall(request).enqueue(new Callback() {\r\n                @Override\r\n                public void onFailure(Request request, IOException e) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onResponse(Response response) throws IOException {\r\n                    String responseData = response.body().string();\r\n                    try {\r\n                        JSONObject json = new JSONObject(responseData);\r\n                        JSONArray array = json.getJSONArray(\"weather\");\r\n                        JSONObject object = array.getJSONObject(0);\r\n\r\n                        String description = object.getString(\"description\");\r\n                        String icons = object.getString(\"icon\");\r\n\r\n                        JSONObject temp1 = json.getJSONObject(\"main\");\r\n                        Double Temperature = temp1.getDouble(\"temp\");\r\n\r\n                        setText(view_city, City);\r\n\r\n                        String temps = Math.round(Temperature) + \" °C\";\r\n                        setText(view_temp, temps);\r\n                        setText(view_desc, description);\r\n                        setImage(view_weather, icons);\r\n\r\n                    } catch (JSONException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n\r\n            });\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    private void setText(final TextView text, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                text.setText(value);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setImage(final ImageView imageView, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                //paste switch\r\n                switch (value) {\r\n                    case \"01d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"01n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"02d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"02n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"03d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"03n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"04d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"04n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"09d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"09n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"10d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"10n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"11d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"11n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"13d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    case \"13n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    default:\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.wheather));\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    //App location\r\n   /* private void getLocation() {\r\n\r\n        //Check Permissions again\r\n\r\n        /*if (ActivityCompat.checkSelfPermission(\r\n                getContext(),Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(\r\n                getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n        } else {\r\n\r\n            Location LocationNetwork=locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);\r\n             if (LocationNetwork !=null)\r\n            {\r\n                double lat=LocationNetwork.getLatitude();\r\n                double longi=LocationNetwork.getLongitude();\r\n\r\n                latitude=String.valueOf(lat);\r\n                longitude=String.valueOf(longi);\r\n               /* loc_func(LocationNetwork);*/\r\n              /*  api_key(String.valueOf(view_city.getText()));\r\n                showLocationTxt.setText(\"Your Location:\"+\"\\n\"+\"Latitude= \"+latitude+\"\\n\"+\"Longitude= \"+longitude);\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private void OnGPS() {\r\n\r\n        final AlertDialog.Builder builder= new AlertDialog.Builder(getContext());\r\n\r\n        builder.setMessage(\"Enable GPS\").setCancelable(false).setPositiveButton(\"YES\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS));\r\n                getLocation();\r\n            }\r\n        }).setNegativeButton(\"NO\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                dialog.cancel();\r\n            }\r\n        });\r\n        final AlertDialog alertDialog=builder.create();\r\n        alertDialog.show();\r\n    }\r\n\r\n    private void loc_func(Location location){\r\n        try {\r\n            Geocoder geocoder=new Geocoder(getContext());\r\n            List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);\r\n            /*String address = addresses.get(0).getSubLocality();*/\r\n           /* String cityName = addresses.get(0).getLocality();\r\n            String stateName = addresses.get(0).getAdminArea();\r\n            String country = addresses.get(0).getCountryName();\r\n            //txt_paddress.setText(address);\r\n            view_city.setText(cityName);\r\n            view_country.setText(country);\r\n            //txt_state.setText(stateName);*/\r\n\r\n       /* } catch (IOException e) {\r\n            e.printStackTrace();\r\n            Toast.makeText(getContext(), \"Error:\"+e, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void inicioGPS(){\r\n\r\n\r\n        //Check gps is enable or not\r\n\r\n        if (!locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))\r\n        {\r\n            //Write Function To enable gps\r\n\r\n            OnGPS();\r\n        }\r\n        else\r\n        {\r\n            //GPS is already On then\r\n\r\n            /*getLocation();*/\r\n /*       }\r\n    }*/\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(date 1610072342884)
--@@ -1,20 +1,10 @@
-- package com.example.infinitycrop.ui.dashboard;
-- 
-- import android.Manifest;
---import android.app.Activity;
---import android.app.AlertDialog;
-- import android.content.Context;
---import android.content.DialogInterface;
---import android.content.Intent;
---import android.content.pm.PackageManager;
---import android.content.res.ColorStateList;
---import android.location.Address;
---import android.location.Geocoder;
---import android.location.Location;
-- import android.location.LocationManager;
-- import android.os.Bundle;
-- 
---import androidx.annotation.Nullable;
-- import androidx.core.app.ActivityCompat;
-- import androidx.fragment.app.Fragment;
-- import androidx.recyclerview.widget.LinearLayoutManager;
--@@ -22,36 +12,21 @@
-- import androidx.viewpager.widget.ViewPager;
-- 
-- import android.os.StrictMode;
---import android.provider.Settings;
-- import android.util.Log;
-- import android.view.LayoutInflater;
-- import android.view.View;
-- import android.view.ViewGroup;
---import android.widget.CompoundButton;
-- import android.widget.ImageView;
---import android.widget.LinearLayout;
---import android.widget.Switch;
-- import android.widget.TextView;
---import android.widget.Toast;
-- 
-- import com.example.comun.Mqtt;
---import com.example.infinitycrop.MainActivity;
-- import com.example.infinitycrop.R;
-- import com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;
-- import com.example.infinitycrop.ui.recycler_control.StaticRvModel;
---import com.google.android.gms.auth.api.signin.GoogleSignInClient;
---import com.google.android.gms.auth.api.signin.GoogleSignInOptions;
---import com.google.android.gms.location.FusedLocationProviderClient;
-- import com.google.android.material.tabs.TabLayout;
-- import com.google.firebase.auth.FirebaseAuth;
-- import com.google.firebase.auth.FirebaseUser;
---import com.google.firebase.database.annotations.NotNull;
---import com.google.firebase.firestore.DocumentReference;
---import com.google.firebase.firestore.DocumentSnapshot;
---import com.google.firebase.firestore.EventListener;
-- import com.google.firebase.firestore.FirebaseFirestore;
---import com.google.firebase.firestore.FirebaseFirestoreException;
---import com.squareup.okhttp.Call;
-- import com.squareup.okhttp.Callback;
-- import com.squareup.okhttp.OkHttpClient;
-- import com.squareup.okhttp.Request;
--@@ -70,7 +45,6 @@
-- 
-- import java.io.IOException;
-- import java.util.ArrayList;
---import java.util.List;
-- 
-- import static com.example.comun.Mqtt.topicRoot;
-- 
--@@ -102,6 +76,8 @@
-- 
--     ImageView view_weather;
--     //
--+    //Acceso a la maquina
--+
-- 
-- 
--     public static MqttClient client = null;
--@@ -284,6 +260,7 @@
-- 
--       */
-- 
--+
--         return v;
--     }
-- 
--Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.google.firebase.firestore.Query;\r\nimport com.google.firebase.firestore.QueryDocumentSnapshot;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link GeneralFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class GeneralFragment extends Fragment implements MqttCallback{\r\n    public static MqttClient client = null;\r\n    private String uid;\r\n    private FirebaseFirestore db;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public GeneralFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment GeneralFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static GeneralFragment newInstance(String param1, String param2) {\r\n        GeneralFragment fragment = new GeneralFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v = inflater.inflate(R.layout.fragment_general, container, false);\r\n        //switch methods\r\n        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });\r\n        db = FirebaseFirestore.getInstance();\r\n        MainActivity myActivity = (MainActivity) getActivity();\r\n        final TextView medidaTemp=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidaHum=v.findViewById(R.id.medidaHumedadGeneral);\r\n        final TextView medidaHumAm=v.findViewById(R.id.medidaSalinidadGeneral);\r\n        final TextView medidaLuz=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n        uid=myActivity.getMachineUID();\r\n        db.collection(\"Mediciones general\")\r\n                .document(uid)\r\n                .addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable DocumentSnapshot snapshot,\r\n                                        @Nullable FirebaseFirestoreException e) {\r\n                        if (e != null) {\r\n                            return;\r\n                        }\r\n\r\n                        if (snapshot != null && snapshot.exists()) {\r\n                            //Temperatura\r\n                            String medidaT=snapshot.getString(\"Temperatura\");\r\n                            medidaTemp.setText(medidaT+\"°C\");\r\n                            //Humedad\r\n                            String medidaH=snapshot.getString(\"Humedad\");\r\n                            medidaHum.setText(medidaH+\"%\");\r\n                            //Humedad Ambiente\r\n                            String medidaHA=snapshot.getString(\"Humedad Ambiente\");\r\n                            medidaHumAm.setText(medidaHA+\"%\");\r\n                            //Luminosidad\r\n                            String medidaL=snapshot.getString(\"Luminosidad\");\r\n                            medidaLuz.setText(medidaL+\"%\");\r\n\r\n\r\n                        } else {\r\n\r\n                        }\r\n                    }\r\n                });\r\n\r\n        return v;\r\n    }\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"Superior OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"Superior ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(date 1610073089059)
--@@ -1,14 +1,17 @@
-- package com.example.infinitycrop.ui.dashboard;
-- 
--+import android.content.Intent;
-- import android.os.Bundle;
-- 
-- import androidx.annotation.Nullable;
--+import androidx.constraintlayout.widget.ConstraintLayout;
-- import androidx.fragment.app.Fragment;
-- 
-- import android.util.Log;
-- import android.view.LayoutInflater;
-- import android.view.View;
-- import android.view.ViewGroup;
--+import android.widget.Button;
-- import android.widget.CompoundButton;
-- import android.widget.Switch;
-- import android.widget.TextView;
--@@ -16,13 +19,12 @@
-- import com.example.comun.Mqtt;
-- import com.example.infinitycrop.MainActivity;
-- import com.example.infinitycrop.R;
--+import com.example.infinitycrop.ui.MachineControl.planta1;
--+import com.google.android.material.bottomsheet.BottomSheetDialog;
-- import com.google.firebase.firestore.DocumentSnapshot;
-- import com.google.firebase.firestore.EventListener;
-- import com.google.firebase.firestore.FirebaseFirestore;
-- import com.google.firebase.firestore.FirebaseFirestoreException;
---import com.google.firebase.firestore.Query;
---import com.google.firebase.firestore.QueryDocumentSnapshot;
---import com.google.firebase.firestore.QuerySnapshot;
-- 
-- import org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;
-- import org.eclipse.paho.client.mqttv3.MqttCallback;
--@@ -139,8 +141,43 @@
--                     }
--                 });
-- 
--+        //Boton para acceder a la maquina para sus parcelas
--+        Button btnmymachine = (Button) v.findViewById(R.id.btnMyMachine);
--+        btnmymachine.setOnClickListener(new View.OnClickListener() {
--+            @Override
--+            public void onClick(View v) {
--+
--+                BottomSheetDialog bottomSheetDialog = new BottomSheetDialog(
--+                        getContext()
--+                );
--+                bottomSheetDialog.setContentView(R.layout.plantamaquina_bottom_sheet);
--+                Button btnp1=bottomSheetDialog.findViewById(R.id.enterPlant2);
--+                Button btn2=bottomSheetDialog.findViewById(R.id.enterPlant1);
--+                bottomSheetDialog.show();
--+                btnp1.setOnClickListener(new View.OnClickListener() {
--+                    @Override
--+                    public void onClick(View v) {
--+                        Intent intent = new Intent (getContext(), planta1.class);
--+                        startActivity(intent);
--+
--+                    }
--+                });
--+            }
--+        });
--+
--         return v;
--     }
--+        /*btnmymachine.setOnClickListener(new View.OnClickListener() {
--+            @Override
--+            public void onClick(View v) {
--+                Intent intent = new Intent (getContext(), MiMaquina.class);
--+                startActivity(intent);
--+
--+            }
--+        });*/
--+
--+
--+
--     public void enviarLucesOff(){
--         try {
--             client = new MqttClient(Mqtt.broker, Mqtt.clientId, new
--Index: app/build.gradle
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>apply plugin: 'com.android.application'\r\n\r\n\r\nandroid {\r\n    compileSdkVersion 30\r\n    buildToolsVersion \"30.0.2\"\r\n\r\n    defaultConfig {\r\n        applicationId \"com.example.infinitycrop\"\r\n        minSdkVersion 23\r\n        targetSdkVersion 30\r\n        versionCode 1\r\n        versionName \"1.0\"\r\n        multiDexEnabled true\r\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\r\n        }\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation fileTree(dir: \"libs\", include: [\"*.jar\"])\r\n    implementation 'androidx.appcompat:appcompat:1.2.0'\r\n    implementation 'com.google.android.material:material:1.2.1'\r\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.2'\r\n    implementation 'androidx.navigation:navigation-fragment:2.1.0'\r\n    implementation 'androidx.navigation:navigation-ui:2.1.0'\r\n    implementation 'androidx.lifecycle:lifecycle-extensions:2.2.0'\r\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\r\n    implementation 'com.google.firebase:firebase-auth:16.0.5'\r\n    implementation 'com.firebaseui:firebase-ui-auth:6.2.0'\r\n    implementation project(path: ':comun')\r\n    implementation 'com.google.firebase:firebase-database:19.5.1'\r\n    implementation 'com.google.firebase:firebase-storage:19.2.0'\r\n    testImplementation 'junit:junit:4.12'\r\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\r\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\r\n    implementation 'com.google.firebase:firebase-analytics'\r\n    implementation 'com.ismaeldivita.chipnavigation:chip-navigation-bar:1.3.4'\r\n    implementation 'org.jetbrains.kotlin:kotlin-stdlib:1.4.10'\r\n    implementation 'androidx.recyclerview:recyclerview:1.1.0'\r\n    implementation 'com.android.volley:volley:1.1.0'\r\n    // Also declare the dependency for the Google Play services library and specify its version\r\n    implementation 'com.google.android.gms:play-services-auth:18.1.0'\r\n    // Import the BoM for the Firebase platform\r\n    implementation platform('com.google.firebase:firebase-bom:26.0.0')\r\n    implementation 'com.google.firebase:firebase-firestore:17.1.2'\r\n    implementation 'com.android.support:multidex:1.0.3'\r\n    implementation 'com.firebaseui:firebase-ui-firestore:6.3.0'\r\n    //biblioteca para mostrar images a través de URL\r\n    implementation 'com.github.bumptech.glide:glide:4.11.0'\r\n    //import del mqtt\r\n    implementation 'org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.1.1'\r\n    implementation 'com.google.android.gms:play-services-maps:17.0.0'\r\n    compile 'com.google.android.gms:play-services-location:16.0.0'\r\n    implementation 'com.journeyapps:zxing-android-embedded:3.4.0'//añadimos esta libreria para qr\r\n    implementation 'com.facebook.android:facebook-android-sdk:[4,5)'\r\n\r\n    implementation \"androidx.viewpager2:viewpager2:1.0.0\" //libreria viewpager\r\n    implementation  'com.airbnb.android:lottie:3.4.1'//libreria para la animacion\r\n    implementation 'com.cuberto:liquid-swipe:1.0.0' //libreria para el tutorial\r\n    implementation 'androidx.core:core:1.3.1'\r\n    implementation'androidx.core:core-ktx:1.3.1'\r\n\r\n    implementation'com.squareup.okhttp3:mockwebserver:4.2.0'\r\n    implementation'com.squareup.okhttp3:okhttp:4.2.0'\r\n\r\n    implementation 'androidx.cardview:cardview:1.0.0'\r\n    implementation \"androidx.viewpager2:viewpager2:1.0.0\" //libreria viewpager\r\n}\r\napply plugin: 'com.google.gms.google-services'
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/build.gradle	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ app/build.gradle	(date 1610073408318)
--@@ -72,5 +72,7 @@
-- 
--     implementation 'androidx.cardview:cardview:1.0.0'
--     implementation "androidx.viewpager2:viewpager2:1.0.0" //libreria viewpager
--+    //libreria wheelview
--+    implementation'com.github.psuzn:wheelView:1.0.0'
-- }
-- apply plugin: 'com.google.gms.google-services'
--\ No newline at end of file
--Index: app/src/main/AndroidManifest.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.infinitycrop\">\r\n\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" /> <!-- Permisos Qr -->\r\n    <uses-permission android:name=\"android.permission.CAMERA\" />\r\n\r\n    <uses-feature android:name=\"android.hardware.camera\" />\r\n    <uses-feature android:name=\"android.hardware.camera.autofocus\" />\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher\"\r\n        android:theme=\"@style/AppThemeHome\">\r\n        <activity android:name=\".ui.forum.lets_start.welcome_forum\"></activity>\r\n        <activity android:name=\".MainActivity\"></activity>\r\n\r\n        <service android:name=\".ui.service.ServicioMqtt\" />\r\n\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\"></activity>\r\n        <activity android:name=\".ui.profile.settings.HelpProfile\"></activity>\r\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\" />\r\n        <activity android:name=\".ui.list_machine.AddMachine\" />\r\n        <activity android:name=\".ui.logmail.RegisterActivity\" />\r\n        <activity android:name=\".ui.logmail.LoginActivity\" />\r\n        <activity android:name=\".ui.list_machine.CaptureAct\" />\r\n        <activity android:name=\".ui.login.LogActivity\" />\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\" />\r\n        <activity android:name=\".ui.LoadAnimations.LogprimeraActivity\" />\r\n\r\n        <meta-data\r\n            android:name=\"com.google.android.geo.API_KEY\"\r\n            android:value=\"@string/google_maps_key\" />\r\n        <meta-data\r\n            android:name=\"com.facebook.sdk.ApplicationId\"\r\n            android:value=\"@string/facebook_app_id\"\r\n            tools:replace=\"android:value\" />\r\n        <meta-data\r\n            android:name=\"preloaded_fonts\"\r\n            android:resource=\"@array/preloaded_fonts\" />\r\n    </application>\r\n\r\n</manifest>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/AndroidManifest.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ app/src/main/AndroidManifest.xml	(date 1610072342889)
--@@ -43,6 +43,7 @@
--         <activity android:name=".ui.login.LogActivity" />
--         <activity android:name=".ui.LoadAnimations.IntroductoryActivity2" />
--         <activity android:name=".ui.LoadAnimations.LogprimeraActivity" />
--+        <activity android:name=".ui.MachineControl.planta1" />
-- 
--         <meta-data
--             android:name="com.google.android.geo.API_KEY"
--Index: app/src/main/res/layout/fragment_general.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    tools:context=\".ui.dashboard.DashboardFragment\">\r\n\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:orientation=\"vertical\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\r\n\r\n        <RelativeLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginTop=\"10dp\"\r\n            android:layout_marginRight=\"20dp\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/textDashboardGeneral\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:text=\"Dashboard  >\"\r\n\r\n                android:textSize=\"19sp\" />\r\n\r\n            <TextView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/textDashboardGeneral\"\r\n                android:text=\"4 sensores\"\r\n\r\n                android:textSize=\"14sp\" />\r\n\r\n            <!--<ImageView\r\n                android:layout_width=\"62dp\"\r\n                android:layout_height=\"62dp\"\r\n                android:layout_alignParentRight=\"true\"\r\n                android:src=\"@drawable/ic_sun\" />-->\r\n        </RelativeLayout>\r\n        <GridLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:columnCount=\"2\"\r\n            android:rowCount=\"3\"\r\n            android:alignmentMode=\"alignMargins\"\r\n            android:columnOrderPreserved=\"false\">\r\n            <!--temperatura-->\r\n            <androidx.cardview.widget.CardView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_columnWeight=\"1\"\r\n                android:layout_rowWeight=\"1\"\r\n                app:cardElevation=\"6dp\"\r\n                app:cardCornerRadius=\"12dp\"\r\n                android:layout_marginBottom=\"12dp\"\r\n                android:layout_margin=\"12dp\"\r\n                >\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n\r\n                    android:orientation=\"vertical\"\r\n                    android:padding=\"2dp\">\r\n\r\n                    <androidx.constraintlayout.widget.ConstraintLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_marginBottom=\"12dp\"\r\n                        android:layout_height=\"match_parent\">\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textTemperaturaGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"8dp\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:text=\"Temperatura\"\r\n                            android:textSize=\"16sp\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchTemperaturaGeneral\"\r\n                            app:layout_constraintStart_toStartOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <Switch\r\n                            android:id=\"@+id/switchTemperaturaGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:layout_marginEnd=\"8dp\"\r\n                            android:buttonTint=\"#FFFFFF\"\r\n                            android:checked=\"true\"\r\n                            android:fitsSystemWindows=\"false\"\r\n                            android:textColorLink=\"#a0c63e\"\r\n                            android:textSize=\"8sp\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/medidaTemperaturaGeneral\"\r\n                            android:layout_width=\"90dp\"\r\n                            android:layout_height=\"39dp\"\r\n                            android:layout_marginTop=\"24dp\"\r\n                            android:text=\"34°C\"\r\n                            android:textSize=\"31sp\"\r\n                            app:layout_constraintStart_toStartOf=\"@+id/textTemperaturaGeneral\"\r\n                            app:layout_constraintTop_toBottomOf=\"@+id/textTemperaturaGeneral\" />\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/imgTemperaturaGeneral\"\r\n                            android:layout_width=\"53dp\"\r\n                            android:layout_height=\"55dp\"\r\n                            android:layout_marginEnd=\"1dp\"\r\n                            android:src=\"@drawable/icons_temperature\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaTemperaturaGeneral\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaTemperaturaGeneral\"\r\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaTemperaturaGeneral\" />\r\n                    </androidx.constraintlayout.widget.ConstraintLayout>\r\n                </LinearLayout>\r\n            </androidx.cardview.widget.CardView>\r\n            <!--humedad-->\r\n            <androidx.cardview.widget.CardView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_columnWeight=\"1\"\r\n                android:layout_rowWeight=\"1\"\r\n                app:cardElevation=\"6dp\"\r\n                app:cardCornerRadius=\"12dp\"\r\n                android:layout_marginBottom=\"12dp\"\r\n                android:layout_margin=\"12dp\"\r\n                >\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n\r\n                    android:orientation=\"vertical\"\r\n                    android:padding=\"2dp\">\r\n\r\n                    <androidx.constraintlayout.widget.ConstraintLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_marginBottom=\"12dp\"\r\n                        android:layout_height=\"match_parent\">\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textHumedadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"8dp\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:text=\"Humedad\"\r\n                            android:textSize=\"16sp\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchHumedadGeneral\"\r\n                            app:layout_constraintStart_toStartOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <Switch\r\n                            android:id=\"@+id/switchHumedadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:layout_marginEnd=\"8dp\"\r\n                            android:checked=\"true\"\r\n                            android:textColorLink=\"#a0c63e\"\r\n                            android:textSize=\"8sp\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/medidaHumedadGeneral\"\r\n                            android:layout_width=\"90dp\"\r\n                            android:layout_height=\"39dp\"\r\n                            android:layout_marginTop=\"24dp\"\r\n                            android:text=\"68%\"\r\n                            android:textSize=\"31sp\"\r\n                            app:layout_constraintStart_toStartOf=\"@+id/textHumedadGeneral\"\r\n                            app:layout_constraintTop_toBottomOf=\"@+id/textHumedadGeneral\" />\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/imgHumedadGeneral\"\r\n                            android:layout_width=\"53dp\"\r\n                            android:layout_height=\"55dp\"\r\n                            android:layout_marginEnd=\"1dp\"\r\n                            android:src=\"@drawable/icons_humidity\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaHumedadGeneral\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaHumedadGeneral\"\r\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaHumedadGeneral\" />\r\n                    </androidx.constraintlayout.widget.ConstraintLayout>\r\n                </LinearLayout>\r\n            </androidx.cardview.widget.CardView>\r\n            <!--salinidad-->\r\n            <androidx.cardview.widget.CardView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_columnWeight=\"1\"\r\n                android:layout_rowWeight=\"1\"\r\n                app:cardElevation=\"6dp\"\r\n                app:cardCornerRadius=\"12dp\"\r\n                android:layout_marginBottom=\"12dp\"\r\n                android:layout_margin=\"12dp\"\r\n                >\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n\r\n                    android:orientation=\"vertical\"\r\n                    android:padding=\"2dp\">\r\n\r\n                    <androidx.constraintlayout.widget.ConstraintLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_marginBottom=\"12dp\"\r\n                        android:layout_height=\"match_parent\">\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textSalinidadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"8dp\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:text=\"H. Ambiente\"\r\n                            android:textSize=\"16sp\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchSalinidadGeneral\"\r\n                            app:layout_constraintStart_toStartOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <Switch\r\n                            android:id=\"@+id/switchSalinidadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:layout_marginEnd=\"8dp\"\r\n                            android:checked=\"true\"\r\n                            android:textColorLink=\"#a0c63e\"\r\n                            android:textSize=\"8sp\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/medidaSalinidadGeneral\"\r\n                            android:layout_width=\"90dp\"\r\n                            android:layout_height=\"39dp\"\r\n                            android:layout_marginTop=\"24dp\"\r\n                            android:text=\"10%\"\r\n                            android:textSize=\"31sp\"\r\n                            app:layout_constraintStart_toStartOf=\"@+id/textSalinidadGeneral\"\r\n                            app:layout_constraintTop_toBottomOf=\"@+id/textSalinidadGeneral\" />\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/imgSalinidadGeneral\"\r\n                            android:layout_width=\"53dp\"\r\n                            android:layout_height=\"55dp\"\r\n                            android:layout_marginEnd=\"1dp\"\r\n                            android:src=\"@drawable/icons_humedad_ambiente\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaSalinidadGeneral\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaSalinidadGeneral\"\r\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaSalinidadGeneral\" />\r\n                    </androidx.constraintlayout.widget.ConstraintLayout>\r\n                </LinearLayout>\r\n            </androidx.cardview.widget.CardView>\r\n            <!--Luminosidad-->\r\n            <androidx.cardview.widget.CardView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_columnWeight=\"1\"\r\n                android:layout_rowWeight=\"1\"\r\n                app:cardElevation=\"6dp\"\r\n                app:cardCornerRadius=\"12dp\"\r\n                android:layout_marginBottom=\"12dp\"\r\n                android:layout_margin=\"12dp\"\r\n                >\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n\r\n                    android:orientation=\"vertical\"\r\n                    android:padding=\"2dp\">\r\n\r\n                    <androidx.constraintlayout.widget.ConstraintLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_marginBottom=\"12dp\"\r\n                        android:layout_height=\"match_parent\">\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textLuminosidadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"8dp\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:text=\"Luminosidad\"\r\n                            android:textSize=\"16sp\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchLuminosidadGeneral\"\r\n                            app:layout_constraintStart_toStartOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <Switch\r\n                            android:id=\"@+id/switchLuminosidadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:layout_marginEnd=\"8dp\"\r\n                            android:checked=\"true\"\r\n                            android:textColorHighlight=\"#FFFFFF\"\r\n                            android:textColorLink=\"#a0c63e\"\r\n                            android:textSize=\"8sp\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/medidasLuminosidadGeneral\"\r\n                            android:layout_width=\"90dp\"\r\n                            android:layout_height=\"39dp\"\r\n                            android:layout_marginTop=\"24dp\"\r\n                            android:text=\"90%\"\r\n                            android:textSize=\"31sp\"\r\n                            app:layout_constraintStart_toStartOf=\"@+id/textLuminosidadGeneral\"\r\n                            app:layout_constraintTop_toBottomOf=\"@+id/textLuminosidadGeneral\" />\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/imgLuminosidadGeneral\"\r\n                            android:layout_width=\"53dp\"\r\n                            android:layout_height=\"55dp\"\r\n                            android:layout_marginEnd=\"1dp\"\r\n                            android:src=\"@drawable/icons_luminosity\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidasLuminosidadGeneral\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintStart_toEndOf=\"@+id/medidasLuminosidadGeneral\"\r\n                            app:layout_constraintTop_toTopOf=\"@+id/medidasLuminosidadGeneral\" />\r\n                    </androidx.constraintlayout.widget.ConstraintLayout>\r\n                </LinearLayout>\r\n            </androidx.cardview.widget.CardView>\r\n\r\n\r\n\r\n\r\n        </GridLayout>\r\n\r\n    </LinearLayout>\r\n</ScrollView>\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/res/layout/fragment_general.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ app/src/main/res/layout/fragment_general.xml	(date 1610051333115)
--@@ -35,6 +35,32 @@
-- 
--                 android:textSize="14sp" />
-- 
--+            <LinearLayout
--+                android:layout_width="243dp"
--+                android:layout_height="93dp"
--+                android:layout_alignBottom="@id/textDashboardGeneral"
--+                android:layout_alignParentTop="true"
--+                android:layout_alignParentEnd="true"
--+                android:layout_marginStart="25dp"
--+                android:layout_marginTop="0dp"
--+                android:layout_marginEnd="-9dp"
--+                android:layout_marginBottom="-87dp"
--+                android:layout_toEndOf="@+id/textDashboardGeneral"
--+                android:orientation="vertical">
--+
--+                <Button
--+                    android:id="@+id/btnMyMachine"
--+                    android:layout_width="182dp"
--+                    android:layout_height="38dp"
--+                    android:layout_marginStart="0dp"
--+                    android:layout_marginTop="1dp"
--+                    android:layout_marginEnd="38dp"
--+                    android:layout_marginBottom="-22dp"
--+                    android:background="@drawable/btn_scan"
--+                    android:textColor="@color/white"
--+                    android:text="MI maquina" />
--+            </LinearLayout>
--+
--             <!--<ImageView
--                 android:layout_width="62dp"
--                 android:layout_height="62dp"
--Index: .idea/jarRepositories.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"RemoteRepositoriesConfiguration\">\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"central\" />\r\n      <option name=\"name\" value=\"Maven Central repository\" />\r\n      <option name=\"url\" value=\"https://repo1.maven.org/maven2\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"jboss.community\" />\r\n      <option name=\"name\" value=\"JBoss Community repository\" />\r\n      <option name=\"url\" value=\"https://repository.jboss.org/nexus/content/repositories/public/\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"BintrayJCenter\" />\r\n      <option name=\"name\" value=\"BintrayJCenter\" />\r\n      <option name=\"url\" value=\"https://jcenter.bintray.com/\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"Google\" />\r\n      <option name=\"name\" value=\"Google\" />\r\n      <option name=\"url\" value=\"https://dl.google.com/dl/android/maven2/\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"GitHubPackages\" />\r\n      <option name=\"name\" value=\"GitHubPackages\" />\r\n      <option name=\"url\" value=\"https://maven.pkg.github.com/Cuberto/liquid-swipe-android\" />\r\n    </remote-repository>\r\n  </component>\r\n</project>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- .idea/jarRepositories.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ .idea/jarRepositories.xml	(date 1610073505595)
--@@ -26,5 +26,10 @@
--       <option name="name" value="GitHubPackages" />
--       <option name="url" value="https://maven.pkg.github.com/Cuberto/liquid-swipe-android" />
--     </remote-repository>
--+    <remote-repository>
--+      <option name="id" value="GitHubPackages" />
--+      <option name="name" value="GitHubPackages" />
--+      <option name="url" value="https://jitpack.io" />
--+    </remote-repository>
--   </component>
-- </project>
--\ No newline at end of file
--Index: build.gradle
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\nbuildscript {\r\n    repositories {\r\n        google()\r\n        jcenter()\r\n        mavenCentral()\r\n    }\r\n    dependencies {\r\n        classpath 'com.android.tools.build:gradle:4.1.1'\r\n        classpath 'com.google.gms:google-services:4.3.4'\r\n\r\n        // NOTE: Do not place your application dependencies here; they belong\r\n        // in the individual module build.gradle files\r\n    }\r\n}\r\n\r\nallprojects {\r\n    repositories {\r\n        google()\r\n        jcenter()\r\n        //Dependencia para el tutorial\r\n        def githubProperties = new Properties()\r\n        githubProperties.load(new FileInputStream(rootProject.file(\"github.properties\")))\r\n        repositories {\r\n            maven {\r\n                name = \"GitHubPackages\"\r\n\r\n                url = uri(\"https://maven.pkg.github.com/Cuberto/liquid-swipe-android\")\r\n                credentials {\r\n                    /** Create github.properties in root project folder file with\r\n                     ** gpr.usr=GITHUB_USER_ID & gpr.key=PERSONAL_ACCESS_TOKEN\r\n                     ** Or set env variable GPR_USER & GPR_API_KEY if not adding a properties file**/\r\n                    username = githubProperties['gpr.usr'] ?: System.getenv(\"GPR_USER\")\r\n                    password = githubProperties['gpr.key'] ?: System.getenv(\"GPR_API_KEY\")\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- build.gradle	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ build.gradle	(date 1610074867324)
--@@ -33,10 +33,15 @@
--                     username = githubProperties['gpr.usr'] ?: System.getenv("GPR_USER")
--                     password = githubProperties['gpr.key'] ?: System.getenv("GPR_API_KEY")
--                 }
--+
--             }
---        }
---    }
---}
--+            maven {
--+                url 'https://jitpack.io'
--+            }
--+            }
--+        }
--+    }
--+
-- 
-- task clean(type: Delete) {
--     delete rootProject.buildDir
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_13_01_2021_1_20__Default_Changelist_.xml
-===================================================================
---- .idea/shelf/Uncommitted_changes_before_Update_at_13_01_2021_1_20__Default_Changelist_.xml	(revision df2a90af626ba36415241c1dd15ab9103c4ae319)
-+++ .idea/shelf/Uncommitted_changes_before_Update_at_13_01_2021_1_20__Default_Changelist_.xml	(revision df2a90af626ba36415241c1dd15ab9103c4ae319)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_13_01_2021_1_20_[Default_Changelist]" date="1610497396221" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_13_01_2021_1_20_[Default_Changelist]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 13/01/2021 1:20 [Default Changelist]" />
--</changelist>
-\ No newline at end of file
-Index: app/src/main/AndroidManifest.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.infinitycrop\">\r\n\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" /> <!-- Permisos Qr -->\r\n    <uses-permission android:name=\"android.permission.CAMERA\" />\r\n\r\n    <uses-feature android:name=\"android.hardware.camera\" />\r\n    <uses-feature android:name=\"android.hardware.camera.autofocus\" />\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher\"\r\n        android:theme=\"@style/AppThemeHome\">\r\n        <activity android:name=\".ui.Foro.main.Community.NewPost.CreatePost.CreatePost\"></activity>\r\n        <activity android:name=\".ui.Foro.main.Community.CommunityMain\" />\r\n        <activity android:name=\".ui.Foro.lets_start.EditCommunity\" />\r\n        <activity android:name=\".ui.list_machine.ModifyMachine\" />\r\n        <activity android:name=\".ui.Foro.main.ForoMain\" />\r\n        <activity android:name=\".ui.Foro.lets_start.AddCommunity\" />\r\n        <activity android:name=\".ui.Foro.lets_start.choose_community\" />\r\n        <activity android:name=\".ui.Foro.lets_start.welcome_forum\" />\r\n        <activity android:name=\".MainActivity\" />\r\n\r\n\r\n        <service android:name=\".ui.service.ServicioMqtt\" />\r\n        <service android:name=\".ui.service.ServicioNotificaciones\" />\r\n\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\" />\r\n        <activity android:name=\".ui.profile.settings.HelpProfile\" />\r\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\" />\r\n        <activity android:name=\".ui.list_machine.AddMachine\" />\r\n        <activity android:name=\".ui.profile.settings.ModifyProfile\" />\r\n        <activity android:name=\".ui.logmail.RegisterActivity\" />\r\n        <activity android:name=\".ui.logmail.LoginActivity\" />\r\n        <activity android:name=\".ui.list_machine.CaptureAct\" />\r\n        <activity android:name=\".ui.login.LogActivity\" />\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\" />\r\n        <activity android:name=\".ui.LoadAnimations.LogprimeraActivity\" />\r\n        <activity android:name=\".ui.graphics.GraphicsActivity\" />\r\n        <activity android:name=\".ui.MachineControl.planta1\" />\r\n        <activity android:name=\".ui.notifications.NotificacionesActivity\" />\r\n\r\n        <meta-data\r\n            android:name=\"com.google.android.geo.API_KEY\"\r\n            android:value=\"@string/google_maps_key\" />\r\n        <meta-data\r\n            android:name=\"com.facebook.sdk.ApplicationId\"\r\n            android:value=\"@string/facebook_app_id\"\r\n            tools:replace=\"android:value\" />\r\n        <meta-data\r\n            android:name=\"preloaded_fonts\"\r\n            android:resource=\"@array/preloaded_fonts\" />\r\n\r\n        <activity\r\n            android:name=\"com.theartofdev.edmodo.cropper.CropImageActivity\"\r\n            android:theme=\"@style/Base.Theme.AppCompat\" />\r\n    </application>\r\n\r\n</manifest>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/AndroidManifest.xml	(revision df2a90af626ba36415241c1dd15ab9103c4ae319)
-+++ app/src/main/AndroidManifest.xml	(date 1611099369297)
-@@ -11,10 +11,13 @@
-     <uses-permission android:name="com.google.android.things.permission.MANAGE_INPUT_DRIVERS" />
-     <uses-permission android:name="com.google.android.things.permission.USE_PERIPHERAL_IO" /> <!-- Permisos Qr -->
-     <uses-permission android:name="android.permission.CAMERA" />
-+    <uses-permission android:name="com.android.alarm.permission.SET_ALARM"/>
-+
- 
-     <uses-feature android:name="android.hardware.camera" />
-     <uses-feature android:name="android.hardware.camera.autofocus" />
- 
-+
-     <application
-         android:allowBackup="true"
-         android:icon="@mipmap/ic_launcher"
-@@ -37,6 +40,7 @@
- 
-         <activity android:name=".ui.LoadAnimations.IntroductoryActivity">
-             <intent-filter>
-+                <action android:name="android.intent.action.SET_ALARM"/>
-                 <action android:name="android.intent.action.MAIN" />
- 
-                 <category android:name="android.intent.category.LAUNCHER" />
Index: .idea/shelf/Uncommitted_changes_before_Update_at_15_01_2021_13_24__Default_Changelist_.xml
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_15_01_2021_13_24__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_15_01_2021_13_24__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_15_01_2021_13_24_[Default_Changelist]" date="1610713665611" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_15_01_2021_13_24_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 15/01/2021 13:24 [Default Changelist]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_18_27__Default_Changelist_.xml
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_18_27__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_18_27__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_20_01_2021_18_27_[Default_Changelist]" date="1611163652450" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_18_27_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 20/01/2021 18:27 [Default Changelist]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_18_06_[Default_Changelist]/shelved.patch
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_18_06_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_18_06_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,504 +0,0 @@
-Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.MachineControl.planta1;\r\nimport com.google.android.material.bottomsheet.BottomSheetDialog;\r\nimport com.google.firebase.Timestamp;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\n\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link GeneralFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class GeneralFragment extends Fragment implements MqttCallback{\r\n    public static MqttClient client = null;\r\n    private String uid;\r\n    private FirebaseFirestore db;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public GeneralFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment GeneralFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static GeneralFragment newInstance(String param1, String param2) {\r\n        GeneralFragment fragment = new GeneralFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v = inflater.inflate(R.layout.fragment_general, container, false);\r\n        //switch methods\r\n        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });\r\n        db = FirebaseFirestore.getInstance();\r\n        MainActivity myActivity = (MainActivity) getActivity();\r\n        final TextView medidaTemp=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidaHum=v.findViewById(R.id.medidaHumedadGeneral);\r\n        /*final TextView medidaHumAm=v.findViewById(R.id.medidaSalinidadGeneral);*/\r\n        /*final TextView medidaLuz=v.findViewById(R.id.medidasLuminosidadGeneral);*/\r\n        uid=myActivity.getMachineUID();\r\n        db.collection(\"Mediciones general\")\r\n                .document(uid)\r\n                .addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable DocumentSnapshot snapshot,\r\n                                        @Nullable FirebaseFirestoreException e) {\r\n                        if (e != null) {\r\n                            return;\r\n                        }\r\n\r\n                        if (snapshot != null && snapshot.exists()) {\r\n                            //Temperatura\r\n                            String medidaT=snapshot.getString(\"Temperatura\");\r\n                            medidaTemp.setText(medidaT+\"°C\");\r\n                            //Humedad\r\n                            String medidaH=snapshot.getString(\"Humedad\");\r\n                            medidaHum.setText(medidaH+\"%\");\r\n                            //Humedad Ambiente\r\n                            /*String medidaHA=snapshot.getString(\"Humedad Ambiente\");\r\n                            medidaHumAm.setText(medidaHA+\"%\");*/\r\n                            //Luminosidad\r\n                            /*String medidaL=snapshot.getString(\"Luminosidad\");\r\n                            medidaLuz.setText(medidaL+\"%\");*/\r\n\r\n\r\n                        } else {\r\n\r\n                        }\r\n                    }\r\n                });\r\n\r\n        //Boton para acceder a la maquina para sus parcelas\r\n        Button btnmymachine = (Button) v.findViewById(R.id.btnMyMachine);\r\n        btnmymachine.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                BottomSheetDialog bottomSheetDialog = new BottomSheetDialog(\r\n                        getContext()\r\n                );\r\n                bottomSheetDialog.setContentView(R.layout.plantamaquina_bottom_sheet);\r\n                Button btnp1=bottomSheetDialog.findViewById(R.id.enterPlant2);\r\n                Button btn2=bottomSheetDialog.findViewById(R.id.enterPlant1);\r\n                bottomSheetDialog.show();\r\n                btnp1.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        Intent intent = new Intent (getContext(), planta1.class);\r\n                        intent.putExtra(\"idMachine\", uid);\r\n                        startActivity(intent);\r\n\r\n\r\n\r\n                    }\r\n\r\n                });\r\n            }\r\n        });\r\n\r\n        return v;\r\n    }\r\n        /*btnmymachine.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent (getContext(), MiMaquina.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n        });*/\r\n\r\n\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"operaciones\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"operaciones\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"1-OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"operaciones\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"operaciones\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"operaciones\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"1-ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"operaciones\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(revision 39446938e85f5a0c77409cf0939d14ba4e6c8d13)
-+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(date 1611248657392)
-@@ -175,6 +175,18 @@
- 
-                     }
- 
-+                });
-+                btn2.setOnClickListener(new View.OnClickListener() {
-+                    @Override
-+                    public void onClick(View v) {
-+                       /* Intent intent = new Intent (getContext(), planta2.class);
-+                        intent.putExtra("idMachine", uid);
-+                        startActivity(intent);*/
-+
-+
-+
-+                    }
-+
-                 });
-             }
-         });
-Index: app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.MachineControl;\r\n\r\nimport android.app.AlarmManager;\r\nimport android.app.DatePickerDialog;\r\nimport android.app.FragmentTransaction;\r\nimport android.app.TimePickerDialog;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.graphics.drawable.ColorDrawable;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.os.CountDownTimer;\r\nimport android.provider.AlarmClock;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.CheckBox;\r\nimport android.widget.DatePicker;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.TimePicker;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.annotation.RequiresApi;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.constraintlayout.widget.ConstraintLayout;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.dashboard.DashboardFragment;\r\nimport com.example.infinitycrop.ui.dashboard.GeneralFragment;\r\nimport com.example.infinitycrop.ui.logmail.LoginActivity;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.google.firebase.firestore.ListenerRegistration;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\nimport java.sql.Time;\r\nimport java.text.ParseException;\r\nimport java.text.SimpleDateFormat;\r\nimport java.time.LocalDate;\r\nimport java.time.LocalTime;\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.Calendar;\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\nimport java.util.Map;\r\n\r\nimport kotlin.Unit;\r\nimport kotlin.jvm.functions.Function1;\r\nimport me.sujanpoudel.wheelview.WheelView;\r\n\r\npublic class planta1 extends AppCompatActivity {\r\n    private List<String> nombres;\r\n    private List<String> estado;\r\n    //Aviso al entrar\r\n    private ConstraintLayout fondoR;\r\n    private ImageView imgr,goBack;\r\n    private TextView textR;\r\n    //\r\n\r\n    private int piso = 1;\r\n    String one = String.valueOf(piso);\r\n    private int stated = 1;\r\n    String state = String.valueOf(stated);\r\n\r\n\r\n    private CheckBox checkYes, checkNo;\r\n    private Button editInfo, saveChanges;\r\n    private TextView mDisplayHour,infoTitle,mStation;\r\n    private EditText nameplant;\r\n    private FirebaseFirestore db;\r\n\r\n    private String idDocument;\r\n    private String id;\r\n\r\n\r\n\r\n    //Reloj\r\n    int t2Hour, t2Minute;\r\n    private DatePickerDialog.OnDateSetListener mDateSetListener;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_planta1);\r\n\r\n        //Aviso al entrar\r\n        fondoR = findViewById(R.id.constraitR);\r\n        imgr = findViewById(R.id.imageprevius);\r\n        textR = findViewById(R.id.txtInfoD);\r\n        CountDownTimer countDownTimer = new CountDownTimer(3000, 1000) {//Se pone la cuenta atras para que no se superponga con la animación\r\n            public void onTick(long millisUntilFinished) {\r\n\r\n            }\r\n\r\n            public void onFinish() {\r\n\r\n                fondoR.setVisibility(View.GONE);\r\n                imgr.setVisibility(View.GONE);\r\n                textR.setVisibility(View.GONE);\r\n\r\n            }\r\n        }.start();\r\n        //boton para volver\r\n        goBack= findViewById(R.id.backDashboard);\r\n        goBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n               finish();\r\n            }\r\n        });\r\n\r\n        db=FirebaseFirestore.getInstance();\r\n        //bungle get extra\r\n        Bundle extras = getIntent().getExtras();\r\n        id = extras.getString(\"idMachine\");\r\n\r\n        //arrays\r\n        nombres=new ArrayList<>();\r\n        estado=new ArrayList<>();\r\n        //firestore\r\n        db.collection(\"Mediciones planta 1\").document(id).collection(\"DatosPiso\")\r\n                .addSnapshotListener(new EventListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable QuerySnapshot snapshots,\r\n                                        @Nullable FirebaseFirestoreException e) {\r\n                        if (e != null) {\r\n                            return;\r\n                        }\r\n                        nombres.clear();\r\n                        for (DocumentSnapshot doc : snapshots) {\r\n                                nombres.add(doc.getString(\"name\"));\r\n                                estado.add(doc.getId());\r\n                        }\r\n\r\n\r\n                       /* Toast.makeText(getApplicationContext(),nombres.toString(), Toast.LENGTH_LONG).show();*/\r\n\r\n\r\n\r\n                        final WheelView wheelView = (WheelView) findViewById(R.id.wheelview);\r\n                        wheelView.setTitles(nombres);\r\n\r\n                        wheelView.setSelectListener(new Function1<Integer, Unit>() {\r\n                            @Override\r\n                            public Unit invoke(Integer integer) {\r\n                                showToast(integer);\r\n                                return Unit.INSTANCE;\r\n                            }\r\n                            private final  void showToast(Integer index) {\r\n                               // Toast.makeText(planta1.this,\"\"+wheelView.getTitles().get(index),Toast.LENGTH_SHORT).show();\r\n                                idDocument=estado.get(index);\r\n                                Toast.makeText(planta1.this,\"\"+idDocument,Toast.LENGTH_SHORT).show();\r\n                                itenInfo(idDocument);\r\n\r\n\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                });\r\n\r\n\r\n\r\n\r\n\r\n        //Nombre de la planta\r\n        nameplant = (EditText)findViewById(R.id.editTextNobrep);\r\n        nameplant.setEnabled(false);\r\n        mDisplayHour=(TextView) findViewById(R.id.editHour);\r\n        mDisplayHour.setEnabled(false);\r\n        mStation=(TextView)findViewById(R.id.txtStation);\r\n        //Checkboxes\r\n        checkYes=(CheckBox)findViewById(R.id.checkBoxSi);\r\n        checkYes.setKeyListener(null);\r\n        checkNo=(CheckBox)findViewById(R.id.checkBoxNo);\r\n        checkNo.setKeyListener(null);\r\n\r\n        //Boton guardar cambios\r\n        saveChanges = (Button)findViewById(R.id.btn_save);\r\n        saveChanges.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                saveNote(v);\r\n                editInfo.setVisibility(View.VISIBLE);\r\n                saveChanges.setVisibility(View.GONE);\r\n                mDisplayHour.setEnabled(false);\r\n                nameplant.setEnabled(false);\r\n                infoTitle.setText(\"Pulsa el botón para editar:\");\r\n\r\n\r\n\r\n\r\n            }\r\n        });\r\n\r\n        //Boton editar informacion\r\n        editInfo = (Button) findViewById(R.id.btnedit);\r\n        editInfo.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                saveChanges.setVisibility(View.VISIBLE);\r\n                editInfo.setVisibility(View.GONE);\r\n                mDisplayHour.setEnabled(true);\r\n                nameplant.setEnabled(true);\r\n                infoTitle.setText(\"Información completa:\");\r\n\r\n\r\n\r\n            }\r\n        });\r\n        infoTitle = (TextView) findViewById(R.id.textViewinfo);\r\n        //HORA\r\n\r\n        mDisplayHour.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(AlarmClock.ACTION_SET_ALARM);\r\n                if(intent.resolveActivity(getPackageManager())!=null){\r\n                    startActivity(intent);\r\n                }\r\n\r\n        }\r\n        });\r\n\r\n\r\n\r\n\r\n        /*//CALENDARIO\r\n        mDisplayDate = (TextView) findViewById(R.id.tvDate);\r\n        mDisplayDate.setEnabled(false);\r\n        mDisplayDate.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Calendar cal = Calendar.getInstance();\r\n                int year = cal.get(Calendar.YEAR);\r\n                int month = cal.get(Calendar.MONTH);\r\n                int day = cal.get(Calendar.DAY_OF_MONTH);\r\n\r\n                DatePickerDialog dialog = new DatePickerDialog(planta1.this,android.R.style.Theme_Holo_Dialog_MinWidth, mDateSetListener,year,month,day);\r\n                dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n                dialog.show();\r\n            }\r\n\r\n        });\r\n        mDateSetListener = new DatePickerDialog.OnDateSetListener() {\r\n            @Override\r\n            public void onDateSet(DatePicker datePicker, int year, int month, int day) {\r\n                month = month+1;\r\n                String date = day +\"/\" + month +\"/\"+ year;\r\n                mDisplayDate.setText(date);\r\n            }\r\n        };\r\n            */\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n\r\n\r\n    }\r\n    /*public void establecerAlarma(String mensaje,int dias,int hora,int minutos){\r\n        Intent intent = new Intent(AlarmClock.ACTION_SET_ALARM)\r\n                .putExtra(AlarmClock.EXTRA_DAYS,dias)\r\n                .putExtra(AlarmClock.EXTRA_MESSAGE,mensaje)\r\n                .putExtra(AlarmClock.EXTRA_HOUR,hora)\r\n                .putExtra(AlarmClock.EXTRA_MINUTES,minutos);\r\n        if(intent.resolveActivity(getPackageManager())!=null){\r\n            startActivity(intent);\r\n        }\r\n    }*/\r\n\r\n    public void saveNote(View v){\r\n        String cola = idDocument;\r\n        String nombre = nameplant.getText().toString();\r\n\r\n        String piso = one;\r\n\r\n        Map<String, Object> note = new HashMap<>();\r\n        note.put(\"name\",nombre);\r\n        note.put(\"piso\",piso);\r\n\r\n        db.collection(\"Mediciones planta 1\").document(id).collection(\"DatosPiso\").document(cola).update(note).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n            @Override\r\n            public void onSuccess(Void aVoid) {\r\n            Toast.makeText(planta1.this,\"va bien\",Toast.LENGTH_SHORT).show();\r\n            }\r\n        }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Toast.makeText(planta1.this,\"va mal\",Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    private void itenInfo(String uiDoc){\r\n        //hacer consulta a ese documento con uiDOc y sacar su info\r\n        //luego set Text a all\r\n        db.collection(\"Mediciones planta 1\").document(id).collection(\"DatosPiso\").document(uiDoc).get()\r\n                .addOnSuccessListener(new OnSuccessListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onSuccess(DocumentSnapshot documentSnapshot) {\r\n                        if(documentSnapshot.exists()){\r\n                            String nombre = documentSnapshot.getString(\"name\");\r\n                            String estacion = documentSnapshot.getString(\"estacion\");\r\n                            int resultado =documentSnapshot.getLong(\"estado\").intValue();\r\n                            if(resultado==1){\r\n                                checkYes.isSelected();\r\n                                checkYes.setChecked(true);\r\n                                checkYes.isChecked();\r\n                                checkNo.setChecked(false);\r\n                            }else{\r\n                                checkNo.isSelected();\r\n                                checkNo.setChecked(true);\r\n                                checkNo.isChecked();\r\n                                checkYes.setChecked(false);\r\n                            }\r\n\r\n\r\n                           // Map<String,Object> note = documentSnapshot.getData();\r\n                            nameplant.setText(nombre);\r\n                            mStation.setText(estacion);\r\n\r\n\r\n\r\n                        }else{\r\n                            Toast.makeText(planta1.this,\"Document does exist\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }\r\n                }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Toast.makeText(planta1.this,\"va mal\",Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n                /*.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable DocumentSnapshot value, @Nullable FirebaseFirestoreException error) {\r\n\r\n                    }\r\n                });*/\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java	(revision 39446938e85f5a0c77409cf0939d14ba4e6c8d13)
-+++ app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java	(date 1611190970822)
-@@ -176,21 +176,21 @@
- 
- 
- 
--        //Nombre de la planta
--        nameplant = (EditText)findViewById(R.id.editTextNobrep);
--        nameplant.setEnabled(false);
--        mDisplayHour=(TextView) findViewById(R.id.editHour);
--        mDisplayHour.setEnabled(false);
--        mStation=(TextView)findViewById(R.id.txtStation);
--        //Checkboxes
--        checkYes=(CheckBox)findViewById(R.id.checkBoxSi);
--        checkYes.setKeyListener(null);
--        checkNo=(CheckBox)findViewById(R.id.checkBoxNo);
--        checkNo.setKeyListener(null);
-+            //Nombre de la planta
-+            nameplant = (EditText)findViewById(R.id.editTextNobrep);
-+            nameplant.setEnabled(false);
-+            mDisplayHour=(TextView) findViewById(R.id.editHour);
-+            mDisplayHour.setEnabled(false);
-+            mStation=(TextView)findViewById(R.id.txtStation);
-+            //Checkboxes
-+            checkYes=(CheckBox)findViewById(R.id.checkBoxSi);
-+            checkYes.setKeyListener(null);
-+            checkNo=(CheckBox)findViewById(R.id.checkBoxNo);
-+            checkNo.setKeyListener(null);
- 
--        //Boton guardar cambios
--        saveChanges = (Button)findViewById(R.id.btn_save);
--        saveChanges.setOnClickListener(new View.OnClickListener() {
-+            //Boton guardar cambios
-+            saveChanges = (Button)findViewById(R.id.btn_save);
-+            saveChanges.setOnClickListener(new View.OnClickListener() {
-             @Override
-             public void onClick(View v) {
-                 saveNote(v);
-Index: app/src/main/AndroidManifest.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.infinitycrop\">\r\n\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" /> <!-- Permisos Qr -->\r\n    <uses-permission android:name=\"android.permission.CAMERA\" />\r\n    <uses-permission android:name=\"com.android.alarm.permission.SET_ALARM\"/>\r\n\r\n\r\n    <uses-feature android:name=\"android.hardware.camera\" />\r\n    <uses-feature android:name=\"android.hardware.camera.autofocus\" />\r\n\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher\"\r\n        android:theme=\"@style/AppThemeHome\">\r\n        <activity android:name=\".ui.Foro.main.Community.NewPost.CreatePost.CreatePost\"></activity>\r\n        <activity android:name=\".ui.Foro.main.Community.CommunityMain\" />\r\n        <activity android:name=\".ui.Foro.lets_start.EditCommunity\" />\r\n        <activity android:name=\".ui.list_machine.ModifyMachine\" />\r\n        <activity android:name=\".ui.Foro.main.ForoMain\" />\r\n        <activity android:name=\".ui.Foro.lets_start.AddCommunity\" />\r\n        <activity android:name=\".ui.Foro.lets_start.choose_community\" />\r\n        <activity android:name=\".ui.Foro.lets_start.welcome_forum\" />\r\n        <activity android:name=\".MainActivity\" />\r\n\r\n\r\n        <service android:name=\".ui.service.ServicioMqtt\" />\r\n        <service android:name=\".ui.service.ServicioNotificaciones\" />\r\n\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.SET_ALARM\"/>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\" />\r\n        <activity android:name=\".ui.profile.settings.HelpProfile\" />\r\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\" />\r\n        <activity android:name=\".ui.list_machine.AddMachine\" />\r\n        <activity android:name=\".ui.profile.settings.ModifyProfile\" />\r\n        <activity android:name=\".ui.logmail.RegisterActivity\" />\r\n        <activity android:name=\".ui.logmail.LoginActivity\" />\r\n        <activity android:name=\".ui.list_machine.CaptureAct\" />\r\n        <activity android:name=\".ui.login.LogActivity\" />\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\" />\r\n        <activity android:name=\".ui.LoadAnimations.LogprimeraActivity\" />\r\n        <activity android:name=\".ui.graphics.GraphicsActivity\" />\r\n        <activity android:name=\".ui.MachineControl.planta1\" />\r\n        <activity android:name=\".ui.notifications.NotificacionesActivity\" />\r\n        <activity android:name=\".ui.guiabotanica.GuiaActivity\" />\r\n        <activity android:name=\".ui.guiabotanica.PlantActivity\" />\r\n\r\n        <meta-data\r\n            android:name=\"com.google.android.geo.API_KEY\"\r\n            android:value=\"@string/google_maps_key\" />\r\n        <meta-data\r\n            android:name=\"com.facebook.sdk.ApplicationId\"\r\n            android:value=\"@string/facebook_app_id\"\r\n            tools:replace=\"android:value\" />\r\n        <meta-data\r\n            android:name=\"preloaded_fonts\"\r\n            android:resource=\"@array/preloaded_fonts\" />\r\n\r\n        <activity\r\n            android:name=\"com.theartofdev.edmodo.cropper.CropImageActivity\"\r\n            android:theme=\"@style/Base.Theme.AppCompat\" />\r\n    </application>\r\n\r\n</manifest>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/AndroidManifest.xml	(revision 39446938e85f5a0c77409cf0939d14ba4e6c8d13)
-+++ app/src/main/AndroidManifest.xml	(date 1611248469939)
-@@ -27,6 +27,7 @@
-         <activity android:name=".ui.Foro.main.Community.NewPost.CreatePost.CreatePost"></activity>
-         <activity android:name=".ui.Foro.main.Community.CommunityMain" />
-         <activity android:name=".ui.Foro.lets_start.EditCommunity" />
-+        <activity android:name=".ui.Foro.main.Profile.EditProfileActivity" />
-         <activity android:name=".ui.list_machine.ModifyMachine" />
-         <activity android:name=".ui.Foro.main.ForoMain" />
-         <activity android:name=".ui.Foro.lets_start.AddCommunity" />
-@@ -59,6 +60,7 @@
-         <activity android:name=".ui.LoadAnimations.LogprimeraActivity" />
-         <activity android:name=".ui.graphics.GraphicsActivity" />
-         <activity android:name=".ui.MachineControl.planta1" />
-+        <activity android:name=".ui.MachineControl.planta2" />
-         <activity android:name=".ui.notifications.NotificacionesActivity" />
-         <activity android:name=".ui.guiabotanica.GuiaActivity" />
-         <activity android:name=".ui.guiabotanica.PlantActivity" />
-Index: app/src/main/java/com/example/infinitycrop/ui/Foro/main/Profile/ProfileForoFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.Foro.main.Profile;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport com.example.infinitycrop.R;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link ProfileForoFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class ProfileForoFragment extends Fragment {\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public ProfileForoFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment ProfileForoFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static ProfileForoFragment newInstance(String param1, String param2) {\r\n        ProfileForoFragment fragment = new ProfileForoFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        return inflater.inflate(R.layout.fragment_profile_foro, container, false);\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/Foro/main/Profile/ProfileForoFragment.java	(revision 39446938e85f5a0c77409cf0939d14ba4e6c8d13)
-+++ app/src/main/java/com/example/infinitycrop/ui/Foro/main/Profile/ProfileForoFragment.java	(date 1611247120757)
-@@ -1,14 +1,55 @@
- package com.example.infinitycrop.ui.Foro.main.Profile;
- 
-+import android.app.Activity;
-+import android.content.Intent;
-+import android.graphics.Color;
-+import android.net.Uri;
- import android.os.Bundle;
--
--import androidx.fragment.app.Fragment;
--
- import android.view.LayoutInflater;
- import android.view.View;
- import android.view.ViewGroup;
-+import android.widget.Button;
-+import android.widget.EditText;
-+import android.widget.ImageView;
-+import android.widget.LinearLayout;
-+import android.widget.TextView;
-+import android.widget.Toast;
- 
-+import androidx.annotation.NonNull;
-+import androidx.annotation.Nullable;
-+import androidx.fragment.app.Fragment;
-+
-+import com.bumptech.glide.Glide;
- import com.example.infinitycrop.R;
-+import com.example.infinitycrop.ui.Foro.main.Community.NewPost.CreatePost.CreatePost;
-+import com.example.infinitycrop.ui.MachineControl.planta1;
-+import com.google.android.gms.tasks.Continuation;
-+import com.google.android.gms.tasks.OnCompleteListener;
-+import com.google.android.gms.tasks.OnFailureListener;
-+import com.google.android.gms.tasks.OnSuccessListener;
-+import com.google.android.gms.tasks.Task;
-+import com.google.firebase.Timestamp;
-+import com.google.firebase.auth.FirebaseAuth;
-+import com.google.firebase.firestore.DocumentReference;
-+import com.google.firebase.firestore.DocumentSnapshot;
-+import com.google.firebase.firestore.EventListener;
-+import com.google.firebase.firestore.FirebaseFirestore;
-+import com.google.firebase.firestore.FirebaseFirestoreException;
-+import com.google.firebase.firestore.QuerySnapshot;
-+import com.google.firebase.storage.StorageReference;
-+import com.google.firebase.storage.UploadTask;
-+import com.squareup.picasso.Picasso;
-+import com.theartofdev.edmodo.cropper.CropImage;
-+import com.theartofdev.edmodo.cropper.CropImageView;
-+
-+import java.io.File;
-+import java.util.Date;
-+import java.util.HashMap;
-+import java.util.HashSet;
-+import java.util.Map;
-+import java.util.UUID;
-+
-+import static android.app.Activity.RESULT_OK;
- 
- /**
-  * A simple {@link Fragment} subclass.
-@@ -16,7 +57,19 @@
-  * create an instance of this fragment.
-  */
- public class ProfileForoFragment extends Fragment {
--
-+    private StorageReference mStorageRef;
-+    private String image_url;
-+    private FirebaseFirestore db;
-+    private FirebaseAuth firebaseAuth;
-+    private String uid;
-+    private String Nuser;
-+    Button btnEdit,btnSave;
-+    EditText txtNamep,descriptionP;
-+    ImageView imgP;
-+    ImageView lapiz1,lapiz2,lapiz3;
-+    TextView txtPost,txtFollow;
-+    LinearLayout l1p;
-+    private  Uri resultUri;
-     // TODO: Rename parameter arguments, choose names that match
-     // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
-     private static final String ARG_PARAM1 = "param1";
-@@ -60,7 +113,112 @@
-     @Override
-     public View onCreateView(LayoutInflater inflater, ViewGroup container,
-                              Bundle savedInstanceState) {
-+
-         // Inflate the layout for this fragment
--        return inflater.inflate(R.layout.fragment_profile_foro, container, false);
--    }
-+        final View root = inflater.inflate(R.layout.fragment_profile_foro, container, false);
-+        db = FirebaseFirestore.getInstance();
-+        firebaseAuth = FirebaseAuth.getInstance();
-+        uid = firebaseAuth.getUid();
-+        //Declaracion de los elementos
-+        lapiz1 = root.findViewById(R.id.pencil1);
-+        lapiz2 = root.findViewById(R.id.pencil2);
-+        lapiz3 = root.findViewById(R.id.pencil3);
-+        l1p = root.findViewById(R.id.layout1P);
-+        imgP = root.findViewById(R.id.imgP);
-+        imgP.setEnabled(false);
-+        btnEdit = root.findViewById(R.id.btneditDesc);
-+        btnSave = root.findViewById(R.id.btn_saveP);
-+        txtNamep = root.findViewById(R.id.nameP);
-+        txtNamep.setEnabled(false);
-+        descriptionP = root.findViewById(R.id.progiledescription);
-+        descriptionP.setEnabled(false);
-+        txtFollow = root.findViewById(R.id.followingP);
-+        txtPost = root.findViewById(R.id.txtPostN);
-+
-+
-+        String name;
-+            //firebase
-+        DocumentReference docRef = db.collection("Foro user").document(uid);
-+        docRef.addSnapshotListener(new EventListener<DocumentSnapshot>() {
-+            @Override
-+            public void onEvent(@Nullable DocumentSnapshot snapshot,
-+                                @Nullable FirebaseFirestoreException e) {
-+                if (e != null) {
-+
-+                    return;
-+                }
-+
-+                if (snapshot != null && snapshot.exists()) {
-+                    String nombre = snapshot.getString("name");
-+                    String descipcion = snapshot.getString("description");
-+                    String foto =snapshot.getString("url");
-+
-+                    txtNamep.setText(nombre);
-+                    /*imgP.setText(link);*/
-+                    descriptionP.setText(descipcion);
-+                    if(!foto.equals("")){
-+                        Picasso.get().load(foto).into(imgP);
-+                    }
-+                } else {
-+
-+                }
-+            }
-+        });
-+
-+        db.collection("Foro user").document(uid).collection("Following")
-+
-+                .addSnapshotListener(new EventListener<QuerySnapshot>() {
-+                    @Override
-+                    public void onEvent(@Nullable QuerySnapshot snapshots,
-+                                        @Nullable FirebaseFirestoreException e) {
-+                        if (e != null) {
-+
-+                            return;
-+                        }
-+
-+                        int cont=0;
-+                        for (DocumentSnapshot doc : snapshots) {
-+                            cont++;
-+
-+                        }
-+                        String contador=String.valueOf(cont);
-+                        txtFollow.setText(contador);
-+                    }
-+                });
-+        db.collection("Posts").addSnapshotListener(new EventListener<QuerySnapshot>() {
-+            @Override
-+            public void onEvent(@Nullable QuerySnapshot snapshots,
-+                                @Nullable FirebaseFirestoreException e) {
-+                if (e != null) {
-+
-+                    return;
-+                }
-+
-+                int cont=0;
-+                for (DocumentSnapshot doc : snapshots) {
-+                    if(doc.getString("creator").equals(uid)) {
-+                        cont++;
-+                    }
-+                }
-+                String contador=String.valueOf(cont);
-+                txtPost.setText(contador);
-+            }
-+        });
-+
-+        //boton editar
-+        btnEdit.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                Intent intent = new Intent(getActivity().getApplication(), EditProfileActivity.class);
-+                startActivity(intent);
-+            }
-+
-+            });
-+
-+
-+        return root;
-+
-+    }
-+
-+
- }
-\ No newline at end of file
-Index: app/src/main/res/layout/fragment_profile_foro.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"#EFE9E9\"\r\n    android:orientation=\"vertical\">\r\n\r\n    <RelativeLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"405dp\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"350dp\"\r\n            android:background=\"@color/colorSecondary\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <ImageView\r\n                android:layout_width=\"150dp\"\r\n                android:layout_height=\"150dp\"\r\n                android:layout_gravity=\"center_horizontal\"\r\n                android:layout_marginTop=\"45dp\"\r\n                android:background=\"@drawable/rectangle\" />\r\n\r\n            <TextView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center_horizontal\"\r\n                android:layout_marginTop=\"10dp\"\r\n                android:text=\"Angle Triangle\"\r\n                android:textColor=\"#fff\"\r\n                android:textSize=\"21sp\"\r\n                android:textStyle=\"bold\" />\r\n        </LinearLayout>\r\n\r\n        <androidx.cardview.widget.CardView\r\n            android:layout_width=\"400dp\"\r\n            android:layout_height=\"120dp\"\r\n            android:layout_centerHorizontal=\"true\"\r\n            android:layout_marginTop=\"275dp\">\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:orientation=\"horizontal\"\r\n                android:weightSum=\"2\">\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"center\"\r\n                    android:orientation=\"vertical\">\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:text=\"Posts\"\r\n                        android:textSize=\"20sp\" />\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:paddingTop=\"10dp\"\r\n                        android:text=\"125\"\r\n                        android:textColor=\"@color/green\"\r\n                        android:textSize=\"20sp\"\r\n                        android:textStyle=\"bold\" />\r\n                </LinearLayout>\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"center\"\r\n                    android:orientation=\"vertical\"\r\n                    android:visibility=\"gone\">\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:text=\"Followers\"\r\n                        android:textSize=\"20sp\"\r\n                        android:visibility=\"gone\" />\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:paddingTop=\"10dp\"\r\n                        android:text=\"1205\"\r\n                        android:textColor=\"@color/green\"\r\n                        android:textSize=\"20sp\"\r\n                        android:textStyle=\"bold\"\r\n                        android:visibility=\"gone\" />\r\n                </LinearLayout>\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"center\"\r\n                    android:orientation=\"vertical\">\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:text=\"Following\"\r\n                        android:textSize=\"20sp\" />\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:paddingTop=\"10dp\"\r\n                        android:text=\"360\"\r\n                        android:textColor=\"@color/green\"\r\n                        android:textSize=\"20sp\"\r\n                        android:textStyle=\"bold\" />\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n        </androidx.cardview.widget.CardView>\r\n    </RelativeLayout>\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_gravity=\"center\"\r\n        android:layout_marginLeft=\"20dp\"\r\n        android:layout_marginRight=\"20dp\"\r\n        android:layout_marginTop=\"45dp\"\r\n        android:orientation=\"vertical\">\r\n\r\n        <TextView\r\n            android:id=\"@+id/progiledescription\"\r\n            android:layout_width=\"379dp\"\r\n            android:layout_height=\"100dp\"\r\n            android:background=\"@color/white\"\r\n            android:hint=\"Descripción:\"\r\n            android:textSize=\"20sp\"\r\n            android:padding=\"10dp\"\r\n\r\n          />\r\n\r\n        <Button\r\n            android:id=\"@+id/btneditDesc\"\r\n            android:layout_width=\"130dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center\"\r\n            android:layout_marginTop=\"12dp\"\r\n            android:background=\"@drawable/btn_scan\"\r\n            android:text=\"Modificar\"\r\n            android:textColor=\"@color/white\" />\r\n\r\n    </LinearLayout>\r\n\r\n</LinearLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_profile_foro.xml	(revision 39446938e85f5a0c77409cf0939d14ba4e6c8d13)
-+++ app/src/main/res/layout/fragment_profile_foro.xml	(date 1611199686025)
-@@ -1,6 +1,7 @@
- <?xml version="1.0" encoding="utf-8"?>
- <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
- 
-+    xmlns:app="http://schemas.android.com/apk/res-auto"
-     android:layout_width="match_parent"
-     android:layout_height="match_parent"
-     android:background="#EFE9E9"
-@@ -11,27 +12,75 @@
-         android:layout_height="405dp">
- 
-         <LinearLayout
-+            android:id="@+id/layout1P"
-             android:layout_width="match_parent"
-             android:layout_height="350dp"
-             android:background="@color/colorSecondary"
-             android:orientation="vertical">
- 
--            <ImageView
--                android:layout_width="150dp"
--                android:layout_height="150dp"
--                android:layout_gravity="center_horizontal"
--                android:layout_marginTop="45dp"
--                android:background="@drawable/rectangle" />
-+            <LinearLayout
-+                android:layout_width="wrap_content"
-+                android:layout_height="wrap_content"
-+                android:layout_gravity="center"
-+                android:layout_marginTop="25dp"
-+                android:gravity="center"
-+                android:orientation="horizontal">
-+
-+                <ImageView
-+                    android:id="@+id/imgP"
-+                    android:layout_width="150dp"
-+                    android:layout_height="150dp"
-+                    android:layout_gravity="center_horizontal"
-+                    android:background="@drawable/rectangle"
-+                    android:scaleType="centerCrop" />
-+
-+                <ImageView
-+                    android:id="@+id/pencil1"
-+                    android:layout_width="62dp"
-+                    android:layout_height="41dp"
-+                    android:visibility="gone"
-+                    app:srcCompat="@drawable/pencil" />
-+            </LinearLayout>
- 
--            <TextView
-+            <LinearLayout
-                 android:layout_width="wrap_content"
-                 android:layout_height="wrap_content"
--                android:layout_gravity="center_horizontal"
--                android:layout_marginTop="10dp"
--                android:text="Angle Triangle"
--                android:textColor="#fff"
--                android:textSize="21sp"
--                android:textStyle="bold" />
-+                android:orientation="horizontal"
-+                android:layout_gravity="center"
-+                android:layout_marginTop="15dp">
-+
-+                <EditText
-+                    android:id="@+id/nameP"
-+                    android:layout_width="wrap_content"
-+                    android:layout_height="wrap_content"
-+                    android:layout_gravity="center_horizontal"
-+
-+                    android:background="@null"
-+                    android:text="Angle Triangle"
-+                    android:textColor="#fff"
-+                    android:textSize="21sp"
-+                    android:textStyle="bold" />
-+
-+                <ImageView
-+                    android:id="@+id/pencil2"
-+                    android:layout_width="53dp"
-+                    android:layout_height="32dp"
-+                    android:layout_gravity="center"
-+                    android:layout_weight="1"
-+                    android:visibility="gone"
-+                    app:srcCompat="@drawable/pencil" />
-+            </LinearLayout>
-+
-+            <Button
-+                android:id="@+id/btneditDesc"
-+                android:layout_width="wrap_content"
-+                android:layout_height="38dp"
-+                android:layout_gravity="end|clip_vertical"
-+                android:layout_marginTop="12dp"
-+                android:layout_marginRight="12dp"
-+                android:background="@drawable/btn_savep"
-+                android:text="Editar"
-+                android:textColor="@color/colorSecondary" />
-         </LinearLayout>
- 
-         <androidx.cardview.widget.CardView
-@@ -44,7 +93,8 @@
-                 android:layout_width="match_parent"
-                 android:layout_height="match_parent"
-                 android:orientation="horizontal"
--                android:weightSum="2">
-+                android:weightSum="2"
-+                android:gravity="center">
- 
-                 <LinearLayout
-                     android:layout_width="0dp"
-@@ -60,6 +110,7 @@
-                         android:textSize="20sp" />
- 
-                     <TextView
-+                        android:id="@+id/txtPostN"
-                         android:layout_width="wrap_content"
-                         android:layout_height="wrap_content"
-                         android:paddingTop="10dp"
-@@ -105,10 +156,11 @@
-                     <TextView
-                         android:layout_width="wrap_content"
-                         android:layout_height="wrap_content"
--                        android:text="Following"
-+                        android:text="Suiguiendo"
-                         android:textSize="20sp" />
- 
-                     <TextView
-+                        android:id="@+id/followingP"
-                         android:layout_width="wrap_content"
-                         android:layout_height="wrap_content"
-                         android:paddingTop="10dp"
-@@ -128,28 +180,48 @@
-         android:layout_marginLeft="20dp"
-         android:layout_marginRight="20dp"
-         android:layout_marginTop="45dp"
--        android:orientation="vertical">
-+        android:orientation="vertical"
-+        >
- 
--        <TextView
--            android:id="@+id/progiledescription"
--            android:layout_width="379dp"
--            android:layout_height="100dp"
--            android:background="@color/white"
--            android:hint="Descripción:"
--            android:textSize="20sp"
--            android:padding="10dp"
-+        <LinearLayout
-+            android:layout_width="wrap_content"
-+            android:layout_height="wrap_content"
-+            android:orientation="horizontal"
-+            android:gravity="center"
-+            android:layout_gravity="center">
-+
-+            <EditText
-+                android:id="@+id/progiledescription"
-+                android:layout_width="285dp"
-+                android:layout_height="100dp"
-+                android:background="@color/white"
-+                android:hint="Descripción:"
-+                android:padding="10dp"
-+                android:textSize="20sp"
- 
--          />
-+                />
-+
-+            <ImageView
-+                android:id="@+id/pencil3"
-+                android:layout_width="62dp"
-+                android:layout_height="41dp"
-+                android:layout_weight="1"
-+                android:visibility="gone"
-+                app:srcCompat="@drawable/pencil" />
-+        </LinearLayout>
- 
-         <Button
--            android:id="@+id/btneditDesc"
--            android:layout_width="130dp"
-+            android:id="@+id/btn_saveP"
-+            android:layout_width="120dp"
-             android:layout_height="wrap_content"
-             android:layout_gravity="center"
--            android:layout_marginTop="12dp"
-+            android:layout_marginTop="15dp"
-             android:background="@drawable/btn_scan"
--            android:text="Modificar"
--            android:textColor="@color/white" />
-+            android:text="Guardar"
-+            android:textColor="@color/white"
-+            android:visibility="gone"
-+
-+            />
- 
-     </LinearLayout>
- 
Index: .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_18_06__Default_Changelist_.xml
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_18_06__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_18_06__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_21_01_2021_18_06_[Default_Changelist]" date="1611248763083" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_18_06_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 21/01/2021 18:06 [Default Changelist]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_19_58__Default_Changelist_.xml
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_19_58__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_19_58__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_21_01_2021_19_58_[Default_Changelist]" date="1611255539981" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_19_58_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 21/01/2021 19:58 [Default Changelist]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_21_29_[Default_Changelist]/shelved.patch
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_21_29_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_21_29_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,142 +0,0 @@
-Index: github.properties
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>gpr.usr = 61469172\ngpr.key = 72a0f63b7097b413e8ff78a7dd6ca9412aaf232c
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>windows-1252
-===================================================================
---- github.properties	(revision 4351a1340cd0727c0788e6d1087924a0b2c06713)
-+++ github.properties	(date 1610820456596)
-@@ -1,2 +1,2 @@
--gpr.usr = 61469172
--gpr.key = 72a0f63b7097b413e8ff78a7dd6ca9412aaf232c
-\ No newline at end of file
-+gpr.usr = 61473165
-+gpr.key = 9671a8c2e26934b214e49dd99b96077296ee2aca
-\ No newline at end of file
-Index: app/src/main/java/com/example/infinitycrop/ui/notifications/RecyclerItemTouchHelper.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package rvstd.iso.com.recyclerviewswipetodelete;\n\nimport android.graphics.Canvas;\n\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.cardview.widget.CardView;\nimport androidx.recyclerview.widget.ItemTouchHelper;\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport android.view.View;\n\npublic class RecyclerItemTouchHelper extends ItemTouchHelper.SimpleCallback {\n\n    private RecyclerItemTouchHelperListener listener;\n\n    public RecyclerItemTouchHelper(int dragDirs, int swipeDirs,\n                                   RecyclerItemTouchHelperListener listener) {\n        super(dragDirs, swipeDirs);\n        this.listener = listener;\n    }\n\n    @Override\n    public boolean onMove(@NonNull RecyclerView recyclerView,\n                          @NonNull RecyclerView.ViewHolder viewHolder,\n                          @NonNull RecyclerView.ViewHolder viewHolder1) {\n        return true;\n    }\n\n    @Override\n    public void onSelectedChanged(@Nullable RecyclerView.ViewHolder viewHolder, int actionState) {\n        if(viewHolder != null){\n            View foregroundView = ((RViewAdapter.DataObjectHolder) viewHolder).layoutABorrar;\n            getDefaultUIUtil().onSelected(foregroundView);\n        }\n    }\n\n    @Override\n    public void onChildDrawOver(@NonNull Canvas c, @NonNull RecyclerView recyclerView,\n                                RecyclerView.ViewHolder viewHolder, float dX, float dY,\n                                int actionState, boolean isCurrentlyActive) {\n\n        View foregroundView = ((RViewAdapter.DataObjectHolder) viewHolder).layoutABorrar;\n\n        getDefaultUIUtil().onDrawOver(c, recyclerView, foregroundView, dX,dY,\n                actionState,isCurrentlyActive);\n\n    }\n\n    @Override\n    public void clearView(@NonNull RecyclerView recyclerView, @NonNull RecyclerView.ViewHolder viewHolder) {\n        View foregroundView = ((RViewAdapter.DataObjectHolder) viewHolder).layoutABorrar;\n        getDefaultUIUtil().clearView(foregroundView);\n    }\n\n    @Override\n    public void onChildDraw(@NonNull Canvas c, @NonNull RecyclerView recyclerView,\n                            @NonNull RecyclerView.ViewHolder viewHolder, float dX, float dY,\n                            int actionState, boolean isCurrentlyActive) {\n\n        View foregroundView = ((RViewAdapter.DataObjectHolder) viewHolder).layoutABorrar;\n\n        getDefaultUIUtil().onDraw(c, recyclerView, foregroundView, dX, dY,\n                actionState, isCurrentlyActive);\n\n    }\n\n\n    @Override\n    public int convertToAbsoluteDirection(int flags, int layoutDirection) {\n        return super.convertToAbsoluteDirection(flags, layoutDirection);\n    }\n\n    @Override\n    public void onSwiped(@NonNull RecyclerView.ViewHolder viewHolder, int direction) {\n        listener.onSwipe(viewHolder, direction, viewHolder.getAdapterPosition());\n    }\n\n    public interface RecyclerItemTouchHelperListener {\n        void onSwipe(RecyclerView.ViewHolder viewHolder, int direction, int position);\n    }\n\n\n}\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/notifications/RecyclerItemTouchHelper.java	(revision 4351a1340cd0727c0788e6d1087924a0b2c06713)
-+++ app/src/main/java/com/example/infinitycrop/ui/notifications/RecyclerItemTouchHelper.java	(date 1610824539436)
-@@ -1,4 +1,5 @@
--package rvstd.iso.com.recyclerviewswipetodelete;
-+/*
-+package com.example.infinitycrop.ui.notifications;
- 
- import android.graphics.Canvas;
- 
-@@ -82,3 +83,4 @@
- 
- 
- }
-+*/
-Index: app/src/main/java/com/example/infinitycrop/ui/notifications/RViewAdapter.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package rvstd.iso.com.recyclerviewswipetodelete;\n\nimport android.content.Context;\n\nimport androidx.annotation.NonNull;\nimport androidx.cardview.widget.CardView;\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.ImageView;\nimport android.widget.RelativeLayout;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport com.bumptech.glide.Glide;\n\nimport java.util.ArrayList;\n\npublic class RViewAdapter extends RecyclerView.Adapter<RViewAdapter.DataObjectHolder> {\n\n    private Context context;\n    private ArrayList<Notificaciones> listaNotificaciones;\n\n    public RViewAdapter(Context context, ArrayList<Notificaciones> listaNotificaciones) {\n        this.context = context;\n        this.listaNotificaciones = listaNotificaciones;\n    }\n\n\n    public class DataObjectHolder extends RecyclerView.ViewHolder {\n\n        private ImageView img;\n        private TextView txtNombre;\n        private TextView txtDescripcion;\n        private TextView txtFecha;\n        public RelativeLayout layoutABorrar;\n\n        public DataObjectHolder(@NonNull View itemView) {\n            super(itemView);\n            this.img = itemView.findViewById(R.id.idImagen);\n            this.txtNombre = itemView.findViewById(R.id.idNombre);\n            this.txtDescripcion = itemView.findViewById(R.id.idDescripcion);\n            this.layoutABorrar = itemView.findViewById(R.id.layoutABorrar);\n            this.txtFecha=itemView.findViewById(R.id.idFecha);\n        }\n    }\n\n    public void removeItem(int position){\n        listaNotificaciones.remove(position);\n        notifyItemRemoved(position);\n    }\n\n    public void restoreItem(Notificaciones coche,int position){\n        listaNotificaciones.add(position, coche);\n        notifyItemInserted(position);\n    }\n\n\n    @NonNull\n    @Override\n    public DataObjectHolder onCreateViewHolder(@NonNull ViewGroup viewGroup, int i) {\n        View view = LayoutInflater.from(viewGroup.getContext()).inflate(\n                R.layout.item_list, viewGroup, false);\n        return new DataObjectHolder(view);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull final DataObjectHolder holder, int position) {\n\n        holder.txtNombre.setText(listaNotificaciones.get(position).getNombre());\n        holder.txtDescripcion.setText(listaNotificaciones.get(position).getInfo());\n        holder.txtFecha.setText(listaNotificaciones.get(position).getFecha());\n\n        Glide.with(context).load(listaNotificaciones.get(position).getFoto()).into(holder.img);\n\n        holder.img.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Toast.makeText(v.getContext(), \"Position: \" +\n                        holder.getAdapterPosition(), Toast.LENGTH_SHORT).show();\n            }\n        });\n    }\n\n    @Override\n    public int getItemCount() {\n        return listaNotificaciones.size();\n    }\n\n}\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/notifications/RViewAdapter.java	(revision 4351a1340cd0727c0788e6d1087924a0b2c06713)
-+++ app/src/main/java/com/example/infinitycrop/ui/notifications/RViewAdapter.java	(date 1610824512384)
-@@ -1,4 +1,5 @@
--package rvstd.iso.com.recyclerviewswipetodelete;
-+/*
-+package com.example.infinitycrop.ui.notifications;
- 
- import android.content.Context;
- 
-@@ -90,3 +91,4 @@
-     }
- 
- }
-+*/
-Index: app/src/main/java/com/example/infinitycrop/ui/notifications/Notificaciones.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package rvstd.iso.com.recyclerviewswipetodelete;\n\npublic class Notificaciones {\n    //recycler bueno\n    private String nombre;\n    private String info;\n    private String foto;\n    private String fecha;\n\n    public Notificaciones(String nombre, String info, String foto, String fecha) {\n        this.nombre = nombre;\n        this.info = info;\n        this.foto = foto;\n        this.fecha = fecha;\n    }\n\n    public Notificaciones(){}\n\n    public String getNombre() {\n        return nombre;\n    }\n\n    public void setNombre(String nombre) {\n        this.nombre = nombre;\n    }\n\n    public String getInfo() {\n        return info;\n    }\n\n    public void setInfo(String info) {\n        this.info = info;\n    }\n\n    public String getFoto() {\n        return foto;\n    }\n\n    public void setFoto(String foto) {\n        this.foto = foto;\n    }\n\n    public String getFecha() {\n        return fecha;\n    }\n\n    public void setFecha(String fecha) {\n        this.fecha = fecha;\n    }\n}\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/notifications/Notificaciones.java	(revision 4351a1340cd0727c0788e6d1087924a0b2c06713)
-+++ app/src/main/java/com/example/infinitycrop/ui/notifications/Notificaciones.java	(date 1610824423473)
-@@ -1,4 +1,4 @@
--package rvstd.iso.com.recyclerviewswipetodelete;
-+package com.example.infinitycrop.ui.notifications;
- 
- public class Notificaciones {
-     //recycler bueno
-Index: app/src/main/res/layout/activity_foro_main.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.Foro.main.ForoMain\">\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_foro_main.xml	(revision 4351a1340cd0727c0788e6d1087924a0b2c06713)
-+++ app/src/main/res/layout/activity_foro_main.xml	(date 1610820456689)
-@@ -1,9 +1,13 @@
- <?xml version="1.0" encoding="utf-8"?>
--<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
-+<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
-     xmlns:app="http://schemas.android.com/apk/res-auto"
-     xmlns:tools="http://schemas.android.com/tools"
-     android:layout_width="match_parent"
-     android:layout_height="match_parent"
-     tools:context=".ui.Foro.main.ForoMain">
- 
--</androidx.constraintlayout.widget.ConstraintLayout>
-\ No newline at end of file
-+    <com.ismaeldivita.chipnavigation.ChipNavigationBar
-+        android:layout_width="match_parent"
-+        android:layout_height="wrap_content"></com.ismaeldivita.chipnavigation.ChipNavigationBar>
-+
-+</RelativeLayout>
-\ No newline at end of file
-Index: app/src/main/res/menu/foro_nav_item.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/menu/foro_nav_item.xml	(date 1610820456844)
-+++ app/src/main/res/menu/foro_nav_item.xml	(date 1610820456844)
-@@ -0,0 +1,33 @@
-+<?xml version="1.0" encoding="utf-8"?>
-+<menu xmlns:android="http://schemas.android.com/apk/res/android"
-+    xmlns:app="http://schemas.android.com/apk/res-auto">
-+    <!-- home, buscar, panel de comunidades, pefil -->
-+    <item
-+        android:id="@+id/home"
-+        android:icon="@drawable/ic_home"
-+        android:title="Inicio"
-+        app:cnb_backgroundColor="@color/colorPrimaryDashboard"
-+        app:cnb_iconColor="#ffffff"
-+        app:cnb_textColor="#ffffff" />
-+    <item
-+        android:id="@+id/graphics"
-+        android:icon="@drawable/icons_dashboard"
-+        android:title="Panel de control"
-+        app:cnb_backgroundColor="@color/colorPrimaryDashboard"
-+        app:cnb_iconColor="#ffffff"
-+        app:cnb_textColor="#ffffff" />
-+    <item
-+        android:id="@+id/notifications"
-+        android:icon="@drawable/ic_baseline_map"
-+        android:title="Mapa"
-+        app:cnb_backgroundColor="@color/colorPrimaryDashboard"
-+        app:cnb_iconColor="#ffffff"
-+        app:cnb_textColor="#ffffff" />
-+    <item
-+        android:id="@+id/profile"
-+        android:icon="@drawable/ic_profile"
-+        android:title="Perfil"
-+        app:cnb_backgroundColor="@color/colorPrimaryDashboard"
-+        app:cnb_iconColor="#ffffff"
-+        app:cnb_textColor="#ffffff" />
-+</menu>
-\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_13_14__Default_Changelist_.xml
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_13_14__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_13_14__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_20_01_2021_13_14_[Default_Changelist]" date="1611144863646" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_13_14_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 20/01/2021 13:14 [Default Changelist]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_20_41__Default_Changelist_.xml
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_20_41__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_20_41__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,9 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_20_01_2021_20_41_[Default_Changelist]" date="1611171719702" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_20_41_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 20/01/2021 20:41 [Default Changelist]" />
-  <binary>
-    <option name="BEFORE_PATH" value="app/src/main/res/font/drawable-v24/prod.png" />
-    <option name="AFTER_PATH" />
-    <option name="SHELVED_PATH" />
-  </binary>
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_18_27_[Default_Changelist]/shelved.patch
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_18_27_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_18_27_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,3514 +0,0 @@
-Index: app/src/main/res/layout/activity_planta1.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:background=\"@drawable/bg4\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\"com.example.infinitycrop.ui.MachineControl.planta1\">\r\n\r\n    <RelativeLayout\r\n\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:layout_marginBottom=\"7.3dp\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n\r\n            android:orientation=\"vertical\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/backDashboard\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"40dp\"\r\n                android:layout_marginLeft=\"10dp\"\r\n                android:layout_marginTop=\"30dp\"\r\n                android:src=\"@drawable/icons_arrow_left_green\">\r\n\r\n            </ImageView>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"12dp\"\r\n                android:orientation=\"horizontal\">\r\n\r\n                <TextView\r\n                    android:id=\"@+id/textView\"\r\n                    android:layout_width=\"469dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginLeft=\"10dp\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"clip_horizontal\"\r\n                    android:text=\"Piso 1\"\r\n                    android:textColor=\"@color/white\"\r\n                    android:textSize=\"25dp\"\r\n                    android:textStyle=\"bold\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"bottom|right\"\r\n                    android:orientation=\"vertical\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:orientation=\"vertical\" />\r\n            </LinearLayout>\r\n\r\n            <me.sujanpoudel.wheelview.WheelView\r\n                android:id=\"@+id/wheelview\"\r\n                android:layout_width=\"290dp\"\r\n                android:layout_height=\"203dp\"\r\n                android:layout_gravity=\"center\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\"\r\n                app:wheelAnchorAngle=\"270\"\r\n                app:wheelAnimationDuration=\"500\"\r\n                app:wheelArcBackgroundColor=\"@color/colorSecondaryDark\"\r\n                app:wheelCenterIcon=\"@drawable/logo_without_background\"\r\n                app:wheelDividerStrokeWidth=\"1dp\"\r\n                app:wheelMode=\"ANIMATE_TO_ANCHOR\"\r\n                app:wheelSelectedArcBackgroundColor=\"@color/colorSecondary\"\r\n                app:wheelSelectedTextColor=\"@color/white\"\r\n                app:wheelStartAngle=\"315\"\r\n                app:wheelTextColor=\"@color/white\"\r\n                app:wheelTextSize=\"16sp\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_marginTop=\"10dp\"\r\n                android:orientation=\"horizontal\"\r\n                android:paddingLeft=\"20dp\">\r\n\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_marginLeft=\"1dp\"\r\n                    android:layout_marginRight=\"20dp\"\r\n                    android:background=\"@drawable/rectangle\"\r\n                    android:orientation=\"horizontal\">\r\n\r\n                    <LinearLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:layout_gravity=\"center\"\r\n                        android:layout_marginLeft=\"10dp\"\r\n                        android:layout_marginRight=\"15dp\"\r\n                        android:orientation=\"vertical\">\r\n\r\n                        <LinearLayout\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"40dp\"\r\n\r\n                            android:orientation=\"horizontal\">\r\n\r\n                            <TextView\r\n                                android:id=\"@+id/textViewinfo\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_gravity=\"center\"\r\n                                android:text=\"Pulsa el botón para editar:\"\r\n                                android:textColor=\"#000000\"\r\n                                android:textSize=\"16.7sp\"\r\n                                android:textStyle=\"normal\" />\r\n\r\n                            <Button\r\n                                android:id=\"@+id/btnedit\"\r\n                                android:layout_width=\"match_parent\"\r\n                                android:layout_marginTop=\"2dp\"\r\n                                android:layout_height=\"30dp\"\r\n                                android:background=\"@drawable/btn_scan\"\r\n                                android:layout_marginLeft=\"10dp\"\r\n                                android:text=\"Editar\"\r\n                                android:textColor=\"#FFFFFF\" />\r\n\r\n                        </LinearLayout>\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textView23\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"12dp\"\r\n                            android:text=\"Sección ocupada:\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n\r\n                        <LinearLayout\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:orientation=\"horizontal\">\r\n\r\n                            <CheckBox\r\n                                android:id=\"@+id/checkBoxSi\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_weight=\"1\"\r\n                                android:text=\"Si\" />\r\n\r\n                            <CheckBox\r\n                                android:id=\"@+id/checkBoxNo\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_weight=\"1\"\r\n                                android:checked=\"true\"\r\n                                android:clickable=\"false\"\r\n                                android:text=\"No\" />\r\n                        </LinearLayout>\r\n\r\n\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textView7\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"12dp\"\r\n                            android:text=\"Nombre de la especie:\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n\r\n                        <EditText\r\n                            android:id=\"@+id/editTextNobrep\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:background=\"@android:color/transparent\"\r\n                            android:maxLines=\"1\"\r\n                            android:paddingTop=\"5dp\"\r\n                            android:textColorHint=\"#9E9D9D\"\r\n                            android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                            android:textSize=\"15sp\"\r\n                            android:hint=\"Toca para añadir\"\r\n\r\n                            />\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textedit\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"22.3dp\"\r\n                            android:text=\"Hora de fin\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/editHour\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:background=\"@android:color/transparent\"\r\n                            android:ems=\"10\"\r\n                            android:text=\"Toca para añdir\"\r\n                            android:inputType=\"time\"\r\n                            android:maxLines=\"1\"\r\n                            android:paddingTop=\"5dp\"\r\n                            android:textColorHint=\"#333232\"\r\n                            android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                            android:textSize=\"15sp\" />\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textView11\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"22.3dp\"\r\n                            android:text=\"Fecha de fin\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n                        <TextView\r\n                            android:id=\"@+id/tvDate\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:background=\"@android:color/transparent\"\r\n                            android:ems=\"10\"\r\n                            android:text=\"Toca para añdir\"\r\n                            android:inputType=\"time\"\r\n                            android:editable=\"false\"\r\n                            android:maxLines=\"1\"\r\n                            android:paddingTop=\"5dp\"\r\n                            android:textColorHint=\"#333232\"\r\n                            android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                            android:textSize=\"15sp\" />\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:layout_marginBottom=\"20dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <Button\r\n\r\n                            android:id=\"@+id/btn_save\"\r\n                            android:layout_width=\"151dp\"\r\n                            android:layout_height=\"49dp\"\r\n                            android:layout_gravity=\"center\"\r\n                            android:background=\"@drawable/btn_scan\"\r\n                            android:onClick=\"saveNote\"\r\n                            android:text=\"Guardar cambios\"\r\n                            android:textColor=\"#FFFFFF\"\r\n                            android:visibility=\"gone\">\r\n\r\n                        </Button>\r\n\r\n                        <RelativeLayout\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:paddingTop=\"5dp\">\r\n\r\n                        </RelativeLayout>\r\n\r\n\r\n                    </LinearLayout>\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:id=\"@+id/btn_registMachine\"\r\n                android:layout_width=\"90dp\"\r\n                android:layout_height=\"41dp\"\r\n                android:layout_gravity=\"right\"\r\n                android:layout_marginTop=\"40.3dp\"\r\n                android:layout_marginBottom=\"16.7dp\"\r\n                android:background=\"@drawable/btn_login\"\r\n                android:foregroundGravity=\"right\"\r\n                android:gravity=\"center\"\r\n                android:orientation=\"vertical\"\r\n\r\n                android:visibility=\"gone\">\r\n\r\n\r\n            </LinearLayout>\r\n\r\n\r\n        </LinearLayout>\r\n\r\n        <androidx.constraintlayout.widget.ConstraintLayout\r\n            android:id=\"@+id/constraitR\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            tools:visibility=\"gone\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/imageprevius\"\r\n                android:layout_width=\"400dp\"\r\n                android:layout_height=\"731dp\"\r\n                android:alpha=\"0.4\"\r\n                app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\"\r\n                app:srcCompat=\"@color/black\"\r\n                tools:visibility=\"gone\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/txtInfoD\"\r\n                android:layout_width=\"264dp\"\r\n                android:layout_height=\"81dp\"\r\n                android:background=\"@color/white\"\r\n                android:paddingTop=\"10dp\"\r\n                android:text=\"Toca una casilla para visualizar los datos\"\r\n                android:textAlignment=\"center\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"20sp\"\r\n                app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"@+id/imageprevius\"\r\n                tools:visibility=\"gone\" />\r\n        </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n\r\n    </RelativeLayout>\r\n\r\n\r\n</ScrollView>\r\n\r\n\r\n\r\n\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_planta1.xml	(revision 20efcc6a82f57e2d6e00bfef130fc7837cadecbf)
-+++ app/src/main/res/layout/activity_planta1.xml	(date 1611144863341)
-@@ -204,7 +204,7 @@
-                             android:layout_width="wrap_content"
-                             android:layout_height="wrap_content"
-                             android:layout_marginTop="22.3dp"
--                            android:text="Hora de fin"
-+                            android:text="Programar una alarma"
-                             android:textColor="#9E9D9D" />
- 
-                         <TextView
-@@ -213,8 +213,7 @@
-                             android:layout_height="wrap_content"
-                             android:background="@android:color/transparent"
-                             android:ems="10"
--                            android:text="Toca para añdir"
--                            android:inputType="time"
-+                            android:text="Toca para añadir"
-                             android:maxLines="1"
-                             android:paddingTop="5dp"
-                             android:textColorHint="#333232"
-@@ -232,22 +231,21 @@
-                             android:layout_width="wrap_content"
-                             android:layout_height="wrap_content"
-                             android:layout_marginTop="22.3dp"
--                            android:text="Fecha de fin"
-+                            android:text="Ubicación de la planta"
-                             android:textColor="#9E9D9D" />
-                         <TextView
--                            android:id="@+id/tvDate"
-+                            android:id="@+id/txtStation"
-                             android:layout_width="match_parent"
-                             android:layout_height="wrap_content"
-                             android:background="@android:color/transparent"
-                             android:ems="10"
--                            android:text="Toca para añdir"
--                            android:inputType="time"
-+                            android:text="Esta planta se encuentra en la estación número: "
-                             android:editable="false"
-                             android:maxLines="1"
-                             android:paddingTop="5dp"
-                             android:textColorHint="#333232"
-                             android:textCursorDrawable="@drawable/cursor_color"
--                            android:textSize="15sp" />
-+                            android:textSize="13sp" />
- 
-                         <View
-                             android:layout_width="match_parent"
-Index: app/src/main/res/layout/fragment_profile_foro.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.Foro.main.Profile.ProfileForoFragment\">\r\n\r\n    <!-- TODO: Update blank fragment layout -->\r\n    <TextView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:gravity=\"center\"\r\n        android:text=\"profile\" />\r\n\r\n</FrameLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_profile_foro.xml	(revision 20efcc6a82f57e2d6e00bfef130fc7837cadecbf)
-+++ app/src/main/res/layout/fragment_profile_foro.xml	(date 1611145216058)
-@@ -1,15 +1,144 @@
- <?xml version="1.0" encoding="utf-8"?>
--<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
--    xmlns:tools="http://schemas.android.com/tools"
-+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
-+
-     android:layout_width="match_parent"
-     android:layout_height="match_parent"
--    tools:context=".ui.Foro.main.Profile.ProfileForoFragment">
-+    android:background="#EFE9E9"
-+    android:orientation="vertical">
-+
-+    <RelativeLayout
-+        android:layout_width="match_parent"
-+        android:layout_height="405dp">
- 
--    <!-- TODO: Update blank fragment layout -->
--    <TextView
--        android:layout_width="match_parent"
--        android:layout_height="match_parent"
--        android:gravity="center"
--        android:text="profile" />
-+        <LinearLayout
-+            android:layout_width="match_parent"
-+            android:layout_height="350dp"
-+            android:background="@color/colorSecondary"
-+            android:orientation="vertical">
-+
-+            <ImageView
-+                android:layout_width="150dp"
-+                android:layout_height="150dp"
-+                android:layout_gravity="center_horizontal"
-+                android:layout_marginTop="45dp"
-+                android:src="@drawable/rectangle" />
-+
-+            <TextView
-+                android:layout_width="wrap_content"
-+                android:layout_height="wrap_content"
-+                android:layout_gravity="center_horizontal"
-+                android:layout_marginTop="10dp"
-+                android:text="Angle Triangle"
-+                android:textColor="#fff"
-+                android:textSize="21sp"
-+                android:textStyle="bold" />
-+        </LinearLayout>
-+
-+        <androidx.cardview.widget.CardView
-+            android:layout_width="400dp"
-+            android:layout_height="120dp"
-+            android:layout_centerHorizontal="true"
-+            android:layout_marginTop="275dp">
-+
-+            <LinearLayout
-+                android:layout_width="match_parent"
-+                android:layout_height="match_parent"
-+                android:orientation="horizontal"
-+                android:weightSum="2">
-+
-+                <LinearLayout
-+                    android:layout_width="0dp"
-+                    android:layout_height="match_parent"
-+                    android:layout_weight="1"
-+                    android:gravity="center"
-+                    android:orientation="vertical">
-+
-+                    <TextView
-+                        android:layout_width="wrap_content"
-+                        android:layout_height="wrap_content"
-+                        android:text="Posts"
-+                        android:textSize="20sp" />
-+
-+                    <TextView
-+                        android:layout_width="wrap_content"
-+                        android:layout_height="wrap_content"
-+                        android:paddingTop="10dp"
-+                        android:text="125"
-+                        android:textColor="@color/green"
-+                        android:textSize="20sp"
-+                        android:textStyle="bold" />
-+                </LinearLayout>
-+
-+                <LinearLayout
-+                    android:layout_width="0dp"
-+                    android:layout_height="match_parent"
-+                    android:layout_weight="1"
-+                    android:gravity="center"
-+                    android:orientation="vertical"
-+                    android:visibility="gone">
-+
-+                    <TextView
-+                        android:layout_width="wrap_content"
-+                        android:layout_height="wrap_content"
-+                        android:text="Followers"
-+                        android:textSize="20sp"
-+                        android:visibility="gone" />
-+
-+                    <TextView
-+                        android:layout_width="wrap_content"
-+                        android:layout_height="wrap_content"
-+                        android:paddingTop="10dp"
-+                        android:text="1205"
-+                        android:textColor="@color/green"
-+                        android:textSize="20sp"
-+                        android:textStyle="bold"
-+                        android:visibility="gone" />
-+                </LinearLayout>
-+
-+                <LinearLayout
-+                    android:layout_width="0dp"
-+                    android:layout_height="match_parent"
-+                    android:layout_weight="1"
-+                    android:gravity="center"
-+                    android:orientation="vertical">
-+
-+                    <TextView
-+                        android:layout_width="wrap_content"
-+                        android:layout_height="wrap_content"
-+                        android:text="Following"
-+                        android:textSize="20sp" />
-+
-+                    <TextView
-+                        android:layout_width="wrap_content"
-+                        android:layout_height="wrap_content"
-+                        android:paddingTop="10dp"
-+                        android:text="360"
-+                        android:textColor="@color/green"
-+                        android:textSize="20sp"
-+                        android:textStyle="bold" />
-+                </LinearLayout>
-+            </LinearLayout>
-+        </androidx.cardview.widget.CardView>
-+    </RelativeLayout>
-+
-+    <LinearLayout
-+        android:layout_width="wrap_content"
-+        android:layout_height="wrap_content"
-+        android:layout_gravity="center"
-+        android:layout_marginLeft="20dp"
-+        android:layout_marginRight="20dp"
-+        android:layout_marginTop="45dp"
-+        android:orientation="vertical">
-+
-+        <TextView
-+            android:id="@+id/textView35"
-+            android:layout_width="379dp"
-+            android:layout_height="100dp"
-+            android:background="@color/white"
-+            android:hint="Descripción:"
-+            android:textSize="20sp"
-+            android:padding="10dp"
-+          />
-+    </LinearLayout>
- 
--</FrameLayout>
-\ No newline at end of file
-+</LinearLayout>
-\ No newline at end of file
-Index: app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.list_machine;\r\n\r\nimport android.content.Intent;\r\nimport android.media.Image;\r\nimport android.os.Bundle;\r\nimport android.os.Parcelable;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.ItemTouchHelper;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.logmail.RegisterActivity;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerAdapter;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\nimport com.google.android.material.bottomsheet.BottomSheetDialog;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.Query;\r\n\r\nimport java.text.BreakIterator;\r\nimport java.util.Map;\r\n\r\npublic class MainActivityMachineList extends AppCompatActivity {\r\n    private FirebaseFirestore firebaseFirestore;\r\n    private RecyclerView mFirestoreList;\r\n    private Adapter adapter;\r\n    private FirebaseAuth firebaseAuth;\r\n    Button addBtn;//boton añadir nueva maquina\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_list_machines);\r\n        firebaseFirestore=FirebaseFirestore.getInstance();\r\n        mFirestoreList=findViewById(R.id.firestore_list);\r\n        firebaseAuth=FirebaseAuth.getInstance();\r\n        String uid=firebaseAuth.getUid();\r\n        //Query\r\n        Query query=firebaseFirestore\r\n                .collection(\"Machine\")\r\n               .whereEqualTo(\"userUID\", uid)\r\n                .orderBy(\"priority\",Query.Direction.ASCENDING);\r\n        //RecyclerView\r\n        FirestoreRecyclerOptions<MachineModel> options=new FirestoreRecyclerOptions.Builder<MachineModel>()\r\n                .setQuery(query, MachineModel.class)\r\n                .build();\r\n        //View Holder\r\n        adapter= new Adapter(options);\r\n        mFirestoreList.setHasFixedSize(true);\r\n        mFirestoreList.setLayoutManager(new LinearLayoutManager(this));\r\n        mFirestoreList.setAdapter(adapter);\r\n\r\n        new ItemTouchHelper(new ItemTouchHelper.SimpleCallback(0,\r\n                ItemTouchHelper.LEFT | ItemTouchHelper.RIGHT) {\r\n            @Override\r\n            public boolean onMove(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder, RecyclerView.ViewHolder target) {\r\n                return false;\r\n            }\r\n            @Override\r\n            public void onSwiped(RecyclerView.ViewHolder viewHolder, int direction) {\r\n                Toast.makeText(getApplicationContext(), \"Maquina eliminada con éxito\", Toast.LENGTH_SHORT).show();\r\n                adapter.deleteItem(viewHolder.getAdapterPosition());\r\n            }\r\n        }).attachToRecyclerView(mFirestoreList);\r\n\r\n        adapter.setOnItemClickListener(new Adapter.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(DocumentSnapshot documentSnapshot, int position) {\r\n                //documentSnapshot.getData() -> devuelve all que tiene la maquina en firebase\r\n                MachineModel machine = documentSnapshot.toObject(MachineModel.class);\r\n                final String id = documentSnapshot.getId();\r\n                final String path = documentSnapshot.getString(\"description\"); //devuelve ruta en firebase Machine\\madara\r\n                final String name = documentSnapshot.getString(\"name\");\r\n                final String identif = documentSnapshot.getId();\r\n                //botttom sheet\r\n                final BottomSheetDialog bottomSheetDialog=new BottomSheetDialog(MainActivityMachineList.this);\r\n                bottomSheetDialog.setContentView(R.layout.machine_bottom_sheet);\r\n                Button btnenter=bottomSheetDialog.findViewById(R.id.enterMachineButton);\r\n                Button btnmodify=bottomSheetDialog.findViewById(R.id.madifyMachineButton);\r\n                Button btncancel=bottomSheetDialog.findViewById(R.id.cancelMachineButton);\r\n                btnenter.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        Intent intent = new Intent(getBaseContext(), MainActivity.class);\r\n                        intent.putExtra(\"machine\", id);\r\n                        intent.putExtra(\"description\", path);\r\n                        startActivity(intent);\r\n                    }\r\n                });\r\n                btnmodify.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        //poner aca Intent para acceder al layout de modificar maquina\r\n                        //hay que pasarle un intent con extra como he hecho en el onClick de arriba\r\n                        //lo que necesitas para modificar es la variable id\r\n                        //encuentras en firebase la maquina con el id y haces la magia de modificar etc..\r\n                        //lo de maquina a favoritos es facil , si es 1 es favoirto si es 2 no lo es.\r\n                        //ejemplo\r\n                        Intent intent = new Intent(getBaseContext(), ModifyMachine.class);\r\n                        intent.putExtra(\"maq\", name);\r\n                        intent.putExtra(\"identificator\", identif);\r\n                        startActivity(intent);\r\n                    }\r\n                });\r\n                btncancel.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        bottomSheetDialog.cancel();\r\n                    }\r\n                });\r\n                bottomSheetDialog.show();\r\n\r\n\r\n            }\r\n        });\r\n\r\n        FloatingActionButton addbtn = (FloatingActionButton) findViewById(R.id.button_add_machine);\r\n        addbtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent (getApplicationContext(), AddMachine.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        adapter.stopListening();\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        adapter.startListening();\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(revision 20efcc6a82f57e2d6e00bfef130fc7837cadecbf)
-+++ app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(date 1611163185357)
-@@ -78,7 +78,7 @@
-         adapter.setOnItemClickListener(new Adapter.OnItemClickListener() {
-             @Override
-             public void onItemClick(DocumentSnapshot documentSnapshot, int position) {
--                //documentSnapshot.getData() -> devuelve all que tiene la maquina en firebase
-+                /*documentSnapshot.getData();*/ //-> devuelve all que tiene la maquina en firebase
-                 MachineModel machine = documentSnapshot.toObject(MachineModel.class);
-                 final String id = documentSnapshot.getId();
-                 final String path = documentSnapshot.getString("description"); //devuelve ruta en firebase Machine\madara
-Index: app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.MachineControl;\r\n\r\nimport android.app.AlarmManager;\r\nimport android.app.DatePickerDialog;\r\nimport android.app.FragmentTransaction;\r\nimport android.app.TimePickerDialog;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.graphics.drawable.ColorDrawable;\r\nimport android.os.Bundle;\r\nimport android.os.CountDownTimer;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.CheckBox;\r\nimport android.widget.DatePicker;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.TimePicker;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.constraintlayout.widget.ConstraintLayout;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.dashboard.DashboardFragment;\r\nimport com.example.infinitycrop.ui.dashboard.GeneralFragment;\r\nimport com.example.infinitycrop.ui.logmail.LoginActivity;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.google.firebase.firestore.ListenerRegistration;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\nimport java.text.ParseException;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.Calendar;\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\nimport kotlin.Unit;\r\nimport kotlin.jvm.functions.Function1;\r\nimport me.sujanpoudel.wheelview.WheelView;\r\n\r\npublic class planta1 extends AppCompatActivity {\r\n    private List<String> nombres;\r\n    private List<String> estado;\r\n    //Aviso al entrar\r\n    private ConstraintLayout fondoR;\r\n    private ImageView imgr,goBack;\r\n    private TextView textR;\r\n    //\r\n\r\n    private int piso = 1;\r\n    String one = String.valueOf(piso);\r\n    private int stated = 1;\r\n    String state = String.valueOf(stated);\r\n\r\n\r\n    private CheckBox checkYes, checkNo;\r\n    private Button editInfo, saveChanges;\r\n    private TextView mDisplayDate,mDisplayHour,infoTitle;\r\n    private EditText nameplant;\r\n    private FirebaseFirestore db;\r\n\r\n    private String idDocument;\r\n    private String id;\r\n\r\n\r\n\r\n    //Reloj\r\n    int t2Hour, t2Minute;\r\n    private DatePickerDialog.OnDateSetListener mDateSetListener;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_planta1);\r\n\r\n        //Aviso al entrar\r\n        fondoR = findViewById(R.id.constraitR);\r\n        imgr = findViewById(R.id.imageprevius);\r\n        textR = findViewById(R.id.txtInfoD);\r\n        CountDownTimer countDownTimer = new CountDownTimer(3000, 1000) {//Se pone la cuenta atras para que no se superponga con la animación\r\n            public void onTick(long millisUntilFinished) {\r\n\r\n            }\r\n\r\n            public void onFinish() {\r\n\r\n                fondoR.setVisibility(View.GONE);\r\n                imgr.setVisibility(View.GONE);\r\n                textR.setVisibility(View.GONE);\r\n\r\n            }\r\n        }.start();\r\n        //boton para volver\r\n        goBack= findViewById(R.id.backDashboard);\r\n        goBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n               finish();\r\n            }\r\n        });\r\n\r\n        db=FirebaseFirestore.getInstance();\r\n        //bungle get extra\r\n        Bundle extras = getIntent().getExtras();\r\n        id = extras.getString(\"idMachine\");\r\n\r\n        //arrays\r\n        nombres=new ArrayList<>();\r\n        estado=new ArrayList<>();\r\n        //firestore\r\n        db.collection(\"Mediciones planta 1\").document(id).collection(\"DatosPiso\")\r\n                .addSnapshotListener(new EventListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable QuerySnapshot snapshots,\r\n                                        @Nullable FirebaseFirestoreException e) {\r\n                        if (e != null) {\r\n                            return;\r\n                        }\r\n                        nombres.clear();\r\n                        for (DocumentSnapshot doc : snapshots) {\r\n                                nombres.add(doc.getString(\"name\"));\r\n                                estado.add(doc.getId());\r\n                        }\r\n                       /* Toast.makeText(getApplicationContext(),nombres.toString(), Toast.LENGTH_LONG).show();*/\r\n\r\n\r\n\r\n                        final WheelView wheelView = (WheelView) findViewById(R.id.wheelview);\r\n                        wheelView.setTitles(nombres);\r\n\r\n                        wheelView.setSelectListener(new Function1<Integer, Unit>() {\r\n                            @Override\r\n                            public Unit invoke(Integer integer) {\r\n                                showToast(integer);\r\n                                return Unit.INSTANCE;\r\n                            }\r\n                            private final  void showToast(Integer index) {\r\n                               // Toast.makeText(planta1.this,\"\"+wheelView.getTitles().get(index),Toast.LENGTH_SHORT).show();\r\n                                idDocument=estado.get(index);\r\n                                Toast.makeText(planta1.this,\"\"+idDocument,Toast.LENGTH_SHORT).show();\r\n                                itenInfo(idDocument);\r\n\r\n\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                });\r\n\r\n\r\n\r\n\r\n\r\n        //Nombre de la planta\r\n        nameplant = (EditText)findViewById(R.id.editTextNobrep);\r\n        nameplant.setEnabled(false);\r\n        //Checkboxes\r\n        checkYes=(CheckBox)findViewById(R.id.checkBoxSi);\r\n        checkYes.setKeyListener(null);\r\n        checkNo=(CheckBox)findViewById(R.id.checkBoxNo);\r\n        checkNo.setKeyListener(null);\r\n\r\n        //Boton guardar cambios\r\n        saveChanges = (Button)findViewById(R.id.btn_save);\r\n        saveChanges.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                saveNote(v);\r\n                editInfo.setVisibility(View.VISIBLE);\r\n                saveChanges.setVisibility(View.GONE);\r\n                mDisplayDate.setEnabled(false);\r\n                mDisplayHour.setEnabled(false);\r\n                nameplant.setEnabled(false);\r\n                infoTitle.setText(\"Pulsa el botón para editar:\");\r\n\r\n\r\n\r\n\r\n            }\r\n        });\r\n\r\n        //Boton editar informacion\r\n        editInfo = (Button) findViewById(R.id.btnedit);\r\n        editInfo.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                saveChanges.setVisibility(View.VISIBLE);\r\n                editInfo.setVisibility(View.GONE);\r\n                mDisplayDate.setEnabled(true);\r\n                mDisplayHour.setEnabled(true);\r\n                nameplant.setEnabled(true);\r\n                infoTitle.setText(\"Información completa:\");\r\n\r\n\r\n            }\r\n        });\r\n        infoTitle = (TextView) findViewById(R.id.textViewinfo);\r\n        //HORA\r\n        mDisplayHour =(TextView) findViewById(R.id.editHour);\r\n        mDisplayHour.setEnabled(false);\r\n        mDisplayHour.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                TimePickerDialog timePickerDialog = new TimePickerDialog(\r\n                        planta1.this, android.R.style.Theme_Holo_Light_Dialog_MinWidth, new TimePickerDialog.OnTimeSetListener() {\r\n                    @Override\r\n                    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {\r\n                        Calendar c = Calendar.getInstance();\r\n                        t2Hour = hourOfDay;\r\n                        t2Minute = minute;\r\n                        String time = t2Hour + \":\" + t2Minute;\r\n                        SimpleDateFormat f24Hours = new SimpleDateFormat(\"HH:mm\");\r\n                        try {\r\n                            Date date = f24Hours.parse(time);\r\n                            SimpleDateFormat f12Hours = new SimpleDateFormat(\"hh:mm aa\");\r\n                            mDisplayHour.setText(f12Hours.format(date));\r\n                        } catch (ParseException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                        c.set(Calendar.HOUR_OF_DAY,hourOfDay);\r\n                        c.set(Calendar.MINUTE,minute);\r\n                        c.set(Calendar.SECOND,0);\r\n                        startAlarm(c);\r\n                    }\r\n                },12,0,false\r\n                );\r\n                timePickerDialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n                timePickerDialog.updateTime(t2Hour,t2Minute);\r\n                timePickerDialog.show();\r\n\r\n            }\r\n        });\r\n\r\n\r\n\r\n        //CALENDARIO\r\n        mDisplayDate = (TextView) findViewById(R.id.tvDate);\r\n        mDisplayDate.setEnabled(false);\r\n        mDisplayDate.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Calendar cal = Calendar.getInstance();\r\n                int year = cal.get(Calendar.YEAR);\r\n                int month = cal.get(Calendar.MONTH);\r\n                int day = cal.get(Calendar.DAY_OF_MONTH);\r\n\r\n                DatePickerDialog dialog = new DatePickerDialog(planta1.this,android.R.style.Theme_Holo_Dialog_MinWidth, mDateSetListener,year,month,day);\r\n                dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n                dialog.show();\r\n            }\r\n\r\n        });\r\n        mDateSetListener = new DatePickerDialog.OnDateSetListener() {\r\n            @Override\r\n            public void onDateSet(DatePicker datePicker, int year, int month, int day) {\r\n                month = month+1;\r\n                String date = day +\"/\" + month +\"/\"+ year;\r\n                mDisplayDate.setText(date);\r\n            }\r\n        };\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n\r\n\r\n    }\r\n    private void startAlarm(Calendar c){\r\n        AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);\r\n\r\n    }\r\n    public void saveNote(View v){\r\n        String cola = idDocument;\r\n        String nombre = nameplant.getText().toString();\r\n        String hora = mDisplayHour.getText().toString();\r\n        String dia = mDisplayDate.getText().toString();\r\n        String piso = one;\r\n\r\n        Map<String, Object> note = new HashMap<>();\r\n        note.put(\"name\",nombre);\r\n        note.put(\"fecha\",dia);\r\n        note.put(\"hora\",hora);\r\n        note.put(\"piso\",piso);\r\n\r\n        db.collection(\"Mediciones planta 1\").document(id).collection(\"DatosPiso\").document(cola).update(note).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n            @Override\r\n            public void onSuccess(Void aVoid) {\r\n            Toast.makeText(planta1.this,\"va bien\",Toast.LENGTH_SHORT).show();\r\n            }\r\n        }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Toast.makeText(planta1.this,\"va mal\",Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    private void itenInfo(String uiDoc){\r\n        //hacer consulta a ese documento con uiDOc y sacar su info\r\n        //luego set Text a all\r\n        db.collection(\"Mediciones planta 1\").document(id).collection(\"DatosPiso\").document(uiDoc).get()\r\n                .addOnSuccessListener(new OnSuccessListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onSuccess(DocumentSnapshot documentSnapshot) {\r\n                        if(documentSnapshot.exists()){\r\n                            String nombre = documentSnapshot.getString(\"name\");\r\n                            String fecha = documentSnapshot.getString(\"fecha\");\r\n                            String hora = documentSnapshot.getString(\"hora\");\r\n\r\n                           // Map<String,Object> note = documentSnapshot.getData();\r\n                            nameplant.setText(nombre);\r\n                            mDisplayHour.setText(hora);\r\n                            mDisplayDate.setText(fecha);\r\n\r\n                        }else{\r\n                            Toast.makeText(planta1.this,\"Document does exist\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }\r\n                }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Toast.makeText(planta1.this,\"va mal\",Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n                /*.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable DocumentSnapshot value, @Nullable FirebaseFirestoreException error) {\r\n\r\n                    }\r\n                });*/\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java	(revision 20efcc6a82f57e2d6e00bfef130fc7837cadecbf)
-+++ app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java	(date 1611144863364)
-@@ -8,8 +8,10 @@
- import android.content.Intent;
- import android.graphics.Color;
- import android.graphics.drawable.ColorDrawable;
-+import android.os.Build;
- import android.os.Bundle;
- import android.os.CountDownTimer;
-+import android.provider.AlarmClock;
- import android.view.View;
- import android.widget.Button;
- import android.widget.CheckBox;
-@@ -23,6 +25,7 @@
- 
- import androidx.annotation.NonNull;
- import androidx.annotation.Nullable;
-+import androidx.annotation.RequiresApi;
- import androidx.appcompat.app.AppCompatActivity;
- import androidx.constraintlayout.widget.ConstraintLayout;
- import androidx.fragment.app.Fragment;
-@@ -41,14 +44,18 @@
- import com.google.firebase.firestore.ListenerRegistration;
- import com.google.firebase.firestore.QuerySnapshot;
- 
-+import java.sql.Time;
- import java.text.ParseException;
- import java.text.SimpleDateFormat;
-+import java.time.LocalDate;
-+import java.time.LocalTime;
- import java.util.ArrayList;
- import java.util.Arrays;
- import java.util.Calendar;
- import java.util.Date;
- import java.util.HashMap;
- import java.util.List;
-+import java.util.Locale;
- import java.util.Map;
- 
- import kotlin.Unit;
-@@ -72,7 +79,7 @@
- 
-     private CheckBox checkYes, checkNo;
-     private Button editInfo, saveChanges;
--    private TextView mDisplayDate,mDisplayHour,infoTitle;
-+    private TextView mDisplayHour,infoTitle,mStation;
-     private EditText nameplant;
-     private FirebaseFirestore db;
- 
-@@ -137,6 +144,8 @@
-                                 nombres.add(doc.getString("name"));
-                                 estado.add(doc.getId());
-                         }
-+
-+
-                        /* Toast.makeText(getApplicationContext(),nombres.toString(), Toast.LENGTH_LONG).show();*/
- 
- 
-@@ -170,6 +179,9 @@
-         //Nombre de la planta
-         nameplant = (EditText)findViewById(R.id.editTextNobrep);
-         nameplant.setEnabled(false);
-+        mDisplayHour=(TextView) findViewById(R.id.editHour);
-+        mDisplayHour.setEnabled(false);
-+        mStation=(TextView)findViewById(R.id.txtStation);
-         //Checkboxes
-         checkYes=(CheckBox)findViewById(R.id.checkBoxSi);
-         checkYes.setKeyListener(null);
-@@ -184,7 +196,6 @@
-                 saveNote(v);
-                 editInfo.setVisibility(View.VISIBLE);
-                 saveChanges.setVisibility(View.GONE);
--                mDisplayDate.setEnabled(false);
-                 mDisplayHour.setEnabled(false);
-                 nameplant.setEnabled(false);
-                 infoTitle.setText("Pulsa el botón para editar:");
-@@ -203,54 +214,32 @@
- 
-                 saveChanges.setVisibility(View.VISIBLE);
-                 editInfo.setVisibility(View.GONE);
--                mDisplayDate.setEnabled(true);
-                 mDisplayHour.setEnabled(true);
-                 nameplant.setEnabled(true);
-                 infoTitle.setText("Información completa:");
- 
- 
-+
-             }
-         });
-         infoTitle = (TextView) findViewById(R.id.textViewinfo);
-         //HORA
--        mDisplayHour =(TextView) findViewById(R.id.editHour);
--        mDisplayHour.setEnabled(false);
-+
-         mDisplayHour.setOnClickListener(new View.OnClickListener() {
-             @Override
-             public void onClick(View v) {
--                TimePickerDialog timePickerDialog = new TimePickerDialog(
--                        planta1.this, android.R.style.Theme_Holo_Light_Dialog_MinWidth, new TimePickerDialog.OnTimeSetListener() {
--                    @Override
--                    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
--                        Calendar c = Calendar.getInstance();
--                        t2Hour = hourOfDay;
--                        t2Minute = minute;
--                        String time = t2Hour + ":" + t2Minute;
--                        SimpleDateFormat f24Hours = new SimpleDateFormat("HH:mm");
--                        try {
--                            Date date = f24Hours.parse(time);
--                            SimpleDateFormat f12Hours = new SimpleDateFormat("hh:mm aa");
--                            mDisplayHour.setText(f12Hours.format(date));
--                        } catch (ParseException e) {
--                            e.printStackTrace();
--                        }
--                        c.set(Calendar.HOUR_OF_DAY,hourOfDay);
--                        c.set(Calendar.MINUTE,minute);
--                        c.set(Calendar.SECOND,0);
--                        startAlarm(c);
--                    }
--                },12,0,false
--                );
--                timePickerDialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));
--                timePickerDialog.updateTime(t2Hour,t2Minute);
--                timePickerDialog.show();
-+                Intent intent = new Intent(AlarmClock.ACTION_SET_ALARM);
-+                if(intent.resolveActivity(getPackageManager())!=null){
-+                    startActivity(intent);
-+                }
- 
--            }
-+        }
-         });
- 
- 
- 
--        //CALENDARIO
-+
-+        /*//CALENDARIO
-         mDisplayDate = (TextView) findViewById(R.id.tvDate);
-         mDisplayDate.setEnabled(false);
-         mDisplayDate.setOnClickListener(new View.OnClickListener() {
-@@ -275,7 +264,7 @@
-                 mDisplayDate.setText(date);
-             }
-         };
--
-+            */
-     }
- 
-     @Override
-@@ -284,21 +273,25 @@
- 
- 
-     }
--    private void startAlarm(Calendar c){
--        AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
--
--    }
-+    /*public void establecerAlarma(String mensaje,int dias,int hora,int minutos){
-+        Intent intent = new Intent(AlarmClock.ACTION_SET_ALARM)
-+                .putExtra(AlarmClock.EXTRA_DAYS,dias)
-+                .putExtra(AlarmClock.EXTRA_MESSAGE,mensaje)
-+                .putExtra(AlarmClock.EXTRA_HOUR,hora)
-+                .putExtra(AlarmClock.EXTRA_MINUTES,minutos);
-+        if(intent.resolveActivity(getPackageManager())!=null){
-+            startActivity(intent);
-+        }
-+    }*/
-+
-     public void saveNote(View v){
-         String cola = idDocument;
-         String nombre = nameplant.getText().toString();
--        String hora = mDisplayHour.getText().toString();
--        String dia = mDisplayDate.getText().toString();
-+
-         String piso = one;
- 
-         Map<String, Object> note = new HashMap<>();
-         note.put("name",nombre);
--        note.put("fecha",dia);
--        note.put("hora",hora);
-         note.put("piso",piso);
- 
-         db.collection("Mediciones planta 1").document(id).collection("DatosPiso").document(cola).update(note).addOnSuccessListener(new OnSuccessListener<Void>() {
-@@ -325,13 +318,26 @@
-                     public void onSuccess(DocumentSnapshot documentSnapshot) {
-                         if(documentSnapshot.exists()){
-                             String nombre = documentSnapshot.getString("name");
--                            String fecha = documentSnapshot.getString("fecha");
--                            String hora = documentSnapshot.getString("hora");
-+                            String estacion = documentSnapshot.getString("estacion");
-+                            int resultado =documentSnapshot.getLong("estado").intValue();
-+                            if(resultado==1){
-+                                checkYes.isSelected();
-+                                checkYes.setChecked(true);
-+                                checkYes.isChecked();
-+                                checkNo.setChecked(false);
-+                            }else{
-+                                checkNo.isSelected();
-+                                checkNo.setChecked(true);
-+                                checkNo.isChecked();
-+                                checkYes.setChecked(false);
-+                            }
-+
- 
-                            // Map<String,Object> note = documentSnapshot.getData();
-                             nameplant.setText(nombre);
--                            mDisplayHour.setText(hora);
--                            mDisplayDate.setText(fecha);
-+                            mStation.setText(estacion);
-+
-+
- 
-                         }else{
-                             Toast.makeText(planta1.this,"Document does exist",Toast.LENGTH_SHORT).show();
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_13_01_2021_1_20_[Default_Changelist]/shelved.patch
-===================================================================
---- .idea/shelf/Uncommitted_changes_before_Update_at_13_01_2021_1_20_[Default_Changelist]/shelved.patch	(revision 20efcc6a82f57e2d6e00bfef130fc7837cadecbf)
-+++ .idea/shelf/Uncommitted_changes_before_Update_at_13_01_2021_1_20_[Default_Changelist]/shelved.patch	(revision 20efcc6a82f57e2d6e00bfef130fc7837cadecbf)
-@@ -1,3000 +0,0 @@
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44__Default_Changelist_.xml
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_28_12_2020_17_44_[Default_Changelist]" date="1609173893621" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44_[Default_Changelist]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 28/12/2020 17:44 [Default Changelist]" />
---</changelist>
--\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44_[Default_Changelist]/shelved.patch
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--@@ -1,1019 +0,0 @@
---Index: app/src/main/AndroidManifest.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    package=\"com.example.infinitycrop\">\n\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/>\n    <uses-permission android:name=\"android.permission.INTERNET\"/>\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" />\n    <!--Permisos Qr-->\n    <uses-permission android:name=\"android.permission.CAMERA\"/>\n    <uses-feature android:name=\"android.hardware.camera\"></uses-feature>\n    <uses-feature android:name=\"android.hardware.camera.autofocus\"></uses-feature>\n\n    <application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher\"\n        android:theme=\"@style/AppThemeHome\"\n        >\n\n        <activity android:name=\".MainActivity\" android:theme=\"@style/SplashTheme\">\n        </activity>\n\n        <activity android:name=\"com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity\">\n            <intent-filter>\n                <action android:name=\"android.intent.action.MAIN\" />\n                <category android:name=\"android.intent.category.LAUNCHER\" />\n            </intent-filter>\n        </activity>\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\">\n\n        </activity>\n        <activity android:name=\".ui.profile.settings.HelpProfile\">\n\n        </activity>\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\"></activity>\n        <activity android:name=\".ui.list_machine.AddMachine\"></activity>\n        <activity android:name=\".ui.logmail.RegisterActivity\"></activity>\n        <activity android:name=\".ui.logmail.LoginActivity\"></activity>\n        <activity android:name=\".ui.list_machine.CaptureAct\"></activity>\n        <activity android:name=\"com.example.infinitycrop.ui.login.LogActivity\"></activity>\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\"></activity>\n\n\n\n\n        <meta-data android:name=\"com.google.android.geo.API_KEY\"\n            android:value=\"@string/google_maps_key\" />\n\n        <meta-data android:name=\"com.facebook.sdk.ApplicationId\"\n            tools:replace=\"android:value\"\n            android:value=\"@string/facebook_app_id\"/>\n        <meta-data\n            android:name=\"preloaded_fonts\"\n            android:resource=\"@array/preloaded_fonts\" />\n\n\n    </application>\n\n</manifest>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/AndroidManifest.xml	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ app/src/main/AndroidManifest.xml	(date 1607643785311)
---@@ -2,7 +2,8 @@
--- <manifest xmlns:android="http://schemas.android.com/apk/res/android"
---     xmlns:tools="http://schemas.android.com/tools"
---     package="com.example.infinitycrop">
----
---+    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
---+    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
---     <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
---     <uses-permission android:name="android.permission.INTERNET"/>
---     <uses-permission android:name="com.google.android.things.permission.MANAGE_INPUT_DRIVERS" />
---Index: .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25__Default_Changelist_.xml
---===================================================================
------ .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25__Default_Changelist_.xml	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25__Default_Changelist_.xml	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---@@ -1,4 +0,0 @@
----<changelist name="Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]" date="1607628338928" recycled="true" deleted="true">
----  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]/shelved.patch" />
----  <option name="DESCRIPTION" value="Uncommitted changes before Update at 10/12/2020 20:25 [Default Changelist]" />
----</changelist>
---\ No newline at end of file
---Index: .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]/shelved.patch
---===================================================================
------ .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]/shelved.patch	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]/shelved.patch	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---@@ -1,729 +0,0 @@
----Index: app/src/main/AndroidManifest.xml
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    package=\"com.example.infinitycrop\">\n\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/>\n    <uses-permission android:name=\"android.permission.INTERNET\"/>\n    <!--Permisos Qr-->\n    <uses-permission android:name=\"android.permission.CAMERA\"/>\n    <uses-feature android:name=\"android.hardware.camera\"></uses-feature>\n    <uses-feature android:name=\"android.hardware.camera.autofocus\"></uses-feature>\n\n    <application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher\"\n        android:theme=\"@style/AppThemeHome\"\n        >\n\n        <activity android:name=\".MainActivity\" android:theme=\"@style/SplashTheme\">\n        </activity>\n\n        <activity android:name=\"com.example.infinitycrop.ui.login.LogActivity\">\n            <intent-filter>\n                <action android:name=\"android.intent.action.MAIN\" />\n                <category android:name=\"android.intent.category.LAUNCHER\" />\n            </intent-filter>\n        </activity>\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\">\n\n        </activity>\n        <activity android:name=\".ui.profile.settings.HelpProfile\">\n\n        </activity>\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\"></activity>\n        <activity android:name=\".ui.list_machine.AddMachine\"></activity>\n        <activity android:name=\".ui.logmail.RegisterActivity\"></activity>\n        <activity android:name=\".ui.logmail.LoginActivity\"></activity>\n        <activity android:name=\".ui.list_machine.CaptureAct\"></activity>\n\n\n\n\n        <meta-data android:name=\"com.google.android.geo.API_KEY\"\n            android:value=\"@string/google_maps_key\" />\n\n        <meta-data android:name=\"com.facebook.sdk.ApplicationId\"\n            tools:replace=\"android:value\"\n            android:value=\"@string/facebook_app_id\"/>\n\n\n    </application>\n\n</manifest>
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/AndroidManifest.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/AndroidManifest.xml	(date 1607539967252)
----@@ -5,6 +5,8 @@
---- 
----     <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
----     <uses-permission android:name="android.permission.INTERNET"/>
----+    <uses-permission android:name="com.google.android.things.permission.MANAGE_INPUT_DRIVERS" />
----+    <uses-permission android:name="com.google.android.things.permission.USE_PERIPHERAL_IO" />
----     <!--Permisos Qr-->
----     <uses-permission android:name="android.permission.CAMERA"/>
----     <uses-feature android:name="android.hardware.camera"></uses-feature>
----Index: app/src/main/res/layout/fragment_graphic.xml
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.graphic.GraphicFragment\">\r\n\r\n    <!-- TODO: Update blank fragment layout -->\r\n    <TextView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_centerInParent=\"true\"\r\n        android:textSize=\"50dp\"\r\n        android:text=\"Graphic fragment\" />\r\n\r\n</RelativeLayout>
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/res/layout/fragment_graphic.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/res/layout/fragment_graphic.xml	(date 1607520842759)
----@@ -1,16 +1,64 @@
---- <?xml version="1.0" encoding="utf-8"?>
-----<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
----+<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
----     xmlns:tools="http://schemas.android.com/tools"
----     android:layout_width="match_parent"
----     android:layout_height="match_parent"
----+    xmlns:app="http://schemas.android.com/apk/res-auto"
----+    android:background="#EFE9E9"
----     tools:context=".ui.graphic.GraphicFragment">
---- 
-----    <!-- TODO: Update blank fragment layout -->
-----    <TextView
-----        android:layout_width="match_parent"
----+    <androidx.constraintlayout.widget.ConstraintLayout
----+        android:layout_width="match_parent"
----+        android:layout_height="match_parent">
----+
----+
----+        <RelativeLayout
----+            android:id="@+id/relativeLayout2"
----+            android:layout_width="match_parent"
----+            android:layout_height="wrap_content"
----+            android:layout_marginStart="20dp"
----+            android:layout_marginEnd="20dp"
----+            app:layout_constraintBottom_toTopOf="@+id/image_list"
----+            app:layout_constraintEnd_toEndOf="parent"
----+            app:layout_constraintStart_toStartOf="parent"
----+            app:layout_constraintTop_toTopOf="parent">
----+
----+            <TextView
----+                android:id="@+id/textMode"
----+                android:layout_width="wrap_content"
----+                android:layout_height="wrap_content"
----+                android:text="Lista de fotografías  >"
----+
----+                android:textSize="19sp" />
----+
----+            <!--<ImageView
----+                android:layout_width="62dp"
----+                android:layout_height="62dp"
----+                android:layout_alignParentRight="true"
----+                android:src="@drawable/ic_sun" />-->
----+        </RelativeLayout>
----+
----+        <androidx.recyclerview.widget.RecyclerView
----+            android:id="@+id/image_list"
----+            android:layout_width="match_parent"
----+            android:layout_height="match_parent"
----+            android:layout_marginStart="16dp"
----+            android:layout_marginTop="70dp"
----+            android:layout_marginEnd="16dp"
----+            app:layout_constraintBottom_toBottomOf="parent"
----+            app:layout_constraintEnd_toEndOf="parent"
----+            app:layout_constraintStart_toStartOf="parent"
----+            app:layout_constraintTop_toBottomOf="@+id/constraintLayout3" />
----+    </androidx.constraintlayout.widget.ConstraintLayout>
----+
----+
----+    <com.google.android.material.floatingactionbutton.FloatingActionButton
----+        android:id="@+id/button_add_image"
----+        android:layout_width="wrap_content"
----         android:layout_height="wrap_content"
-----        android:layout_centerInParent="true"
-----        android:textSize="50dp"
-----        android:text="Graphic fragment" />
----+        android:layout_gravity="top|end"
----+        android:layout_margin="16dp"
----+
----+        android:src="@drawable/icons_plus" />
---- 
-----</RelativeLayout>
----\ No newline at end of file
----+</androidx.coordinatorlayout.widget.CoordinatorLayout>
----\ No newline at end of file
----Index: app/build.gradle
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+>apply plugin: 'com.android.application'\n\n\nandroid {\n    compileSdkVersion 30\n    buildToolsVersion \"30.0.2\"\n\n    defaultConfig {\n        applicationId \"com.example.infinitycrop\"\n        minSdkVersion 23\n        targetSdkVersion 30\n        versionCode 1\n        versionName \"1.0\"\n        multiDexEnabled true\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: \"libs\", include: [\"*.jar\"])\n    implementation 'androidx.appcompat:appcompat:1.2.0'\n    implementation 'com.google.android.material:material:1.2.1'\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.2'\n    implementation 'androidx.navigation:navigation-fragment:2.1.0'\n    implementation 'androidx.navigation:navigation-ui:2.1.0'\n    implementation 'androidx.lifecycle:lifecycle-extensions:2.2.0'\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\n    implementation 'com.google.firebase:firebase-auth:16.0.5'\n    implementation 'com.firebaseui:firebase-ui-auth:6.2.0'\n    implementation project(path: ':comun')\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\n    implementation 'com.google.firebase:firebase-analytics'\n    implementation 'com.ismaeldivita.chipnavigation:chip-navigation-bar:1.3.4'\n    implementation 'org.jetbrains.kotlin:kotlin-stdlib:1.4.10'\n    implementation 'androidx.recyclerview:recyclerview:1.1.0'\n    implementation 'com.android.volley:volley:1.1.0'\n    // Also declare the dependency for the Google Play services library and specify its version\n    implementation 'com.google.android.gms:play-services-auth:18.1.0'\n    // Import the BoM for the Firebase platform\n    implementation platform('com.google.firebase:firebase-bom:26.0.0')\n    implementation 'com.google.firebase:firebase-firestore:17.1.2'\n    implementation 'com.android.support:multidex:1.0.3'\n    implementation 'com.firebaseui:firebase-ui-firestore:6.3.0'\n    //biblioteca para mostrar images a través de URL\n    implementation 'com.github.bumptech.glide:glide:4.11.0'\n    //import del mqtt\n    implementation 'org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.1.1'\n    implementation 'com.google.android.gms:play-services-maps:17.0.0'\n    compile 'com.google.android.gms:play-services-location:16.0.0'\n    implementation 'com.journeyapps:zxing-android-embedded:3.4.0'//añadimos esta libreria para qr\n    implementation 'com.facebook.android:facebook-android-sdk:[4,5)'\n\n    implementation \"androidx.viewpager2:viewpager2:1.0.0\" //libreria viewpager\n}\napply plugin: 'com.google.gms.google-services'
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/build.gradle	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/build.gradle	(date 1607543533244)
----@@ -35,6 +35,8 @@
----     implementation 'com.google.firebase:firebase-auth:16.0.5'
----     implementation 'com.firebaseui:firebase-ui-auth:6.2.0'
----     implementation project(path: ':comun')
----+    implementation 'com.google.firebase:firebase-database:19.5.1'
----+    implementation 'com.google.firebase:firebase-storage:19.2.0'
----     testImplementation 'junit:junit:4.12'
----     androidTestImplementation 'androidx.test.ext:junit:1.1.2'
----     androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'
----Index: app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+>package com.example.infinitycrop.ui.graphic;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport com.example.infinitycrop.R;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link GraphicFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class GraphicFragment extends Fragment {\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public GraphicFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment GraphicFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static GraphicFragment newInstance(String param1, String param2) {\r\n        GraphicFragment fragment = new GraphicFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        return inflater.inflate(R.layout.fragment_graphic, container, false);\r\n    }\r\n}
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java	(date 1607543099075)
----@@ -3,12 +3,19 @@
---- import android.os.Bundle;
---- 
---- import androidx.fragment.app.Fragment;
----+import androidx.recyclerview.widget.LinearLayoutManager;
----+import androidx.recyclerview.widget.RecyclerView;
---- 
---- import android.view.LayoutInflater;
---- import android.view.View;
---- import android.view.ViewGroup;
---- 
---- import com.example.infinitycrop.R;
----+import com.firebase.ui.firestore.FirestoreRecyclerOptions;
----+import com.google.firebase.database.FirebaseDatabase;
----+import com.google.firebase.firestore.FirebaseFirestore;
----+import com.google.firebase.firestore.Query;
----+import com.google.firebase.storage.FirebaseStorage;
---- 
---- /**
----  * A simple {@link Fragment} subclass.
----@@ -16,7 +23,7 @@
----  * create an instance of this fragment.
----  */
---- public class GraphicFragment extends Fragment {
-----
----+    private AdaptadorImagenes adaptador;
----     // TODO: Rename parameter arguments, choose names that match
----     // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
----     private static final String ARG_PARAM1 = "param1";
----@@ -61,6 +68,26 @@
----     public View onCreateView(LayoutInflater inflater, ViewGroup container,
----                              Bundle savedInstanceState) {
----         // Inflate the layout for this fragment
-----        return inflater.inflate(R.layout.fragment_graphic, container, false);
----+        View v= inflater.inflate(R.layout.fragment_graphic, container, false);
----+
----+        RecyclerView recyclerView = v.findViewById(R.id.image_list);
----+        Query query = FirebaseFirestore.getInstance()
----+                .collection("imagenes");
----+        FirestoreRecyclerOptions<Imagen> opciones = new FirestoreRecyclerOptions
----+                .Builder<Imagen>().setQuery(query, Imagen.class).build();
----+        adaptador = new AdaptadorImagenes(getContext(), opciones);
----+        recyclerView.setAdapter(adaptador);
----+        recyclerView.setLayoutManager(new LinearLayoutManager(getContext()));
----+
----+        return v;
----+    }
----+    @Override public void onStart() {
----+        super.onStart();
----+        adaptador.startListening();
----     }
----+    @Override public void onStop() {
----+        super.onStop();
----+        adaptador.stopListening();
----+    }
----+
---- }
----\ No newline at end of file
----Index: comun/src/main/java/com/example/comun/Mqtt.java
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+>package com.example.comun;\n\npublic class Mqtt {\n    public static final String TAG = \"MQTT\";\n    public static final String topicRoot=\"infinity/senyal/\";\n\n\n    //Reemplaza equipo por el nombre de tu equipo de prácticas\n    public static final int qos = 1;\n    public static final String broker = \"tcp://mqtt.eclipse.org:1883\";\n    public static final String clientId = \"IotTestInfinity123\";\n//Reemplaza ClientId con un valor diferente\n}
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- comun/src/main/java/com/example/comun/Mqtt.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ comun/src/main/java/com/example/comun/Mqtt.java	(date 1607524175548)
----@@ -7,7 +7,7 @@
---- 
----     //Reemplaza equipo por el nombre de tu equipo de prácticas
----     public static final int qos = 1;
-----    public static final String broker = "tcp://mqtt.eclipse.org:1883";
----+    public static final String broker = "tcp://broker.hivemq.com:1883";
----     public static final String clientId = "IotTestInfinity123";
---- //Reemplaza ClientId con un valor diferente
---- }
----\ No newline at end of file
----Index: app/src/main/res/layout/fragment_general.xml
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+><ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    tools:context=\".ui.dashboard.DashboardFragment\">\n\n\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\n\n        <RelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginLeft=\"20dp\"\n            android:layout_marginTop=\"10dp\"\n            android:layout_marginRight=\"20dp\">\n\n            <TextView\n                android:id=\"@+id/textDashboard\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Dashboard  >\"\n\n                android:textSize=\"19sp\" />\n\n            <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_below=\"@+id/textDashboard\"\n                android:text=\"4 sensores\"\n\n                android:textSize=\"14sp\" />\n\n            <!--<ImageView\n                android:layout_width=\"62dp\"\n                android:layout_height=\"62dp\"\n                android:layout_alignParentRight=\"true\"\n                android:src=\"@drawable/ic_sun\" />-->\n        </RelativeLayout>\n        <GridLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:columnCount=\"2\"\n            android:rowCount=\"3\"\n            android:alignmentMode=\"alignMargins\"\n            android:columnOrderPreserved=\"false\">\n            <!--temperatura-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Temperatura\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchTemperatura\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:buttonTint=\"#FFFFFF\"\n                            android:checked=\"true\"\n                            android:fitsSystemWindows=\"false\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaTemperatura\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"34°C\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textTemperatura\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textTemperatura\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgTemperatura\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_temperature\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaTemperatura\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--humedad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Humedad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchHumedad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaHumedad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"68%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textHumedad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textHumedad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgHumedad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_humidity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaHumedad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--salinidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Salinidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchSalinidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaSalinidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"10%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textSalinidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textSalinidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgSalinidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_salt\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaSalinidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--Luminosidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Luminosidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchLuminosidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorHighlight=\"#FFFFFF\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidasLuminosidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"90%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textLuminosidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textLuminosidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgLuminosidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_luminosity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidasLuminosidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n\n\n\n\n        </GridLayout>\n\n    </LinearLayout>\n</ScrollView>\n
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/res/layout/fragment_general.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/res/layout/fragment_general.xml	(date 1607536086761)
----@@ -20,7 +20,7 @@
----             android:layout_marginRight="20dp">
---- 
----             <TextView
-----                android:id="@+id/textDashboard"
----+                android:id="@+id/textDashboardGeneral"
----                 android:layout_width="wrap_content"
----                 android:layout_height="wrap_content"
----                 android:text="Dashboard  >"
----@@ -30,7 +30,7 @@
----             <TextView
----                 android:layout_width="wrap_content"
----                 android:layout_height="wrap_content"
-----                android:layout_below="@+id/textDashboard"
----+                android:layout_below="@+id/textDashboardGeneral"
----                 android:text="4 sensores"
---- 
----                 android:textSize="14sp" />
----@@ -74,19 +74,19 @@
---- 
---- 
----                         <TextView
-----                            android:id="@+id/textTemperatura"
----+                            android:id="@+id/textTemperaturaGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginStart="8dp"
----                             android:layout_marginTop="8dp"
----                             android:text="Temperatura"
----                             android:textSize="16sp"
-----                            app:layout_constraintBottom_toBottomOf="@+id/switchTemperatura"
----+                            app:layout_constraintBottom_toBottomOf="@+id/switchTemperaturaGeneral"
----                             app:layout_constraintStart_toStartOf="parent"
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <Switch
-----                            android:id="@+id/switchTemperatura"
----+                            android:id="@+id/switchTemperaturaGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginTop="8dp"
----@@ -100,25 +100,25 @@
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <TextView
-----                            android:id="@+id/medidaTemperatura"
----+                            android:id="@+id/medidaTemperaturaGeneral"
----                             android:layout_width="90dp"
----                             android:layout_height="39dp"
----                             android:layout_marginTop="24dp"
----                             android:text="34°C"
----                             android:textSize="31sp"
-----                            app:layout_constraintStart_toStartOf="@+id/textTemperatura"
-----                            app:layout_constraintTop_toBottomOf="@+id/textTemperatura" />
----+                            app:layout_constraintStart_toStartOf="@+id/textTemperaturaGeneral"
----+                            app:layout_constraintTop_toBottomOf="@+id/textTemperaturaGeneral" />
---- 
----                         <ImageView
-----                            android:id="@+id/imgTemperatura"
----+                            android:id="@+id/imgTemperaturaGeneral"
----                             android:layout_width="53dp"
----                             android:layout_height="55dp"
----                             android:layout_marginEnd="1dp"
----                             android:src="@drawable/icons_temperature"
-----                            app:layout_constraintBottom_toBottomOf="@+id/medidaTemperatura"
----+                            app:layout_constraintBottom_toBottomOf="@+id/medidaTemperaturaGeneral"
----                             app:layout_constraintEnd_toEndOf="parent"
-----                            app:layout_constraintStart_toEndOf="@+id/medidaTemperatura"
-----                            app:layout_constraintTop_toTopOf="@+id/medidaTemperatura" />
----+                            app:layout_constraintStart_toEndOf="@+id/medidaTemperaturaGeneral"
----+                            app:layout_constraintTop_toTopOf="@+id/medidaTemperaturaGeneral" />
----                     </androidx.constraintlayout.widget.ConstraintLayout>
----                 </LinearLayout>
----             </androidx.cardview.widget.CardView>
----@@ -148,19 +148,19 @@
---- 
---- 
----                         <TextView
-----                            android:id="@+id/textHumedad"
----+                            android:id="@+id/textHumedadGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginStart="8dp"
----                             android:layout_marginTop="8dp"
----                             android:text="Humedad"
----                             android:textSize="16sp"
-----                            app:layout_constraintBottom_toBottomOf="@+id/switchHumedad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/switchHumedadGeneral"
----                             app:layout_constraintStart_toStartOf="parent"
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <Switch
-----                            android:id="@+id/switchHumedad"
----+                            android:id="@+id/switchHumedadGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginTop="8dp"
----@@ -172,25 +172,25 @@
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <TextView
-----                            android:id="@+id/medidaHumedad"
----+                            android:id="@+id/medidaHumedadGeneral"
----                             android:layout_width="90dp"
----                             android:layout_height="39dp"
----                             android:layout_marginTop="24dp"
----                             android:text="68%"
----                             android:textSize="31sp"
-----                            app:layout_constraintStart_toStartOf="@+id/textHumedad"
-----                            app:layout_constraintTop_toBottomOf="@+id/textHumedad" />
----+                            app:layout_constraintStart_toStartOf="@+id/textHumedadGeneral"
----+                            app:layout_constraintTop_toBottomOf="@+id/textHumedadGeneral" />
---- 
----                         <ImageView
-----                            android:id="@+id/imgHumedad"
----+                            android:id="@+id/imgHumedadGeneral"
----                             android:layout_width="53dp"
----                             android:layout_height="55dp"
----                             android:layout_marginEnd="1dp"
----                             android:src="@drawable/icons_humidity"
-----                            app:layout_constraintBottom_toBottomOf="@+id/medidaHumedad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/medidaHumedadGeneral"
----                             app:layout_constraintEnd_toEndOf="parent"
-----                            app:layout_constraintStart_toEndOf="@+id/medidaHumedad"
-----                            app:layout_constraintTop_toTopOf="@+id/medidaHumedad" />
----+                            app:layout_constraintStart_toEndOf="@+id/medidaHumedadGeneral"
----+                            app:layout_constraintTop_toTopOf="@+id/medidaHumedadGeneral" />
----                     </androidx.constraintlayout.widget.ConstraintLayout>
----                 </LinearLayout>
----             </androidx.cardview.widget.CardView>
----@@ -220,19 +220,19 @@
---- 
---- 
----                         <TextView
-----                            android:id="@+id/textSalinidad"
----+                            android:id="@+id/textSalinidadGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginStart="8dp"
----                             android:layout_marginTop="8dp"
----                             android:text="Salinidad"
----                             android:textSize="16sp"
-----                            app:layout_constraintBottom_toBottomOf="@+id/switchSalinidad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/switchSalinidadGeneral"
----                             app:layout_constraintStart_toStartOf="parent"
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <Switch
-----                            android:id="@+id/switchSalinidad"
----+                            android:id="@+id/switchSalinidadGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginTop="8dp"
----@@ -244,25 +244,25 @@
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <TextView
-----                            android:id="@+id/medidaSalinidad"
----+                            android:id="@+id/medidaSalinidadGeneral"
----                             android:layout_width="90dp"
----                             android:layout_height="39dp"
----                             android:layout_marginTop="24dp"
----                             android:text="10%"
----                             android:textSize="31sp"
-----                            app:layout_constraintStart_toStartOf="@+id/textSalinidad"
-----                            app:layout_constraintTop_toBottomOf="@+id/textSalinidad" />
----+                            app:layout_constraintStart_toStartOf="@+id/textSalinidadGeneral"
----+                            app:layout_constraintTop_toBottomOf="@+id/textSalinidadGeneral" />
---- 
----                         <ImageView
-----                            android:id="@+id/imgSalinidad"
----+                            android:id="@+id/imgSalinidadGeneral"
----                             android:layout_width="53dp"
----                             android:layout_height="55dp"
----                             android:layout_marginEnd="1dp"
----                             android:src="@drawable/icons_salt"
-----                            app:layout_constraintBottom_toBottomOf="@+id/medidaSalinidad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/medidaSalinidadGeneral"
----                             app:layout_constraintEnd_toEndOf="parent"
-----                            app:layout_constraintStart_toEndOf="@+id/medidaSalinidad"
-----                            app:layout_constraintTop_toTopOf="@+id/medidaSalinidad" />
----+                            app:layout_constraintStart_toEndOf="@+id/medidaSalinidadGeneral"
----+                            app:layout_constraintTop_toTopOf="@+id/medidaSalinidadGeneral" />
----                     </androidx.constraintlayout.widget.ConstraintLayout>
----                 </LinearLayout>
----             </androidx.cardview.widget.CardView>
----@@ -292,19 +292,19 @@
---- 
---- 
----                         <TextView
-----                            android:id="@+id/textLuminosidad"
----+                            android:id="@+id/textLuminosidadGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginStart="8dp"
----                             android:layout_marginTop="8dp"
----                             android:text="Luminosidad"
----                             android:textSize="16sp"
-----                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidadGeneral"
----                             app:layout_constraintStart_toStartOf="parent"
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <Switch
-----                            android:id="@+id/switchLuminosidad"
----+                            android:id="@+id/switchLuminosidadGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginTop="8dp"
----@@ -317,25 +317,25 @@
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <TextView
-----                            android:id="@+id/medidasLuminosidad"
----+                            android:id="@+id/medidasLuminosidadGeneral"
----                             android:layout_width="90dp"
----                             android:layout_height="39dp"
----                             android:layout_marginTop="24dp"
----                             android:text="90%"
----                             android:textSize="31sp"
-----                            app:layout_constraintStart_toStartOf="@+id/textLuminosidad"
-----                            app:layout_constraintTop_toBottomOf="@+id/textLuminosidad" />
----+                            app:layout_constraintStart_toStartOf="@+id/textLuminosidadGeneral"
----+                            app:layout_constraintTop_toBottomOf="@+id/textLuminosidadGeneral" />
---- 
----                         <ImageView
-----                            android:id="@+id/imgLuminosidad"
----+                            android:id="@+id/imgLuminosidadGeneral"
----                             android:layout_width="53dp"
----                             android:layout_height="55dp"
----                             android:layout_marginEnd="1dp"
----                             android:src="@drawable/icons_luminosity"
-----                            app:layout_constraintBottom_toBottomOf="@+id/medidasLuminosidad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/medidasLuminosidadGeneral"
----                             app:layout_constraintEnd_toEndOf="parent"
-----                            app:layout_constraintStart_toEndOf="@+id/medidasLuminosidad"
-----                            app:layout_constraintTop_toTopOf="@+id/medidasLuminosidad" />
----+                            app:layout_constraintStart_toEndOf="@+id/medidasLuminosidadGeneral"
----+                            app:layout_constraintTop_toTopOf="@+id/medidasLuminosidadGeneral" />
----                     </androidx.constraintlayout.widget.ConstraintLayout>
----                 </LinearLayout>
----             </androidx.cardview.widget.CardView>
----Index: app/src/main/res/layout/fragment_planta1.xml
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+><ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    tools:context=\".ui.dashboard.DashboardFragment\">\n\n\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\n\n        <RelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginLeft=\"20dp\"\n            android:layout_marginTop=\"10dp\"\n            android:layout_marginRight=\"20dp\">\n\n            <TextView\n                android:id=\"@+id/textDashboard\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Dashboard  >\"\n\n                android:textSize=\"19sp\" />\n\n            <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_below=\"@+id/textDashboard\"\n                android:text=\"4 sensores\"\n\n                android:textSize=\"14sp\" />\n\n            <!--<ImageView\n                android:layout_width=\"62dp\"\n                android:layout_height=\"62dp\"\n                android:layout_alignParentRight=\"true\"\n                android:src=\"@drawable/ic_sun\" />-->\n        </RelativeLayout>\n        <GridLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:columnCount=\"2\"\n            android:rowCount=\"3\"\n            android:alignmentMode=\"alignMargins\"\n            android:columnOrderPreserved=\"false\">\n            <!--temperatura-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Temperatura\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchTemperatura\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:buttonTint=\"#FFFFFF\"\n                            android:checked=\"true\"\n                            android:fitsSystemWindows=\"false\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaTemperatura\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"34°C\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textTemperatura\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textTemperatura\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgTemperatura\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_temperature\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaTemperatura\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--humedad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Humedad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchHumedad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaHumedad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"68%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textHumedad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textHumedad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgHumedad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_humidity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaHumedad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--salinidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Salinidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchSalinidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaSalinidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"10%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textSalinidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textSalinidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgSalinidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_salt\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaSalinidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--Luminosidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Luminosidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchLuminosidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorHighlight=\"#FFFFFF\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidasLuminosidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"90%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textLuminosidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textLuminosidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgLuminosidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_luminosity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidasLuminosidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n\n\n\n\n        </GridLayout>\n\n    </LinearLayout>\n</ScrollView>\n
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/res/layout/fragment_planta1.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/res/layout/fragment_planta1.xml	(date 1607537539251)
----@@ -299,12 +299,12 @@
----                             android:layout_marginTop="8dp"
----                             android:text="Luminosidad"
----                             android:textSize="16sp"
-----                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidadPlamta1"
----                             app:layout_constraintStart_toStartOf="parent"
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <Switch
-----                            android:id="@+id/switchLuminosidad"
----+                            android:id="@+id/switchLuminosidadPlamta1"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginTop="8dp"
----Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+>package com.example.infinitycrop.ui.dashboard;\n\nimport android.os.Bundle;\n\nimport androidx.fragment.app.Fragment;\n\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.TextView;\n\nimport com.example.infinitycrop.R;\n\n/**\n * A simple {@link Fragment} subclass.\n * Use the {@link GeneralFragment#newInstance} factory method to\n * create an instance of this fragment.\n */\npublic class GeneralFragment extends Fragment {\n\n    // TODO: Rename parameter arguments, choose names that match\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\n    private static final String ARG_PARAM1 = \"param1\";\n    private static final String ARG_PARAM2 = \"param2\";\n\n    // TODO: Rename and change types of parameters\n    private String mParam1;\n    private String mParam2;\n\n    public GeneralFragment() {\n        // Required empty public constructor\n    }\n\n    /**\n     * Use this factory method to create a new instance of\n     * this fragment using the provided parameters.\n     *\n     * @param param1 Parameter 1.\n     * @param param2 Parameter 2.\n     * @return A new instance of fragment GeneralFragment.\n     */\n    // TODO: Rename and change types and number of parameters\n    public static GeneralFragment newInstance(String param1, String param2) {\n        GeneralFragment fragment = new GeneralFragment();\n        Bundle args = new Bundle();\n        args.putString(ARG_PARAM1, param1);\n        args.putString(ARG_PARAM2, param2);\n        fragment.setArguments(args);\n        return fragment;\n    }\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        if (getArguments() != null) {\n            mParam1 = getArguments().getString(ARG_PARAM1);\n            mParam2 = getArguments().getString(ARG_PARAM2);\n        }\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        View v = inflater.inflate(R.layout.fragment_general, container, false);\n\n        return v;\n    }\n}
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(date 1607537068118)
----@@ -4,20 +4,34 @@
---- 
---- import androidx.fragment.app.Fragment;
---- 
----+import android.util.Log;
---- import android.view.LayoutInflater;
---- import android.view.View;
---- import android.view.ViewGroup;
----+import android.widget.CompoundButton;
----+import android.widget.Switch;
---- import android.widget.TextView;
---- 
----+import com.example.comun.Mqtt;
---- import com.example.infinitycrop.R;
---- 
----+import org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;
----+import org.eclipse.paho.client.mqttv3.MqttCallback;
----+import org.eclipse.paho.client.mqttv3.MqttClient;
----+import org.eclipse.paho.client.mqttv3.MqttConnectOptions;
----+import org.eclipse.paho.client.mqttv3.MqttException;
----+import org.eclipse.paho.client.mqttv3.MqttMessage;
----+import org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;
----+
----+import static com.example.comun.Mqtt.topicRoot;
----+
---- /**
----  * A simple {@link Fragment} subclass.
----  * Use the {@link GeneralFragment#newInstance} factory method to
----  * create an instance of this fragment.
----  */
-----public class GeneralFragment extends Fragment {
-----
----+public class GeneralFragment extends Fragment implements MqttCallback{
----+    public static MqttClient client = null;
----     // TODO: Rename parameter arguments, choose names that match
----     // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
----     private static final String ARG_PARAM1 = "param1";
----@@ -63,7 +77,108 @@
----                              Bundle savedInstanceState) {
----         // Inflate the layout for this fragment
----         View v = inflater.inflate(R.layout.fragment_general, container, false);
-----
----+        //switch methods
----+        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);
----+        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
----+            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
----+                if (isChecked) {
----+                    // The toggle is enabled
----+                    enviarLucesOn();
----+                } else {
----+                    // The toggle is disabled
----+                    enviarLucesOff();
----+                }
----+            }
----+        });
----         return v;
----     }
----+    public void enviarLucesOff(){
----+        try {
----+            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new
----+                    MemoryPersistence());
----+        } catch (MqttException e) {
----+            e.printStackTrace();
----+        }
----+        MqttConnectOptions connOpts = new MqttConnectOptions();
----+        connOpts.setCleanSession(true);
----+        connOpts.setKeepAliveInterval(60);
----+        connOpts.setWill(topicRoot+"WillTopic", "App desconectada".getBytes(),Mqtt.qos, false);
----+
----+        try {
----+            client.connect(connOpts);
----+        } catch (MqttException e) {
----+            e.printStackTrace();
----+        }
----+
----+        //conexión con el broker Root1 = Lector de datos
----+        //nos subscribimos a topic lectura
----+        try {
----+            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "luces");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
----+            client.subscribe(topicRoot + "luces", Mqtt.qos);
----+            client.setCallback((MqttCallback) this);
----+        } catch (MqttException e) {
----+            Log.e(Mqtt.TAG, "Error al suscribir.", e);
----+        }
----+        try {
----+            Log.i(Mqtt.TAG, "Publicando mensaje: " + "mensaje");
----+            MqttMessage message = new MqttMessage("Superior OFF".getBytes());
----+            message.setQos(Mqtt.qos);
----+            message.setRetained(false);
----+            client.publish(topicRoot+"luces", message);
----+        } catch (MqttException e) {
----+            Log.e(Mqtt.TAG, "Error al publicar.", e);
----+        }
----+    }
----+    public void enviarLucesOn(){
----+        try {
----+            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new
----+                    MemoryPersistence());
----+        } catch (MqttException e) {
----+            e.printStackTrace();
----+        }
----+        MqttConnectOptions connOpts = new MqttConnectOptions();
----+        connOpts.setCleanSession(true);
----+        connOpts.setKeepAliveInterval(60);
----+        connOpts.setWill(topicRoot+"WillTopic", "App desconectada".getBytes(),Mqtt.qos, false);
----+
----+        try {
----+            client.connect(connOpts);
----+        } catch (MqttException e) {
----+            e.printStackTrace();
----+        }
----+
----+        //conexión con el broker Root1 = Lector de datos
----+        //nos subscribimos a topic lectura
----+        try {
----+            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "luces");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
----+            client.subscribe(topicRoot + "luces", Mqtt.qos);
----+            client.setCallback((MqttCallback) this);
----+        } catch (MqttException e) {
----+            Log.e(Mqtt.TAG, "Error al suscribir.", e);
----+        }
----+        try {
----+            Log.i(Mqtt.TAG, "Publicando mensaje: " + "mensaje");
----+            MqttMessage message = new MqttMessage("Superior ON".getBytes());
----+            message.setQos(Mqtt.qos);
----+            message.setRetained(false);
----+            client.publish(topicRoot+"luces", message);
----+        } catch (MqttException e) {
----+            Log.e(Mqtt.TAG, "Error al publicar.", e);
----+        }
----+    }
----+
----+    @Override
----+    public void connectionLost(Throwable cause) {
----+        Log.d(Mqtt.TAG, "Conexión perdida");
----+    }
----+
----+    @Override
----+    public void messageArrived(String topic, MqttMessage message) throws Exception {
----+
----+    }
----+
----+    @Override
----+    public void deliveryComplete(IMqttDeliveryToken token) {
----+        Log.d(Mqtt.TAG, "Entrega completa");
----+    }
---- }
----\ No newline at end of file
----Index: app/src/main/res/layout/fragment_planta2.xml
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+><ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    tools:context=\".ui.dashboard.DashboardFragment\">\n\n\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\n\n        <RelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginLeft=\"20dp\"\n            android:layout_marginTop=\"10dp\"\n            android:layout_marginRight=\"20dp\">\n\n            <TextView\n                android:id=\"@+id/textDashboard\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Dashboard  >\"\n\n                android:textSize=\"19sp\" />\n\n            <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_below=\"@+id/textDashboard\"\n                android:text=\"4 sensores\"\n\n                android:textSize=\"14sp\" />\n\n            <!--<ImageView\n                android:layout_width=\"62dp\"\n                android:layout_height=\"62dp\"\n                android:layout_alignParentRight=\"true\"\n                android:src=\"@drawable/ic_sun\" />-->\n        </RelativeLayout>\n        <GridLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:columnCount=\"2\"\n            android:rowCount=\"3\"\n            android:alignmentMode=\"alignMargins\"\n            android:columnOrderPreserved=\"false\">\n            <!--temperatura-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Temperatura\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchTemperatura\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:buttonTint=\"#FFFFFF\"\n                            android:checked=\"true\"\n                            android:fitsSystemWindows=\"false\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaTemperatura\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"34°C\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textTemperatura\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textTemperatura\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgTemperatura\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_temperature\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaTemperatura\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--humedad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Humedad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchHumedad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaHumedad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"68%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textHumedad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textHumedad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgHumedad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_humidity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaHumedad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--salinidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Salinidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchSalinidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaSalinidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"10%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textSalinidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textSalinidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgSalinidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_salt\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaSalinidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--Luminosidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Luminosidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchLuminosidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorHighlight=\"#FFFFFF\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidasLuminosidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"90%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textLuminosidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textLuminosidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgLuminosidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_luminosity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidasLuminosidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n\n\n\n\n        </GridLayout>\n\n    </LinearLayout>\n</ScrollView>\n
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/res/layout/fragment_planta2.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/res/layout/fragment_planta2.xml	(date 1607537539258)
----@@ -299,12 +299,12 @@
----                             android:layout_marginTop="8dp"
----                             android:text="Luminosidad"
----                             android:textSize="16sp"
-----                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidadPlanta2"
----                             app:layout_constraintStart_toStartOf="parent"
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <Switch
-----                            android:id="@+id/switchLuminosidad"
----+                            android:id="@+id/switchLuminosidadPlanta2"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginTop="8dp"
----Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.app.Activity;\r\nimport android.content.res.ColorStateList;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvModel;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\n\r\nimport java.util.ArrayList;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link DashboardFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class DashboardFragment extends Fragment implements MqttCallback{\r\n\r\n    private RecyclerView recyclerView;\r\n    private StaticRvAdapter staticRvAdapter;\r\n    private TabLayout tabLayout;\r\n    private ViewPager viewPager;\r\n    private ColorStateList def;\r\n\r\n\r\n    public static MqttClient client = null;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public DashboardFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment DashboardFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static DashboardFragment newInstance(String param1, String param2) {\r\n        DashboardFragment fragment = new DashboardFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_dashboard, container, false);\r\n        //FIREBASE\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        final FirebaseUser usuario = mAuth.getCurrentUser();\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=usuario.getUid();\r\n        //guardo el nombre en un textView\r\n        /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);\r\n        String res=\"Hola\"+\" \"+usuario.getDisplayName();\r\n        nombre.setText(res);\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(usuario.getDisplayName() == null){\r\n                    String res1=\"Hola\"+\" \"+snapshot.getString(\"username\");\r\n                    nombre.setText(res1);\r\n                }\r\n            }\r\n        });*/\r\n/*\r\n        //switch methods\r\n        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidad);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n */\r\n\r\n        //RECYCLER VIEW\r\n        ArrayList<StaticRvModel> item=new ArrayList<>();\r\n        item.add(new StaticRvModel(R.drawable.icons_sun,\"Soleado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_night_mode,\"Nocturno\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_energy_saving,\"Ahorro\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_power_off,\"Apagado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_custom,\"Custom\"));\r\n\r\n        final TextView medidasT=v.findViewById(R.id.medidaTemperatura);\r\n        final TextView medidasH=v.findViewById(R.id.medidaHumedad);\r\n        final TextView medidasS=v.findViewById(R.id.medidaSalinidad);\r\n        final TextView medidasL=v.findViewById(R.id.medidasLuminosidad);\r\n\r\n        recyclerView=v.findViewById(R.id.rv_1);\r\n        staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(),LinearLayoutManager.HORIZONTAL,false));\r\n        recyclerView.setAdapter(staticRvAdapter);\r\n\r\n\r\n        //TABS\r\n        tabLayout = v.findViewById(R.id.tab_layout);\r\n        viewPager = v.findViewById(R.id.view_pager);\r\n         //Array\r\n        ArrayList<String> arrayList = new ArrayList<>();\r\n\r\n        //set up with viewpager\r\n        tabLayout.setupWithViewPager(viewPager);\r\n\r\n        TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());\r\n        //Pestañas\r\n        adapter.addFrag(new GeneralFragment(),\"General\");\r\n        adapter.addFrag(new Planta1Fragment(),\"Planta 1\");\r\n        adapter.addFrag(new Planta2Fragment(),\"Planta 2\");\r\n\r\n        viewPager.setAdapter(adapter );\r\n\r\n        /*((MainActivity)getActivity()).ola();*/\r\n     /*   //LEER DATOS FIREBASE\r\n        //Temperatura\r\n       DocumentReference documentTemperatura=fStore.collection(\"SensoresA-T\").document(\"Temperatura\");\r\n        documentTemperatura.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediTemp=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasT.setText(resMediTemp);\r\n            }\r\n        });\r\n        //Humedad\r\n        DocumentReference documentHumedad=fStore.collection(\"SensoresA-T\").document(\"Humedad\");\r\n        documentHumedad.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediHum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasH.setText(resMediHum);\r\n            }\r\n        });\r\n        //Iluminación\r\n        DocumentReference documentIluminación=fStore.collection(\"SensoresA-T\").document(\"Iluminación\");\r\n        documentIluminación.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIlum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasL.setText(resMediIlum);\r\n            }\r\n        });\r\n        //Temperatura ambiente\r\n        DocumentReference documentambiente=fStore.collection(\"SensoresA-T\").document(\"Temperatura ambiente\");\r\n        documentambiente.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIAmb=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasS.setText(resMediIAmb);\r\n            }\r\n        });\r\n\r\n      */\r\n\r\n        return v;\r\n    }\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n}
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(date 1607536963984)
----@@ -128,9 +128,9 @@
----                 }
----             }
----         });*/
-----/*
----+
----         //switch methods
-----        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidad);
----+ /*     Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);
----         switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
----             public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
----                 if (isChecked) {
----@@ -141,10 +141,10 @@
----                     enviarLucesOff();
----                 }
----             }
-----        });
----+        });*/
---- 
---- 
----- */
----+
---- 
----         //RECYCLER VIEW
----         ArrayList<StaticRvModel> item=new ArrayList<>();
----@@ -154,10 +154,10 @@
----         item.add(new StaticRvModel(R.drawable.icons_power_off,"Apagado"));
----         item.add(new StaticRvModel(R.drawable.icons_custom,"Custom"));
---- 
-----        final TextView medidasT=v.findViewById(R.id.medidaTemperatura);
-----        final TextView medidasH=v.findViewById(R.id.medidaHumedad);
-----        final TextView medidasS=v.findViewById(R.id.medidaSalinidad);
-----        final TextView medidasL=v.findViewById(R.id.medidasLuminosidad);
----+        final TextView medidasT=v.findViewById(R.id.medidaTemperaturaGeneral);
----+        final TextView medidasH=v.findViewById(R.id.medidaHumedadGeneral);
----+        final TextView medidasS=v.findViewById(R.id.medidaSalinidadGeneral);
----+        final TextView medidasL=v.findViewById(R.id.medidasLuminosidadGeneral);
---- 
----         recyclerView=v.findViewById(R.id.rv_1);
----         staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);
----Index: things/src/main/java/com/example/things/MainActivity.java
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+>package com.example.things;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.util.Log;\n\nimport com.example.comun.Mqtt;\nimport com.google.android.gms.tasks.OnCompleteListener;\nimport com.google.android.gms.tasks.Task;\nimport com.google.firebase.firestore.FirebaseFirestore;\nimport com.google.firebase.firestore.QuerySnapshot;\n\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\nimport org.eclipse.paho.client.mqttv3.MqttClient;\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\nimport org.eclipse.paho.client.mqttv3.MqttException;\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport static com.example.comun.Mqtt.qos;\nimport static com.example.comun.Mqtt.topicRoot;\n\n\n/**\n * Skeleton of an Android Things activity.\n * <p>\n * Android Things peripheral APIs are accessible through the PeripheralManager\n * For example, the snippet below will open a GPIO pin and set it to HIGH:\n * <p>\n * PeripheralManager manager = PeripheralManager.getInstance();\n * try {\n * Gpio gpio = manager.openGpio(\"BCM6\");\n * gpio.setDirection(Gpio.DIRECTION_OUT_INITIALLY_LOW);\n * gpio.setValue(true);\n * } catch (IOException e) {\n * Log.e(TAG, \"Unable to access GPIO\");\n * }\n * <p>\n * You can find additional examples on GitHub: https://github.com/androidthings\n */\npublic class MainActivity extends AppCompatActivity implements MqttCallback {\n    public static MqttClient client = null;\n    FirebaseFirestore db;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        db = FirebaseFirestore.getInstance();\n\n        try {\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\n                    MemoryPersistence());\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n        MqttConnectOptions connOpts = new MqttConnectOptions();\n        connOpts.setCleanSession(true);\n        connOpts.setKeepAliveInterval(60);\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\n\n        try {\n            client.connect(connOpts);\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n\n\n        //conexión con el broker Root1 = Lector de datos\n        //nos subscribimos a topic lectura\n        try {\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"lecturaDatos\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\n            client.subscribe(topicRoot + \"lecturaDatos\", Mqtt.qos);\n            client.setCallback(this);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\n        }\n\n    }\n    // Se ejecuta cuando se pierde la conexión\n    @Override\n    public void connectionLost(Throwable cause) {\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\n\n    }\n    @Override\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\n        String payload = new String(message.getPayload());\n        Log.d(Mqtt.TAG, \"Recibiendo: \" + topic + \"->\" + payload);\n\n        if(topic.equals(topicRoot+\"lecturaDatos\")){\n            //topicLectura(payload);\n            // parts0=humedad,parts1=iluminosidad,parts2=humedadHambiente,parts3=temperatura\n            String[] parts = payload.split(\"-\");//comprueba si los datos introducidos van referentes a cada sensor: nombre,medición, estado\n            Log.d(\"PRUUEBA\",parts[0] + \" \"+parts[1] + \" \"+parts[2] + \" \"+parts[3] + \" \");\n            Map<String, Object> dataTemp = new HashMap<>();\n            dataTemp.put(\"Estado:\", \"Activado\");\n            dataTemp.put(\"Medición\", parts[3]);\n            db.collection(\"SensoresA-T\").document(\"Temperatura\").set(dataTemp);\n\n        }\n\n    }\n     private  void topicLectura(final String payload)  {}\n\n    private void topicLuces(final String payload) {\n    }\n\n    private void topicRiego(final String payload) {\n    }\n\n    private void topicVentiladores(final String payload) {\n    }\n\n\n\n\n\n\n\n    @Override\n    public void onDestroy() {\n        try {\n            Log.i(Mqtt.TAG, \"Desconectado\");\n            client.disconnect();\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al desconectar.\", e);\n        }\n        super.onDestroy();\n    }\n\n\n\n\n\n    @Override\n    public void deliveryComplete(IMqttDeliveryToken token) {\n        Log.d(Mqtt.TAG, \"Entrega completa\");\n\n    }\n}
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- things/src/main/java/com/example/things/MainActivity.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ things/src/main/java/com/example/things/MainActivity.java	(date 1607533992044)
----@@ -93,7 +93,7 @@
----     public void messageArrived(String topic, MqttMessage message) throws Exception {
----         String payload = new String(message.getPayload());
----         Log.d(Mqtt.TAG, "Recibiendo: " + topic + "->" + payload);
-----
----+        db.collection("prueba").add(payload);
----         if(topic.equals(topicRoot+"lecturaDatos")){
----             //topicLectura(payload);
----             // parts0=humedad,parts1=iluminosidad,parts2=humedadHambiente,parts3=temperatura
---Index: app/src/main/res/values/strings.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><resources>\n    <string name=\"app_name\">Infinity Crop</string>\n    <string name=\"title_home\">Infinity Crop</string>\n    <string name=\"title_inicio\">Inicio</string>\n    <string name=\"title_dashboard\">Panel de control</string>\n    <string name=\"title_notifications\">Notificaciones</string>\n    <string name=\"title_wellcome_login\">¡Te damos la bienvenida!</string>\n    <string name=\"title_orderLog\">Inicia sesión</string>\n    <string name=\"title_cont_faceboock\">Iniciar sesión con Facebook</string>\n    <string name=\"title_cont_google\">Iniciar sesión con Google</string>\n    <string name=\"title_cont_mail\">Iniciar sesión con Email</string>\n\n    <string name=\"title_register\">Registrate</string>\n    <string name=\"title_bienv\">Hola de nuevo!</string>\n    <string name=\"title_bienvR\">¡Hola, es un placer!</string>\n    <string name=\"title_userR\">Introduce un correo:</string>\n    <string name=\"title_nameR\">Introduce un nombre:</string>\n    <string name=\"title_passwordR\">Introduce una contraseña:</string>\n    <string name=\"title_registrar\">Acceder</string>\n    <string name=\"btn_newuser\">Si no tienes una cuenta, puedes registarte <u>Aquí</u> </string>\n    <string name=\"title_olvidado\">He olvidado mi contraseña</string>\n    <!-- ANYADIR UNA NUEVA MAQUINA STRINGS -->\n    <string name=\"title_register_machine\">Registra una nueva máquina</string>\n    <string name=\"title_infoMachine\">Completa estos campos</string>\n    <string name=\"btn_registMachine\">Añadir máquina</string>\n    <string name=\"title_name_machine\">Introduce el nombre de tu máquina:</string>\n    <string name=\"title_name_model\">Modelo de tu máquina:</string>\n    <string name=\"title_name_favorites\">Añadir tu máquina a favoritos</string>\n    <string name=\"title_scan_machine\">Escanear máquina</string>\n\n\n\n    <!-- TODO: Remove or change this placeholder text -->\n\n        <string name=\"change_city\">Change city</string>\n\n        <!-- Put your own APP ID here -->\n        <string name=\"open_weather_maps_app_id\">11111</string>\n\n        <string name=\"weather_sunny\">&#xf00d;</string>\n        <string name=\"weather_clear_night\">&#xf02e;</string>\n\n        <string name=\"weather_foggy\">&#xf014;</string>\n        <string name=\"weather_cloudy\">&#xf013;</string>\n        <string name=\"weather_rainy\">&#xf019;</string>\n        <string name=\"weather_snowy\">&#xf01b;</string>\n        <string name=\"weather_thunder\">&#xf01e;</string>\n        <string name=\"weather_drizzle\">&#xf01c;</string>\n\n        <string name=\"place_not_found\">Sorry, no weather data found.</string>\n        <string name=\"facebook_app_id\">140146287567868</string>\n        <string name=\"fb_login_protocol_scheme\">fb140146287567868</string>\n\n\n</resources>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/res/values/strings.xml	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ app/src/main/res/values/strings.xml	(date 1607987125225)
---@@ -29,27 +29,28 @@
---     <string name="title_scan_machine">Escanear máquina</string>
--- 
--- 
----
---     <!-- TODO: Remove or change this placeholder text -->
--- 
----        <string name="change_city">Change city</string>
---+    <string name="change_city">Change city</string>
--- 
----        <!-- Put your own APP ID here -->
----        <string name="open_weather_maps_app_id">11111</string>
---+    <!-- Put your own APP ID here -->
---+    <string name="open_weather_maps_app_id">11111</string>
--- 
----        <string name="weather_sunny">&#xf00d;</string>
----        <string name="weather_clear_night">&#xf02e;</string>
---+    <string name="weather_sunny">&#xf00d;</string>
---+    <string name="weather_clear_night">&#xf02e;</string>
--- 
----        <string name="weather_foggy">&#xf014;</string>
----        <string name="weather_cloudy">&#xf013;</string>
----        <string name="weather_rainy">&#xf019;</string>
----        <string name="weather_snowy">&#xf01b;</string>
----        <string name="weather_thunder">&#xf01e;</string>
----        <string name="weather_drizzle">&#xf01c;</string>
---+    <string name="weather_foggy">&#xf014;</string>
---+    <string name="weather_cloudy">&#xf013;</string>
---+    <string name="weather_rainy">&#xf019;</string>
---+    <string name="weather_snowy">&#xf01b;</string>
---+    <string name="weather_thunder">&#xf01e;</string>
---+    <string name="weather_drizzle">&#xf01c;</string>
--- 
----        <string name="place_not_found">Sorry, no weather data found.</string>
----        <string name="facebook_app_id">140146287567868</string>
----        <string name="fb_login_protocol_scheme">fb140146287567868</string>
---+    <string name="place_not_found">Sorry, no weather data found.</string>
---+    <string name="facebook_app_id">140146287567868</string>
---+    <string name="fb_login_protocol_scheme">fb140146287567868</string>
---+    <!-- TODO: Remove or change this placeholder text -->
---+    <string name="hello_blank_fragment">Hello blank fragment</string>
--- 
--- 
--- </resources>
---\ No newline at end of file
---Index: things/src/main/java/com/example/things/MainActivity.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.things;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.util.Log;\n\nimport com.example.comun.Mqtt;\nimport com.google.android.gms.tasks.OnCompleteListener;\nimport com.google.android.gms.tasks.Task;\nimport com.google.firebase.firestore.FirebaseFirestore;\nimport com.google.firebase.firestore.QuerySnapshot;\n\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\nimport org.eclipse.paho.client.mqttv3.MqttClient;\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\nimport org.eclipse.paho.client.mqttv3.MqttException;\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport static com.example.comun.Mqtt.qos;\nimport static com.example.comun.Mqtt.topicRoot;\n\n\n/**\n * Skeleton of an Android Things activity.\n * <p>\n * Android Things peripheral APIs are accessible through the PeripheralManager\n * For example, the snippet below will open a GPIO pin and set it to HIGH:\n * <p>\n * PeripheralManager manager = PeripheralManager.getInstance();\n * try {\n * Gpio gpio = manager.openGpio(\"BCM6\");\n * gpio.setDirection(Gpio.DIRECTION_OUT_INITIALLY_LOW);\n * gpio.setValue(true);\n * } catch (IOException e) {\n * Log.e(TAG, \"Unable to access GPIO\");\n * }\n * <p>\n * You can find additional examples on GitHub: https://github.com/androidthings\n */\npublic class MainActivity extends AppCompatActivity implements MqttCallback {\n    public static MqttClient client = null;\n    FirebaseFirestore db;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        db = FirebaseFirestore.getInstance();\n\n        try {\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\n                    MemoryPersistence());\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n        MqttConnectOptions connOpts = new MqttConnectOptions();\n        connOpts.setCleanSession(true);\n        connOpts.setKeepAliveInterval(60);\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\n\n        try {\n            client.connect(connOpts);\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n\n\n        //conexión con el broker Root1 = Lector de datos\n        //nos subscribimos a topic lectura\n        try {\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"lecturaDatos\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\n            client.subscribe(topicRoot + \"lecturaDatos\", Mqtt.qos);\n            client.setCallback(this);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\n        }\n\n    }\n    // Se ejecuta cuando se pierde la conexión\n    @Override\n    public void connectionLost(Throwable cause) {\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\n\n    }\n    @Override\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\n        String payload = new String(message.getPayload());\n        Log.d(Mqtt.TAG, \"Recibiendo: \" + topic + \"->\" + payload);\n        db.collection(\"prueba\").add(payload);\n        if(topic.equals(topicRoot+\"lecturaDatos\")){\n            //topicLectura(payload);\n            // parts0=humedad,parts1=iluminosidad,parts2=humedadHambiente,parts3=temperatura\n            String[] parts = payload.split(\"-\");//comprueba si los datos introducidos van referentes a cada sensor: nombre,medición, estado\n            Log.d(\"PRUUEBA\",parts[0] + \" \"+parts[1] + \" \"+parts[2] + \" \"+parts[3] + \" \");\n\n\n        }\n\n    }\n     private  void topicLectura(final String payload)  {}\n\n    private void topicLuces(final String payload) {\n    }\n\n    private void topicRiego(final String payload) {\n    }\n\n    private void topicVentiladores(final String payload) {\n    }\n\n\n\n\n\n\n\n    @Override\n    public void onDestroy() {\n        try {\n            Log.i(Mqtt.TAG, \"Desconectado\");\n            client.disconnect();\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al desconectar.\", e);\n        }\n        super.onDestroy();\n    }\n\n\n\n\n\n    @Override\n    public void deliveryComplete(IMqttDeliveryToken token) {\n        Log.d(Mqtt.TAG, \"Entrega completa\");\n\n    }\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ things/src/main/java/com/example/things/MainActivity.java	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ things/src/main/java/com/example/things/MainActivity.java	(date 1608559850991)
---@@ -64,19 +64,16 @@
---         connOpts.setCleanSession(true);
---         connOpts.setKeepAliveInterval(60);
---         connOpts.setWill(topicRoot+"WillTopic", "App desconectada".getBytes(),Mqtt.qos, false);
----
---         try {
---             client.connect(connOpts);
---         } catch (MqttException e) {
---             e.printStackTrace();
---         }
--- 
----
----        //conexión con el broker Root1 = Lector de datos
----        //nos subscribimos a topic lectura
---+        // Nos suscribimos al topic rfid
---         try {
----            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "lecturaDatos");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
----            client.subscribe(topicRoot + "lecturaDatos", Mqtt.qos);
---+            Log.i(Mqtt.TAG, "Suscrito a " + topicRoot+"lecturaDatos");
---+            client.subscribe(topicRoot+"lecturaDatos", qos);
---             client.setCallback(this);
---         } catch (MqttException e) {
---             Log.e(Mqtt.TAG, "Error al suscribir.", e);
---@@ -87,39 +84,17 @@
---     @Override
---     public void connectionLost(Throwable cause) {
---         Log.d(Mqtt.TAG, "Conexión perdida");
----
---     }
---+
---+    // Se ejecuta cuando se publica algo en los topics subscritos
---     @Override
---     public void messageArrived(String topic, MqttMessage message) throws Exception {
---         String payload = new String(message.getPayload());
---         Log.d(Mqtt.TAG, "Recibiendo: " + topic + "->" + payload);
----        db.collection("prueba").add(payload);
----        if(topic.equals(topicRoot+"lecturaDatos")){
----            //topicLectura(payload);
----            // parts0=humedad,parts1=iluminosidad,parts2=humedadHambiente,parts3=temperatura
----            String[] parts = payload.split("-");//comprueba si los datos introducidos van referentes a cada sensor: nombre,medición, estado
----            Log.d("PRUUEBA",parts[0] + " "+parts[1] + " "+parts[2] + " "+parts[3] + " ");
----
----
----        }
----
----    }
----     private  void topicLectura(final String payload)  {}
----
----    private void topicLuces(final String payload) {
----    }
--- 
----    private void topicRiego(final String payload) {
----    }
---+        db.collection("pruebaaaa").add(payload);
--- 
----    private void topicVentiladores(final String payload) {
---     }
----
----
----
----
----
----
--- 
---     @Override
---     public void onDestroy() {
---Index: github.properties
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>gpr.usr = 61469172\ngpr.key = 72a0f63b7097b413e8ff78a7dd6ca9412aaf232c
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>windows-1252
---===================================================================
------ github.properties	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ github.properties	(date 1607628748873)
---@@ -1,2 +1,2 @@
----gpr.usr = 61469172
----gpr.key = 72a0f63b7097b413e8ff78a7dd6ca9412aaf232c
---\ No newline at end of file
---+gpr.usr = 61473165
---+gpr.key = 9671a8c2e26934b214e49dd99b96077296ee2aca
---\ No newline at end of file
---Index: app/src/main/res/menu/nav_item.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\">\r\n    <item\r\n        android:id=\"@+id/home\"\r\n        android:icon=\"@drawable/ic_home\"\r\n        android:title=\"Inicio\"\r\n        app:cnb_backgroundColor=\"@color/colorPrimaryDashboard\"\r\n        app:cnb_iconColor=\"#ffffff\"\r\n        app:cnb_textColor=\"#ffffff\" />\r\n    <item\r\n        android:id=\"@+id/graphics\"\r\n        android:icon=\"@drawable/icons_line_chart\"\r\n        android:title=\"Graphics\"\r\n        app:cnb_backgroundColor=\"@color/colorPrimaryDashboard\"\r\n        app:cnb_iconColor=\"#ffffff\"\r\n        app:cnb_textColor=\"#ffffff\" />\r\n    <item\r\n        android:id=\"@+id/notifications\"\r\n        android:icon=\"@drawable/ic_baseline_map\"\r\n        android:title=\"Mapa\"\r\n        app:cnb_backgroundColor=\"@color/colorPrimaryDashboard\"\r\n        app:cnb_iconColor=\"#ffffff\"\r\n        app:cnb_textColor=\"#ffffff\" />\r\n    <item\r\n        android:id=\"@+id/profile\"\r\n        android:icon=\"@drawable/ic_profile\"\r\n        android:title=\"Perfil\"\r\n        app:cnb_backgroundColor=\"@color/colorPrimaryDashboard\"\r\n        app:cnb_iconColor=\"#ffffff\"\r\n        app:cnb_textColor=\"#ffffff\" />\r\n</menu>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/res/menu/nav_item.xml	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ app/src/main/res/menu/nav_item.xml	(date 1607985987066)
---@@ -10,8 +10,8 @@
---         app:cnb_textColor="#ffffff" />
---     <item
---         android:id="@+id/graphics"
----        android:icon="@drawable/icons_line_chart"
----        android:title="Graphics"
---+        android:icon="@drawable/icons_dashboard"
---+        android:title="Panel de control"
---         app:cnb_backgroundColor="@color/colorPrimaryDashboard"
---         app:cnb_iconColor="#ffffff"
---         app:cnb_textColor="#ffffff" />
---Index: app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.graphic;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.Query;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link GraphicFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class GraphicFragment extends Fragment {\r\n    private AdaptadorImagenes adaptador;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public GraphicFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment GraphicFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static GraphicFragment newInstance(String param1, String param2) {\r\n        GraphicFragment fragment = new GraphicFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_graphic, container, false);\r\n\r\n        RecyclerView recyclerView = v.findViewById(R.id.image_list);\r\n        Query query = FirebaseFirestore.getInstance()\r\n                .collection(\"imagenes\");\r\n        FirestoreRecyclerOptions<Imagen> opciones = new FirestoreRecyclerOptions\r\n                .Builder<Imagen>().setQuery(query, Imagen.class).build();\r\n        adaptador = new AdaptadorImagenes(getContext(), opciones);\r\n        recyclerView.setAdapter(adaptador);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(getContext()));\r\n\r\n        return v;\r\n    }\r\n    @Override public void onStart() {\r\n        super.onStart();\r\n        adaptador.startListening();\r\n    }\r\n    @Override public void onStop() {\r\n        super.onStop();\r\n        adaptador.stopListening();\r\n    }\r\n\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java	(date 1607644902576)
---@@ -9,6 +9,7 @@
--- import android.view.LayoutInflater;
--- import android.view.View;
--- import android.view.ViewGroup;
---+import android.widget.Button;
--- 
--- import com.example.infinitycrop.R;
--- import com.firebase.ui.firestore.FirestoreRecyclerOptions;
---Index: app/src/main/java/com/example/infinitycrop/MainActivity.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop;\nimport android.os.Bundle;\n\nimport com.example.infinitycrop.ui.dashboard.DashboardFragment;\nimport com.example.infinitycrop.ui.graphic.GraphicFragment;\nimport com.example.infinitycrop.ui.map.MapFragment;\nimport com.example.infinitycrop.ui.profile.ProfileFragment;\nimport com.google.firebase.firestore.FirebaseFirestore;\nimport com.ismaeldivita.chipnavigation.ChipNavigationBar;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.fragment.app.Fragment;\nimport androidx.fragment.app.FragmentManager;\nimport androidx.fragment.app.FragmentPagerAdapter;\nimport androidx.viewpager.widget.ViewPager;\n\nimport java.util.ArrayList;\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private ChipNavigationBar chipNavigationBar;\n    private ViewPager viewPager;\n    private Fragment fragment=null;\n    private int index = 0;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        setTheme(R.style.AppThemeHome);\n        super.onCreate(savedInstanceState);\n\n        setContentView(R.layout.activity_main);\n        chipNavigationBar=findViewById(R.id.chipNavigation);\n        viewPager = findViewById(R.id.view_pager11);\n        chipNavigationBar.setItemSelected(R.id.home,true);\n\n        ViewPagerAdapter viewPagerAdapter = new ViewPagerAdapter(getSupportFragmentManager());\n        viewPager.setAdapter(viewPagerAdapter);\n\n        final ViewPagerAdapter adapter = new ViewPagerAdapter(getSupportFragmentManager());\n        final DashboardFragment fragment_1 = new DashboardFragment();\n        final GraphicFragment fragment_2 = new GraphicFragment();\n        final MapFragment fragment_3 = new MapFragment();\n        final ProfileFragment fragment_4 = new ProfileFragment();\n        adapter.addFragment(fragment_1);\n        adapter.addFragment(fragment_2);\n        adapter.addFragment(fragment_3);\n        adapter.addFragment(fragment_4);\n        viewPager.setAdapter(adapter);\n        viewPager.setOffscreenPageLimit(4);\n        index = 1;\n        chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {\n            @Override\n            public void onItemSelected(int i) {\n                switch(i){\n                    case R.id.home:\n                        viewPager.setCurrentItem(0);\n                        break;\n                    case R.id.graphics:\n                        viewPager.setCurrentItem(1);\n                        break;\n                    case R.id.notifications:\n                        viewPager.setCurrentItem(2);\n                        break;\n                    case R.id.profile:\n                        viewPager.setCurrentItem(3);\n                        break;\n                }\n\n\n            }\n        });\n\n\n        viewPager.addOnPageChangeListener(new ViewPager.OnPageChangeListener() {\n            @Override\n            public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {\n\n            }\n\n            @Override\n            public void onPageSelected(int position) {\n\n                if (position == 0){\n\n                    chipNavigationBar.setItemSelected(R.id.home, true);\n                    chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {\n                        @Override\n                        public void onItemSelected(int id) {\n\n                            switch(id){\n                                case R.id.home:\n                                    viewPager.setCurrentItem(0);\n                                    break;\n                                case R.id.graphics:\n                                    viewPager.setCurrentItem(1);\n                                    break;\n                                case R.id.notifications:\n                                    viewPager.setCurrentItem(2);\n                                    break;\n                                case R.id.profile:\n                                    viewPager.setCurrentItem(3);\n                                    break;\n                            }\n                        }\n                    });\n\n                    index = 0;\n\n                }else if (position == 1){\n\n                    chipNavigationBar.setItemSelected(R.id.graphics, true);\n\n                    if(index == 0 || index == 2){\n\n                        //fragment_2.downloadPlates_2();\n                    }\n                    index = 1;\n                    //Toast.makeText(Home.this, \"\"+index, Toast.LENGTH_SHORT).show();\n                }else if (position == 2){\n\n                    chipNavigationBar.setItemSelected(R.id.notifications, true);\n                    chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {\n                        @Override\n                        public void onItemSelected(int id) {\n\n                            switch(id){\n                                case R.id.home:\n                                    viewPager.setCurrentItem(0);\n                                    break;\n                                case R.id.graphics:\n                                    viewPager.setCurrentItem(1);\n                                    break;\n                                case R.id.notifications:\n                                    viewPager.setCurrentItem(2);\n                                    break;\n                                case R.id.profile:\n                                    viewPager.setCurrentItem(3);\n                                    break;\n                            }\n                        }\n                    });\n\n                    index = 2;\n\n                }else if (position == 3){\n\n                    chipNavigationBar.setItemSelected(R.id.profile, true);\n                    chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {\n                        @Override\n                        public void onItemSelected(int id) {\n\n                            switch(id){\n                                case R.id.home:\n                                    viewPager.setCurrentItem(0);\n                                    break;\n                                case R.id.graphics:\n                                    viewPager.setCurrentItem(1);\n                                    break;\n                                case R.id.notifications:\n                                    viewPager.setCurrentItem(2);\n                                    break;\n                                case R.id.profile:\n                                    viewPager.setCurrentItem(3);\n                                    break;\n                            }\n                        }\n                    });\n\n                    index = 3;\n                }\n            }\n\n            @Override\n            public void onPageScrollStateChanged(int state) {\n\n            }\n        });\n    }\n\n\n    class ViewPagerAdapter extends FragmentPagerAdapter {\n\n\n\n        private ArrayList<Fragment> fragments;\n        private ArrayList<String> titles;\n\n        ViewPagerAdapter (FragmentManager fm){\n            super(fm);\n            this.fragments = new ArrayList<>();\n            this.titles = new ArrayList<>();\n\n        }\n\n        @NonNull\n        @Override\n        public Fragment getItem(int position) {\n            return fragments.get(position);\n        }\n\n        @Override\n        public int getCount() {\n            return fragments.size();\n        }\n\n        public void addFragment(Fragment fragment){\n            fragments.add(fragment);\n\n        }\n\n    }\n\n\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/MainActivity.java	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ app/src/main/java/com/example/infinitycrop/MainActivity.java	(date 1608935788889)
---@@ -1,6 +1,8 @@
--- package com.example.infinitycrop;
--- import android.os.Bundle;
---+import android.widget.Toast;
--- 
---+import com.example.infinitycrop.ui.control_panel.Control_panelFragment;
--- import com.example.infinitycrop.ui.dashboard.DashboardFragment;
--- import com.example.infinitycrop.ui.graphic.GraphicFragment;
--- import com.example.infinitycrop.ui.map.MapFragment;
---@@ -32,6 +34,10 @@
---         setTheme(R.style.AppThemeHome);
---         super.onCreate(savedInstanceState);
--- 
---+        Bundle extras = getIntent().getExtras();
---+        String s = extras.getString("machine");
---+        Toast.makeText(this, s , Toast.LENGTH_SHORT).show();
---+
---         setContentView(R.layout.activity_main);
---         chipNavigationBar=findViewById(R.id.chipNavigation);
---         viewPager = findViewById(R.id.view_pager11);
---@@ -42,7 +48,8 @@
--- 
---         final ViewPagerAdapter adapter = new ViewPagerAdapter(getSupportFragmentManager());
---         final DashboardFragment fragment_1 = new DashboardFragment();
----        final GraphicFragment fragment_2 = new GraphicFragment();
---+        //final GraphicFragment fragment_2 = new GraphicFragment();
---+        final Control_panelFragment fragment_2 = new Control_panelFragment();
---         final MapFragment fragment_3 = new MapFragment();
---         final ProfileFragment fragment_4 = new ProfileFragment();
---         adapter.addFragment(fragment_1);
---Index: app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.list_machine;\r\n\r\nimport android.content.Intent;\r\nimport android.media.Image;\r\nimport android.os.Bundle;\r\nimport android.os.Parcelable;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.ItemTouchHelper;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.logmail.RegisterActivity;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerAdapter;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.Query;\r\n\r\nimport java.text.BreakIterator;\r\nimport java.util.Map;\r\n\r\npublic class MainActivityMachineList extends AppCompatActivity {\r\n    private FirebaseFirestore firebaseFirestore;\r\n    private RecyclerView mFirestoreList;\r\n    private Adapter adapter;\r\n    private FirebaseAuth firebaseAuth;\r\n    Button addBtn;//boton añadir nueva maquina\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_list_machines);\r\n        firebaseFirestore=FirebaseFirestore.getInstance();\r\n        mFirestoreList=findViewById(R.id.firestore_list);\r\n        firebaseAuth=FirebaseAuth.getInstance();\r\n        String uid=firebaseAuth.getUid();\r\n        //Query\r\n        Query query=firebaseFirestore\r\n                .collection(\"Machine\")\r\n                .whereEqualTo(\"userUID\", uid)\r\n                .orderBy(\"priority\",Query.Direction.ASCENDING);\r\n        //RecyclerView\r\n        FirestoreRecyclerOptions<MachineModel> options=new FirestoreRecyclerOptions.Builder<MachineModel>()\r\n                .setQuery(query, MachineModel.class)\r\n                .build();\r\n        //View Holder\r\n        adapter= new Adapter(options);\r\n        mFirestoreList.setHasFixedSize(true);\r\n        mFirestoreList.setLayoutManager(new LinearLayoutManager(this));\r\n        mFirestoreList.setAdapter(adapter);\r\n\r\n        new ItemTouchHelper(new ItemTouchHelper.SimpleCallback(0,\r\n                ItemTouchHelper.LEFT | ItemTouchHelper.RIGHT) {\r\n            @Override\r\n            public boolean onMove(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder, RecyclerView.ViewHolder target) {\r\n                return false;\r\n            }\r\n            @Override\r\n            public void onSwiped(RecyclerView.ViewHolder viewHolder, int direction) {\r\n                Toast.makeText(getApplicationContext(), \"Maquina eliminada con éxito\", Toast.LENGTH_SHORT).show();\r\n                adapter.deleteItem(viewHolder.getAdapterPosition());\r\n            }\r\n        }).attachToRecyclerView(mFirestoreList);\r\n\r\n        adapter.setOnItemClickListener(new Adapter.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(DocumentSnapshot documentSnapshot, int position) {\r\n                //documentSnapshot.getData() -> devuelve all que tiene la maquina en firebase\r\n                MachineModel machine = documentSnapshot.toObject(MachineModel.class);\r\n                String id = documentSnapshot.getId();\r\n                String path = documentSnapshot.getReference().getPath(); //devuelve ruta en firebase Machine\\madara\r\n                /*Toast.makeText(MainActivityMachineList.this,\r\n                        \"Position: \" + position + \" ID: \" + id +\"  algo   \"+ documentSnapshot.getData(), Toast.LENGTH_SHORT).show();*/\r\n                Intent intent = new Intent(getBaseContext(), MainActivity.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n        FloatingActionButton addbtn = (FloatingActionButton) findViewById(R.id.button_add_machine);\r\n        addbtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent (getApplicationContext(), AddMachine.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        adapter.stopListening();\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        adapter.startListening();\r\n    }\r\n}\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(date 1608935788825)
---@@ -84,6 +84,7 @@
---                 /*Toast.makeText(MainActivityMachineList.this,
---                         "Position: " + position + " ID: " + id +"  algo   "+ documentSnapshot.getData(), Toast.LENGTH_SHORT).show();*/
---                 Intent intent = new Intent(getBaseContext(), MainActivity.class);
---+                intent.putExtra("machine", id);
---                 startActivity(intent);
---             }
---         });
---Index: comun/src/main/java/com/example/comun/Mqtt.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.comun;\n\npublic class Mqtt {\n    public static final String TAG = \"MQTT\";\n    public static final String topicRoot=\"infinity/senyal/\";\n\n\n    //Reemplaza equipo por el nombre de tu equipo de prácticas\n    public static final int qos = 1;\n    public static final String broker = \"tcp://broker.hivemq.com:1883\";\n    public static final String clientId = \"IotTestInfinity123434\";\n//Reemplaza ClientId con un valor diferente\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ comun/src/main/java/com/example/comun/Mqtt.java	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ comun/src/main/java/com/example/comun/Mqtt.java	(date 1607641263326)
---@@ -8,6 +8,6 @@
---     //Reemplaza equipo por el nombre de tu equipo de prácticas
---     public static final int qos = 1;
---     public static final String broker = "tcp://broker.hivemq.com:1883";
----    public static final String clientId = "IotTestInfinity123434";
---+    public static final String clientId = "IotTestInfinity1234";
--- //Reemplaza ClientId con un valor diferente
--- }
---\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20_[Default_Changelist]/shelved.patch
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--@@ -1,248 +0,0 @@
---Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.Manifest;\r\nimport android.app.Activity;\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.content.res.ColorStateList;\r\nimport android.location.Address;\r\nimport android.location.Geocoder;\r\nimport android.location.Location;\r\nimport android.location.LocationManager;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.os.StrictMode;\r\nimport android.provider.Settings;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvModel;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.location.FusedLocationProviderClient;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.annotations.NotNull;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.squareup.okhttp.Call;\r\nimport com.squareup.okhttp.Callback;\r\nimport com.squareup.okhttp.OkHttpClient;\r\nimport com.squareup.okhttp.Request;\r\nimport com.squareup.okhttp.Response;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link DashboardFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class DashboardFragment extends Fragment implements MqttCallback{\r\n\r\n    private RecyclerView recyclerView;\r\n    private StaticRvAdapter staticRvAdapter;\r\n    private TabLayout tabLayout;\r\n    private ViewPager viewPager;\r\n    //WEATHER\r\n    private static  final int REQUEST_LOCATION=1;\r\n    double lat;\r\n    double longi;\r\n\r\n    TextView showLocationTxt;\r\n\r\n    LocationManager locationManager;\r\n    String latitude,longitude;\r\n\r\n    TextView view_city;\r\n    TextView view_temp;\r\n    TextView view_desc;\r\n    TextView view_country;\r\n\r\n    ImageView view_weather;\r\n    //\r\n\r\n\r\n    public static MqttClient client = null;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public DashboardFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment DashboardFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static DashboardFragment newInstance(String param1, String param2) {\r\n        DashboardFragment fragment = new DashboardFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_dashboard, container, false);\r\n        //FIREBASE\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        final FirebaseUser usuario = mAuth.getCurrentUser();\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=usuario.getUid();\r\n        //guardo el nombre en un textView\r\n        /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);\r\n        String res=\"Hola\"+\" \"+usuario.getDisplayName();\r\n        nombre.setText(res);\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(usuario.getDisplayName() == null){\r\n                    String res1=\"Hola\"+\" \"+snapshot.getString(\"username\");\r\n                    nombre.setText(res1);\r\n                }\r\n            }\r\n        });*/\r\n\r\n        //switch methods\r\n /*     Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });*/\r\n\r\n\r\n        //WEATHER\r\n        ActivityCompat.requestPermissions(getActivity(),new String[]\r\n                {Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n\r\n        view_city =v.findViewById(R.id.town);\r\n        view_city.setText(\"\");\r\n        view_temp =v.findViewById(R.id.temp);\r\n        view_temp.setText(\"\");\r\n        view_desc =v.findViewById(R.id.desc);\r\n        view_desc.setText(\"\");\r\n        view_country=v.findViewById(R.id.txtCountry);\r\n        view_country.setText(\"\");\r\n        view_weather =v.findViewById(R.id.wheather_image);\r\n\r\n        locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);\r\n        inicioGPS();\r\n        //\r\n\r\n\r\n\r\n\r\n        //RECYCLER VIEW\r\n        ArrayList<StaticRvModel> item=new ArrayList<>();\r\n        item.add(new StaticRvModel(R.drawable.icons_sun,\"Soleado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_night_mode,\"Nocturno\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_energy_saving,\"Ahorro\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_power_off,\"Apagado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_custom,\"Custom\"));\r\n\r\n        final TextView medidasT=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidasH=v.findViewById(R.id.medidaHumedadGeneral);\r\n        final TextView medidasS=v.findViewById(R.id.medidaSalinidadGeneral);\r\n        final TextView medidasL=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n\r\n        recyclerView=v.findViewById(R.id.rv_1);\r\n        staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(),LinearLayoutManager.HORIZONTAL,false));\r\n        recyclerView.setAdapter(staticRvAdapter);\r\n\r\n\r\n        //TABS\r\n        tabLayout = v.findViewById(R.id.tab_layout);\r\n        viewPager = v.findViewById(R.id.view_pager);\r\n         //Array\r\n        ArrayList<String> arrayList = new ArrayList<>();\r\n\r\n        //set up with viewpager\r\n        tabLayout.setupWithViewPager(viewPager);\r\n\r\n        TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());\r\n        //Pestañas\r\n        adapter.addFrag(new GeneralFragment(),\"General\");\r\n        adapter.addFrag(new Planta1Fragment(),\"Planta 1\");\r\n        adapter.addFrag(new Planta2Fragment(),\"Planta 2\");\r\n\r\n        viewPager.setAdapter(adapter );\r\n\r\n        /*((MainActivity)getActivity()).ola();*/\r\n     /*   //LEER DATOS FIREBASE\r\n        //Temperatura\r\n       DocumentReference documentTemperatura=fStore.collection(\"SensoresA-T\").document(\"Temperatura\");\r\n        documentTemperatura.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediTemp=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasT.setText(resMediTemp);\r\n            }\r\n        });\r\n        //Humedad\r\n        DocumentReference documentHumedad=fStore.collection(\"SensoresA-T\").document(\"Humedad\");\r\n        documentHumedad.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediHum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasH.setText(resMediHum);\r\n            }\r\n        });\r\n        //Iluminación\r\n        DocumentReference documentIluminación=fStore.collection(\"SensoresA-T\").document(\"Iluminación\");\r\n        documentIluminación.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIlum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasL.setText(resMediIlum);\r\n            }\r\n        });\r\n        //Temperatura ambiente\r\n        DocumentReference documentambiente=fStore.collection(\"SensoresA-T\").document(\"Temperatura ambiente\");\r\n        documentambiente.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIAmb=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasS.setText(resMediIAmb);\r\n            }\r\n        });\r\n\r\n      */\r\n\r\n        return v;\r\n    }\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n\r\n\r\n    //WEATHER METHODS\r\n    private void api_key(final String City) {\r\n        OkHttpClient client = new OkHttpClient();\r\n\r\n        Request request = new Request.Builder()\r\n                .url(\"https://api.openweathermap.org/data/2.5/weather?q=\" + City + \"&appid=a6f41d947e0542a26580bcd5c3fb90ef&units=metric\")\r\n                .get()\r\n                .build();\r\n        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n        StrictMode.setThreadPolicy(policy);\r\n        try {\r\n            Response response = client.newCall(request).execute();\r\n            client.newCall(request).enqueue(new Callback() {\r\n                @Override\r\n                public void onFailure(Request request, IOException e) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onResponse(Response response) throws IOException {\r\n                    String responseData = response.body().string();\r\n                    try {\r\n                        JSONObject json = new JSONObject(responseData);\r\n                        JSONArray array = json.getJSONArray(\"weather\");\r\n                        JSONObject object = array.getJSONObject(0);\r\n\r\n                        String description = object.getString(\"description\");\r\n                        String icons = object.getString(\"icon\");\r\n\r\n                        JSONObject temp1 = json.getJSONObject(\"main\");\r\n                        Double Temperature = temp1.getDouble(\"temp\");\r\n\r\n                        setText(view_city, City);\r\n\r\n                        String temps = Math.round(Temperature) + \" °C\";\r\n                        setText(view_temp, temps);\r\n                        setText(view_desc, description);\r\n                        setImage(view_weather, icons);\r\n\r\n                    } catch (JSONException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n\r\n            });\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    private void setText(final TextView text, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                text.setText(value);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setImage(final ImageView imageView, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                //paste switch\r\n                switch (value) {\r\n                    case \"01d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"01n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"02d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"02n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"03d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"03n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"04d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"04n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"09d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"09n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"10d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"10n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"11d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"11n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"13d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    case \"13n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    default:\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.wheather));\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    //App location\r\n    private void getLocation() {\r\n\r\n        //Check Permissions again\r\n\r\n        /*if (ActivityCompat.checkSelfPermission(\r\n                getContext(),Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(\r\n                getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n        } else {\r\n\r\n            Location LocationNetwork=locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);\r\n             if (LocationNetwork !=null)\r\n            {\r\n                double lat=LocationNetwork.getLatitude();\r\n                double longi=LocationNetwork.getLongitude();\r\n\r\n                latitude=String.valueOf(lat);\r\n                longitude=String.valueOf(longi);\r\n                loc_func(LocationNetwork);\r\n                api_key(String.valueOf(view_city.getText()));\r\n                showLocationTxt.setText(\"Your Location:\"+\"\\n\"+\"Latitude= \"+latitude+\"\\n\"+\"Longitude= \"+longitude);\r\n            }\r\n\r\n        }*/\r\n\r\n    }\r\n\r\n    private void OnGPS() {\r\n\r\n        final AlertDialog.Builder builder= new AlertDialog.Builder(getContext());\r\n\r\n        builder.setMessage(\"Enable GPS\").setCancelable(false).setPositiveButton(\"YES\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS));\r\n                getLocation();\r\n            }\r\n        }).setNegativeButton(\"NO\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                dialog.cancel();\r\n            }\r\n        });\r\n        final AlertDialog alertDialog=builder.create();\r\n        alertDialog.show();\r\n    }\r\n\r\n    private void loc_func(Location location){\r\n        try {\r\n            Geocoder geocoder=new Geocoder(getContext());\r\n            List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);\r\n            String address = addresses.get(0).getSubLocality();\r\n            String cityName = addresses.get(0).getLocality();\r\n            String stateName = addresses.get(0).getAdminArea();\r\n            String country = addresses.get(0).getCountryName();\r\n            //txt_paddress.setText(address);\r\n            view_city.setText(cityName);\r\n            view_country.setText(country);\r\n            //txt_state.setText(stateName);*/\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            Toast.makeText(getContext(), \"Error:\"+e, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void inicioGPS(){\r\n\r\n\r\n        //Check gps is enable or not\r\n\r\n        if (!locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))\r\n        {\r\n            //Write Function To enable gps\r\n\r\n            OnGPS();\r\n        }\r\n        else\r\n        {\r\n            //GPS is already On then\r\n\r\n            getLocation();\r\n        }\r\n    }\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
---+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(date 1609523605203)
---@@ -201,7 +201,7 @@
---         view_weather =v.findViewById(R.id.wheather_image);
--- 
---         locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);
----        inicioGPS();
---+       /* inicioGPS();*/
---         //
--- 
--- 
---@@ -501,7 +501,7 @@
---     }
--- 
---     //App location
----    private void getLocation() {
---+   /* private void getLocation() {
--- 
---         //Check Permissions again
--- 
---@@ -519,12 +519,12 @@
--- 
---                 latitude=String.valueOf(lat);
---                 longitude=String.valueOf(longi);
----                loc_func(LocationNetwork);
----                api_key(String.valueOf(view_city.getText()));
---+               /* loc_func(LocationNetwork);*/
---+              /*  api_key(String.valueOf(view_city.getText()));
---                 showLocationTxt.setText("Your Location:"+"\n"+"Latitude= "+latitude+"\n"+"Longitude= "+longitude);
---             }
--- 
----        }*/
---+        }
--- 
---     }
--- 
---@@ -553,8 +553,8 @@
---         try {
---             Geocoder geocoder=new Geocoder(getContext());
---             List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);
----            String address = addresses.get(0).getSubLocality();
----            String cityName = addresses.get(0).getLocality();
---+            /*String address = addresses.get(0).getSubLocality();*/
---+           /* String cityName = addresses.get(0).getLocality();
---             String stateName = addresses.get(0).getAdminArea();
---             String country = addresses.get(0).getCountryName();
---             //txt_paddress.setText(address);
---@@ -562,7 +562,7 @@
---             view_country.setText(country);
---             //txt_state.setText(stateName);*/
--- 
----        } catch (IOException e) {
---+       /* } catch (IOException e) {
---             e.printStackTrace();
---             Toast.makeText(getContext(), "Error:"+e, Toast.LENGTH_SHORT).show();
---         }
---@@ -583,7 +583,7 @@
---         {
---             //GPS is already On then
--- 
----            getLocation();
----        }
----    }
---+            /*getLocation();*/
---+ /*       }
---+    }*/
--- }
---\ No newline at end of file
---Index: app/src/main/res/layout/fragment_login.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.login.LogActivity\" >\r\n\r\n    <ImageView\r\n        android:id=\"@+id/imageView4\"\r\n        android:layout_width=\"254dp\"\r\n        android:layout_height=\"188dp\"\r\n        android:contentDescription=\"@string/title_wellcome_login\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"\r\n        app:layout_constraintVertical_bias=\"0.0\"\r\n        app:srcCompat=\"@drawable/stickerlog\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/textView3\"\r\n        android:layout_width=\"184dp\"\r\n        android:layout_height=\"20dp\"\r\n        android:layout_marginTop=\"40dp\"\r\n        android:layout_marginEnd=\"52dp\"\r\n        android:text=\"@string/title_wellcome_login\"\r\n        android:textColor=\"@color/colorPrimaryLight\"\r\n        android:textSize=\"16sp\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/imageView4\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n    <TextView\r\n        android:id=\"@+id/textView4\"\r\n        android:layout_width=\"151dp\"\r\n        android:layout_height=\"32dp\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:layout_marginEnd=\"84dp\"\r\n        android:text=\"@string/title_orderLog\"\r\n        android:textColor=\"@color/colorPrimary\"\r\n        android:textSize=\"26sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/imageView4\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/textView3\" />\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"530dp\"\r\n        android:orientation=\"vertical\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/imageView4\"\r\n        app:layout_constraintVertical_bias=\"0.527\">\r\n\r\n        <ImageView\r\n            android:id=\"@+id/imageView3\"\r\n            android:layout_width=\"254dp\"\r\n            android:layout_height=\"146dp\"\r\n            android:layout_gravity=\"center_horizontal\"\r\n            android:layout_marginBottom=\"70dp\"\r\n            android:contentDescription=\"@string/title_wellcome_login\"\r\n            app:srcCompat=\"@drawable/logo_and_text\" />\r\n\r\n        <!--<Button\r\n               android:id=\"@+id/btn_facebook\"\r\n               android:layout_width=\"match_parent\"\r\n               android:layout_height=\"wrap_content\"\r\n               android:background=\"@drawable/btn_facebook\"\r\n               android:drawableLeft=\"@drawable/ic_facebook_icon\"\r\n               android:paddingLeft=\"20dp\"\r\n               android:textColor=\"#FFFF\"\r\n               android:layout_marginLeft=\"20dp\"\r\n               android:layout_marginRight=\"20dp\"\r\n               android:text=\"@string/title_cont_faceboock\" /> -->\r\n        <com.facebook.login.widget.LoginButton\r\n            android:id=\"@+id/btn_facebook\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:background=\"@drawable/btn_facebook\"\r\n            android:drawableLeft=\"@drawable/ic_facebook_icon\"\r\n            android:paddingLeft=\"20dp\"\r\n            android:textColor=\"#FFFF\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginRight=\"20dp\"\r\n            android:text=\"@string/title_cont_faceboock\" />\r\n        <!-- <com.facebook.login.widget.LoginButton\r\n            android:id=\"@+id/login_button\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center_horizontal\"\r\n            android:layout_marginTop=\"30dp\"\r\n            android:layout_marginBottom=\"30dp\" />  -->\r\n\r\n        <com.google.android.gms.common.SignInButton\r\n            android:id=\"@+id/btn_google\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginRight=\"20dp\"\r\n            android:background=\"@drawable/btn_google\"\r\n            android:drawableLeft=\"@drawable/ic_google_icon\"\r\n            android:text=\"@string/title_cont_google\"\r\n            android:textColor=\"#000000\" />\r\n\r\n        <Button\r\n            android:id=\"@+id/btn_mail\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginRight=\"20dp\"\r\n            android:background=\"@drawable/btn_mail\"\r\n            android:drawableLeft=\"@drawable/ic_mail_icon\"\r\n            android:onClick=\"Email\"\r\n            android:paddingLeft=\"20dp\"\r\n            android:text=\"@string/title_cont_mail\"\r\n            android:textColor=\"#000000\" />\r\n\r\n    </LinearLayout>\r\n\r\n\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/res/layout/fragment_login.xml	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
---+++ app/src/main/res/layout/fragment_login.xml	(date 1609520835155)
---@@ -5,7 +5,7 @@
---     xmlns:tools="http://schemas.android.com/tools"
---     android:layout_width="match_parent"
---     android:layout_height="match_parent"
----    tools:context=".ui.login.LogActivity" >
---+     >
--- 
---     <ImageView
---         android:id="@+id/imageView4"
---Index: app/src/main/AndroidManifest.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.infinitycrop\">\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/>\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\"/>\r\n    <uses-permission android:name=\"android.permission.INTERNET\"/>\r\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" />\r\n    <!--Permisos Qr-->\r\n    <uses-permission android:name=\"android.permission.CAMERA\"/>\r\n    <uses-feature android:name=\"android.hardware.camera\"></uses-feature>\r\n    <uses-feature android:name=\"android.hardware.camera.autofocus\"></uses-feature>\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher\"\r\n        android:theme=\"@style/AppThemeHome\"\r\n        >\r\n\r\n        <activity android:name=\".MainActivity\" android:theme=\"@style/SplashTheme\">\r\n        </activity>\r\n        <service android:name=\"com.example.infinitycrop.ui.service.ServicioMqtt\" />\r\n        <activity android:name=\"com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\">\r\n\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.HelpProfile\">\r\n\r\n        </activity>\r\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\"></activity>\r\n        <activity android:name=\".ui.list_machine.AddMachine\"></activity>\r\n        <activity android:name=\".ui.logmail.RegisterActivity\"></activity>\r\n        <activity android:name=\".ui.logmail.LoginActivity\"></activity>\r\n        <activity android:name=\".ui.list_machine.CaptureAct\"></activity>\r\n        <activity android:name=\"com.example.infinitycrop.ui.login.LogActivity\"></activity>\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\"></activity>\r\n        <activity android:name=\".ui.profile.settings.ModifyProfile\"></activity>\r\n\r\n\r\n\r\n\r\n        <meta-data android:name=\"com.google.android.geo.API_KEY\"\r\n            android:value=\"@string/google_maps_key\" />\r\n\r\n        <meta-data android:name=\"com.facebook.sdk.ApplicationId\"\r\n            tools:replace=\"android:value\"\r\n            android:value=\"@string/facebook_app_id\"/>\r\n        <meta-data\r\n            android:name=\"preloaded_fonts\"\r\n            android:resource=\"@array/preloaded_fonts\" />\r\n\r\n\r\n    </application>\r\n\r\n</manifest>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/AndroidManifest.xml	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
---+++ app/src/main/AndroidManifest.xml	(date 1609520835161)
---@@ -44,7 +44,7 @@
---         <activity android:name=".ui.list_machine.CaptureAct"></activity>
---         <activity android:name="com.example.infinitycrop.ui.login.LogActivity"></activity>
---         <activity android:name=".ui.LoadAnimations.IntroductoryActivity2"></activity>
----        <activity android:name=".ui.profile.settings.ModifyProfile"></activity>
---+        <activity android:name=".ui.LoadAnimations.LogprimeraActivity"></activity>
--- 
--- 
--- 
---Index: app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.list_machine;\r\n\r\nimport android.content.Intent;\r\nimport android.media.Image;\r\nimport android.os.Bundle;\r\nimport android.os.Parcelable;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.ItemTouchHelper;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.logmail.RegisterActivity;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerAdapter;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\nimport com.google.android.material.bottomsheet.BottomSheetDialog;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.Query;\r\n\r\nimport java.text.BreakIterator;\r\nimport java.util.Map;\r\n\r\npublic class MainActivityMachineList extends AppCompatActivity {\r\n    private FirebaseFirestore firebaseFirestore;\r\n    private RecyclerView mFirestoreList;\r\n    private Adapter adapter;\r\n    private FirebaseAuth firebaseAuth;\r\n    Button addBtn;//boton añadir nueva maquina\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_list_machines);\r\n        firebaseFirestore=FirebaseFirestore.getInstance();\r\n        mFirestoreList=findViewById(R.id.firestore_list);\r\n        firebaseAuth=FirebaseAuth.getInstance();\r\n        String uid=firebaseAuth.getUid();\r\n        //Query\r\n        Query query=firebaseFirestore\r\n                .collection(\"Machine\")\r\n                .whereEqualTo(\"userUID\", uid)\r\n                .orderBy(\"priority\",Query.Direction.ASCENDING);\r\n        //RecyclerView\r\n        FirestoreRecyclerOptions<MachineModel> options=new FirestoreRecyclerOptions.Builder<MachineModel>()\r\n                .setQuery(query, MachineModel.class)\r\n                .build();\r\n        //View Holder\r\n        adapter= new Adapter(options);\r\n        mFirestoreList.setHasFixedSize(true);\r\n        mFirestoreList.setLayoutManager(new LinearLayoutManager(this));\r\n        mFirestoreList.setAdapter(adapter);\r\n\r\n        new ItemTouchHelper(new ItemTouchHelper.SimpleCallback(0,\r\n                ItemTouchHelper.LEFT | ItemTouchHelper.RIGHT) {\r\n            @Override\r\n            public boolean onMove(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder, RecyclerView.ViewHolder target) {\r\n                return false;\r\n            }\r\n            @Override\r\n            public void onSwiped(RecyclerView.ViewHolder viewHolder, int direction) {\r\n                Toast.makeText(getApplicationContext(), \"Maquina eliminada con éxito\", Toast.LENGTH_SHORT).show();\r\n                adapter.deleteItem(viewHolder.getAdapterPosition());\r\n            }\r\n        }).attachToRecyclerView(mFirestoreList);\r\n\r\n        adapter.setOnItemClickListener(new Adapter.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(DocumentSnapshot documentSnapshot, int position) {\r\n                //documentSnapshot.getData() -> devuelve all que tiene la maquina en firebase\r\n                MachineModel machine = documentSnapshot.toObject(MachineModel.class);\r\n                final String id = documentSnapshot.getId();\r\n                final String path = documentSnapshot.getString(\"description\"); //devuelve ruta en firebase Machine\\madara\r\n                //botttom sheet\r\n                final BottomSheetDialog bottomSheetDialog=new BottomSheetDialog(MainActivityMachineList.this);\r\n                bottomSheetDialog.setContentView(R.layout.machine_bottom_sheet);\r\n                Button btnenter=bottomSheetDialog.findViewById(R.id.enterMachineButton);\r\n                Button btnmodify=bottomSheetDialog.findViewById(R.id.madifyMachineButton);\r\n                Button btncancel=bottomSheetDialog.findViewById(R.id.cancelMachineButton);\r\n                btnenter.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        Intent intent = new Intent(getBaseContext(), MainActivity.class);\r\n                        intent.putExtra(\"machine\", id);\r\n                        intent.putExtra(\"description\", path);\r\n                        startActivity(intent);\r\n                    }\r\n                });\r\n                btnmodify.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        //poner aca Intent para acceder al layout de modificar maquina\r\n                        //hay que pasarle un intent con extra como he hecho en el onClick de arriba\r\n                        //lo que necesitas para modificar es la variable id\r\n                        //encuentras en firebase la maquina con el id y haces la magia de modificar etc..\r\n                        //lo de maquina a favoritos es facil , si es 1 es favoirto si es 2 no lo es.\r\n                        //ejemplo\r\n                        /*Intent intent = new Intent(getBaseContext(), MainActivity.class);//Main por tu clase\r\n                        intent.putExtra(\"machine\", id);\r\n                        startActivity(intent);*/\r\n                    }\r\n                });\r\n                btncancel.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        bottomSheetDialog.cancel();\r\n                    }\r\n                });\r\n                bottomSheetDialog.show();\r\n\r\n\r\n            }\r\n        });\r\n\r\n        FloatingActionButton addbtn = (FloatingActionButton) findViewById(R.id.button_add_machine);\r\n        addbtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent (getApplicationContext(), AddMachine.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        adapter.stopListening();\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        adapter.startListening();\r\n    }\r\n}\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
---+++ app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(date 1609606384560)
---@@ -50,7 +50,7 @@
---         //Query
---         Query query=firebaseFirestore
---                 .collection("Machine")
----                .whereEqualTo("userUID", uid)
---+               .whereEqualTo("userUID", uid)
---                 .orderBy("priority",Query.Direction.ASCENDING);
---         //RecyclerView
---         FirestoreRecyclerOptions<MachineModel> options=new FirestoreRecyclerOptions.Builder<MachineModel>()
---Index: app/src/main/java/com/example/infinitycrop/ui/login/LogActivity.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.login;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity2;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.MainActivityMachineList;\r\nimport com.example.infinitycrop.ui.logmail.LoginActivity;\r\nimport com.facebook.AccessToken;\r\nimport com.facebook.AccessTokenTracker;\r\nimport com.facebook.CallbackManager;\r\nimport com.facebook.FacebookCallback;\r\nimport com.facebook.FacebookException;\r\nimport com.facebook.login.LoginResult;\r\nimport com.facebook.login.widget.LoginButton;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInAccount;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.common.SignInButton;\r\nimport com.google.android.gms.common.api.ApiException;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthCredential;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FacebookAuthProvider;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.auth.GoogleAuthProvider;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.facebook.FacebookSdk;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\n\r\npublic class LogActivity extends AppCompatActivity{\r\n    /*private GoogleApiClient googleApiClient;\r\n    private SignInButton signInButton;\r\n    public static final int SIGN_IN_CODE = 777;*/\r\n    //Variable para gestionar FirebaseAuth\r\n    private FirebaseAuth mAuth;\r\n    //Agregar cliente de inicio de sesión de Google\r\n    private GoogleSignInClient mGoogleSignInClient;\r\n    //Constante\r\n    int RC_SIGN_IN = 1;\r\n    SignInButton btnLogin,btnGoogle;\r\n    String TAG = \"GoogleSignIn\";\r\n\r\n    private FirebaseAuth.AuthStateListener authStateListener;\r\n    private AccessTokenTracker accessTokenTracker;\r\n    private LoginButton loginButtonFacebook;\r\n    private CallbackManager mCallbackManager;\r\n    private  static  final String TAG2 = \"FacebookAuthentication\";\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.fragment_login);\r\n        /*GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestEmail()\r\n                .build();\r\n        googleApiClient = new GoogleApiClient.Builder(this)\r\n        .enableAutoManage(this, this)\r\n        .addApi(Auth.GOOGLE_SIGN_IN_API,gso)\r\n        .build();\r\n        signInButton =findViewById(R.id.btn_google);\r\n        signInButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = Auth.GoogleSignInApi.getSignInIntent(googleApiClient);\r\n                startActivityForResult(intent,SIGN_IN_CODE);\r\n            }\r\n        });*/\r\n\r\n        //Botones\r\n        btnGoogle=findViewById(R.id.btn_google);\r\n        loginButtonFacebook = findViewById(R.id.btn_facebook);\r\n        loginButtonFacebook.setReadPermissions(\"email\",\"public_profile\");\r\n\r\n        //Listeners\r\n        btnGoogle.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                signIn();\r\n            }\r\n        });\r\n\r\n        // Configurar Google Sign In\r\n        GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestIdToken(getString(R.string.default_web_client_id))\r\n                .requestEmail()\r\n                .build();\r\n        // Crear un GoogleSignInClient con las opciones especificadas por gso.\r\n        mGoogleSignInClient = GoogleSignIn.getClient(this, gso);\r\n\r\n\r\n\r\n        // Inicializar Firebase Auth\r\n        mAuth = FirebaseAuth.getInstance();\r\n        FacebookSdk.sdkInitialize(getApplicationContext());\r\n\r\n        //Facebook\r\n        mCallbackManager = CallbackManager.Factory.create();\r\n        loginButtonFacebook.registerCallback(mCallbackManager, new FacebookCallback<LoginResult>() {\r\n            @Override\r\n            public void onSuccess(LoginResult loginResult) {\r\n                Log.d(TAG2,\"onSuccess\"+loginResult);\r\n                handleFacebookToken(loginResult.getAccessToken());\r\n            }\r\n\r\n            @Override\r\n            public void onCancel() {\r\n                Log.d(TAG2,\"onCancel\");\r\n            }\r\n\r\n            @Override\r\n            public void onError(FacebookException error) {\r\n                Log.d(TAG2,\"onError: \"+error);\r\n            }\r\n\r\n        });\r\n\r\n        authStateListener = new FirebaseAuth.AuthStateListener() {\r\n            @Override\r\n            public void onAuthStateChanged(@NonNull FirebaseAuth firebaseAuth) {\r\n                FirebaseUser user = firebaseAuth.getCurrentUser();\r\n                if(user!=null){\r\n                    Intent dashboardActivity = new Intent(LogActivity.this, MainActivityMachineList.class);\r\n                    startActivity(dashboardActivity);\r\n                    LogActivity.this.finish();\r\n                }\r\n            }\r\n        };\r\n\r\n        accessTokenTracker = new AccessTokenTracker() {\r\n            @Override\r\n            protected void onCurrentAccessTokenChanged(AccessToken oldAccessToken, AccessToken currentAccessToken) {\r\n                if(currentAccessToken == null){\r\n                    mAuth.signOut();\r\n                }\r\n            }\r\n        };\r\n\r\n    }\r\n    private void signIn() {\r\n        Intent signInIntent = mGoogleSignInClient.getSignInIntent();\r\n        startActivityForResult(signInIntent, RC_SIGN_IN);\r\n    }\r\n\r\n    @Override\r\n    public void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        mCallbackManager.onActivityResult(requestCode,resultCode,data);\r\n\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        //Resultado devuelto al iniciar el Intent de GoogleSignInApi.getSignInIntent (...);\r\n        // Result returned from launching the Intent from GoogleSignInApi.getSignInIntent(...);\r\n        if (requestCode == RC_SIGN_IN) {\r\n            Task<GoogleSignInAccount> task = GoogleSignIn.getSignedInAccountFromIntent(data);\r\n            if(task.isSuccessful()){\r\n                try {\r\n                    // Google Sign In was successful, authenticate with Firebase\r\n                    GoogleSignInAccount account = task.getResult(ApiException.class);\r\n                    Log.d(TAG, \"firebaseAuthWithGoogle:\" + account.getId());\r\n                    firebaseAuthWithGoogle(account.getIdToken());\r\n                } catch (ApiException e) {\r\n                    // Google Sign In fallido, actualizar GUI\r\n                    Log.w(TAG, \"Google sign in failed\", e);\r\n                }\r\n            }else{\r\n                Log.d(TAG, \"Error, login no exitoso:\" + task.getException().toString());\r\n                Toast.makeText(this, \"Ocurrio un error. \"+task.getException().toString(),\r\n                        Toast.LENGTH_LONG).show();\r\n            }\r\n        }\r\n    }\r\n    private void firebaseAuthWithGoogle(String idToken) {\r\n        AuthCredential credential = GoogleAuthProvider.getCredential(idToken, null);\r\n        mAuth.signInWithCredential(credential)\r\n                .addOnCompleteListener(this, new OnCompleteListener<AuthResult>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<AuthResult> task) {\r\n                        if (task.isSuccessful()) {\r\n                            FirebaseFirestore db=FirebaseFirestore.getInstance();\r\n                            String userID= mAuth.getCurrentUser().getUid();\r\n                            String name= mAuth.getCurrentUser().getDisplayName();\r\n                            String mail= mAuth.getCurrentUser().getEmail();\r\n                            Map<String, Object> data = new HashMap<>();\r\n                            data.put(\"username\", name);\r\n                            data.put(\"mail\", mail);\r\n                            db.collection(\"Usuarios\").document(userID)\r\n                                    .set(data);\r\n                            /*db.collection(\"Usuarios\").document(userID)\r\n                                    .collection(\"Maquinas\").document(\"fecha\")\r\n                                    .set(data);*/\r\n\r\n                            // Sign in success, update UI with the signed-in user's information\r\n                            Log.d(TAG, \"signInWithCredential:success\");\r\n                            //FirebaseUser user = mAuth.getCurrentUser();\r\n                            //Iniciar DASHBOARD u otra actividad luego del SigIn Exitoso\r\n                            Intent dashboardActivity = new Intent(LogActivity.this, IntroductoryActivity2.class);\r\n                            startActivity(dashboardActivity);\r\n                            LogActivity.this.finish();\r\n                        } else {\r\n                            // If sign in fails, display a message to the user.\r\n                            Log.w(TAG, \"signInWithCredential:failure\", task.getException());\r\n\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n    @Override\r\n    protected void onStart() {\r\n        FirebaseUser user = mAuth.getCurrentUser();\r\n        if(user!=null){ //si no es null el usuario ya esta logueado\r\n            //mover al usuario al dashboard\r\n            Intent dashboardActivity = new Intent(LogActivity.this, MainActivityMachineList.class);\r\n            startActivity(dashboardActivity);\r\n        }\r\n        super.onStart();\r\n        mAuth.addAuthStateListener(authStateListener);\r\n    }\r\n    //metodo para navegar entre activitys con los botones\r\n    public void Email (View view){\r\n        Intent email = new Intent(this, LoginActivity.class);\r\n        startActivity(email);\r\n    }\r\n   /* @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if(requestCode == SIGN_IN_CODE){\r\n            GoogleSignInResult result = Auth.GoogleSignInApi.getSignInResultFromIntent(data);\r\n            handleSignResult(result);\r\n        }\r\n    }\r\n\r\n    private void handleSignResult(GoogleSignInResult result) {\r\n        if (result.isSuccess()){\r\n            goMainScreen();\r\n        }else{\r\n            Toast.makeText(this, \"Error al iniciar sesión\", Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void goMainScreen() {\r\n       Intent intent=new Intent(this, MainActivity.class);\r\n       startActivity(intent);\r\n    }\r\n\r\n    //metodo para navegar entre activitys con los botones\r\n    public void Email (View view){\r\n        Intent email = new Intent(this, LoginActivity.class);\r\n        startActivity(email);\r\n    }\r\n\r\n    @Override\r\n    public void onConnectionFailed(@NonNull ConnectionResult connectionResult) {\r\n\r\n    }*/\r\n    //Funciones Login con facebook\r\n    private void handleFacebookToken(AccessToken token){\r\n        Log.d(TAG2,\"handleFacebookToken\" + token);\r\n\r\n        AuthCredential credential = FacebookAuthProvider.getCredential(token.getToken());\r\n        mAuth.signInWithCredential(credential).addOnCompleteListener(this, new OnCompleteListener<AuthResult>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<AuthResult> task) {\r\n                if(task.isSuccessful()){\r\n                    Log.d(TAG2,\"sing in with credential: successfully\");\r\n                    FirebaseUser user = mAuth.getCurrentUser();\r\n                    if(user!=null){ //si no es null el usuario ya esta logueado\r\n                        Intent dashboardActivity = new Intent(LogActivity.this, MainActivityMachineList.class);\r\n                        startActivity(dashboardActivity);\r\n                    }\r\n                }else{\r\n                    Log.d(TAG2,\"sing in with credential: failed\", task.getException());\r\n                    Toast.makeText(LogActivity.this,\"Authentication Failed\", Toast.LENGTH_SHORT);\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        if(authStateListener != null){\r\n            mAuth.removeAuthStateListener(authStateListener);\r\n            finish();\r\n        }\r\n    }\r\n\r\n}\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/login/LogActivity.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
---+++ app/src/main/java/com/example/infinitycrop/ui/login/LogActivity.java	(date 1609520835136)
---@@ -63,7 +63,7 @@
---     @Override
---     protected void onCreate(Bundle savedInstanceState) {
---         super.onCreate(savedInstanceState);
----        setContentView(R.layout.fragment_login);
---+       /* setContentView(R.layout.fragment_login);*/
---         /*GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)
---                 .requestEmail()
---                 .build();
---Index: app/src/main/java/com/example/infinitycrop/ui/logmail/RegisterActivity.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.logmail;\r\n\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.text.TextUtils;\r\nimport android.view.View;\r\nimport android.widget.EditText;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity2;\r\nimport com.example.infinitycrop.R;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseAuthUserCollisionException;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class RegisterActivity extends AppCompatActivity {\r\n    //objetos visibles\r\n    private EditText Textmail;\r\n    private EditText Textname;\r\n    private EditText Textpassword;\r\n    private LinearLayout Btnregistrar;\r\n    private ProgressDialog progressDialog;\r\n    //objeto firebase\r\n    private FirebaseAuth mAuth;\r\n    private FirebaseFirestore fStore;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_register);\r\n        mAuth = FirebaseAuth.getInstance();\r\n        fStore=FirebaseFirestore.getInstance();\r\n        //referenciamos los views\r\n        Textmail = (EditText) findViewById(R.id.editTextTextPersonName);\r\n        Textname = (EditText) findViewById(R.id.editTextTextPersonName2);\r\n        Textpassword = (EditText) findViewById(R.id.editTextTextPassword);\r\n\r\n        Btnregistrar = (LinearLayout) findViewById(R.id.btn_login);\r\n        progressDialog =new ProgressDialog(this);\r\n\r\n        //atacamos el listener al boton\r\n        Btnregistrar.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                onclick(v);\r\n            }\r\n        });\r\n\r\n\r\n\r\n    }\r\n    public void onclick(View view){\r\n        //invocamos al metodo\r\n        registrarUsuario();\r\n    }\r\n    private void registrarUsuario(){\r\n        //obtendremos el email y la contraseña desde la caja de texto\r\n        final String email = Textmail.getText().toString().trim();\r\n        final String nombre = Textname.getText().toString().trim();\r\n        String password = Textpassword.getText().toString().trim();\r\n\r\n        //verificamos si las cajas estan vacias o no\r\n        if(TextUtils.isEmpty(email)){\r\n            Toast.makeText(this,\"Debes introducir un correo\",Toast.LENGTH_LONG).show();\r\n            return;\r\n        }\r\n        if(TextUtils.isEmpty(password)){\r\n            Toast.makeText(this,\"Debes introducir una contraseña\",Toast.LENGTH_LONG).show();\r\n            return;\r\n        }\r\n        if(TextUtils.isEmpty(nombre)){\r\n            Toast.makeText(this,\"Debes introducir una nombre\",Toast.LENGTH_LONG).show();\r\n            return;\r\n        }\r\n        progressDialog.setMessage(\"Registrando obteniendo contenido en línea...\");\r\n        progressDialog.show();\r\n        //creando un nuevo usuario\r\n        mAuth.createUserWithEmailAndPassword(email,password).addOnCompleteListener( this, new OnCompleteListener<AuthResult>() {\r\n\r\n            @Override\r\n            public void onComplete(@NonNull Task<AuthResult> task) {\r\n                //comprovar si el resultado ha sido resuelto correctamente\r\n                if (task.isSuccessful()) {\r\n\r\n                    //enviar coorreo de confirmación\r\n                    FirebaseUser user = mAuth.getCurrentUser();\r\n                    user.sendEmailVerification().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            Toast.makeText(RegisterActivity.this,\"Verification has been send\",Toast.LENGTH_SHORT);\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n\r\n                            Toast.makeText(RegisterActivity.this,\"Error en el envío de correo\",Toast.LENGTH_SHORT);\r\n                        }\r\n                    });\r\n\r\n                    String userID= mAuth.getCurrentUser().getUid();\r\n                    DocumentReference documentReference=fStore.collection(\"Usuarios\").document(userID);\r\n                    Map<String,Object> datauser=new HashMap<>();\r\n                    datauser.put(\"username\",nombre);\r\n                    datauser.put(\"mail\",email);\r\n                    documentReference.set(datauser).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            Toast.makeText(RegisterActivity.this, \"Iniciando sesión\", Toast.LENGTH_LONG).show();\r\n                            Intent intencion = new Intent (getApplication(), IntroductoryActivity2.class);\r\n                            startActivity(intencion);\r\n                            finish();\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n\r\n                        }\r\n                    });\r\n\r\n\r\n\r\n                } else {\r\n                    if (task.getException() instanceof FirebaseAuthUserCollisionException) {//si se presenta una colisión\r\n                        Toast.makeText(RegisterActivity.this, \"Este Usuario ya existe\", Toast.LENGTH_SHORT).show();\r\n                    } else {\r\n                        Toast.makeText(RegisterActivity.this, \"No se puede registrar este usuario\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n\r\n                }\r\n                progressDialog.dismiss();\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void onStop() {\r\n        finish();\r\n        super.onStop();\r\n    }\r\n}\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/logmail/RegisterActivity.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
---+++ app/src/main/java/com/example/infinitycrop/ui/logmail/RegisterActivity.java	(date 1609552727772)
---@@ -149,9 +149,5 @@
---         });
---     }
--- 
----    @Override
----    public void onStop() {
----        finish();
----        super.onStop();
----    }
---+
--- }
---Index: app/src/main/java/com/example/infinitycrop/ui/LoadAnimations/IntroductoryActivity.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.LoadAnimations;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.app.Activity;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.os.CountDownTimer;\r\nimport android.widget.ImageView;\r\n\r\nimport com.airbnb.lottie.LottieAnimationView;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.login.LogActivity;\r\n\r\nimport static java.security.AccessController.getContext;\r\n\r\npublic class IntroductoryActivity extends AppCompatActivity {\r\n    ImageView logo,splashImg;\r\n    LottieAnimationView lottieAnimationView;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_introductory);\r\n        logo = findViewById(R.id.log);\r\n        splashImg = findViewById(R.id.img);\r\n        lottieAnimationView = findViewById(R.id.lottie);\r\n\r\n        splashImg.animate().translationY(-4000).setDuration(1000).setStartDelay(4000);\r\n        logo.animate().translationY(4000).setDuration(1000).setStartDelay(4000);\r\n        lottieAnimationView.animate().translationY(1600).setDuration(800).setStartDelay(3900);\r\n\r\n        if (this.equals(0)) {\r\n            finish();\r\n        }\r\n        new CountDownTimer(4660, 1000) {\r\n\r\n            public void onTick(long millisUntilFinished) {\r\n\r\n\r\n            }\r\n\r\n\r\n            public void onFinish() {\r\n                Intent intent= new Intent (getApplicationContext(), LogActivity.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n\r\n        }.start();\r\n\r\n    }\r\n    @Override\r\n    public void onStop() {\r\n        finish();\r\n        super.onStop();\r\n    }\r\n\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/LoadAnimations/IntroductoryActivity.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
---+++ app/src/main/java/com/example/infinitycrop/ui/LoadAnimations/IntroductoryActivity.java	(date 1609520835167)
---@@ -28,7 +28,7 @@
--- 
---         splashImg.animate().translationY(-4000).setDuration(1000).setStartDelay(4000);
---         logo.animate().translationY(4000).setDuration(1000).setStartDelay(4000);
----        lottieAnimationView.animate().translationY(1600).setDuration(800).setStartDelay(3900);
---+        lottieAnimationView.animate().translationY(1400).setDuration(800).setStartDelay(3900);
--- 
---         if (this.equals(0)) {
---             finish();
---@@ -42,7 +42,7 @@
--- 
--- 
---             public void onFinish() {
----                Intent intent= new Intent (getApplicationContext(), LogActivity.class);
---+                Intent intent= new Intent (getApplicationContext(), LogprimeraActivity.class);
---                 startActivity(intent);
--- 
---             }
---Index: app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.profile;\r\n\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.graphics.Bitmap;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.util.LruCache;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.android.volley.RequestQueue;\r\nimport com.android.volley.toolbox.ImageLoader;\r\nimport com.android.volley.toolbox.NetworkImageView;\r\nimport com.android.volley.toolbox.Volley;\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.MainActivityMachineList;\r\nimport com.example.infinitycrop.ui.login.LogActivity;\r\nimport com.example.infinitycrop.ui.profile.settings.AboutInfinityCrap;\r\nimport com.example.infinitycrop.ui.profile.settings.HelpProfile;\r\n//import com.example.infinitycrop.ui.profile.settings.ModifyProfile;\r\nimport com.firebase.ui.auth.AuthUI;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link ProfileFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class ProfileFragment extends Fragment {\r\n    //atributos para confirmación de correo\r\n    private FirebaseUser us;\r\n    private TextView txtverf;\r\n    private Button btnconf;\r\n\r\n\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public ProfileFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment ProfileFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static ProfileFragment newInstance(String param1, String param2) {\r\n        ProfileFragment fragment = new ProfileFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_profile, container, false);\r\n\r\n        ImageView irAPerfil =v.findViewById(R.id.irAEditarPerfil);\r\n        irAPerfil.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                /*Intent intent = new Intent(getActivity(), ModifyProfile.class);\r\n                startActivity(intent);*/\r\n            }\r\n        });\r\n\r\n        //Enlaces de los botones de configuracion\r\n        //personalice colors\r\n        RelativeLayout customColors_btn =v.findViewById(R.id.relativeLayout4);\r\n        customColors_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n            }\r\n        });\r\n        //about us\r\n        RelativeLayout aboutInfinity_btn =v.findViewById(R.id.relativeLayout6);\r\n        aboutInfinity_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), AboutInfinityCrap.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        //help\r\n        RelativeLayout help_profile =v.findViewById(R.id.relativeLayout5);\r\n        help_profile.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), HelpProfile.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        //firebase\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=mAuth.getCurrentUser().getUid();\r\n        final GoogleSignInClient mGoogleSignInClient;\r\n        GoogleSignInOptions gso;\r\n        final FirebaseUser usuario = FirebaseAuth.getInstance().getCurrentUser();\r\n        //guardo la imagen en un ImagenView\r\n        final ImageView img = (ImageView) v.findViewById(R.id.profile);\r\n        //guardo el nombre en un textView\r\n        final TextView nombre = (TextView) v.findViewById(R.id.username);\r\n        nombre.setText(usuario.getDisplayName());\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(nombre.getText() == \"\"){\r\n                    nombre.setText(snapshot.getString(\"username\"));\r\n                    img.setImageResource(R.drawable.icons_user);\r\n                }\r\n            }\r\n        });\r\n\r\n        //guardo el mail en un textView\r\n        TextView correo = (TextView) v.findViewById(R.id.mailUser);\r\n        correo.setText(usuario.getEmail());\r\n        //cargar imágen con glide:\r\n        Glide.with(this).load(usuario.getPhotoUrl()).into(img);\r\n        //boton cerrar sesion\r\n\r\n        //Configurar las gso para google signIn con el fin de luego desloguear de google\r\n        gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestIdToken(getString(R.string.default_web_client_id))\r\n                .requestEmail()\r\n                .build();\r\n        mGoogleSignInClient = GoogleSignIn.getClient(getActivity(), gso);\r\n\r\n        RelativeLayout cerrarSesion =(RelativeLayout) v.findViewById(R.id.btn_end_session);\r\n        cerrarSesion.setOnClickListener(new View.OnClickListener() {\r\n            public void onClick(View view) {\r\n                new AlertDialog.Builder(requireContext())\r\n                        .setTitle(\"Cerrar sesión\")\r\n                        .setMessage(\"¿Estas seguro que quieres cerrar sesión?\")\r\n                        .setPositiveButton(\"Confirmar\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n                                //Cerrar session con Firebase\r\n                                mAuth.signOut();\r\n                                //Cerrar sesión con google tambien: Google sign out\r\n                                mGoogleSignInClient.signOut().addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                                    @Override\r\n                                    public void onComplete(@NonNull Task<Void> task) {\r\n                                        //Abrir MainActivity con SigIn button\r\n                                        if(task.isSuccessful()){\r\n                                            Intent logActivity = new Intent(getActivity().getApplicationContext(), LogActivity.class);\r\n                                            startActivity(logActivity);\r\n                                            getActivity().finish();\r\n                                        }else{\r\n                                            Toast.makeText(getActivity().getApplicationContext(), \"No se pudo cerrar sesión con google\",\r\n                                                    Toast.LENGTH_LONG).show();\r\n                                        }\r\n                                    }\r\n                                });\r\n\r\n                            }\r\n                        })\r\n                        .setNegativeButton(\"Cancelar\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                            }\r\n                        })\r\n                        .show();\r\n\r\n\r\n            }\r\n        });\r\n\r\n        //Confirmación de verificación de correo\r\n        TextView txtverify = (TextView) v.findViewById(R.id.txtVerif);\r\n        Button btnverify = (Button) v.findViewById(R.id.btnverif);\r\n        final FirebaseUser user = mAuth.getCurrentUser();\r\n        if(!user.isEmailVerified()){\r\n            us=user;\r\n            txtverf = txtverify;\r\n            btnconf = btnverify;\r\n\r\n            txtverify.setVisibility(View.VISIBLE);\r\n            btnverify.setVisibility(View.VISIBLE);\r\n\r\n            btnverify.setOnClickListener(new View.OnClickListener()\r\n            {\r\n                @Override\r\n                public void onClick(final View v)\r\n                {\r\n\r\n                    FirebaseUser user = mAuth.getCurrentUser();\r\n                    user.sendEmailVerification().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            Toast.makeText(getActivity(),\"Enviando correo de confirmación\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n\r\n                            Toast.makeText(getActivity(),\"Error en el envío de correo\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            /*}else{\r\n            txtverify.setVisibility(View.GONE);\r\n            btnverify.setVisibility(View.GONE);*/\r\n        }\r\n        /*RequestQueue colaPeticiones = Volley.newRequestQueue(getActivity()\r\n                .getApplicationContext());\r\n        ImageLoader lectorImagenes = new ImageLoader(colaPeticiones,\r\n                new ImageLoader.ImageCache() {\r\n                    private final LruCache<String, Bitmap> cache =\r\n                            new LruCache<String, Bitmap>(10);\r\n                    public void putBitmap(String url, Bitmap bitmap) {\r\n                        cache.put(url, bitmap);\r\n                    }\r\n                    public Bitmap getBitmap(String url) {\r\n                        return cache.get(url);\r\n                    }\r\n                });\r\n        Uri urlImagen = usuario.getPhotoUrl();\r\n        if (urlImagen != null) {\r\n            NetworkImageView fotoUsuario = (NetworkImageView)\r\n                    v.findViewById(R.id.profile);\r\n            fotoUsuario.setImageUrl(urlImagen.toString(), lectorImagenes);\r\n        }else{\r\n            NetworkImageView fotoUsuario = (NetworkImageView)\r\n                    v.findViewById(R.id.profile);\r\n            fotoUsuario.setImageUrl(String.valueOf(R.drawable.icons_user), lectorImagenes);\r\n        }*/\r\n        return v;\r\n    }\r\n}\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
---+++ app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java	(date 1609520835174)
---@@ -32,7 +32,7 @@
--- import com.example.infinitycrop.ui.login.LogActivity;
--- import com.example.infinitycrop.ui.profile.settings.AboutInfinityCrap;
--- import com.example.infinitycrop.ui.profile.settings.HelpProfile;
----//import com.example.infinitycrop.ui.profile.settings.ModifyProfile;
---+/*import com.example.infinitycrop.ui.profile.settings.ModifyProfile;*/
--- import com.firebase.ui.auth.AuthUI;
--- import com.google.android.gms.auth.api.signin.GoogleSignIn;
--- import com.google.android.gms.auth.api.signin.GoogleSignInClient;
---@@ -112,7 +112,7 @@
---         irAPerfil.setOnClickListener(new View.OnClickListener() {
---             @Override
---             public void onClick(View v) {
----                /*Intent intent = new Intent(getActivity(), ModifyProfile.class);
---+               /* Intent intent = new Intent(getActivity(), ModifyProfile.class);
---                 startActivity(intent);*/
---             }
---         });
---Index: app/src/main/java/com/example/infinitycrop/ui/OnBoardingFragment/OnBoardingFragment4.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.OnBoardingFragment;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.AddMachine;\r\n\r\npublic class OnBoardingFragment4 extends Fragment {\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        final ViewGroup root = (ViewGroup) inflater.inflate(R.layout.fragment_on_boarding4,container,false);\r\n        TextView button = (TextView) root.findViewById(R.id.btn_skip);\r\n        button.setOnClickListener(new View.OnClickListener()\r\n        {\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                Intent intent = new Intent((getActivity().getApplication()), AddMachine.class);\r\n                TextView editText = (TextView) root.findViewById(R.id.btn_skip);\r\n\r\n                startActivity(intent);\r\n\r\n            }\r\n        });\r\n        Button button1 = (Button) root.findViewById(R.id.btn_start);\r\n        button1.setOnClickListener(new View.OnClickListener()\r\n        {\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                Intent i = new Intent((getActivity().getApplication()), AddMachine.class);\r\n                Button button1 = (Button) root.findViewById(R.id.btn_start);\r\n                startActivity(i);\r\n            }\r\n        });\r\n\r\n        return root;\r\n    }\r\n}\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/OnBoardingFragment/OnBoardingFragment4.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
---+++ app/src/main/java/com/example/infinitycrop/ui/OnBoardingFragment/OnBoardingFragment4.java	(date 1609520835179)
---@@ -17,6 +17,7 @@
---     @Override
---     public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
---         final ViewGroup root = (ViewGroup) inflater.inflate(R.layout.fragment_on_boarding4,container,false);
---+
---         TextView button = (TextView) root.findViewById(R.id.btn_skip);
---         button.setOnClickListener(new View.OnClickListener()
---         {
---@@ -30,6 +31,7 @@
--- 
---             }
---         });
---+
---         Button button1 = (Button) root.findViewById(R.id.btn_start);
---         button1.setOnClickListener(new View.OnClickListener()
---         {
---diff --git .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44__Default_Changelist_.xml
---diff --git .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02__Default_Changelist_.xml
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_29_12_2020_0_38_[Default_Changelist]/shelved.patch
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_29_12_2020_0_38_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_29_12_2020_0_38_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--@@ -1,47 +0,0 @@
---Index: app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.profile;\r\n\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.graphics.Bitmap;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.util.LruCache;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.android.volley.RequestQueue;\r\nimport com.android.volley.toolbox.ImageLoader;\r\nimport com.android.volley.toolbox.NetworkImageView;\r\nimport com.android.volley.toolbox.Volley;\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.MainActivityMachineList;\r\nimport com.example.infinitycrop.ui.login.LogActivity;\r\nimport com.example.infinitycrop.ui.profile.settings.AboutInfinityCrap;\r\nimport com.example.infinitycrop.ui.profile.settings.HelpProfile;\r\nimport com.example.infinitycrop.ui.profile.settings.ModifyProfile;\r\nimport com.firebase.ui.auth.AuthUI;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link ProfileFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class ProfileFragment extends Fragment {\r\n    //atributos para confirmación de correo\r\n    private FirebaseUser us;\r\n    private TextView txtverf;\r\n    private Button btnconf;\r\n\r\n\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public ProfileFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment ProfileFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static ProfileFragment newInstance(String param1, String param2) {\r\n        ProfileFragment fragment = new ProfileFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_profile, container, false);\r\n\r\n        ImageView irAPerfil =v.findViewById(R.id.irAEditarPerfil);\r\n        irAPerfil.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), ModifyProfile.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n        //Enlaces de los botones de configuracion\r\n        //personalice colors\r\n        RelativeLayout customColors_btn =v.findViewById(R.id.relativeLayout4);\r\n        customColors_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n            }\r\n        });\r\n        //about us\r\n        RelativeLayout aboutInfinity_btn =v.findViewById(R.id.relativeLayout6);\r\n        aboutInfinity_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), AboutInfinityCrap.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        //help\r\n        RelativeLayout help_profile =v.findViewById(R.id.relativeLayout5);\r\n        help_profile.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), HelpProfile.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        //firebase\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=mAuth.getCurrentUser().getUid();\r\n        final GoogleSignInClient mGoogleSignInClient;\r\n        GoogleSignInOptions gso;\r\n        final FirebaseUser usuario = FirebaseAuth.getInstance().getCurrentUser();\r\n        //guardo la imagen en un ImagenView\r\n        final ImageView img = (ImageView) v.findViewById(R.id.profile);\r\n        //guardo el nombre en un textView\r\n        final TextView nombre = (TextView) v.findViewById(R.id.username);\r\n        nombre.setText(usuario.getDisplayName());\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(nombre.getText() == \"\"){\r\n                    nombre.setText(snapshot.getString(\"username\"));\r\n                    img.setImageResource(R.drawable.icons_user);\r\n                }\r\n            }\r\n        });\r\n\r\n        //guardo el mail en un textView\r\n        TextView correo = (TextView) v.findViewById(R.id.mailUser);\r\n        correo.setText(usuario.getEmail());\r\n        //cargar imágen con glide:\r\n        Glide.with(this).load(usuario.getPhotoUrl()).into(img);\r\n        //boton cerrar sesion\r\n\r\n        //Configurar las gso para google signIn con el fin de luego desloguear de google\r\n        gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestIdToken(getString(R.string.default_web_client_id))\r\n                .requestEmail()\r\n                .build();\r\n        mGoogleSignInClient = GoogleSignIn.getClient(getActivity(), gso);\r\n\r\n        RelativeLayout cerrarSesion =(RelativeLayout) v.findViewById(R.id.btn_end_session);\r\n        cerrarSesion.setOnClickListener(new View.OnClickListener() {\r\n            public void onClick(View view) {\r\n                new AlertDialog.Builder(requireContext())\r\n                        .setTitle(\"Cerrar sesión\")\r\n                        .setMessage(\"¿Estas seguro que quieres cerrar sesión?\")\r\n                        .setPositiveButton(\"Confirmar\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n                                //Cerrar session con Firebase\r\n                                mAuth.signOut();\r\n                                //Cerrar sesión con google tambien: Google sign out\r\n                                mGoogleSignInClient.signOut().addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                                    @Override\r\n                                    public void onComplete(@NonNull Task<Void> task) {\r\n                                        //Abrir MainActivity con SigIn button\r\n                                        if(task.isSuccessful()){\r\n                                            Intent logActivity = new Intent(getActivity().getApplicationContext(), LogActivity.class);\r\n                                            startActivity(logActivity);\r\n                                            getActivity().finish();\r\n                                        }else{\r\n                                            Toast.makeText(getActivity().getApplicationContext(), \"No se pudo cerrar sesión con google\",\r\n                                                    Toast.LENGTH_LONG).show();\r\n                                        }\r\n                                    }\r\n                                });\r\n\r\n                            }\r\n                        })\r\n                        .setNegativeButton(\"Cancelar\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                            }\r\n                        })\r\n                        .show();\r\n\r\n\r\n            }\r\n        });\r\n\r\n        //Confirmación de verificación de correo\r\n        TextView txtverify = (TextView) v.findViewById(R.id.txtVerif);\r\n        Button btnverify = (Button) v.findViewById(R.id.btnverif);\r\n        final FirebaseUser user = mAuth.getCurrentUser();\r\n        if(!user.isEmailVerified()){\r\n            us=user;\r\n            txtverf = txtverify;\r\n            btnconf = btnverify;\r\n\r\n            txtverify.setVisibility(View.VISIBLE);\r\n            btnverify.setVisibility(View.VISIBLE);\r\n\r\n            btnverify.setOnClickListener(new View.OnClickListener()\r\n            {\r\n                @Override\r\n                public void onClick(final View v)\r\n                {\r\n\r\n                    FirebaseUser user = mAuth.getCurrentUser();\r\n                    user.sendEmailVerification().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            Toast.makeText(getActivity(),\"Enviando correo de confirmación\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n\r\n                            Toast.makeText(getActivity(),\"Error en el envío de correo\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            /*}else{\r\n            txtverify.setVisibility(View.GONE);\r\n            btnverify.setVisibility(View.GONE);*/\r\n        }\r\n        /*RequestQueue colaPeticiones = Volley.newRequestQueue(getActivity()\r\n                .getApplicationContext());\r\n        ImageLoader lectorImagenes = new ImageLoader(colaPeticiones,\r\n                new ImageLoader.ImageCache() {\r\n                    private final LruCache<String, Bitmap> cache =\r\n                            new LruCache<String, Bitmap>(10);\r\n                    public void putBitmap(String url, Bitmap bitmap) {\r\n                        cache.put(url, bitmap);\r\n                    }\r\n                    public Bitmap getBitmap(String url) {\r\n                        return cache.get(url);\r\n                    }\r\n                });\r\n        Uri urlImagen = usuario.getPhotoUrl();\r\n        if (urlImagen != null) {\r\n            NetworkImageView fotoUsuario = (NetworkImageView)\r\n                    v.findViewById(R.id.profile);\r\n            fotoUsuario.setImageUrl(urlImagen.toString(), lectorImagenes);\r\n        }else{\r\n            NetworkImageView fotoUsuario = (NetworkImageView)\r\n                    v.findViewById(R.id.profile);\r\n            fotoUsuario.setImageUrl(String.valueOf(R.drawable.icons_user), lectorImagenes);\r\n        }*/\r\n        return v;\r\n    }\r\n}\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java	(revision 3eb9f21b60ebfff51498bfb1b27f941eaf3f6559)
---+++ app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java	(date 1609175744817)
---@@ -32,7 +32,7 @@
--- import com.example.infinitycrop.ui.login.LogActivity;
--- import com.example.infinitycrop.ui.profile.settings.AboutInfinityCrap;
--- import com.example.infinitycrop.ui.profile.settings.HelpProfile;
----import com.example.infinitycrop.ui.profile.settings.ModifyProfile;
---+/*import com.example.infinitycrop.ui.profile.settings.ModifyProfile;*/
--- import com.firebase.ui.auth.AuthUI;
--- import com.google.android.gms.auth.api.signin.GoogleSignIn;
--- import com.google.android.gms.auth.api.signin.GoogleSignInClient;
---@@ -112,8 +112,8 @@
---         irAPerfil.setOnClickListener(new View.OnClickListener() {
---             @Override
---             public void onClick(View v) {
----                Intent intent = new Intent(getActivity(), ModifyProfile.class);
----                startActivity(intent);
---+              /*  Intent intent = new Intent(getActivity(), ModifyProfile.class);
---+                startActivity(intent);*/
---             }
---         });
--- 
---Index: comun/src/main/java/com/example/comun/Mqtt.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.comun;\r\n\r\npublic class Mqtt {\r\n    public static final String TAG = \"MQTT\";\r\n    public static final String topicRoot=\"infinity/senyal/\";\r\n\r\n\r\n    //Reemplaza equipo por el nombre de tu equipo de prácticas\r\n    public static final int qos = 1;\r\n    public static final String broker = \"tcp://broker.hivemq.com:1883\";\r\n    public static final String clientId = \"IotTestInfinity123434\";\r\n//Reemplaza ClientId con un valor diferente\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ comun/src/main/java/com/example/comun/Mqtt.java	(revision 3eb9f21b60ebfff51498bfb1b27f941eaf3f6559)
---+++ comun/src/main/java/com/example/comun/Mqtt.java	(date 1609175420200)
---@@ -8,6 +8,6 @@
---     //Reemplaza equipo por el nombre de tu equipo de prácticas
---     public static final int qos = 1;
---     public static final String broker = "tcp://broker.hivemq.com:1883";
----    public static final String clientId = "IotTestInfinity123434";
---+    public static final String clientId = "IotTestInfinity1234";
--- //Reemplaza ClientId con un valor diferente
--- }
---\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_29_12_2020_0_38__Default_Changelist_.xml
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_29_12_2020_0_38__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_29_12_2020_0_38__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_29_12_2020_0_38_[Default_Changelist]" date="1609198713127" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_29_12_2020_0_38_[Default_Changelist]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 29/12/2020 0:38 [Default Changelist]" />
---</changelist>
--\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_18_10_[Default_Changelist]/shelved.patch
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_18_10_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_18_10_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--@@ -1,762 +0,0 @@
---Index: .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25__Default_Changelist_.xml
---===================================================================
------ .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25__Default_Changelist_.xml	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25__Default_Changelist_.xml	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---@@ -1,4 +0,0 @@
----<changelist name="Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]" date="1607628338928" recycled="true" deleted="true">
----  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]/shelved.patch" />
----  <option name="DESCRIPTION" value="Uncommitted changes before Update at 10/12/2020 20:25 [Default Changelist]" />
----</changelist>
---\ No newline at end of file
---Index: .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]/shelved.patch
---===================================================================
------ .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]/shelved.patch	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ .idea/shelf/Uncommitted_changes_before_Update_at_10_12_2020_20_25_[Default_Changelist]/shelved.patch	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---@@ -1,729 +0,0 @@
----Index: app/src/main/AndroidManifest.xml
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    package=\"com.example.infinitycrop\">\n\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/>\n    <uses-permission android:name=\"android.permission.INTERNET\"/>\n    <!--Permisos Qr-->\n    <uses-permission android:name=\"android.permission.CAMERA\"/>\n    <uses-feature android:name=\"android.hardware.camera\"></uses-feature>\n    <uses-feature android:name=\"android.hardware.camera.autofocus\"></uses-feature>\n\n    <application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher\"\n        android:theme=\"@style/AppThemeHome\"\n        >\n\n        <activity android:name=\".MainActivity\" android:theme=\"@style/SplashTheme\">\n        </activity>\n\n        <activity android:name=\"com.example.infinitycrop.ui.login.LogActivity\">\n            <intent-filter>\n                <action android:name=\"android.intent.action.MAIN\" />\n                <category android:name=\"android.intent.category.LAUNCHER\" />\n            </intent-filter>\n        </activity>\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\">\n\n        </activity>\n        <activity android:name=\".ui.profile.settings.HelpProfile\">\n\n        </activity>\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\"></activity>\n        <activity android:name=\".ui.list_machine.AddMachine\"></activity>\n        <activity android:name=\".ui.logmail.RegisterActivity\"></activity>\n        <activity android:name=\".ui.logmail.LoginActivity\"></activity>\n        <activity android:name=\".ui.list_machine.CaptureAct\"></activity>\n\n\n\n\n        <meta-data android:name=\"com.google.android.geo.API_KEY\"\n            android:value=\"@string/google_maps_key\" />\n\n        <meta-data android:name=\"com.facebook.sdk.ApplicationId\"\n            tools:replace=\"android:value\"\n            android:value=\"@string/facebook_app_id\"/>\n\n\n    </application>\n\n</manifest>
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/AndroidManifest.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/AndroidManifest.xml	(date 1607539967252)
----@@ -5,6 +5,8 @@
---- 
----     <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
----     <uses-permission android:name="android.permission.INTERNET"/>
----+    <uses-permission android:name="com.google.android.things.permission.MANAGE_INPUT_DRIVERS" />
----+    <uses-permission android:name="com.google.android.things.permission.USE_PERIPHERAL_IO" />
----     <!--Permisos Qr-->
----     <uses-permission android:name="android.permission.CAMERA"/>
----     <uses-feature android:name="android.hardware.camera"></uses-feature>
----Index: app/src/main/res/layout/fragment_graphic.xml
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.graphic.GraphicFragment\">\r\n\r\n    <!-- TODO: Update blank fragment layout -->\r\n    <TextView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_centerInParent=\"true\"\r\n        android:textSize=\"50dp\"\r\n        android:text=\"Graphic fragment\" />\r\n\r\n</RelativeLayout>
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/res/layout/fragment_graphic.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/res/layout/fragment_graphic.xml	(date 1607520842759)
----@@ -1,16 +1,64 @@
---- <?xml version="1.0" encoding="utf-8"?>
-----<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
----+<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
----     xmlns:tools="http://schemas.android.com/tools"
----     android:layout_width="match_parent"
----     android:layout_height="match_parent"
----+    xmlns:app="http://schemas.android.com/apk/res-auto"
----+    android:background="#EFE9E9"
----     tools:context=".ui.graphic.GraphicFragment">
---- 
-----    <!-- TODO: Update blank fragment layout -->
-----    <TextView
-----        android:layout_width="match_parent"
----+    <androidx.constraintlayout.widget.ConstraintLayout
----+        android:layout_width="match_parent"
----+        android:layout_height="match_parent">
----+
----+
----+        <RelativeLayout
----+            android:id="@+id/relativeLayout2"
----+            android:layout_width="match_parent"
----+            android:layout_height="wrap_content"
----+            android:layout_marginStart="20dp"
----+            android:layout_marginEnd="20dp"
----+            app:layout_constraintBottom_toTopOf="@+id/image_list"
----+            app:layout_constraintEnd_toEndOf="parent"
----+            app:layout_constraintStart_toStartOf="parent"
----+            app:layout_constraintTop_toTopOf="parent">
----+
----+            <TextView
----+                android:id="@+id/textMode"
----+                android:layout_width="wrap_content"
----+                android:layout_height="wrap_content"
----+                android:text="Lista de fotografías  >"
----+
----+                android:textSize="19sp" />
----+
----+            <!--<ImageView
----+                android:layout_width="62dp"
----+                android:layout_height="62dp"
----+                android:layout_alignParentRight="true"
----+                android:src="@drawable/ic_sun" />-->
----+        </RelativeLayout>
----+
----+        <androidx.recyclerview.widget.RecyclerView
----+            android:id="@+id/image_list"
----+            android:layout_width="match_parent"
----+            android:layout_height="match_parent"
----+            android:layout_marginStart="16dp"
----+            android:layout_marginTop="70dp"
----+            android:layout_marginEnd="16dp"
----+            app:layout_constraintBottom_toBottomOf="parent"
----+            app:layout_constraintEnd_toEndOf="parent"
----+            app:layout_constraintStart_toStartOf="parent"
----+            app:layout_constraintTop_toBottomOf="@+id/constraintLayout3" />
----+    </androidx.constraintlayout.widget.ConstraintLayout>
----+
----+
----+    <com.google.android.material.floatingactionbutton.FloatingActionButton
----+        android:id="@+id/button_add_image"
----+        android:layout_width="wrap_content"
----         android:layout_height="wrap_content"
-----        android:layout_centerInParent="true"
-----        android:textSize="50dp"
-----        android:text="Graphic fragment" />
----+        android:layout_gravity="top|end"
----+        android:layout_margin="16dp"
----+
----+        android:src="@drawable/icons_plus" />
---- 
-----</RelativeLayout>
----\ No newline at end of file
----+</androidx.coordinatorlayout.widget.CoordinatorLayout>
----\ No newline at end of file
----Index: app/build.gradle
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+>apply plugin: 'com.android.application'\n\n\nandroid {\n    compileSdkVersion 30\n    buildToolsVersion \"30.0.2\"\n\n    defaultConfig {\n        applicationId \"com.example.infinitycrop\"\n        minSdkVersion 23\n        targetSdkVersion 30\n        versionCode 1\n        versionName \"1.0\"\n        multiDexEnabled true\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: \"libs\", include: [\"*.jar\"])\n    implementation 'androidx.appcompat:appcompat:1.2.0'\n    implementation 'com.google.android.material:material:1.2.1'\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.2'\n    implementation 'androidx.navigation:navigation-fragment:2.1.0'\n    implementation 'androidx.navigation:navigation-ui:2.1.0'\n    implementation 'androidx.lifecycle:lifecycle-extensions:2.2.0'\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\n    implementation 'com.google.firebase:firebase-auth:16.0.5'\n    implementation 'com.firebaseui:firebase-ui-auth:6.2.0'\n    implementation project(path: ':comun')\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\n    implementation 'com.google.firebase:firebase-analytics'\n    implementation 'com.ismaeldivita.chipnavigation:chip-navigation-bar:1.3.4'\n    implementation 'org.jetbrains.kotlin:kotlin-stdlib:1.4.10'\n    implementation 'androidx.recyclerview:recyclerview:1.1.0'\n    implementation 'com.android.volley:volley:1.1.0'\n    // Also declare the dependency for the Google Play services library and specify its version\n    implementation 'com.google.android.gms:play-services-auth:18.1.0'\n    // Import the BoM for the Firebase platform\n    implementation platform('com.google.firebase:firebase-bom:26.0.0')\n    implementation 'com.google.firebase:firebase-firestore:17.1.2'\n    implementation 'com.android.support:multidex:1.0.3'\n    implementation 'com.firebaseui:firebase-ui-firestore:6.3.0'\n    //biblioteca para mostrar images a través de URL\n    implementation 'com.github.bumptech.glide:glide:4.11.0'\n    //import del mqtt\n    implementation 'org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.1.1'\n    implementation 'com.google.android.gms:play-services-maps:17.0.0'\n    compile 'com.google.android.gms:play-services-location:16.0.0'\n    implementation 'com.journeyapps:zxing-android-embedded:3.4.0'//añadimos esta libreria para qr\n    implementation 'com.facebook.android:facebook-android-sdk:[4,5)'\n\n    implementation \"androidx.viewpager2:viewpager2:1.0.0\" //libreria viewpager\n}\napply plugin: 'com.google.gms.google-services'
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/build.gradle	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/build.gradle	(date 1607543533244)
----@@ -35,6 +35,8 @@
----     implementation 'com.google.firebase:firebase-auth:16.0.5'
----     implementation 'com.firebaseui:firebase-ui-auth:6.2.0'
----     implementation project(path: ':comun')
----+    implementation 'com.google.firebase:firebase-database:19.5.1'
----+    implementation 'com.google.firebase:firebase-storage:19.2.0'
----     testImplementation 'junit:junit:4.12'
----     androidTestImplementation 'androidx.test.ext:junit:1.1.2'
----     androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'
----Index: app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+>package com.example.infinitycrop.ui.graphic;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport com.example.infinitycrop.R;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link GraphicFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class GraphicFragment extends Fragment {\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public GraphicFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment GraphicFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static GraphicFragment newInstance(String param1, String param2) {\r\n        GraphicFragment fragment = new GraphicFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        return inflater.inflate(R.layout.fragment_graphic, container, false);\r\n    }\r\n}
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/java/com/example/infinitycrop/ui/graphic/GraphicFragment.java	(date 1607543099075)
----@@ -3,12 +3,19 @@
---- import android.os.Bundle;
---- 
---- import androidx.fragment.app.Fragment;
----+import androidx.recyclerview.widget.LinearLayoutManager;
----+import androidx.recyclerview.widget.RecyclerView;
---- 
---- import android.view.LayoutInflater;
---- import android.view.View;
---- import android.view.ViewGroup;
---- 
---- import com.example.infinitycrop.R;
----+import com.firebase.ui.firestore.FirestoreRecyclerOptions;
----+import com.google.firebase.database.FirebaseDatabase;
----+import com.google.firebase.firestore.FirebaseFirestore;
----+import com.google.firebase.firestore.Query;
----+import com.google.firebase.storage.FirebaseStorage;
---- 
---- /**
----  * A simple {@link Fragment} subclass.
----@@ -16,7 +23,7 @@
----  * create an instance of this fragment.
----  */
---- public class GraphicFragment extends Fragment {
-----
----+    private AdaptadorImagenes adaptador;
----     // TODO: Rename parameter arguments, choose names that match
----     // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
----     private static final String ARG_PARAM1 = "param1";
----@@ -61,6 +68,26 @@
----     public View onCreateView(LayoutInflater inflater, ViewGroup container,
----                              Bundle savedInstanceState) {
----         // Inflate the layout for this fragment
-----        return inflater.inflate(R.layout.fragment_graphic, container, false);
----+        View v= inflater.inflate(R.layout.fragment_graphic, container, false);
----+
----+        RecyclerView recyclerView = v.findViewById(R.id.image_list);
----+        Query query = FirebaseFirestore.getInstance()
----+                .collection("imagenes");
----+        FirestoreRecyclerOptions<Imagen> opciones = new FirestoreRecyclerOptions
----+                .Builder<Imagen>().setQuery(query, Imagen.class).build();
----+        adaptador = new AdaptadorImagenes(getContext(), opciones);
----+        recyclerView.setAdapter(adaptador);
----+        recyclerView.setLayoutManager(new LinearLayoutManager(getContext()));
----+
----+        return v;
----+    }
----+    @Override public void onStart() {
----+        super.onStart();
----+        adaptador.startListening();
----     }
----+    @Override public void onStop() {
----+        super.onStop();
----+        adaptador.stopListening();
----+    }
----+
---- }
----\ No newline at end of file
----Index: comun/src/main/java/com/example/comun/Mqtt.java
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+>package com.example.comun;\n\npublic class Mqtt {\n    public static final String TAG = \"MQTT\";\n    public static final String topicRoot=\"infinity/senyal/\";\n\n\n    //Reemplaza equipo por el nombre de tu equipo de prácticas\n    public static final int qos = 1;\n    public static final String broker = \"tcp://mqtt.eclipse.org:1883\";\n    public static final String clientId = \"IotTestInfinity123\";\n//Reemplaza ClientId con un valor diferente\n}
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- comun/src/main/java/com/example/comun/Mqtt.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ comun/src/main/java/com/example/comun/Mqtt.java	(date 1607524175548)
----@@ -7,7 +7,7 @@
---- 
----     //Reemplaza equipo por el nombre de tu equipo de prácticas
----     public static final int qos = 1;
-----    public static final String broker = "tcp://mqtt.eclipse.org:1883";
----+    public static final String broker = "tcp://broker.hivemq.com:1883";
----     public static final String clientId = "IotTestInfinity123";
---- //Reemplaza ClientId con un valor diferente
---- }
----\ No newline at end of file
----Index: app/src/main/res/layout/fragment_general.xml
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+><ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    tools:context=\".ui.dashboard.DashboardFragment\">\n\n\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\n\n        <RelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginLeft=\"20dp\"\n            android:layout_marginTop=\"10dp\"\n            android:layout_marginRight=\"20dp\">\n\n            <TextView\n                android:id=\"@+id/textDashboard\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Dashboard  >\"\n\n                android:textSize=\"19sp\" />\n\n            <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_below=\"@+id/textDashboard\"\n                android:text=\"4 sensores\"\n\n                android:textSize=\"14sp\" />\n\n            <!--<ImageView\n                android:layout_width=\"62dp\"\n                android:layout_height=\"62dp\"\n                android:layout_alignParentRight=\"true\"\n                android:src=\"@drawable/ic_sun\" />-->\n        </RelativeLayout>\n        <GridLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:columnCount=\"2\"\n            android:rowCount=\"3\"\n            android:alignmentMode=\"alignMargins\"\n            android:columnOrderPreserved=\"false\">\n            <!--temperatura-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Temperatura\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchTemperatura\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:buttonTint=\"#FFFFFF\"\n                            android:checked=\"true\"\n                            android:fitsSystemWindows=\"false\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaTemperatura\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"34°C\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textTemperatura\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textTemperatura\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgTemperatura\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_temperature\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaTemperatura\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--humedad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Humedad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchHumedad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaHumedad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"68%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textHumedad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textHumedad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgHumedad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_humidity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaHumedad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--salinidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Salinidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchSalinidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaSalinidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"10%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textSalinidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textSalinidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgSalinidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_salt\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaSalinidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--Luminosidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Luminosidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchLuminosidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorHighlight=\"#FFFFFF\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidasLuminosidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"90%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textLuminosidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textLuminosidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgLuminosidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_luminosity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidasLuminosidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n\n\n\n\n        </GridLayout>\n\n    </LinearLayout>\n</ScrollView>\n
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/res/layout/fragment_general.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/res/layout/fragment_general.xml	(date 1607536086761)
----@@ -20,7 +20,7 @@
----             android:layout_marginRight="20dp">
---- 
----             <TextView
-----                android:id="@+id/textDashboard"
----+                android:id="@+id/textDashboardGeneral"
----                 android:layout_width="wrap_content"
----                 android:layout_height="wrap_content"
----                 android:text="Dashboard  >"
----@@ -30,7 +30,7 @@
----             <TextView
----                 android:layout_width="wrap_content"
----                 android:layout_height="wrap_content"
-----                android:layout_below="@+id/textDashboard"
----+                android:layout_below="@+id/textDashboardGeneral"
----                 android:text="4 sensores"
---- 
----                 android:textSize="14sp" />
----@@ -74,19 +74,19 @@
---- 
---- 
----                         <TextView
-----                            android:id="@+id/textTemperatura"
----+                            android:id="@+id/textTemperaturaGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginStart="8dp"
----                             android:layout_marginTop="8dp"
----                             android:text="Temperatura"
----                             android:textSize="16sp"
-----                            app:layout_constraintBottom_toBottomOf="@+id/switchTemperatura"
----+                            app:layout_constraintBottom_toBottomOf="@+id/switchTemperaturaGeneral"
----                             app:layout_constraintStart_toStartOf="parent"
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <Switch
-----                            android:id="@+id/switchTemperatura"
----+                            android:id="@+id/switchTemperaturaGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginTop="8dp"
----@@ -100,25 +100,25 @@
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <TextView
-----                            android:id="@+id/medidaTemperatura"
----+                            android:id="@+id/medidaTemperaturaGeneral"
----                             android:layout_width="90dp"
----                             android:layout_height="39dp"
----                             android:layout_marginTop="24dp"
----                             android:text="34°C"
----                             android:textSize="31sp"
-----                            app:layout_constraintStart_toStartOf="@+id/textTemperatura"
-----                            app:layout_constraintTop_toBottomOf="@+id/textTemperatura" />
----+                            app:layout_constraintStart_toStartOf="@+id/textTemperaturaGeneral"
----+                            app:layout_constraintTop_toBottomOf="@+id/textTemperaturaGeneral" />
---- 
----                         <ImageView
-----                            android:id="@+id/imgTemperatura"
----+                            android:id="@+id/imgTemperaturaGeneral"
----                             android:layout_width="53dp"
----                             android:layout_height="55dp"
----                             android:layout_marginEnd="1dp"
----                             android:src="@drawable/icons_temperature"
-----                            app:layout_constraintBottom_toBottomOf="@+id/medidaTemperatura"
----+                            app:layout_constraintBottom_toBottomOf="@+id/medidaTemperaturaGeneral"
----                             app:layout_constraintEnd_toEndOf="parent"
-----                            app:layout_constraintStart_toEndOf="@+id/medidaTemperatura"
-----                            app:layout_constraintTop_toTopOf="@+id/medidaTemperatura" />
----+                            app:layout_constraintStart_toEndOf="@+id/medidaTemperaturaGeneral"
----+                            app:layout_constraintTop_toTopOf="@+id/medidaTemperaturaGeneral" />
----                     </androidx.constraintlayout.widget.ConstraintLayout>
----                 </LinearLayout>
----             </androidx.cardview.widget.CardView>
----@@ -148,19 +148,19 @@
---- 
---- 
----                         <TextView
-----                            android:id="@+id/textHumedad"
----+                            android:id="@+id/textHumedadGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginStart="8dp"
----                             android:layout_marginTop="8dp"
----                             android:text="Humedad"
----                             android:textSize="16sp"
-----                            app:layout_constraintBottom_toBottomOf="@+id/switchHumedad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/switchHumedadGeneral"
----                             app:layout_constraintStart_toStartOf="parent"
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <Switch
-----                            android:id="@+id/switchHumedad"
----+                            android:id="@+id/switchHumedadGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginTop="8dp"
----@@ -172,25 +172,25 @@
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <TextView
-----                            android:id="@+id/medidaHumedad"
----+                            android:id="@+id/medidaHumedadGeneral"
----                             android:layout_width="90dp"
----                             android:layout_height="39dp"
----                             android:layout_marginTop="24dp"
----                             android:text="68%"
----                             android:textSize="31sp"
-----                            app:layout_constraintStart_toStartOf="@+id/textHumedad"
-----                            app:layout_constraintTop_toBottomOf="@+id/textHumedad" />
----+                            app:layout_constraintStart_toStartOf="@+id/textHumedadGeneral"
----+                            app:layout_constraintTop_toBottomOf="@+id/textHumedadGeneral" />
---- 
----                         <ImageView
-----                            android:id="@+id/imgHumedad"
----+                            android:id="@+id/imgHumedadGeneral"
----                             android:layout_width="53dp"
----                             android:layout_height="55dp"
----                             android:layout_marginEnd="1dp"
----                             android:src="@drawable/icons_humidity"
-----                            app:layout_constraintBottom_toBottomOf="@+id/medidaHumedad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/medidaHumedadGeneral"
----                             app:layout_constraintEnd_toEndOf="parent"
-----                            app:layout_constraintStart_toEndOf="@+id/medidaHumedad"
-----                            app:layout_constraintTop_toTopOf="@+id/medidaHumedad" />
----+                            app:layout_constraintStart_toEndOf="@+id/medidaHumedadGeneral"
----+                            app:layout_constraintTop_toTopOf="@+id/medidaHumedadGeneral" />
----                     </androidx.constraintlayout.widget.ConstraintLayout>
----                 </LinearLayout>
----             </androidx.cardview.widget.CardView>
----@@ -220,19 +220,19 @@
---- 
---- 
----                         <TextView
-----                            android:id="@+id/textSalinidad"
----+                            android:id="@+id/textSalinidadGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginStart="8dp"
----                             android:layout_marginTop="8dp"
----                             android:text="Salinidad"
----                             android:textSize="16sp"
-----                            app:layout_constraintBottom_toBottomOf="@+id/switchSalinidad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/switchSalinidadGeneral"
----                             app:layout_constraintStart_toStartOf="parent"
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <Switch
-----                            android:id="@+id/switchSalinidad"
----+                            android:id="@+id/switchSalinidadGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginTop="8dp"
----@@ -244,25 +244,25 @@
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <TextView
-----                            android:id="@+id/medidaSalinidad"
----+                            android:id="@+id/medidaSalinidadGeneral"
----                             android:layout_width="90dp"
----                             android:layout_height="39dp"
----                             android:layout_marginTop="24dp"
----                             android:text="10%"
----                             android:textSize="31sp"
-----                            app:layout_constraintStart_toStartOf="@+id/textSalinidad"
-----                            app:layout_constraintTop_toBottomOf="@+id/textSalinidad" />
----+                            app:layout_constraintStart_toStartOf="@+id/textSalinidadGeneral"
----+                            app:layout_constraintTop_toBottomOf="@+id/textSalinidadGeneral" />
---- 
----                         <ImageView
-----                            android:id="@+id/imgSalinidad"
----+                            android:id="@+id/imgSalinidadGeneral"
----                             android:layout_width="53dp"
----                             android:layout_height="55dp"
----                             android:layout_marginEnd="1dp"
----                             android:src="@drawable/icons_salt"
-----                            app:layout_constraintBottom_toBottomOf="@+id/medidaSalinidad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/medidaSalinidadGeneral"
----                             app:layout_constraintEnd_toEndOf="parent"
-----                            app:layout_constraintStart_toEndOf="@+id/medidaSalinidad"
-----                            app:layout_constraintTop_toTopOf="@+id/medidaSalinidad" />
----+                            app:layout_constraintStart_toEndOf="@+id/medidaSalinidadGeneral"
----+                            app:layout_constraintTop_toTopOf="@+id/medidaSalinidadGeneral" />
----                     </androidx.constraintlayout.widget.ConstraintLayout>
----                 </LinearLayout>
----             </androidx.cardview.widget.CardView>
----@@ -292,19 +292,19 @@
---- 
---- 
----                         <TextView
-----                            android:id="@+id/textLuminosidad"
----+                            android:id="@+id/textLuminosidadGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginStart="8dp"
----                             android:layout_marginTop="8dp"
----                             android:text="Luminosidad"
----                             android:textSize="16sp"
-----                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidadGeneral"
----                             app:layout_constraintStart_toStartOf="parent"
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <Switch
-----                            android:id="@+id/switchLuminosidad"
----+                            android:id="@+id/switchLuminosidadGeneral"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginTop="8dp"
----@@ -317,25 +317,25 @@
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <TextView
-----                            android:id="@+id/medidasLuminosidad"
----+                            android:id="@+id/medidasLuminosidadGeneral"
----                             android:layout_width="90dp"
----                             android:layout_height="39dp"
----                             android:layout_marginTop="24dp"
----                             android:text="90%"
----                             android:textSize="31sp"
-----                            app:layout_constraintStart_toStartOf="@+id/textLuminosidad"
-----                            app:layout_constraintTop_toBottomOf="@+id/textLuminosidad" />
----+                            app:layout_constraintStart_toStartOf="@+id/textLuminosidadGeneral"
----+                            app:layout_constraintTop_toBottomOf="@+id/textLuminosidadGeneral" />
---- 
----                         <ImageView
-----                            android:id="@+id/imgLuminosidad"
----+                            android:id="@+id/imgLuminosidadGeneral"
----                             android:layout_width="53dp"
----                             android:layout_height="55dp"
----                             android:layout_marginEnd="1dp"
----                             android:src="@drawable/icons_luminosity"
-----                            app:layout_constraintBottom_toBottomOf="@+id/medidasLuminosidad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/medidasLuminosidadGeneral"
----                             app:layout_constraintEnd_toEndOf="parent"
-----                            app:layout_constraintStart_toEndOf="@+id/medidasLuminosidad"
-----                            app:layout_constraintTop_toTopOf="@+id/medidasLuminosidad" />
----+                            app:layout_constraintStart_toEndOf="@+id/medidasLuminosidadGeneral"
----+                            app:layout_constraintTop_toTopOf="@+id/medidasLuminosidadGeneral" />
----                     </androidx.constraintlayout.widget.ConstraintLayout>
----                 </LinearLayout>
----             </androidx.cardview.widget.CardView>
----Index: app/src/main/res/layout/fragment_planta1.xml
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+><ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    tools:context=\".ui.dashboard.DashboardFragment\">\n\n\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\n\n        <RelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginLeft=\"20dp\"\n            android:layout_marginTop=\"10dp\"\n            android:layout_marginRight=\"20dp\">\n\n            <TextView\n                android:id=\"@+id/textDashboard\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Dashboard  >\"\n\n                android:textSize=\"19sp\" />\n\n            <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_below=\"@+id/textDashboard\"\n                android:text=\"4 sensores\"\n\n                android:textSize=\"14sp\" />\n\n            <!--<ImageView\n                android:layout_width=\"62dp\"\n                android:layout_height=\"62dp\"\n                android:layout_alignParentRight=\"true\"\n                android:src=\"@drawable/ic_sun\" />-->\n        </RelativeLayout>\n        <GridLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:columnCount=\"2\"\n            android:rowCount=\"3\"\n            android:alignmentMode=\"alignMargins\"\n            android:columnOrderPreserved=\"false\">\n            <!--temperatura-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Temperatura\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchTemperatura\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:buttonTint=\"#FFFFFF\"\n                            android:checked=\"true\"\n                            android:fitsSystemWindows=\"false\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaTemperatura\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"34°C\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textTemperatura\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textTemperatura\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgTemperatura\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_temperature\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaTemperatura\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--humedad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Humedad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchHumedad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaHumedad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"68%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textHumedad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textHumedad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgHumedad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_humidity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaHumedad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--salinidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Salinidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchSalinidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaSalinidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"10%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textSalinidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textSalinidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgSalinidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_salt\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaSalinidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--Luminosidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Luminosidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchLuminosidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorHighlight=\"#FFFFFF\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidasLuminosidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"90%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textLuminosidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textLuminosidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgLuminosidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_luminosity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidasLuminosidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n\n\n\n\n        </GridLayout>\n\n    </LinearLayout>\n</ScrollView>\n
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/res/layout/fragment_planta1.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/res/layout/fragment_planta1.xml	(date 1607537539251)
----@@ -299,12 +299,12 @@
----                             android:layout_marginTop="8dp"
----                             android:text="Luminosidad"
----                             android:textSize="16sp"
-----                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidadPlamta1"
----                             app:layout_constraintStart_toStartOf="parent"
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <Switch
-----                            android:id="@+id/switchLuminosidad"
----+                            android:id="@+id/switchLuminosidadPlamta1"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginTop="8dp"
----Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+>package com.example.infinitycrop.ui.dashboard;\n\nimport android.os.Bundle;\n\nimport androidx.fragment.app.Fragment;\n\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.TextView;\n\nimport com.example.infinitycrop.R;\n\n/**\n * A simple {@link Fragment} subclass.\n * Use the {@link GeneralFragment#newInstance} factory method to\n * create an instance of this fragment.\n */\npublic class GeneralFragment extends Fragment {\n\n    // TODO: Rename parameter arguments, choose names that match\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\n    private static final String ARG_PARAM1 = \"param1\";\n    private static final String ARG_PARAM2 = \"param2\";\n\n    // TODO: Rename and change types of parameters\n    private String mParam1;\n    private String mParam2;\n\n    public GeneralFragment() {\n        // Required empty public constructor\n    }\n\n    /**\n     * Use this factory method to create a new instance of\n     * this fragment using the provided parameters.\n     *\n     * @param param1 Parameter 1.\n     * @param param2 Parameter 2.\n     * @return A new instance of fragment GeneralFragment.\n     */\n    // TODO: Rename and change types and number of parameters\n    public static GeneralFragment newInstance(String param1, String param2) {\n        GeneralFragment fragment = new GeneralFragment();\n        Bundle args = new Bundle();\n        args.putString(ARG_PARAM1, param1);\n        args.putString(ARG_PARAM2, param2);\n        fragment.setArguments(args);\n        return fragment;\n    }\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        if (getArguments() != null) {\n            mParam1 = getArguments().getString(ARG_PARAM1);\n            mParam2 = getArguments().getString(ARG_PARAM2);\n        }\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        View v = inflater.inflate(R.layout.fragment_general, container, false);\n\n        return v;\n    }\n}
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(date 1607537068118)
----@@ -4,20 +4,34 @@
---- 
---- import androidx.fragment.app.Fragment;
---- 
----+import android.util.Log;
---- import android.view.LayoutInflater;
---- import android.view.View;
---- import android.view.ViewGroup;
----+import android.widget.CompoundButton;
----+import android.widget.Switch;
---- import android.widget.TextView;
---- 
----+import com.example.comun.Mqtt;
---- import com.example.infinitycrop.R;
---- 
----+import org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;
----+import org.eclipse.paho.client.mqttv3.MqttCallback;
----+import org.eclipse.paho.client.mqttv3.MqttClient;
----+import org.eclipse.paho.client.mqttv3.MqttConnectOptions;
----+import org.eclipse.paho.client.mqttv3.MqttException;
----+import org.eclipse.paho.client.mqttv3.MqttMessage;
----+import org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;
----+
----+import static com.example.comun.Mqtt.topicRoot;
----+
---- /**
----  * A simple {@link Fragment} subclass.
----  * Use the {@link GeneralFragment#newInstance} factory method to
----  * create an instance of this fragment.
----  */
-----public class GeneralFragment extends Fragment {
-----
----+public class GeneralFragment extends Fragment implements MqttCallback{
----+    public static MqttClient client = null;
----     // TODO: Rename parameter arguments, choose names that match
----     // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
----     private static final String ARG_PARAM1 = "param1";
----@@ -63,7 +77,108 @@
----                              Bundle savedInstanceState) {
----         // Inflate the layout for this fragment
----         View v = inflater.inflate(R.layout.fragment_general, container, false);
-----
----+        //switch methods
----+        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);
----+        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
----+            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
----+                if (isChecked) {
----+                    // The toggle is enabled
----+                    enviarLucesOn();
----+                } else {
----+                    // The toggle is disabled
----+                    enviarLucesOff();
----+                }
----+            }
----+        });
----         return v;
----     }
----+    public void enviarLucesOff(){
----+        try {
----+            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new
----+                    MemoryPersistence());
----+        } catch (MqttException e) {
----+            e.printStackTrace();
----+        }
----+        MqttConnectOptions connOpts = new MqttConnectOptions();
----+        connOpts.setCleanSession(true);
----+        connOpts.setKeepAliveInterval(60);
----+        connOpts.setWill(topicRoot+"WillTopic", "App desconectada".getBytes(),Mqtt.qos, false);
----+
----+        try {
----+            client.connect(connOpts);
----+        } catch (MqttException e) {
----+            e.printStackTrace();
----+        }
----+
----+        //conexión con el broker Root1 = Lector de datos
----+        //nos subscribimos a topic lectura
----+        try {
----+            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "luces");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
----+            client.subscribe(topicRoot + "luces", Mqtt.qos);
----+            client.setCallback((MqttCallback) this);
----+        } catch (MqttException e) {
----+            Log.e(Mqtt.TAG, "Error al suscribir.", e);
----+        }
----+        try {
----+            Log.i(Mqtt.TAG, "Publicando mensaje: " + "mensaje");
----+            MqttMessage message = new MqttMessage("Superior OFF".getBytes());
----+            message.setQos(Mqtt.qos);
----+            message.setRetained(false);
----+            client.publish(topicRoot+"luces", message);
----+        } catch (MqttException e) {
----+            Log.e(Mqtt.TAG, "Error al publicar.", e);
----+        }
----+    }
----+    public void enviarLucesOn(){
----+        try {
----+            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new
----+                    MemoryPersistence());
----+        } catch (MqttException e) {
----+            e.printStackTrace();
----+        }
----+        MqttConnectOptions connOpts = new MqttConnectOptions();
----+        connOpts.setCleanSession(true);
----+        connOpts.setKeepAliveInterval(60);
----+        connOpts.setWill(topicRoot+"WillTopic", "App desconectada".getBytes(),Mqtt.qos, false);
----+
----+        try {
----+            client.connect(connOpts);
----+        } catch (MqttException e) {
----+            e.printStackTrace();
----+        }
----+
----+        //conexión con el broker Root1 = Lector de datos
----+        //nos subscribimos a topic lectura
----+        try {
----+            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "luces");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
----+            client.subscribe(topicRoot + "luces", Mqtt.qos);
----+            client.setCallback((MqttCallback) this);
----+        } catch (MqttException e) {
----+            Log.e(Mqtt.TAG, "Error al suscribir.", e);
----+        }
----+        try {
----+            Log.i(Mqtt.TAG, "Publicando mensaje: " + "mensaje");
----+            MqttMessage message = new MqttMessage("Superior ON".getBytes());
----+            message.setQos(Mqtt.qos);
----+            message.setRetained(false);
----+            client.publish(topicRoot+"luces", message);
----+        } catch (MqttException e) {
----+            Log.e(Mqtt.TAG, "Error al publicar.", e);
----+        }
----+    }
----+
----+    @Override
----+    public void connectionLost(Throwable cause) {
----+        Log.d(Mqtt.TAG, "Conexión perdida");
----+    }
----+
----+    @Override
----+    public void messageArrived(String topic, MqttMessage message) throws Exception {
----+
----+    }
----+
----+    @Override
----+    public void deliveryComplete(IMqttDeliveryToken token) {
----+        Log.d(Mqtt.TAG, "Entrega completa");
----+    }
---- }
----\ No newline at end of file
----Index: app/src/main/res/layout/fragment_planta2.xml
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+><ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    tools:context=\".ui.dashboard.DashboardFragment\">\n\n\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\n\n        <RelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginLeft=\"20dp\"\n            android:layout_marginTop=\"10dp\"\n            android:layout_marginRight=\"20dp\">\n\n            <TextView\n                android:id=\"@+id/textDashboard\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Dashboard  >\"\n\n                android:textSize=\"19sp\" />\n\n            <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_below=\"@+id/textDashboard\"\n                android:text=\"4 sensores\"\n\n                android:textSize=\"14sp\" />\n\n            <!--<ImageView\n                android:layout_width=\"62dp\"\n                android:layout_height=\"62dp\"\n                android:layout_alignParentRight=\"true\"\n                android:src=\"@drawable/ic_sun\" />-->\n        </RelativeLayout>\n        <GridLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:columnCount=\"2\"\n            android:rowCount=\"3\"\n            android:alignmentMode=\"alignMargins\"\n            android:columnOrderPreserved=\"false\">\n            <!--temperatura-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Temperatura\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchTemperatura\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:buttonTint=\"#FFFFFF\"\n                            android:checked=\"true\"\n                            android:fitsSystemWindows=\"false\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaTemperatura\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"34°C\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textTemperatura\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textTemperatura\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgTemperatura\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_temperature\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaTemperatura\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--humedad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Humedad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchHumedad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaHumedad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"68%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textHumedad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textHumedad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgHumedad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_humidity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaHumedad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--salinidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Salinidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchSalinidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaSalinidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"10%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textSalinidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textSalinidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgSalinidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_salt\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaSalinidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--Luminosidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Luminosidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchLuminosidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorHighlight=\"#FFFFFF\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidasLuminosidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"90%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textLuminosidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textLuminosidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgLuminosidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_luminosity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidasLuminosidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n\n\n\n\n        </GridLayout>\n\n    </LinearLayout>\n</ScrollView>\n
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/res/layout/fragment_planta2.xml	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/res/layout/fragment_planta2.xml	(date 1607537539258)
----@@ -299,12 +299,12 @@
----                             android:layout_marginTop="8dp"
----                             android:text="Luminosidad"
----                             android:textSize="16sp"
-----                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidad"
----+                            app:layout_constraintBottom_toBottomOf="@+id/switchLuminosidadPlanta2"
----                             app:layout_constraintStart_toStartOf="parent"
----                             app:layout_constraintTop_toTopOf="parent" />
---- 
----                         <Switch
-----                            android:id="@+id/switchLuminosidad"
----+                            android:id="@+id/switchLuminosidadPlanta2"
----                             android:layout_width="wrap_content"
----                             android:layout_height="wrap_content"
----                             android:layout_marginTop="8dp"
----Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.app.Activity;\r\nimport android.content.res.ColorStateList;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvModel;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\n\r\nimport java.util.ArrayList;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link DashboardFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class DashboardFragment extends Fragment implements MqttCallback{\r\n\r\n    private RecyclerView recyclerView;\r\n    private StaticRvAdapter staticRvAdapter;\r\n    private TabLayout tabLayout;\r\n    private ViewPager viewPager;\r\n    private ColorStateList def;\r\n\r\n\r\n    public static MqttClient client = null;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public DashboardFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment DashboardFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static DashboardFragment newInstance(String param1, String param2) {\r\n        DashboardFragment fragment = new DashboardFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_dashboard, container, false);\r\n        //FIREBASE\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        final FirebaseUser usuario = mAuth.getCurrentUser();\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=usuario.getUid();\r\n        //guardo el nombre en un textView\r\n        /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);\r\n        String res=\"Hola\"+\" \"+usuario.getDisplayName();\r\n        nombre.setText(res);\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(usuario.getDisplayName() == null){\r\n                    String res1=\"Hola\"+\" \"+snapshot.getString(\"username\");\r\n                    nombre.setText(res1);\r\n                }\r\n            }\r\n        });*/\r\n/*\r\n        //switch methods\r\n        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidad);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n */\r\n\r\n        //RECYCLER VIEW\r\n        ArrayList<StaticRvModel> item=new ArrayList<>();\r\n        item.add(new StaticRvModel(R.drawable.icons_sun,\"Soleado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_night_mode,\"Nocturno\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_energy_saving,\"Ahorro\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_power_off,\"Apagado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_custom,\"Custom\"));\r\n\r\n        final TextView medidasT=v.findViewById(R.id.medidaTemperatura);\r\n        final TextView medidasH=v.findViewById(R.id.medidaHumedad);\r\n        final TextView medidasS=v.findViewById(R.id.medidaSalinidad);\r\n        final TextView medidasL=v.findViewById(R.id.medidasLuminosidad);\r\n\r\n        recyclerView=v.findViewById(R.id.rv_1);\r\n        staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(),LinearLayoutManager.HORIZONTAL,false));\r\n        recyclerView.setAdapter(staticRvAdapter);\r\n\r\n\r\n        //TABS\r\n        tabLayout = v.findViewById(R.id.tab_layout);\r\n        viewPager = v.findViewById(R.id.view_pager);\r\n         //Array\r\n        ArrayList<String> arrayList = new ArrayList<>();\r\n\r\n        //set up with viewpager\r\n        tabLayout.setupWithViewPager(viewPager);\r\n\r\n        TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());\r\n        //Pestañas\r\n        adapter.addFrag(new GeneralFragment(),\"General\");\r\n        adapter.addFrag(new Planta1Fragment(),\"Planta 1\");\r\n        adapter.addFrag(new Planta2Fragment(),\"Planta 2\");\r\n\r\n        viewPager.setAdapter(adapter );\r\n\r\n        /*((MainActivity)getActivity()).ola();*/\r\n     /*   //LEER DATOS FIREBASE\r\n        //Temperatura\r\n       DocumentReference documentTemperatura=fStore.collection(\"SensoresA-T\").document(\"Temperatura\");\r\n        documentTemperatura.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediTemp=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasT.setText(resMediTemp);\r\n            }\r\n        });\r\n        //Humedad\r\n        DocumentReference documentHumedad=fStore.collection(\"SensoresA-T\").document(\"Humedad\");\r\n        documentHumedad.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediHum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasH.setText(resMediHum);\r\n            }\r\n        });\r\n        //Iluminación\r\n        DocumentReference documentIluminación=fStore.collection(\"SensoresA-T\").document(\"Iluminación\");\r\n        documentIluminación.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIlum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasL.setText(resMediIlum);\r\n            }\r\n        });\r\n        //Temperatura ambiente\r\n        DocumentReference documentambiente=fStore.collection(\"SensoresA-T\").document(\"Temperatura ambiente\");\r\n        documentambiente.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIAmb=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasS.setText(resMediIAmb);\r\n            }\r\n        });\r\n\r\n      */\r\n\r\n        return v;\r\n    }\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n}
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(date 1607536963984)
----@@ -128,9 +128,9 @@
----                 }
----             }
----         });*/
-----/*
----+
----         //switch methods
-----        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidad);
----+ /*     Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);
----         switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
----             public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
----                 if (isChecked) {
----@@ -141,10 +141,10 @@
----                     enviarLucesOff();
----                 }
----             }
-----        });
----+        });*/
---- 
---- 
----- */
----+
---- 
----         //RECYCLER VIEW
----         ArrayList<StaticRvModel> item=new ArrayList<>();
----@@ -154,10 +154,10 @@
----         item.add(new StaticRvModel(R.drawable.icons_power_off,"Apagado"));
----         item.add(new StaticRvModel(R.drawable.icons_custom,"Custom"));
---- 
-----        final TextView medidasT=v.findViewById(R.id.medidaTemperatura);
-----        final TextView medidasH=v.findViewById(R.id.medidaHumedad);
-----        final TextView medidasS=v.findViewById(R.id.medidaSalinidad);
-----        final TextView medidasL=v.findViewById(R.id.medidasLuminosidad);
----+        final TextView medidasT=v.findViewById(R.id.medidaTemperaturaGeneral);
----+        final TextView medidasH=v.findViewById(R.id.medidaHumedadGeneral);
----+        final TextView medidasS=v.findViewById(R.id.medidaSalinidadGeneral);
----+        final TextView medidasL=v.findViewById(R.id.medidasLuminosidadGeneral);
---- 
----         recyclerView=v.findViewById(R.id.rv_1);
----         staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);
----Index: things/src/main/java/com/example/things/MainActivity.java
----IDEA additional info:
----Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
----<+>package com.example.things;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.util.Log;\n\nimport com.example.comun.Mqtt;\nimport com.google.android.gms.tasks.OnCompleteListener;\nimport com.google.android.gms.tasks.Task;\nimport com.google.firebase.firestore.FirebaseFirestore;\nimport com.google.firebase.firestore.QuerySnapshot;\n\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\nimport org.eclipse.paho.client.mqttv3.MqttClient;\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\nimport org.eclipse.paho.client.mqttv3.MqttException;\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport static com.example.comun.Mqtt.qos;\nimport static com.example.comun.Mqtt.topicRoot;\n\n\n/**\n * Skeleton of an Android Things activity.\n * <p>\n * Android Things peripheral APIs are accessible through the PeripheralManager\n * For example, the snippet below will open a GPIO pin and set it to HIGH:\n * <p>\n * PeripheralManager manager = PeripheralManager.getInstance();\n * try {\n * Gpio gpio = manager.openGpio(\"BCM6\");\n * gpio.setDirection(Gpio.DIRECTION_OUT_INITIALLY_LOW);\n * gpio.setValue(true);\n * } catch (IOException e) {\n * Log.e(TAG, \"Unable to access GPIO\");\n * }\n * <p>\n * You can find additional examples on GitHub: https://github.com/androidthings\n */\npublic class MainActivity extends AppCompatActivity implements MqttCallback {\n    public static MqttClient client = null;\n    FirebaseFirestore db;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        db = FirebaseFirestore.getInstance();\n\n        try {\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\n                    MemoryPersistence());\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n        MqttConnectOptions connOpts = new MqttConnectOptions();\n        connOpts.setCleanSession(true);\n        connOpts.setKeepAliveInterval(60);\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\n\n        try {\n            client.connect(connOpts);\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n\n\n        //conexión con el broker Root1 = Lector de datos\n        //nos subscribimos a topic lectura\n        try {\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"lecturaDatos\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\n            client.subscribe(topicRoot + \"lecturaDatos\", Mqtt.qos);\n            client.setCallback(this);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\n        }\n\n    }\n    // Se ejecuta cuando se pierde la conexión\n    @Override\n    public void connectionLost(Throwable cause) {\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\n\n    }\n    @Override\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\n        String payload = new String(message.getPayload());\n        Log.d(Mqtt.TAG, \"Recibiendo: \" + topic + \"->\" + payload);\n\n        if(topic.equals(topicRoot+\"lecturaDatos\")){\n            //topicLectura(payload);\n            // parts0=humedad,parts1=iluminosidad,parts2=humedadHambiente,parts3=temperatura\n            String[] parts = payload.split(\"-\");//comprueba si los datos introducidos van referentes a cada sensor: nombre,medición, estado\n            Log.d(\"PRUUEBA\",parts[0] + \" \"+parts[1] + \" \"+parts[2] + \" \"+parts[3] + \" \");\n            Map<String, Object> dataTemp = new HashMap<>();\n            dataTemp.put(\"Estado:\", \"Activado\");\n            dataTemp.put(\"Medición\", parts[3]);\n            db.collection(\"SensoresA-T\").document(\"Temperatura\").set(dataTemp);\n\n        }\n\n    }\n     private  void topicLectura(final String payload)  {}\n\n    private void topicLuces(final String payload) {\n    }\n\n    private void topicRiego(final String payload) {\n    }\n\n    private void topicVentiladores(final String payload) {\n    }\n\n\n\n\n\n\n\n    @Override\n    public void onDestroy() {\n        try {\n            Log.i(Mqtt.TAG, \"Desconectado\");\n            client.disconnect();\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al desconectar.\", e);\n        }\n        super.onDestroy();\n    }\n\n\n\n\n\n    @Override\n    public void deliveryComplete(IMqttDeliveryToken token) {\n        Log.d(Mqtt.TAG, \"Entrega completa\");\n\n    }\n}
----Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
----<+>UTF-8
----===================================================================
------- things/src/main/java/com/example/things/MainActivity.java	(revision 071caddf55b6035627c29af02a861705a28c7c3a)
----+++ things/src/main/java/com/example/things/MainActivity.java	(date 1607533992044)
----@@ -93,7 +93,7 @@
----     public void messageArrived(String topic, MqttMessage message) throws Exception {
----         String payload = new String(message.getPayload());
----         Log.d(Mqtt.TAG, "Recibiendo: " + topic + "->" + payload);
-----
----+        db.collection("prueba").add(payload);
----         if(topic.equals(topicRoot+"lecturaDatos")){
----             //topicLectura(payload);
----             // parts0=humedad,parts1=iluminosidad,parts2=humedadHambiente,parts3=temperatura
---Index: comun/src/main/java/com/example/comun/Mqtt.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.comun;\r\n\r\npublic class Mqtt {\r\n    public static final String TAG = \"MQTT\";\r\n    public static final String topicRoot=\"infinity/senyal/\";\r\n\r\n\r\n    //Reemplaza equipo por el nombre de tu equipo de prácticas\r\n    public static final int qos = 1;\r\n    public static final String broker = \"tcp://broker.hivemq.com:1883\";\r\n    public static final String clientId = \"IotTestInfinity123434\";\r\n//Reemplaza ClientId con un valor diferente\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ comun/src/main/java/com/example/comun/Mqtt.java	(revision be6f84a0dfcad5ee4d310fbab56a79b4e9d6b888)
---+++ comun/src/main/java/com/example/comun/Mqtt.java	(date 1607642637074)
---@@ -8,6 +8,6 @@
---     //Reemplaza equipo por el nombre de tu equipo de prácticas
---     public static final int qos = 1;
---     public static final String broker = "tcp://broker.hivemq.com:1883";
----    public static final String clientId = "IotTestInfinity123434";
---+    public static final String clientId = "IotTestInfinity1234";
--- //Reemplaza ClientId con un valor diferente
--- }
---\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_01_01_2021_18_07__Default_Changelist_.xml
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_01_01_2021_18_07__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_01_01_2021_18_07__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_01_01_2021_18_07_[Default_Changelist]" date="1609520835203" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_01_01_2021_18_07_[Default_Changelist]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 01/01/2021 18:07 [Default Changelist]" />
---</changelist>
--\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_01_01_2021_18_07_[Default_Changelist]/shelved.patch
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_01_01_2021_18_07_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_01_01_2021_18_07_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--@@ -1,179 +0,0 @@
---Index: app/src/main/java/com/example/infinitycrop/ui/login/LogActivity.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.login;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity2;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.MainActivityMachineList;\r\nimport com.example.infinitycrop.ui.logmail.LoginActivity;\r\nimport com.facebook.AccessToken;\r\nimport com.facebook.AccessTokenTracker;\r\nimport com.facebook.CallbackManager;\r\nimport com.facebook.FacebookCallback;\r\nimport com.facebook.FacebookException;\r\nimport com.facebook.login.LoginResult;\r\nimport com.facebook.login.widget.LoginButton;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInAccount;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.common.SignInButton;\r\nimport com.google.android.gms.common.api.ApiException;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthCredential;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FacebookAuthProvider;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.auth.GoogleAuthProvider;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.facebook.FacebookSdk;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\n\r\npublic class LogActivity extends AppCompatActivity{\r\n    /*private GoogleApiClient googleApiClient;\r\n    private SignInButton signInButton;\r\n    public static final int SIGN_IN_CODE = 777;*/\r\n    //Variable para gestionar FirebaseAuth\r\n    private FirebaseAuth mAuth;\r\n    //Agregar cliente de inicio de sesión de Google\r\n    private GoogleSignInClient mGoogleSignInClient;\r\n    //Constante\r\n    int RC_SIGN_IN = 1;\r\n    SignInButton btnLogin,btnGoogle;\r\n    String TAG = \"GoogleSignIn\";\r\n\r\n    private FirebaseAuth.AuthStateListener authStateListener;\r\n    private AccessTokenTracker accessTokenTracker;\r\n    private LoginButton loginButtonFacebook;\r\n    private CallbackManager mCallbackManager;\r\n    private  static  final String TAG2 = \"FacebookAuthentication\";\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.fragment_login);\r\n        /*GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestEmail()\r\n                .build();\r\n        googleApiClient = new GoogleApiClient.Builder(this)\r\n        .enableAutoManage(this, this)\r\n        .addApi(Auth.GOOGLE_SIGN_IN_API,gso)\r\n        .build();\r\n        signInButton =findViewById(R.id.btn_google);\r\n        signInButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = Auth.GoogleSignInApi.getSignInIntent(googleApiClient);\r\n                startActivityForResult(intent,SIGN_IN_CODE);\r\n            }\r\n        });*/\r\n\r\n        //Botones\r\n        btnGoogle=findViewById(R.id.btn_google);\r\n        loginButtonFacebook = findViewById(R.id.btn_facebook);\r\n        loginButtonFacebook.setReadPermissions(\"email\",\"public_profile\");\r\n\r\n        //Listeners\r\n        btnGoogle.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                signIn();\r\n            }\r\n        });\r\n\r\n        // Configurar Google Sign In\r\n        GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestIdToken(getString(R.string.default_web_client_id))\r\n                .requestEmail()\r\n                .build();\r\n        // Crear un GoogleSignInClient con las opciones especificadas por gso.\r\n        mGoogleSignInClient = GoogleSignIn.getClient(this, gso);\r\n\r\n\r\n\r\n        // Inicializar Firebase Auth\r\n        mAuth = FirebaseAuth.getInstance();\r\n        FacebookSdk.sdkInitialize(getApplicationContext());\r\n\r\n        //Facebook\r\n        mCallbackManager = CallbackManager.Factory.create();\r\n        loginButtonFacebook.registerCallback(mCallbackManager, new FacebookCallback<LoginResult>() {\r\n            @Override\r\n            public void onSuccess(LoginResult loginResult) {\r\n                Log.d(TAG2,\"onSuccess\"+loginResult);\r\n                handleFacebookToken(loginResult.getAccessToken());\r\n            }\r\n\r\n            @Override\r\n            public void onCancel() {\r\n                Log.d(TAG2,\"onCancel\");\r\n            }\r\n\r\n            @Override\r\n            public void onError(FacebookException error) {\r\n                Log.d(TAG2,\"onError: \"+error);\r\n            }\r\n\r\n        });\r\n\r\n        authStateListener = new FirebaseAuth.AuthStateListener() {\r\n            @Override\r\n            public void onAuthStateChanged(@NonNull FirebaseAuth firebaseAuth) {\r\n                FirebaseUser user = firebaseAuth.getCurrentUser();\r\n                if(user!=null){\r\n                    Intent dashboardActivity = new Intent(LogActivity.this, MainActivityMachineList.class);\r\n                    startActivity(dashboardActivity);\r\n                    LogActivity.this.finish();\r\n                }\r\n            }\r\n        };\r\n\r\n        accessTokenTracker = new AccessTokenTracker() {\r\n            @Override\r\n            protected void onCurrentAccessTokenChanged(AccessToken oldAccessToken, AccessToken currentAccessToken) {\r\n                if(currentAccessToken == null){\r\n                    mAuth.signOut();\r\n                }\r\n            }\r\n        };\r\n\r\n    }\r\n    private void signIn() {\r\n        Intent signInIntent = mGoogleSignInClient.getSignInIntent();\r\n        startActivityForResult(signInIntent, RC_SIGN_IN);\r\n    }\r\n\r\n    @Override\r\n    public void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        mCallbackManager.onActivityResult(requestCode,resultCode,data);\r\n\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        //Resultado devuelto al iniciar el Intent de GoogleSignInApi.getSignInIntent (...);\r\n        // Result returned from launching the Intent from GoogleSignInApi.getSignInIntent(...);\r\n        if (requestCode == RC_SIGN_IN) {\r\n            Task<GoogleSignInAccount> task = GoogleSignIn.getSignedInAccountFromIntent(data);\r\n            if(task.isSuccessful()){\r\n                try {\r\n                    // Google Sign In was successful, authenticate with Firebase\r\n                    GoogleSignInAccount account = task.getResult(ApiException.class);\r\n                    Log.d(TAG, \"firebaseAuthWithGoogle:\" + account.getId());\r\n                    firebaseAuthWithGoogle(account.getIdToken());\r\n                } catch (ApiException e) {\r\n                    // Google Sign In fallido, actualizar GUI\r\n                    Log.w(TAG, \"Google sign in failed\", e);\r\n                }\r\n            }else{\r\n                Log.d(TAG, \"Error, login no exitoso:\" + task.getException().toString());\r\n                Toast.makeText(this, \"Ocurrio un error. \"+task.getException().toString(),\r\n                        Toast.LENGTH_LONG).show();\r\n            }\r\n        }\r\n    }\r\n    private void firebaseAuthWithGoogle(String idToken) {\r\n        AuthCredential credential = GoogleAuthProvider.getCredential(idToken, null);\r\n        mAuth.signInWithCredential(credential)\r\n                .addOnCompleteListener(this, new OnCompleteListener<AuthResult>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<AuthResult> task) {\r\n                        if (task.isSuccessful()) {\r\n                            FirebaseFirestore db=FirebaseFirestore.getInstance();\r\n                            String userID= mAuth.getCurrentUser().getUid();\r\n                            String name= mAuth.getCurrentUser().getDisplayName();\r\n                            String mail= mAuth.getCurrentUser().getEmail();\r\n                            Map<String, Object> data = new HashMap<>();\r\n                            data.put(\"username\", name);\r\n                            data.put(\"mail\", mail);\r\n                            db.collection(\"Usuarios\").document(userID)\r\n                                    .set(data);\r\n                            /*db.collection(\"Usuarios\").document(userID)\r\n                                    .collection(\"Maquinas\").document(\"fecha\")\r\n                                    .set(data);*/\r\n\r\n                            // Sign in success, update UI with the signed-in user's information\r\n                            Log.d(TAG, \"signInWithCredential:success\");\r\n                            //FirebaseUser user = mAuth.getCurrentUser();\r\n                            //Iniciar DASHBOARD u otra actividad luego del SigIn Exitoso\r\n                            Intent dashboardActivity = new Intent(LogActivity.this, IntroductoryActivity2.class);\r\n                            startActivity(dashboardActivity);\r\n                            LogActivity.this.finish();\r\n                        } else {\r\n                            // If sign in fails, display a message to the user.\r\n                            Log.w(TAG, \"signInWithCredential:failure\", task.getException());\r\n\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n    @Override\r\n    protected void onStart() {\r\n        FirebaseUser user = mAuth.getCurrentUser();\r\n        if(user!=null){ //si no es null el usuario ya esta logueado\r\n            //mover al usuario al dashboard\r\n            Intent dashboardActivity = new Intent(LogActivity.this, MainActivityMachineList.class);\r\n            startActivity(dashboardActivity);\r\n        }\r\n        super.onStart();\r\n        mAuth.addAuthStateListener(authStateListener);\r\n    }\r\n    //metodo para navegar entre activitys con los botones\r\n    public void Email (View view){\r\n        Intent email = new Intent(this, LoginActivity.class);\r\n        startActivity(email);\r\n    }\r\n   /* @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if(requestCode == SIGN_IN_CODE){\r\n            GoogleSignInResult result = Auth.GoogleSignInApi.getSignInResultFromIntent(data);\r\n            handleSignResult(result);\r\n        }\r\n    }\r\n\r\n    private void handleSignResult(GoogleSignInResult result) {\r\n        if (result.isSuccess()){\r\n            goMainScreen();\r\n        }else{\r\n            Toast.makeText(this, \"Error al iniciar sesión\", Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void goMainScreen() {\r\n       Intent intent=new Intent(this, MainActivity.class);\r\n       startActivity(intent);\r\n    }\r\n\r\n    //metodo para navegar entre activitys con los botones\r\n    public void Email (View view){\r\n        Intent email = new Intent(this, LoginActivity.class);\r\n        startActivity(email);\r\n    }\r\n\r\n    @Override\r\n    public void onConnectionFailed(@NonNull ConnectionResult connectionResult) {\r\n\r\n    }*/\r\n    //Funciones Login con facebook\r\n    private void handleFacebookToken(AccessToken token){\r\n        Log.d(TAG2,\"handleFacebookToken\" + token);\r\n\r\n        AuthCredential credential = FacebookAuthProvider.getCredential(token.getToken());\r\n        mAuth.signInWithCredential(credential).addOnCompleteListener(this, new OnCompleteListener<AuthResult>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<AuthResult> task) {\r\n                if(task.isSuccessful()){\r\n                    Log.d(TAG2,\"sing in with credential: successfully\");\r\n                    FirebaseUser user = mAuth.getCurrentUser();\r\n                    if(user!=null){ //si no es null el usuario ya esta logueado\r\n                        Intent dashboardActivity = new Intent(LogActivity.this, MainActivityMachineList.class);\r\n                        startActivity(dashboardActivity);\r\n                    }\r\n                }else{\r\n                    Log.d(TAG2,\"sing in with credential: failed\", task.getException());\r\n                    Toast.makeText(LogActivity.this,\"Authentication Failed\", Toast.LENGTH_SHORT);\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        if(authStateListener != null){\r\n            mAuth.removeAuthStateListener(authStateListener);\r\n            finish();\r\n        }\r\n    }\r\n\r\n}\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/login/LogActivity.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
---+++ app/src/main/java/com/example/infinitycrop/ui/login/LogActivity.java	(date 1609283329946)
---@@ -63,7 +63,7 @@
---     @Override
---     protected void onCreate(Bundle savedInstanceState) {
---         super.onCreate(savedInstanceState);
----        setContentView(R.layout.fragment_login);
---+       /* setContentView(R.layout.fragment_login);*/
---         /*GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)
---                 .requestEmail()
---                 .build();
---Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.Manifest;\r\nimport android.app.Activity;\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.content.res.ColorStateList;\r\nimport android.location.Address;\r\nimport android.location.Geocoder;\r\nimport android.location.Location;\r\nimport android.location.LocationManager;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.os.StrictMode;\r\nimport android.provider.Settings;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvModel;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.location.FusedLocationProviderClient;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.annotations.NotNull;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.squareup.okhttp.Call;\r\nimport com.squareup.okhttp.Callback;\r\nimport com.squareup.okhttp.OkHttpClient;\r\nimport com.squareup.okhttp.Request;\r\nimport com.squareup.okhttp.Response;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link DashboardFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class DashboardFragment extends Fragment implements MqttCallback{\r\n\r\n    private RecyclerView recyclerView;\r\n    private StaticRvAdapter staticRvAdapter;\r\n    private TabLayout tabLayout;\r\n    private ViewPager viewPager;\r\n    //WEATHER\r\n    private static  final int REQUEST_LOCATION=1;\r\n    double lat;\r\n    double longi;\r\n\r\n    TextView showLocationTxt;\r\n\r\n    LocationManager locationManager;\r\n    String latitude,longitude;\r\n\r\n    TextView view_city;\r\n    TextView view_temp;\r\n    TextView view_desc;\r\n    TextView view_country;\r\n\r\n    ImageView view_weather;\r\n    //\r\n\r\n\r\n    public static MqttClient client = null;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public DashboardFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment DashboardFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static DashboardFragment newInstance(String param1, String param2) {\r\n        DashboardFragment fragment = new DashboardFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_dashboard, container, false);\r\n        //FIREBASE\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        final FirebaseUser usuario = mAuth.getCurrentUser();\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=usuario.getUid();\r\n        //guardo el nombre en un textView\r\n        /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);\r\n        String res=\"Hola\"+\" \"+usuario.getDisplayName();\r\n        nombre.setText(res);\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(usuario.getDisplayName() == null){\r\n                    String res1=\"Hola\"+\" \"+snapshot.getString(\"username\");\r\n                    nombre.setText(res1);\r\n                }\r\n            }\r\n        });*/\r\n\r\n        //switch methods\r\n /*     Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });*/\r\n\r\n\r\n        //WEATHER\r\n        ActivityCompat.requestPermissions(getActivity(),new String[]\r\n                {Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n\r\n        view_city =v.findViewById(R.id.town);\r\n        view_city.setText(\"\");\r\n        view_temp =v.findViewById(R.id.temp);\r\n        view_temp.setText(\"\");\r\n        view_desc =v.findViewById(R.id.desc);\r\n        view_desc.setText(\"\");\r\n        view_country=v.findViewById(R.id.txtCountry);\r\n        view_country.setText(\"\");\r\n        view_weather =v.findViewById(R.id.wheather_image);\r\n\r\n        locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);\r\n        inicioGPS();\r\n        //\r\n\r\n\r\n\r\n\r\n        //RECYCLER VIEW\r\n        ArrayList<StaticRvModel> item=new ArrayList<>();\r\n        item.add(new StaticRvModel(R.drawable.icons_sun,\"Soleado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_night_mode,\"Nocturno\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_energy_saving,\"Ahorro\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_power_off,\"Apagado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_custom,\"Custom\"));\r\n\r\n        final TextView medidasT=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidasH=v.findViewById(R.id.medidaHumedadGeneral);\r\n        final TextView medidasS=v.findViewById(R.id.medidaSalinidadGeneral);\r\n        final TextView medidasL=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n\r\n        recyclerView=v.findViewById(R.id.rv_1);\r\n        staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(),LinearLayoutManager.HORIZONTAL,false));\r\n        recyclerView.setAdapter(staticRvAdapter);\r\n\r\n\r\n        //TABS\r\n        tabLayout = v.findViewById(R.id.tab_layout);\r\n        viewPager = v.findViewById(R.id.view_pager);\r\n         //Array\r\n        ArrayList<String> arrayList = new ArrayList<>();\r\n\r\n        //set up with viewpager\r\n        tabLayout.setupWithViewPager(viewPager);\r\n\r\n        TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());\r\n        //Pestañas\r\n        adapter.addFrag(new GeneralFragment(),\"General\");\r\n        adapter.addFrag(new Planta1Fragment(),\"Planta 1\");\r\n        adapter.addFrag(new Planta2Fragment(),\"Planta 2\");\r\n\r\n        viewPager.setAdapter(adapter );\r\n\r\n        /*((MainActivity)getActivity()).ola();*/\r\n     /*   //LEER DATOS FIREBASE\r\n        //Temperatura\r\n       DocumentReference documentTemperatura=fStore.collection(\"SensoresA-T\").document(\"Temperatura\");\r\n        documentTemperatura.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediTemp=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasT.setText(resMediTemp);\r\n            }\r\n        });\r\n        //Humedad\r\n        DocumentReference documentHumedad=fStore.collection(\"SensoresA-T\").document(\"Humedad\");\r\n        documentHumedad.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediHum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasH.setText(resMediHum);\r\n            }\r\n        });\r\n        //Iluminación\r\n        DocumentReference documentIluminación=fStore.collection(\"SensoresA-T\").document(\"Iluminación\");\r\n        documentIluminación.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIlum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasL.setText(resMediIlum);\r\n            }\r\n        });\r\n        //Temperatura ambiente\r\n        DocumentReference documentambiente=fStore.collection(\"SensoresA-T\").document(\"Temperatura ambiente\");\r\n        documentambiente.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIAmb=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasS.setText(resMediIAmb);\r\n            }\r\n        });\r\n\r\n      */\r\n\r\n        return v;\r\n    }\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n\r\n\r\n    //WEATHER METHODS\r\n    private void api_key(final String City) {\r\n        OkHttpClient client = new OkHttpClient();\r\n\r\n        Request request = new Request.Builder()\r\n                .url(\"https://api.openweathermap.org/data/2.5/weather?q=\" + City + \"&appid=a6f41d947e0542a26580bcd5c3fb90ef&units=metric\")\r\n                .get()\r\n                .build();\r\n        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n        StrictMode.setThreadPolicy(policy);\r\n        try {\r\n            Response response = client.newCall(request).execute();\r\n            client.newCall(request).enqueue(new Callback() {\r\n                @Override\r\n                public void onFailure(Request request, IOException e) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onResponse(Response response) throws IOException {\r\n                    String responseData = response.body().string();\r\n                    try {\r\n                        JSONObject json = new JSONObject(responseData);\r\n                        JSONArray array = json.getJSONArray(\"weather\");\r\n                        JSONObject object = array.getJSONObject(0);\r\n\r\n                        String description = object.getString(\"description\");\r\n                        String icons = object.getString(\"icon\");\r\n\r\n                        JSONObject temp1 = json.getJSONObject(\"main\");\r\n                        Double Temperature = temp1.getDouble(\"temp\");\r\n\r\n                        setText(view_city, City);\r\n\r\n                        String temps = Math.round(Temperature) + \" °C\";\r\n                        setText(view_temp, temps);\r\n                        setText(view_desc, description);\r\n                        setImage(view_weather, icons);\r\n\r\n                    } catch (JSONException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n\r\n            });\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    private void setText(final TextView text, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                text.setText(value);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setImage(final ImageView imageView, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                //paste switch\r\n                switch (value) {\r\n                    case \"01d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"01n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"02d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"02n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"03d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"03n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"04d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"04n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"09d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"09n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"10d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"10n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"11d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"11n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"13d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    case \"13n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    default:\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.wheather));\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    //App location\r\n    private void getLocation() {\r\n\r\n        //Check Permissions again\r\n\r\n        if (ActivityCompat.checkSelfPermission(\r\n                getContext(),Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(\r\n                getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n        } else {\r\n\r\n            Location LocationNetwork=locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);\r\n             if (LocationNetwork !=null)\r\n            {\r\n                double lat=LocationNetwork.getLatitude();\r\n                double longi=LocationNetwork.getLongitude();\r\n\r\n                latitude=String.valueOf(lat);\r\n                longitude=String.valueOf(longi);\r\n                loc_func(LocationNetwork);\r\n                api_key(String.valueOf(view_city.getText()));\r\n                showLocationTxt.setText(\"Your Location:\"+\"\\n\"+\"Latitude= \"+latitude+\"\\n\"+\"Longitude= \"+longitude);\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private void OnGPS() {\r\n\r\n        final AlertDialog.Builder builder= new AlertDialog.Builder(getContext());\r\n\r\n        builder.setMessage(\"Enable GPS\").setCancelable(false).setPositiveButton(\"YES\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS));\r\n                getLocation();\r\n            }\r\n        }).setNegativeButton(\"NO\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                dialog.cancel();\r\n            }\r\n        });\r\n        final AlertDialog alertDialog=builder.create();\r\n        alertDialog.show();\r\n    }\r\n\r\n    private void loc_func(Location location){\r\n        try {\r\n            Geocoder geocoder=new Geocoder(getContext());\r\n            List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);\r\n            String address = addresses.get(0).getSubLocality();\r\n            String cityName = addresses.get(0).getLocality();\r\n            String stateName = addresses.get(0).getAdminArea();\r\n            String country = addresses.get(0).getCountryName();\r\n            //txt_paddress.setText(address);\r\n            view_city.setText(cityName);\r\n            view_country.setText(country);\r\n            //txt_state.setText(stateName);*/\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            Toast.makeText(getContext(), \"Error:\"+e, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void inicioGPS(){\r\n\r\n\r\n        //Check gps is enable or not\r\n\r\n        if (!locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))\r\n        {\r\n            //Write Function To enable gps\r\n\r\n            OnGPS();\r\n        }\r\n        else\r\n        {\r\n            //GPS is already On then\r\n\r\n            getLocation();\r\n        }\r\n    }\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
---+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(date 1609199163490)
---@@ -201,7 +201,7 @@
---         view_weather =v.findViewById(R.id.wheather_image);
--- 
---         locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);
----        inicioGPS();
---+       /* inicioGPS();*/
---         //
--- 
--- 
---@@ -519,7 +519,7 @@
--- 
---                 latitude=String.valueOf(lat);
---                 longitude=String.valueOf(longi);
----                loc_func(LocationNetwork);
---+               /* loc_func(LocationNetwork);*/
---                 api_key(String.valueOf(view_city.getText()));
---                 showLocationTxt.setText("Your Location:"+"\n"+"Latitude= "+latitude+"\n"+"Longitude= "+longitude);
---             }
---@@ -553,7 +553,7 @@
---         try {
---             Geocoder geocoder=new Geocoder(getContext());
---             List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);
----            String address = addresses.get(0).getSubLocality();
---+            /*String address = addresses.get(0).getSubLocality();*/
---             String cityName = addresses.get(0).getLocality();
---             String stateName = addresses.get(0).getAdminArea();
---             String country = addresses.get(0).getCountryName();
---@@ -583,7 +583,7 @@
---         {
---             //GPS is already On then
--- 
----            getLocation();
---+            /*getLocation();*/
---         }
---     }
--- }
---\ No newline at end of file
---Index: app/src/main/res/layout/fragment_login.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.login.LogActivity\" >\r\n\r\n    <ImageView\r\n        android:id=\"@+id/imageView4\"\r\n        android:layout_width=\"254dp\"\r\n        android:layout_height=\"188dp\"\r\n        android:contentDescription=\"@string/title_wellcome_login\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"\r\n        app:layout_constraintVertical_bias=\"0.0\"\r\n        app:srcCompat=\"@drawable/stickerlog\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/textView3\"\r\n        android:layout_width=\"184dp\"\r\n        android:layout_height=\"20dp\"\r\n        android:layout_marginTop=\"40dp\"\r\n        android:layout_marginEnd=\"52dp\"\r\n        android:text=\"@string/title_wellcome_login\"\r\n        android:textColor=\"@color/colorPrimaryLight\"\r\n        android:textSize=\"16sp\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/imageView4\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n    <TextView\r\n        android:id=\"@+id/textView4\"\r\n        android:layout_width=\"151dp\"\r\n        android:layout_height=\"32dp\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:layout_marginEnd=\"84dp\"\r\n        android:text=\"@string/title_orderLog\"\r\n        android:textColor=\"@color/colorPrimary\"\r\n        android:textSize=\"26sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/imageView4\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/textView3\" />\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"530dp\"\r\n        android:orientation=\"vertical\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/imageView4\"\r\n        app:layout_constraintVertical_bias=\"0.527\">\r\n\r\n        <ImageView\r\n            android:id=\"@+id/imageView3\"\r\n            android:layout_width=\"254dp\"\r\n            android:layout_height=\"146dp\"\r\n            android:layout_gravity=\"center_horizontal\"\r\n            android:layout_marginBottom=\"70dp\"\r\n            android:contentDescription=\"@string/title_wellcome_login\"\r\n            app:srcCompat=\"@drawable/logo_and_text\" />\r\n\r\n        <!--<Button\r\n               android:id=\"@+id/btn_facebook\"\r\n               android:layout_width=\"match_parent\"\r\n               android:layout_height=\"wrap_content\"\r\n               android:background=\"@drawable/btn_facebook\"\r\n               android:drawableLeft=\"@drawable/ic_facebook_icon\"\r\n               android:paddingLeft=\"20dp\"\r\n               android:textColor=\"#FFFF\"\r\n               android:layout_marginLeft=\"20dp\"\r\n               android:layout_marginRight=\"20dp\"\r\n               android:text=\"@string/title_cont_faceboock\" /> -->\r\n        <com.facebook.login.widget.LoginButton\r\n            android:id=\"@+id/btn_facebook\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:background=\"@drawable/btn_facebook\"\r\n            android:drawableLeft=\"@drawable/ic_facebook_icon\"\r\n            android:paddingLeft=\"20dp\"\r\n            android:textColor=\"#FFFF\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginRight=\"20dp\"\r\n            android:text=\"@string/title_cont_faceboock\" />\r\n        <!-- <com.facebook.login.widget.LoginButton\r\n            android:id=\"@+id/login_button\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center_horizontal\"\r\n            android:layout_marginTop=\"30dp\"\r\n            android:layout_marginBottom=\"30dp\" />  -->\r\n\r\n        <com.google.android.gms.common.SignInButton\r\n            android:id=\"@+id/btn_google\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginRight=\"20dp\"\r\n            android:background=\"@drawable/btn_google\"\r\n            android:drawableLeft=\"@drawable/ic_google_icon\"\r\n            android:text=\"@string/title_cont_google\"\r\n            android:textColor=\"#000000\" />\r\n\r\n        <Button\r\n            android:id=\"@+id/btn_mail\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginRight=\"20dp\"\r\n            android:background=\"@drawable/btn_mail\"\r\n            android:drawableLeft=\"@drawable/ic_mail_icon\"\r\n            android:onClick=\"Email\"\r\n            android:paddingLeft=\"20dp\"\r\n            android:text=\"@string/title_cont_mail\"\r\n            android:textColor=\"#000000\" />\r\n\r\n    </LinearLayout>\r\n\r\n\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/res/layout/fragment_login.xml	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
---+++ app/src/main/res/layout/fragment_login.xml	(date 1609283329934)
---@@ -5,7 +5,7 @@
---     xmlns:tools="http://schemas.android.com/tools"
---     android:layout_width="match_parent"
---     android:layout_height="match_parent"
----    tools:context=".ui.login.LogActivity" >
---+     >
--- 
---     <ImageView
---         android:id="@+id/imageView4"
---Index: app/src/main/AndroidManifest.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.infinitycrop\">\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/>\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\"/>\r\n    <uses-permission android:name=\"android.permission.INTERNET\"/>\r\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" />\r\n    <!--Permisos Qr-->\r\n    <uses-permission android:name=\"android.permission.CAMERA\"/>\r\n    <uses-feature android:name=\"android.hardware.camera\"></uses-feature>\r\n    <uses-feature android:name=\"android.hardware.camera.autofocus\"></uses-feature>\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher\"\r\n        android:theme=\"@style/AppThemeHome\"\r\n        >\r\n\r\n        <activity android:name=\".MainActivity\" android:theme=\"@style/SplashTheme\">\r\n        </activity>\r\n\r\n        <activity android:name=\"com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\">\r\n\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.HelpProfile\">\r\n\r\n        </activity>\r\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\"></activity>\r\n        <activity android:name=\".ui.list_machine.AddMachine\"></activity>\r\n        <activity android:name=\".ui.logmail.RegisterActivity\"></activity>\r\n        <activity android:name=\".ui.logmail.LoginActivity\"></activity>\r\n        <activity android:name=\".ui.list_machine.CaptureAct\"></activity>\r\n        <activity android:name=\"com.example.infinitycrop.ui.login.LogActivity\"></activity>\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\"></activity>\r\n        <activity android:name=\".ui.profile.settings.ModifyProfile\"></activity>\r\n\r\n\r\n\r\n\r\n        <meta-data android:name=\"com.google.android.geo.API_KEY\"\r\n            android:value=\"@string/google_maps_key\" />\r\n\r\n        <meta-data android:name=\"com.facebook.sdk.ApplicationId\"\r\n            tools:replace=\"android:value\"\r\n            android:value=\"@string/facebook_app_id\"/>\r\n        <meta-data\r\n            android:name=\"preloaded_fonts\"\r\n            android:resource=\"@array/preloaded_fonts\" />\r\n\r\n\r\n    </application>\r\n\r\n</manifest>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/AndroidManifest.xml	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
---+++ app/src/main/AndroidManifest.xml	(date 1609206354200)
---@@ -44,7 +44,7 @@
---         <activity android:name=".ui.list_machine.CaptureAct"></activity>
---         <activity android:name="com.example.infinitycrop.ui.login.LogActivity"></activity>
---         <activity android:name=".ui.LoadAnimations.IntroductoryActivity2"></activity>
----        <activity android:name=".ui.profile.settings.ModifyProfile"></activity>
---+        <activity android:name=".ui.LoadAnimations.LogprimeraActivity"></activity>
--- 
--- 
--- 
---Index: app/src/main/java/com/example/infinitycrop/ui/LoadAnimations/IntroductoryActivity.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.LoadAnimations;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.app.Activity;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.os.CountDownTimer;\r\nimport android.widget.ImageView;\r\n\r\nimport com.airbnb.lottie.LottieAnimationView;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.login.LogActivity;\r\n\r\nimport static java.security.AccessController.getContext;\r\n\r\npublic class IntroductoryActivity extends AppCompatActivity {\r\n    ImageView logo,splashImg;\r\n    LottieAnimationView lottieAnimationView;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_introductory);\r\n        logo = findViewById(R.id.log);\r\n        splashImg = findViewById(R.id.img);\r\n        lottieAnimationView = findViewById(R.id.lottie);\r\n\r\n        splashImg.animate().translationY(-4000).setDuration(1000).setStartDelay(4000);\r\n        logo.animate().translationY(4000).setDuration(1000).setStartDelay(4000);\r\n        lottieAnimationView.animate().translationY(1600).setDuration(800).setStartDelay(3900);\r\n\r\n        if (this.equals(0)) {\r\n            finish();\r\n        }\r\n        new CountDownTimer(4660, 1000) {\r\n\r\n            public void onTick(long millisUntilFinished) {\r\n\r\n\r\n            }\r\n\r\n\r\n            public void onFinish() {\r\n                Intent intent= new Intent (getApplicationContext(), LogActivity.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n\r\n        }.start();\r\n\r\n    }\r\n    @Override\r\n    public void onStop() {\r\n        finish();\r\n        super.onStop();\r\n    }\r\n\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/LoadAnimations/IntroductoryActivity.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
---+++ app/src/main/java/com/example/infinitycrop/ui/LoadAnimations/IntroductoryActivity.java	(date 1609279216633)
---@@ -28,7 +28,7 @@
--- 
---         splashImg.animate().translationY(-4000).setDuration(1000).setStartDelay(4000);
---         logo.animate().translationY(4000).setDuration(1000).setStartDelay(4000);
----        lottieAnimationView.animate().translationY(1600).setDuration(800).setStartDelay(3900);
---+        lottieAnimationView.animate().translationY(1400).setDuration(800).setStartDelay(3900);
--- 
---         if (this.equals(0)) {
---             finish();
---@@ -42,7 +42,7 @@
--- 
--- 
---             public void onFinish() {
----                Intent intent= new Intent (getApplicationContext(), LogActivity.class);
---+                Intent intent= new Intent (getApplicationContext(), LogprimeraActivity.class);
---                 startActivity(intent);
--- 
---             }
---Index: app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.profile;\r\n\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.graphics.Bitmap;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.util.LruCache;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.android.volley.RequestQueue;\r\nimport com.android.volley.toolbox.ImageLoader;\r\nimport com.android.volley.toolbox.NetworkImageView;\r\nimport com.android.volley.toolbox.Volley;\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.MainActivityMachineList;\r\nimport com.example.infinitycrop.ui.login.LogActivity;\r\nimport com.example.infinitycrop.ui.profile.settings.AboutInfinityCrap;\r\nimport com.example.infinitycrop.ui.profile.settings.HelpProfile;\r\n//import com.example.infinitycrop.ui.profile.settings.ModifyProfile;\r\nimport com.firebase.ui.auth.AuthUI;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link ProfileFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class ProfileFragment extends Fragment {\r\n    //atributos para confirmación de correo\r\n    private FirebaseUser us;\r\n    private TextView txtverf;\r\n    private Button btnconf;\r\n\r\n\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public ProfileFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment ProfileFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static ProfileFragment newInstance(String param1, String param2) {\r\n        ProfileFragment fragment = new ProfileFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_profile, container, false);\r\n\r\n        ImageView irAPerfil =v.findViewById(R.id.irAEditarPerfil);\r\n        irAPerfil.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                /*Intent intent = new Intent(getActivity(), ModifyProfile.class);\r\n                startActivity(intent);*/\r\n            }\r\n        });\r\n\r\n        //Enlaces de los botones de configuracion\r\n        //personalice colors\r\n        RelativeLayout customColors_btn =v.findViewById(R.id.relativeLayout4);\r\n        customColors_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n            }\r\n        });\r\n        //about us\r\n        RelativeLayout aboutInfinity_btn =v.findViewById(R.id.relativeLayout6);\r\n        aboutInfinity_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), AboutInfinityCrap.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        //help\r\n        RelativeLayout help_profile =v.findViewById(R.id.relativeLayout5);\r\n        help_profile.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), HelpProfile.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        //firebase\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=mAuth.getCurrentUser().getUid();\r\n        final GoogleSignInClient mGoogleSignInClient;\r\n        GoogleSignInOptions gso;\r\n        final FirebaseUser usuario = FirebaseAuth.getInstance().getCurrentUser();\r\n        //guardo la imagen en un ImagenView\r\n        final ImageView img = (ImageView) v.findViewById(R.id.profile);\r\n        //guardo el nombre en un textView\r\n        final TextView nombre = (TextView) v.findViewById(R.id.username);\r\n        nombre.setText(usuario.getDisplayName());\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(nombre.getText() == \"\"){\r\n                    nombre.setText(snapshot.getString(\"username\"));\r\n                    img.setImageResource(R.drawable.icons_user);\r\n                }\r\n            }\r\n        });\r\n\r\n        //guardo el mail en un textView\r\n        TextView correo = (TextView) v.findViewById(R.id.mailUser);\r\n        correo.setText(usuario.getEmail());\r\n        //cargar imágen con glide:\r\n        Glide.with(this).load(usuario.getPhotoUrl()).into(img);\r\n        //boton cerrar sesion\r\n\r\n        //Configurar las gso para google signIn con el fin de luego desloguear de google\r\n        gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestIdToken(getString(R.string.default_web_client_id))\r\n                .requestEmail()\r\n                .build();\r\n        mGoogleSignInClient = GoogleSignIn.getClient(getActivity(), gso);\r\n\r\n        RelativeLayout cerrarSesion =(RelativeLayout) v.findViewById(R.id.btn_end_session);\r\n        cerrarSesion.setOnClickListener(new View.OnClickListener() {\r\n            public void onClick(View view) {\r\n                new AlertDialog.Builder(requireContext())\r\n                        .setTitle(\"Cerrar sesión\")\r\n                        .setMessage(\"¿Estas seguro que quieres cerrar sesión?\")\r\n                        .setPositiveButton(\"Confirmar\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n                                //Cerrar session con Firebase\r\n                                mAuth.signOut();\r\n                                //Cerrar sesión con google tambien: Google sign out\r\n                                mGoogleSignInClient.signOut().addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                                    @Override\r\n                                    public void onComplete(@NonNull Task<Void> task) {\r\n                                        //Abrir MainActivity con SigIn button\r\n                                        if(task.isSuccessful()){\r\n                                            Intent logActivity = new Intent(getActivity().getApplicationContext(), LogActivity.class);\r\n                                            startActivity(logActivity);\r\n                                            getActivity().finish();\r\n                                        }else{\r\n                                            Toast.makeText(getActivity().getApplicationContext(), \"No se pudo cerrar sesión con google\",\r\n                                                    Toast.LENGTH_LONG).show();\r\n                                        }\r\n                                    }\r\n                                });\r\n\r\n                            }\r\n                        })\r\n                        .setNegativeButton(\"Cancelar\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                            }\r\n                        })\r\n                        .show();\r\n\r\n\r\n            }\r\n        });\r\n\r\n        //Confirmación de verificación de correo\r\n        TextView txtverify = (TextView) v.findViewById(R.id.txtVerif);\r\n        Button btnverify = (Button) v.findViewById(R.id.btnverif);\r\n        final FirebaseUser user = mAuth.getCurrentUser();\r\n        if(!user.isEmailVerified()){\r\n            us=user;\r\n            txtverf = txtverify;\r\n            btnconf = btnverify;\r\n\r\n            txtverify.setVisibility(View.VISIBLE);\r\n            btnverify.setVisibility(View.VISIBLE);\r\n\r\n            btnverify.setOnClickListener(new View.OnClickListener()\r\n            {\r\n                @Override\r\n                public void onClick(final View v)\r\n                {\r\n\r\n                    FirebaseUser user = mAuth.getCurrentUser();\r\n                    user.sendEmailVerification().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            Toast.makeText(getActivity(),\"Enviando correo de confirmación\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n\r\n                            Toast.makeText(getActivity(),\"Error en el envío de correo\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            /*}else{\r\n            txtverify.setVisibility(View.GONE);\r\n            btnverify.setVisibility(View.GONE);*/\r\n        }\r\n        /*RequestQueue colaPeticiones = Volley.newRequestQueue(getActivity()\r\n                .getApplicationContext());\r\n        ImageLoader lectorImagenes = new ImageLoader(colaPeticiones,\r\n                new ImageLoader.ImageCache() {\r\n                    private final LruCache<String, Bitmap> cache =\r\n                            new LruCache<String, Bitmap>(10);\r\n                    public void putBitmap(String url, Bitmap bitmap) {\r\n                        cache.put(url, bitmap);\r\n                    }\r\n                    public Bitmap getBitmap(String url) {\r\n                        return cache.get(url);\r\n                    }\r\n                });\r\n        Uri urlImagen = usuario.getPhotoUrl();\r\n        if (urlImagen != null) {\r\n            NetworkImageView fotoUsuario = (NetworkImageView)\r\n                    v.findViewById(R.id.profile);\r\n            fotoUsuario.setImageUrl(urlImagen.toString(), lectorImagenes);\r\n        }else{\r\n            NetworkImageView fotoUsuario = (NetworkImageView)\r\n                    v.findViewById(R.id.profile);\r\n            fotoUsuario.setImageUrl(String.valueOf(R.drawable.icons_user), lectorImagenes);\r\n        }*/\r\n        return v;\r\n    }\r\n}\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
---+++ app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java	(date 1609199006251)
---@@ -32,7 +32,7 @@
--- import com.example.infinitycrop.ui.login.LogActivity;
--- import com.example.infinitycrop.ui.profile.settings.AboutInfinityCrap;
--- import com.example.infinitycrop.ui.profile.settings.HelpProfile;
----//import com.example.infinitycrop.ui.profile.settings.ModifyProfile;
---+/*import com.example.infinitycrop.ui.profile.settings.ModifyProfile;*/
--- import com.firebase.ui.auth.AuthUI;
--- import com.google.android.gms.auth.api.signin.GoogleSignIn;
--- import com.google.android.gms.auth.api.signin.GoogleSignInClient;
---@@ -112,7 +112,7 @@
---         irAPerfil.setOnClickListener(new View.OnClickListener() {
---             @Override
---             public void onClick(View v) {
----                /*Intent intent = new Intent(getActivity(), ModifyProfile.class);
---+               /* Intent intent = new Intent(getActivity(), ModifyProfile.class);
---                 startActivity(intent);*/
---             }
---         });
---Index: app/src/main/java/com/example/infinitycrop/ui/OnBoardingFragment/OnBoardingFragment4.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.OnBoardingFragment;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.AddMachine;\r\n\r\npublic class OnBoardingFragment4 extends Fragment {\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        final ViewGroup root = (ViewGroup) inflater.inflate(R.layout.fragment_on_boarding4,container,false);\r\n        TextView button = (TextView) root.findViewById(R.id.btn_skip);\r\n        button.setOnClickListener(new View.OnClickListener()\r\n        {\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                Intent intent = new Intent((getActivity().getApplication()), AddMachine.class);\r\n                TextView editText = (TextView) root.findViewById(R.id.btn_skip);\r\n\r\n                startActivity(intent);\r\n\r\n            }\r\n        });\r\n        Button button1 = (Button) root.findViewById(R.id.btn_start);\r\n        button1.setOnClickListener(new View.OnClickListener()\r\n        {\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                Intent i = new Intent((getActivity().getApplication()), AddMachine.class);\r\n                Button button1 = (Button) root.findViewById(R.id.btn_start);\r\n                startActivity(i);\r\n            }\r\n        });\r\n\r\n        return root;\r\n    }\r\n}\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/OnBoardingFragment/OnBoardingFragment4.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
---+++ app/src/main/java/com/example/infinitycrop/ui/OnBoardingFragment/OnBoardingFragment4.java	(date 1609285300918)
---@@ -17,6 +17,7 @@
---     @Override
---     public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
---         final ViewGroup root = (ViewGroup) inflater.inflate(R.layout.fragment_on_boarding4,container,false);
---+
---         TextView button = (TextView) root.findViewById(R.id.btn_skip);
---         button.setOnClickListener(new View.OnClickListener()
---         {
---@@ -30,6 +31,7 @@
--- 
---             }
---         });
---+
---         Button button1 = (Button) root.findViewById(R.id.btn_start);
---         button1.setOnClickListener(new View.OnClickListener()
---         {
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02__Default_Changelist_.xml
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_30_12_2020_23_02_[Default_Changelist]" date="1609365747965" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02_[Default_Changelist]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 30/12/2020 23:02 [Default Changelist]" />
---</changelist>
--\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20__Default_Changelist_.xml
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_02_01_2021_18_20_[Default_Changelist]" date="1609608028000" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20_[Default_Changelist]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 02/01/2021 18:20 [Default Changelist]" />
---</changelist>
--\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_18_10__Default_Changelist_.xml
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_18_10__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_18_10__Default_Changelist_.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_28_12_2020_18_10_[Default_Changelist]" date="1609175420227" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_18_10_[Default_Changelist]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 28/12/2020 18:10 [Default Changelist]" />
---</changelist>
--\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02_[Default_Changelist]/shelved.patch
--===================================================================
----- .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02_[Default_Changelist]/shelved.patch	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--@@ -1,350 +0,0 @@
---Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.Manifest;\r\nimport android.app.Activity;\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.content.res.ColorStateList;\r\nimport android.location.Address;\r\nimport android.location.Geocoder;\r\nimport android.location.Location;\r\nimport android.location.LocationManager;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.os.StrictMode;\r\nimport android.provider.Settings;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvModel;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.location.FusedLocationProviderClient;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.annotations.NotNull;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.squareup.okhttp.Call;\r\nimport com.squareup.okhttp.Callback;\r\nimport com.squareup.okhttp.OkHttpClient;\r\nimport com.squareup.okhttp.Request;\r\nimport com.squareup.okhttp.Response;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link DashboardFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class DashboardFragment extends Fragment implements MqttCallback{\r\n\r\n    private RecyclerView recyclerView;\r\n    private StaticRvAdapter staticRvAdapter;\r\n    private TabLayout tabLayout;\r\n    private ViewPager viewPager;\r\n    //WEATHER\r\n    private static  final int REQUEST_LOCATION=1;\r\n    double lat;\r\n    double longi;\r\n\r\n    TextView showLocationTxt;\r\n\r\n    LocationManager locationManager;\r\n    String latitude,longitude;\r\n\r\n    TextView view_city;\r\n    TextView view_temp;\r\n    TextView view_desc;\r\n    TextView view_country;\r\n\r\n    ImageView view_weather;\r\n    //\r\n\r\n\r\n    public static MqttClient client = null;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public DashboardFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment DashboardFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static DashboardFragment newInstance(String param1, String param2) {\r\n        DashboardFragment fragment = new DashboardFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_dashboard, container, false);\r\n        //FIREBASE\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        final FirebaseUser usuario = mAuth.getCurrentUser();\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=usuario.getUid();\r\n        //guardo el nombre en un textView\r\n        /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);\r\n        String res=\"Hola\"+\" \"+usuario.getDisplayName();\r\n        nombre.setText(res);\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(usuario.getDisplayName() == null){\r\n                    String res1=\"Hola\"+\" \"+snapshot.getString(\"username\");\r\n                    nombre.setText(res1);\r\n                }\r\n            }\r\n        });*/\r\n\r\n        //switch methods\r\n /*     Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });*/\r\n\r\n\r\n        //WEATHER\r\n        ActivityCompat.requestPermissions(getActivity(),new String[]\r\n                {Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n\r\n        view_city =v.findViewById(R.id.town);\r\n        view_city.setText(\"\");\r\n        view_temp =v.findViewById(R.id.temp);\r\n        view_temp.setText(\"\");\r\n        view_desc =v.findViewById(R.id.desc);\r\n        view_desc.setText(\"\");\r\n        view_country=v.findViewById(R.id.txtCountry);\r\n        view_country.setText(\"\");\r\n        view_weather =v.findViewById(R.id.wheather_image);\r\n\r\n        locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);\r\n        inicioGPS();\r\n        //\r\n\r\n\r\n\r\n\r\n        //RECYCLER VIEW\r\n        ArrayList<StaticRvModel> item=new ArrayList<>();\r\n        item.add(new StaticRvModel(R.drawable.icons_sun,\"Soleado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_night_mode,\"Nocturno\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_energy_saving,\"Ahorro\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_power_off,\"Apagado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_custom,\"Custom\"));\r\n\r\n        final TextView medidasT=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidasH=v.findViewById(R.id.medidaHumedadGeneral);\r\n        final TextView medidasS=v.findViewById(R.id.medidaSalinidadGeneral);\r\n        final TextView medidasL=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n\r\n        recyclerView=v.findViewById(R.id.rv_1);\r\n        staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(),LinearLayoutManager.HORIZONTAL,false));\r\n        recyclerView.setAdapter(staticRvAdapter);\r\n\r\n\r\n        //TABS\r\n        tabLayout = v.findViewById(R.id.tab_layout);\r\n        viewPager = v.findViewById(R.id.view_pager);\r\n         //Array\r\n        ArrayList<String> arrayList = new ArrayList<>();\r\n\r\n        //set up with viewpager\r\n        tabLayout.setupWithViewPager(viewPager);\r\n\r\n        TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());\r\n        //Pestañas\r\n        adapter.addFrag(new GeneralFragment(),\"General\");\r\n        adapter.addFrag(new Planta1Fragment(),\"Planta 1\");\r\n        adapter.addFrag(new Planta2Fragment(),\"Planta 2\");\r\n\r\n        viewPager.setAdapter(adapter );\r\n\r\n        /*((MainActivity)getActivity()).ola();*/\r\n     /*   //LEER DATOS FIREBASE\r\n        //Temperatura\r\n       DocumentReference documentTemperatura=fStore.collection(\"SensoresA-T\").document(\"Temperatura\");\r\n        documentTemperatura.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediTemp=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasT.setText(resMediTemp);\r\n            }\r\n        });\r\n        //Humedad\r\n        DocumentReference documentHumedad=fStore.collection(\"SensoresA-T\").document(\"Humedad\");\r\n        documentHumedad.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediHum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasH.setText(resMediHum);\r\n            }\r\n        });\r\n        //Iluminación\r\n        DocumentReference documentIluminación=fStore.collection(\"SensoresA-T\").document(\"Iluminación\");\r\n        documentIluminación.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIlum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasL.setText(resMediIlum);\r\n            }\r\n        });\r\n        //Temperatura ambiente\r\n        DocumentReference documentambiente=fStore.collection(\"SensoresA-T\").document(\"Temperatura ambiente\");\r\n        documentambiente.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIAmb=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasS.setText(resMediIAmb);\r\n            }\r\n        });\r\n\r\n      */\r\n\r\n        return v;\r\n    }\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n\r\n\r\n    //WEATHER METHODS\r\n    private void api_key(final String City) {\r\n        OkHttpClient client = new OkHttpClient();\r\n\r\n        Request request = new Request.Builder()\r\n                .url(\"https://api.openweathermap.org/data/2.5/weather?q=\" + City + \"&appid=a6f41d947e0542a26580bcd5c3fb90ef&units=metric\")\r\n                .get()\r\n                .build();\r\n        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n        StrictMode.setThreadPolicy(policy);\r\n        try {\r\n            Response response = client.newCall(request).execute();\r\n            client.newCall(request).enqueue(new Callback() {\r\n                @Override\r\n                public void onFailure(Request request, IOException e) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onResponse(Response response) throws IOException {\r\n                    String responseData = response.body().string();\r\n                    try {\r\n                        JSONObject json = new JSONObject(responseData);\r\n                        JSONArray array = json.getJSONArray(\"weather\");\r\n                        JSONObject object = array.getJSONObject(0);\r\n\r\n                        String description = object.getString(\"description\");\r\n                        String icons = object.getString(\"icon\");\r\n\r\n                        JSONObject temp1 = json.getJSONObject(\"main\");\r\n                        Double Temperature = temp1.getDouble(\"temp\");\r\n\r\n                        setText(view_city, City);\r\n\r\n                        String temps = Math.round(Temperature) + \" °C\";\r\n                        setText(view_temp, temps);\r\n                        setText(view_desc, description);\r\n                        setImage(view_weather, icons);\r\n\r\n                    } catch (JSONException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n\r\n            });\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    private void setText(final TextView text, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                text.setText(value);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setImage(final ImageView imageView, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                //paste switch\r\n                switch (value) {\r\n                    case \"01d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"01n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"02d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"02n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"03d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"03n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"04d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"04n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"09d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"09n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"10d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"10n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"11d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"11n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"13d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    case \"13n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    default:\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.wheather));\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    //App location\r\n    private void getLocation() {\r\n\r\n        //Check Permissions again\r\n\r\n        if (ActivityCompat.checkSelfPermission(\r\n                getContext(),Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(\r\n                getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n        } else {\r\n\r\n            Location LocationNetwork=locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);\r\n             if (LocationNetwork !=null)\r\n            {\r\n                double lat=LocationNetwork.getLatitude();\r\n                double longi=LocationNetwork.getLongitude();\r\n\r\n                latitude=String.valueOf(lat);\r\n                longitude=String.valueOf(longi);\r\n                loc_func(LocationNetwork);\r\n                api_key(String.valueOf(view_city.getText()));\r\n                showLocationTxt.setText(\"Your Location:\"+\"\\n\"+\"Latitude= \"+latitude+\"\\n\"+\"Longitude= \"+longitude);\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private void OnGPS() {\r\n\r\n        final AlertDialog.Builder builder= new AlertDialog.Builder(getContext());\r\n\r\n        builder.setMessage(\"Enable GPS\").setCancelable(false).setPositiveButton(\"YES\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS));\r\n                getLocation();\r\n            }\r\n        }).setNegativeButton(\"NO\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                dialog.cancel();\r\n            }\r\n        });\r\n        final AlertDialog alertDialog=builder.create();\r\n        alertDialog.show();\r\n    }\r\n\r\n    private void loc_func(Location location){\r\n        try {\r\n            Geocoder geocoder=new Geocoder(getContext());\r\n            List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);\r\n            String address = addresses.get(0).getSubLocality();\r\n            String cityName = addresses.get(0).getLocality();\r\n            String stateName = addresses.get(0).getAdminArea();\r\n            String country = addresses.get(0).getCountryName();\r\n            //txt_paddress.setText(address);\r\n            view_city.setText(cityName);\r\n            view_country.setText(country);\r\n            //txt_state.setText(stateName);*/\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            Toast.makeText(getContext(), \"Error:\"+e, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void inicioGPS(){\r\n\r\n\r\n        //Check gps is enable or not\r\n\r\n        if (!locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))\r\n        {\r\n            //Write Function To enable gps\r\n\r\n            OnGPS();\r\n        }\r\n        else\r\n        {\r\n            //GPS is already On then\r\n\r\n            getLocation();\r\n        }\r\n    }\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
---+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(date 1609191349849)
---@@ -505,7 +505,7 @@
--- 
---         //Check Permissions again
--- 
----        if (ActivityCompat.checkSelfPermission(
---+        /*if (ActivityCompat.checkSelfPermission(
---                 getContext(),Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(
---                 getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
---             ActivityCompat.requestPermissions(getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);
---@@ -524,7 +524,7 @@
---                 showLocationTxt.setText("Your Location:"+"\n"+"Latitude= "+latitude+"\n"+"Longitude= "+longitude);
---             }
--- 
----        }
---+        }*/
--- 
---     }
--- 
---Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.dashboard;\n\nimport android.os.Bundle;\n\nimport androidx.fragment.app.Fragment;\n\nimport android.util.Log;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.CompoundButton;\nimport android.widget.Switch;\nimport android.widget.TextView;\n\nimport com.example.comun.Mqtt;\nimport com.example.infinitycrop.R;\n\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\nimport org.eclipse.paho.client.mqttv3.MqttClient;\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\nimport org.eclipse.paho.client.mqttv3.MqttException;\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\n\nimport static com.example.comun.Mqtt.topicRoot;\n\n/**\n * A simple {@link Fragment} subclass.\n * Use the {@link GeneralFragment#newInstance} factory method to\n * create an instance of this fragment.\n */\npublic class GeneralFragment extends Fragment implements MqttCallback{\n    public static MqttClient client = null;\n    // TODO: Rename parameter arguments, choose names that match\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\n    private static final String ARG_PARAM1 = \"param1\";\n    private static final String ARG_PARAM2 = \"param2\";\n\n    // TODO: Rename and change types of parameters\n    private String mParam1;\n    private String mParam2;\n\n    public GeneralFragment() {\n        // Required empty public constructor\n    }\n\n    /**\n     * Use this factory method to create a new instance of\n     * this fragment using the provided parameters.\n     *\n     * @param param1 Parameter 1.\n     * @param param2 Parameter 2.\n     * @return A new instance of fragment GeneralFragment.\n     */\n    // TODO: Rename and change types and number of parameters\n    public static GeneralFragment newInstance(String param1, String param2) {\n        GeneralFragment fragment = new GeneralFragment();\n        Bundle args = new Bundle();\n        args.putString(ARG_PARAM1, param1);\n        args.putString(ARG_PARAM2, param2);\n        fragment.setArguments(args);\n        return fragment;\n    }\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        if (getArguments() != null) {\n            mParam1 = getArguments().getString(ARG_PARAM1);\n            mParam2 = getArguments().getString(ARG_PARAM2);\n        }\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        View v = inflater.inflate(R.layout.fragment_general, container, false);\n        //switch methods\n        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\n                if (isChecked) {\n                    // The toggle is enabled\n                    enviarLucesOn();\n                } else {\n                    // The toggle is disabled\n                    enviarLucesOff();\n                }\n            }\n        });\n        return v;\n    }\n    public void enviarLucesOff(){\n        try {\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\n                    MemoryPersistence());\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n        MqttConnectOptions connOpts = new MqttConnectOptions();\n        connOpts.setCleanSession(true);\n        connOpts.setKeepAliveInterval(60);\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\n\n        try {\n            client.connect(connOpts);\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n\n        //conexión con el broker Root1 = Lector de datos\n        //nos subscribimos a topic lectura\n        try {\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\n            client.setCallback((MqttCallback) this);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\n        }\n        try {\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\n            MqttMessage message = new MqttMessage(\"Superior OFF\".getBytes());\n            message.setQos(Mqtt.qos);\n            message.setRetained(false);\n            client.publish(topicRoot+\"luces\", message);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\n        }\n    }\n    public void enviarLucesOn(){\n        try {\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\n                    MemoryPersistence());\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n        MqttConnectOptions connOpts = new MqttConnectOptions();\n        connOpts.setCleanSession(true);\n        connOpts.setKeepAliveInterval(60);\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\n\n        try {\n            client.connect(connOpts);\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n\n        //conexión con el broker Root1 = Lector de datos\n        //nos subscribimos a topic lectura\n        try {\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\n            client.setCallback((MqttCallback) this);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\n        }\n        try {\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\n            MqttMessage message = new MqttMessage(\"Superior ON\".getBytes());\n            message.setQos(Mqtt.qos);\n            message.setRetained(false);\n            client.publish(topicRoot+\"luces\", message);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\n        }\n    }\n\n    @Override\n    public void connectionLost(Throwable cause) {\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\n    }\n\n    @Override\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\n\n    }\n\n    @Override\n    public void deliveryComplete(IMqttDeliveryToken token) {\n        Log.d(Mqtt.TAG, \"Entrega completa\");\n    }\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
---+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(date 1609360979620)
---@@ -2,6 +2,7 @@
--- 
--- import android.os.Bundle;
--- 
---+import androidx.annotation.Nullable;
--- import androidx.fragment.app.Fragment;
--- 
--- import android.util.Log;
---@@ -13,7 +14,14 @@
--- import android.widget.TextView;
--- 
--- import com.example.comun.Mqtt;
---+import com.example.infinitycrop.MainActivity;
--- import com.example.infinitycrop.R;
---+import com.google.firebase.firestore.EventListener;
---+import com.google.firebase.firestore.FirebaseFirestore;
---+import com.google.firebase.firestore.FirebaseFirestoreException;
---+import com.google.firebase.firestore.Query;
---+import com.google.firebase.firestore.QueryDocumentSnapshot;
---+import com.google.firebase.firestore.QuerySnapshot;
--- 
--- import org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;
--- import org.eclipse.paho.client.mqttv3.MqttCallback;
---@@ -32,6 +40,8 @@
---  */
--- public class GeneralFragment extends Fragment implements MqttCallback{
---     public static MqttClient client = null;
---+    private String uid;
---+    private FirebaseFirestore db;
---     // TODO: Rename parameter arguments, choose names that match
---     // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
---     private static final String ARG_PARAM1 = "param1";
---@@ -90,6 +100,45 @@
---                 }
---             }
---         });
---+        db = FirebaseFirestore.getInstance();
---+        MainActivity myActivity = (MainActivity) getActivity();
---+        final TextView medidaTemp=v.findViewById(R.id.medidaTemperaturaGeneral);
---+        final TextView medidaHum=v.findViewById(R.id.medidaHumedadGeneral);
---+        final TextView medidaHumAm=v.findViewById(R.id.medidaSalinidadGeneral);
---+        final TextView medidaLuz=v.findViewById(R.id.medidasLuminosidadGeneral);
---+        uid=myActivity.getMachineUID();
---+        db.collection("Mediciones")
---+                .whereEqualTo("machineId",uid)
---+                .whereEqualTo("Planta","0")
---+                .orderBy("Fecha", Query.Direction.DESCENDING)
---+                .limit(1)
---+                .addSnapshotListener(new EventListener<QuerySnapshot>() {
---+                    @Override
---+                    public void onEvent(@Nullable QuerySnapshot value,
---+                                        @Nullable FirebaseFirestoreException e) {
---+                        if (e != null) {
---+                            return;
---+                        }
---+
---+
---+                        for (QueryDocumentSnapshot doc : value) {
---+                            //Temperatura
---+                            String medidaT=doc.getString("Temperatura");
---+                            medidaTemp.setText(medidaT);
---+                            //Humedad
---+                            String medidaH=doc.getString("Humedad");
---+                            medidaHum.setText(medidaH);
---+                            //Humedad Ambiente
---+                            String medidaHA=doc.getString("Humedad Ambiente");
---+                            medidaHumAm.setText(medidaHA);
---+                            //Luminosidad
---+                            String medidaL=doc.getString("Luminosidad");
---+                            medidaLuz.setText(medidaL);
---+
---+                        }
---+
---+                    }
---+                });
---         return v;
---     }
---     public void enviarLucesOff(){
---Index: github.properties
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>gpr.usr = 61469172\ngpr.key = 72a0f63b7097b413e8ff78a7dd6ca9412aaf232c
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>windows-1252
---===================================================================
------ github.properties	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
---+++ github.properties	(date 1609173892824)
---@@ -1,2 +1,2 @@
----gpr.usr = 61469172
----gpr.key = 72a0f63b7097b413e8ff78a7dd6ca9412aaf232c
---\ No newline at end of file
---+gpr.usr = 61473165
---+gpr.key = 9671a8c2e26934b214e49dd99b96077296ee2aca
---\ No newline at end of file
---Index: app/src/main/java/com/example/infinitycrop/ui/service/ServicioMqtt.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/service/ServicioMqtt.java	(date 1609359437907)
---+++ app/src/main/java/com/example/infinitycrop/ui/service/ServicioMqtt.java	(date 1609359437907)
---@@ -0,0 +1,114 @@
---+package com.example.infinitycrop.ui.service;
---+
---+
---+import android.app.Service;
---+import android.content.Intent;
---+import android.os.IBinder;
---+import android.util.Log;
---+import android.widget.Toast;
---+
---+
---+import com.example.comun.Mqtt;
---+import com.google.firebase.Timestamp;
---+import com.google.firebase.firestore.FirebaseFirestore;
---+
---+import org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;
---+import org.eclipse.paho.client.mqttv3.MqttCallback;
---+import org.eclipse.paho.client.mqttv3.MqttClient;
---+import org.eclipse.paho.client.mqttv3.MqttConnectOptions;
---+import org.eclipse.paho.client.mqttv3.MqttException;
---+import org.eclipse.paho.client.mqttv3.MqttMessage;
---+import org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;
---+
---+import java.text.SimpleDateFormat;
---+import java.util.Date;
---+import java.util.HashMap;
---+import java.util.Map;
---+
---+import static com.example.comun.Mqtt.topicRoot;
---+
---+
---+public class ServicioMqtt extends Service implements MqttCallback {
---+
---+    public static MqttClient client = null;
---+    private FirebaseFirestore db;
---+    private String getId;
---+
---+    @Override public void onCreate(){
---+        Toast.makeText(this,"Conectando con tu maquina......", Toast.LENGTH_LONG).show();
---+        db = FirebaseFirestore.getInstance();
---+        try {
---+            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new
---+                    MemoryPersistence());
---+        } catch (MqttException e) {
---+            e.printStackTrace();
---+        }
---+        MqttConnectOptions connOpts = new MqttConnectOptions();
---+        connOpts.setCleanSession(true);
---+        connOpts.setKeepAliveInterval(60);
---+        connOpts.setWill(topicRoot+"WillTopic", "App desconectada".getBytes(),Mqtt.qos, false);
---+        try {
---+            client.connect(connOpts);
---+        } catch (MqttException e) {
---+            e.printStackTrace();
---+        }
---+
---+        // Nos suscribimos al topic rfid
---+        try {
---+            Log.i(Mqtt.TAG, "Suscrito a " + topicRoot+"lecturaDatos");
---+            client.subscribe(topicRoot+"lecturaDatos", Mqtt.qos);
---+            client.setCallback(this);
---+        } catch (MqttException e) {
---+            Log.e(Mqtt.TAG, "Error al suscribir.", e);
---+        }
---+    }
---+
---+    @Override
---+    public int onStartCommand(Intent intenc, int flags, int idArranque) {
---+        getId =intenc.getStringExtra("machine");
---+        Toast.makeText(this, getId , Toast.LENGTH_SHORT).show();
---+
---+        return START_STICKY;
---+    }
---+    @Override public void onDestroy() {
---+
---+    }
---+    @Override public IBinder onBind(Intent intencion) {
---+        return null;
---+    }
---+
---+    @Override
---+    public void connectionLost(Throwable cause) {
---+
---+    }
---+
---+    @Override
---+    public void messageArrived(String topic, MqttMessage message) throws Exception {
---+        String payload = new String(message.getPayload());
---+
---+        String[] parts = payload.split("-");
---+        String part1 = parts[0];
---+        String part2 = parts[1];
---+        String part3 = parts[2];
---+        String part4 = parts[3];
---+        String part5 = parts[4];
---+        String part6 = parts[5];
---+
---+        Map<String, Object> user = new HashMap<>();
---+        user.put("Humedad", part2);
---+        user.put("Humedad Ambiente", part3);
---+        user.put("Luminosidad", part4);
---+        user.put("Temperatura", part5);
---+        user.put("Fecha", new Timestamp(new Date()));
---+        user.put("machineId", part1);
---+        user.put("Planta", part6);
---+
---+        db.collection("Mediciones").document().set(user);
---+        //db.collection("users").document("9XncSt20DYUov9gGVKoB").set(user);
---+    }
---+
---+    @Override
---+    public void deliveryComplete(IMqttDeliveryToken token) {
---+
---+    }
---+}
---\ No newline at end of file
---Index: app/src/main/AndroidManifest.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    package=\"com.example.infinitycrop\">\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/>\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\"/>\n    <uses-permission android:name=\"android.permission.INTERNET\"/>\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" />\n    <!--Permisos Qr-->\n    <uses-permission android:name=\"android.permission.CAMERA\"/>\n    <uses-feature android:name=\"android.hardware.camera\"></uses-feature>\n    <uses-feature android:name=\"android.hardware.camera.autofocus\"></uses-feature>\n\n    <application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher\"\n        android:theme=\"@style/AppThemeHome\"\n        >\n\n        <activity android:name=\".MainActivity\" android:theme=\"@style/SplashTheme\">\n        </activity>\n\n        <activity android:name=\"com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity\">\n            <intent-filter>\n                <action android:name=\"android.intent.action.MAIN\" />\n                <category android:name=\"android.intent.category.LAUNCHER\" />\n            </intent-filter>\n        </activity>\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\">\n\n        </activity>\n        <activity android:name=\".ui.profile.settings.HelpProfile\">\n\n        </activity>\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\"></activity>\n        <activity android:name=\".ui.list_machine.AddMachine\"></activity>\n        <activity android:name=\".ui.logmail.RegisterActivity\"></activity>\n        <activity android:name=\".ui.logmail.LoginActivity\"></activity>\n        <activity android:name=\".ui.list_machine.CaptureAct\"></activity>\n        <activity android:name=\"com.example.infinitycrop.ui.login.LogActivity\"></activity>\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\"></activity>\n        <activity android:name=\".ui.profile.settings.ModifyProfile\"></activity>\n\n\n\n\n        <meta-data android:name=\"com.google.android.geo.API_KEY\"\n            android:value=\"@string/google_maps_key\" />\n\n        <meta-data android:name=\"com.facebook.sdk.ApplicationId\"\n            tools:replace=\"android:value\"\n            android:value=\"@string/facebook_app_id\"/>\n        <meta-data\n            android:name=\"preloaded_fonts\"\n            android:resource=\"@array/preloaded_fonts\" />\n\n\n    </application>\n\n</manifest>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/AndroidManifest.xml	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
---+++ app/src/main/AndroidManifest.xml	(date 1609352360254)
---@@ -24,7 +24,7 @@
--- 
---         <activity android:name=".MainActivity" android:theme="@style/SplashTheme">
---         </activity>
----
---+        <service android:name="com.example.infinitycrop.ui.service.ServicioMqtt" />
---         <activity android:name="com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity">
---             <intent-filter>
---                 <action android:name="android.intent.action.MAIN" />
---Index: app/src/main/java/com/example/infinitycrop/MainActivity.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop;\nimport android.os.Bundle;\nimport android.widget.Toast;\n\nimport com.example.infinitycrop.ui.control_panel.Control_panelFragment;\nimport com.example.infinitycrop.ui.dashboard.DashboardFragment;\nimport com.example.infinitycrop.ui.graphic.GraphicFragment;\nimport com.example.infinitycrop.ui.map.MapFragment;\nimport com.example.infinitycrop.ui.profile.ProfileFragment;\nimport com.google.firebase.firestore.FirebaseFirestore;\nimport com.ismaeldivita.chipnavigation.ChipNavigationBar;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.fragment.app.Fragment;\nimport androidx.fragment.app.FragmentManager;\nimport androidx.fragment.app.FragmentPagerAdapter;\nimport androidx.viewpager.widget.ViewPager;\n\nimport java.util.ArrayList;\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private ChipNavigationBar chipNavigationBar;\n    private ViewPager viewPager;\n    private Fragment fragment=null;\n    private int index = 0;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        setTheme(R.style.AppThemeHome);\n        super.onCreate(savedInstanceState);\n\n        Bundle extras = getIntent().getExtras();\n        String s = extras.getString(\"machine\");\n        Toast.makeText(this, s , Toast.LENGTH_SHORT).show();\n\n        setContentView(R.layout.activity_main);\n        chipNavigationBar=findViewById(R.id.chipNavigation);\n        viewPager = findViewById(R.id.view_pager11);\n        chipNavigationBar.setItemSelected(R.id.home,true);\n\n        ViewPagerAdapter viewPagerAdapter = new ViewPagerAdapter(getSupportFragmentManager());\n        viewPager.setAdapter(viewPagerAdapter);\n\n        final ViewPagerAdapter adapter = new ViewPagerAdapter(getSupportFragmentManager());\n        final DashboardFragment fragment_1 = new DashboardFragment();\n        //final GraphicFragment fragment_2 = new GraphicFragment();\n        final Control_panelFragment fragment_2 = new Control_panelFragment();\n        final MapFragment fragment_3 = new MapFragment();\n        final ProfileFragment fragment_4 = new ProfileFragment();\n        adapter.addFragment(fragment_1);\n        adapter.addFragment(fragment_2);\n        adapter.addFragment(fragment_3);\n        adapter.addFragment(fragment_4);\n        viewPager.setAdapter(adapter);\n        viewPager.setOffscreenPageLimit(4);\n        index = 1;\n        chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {\n            @Override\n            public void onItemSelected(int i) {\n                switch(i){\n                    case R.id.home:\n                        viewPager.setCurrentItem(0);\n                        break;\n                    case R.id.graphics:\n                        viewPager.setCurrentItem(1);\n                        break;\n                    case R.id.notifications:\n                        viewPager.setCurrentItem(2);\n                        break;\n                    case R.id.profile:\n                        viewPager.setCurrentItem(3);\n                        break;\n                }\n\n\n            }\n        });\n\n\n        viewPager.addOnPageChangeListener(new ViewPager.OnPageChangeListener() {\n            @Override\n            public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {\n\n            }\n\n            @Override\n            public void onPageSelected(int position) {\n\n                if (position == 0){\n\n                    chipNavigationBar.setItemSelected(R.id.home, true);\n                    chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {\n                        @Override\n                        public void onItemSelected(int id) {\n\n                            switch(id){\n                                case R.id.home:\n                                    viewPager.setCurrentItem(0);\n                                    break;\n                                case R.id.graphics:\n                                    viewPager.setCurrentItem(1);\n                                    break;\n                                case R.id.notifications:\n                                    viewPager.setCurrentItem(2);\n                                    break;\n                                case R.id.profile:\n                                    viewPager.setCurrentItem(3);\n                                    break;\n                            }\n                        }\n                    });\n\n                    index = 0;\n\n                }else if (position == 1){\n\n                    chipNavigationBar.setItemSelected(R.id.graphics, true);\n\n                    if(index == 0 || index == 2){\n\n                        //fragment_2.downloadPlates_2();\n                    }\n                    index = 1;\n                    //Toast.makeText(Home.this, \"\"+index, Toast.LENGTH_SHORT).show();\n                }else if (position == 2){\n\n                    chipNavigationBar.setItemSelected(R.id.notifications, true);\n                    chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {\n                        @Override\n                        public void onItemSelected(int id) {\n\n                            switch(id){\n                                case R.id.home:\n                                    viewPager.setCurrentItem(0);\n                                    break;\n                                case R.id.graphics:\n                                    viewPager.setCurrentItem(1);\n                                    break;\n                                case R.id.notifications:\n                                    viewPager.setCurrentItem(2);\n                                    break;\n                                case R.id.profile:\n                                    viewPager.setCurrentItem(3);\n                                    break;\n                            }\n                        }\n                    });\n\n                    index = 2;\n\n                }else if (position == 3){\n\n                    chipNavigationBar.setItemSelected(R.id.profile, true);\n                    chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {\n                        @Override\n                        public void onItemSelected(int id) {\n\n                            switch(id){\n                                case R.id.home:\n                                    viewPager.setCurrentItem(0);\n                                    break;\n                                case R.id.graphics:\n                                    viewPager.setCurrentItem(1);\n                                    break;\n                                case R.id.notifications:\n                                    viewPager.setCurrentItem(2);\n                                    break;\n                                case R.id.profile:\n                                    viewPager.setCurrentItem(3);\n                                    break;\n                            }\n                        }\n                    });\n\n                    index = 3;\n                }\n            }\n\n            @Override\n            public void onPageScrollStateChanged(int state) {\n\n            }\n        });\n    }\n\n\n    class ViewPagerAdapter extends FragmentPagerAdapter {\n\n\n\n        private ArrayList<Fragment> fragments;\n        private ArrayList<String> titles;\n\n        ViewPagerAdapter (FragmentManager fm){\n            super(fm);\n            this.fragments = new ArrayList<>();\n            this.titles = new ArrayList<>();\n\n        }\n\n        @NonNull\n        @Override\n        public Fragment getItem(int position) {\n            return fragments.get(position);\n        }\n\n        @Override\n        public int getCount() {\n            return fragments.size();\n        }\n\n        public void addFragment(Fragment fragment){\n            fragments.add(fragment);\n\n        }\n\n    }\n\n\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/MainActivity.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
---+++ app/src/main/java/com/example/infinitycrop/MainActivity.java	(date 1609360237025)
---@@ -1,4 +1,5 @@
--- package com.example.infinitycrop;
---+import android.content.Intent;
--- import android.os.Bundle;
--- import android.widget.Toast;
--- 
---@@ -7,6 +8,7 @@
--- import com.example.infinitycrop.ui.graphic.GraphicFragment;
--- import com.example.infinitycrop.ui.map.MapFragment;
--- import com.example.infinitycrop.ui.profile.ProfileFragment;
---+import com.example.infinitycrop.ui.service.ServicioMqtt;
--- import com.google.firebase.firestore.FirebaseFirestore;
--- import com.ismaeldivita.chipnavigation.ChipNavigationBar;
--- 
---@@ -28,15 +30,17 @@
---     private ViewPager viewPager;
---     private Fragment fragment=null;
---     private int index = 0;
----
---+    private String s;
---     @Override
---     protected void onCreate(Bundle savedInstanceState) {
---         setTheme(R.style.AppThemeHome);
---         super.onCreate(savedInstanceState);
--- 
---         Bundle extras = getIntent().getExtras();
----        String s = extras.getString("machine");
----        Toast.makeText(this, s , Toast.LENGTH_SHORT).show();
---+        s = extras.getString("description");
---+        Intent intent = new Intent(MainActivity.this, ServicioMqtt.class);
---+        intent.putExtra("machine", s);
---+        startService(intent);
--- 
---         setContentView(R.layout.activity_main);
---         chipNavigationBar=findViewById(R.id.chipNavigation);
---@@ -221,5 +225,10 @@
--- 
---     }
--- 
---+    public String getMachineUID(){
---+        return s;
---+    }
---+
---+
--- 
--- }
---\ No newline at end of file
---Index: app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.example.infinitycrop.ui.list_machine;\r\n\r\nimport android.content.Intent;\r\nimport android.media.Image;\r\nimport android.os.Bundle;\r\nimport android.os.Parcelable;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.ItemTouchHelper;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.logmail.RegisterActivity;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerAdapter;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.Query;\r\n\r\nimport java.text.BreakIterator;\r\nimport java.util.Map;\r\n\r\npublic class MainActivityMachineList extends AppCompatActivity {\r\n    private FirebaseFirestore firebaseFirestore;\r\n    private RecyclerView mFirestoreList;\r\n    private Adapter adapter;\r\n    private FirebaseAuth firebaseAuth;\r\n    Button addBtn;//boton añadir nueva maquina\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_list_machines);\r\n        firebaseFirestore=FirebaseFirestore.getInstance();\r\n        mFirestoreList=findViewById(R.id.firestore_list);\r\n        firebaseAuth=FirebaseAuth.getInstance();\r\n        String uid=firebaseAuth.getUid();\r\n        //Query\r\n        Query query=firebaseFirestore\r\n                .collection(\"Machine\")\r\n                .whereEqualTo(\"userUID\", uid)\r\n                .orderBy(\"priority\",Query.Direction.ASCENDING);\r\n        //RecyclerView\r\n        FirestoreRecyclerOptions<MachineModel> options=new FirestoreRecyclerOptions.Builder<MachineModel>()\r\n                .setQuery(query, MachineModel.class)\r\n                .build();\r\n        //View Holder\r\n        adapter= new Adapter(options);\r\n        mFirestoreList.setHasFixedSize(true);\r\n        mFirestoreList.setLayoutManager(new LinearLayoutManager(this));\r\n        mFirestoreList.setAdapter(adapter);\r\n\r\n        new ItemTouchHelper(new ItemTouchHelper.SimpleCallback(0,\r\n                ItemTouchHelper.LEFT | ItemTouchHelper.RIGHT) {\r\n            @Override\r\n            public boolean onMove(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder, RecyclerView.ViewHolder target) {\r\n                return false;\r\n            }\r\n            @Override\r\n            public void onSwiped(RecyclerView.ViewHolder viewHolder, int direction) {\r\n                Toast.makeText(getApplicationContext(), \"Maquina eliminada con éxito\", Toast.LENGTH_SHORT).show();\r\n                adapter.deleteItem(viewHolder.getAdapterPosition());\r\n            }\r\n        }).attachToRecyclerView(mFirestoreList);\r\n\r\n        adapter.setOnItemClickListener(new Adapter.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(DocumentSnapshot documentSnapshot, int position) {\r\n                //documentSnapshot.getData() -> devuelve all que tiene la maquina en firebase\r\n                MachineModel machine = documentSnapshot.toObject(MachineModel.class);\r\n                String id = documentSnapshot.getId();\r\n                String path = documentSnapshot.getReference().getPath(); //devuelve ruta en firebase Machine\\madara\r\n                /*Toast.makeText(MainActivityMachineList.this,\r\n                        \"Position: \" + position + \" ID: \" + id +\"  algo   \"+ documentSnapshot.getData(), Toast.LENGTH_SHORT).show();*/\r\n                Intent intent = new Intent(getBaseContext(), MainActivity.class);\r\n                intent.putExtra(\"machine\", id);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n        FloatingActionButton addbtn = (FloatingActionButton) findViewById(R.id.button_add_machine);\r\n        addbtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent (getApplicationContext(), AddMachine.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        adapter.stopListening();\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        adapter.startListening();\r\n    }\r\n}\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
------ app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(revision 38f77cc52ec1598af6f795fb72fde847b8f0c5cf)
---+++ app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(date 1609360236960)
---@@ -80,11 +80,12 @@
---                 //documentSnapshot.getData() -> devuelve all que tiene la maquina en firebase
---                 MachineModel machine = documentSnapshot.toObject(MachineModel.class);
---                 String id = documentSnapshot.getId();
----                String path = documentSnapshot.getReference().getPath(); //devuelve ruta en firebase Machine\madara
---+                String path = documentSnapshot.getString("description"); //devuelve ruta en firebase Machine\madara
---                 /*Toast.makeText(MainActivityMachineList.this,
---                         "Position: " + position + " ID: " + id +"  algo   "+ documentSnapshot.getData(), Toast.LENGTH_SHORT).show();*/
---                 Intent intent = new Intent(getBaseContext(), MainActivity.class);
---                 intent.putExtra("machine", id);
---+                intent.putExtra("description", path);
---                 startActivity(intent);
---             }
---         });
--Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.Manifest;\r\nimport android.app.Activity;\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.content.res.ColorStateList;\r\nimport android.location.Address;\r\nimport android.location.Geocoder;\r\nimport android.location.Location;\r\nimport android.location.LocationManager;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.os.StrictMode;\r\nimport android.provider.Settings;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvModel;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.location.FusedLocationProviderClient;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.annotations.NotNull;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.squareup.okhttp.Call;\r\nimport com.squareup.okhttp.Callback;\r\nimport com.squareup.okhttp.OkHttpClient;\r\nimport com.squareup.okhttp.Request;\r\nimport com.squareup.okhttp.Response;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link DashboardFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class DashboardFragment extends Fragment implements MqttCallback{\r\n\r\n    private RecyclerView recyclerView;\r\n    private StaticRvAdapter staticRvAdapter;\r\n    private TabLayout tabLayout;\r\n    private ViewPager viewPager;\r\n    //WEATHER\r\n    private static  final int REQUEST_LOCATION=1;\r\n    double lat;\r\n    double longi;\r\n\r\n    TextView showLocationTxt;\r\n\r\n    LocationManager locationManager;\r\n    String latitude,longitude;\r\n\r\n    TextView view_city;\r\n    TextView view_temp;\r\n    TextView view_desc;\r\n    TextView view_country;\r\n\r\n    ImageView view_weather;\r\n    //\r\n\r\n\r\n    public static MqttClient client = null;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public DashboardFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment DashboardFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static DashboardFragment newInstance(String param1, String param2) {\r\n        DashboardFragment fragment = new DashboardFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_dashboard, container, false);\r\n        //FIREBASE\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        final FirebaseUser usuario = mAuth.getCurrentUser();\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=usuario.getUid();\r\n        //guardo el nombre en un textView\r\n        /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);\r\n        String res=\"Hola\"+\" \"+usuario.getDisplayName();\r\n        nombre.setText(res);\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(usuario.getDisplayName() == null){\r\n                    String res1=\"Hola\"+\" \"+snapshot.getString(\"username\");\r\n                    nombre.setText(res1);\r\n                }\r\n            }\r\n        });*/\r\n\r\n        //switch methods\r\n /*     Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });*/\r\n\r\n\r\n        //WEATHER\r\n        ActivityCompat.requestPermissions(getActivity(),new String[]\r\n                {Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n\r\n        view_city =v.findViewById(R.id.town);\r\n        view_city.setText(\"\");\r\n        view_temp =v.findViewById(R.id.temp);\r\n        view_temp.setText(\"\");\r\n        view_desc =v.findViewById(R.id.desc);\r\n        view_desc.setText(\"\");\r\n        view_country=v.findViewById(R.id.txtCountry);\r\n        view_country.setText(\"\");\r\n        view_weather =v.findViewById(R.id.wheather_image);\r\n\r\n        locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);\r\n       /* inicioGPS();*/\r\n        //\r\n\r\n\r\n\r\n\r\n        //RECYCLER VIEW\r\n        ArrayList<StaticRvModel> item=new ArrayList<>();\r\n        item.add(new StaticRvModel(R.drawable.icons_sun,\"Soleado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_night_mode,\"Nocturno\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_energy_saving,\"Ahorro\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_power_off,\"Apagado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_custom,\"Custom\"));\r\n\r\n        final TextView medidasT=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidasH=v.findViewById(R.id.medidaHumedadGeneral);\r\n        final TextView medidasS=v.findViewById(R.id.medidaSalinidadGeneral);\r\n        final TextView medidasL=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n\r\n        recyclerView=v.findViewById(R.id.rv_1);\r\n        staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(),LinearLayoutManager.HORIZONTAL,false));\r\n        recyclerView.setAdapter(staticRvAdapter);\r\n\r\n\r\n        //TABS\r\n        tabLayout = v.findViewById(R.id.tab_layout);\r\n        viewPager = v.findViewById(R.id.view_pager);\r\n         //Array\r\n        ArrayList<String> arrayList = new ArrayList<>();\r\n\r\n        //set up with viewpager\r\n        tabLayout.setupWithViewPager(viewPager);\r\n\r\n        TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());\r\n        //Pestañas\r\n        adapter.addFrag(new GeneralFragment(),\"General\");\r\n        adapter.addFrag(new Planta1Fragment(),\"Planta 1\");\r\n        adapter.addFrag(new Planta2Fragment(),\"Planta 2\");\r\n\r\n        viewPager.setAdapter(adapter );\r\n\r\n        /*((MainActivity)getActivity()).ola();*/\r\n     /*   //LEER DATOS FIREBASE\r\n        //Temperatura\r\n       DocumentReference documentTemperatura=fStore.collection(\"SensoresA-T\").document(\"Temperatura\");\r\n        documentTemperatura.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediTemp=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasT.setText(resMediTemp);\r\n            }\r\n        });\r\n        //Humedad\r\n        DocumentReference documentHumedad=fStore.collection(\"SensoresA-T\").document(\"Humedad\");\r\n        documentHumedad.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediHum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasH.setText(resMediHum);\r\n            }\r\n        });\r\n        //Iluminación\r\n        DocumentReference documentIluminación=fStore.collection(\"SensoresA-T\").document(\"Iluminación\");\r\n        documentIluminación.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIlum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasL.setText(resMediIlum);\r\n            }\r\n        });\r\n        //Temperatura ambiente\r\n        DocumentReference documentambiente=fStore.collection(\"SensoresA-T\").document(\"Temperatura ambiente\");\r\n        documentambiente.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIAmb=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasS.setText(resMediIAmb);\r\n            }\r\n        });\r\n\r\n      */\r\n\r\n        return v;\r\n    }\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n\r\n\r\n    //WEATHER METHODS\r\n    private void api_key(final String City) {\r\n        OkHttpClient client = new OkHttpClient();\r\n\r\n        Request request = new Request.Builder()\r\n                .url(\"https://api.openweathermap.org/data/2.5/weather?q=\" + City + \"&appid=a6f41d947e0542a26580bcd5c3fb90ef&units=metric\")\r\n                .get()\r\n                .build();\r\n        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n        StrictMode.setThreadPolicy(policy);\r\n        try {\r\n            Response response = client.newCall(request).execute();\r\n            client.newCall(request).enqueue(new Callback() {\r\n                @Override\r\n                public void onFailure(Request request, IOException e) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onResponse(Response response) throws IOException {\r\n                    String responseData = response.body().string();\r\n                    try {\r\n                        JSONObject json = new JSONObject(responseData);\r\n                        JSONArray array = json.getJSONArray(\"weather\");\r\n                        JSONObject object = array.getJSONObject(0);\r\n\r\n                        String description = object.getString(\"description\");\r\n                        String icons = object.getString(\"icon\");\r\n\r\n                        JSONObject temp1 = json.getJSONObject(\"main\");\r\n                        Double Temperature = temp1.getDouble(\"temp\");\r\n\r\n                        setText(view_city, City);\r\n\r\n                        String temps = Math.round(Temperature) + \" °C\";\r\n                        setText(view_temp, temps);\r\n                        setText(view_desc, description);\r\n                        setImage(view_weather, icons);\r\n\r\n                    } catch (JSONException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n\r\n            });\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    private void setText(final TextView text, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                text.setText(value);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setImage(final ImageView imageView, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                //paste switch\r\n                switch (value) {\r\n                    case \"01d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"01n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"02d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"02n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"03d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"03n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"04d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"04n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"09d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"09n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"10d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"10n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"11d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"11n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"13d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    case \"13n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    default:\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.wheather));\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    //App location\r\n   /* private void getLocation() {\r\n\r\n        //Check Permissions again\r\n\r\n        /*if (ActivityCompat.checkSelfPermission(\r\n                getContext(),Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(\r\n                getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n        } else {\r\n\r\n            Location LocationNetwork=locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);\r\n             if (LocationNetwork !=null)\r\n            {\r\n                double lat=LocationNetwork.getLatitude();\r\n                double longi=LocationNetwork.getLongitude();\r\n\r\n                latitude=String.valueOf(lat);\r\n                longitude=String.valueOf(longi);\r\n               /* loc_func(LocationNetwork);*/\r\n              /*  api_key(String.valueOf(view_city.getText()));\r\n                showLocationTxt.setText(\"Your Location:\"+\"\\n\"+\"Latitude= \"+latitude+\"\\n\"+\"Longitude= \"+longitude);\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private void OnGPS() {\r\n\r\n        final AlertDialog.Builder builder= new AlertDialog.Builder(getContext());\r\n\r\n        builder.setMessage(\"Enable GPS\").setCancelable(false).setPositiveButton(\"YES\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS));\r\n                getLocation();\r\n            }\r\n        }).setNegativeButton(\"NO\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                dialog.cancel();\r\n            }\r\n        });\r\n        final AlertDialog alertDialog=builder.create();\r\n        alertDialog.show();\r\n    }\r\n\r\n    private void loc_func(Location location){\r\n        try {\r\n            Geocoder geocoder=new Geocoder(getContext());\r\n            List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);\r\n            /*String address = addresses.get(0).getSubLocality();*/\r\n           /* String cityName = addresses.get(0).getLocality();\r\n            String stateName = addresses.get(0).getAdminArea();\r\n            String country = addresses.get(0).getCountryName();\r\n            //txt_paddress.setText(address);\r\n            view_city.setText(cityName);\r\n            view_country.setText(country);\r\n            //txt_state.setText(stateName);*/\r\n\r\n       /* } catch (IOException e) {\r\n            e.printStackTrace();\r\n            Toast.makeText(getContext(), \"Error:\"+e, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void inicioGPS(){\r\n\r\n\r\n        //Check gps is enable or not\r\n\r\n        if (!locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))\r\n        {\r\n            //Write Function To enable gps\r\n\r\n            OnGPS();\r\n        }\r\n        else\r\n        {\r\n            //GPS is already On then\r\n\r\n            /*getLocation();*/\r\n /*       }\r\n    }*/\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(date 1610072342884)
--@@ -1,20 +1,10 @@
-- package com.example.infinitycrop.ui.dashboard;
-- 
-- import android.Manifest;
---import android.app.Activity;
---import android.app.AlertDialog;
-- import android.content.Context;
---import android.content.DialogInterface;
---import android.content.Intent;
---import android.content.pm.PackageManager;
---import android.content.res.ColorStateList;
---import android.location.Address;
---import android.location.Geocoder;
---import android.location.Location;
-- import android.location.LocationManager;
-- import android.os.Bundle;
-- 
---import androidx.annotation.Nullable;
-- import androidx.core.app.ActivityCompat;
-- import androidx.fragment.app.Fragment;
-- import androidx.recyclerview.widget.LinearLayoutManager;
--@@ -22,36 +12,21 @@
-- import androidx.viewpager.widget.ViewPager;
-- 
-- import android.os.StrictMode;
---import android.provider.Settings;
-- import android.util.Log;
-- import android.view.LayoutInflater;
-- import android.view.View;
-- import android.view.ViewGroup;
---import android.widget.CompoundButton;
-- import android.widget.ImageView;
---import android.widget.LinearLayout;
---import android.widget.Switch;
-- import android.widget.TextView;
---import android.widget.Toast;
-- 
-- import com.example.comun.Mqtt;
---import com.example.infinitycrop.MainActivity;
-- import com.example.infinitycrop.R;
-- import com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;
-- import com.example.infinitycrop.ui.recycler_control.StaticRvModel;
---import com.google.android.gms.auth.api.signin.GoogleSignInClient;
---import com.google.android.gms.auth.api.signin.GoogleSignInOptions;
---import com.google.android.gms.location.FusedLocationProviderClient;
-- import com.google.android.material.tabs.TabLayout;
-- import com.google.firebase.auth.FirebaseAuth;
-- import com.google.firebase.auth.FirebaseUser;
---import com.google.firebase.database.annotations.NotNull;
---import com.google.firebase.firestore.DocumentReference;
---import com.google.firebase.firestore.DocumentSnapshot;
---import com.google.firebase.firestore.EventListener;
-- import com.google.firebase.firestore.FirebaseFirestore;
---import com.google.firebase.firestore.FirebaseFirestoreException;
---import com.squareup.okhttp.Call;
-- import com.squareup.okhttp.Callback;
-- import com.squareup.okhttp.OkHttpClient;
-- import com.squareup.okhttp.Request;
--@@ -70,7 +45,6 @@
-- 
-- import java.io.IOException;
-- import java.util.ArrayList;
---import java.util.List;
-- 
-- import static com.example.comun.Mqtt.topicRoot;
-- 
--@@ -102,6 +76,8 @@
-- 
--     ImageView view_weather;
--     //
--+    //Acceso a la maquina
--+
-- 
-- 
--     public static MqttClient client = null;
--@@ -284,6 +260,7 @@
-- 
--       */
-- 
--+
--         return v;
--     }
-- 
--Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.google.firebase.firestore.Query;\r\nimport com.google.firebase.firestore.QueryDocumentSnapshot;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link GeneralFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class GeneralFragment extends Fragment implements MqttCallback{\r\n    public static MqttClient client = null;\r\n    private String uid;\r\n    private FirebaseFirestore db;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public GeneralFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment GeneralFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static GeneralFragment newInstance(String param1, String param2) {\r\n        GeneralFragment fragment = new GeneralFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v = inflater.inflate(R.layout.fragment_general, container, false);\r\n        //switch methods\r\n        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });\r\n        db = FirebaseFirestore.getInstance();\r\n        MainActivity myActivity = (MainActivity) getActivity();\r\n        final TextView medidaTemp=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidaHum=v.findViewById(R.id.medidaHumedadGeneral);\r\n        final TextView medidaHumAm=v.findViewById(R.id.medidaSalinidadGeneral);\r\n        final TextView medidaLuz=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n        uid=myActivity.getMachineUID();\r\n        db.collection(\"Mediciones general\")\r\n                .document(uid)\r\n                .addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable DocumentSnapshot snapshot,\r\n                                        @Nullable FirebaseFirestoreException e) {\r\n                        if (e != null) {\r\n                            return;\r\n                        }\r\n\r\n                        if (snapshot != null && snapshot.exists()) {\r\n                            //Temperatura\r\n                            String medidaT=snapshot.getString(\"Temperatura\");\r\n                            medidaTemp.setText(medidaT+\"°C\");\r\n                            //Humedad\r\n                            String medidaH=snapshot.getString(\"Humedad\");\r\n                            medidaHum.setText(medidaH+\"%\");\r\n                            //Humedad Ambiente\r\n                            String medidaHA=snapshot.getString(\"Humedad Ambiente\");\r\n                            medidaHumAm.setText(medidaHA+\"%\");\r\n                            //Luminosidad\r\n                            String medidaL=snapshot.getString(\"Luminosidad\");\r\n                            medidaLuz.setText(medidaL+\"%\");\r\n\r\n\r\n                        } else {\r\n\r\n                        }\r\n                    }\r\n                });\r\n\r\n        return v;\r\n    }\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"Superior OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"Superior ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(date 1610073089059)
--@@ -1,14 +1,17 @@
-- package com.example.infinitycrop.ui.dashboard;
-- 
--+import android.content.Intent;
-- import android.os.Bundle;
-- 
-- import androidx.annotation.Nullable;
--+import androidx.constraintlayout.widget.ConstraintLayout;
-- import androidx.fragment.app.Fragment;
-- 
-- import android.util.Log;
-- import android.view.LayoutInflater;
-- import android.view.View;
-- import android.view.ViewGroup;
--+import android.widget.Button;
-- import android.widget.CompoundButton;
-- import android.widget.Switch;
-- import android.widget.TextView;
--@@ -16,13 +19,12 @@
-- import com.example.comun.Mqtt;
-- import com.example.infinitycrop.MainActivity;
-- import com.example.infinitycrop.R;
--+import com.example.infinitycrop.ui.MachineControl.planta1;
--+import com.google.android.material.bottomsheet.BottomSheetDialog;
-- import com.google.firebase.firestore.DocumentSnapshot;
-- import com.google.firebase.firestore.EventListener;
-- import com.google.firebase.firestore.FirebaseFirestore;
-- import com.google.firebase.firestore.FirebaseFirestoreException;
---import com.google.firebase.firestore.Query;
---import com.google.firebase.firestore.QueryDocumentSnapshot;
---import com.google.firebase.firestore.QuerySnapshot;
-- 
-- import org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;
-- import org.eclipse.paho.client.mqttv3.MqttCallback;
--@@ -139,8 +141,43 @@
--                     }
--                 });
-- 
--+        //Boton para acceder a la maquina para sus parcelas
--+        Button btnmymachine = (Button) v.findViewById(R.id.btnMyMachine);
--+        btnmymachine.setOnClickListener(new View.OnClickListener() {
--+            @Override
--+            public void onClick(View v) {
--+
--+                BottomSheetDialog bottomSheetDialog = new BottomSheetDialog(
--+                        getContext()
--+                );
--+                bottomSheetDialog.setContentView(R.layout.plantamaquina_bottom_sheet);
--+                Button btnp1=bottomSheetDialog.findViewById(R.id.enterPlant2);
--+                Button btn2=bottomSheetDialog.findViewById(R.id.enterPlant1);
--+                bottomSheetDialog.show();
--+                btnp1.setOnClickListener(new View.OnClickListener() {
--+                    @Override
--+                    public void onClick(View v) {
--+                        Intent intent = new Intent (getContext(), planta1.class);
--+                        startActivity(intent);
--+
--+                    }
--+                });
--+            }
--+        });
--+
--         return v;
--     }
--+        /*btnmymachine.setOnClickListener(new View.OnClickListener() {
--+            @Override
--+            public void onClick(View v) {
--+                Intent intent = new Intent (getContext(), MiMaquina.class);
--+                startActivity(intent);
--+
--+            }
--+        });*/
--+
--+
--+
--     public void enviarLucesOff(){
--         try {
--             client = new MqttClient(Mqtt.broker, Mqtt.clientId, new
--Index: app/build.gradle
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>apply plugin: 'com.android.application'\r\n\r\n\r\nandroid {\r\n    compileSdkVersion 30\r\n    buildToolsVersion \"30.0.2\"\r\n\r\n    defaultConfig {\r\n        applicationId \"com.example.infinitycrop\"\r\n        minSdkVersion 23\r\n        targetSdkVersion 30\r\n        versionCode 1\r\n        versionName \"1.0\"\r\n        multiDexEnabled true\r\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\r\n        }\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation fileTree(dir: \"libs\", include: [\"*.jar\"])\r\n    implementation 'androidx.appcompat:appcompat:1.2.0'\r\n    implementation 'com.google.android.material:material:1.2.1'\r\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.2'\r\n    implementation 'androidx.navigation:navigation-fragment:2.1.0'\r\n    implementation 'androidx.navigation:navigation-ui:2.1.0'\r\n    implementation 'androidx.lifecycle:lifecycle-extensions:2.2.0'\r\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\r\n    implementation 'com.google.firebase:firebase-auth:16.0.5'\r\n    implementation 'com.firebaseui:firebase-ui-auth:6.2.0'\r\n    implementation project(path: ':comun')\r\n    implementation 'com.google.firebase:firebase-database:19.5.1'\r\n    implementation 'com.google.firebase:firebase-storage:19.2.0'\r\n    testImplementation 'junit:junit:4.12'\r\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\r\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\r\n    implementation 'com.google.firebase:firebase-analytics'\r\n    implementation 'com.ismaeldivita.chipnavigation:chip-navigation-bar:1.3.4'\r\n    implementation 'org.jetbrains.kotlin:kotlin-stdlib:1.4.10'\r\n    implementation 'androidx.recyclerview:recyclerview:1.1.0'\r\n    implementation 'com.android.volley:volley:1.1.0'\r\n    // Also declare the dependency for the Google Play services library and specify its version\r\n    implementation 'com.google.android.gms:play-services-auth:18.1.0'\r\n    // Import the BoM for the Firebase platform\r\n    implementation platform('com.google.firebase:firebase-bom:26.0.0')\r\n    implementation 'com.google.firebase:firebase-firestore:17.1.2'\r\n    implementation 'com.android.support:multidex:1.0.3'\r\n    implementation 'com.firebaseui:firebase-ui-firestore:6.3.0'\r\n    //biblioteca para mostrar images a través de URL\r\n    implementation 'com.github.bumptech.glide:glide:4.11.0'\r\n    //import del mqtt\r\n    implementation 'org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.1.1'\r\n    implementation 'com.google.android.gms:play-services-maps:17.0.0'\r\n    compile 'com.google.android.gms:play-services-location:16.0.0'\r\n    implementation 'com.journeyapps:zxing-android-embedded:3.4.0'//añadimos esta libreria para qr\r\n    implementation 'com.facebook.android:facebook-android-sdk:[4,5)'\r\n\r\n    implementation \"androidx.viewpager2:viewpager2:1.0.0\" //libreria viewpager\r\n    implementation  'com.airbnb.android:lottie:3.4.1'//libreria para la animacion\r\n    implementation 'com.cuberto:liquid-swipe:1.0.0' //libreria para el tutorial\r\n    implementation 'androidx.core:core:1.3.1'\r\n    implementation'androidx.core:core-ktx:1.3.1'\r\n\r\n    implementation'com.squareup.okhttp3:mockwebserver:4.2.0'\r\n    implementation'com.squareup.okhttp3:okhttp:4.2.0'\r\n\r\n    implementation 'androidx.cardview:cardview:1.0.0'\r\n    implementation \"androidx.viewpager2:viewpager2:1.0.0\" //libreria viewpager\r\n}\r\napply plugin: 'com.google.gms.google-services'
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/build.gradle	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ app/build.gradle	(date 1610073408318)
--@@ -72,5 +72,7 @@
-- 
--     implementation 'androidx.cardview:cardview:1.0.0'
--     implementation "androidx.viewpager2:viewpager2:1.0.0" //libreria viewpager
--+    //libreria wheelview
--+    implementation'com.github.psuzn:wheelView:1.0.0'
-- }
-- apply plugin: 'com.google.gms.google-services'
--\ No newline at end of file
--Index: app/src/main/AndroidManifest.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.infinitycrop\">\r\n\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" /> <!-- Permisos Qr -->\r\n    <uses-permission android:name=\"android.permission.CAMERA\" />\r\n\r\n    <uses-feature android:name=\"android.hardware.camera\" />\r\n    <uses-feature android:name=\"android.hardware.camera.autofocus\" />\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher\"\r\n        android:theme=\"@style/AppThemeHome\">\r\n        <activity android:name=\".ui.forum.lets_start.welcome_forum\"></activity>\r\n        <activity android:name=\".MainActivity\"></activity>\r\n\r\n        <service android:name=\".ui.service.ServicioMqtt\" />\r\n\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\"></activity>\r\n        <activity android:name=\".ui.profile.settings.HelpProfile\"></activity>\r\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\" />\r\n        <activity android:name=\".ui.list_machine.AddMachine\" />\r\n        <activity android:name=\".ui.logmail.RegisterActivity\" />\r\n        <activity android:name=\".ui.logmail.LoginActivity\" />\r\n        <activity android:name=\".ui.list_machine.CaptureAct\" />\r\n        <activity android:name=\".ui.login.LogActivity\" />\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\" />\r\n        <activity android:name=\".ui.LoadAnimations.LogprimeraActivity\" />\r\n\r\n        <meta-data\r\n            android:name=\"com.google.android.geo.API_KEY\"\r\n            android:value=\"@string/google_maps_key\" />\r\n        <meta-data\r\n            android:name=\"com.facebook.sdk.ApplicationId\"\r\n            android:value=\"@string/facebook_app_id\"\r\n            tools:replace=\"android:value\" />\r\n        <meta-data\r\n            android:name=\"preloaded_fonts\"\r\n            android:resource=\"@array/preloaded_fonts\" />\r\n    </application>\r\n\r\n</manifest>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/AndroidManifest.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ app/src/main/AndroidManifest.xml	(date 1610072342889)
--@@ -43,6 +43,7 @@
--         <activity android:name=".ui.login.LogActivity" />
--         <activity android:name=".ui.LoadAnimations.IntroductoryActivity2" />
--         <activity android:name=".ui.LoadAnimations.LogprimeraActivity" />
--+        <activity android:name=".ui.MachineControl.planta1" />
-- 
--         <meta-data
--             android:name="com.google.android.geo.API_KEY"
--Index: app/src/main/res/layout/fragment_general.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    tools:context=\".ui.dashboard.DashboardFragment\">\r\n\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:orientation=\"vertical\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\r\n\r\n        <RelativeLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginTop=\"10dp\"\r\n            android:layout_marginRight=\"20dp\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/textDashboardGeneral\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:text=\"Dashboard  >\"\r\n\r\n                android:textSize=\"19sp\" />\r\n\r\n            <TextView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/textDashboardGeneral\"\r\n                android:text=\"4 sensores\"\r\n\r\n                android:textSize=\"14sp\" />\r\n\r\n            <!--<ImageView\r\n                android:layout_width=\"62dp\"\r\n                android:layout_height=\"62dp\"\r\n                android:layout_alignParentRight=\"true\"\r\n                android:src=\"@drawable/ic_sun\" />-->\r\n        </RelativeLayout>\r\n        <GridLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:columnCount=\"2\"\r\n            android:rowCount=\"3\"\r\n            android:alignmentMode=\"alignMargins\"\r\n            android:columnOrderPreserved=\"false\">\r\n            <!--temperatura-->\r\n            <androidx.cardview.widget.CardView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_columnWeight=\"1\"\r\n                android:layout_rowWeight=\"1\"\r\n                app:cardElevation=\"6dp\"\r\n                app:cardCornerRadius=\"12dp\"\r\n                android:layout_marginBottom=\"12dp\"\r\n                android:layout_margin=\"12dp\"\r\n                >\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n\r\n                    android:orientation=\"vertical\"\r\n                    android:padding=\"2dp\">\r\n\r\n                    <androidx.constraintlayout.widget.ConstraintLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_marginBottom=\"12dp\"\r\n                        android:layout_height=\"match_parent\">\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textTemperaturaGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"8dp\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:text=\"Temperatura\"\r\n                            android:textSize=\"16sp\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchTemperaturaGeneral\"\r\n                            app:layout_constraintStart_toStartOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <Switch\r\n                            android:id=\"@+id/switchTemperaturaGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:layout_marginEnd=\"8dp\"\r\n                            android:buttonTint=\"#FFFFFF\"\r\n                            android:checked=\"true\"\r\n                            android:fitsSystemWindows=\"false\"\r\n                            android:textColorLink=\"#a0c63e\"\r\n                            android:textSize=\"8sp\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/medidaTemperaturaGeneral\"\r\n                            android:layout_width=\"90dp\"\r\n                            android:layout_height=\"39dp\"\r\n                            android:layout_marginTop=\"24dp\"\r\n                            android:text=\"34°C\"\r\n                            android:textSize=\"31sp\"\r\n                            app:layout_constraintStart_toStartOf=\"@+id/textTemperaturaGeneral\"\r\n                            app:layout_constraintTop_toBottomOf=\"@+id/textTemperaturaGeneral\" />\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/imgTemperaturaGeneral\"\r\n                            android:layout_width=\"53dp\"\r\n                            android:layout_height=\"55dp\"\r\n                            android:layout_marginEnd=\"1dp\"\r\n                            android:src=\"@drawable/icons_temperature\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaTemperaturaGeneral\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaTemperaturaGeneral\"\r\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaTemperaturaGeneral\" />\r\n                    </androidx.constraintlayout.widget.ConstraintLayout>\r\n                </LinearLayout>\r\n            </androidx.cardview.widget.CardView>\r\n            <!--humedad-->\r\n            <androidx.cardview.widget.CardView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_columnWeight=\"1\"\r\n                android:layout_rowWeight=\"1\"\r\n                app:cardElevation=\"6dp\"\r\n                app:cardCornerRadius=\"12dp\"\r\n                android:layout_marginBottom=\"12dp\"\r\n                android:layout_margin=\"12dp\"\r\n                >\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n\r\n                    android:orientation=\"vertical\"\r\n                    android:padding=\"2dp\">\r\n\r\n                    <androidx.constraintlayout.widget.ConstraintLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_marginBottom=\"12dp\"\r\n                        android:layout_height=\"match_parent\">\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textHumedadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"8dp\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:text=\"Humedad\"\r\n                            android:textSize=\"16sp\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchHumedadGeneral\"\r\n                            app:layout_constraintStart_toStartOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <Switch\r\n                            android:id=\"@+id/switchHumedadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:layout_marginEnd=\"8dp\"\r\n                            android:checked=\"true\"\r\n                            android:textColorLink=\"#a0c63e\"\r\n                            android:textSize=\"8sp\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/medidaHumedadGeneral\"\r\n                            android:layout_width=\"90dp\"\r\n                            android:layout_height=\"39dp\"\r\n                            android:layout_marginTop=\"24dp\"\r\n                            android:text=\"68%\"\r\n                            android:textSize=\"31sp\"\r\n                            app:layout_constraintStart_toStartOf=\"@+id/textHumedadGeneral\"\r\n                            app:layout_constraintTop_toBottomOf=\"@+id/textHumedadGeneral\" />\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/imgHumedadGeneral\"\r\n                            android:layout_width=\"53dp\"\r\n                            android:layout_height=\"55dp\"\r\n                            android:layout_marginEnd=\"1dp\"\r\n                            android:src=\"@drawable/icons_humidity\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaHumedadGeneral\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaHumedadGeneral\"\r\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaHumedadGeneral\" />\r\n                    </androidx.constraintlayout.widget.ConstraintLayout>\r\n                </LinearLayout>\r\n            </androidx.cardview.widget.CardView>\r\n            <!--salinidad-->\r\n            <androidx.cardview.widget.CardView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_columnWeight=\"1\"\r\n                android:layout_rowWeight=\"1\"\r\n                app:cardElevation=\"6dp\"\r\n                app:cardCornerRadius=\"12dp\"\r\n                android:layout_marginBottom=\"12dp\"\r\n                android:layout_margin=\"12dp\"\r\n                >\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n\r\n                    android:orientation=\"vertical\"\r\n                    android:padding=\"2dp\">\r\n\r\n                    <androidx.constraintlayout.widget.ConstraintLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_marginBottom=\"12dp\"\r\n                        android:layout_height=\"match_parent\">\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textSalinidadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"8dp\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:text=\"H. Ambiente\"\r\n                            android:textSize=\"16sp\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchSalinidadGeneral\"\r\n                            app:layout_constraintStart_toStartOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <Switch\r\n                            android:id=\"@+id/switchSalinidadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:layout_marginEnd=\"8dp\"\r\n                            android:checked=\"true\"\r\n                            android:textColorLink=\"#a0c63e\"\r\n                            android:textSize=\"8sp\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/medidaSalinidadGeneral\"\r\n                            android:layout_width=\"90dp\"\r\n                            android:layout_height=\"39dp\"\r\n                            android:layout_marginTop=\"24dp\"\r\n                            android:text=\"10%\"\r\n                            android:textSize=\"31sp\"\r\n                            app:layout_constraintStart_toStartOf=\"@+id/textSalinidadGeneral\"\r\n                            app:layout_constraintTop_toBottomOf=\"@+id/textSalinidadGeneral\" />\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/imgSalinidadGeneral\"\r\n                            android:layout_width=\"53dp\"\r\n                            android:layout_height=\"55dp\"\r\n                            android:layout_marginEnd=\"1dp\"\r\n                            android:src=\"@drawable/icons_humedad_ambiente\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaSalinidadGeneral\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaSalinidadGeneral\"\r\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaSalinidadGeneral\" />\r\n                    </androidx.constraintlayout.widget.ConstraintLayout>\r\n                </LinearLayout>\r\n            </androidx.cardview.widget.CardView>\r\n            <!--Luminosidad-->\r\n            <androidx.cardview.widget.CardView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_columnWeight=\"1\"\r\n                android:layout_rowWeight=\"1\"\r\n                app:cardElevation=\"6dp\"\r\n                app:cardCornerRadius=\"12dp\"\r\n                android:layout_marginBottom=\"12dp\"\r\n                android:layout_margin=\"12dp\"\r\n                >\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n\r\n                    android:orientation=\"vertical\"\r\n                    android:padding=\"2dp\">\r\n\r\n                    <androidx.constraintlayout.widget.ConstraintLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_marginBottom=\"12dp\"\r\n                        android:layout_height=\"match_parent\">\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textLuminosidadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"8dp\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:text=\"Luminosidad\"\r\n                            android:textSize=\"16sp\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchLuminosidadGeneral\"\r\n                            app:layout_constraintStart_toStartOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <Switch\r\n                            android:id=\"@+id/switchLuminosidadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:layout_marginEnd=\"8dp\"\r\n                            android:checked=\"true\"\r\n                            android:textColorHighlight=\"#FFFFFF\"\r\n                            android:textColorLink=\"#a0c63e\"\r\n                            android:textSize=\"8sp\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/medidasLuminosidadGeneral\"\r\n                            android:layout_width=\"90dp\"\r\n                            android:layout_height=\"39dp\"\r\n                            android:layout_marginTop=\"24dp\"\r\n                            android:text=\"90%\"\r\n                            android:textSize=\"31sp\"\r\n                            app:layout_constraintStart_toStartOf=\"@+id/textLuminosidadGeneral\"\r\n                            app:layout_constraintTop_toBottomOf=\"@+id/textLuminosidadGeneral\" />\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/imgLuminosidadGeneral\"\r\n                            android:layout_width=\"53dp\"\r\n                            android:layout_height=\"55dp\"\r\n                            android:layout_marginEnd=\"1dp\"\r\n                            android:src=\"@drawable/icons_luminosity\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidasLuminosidadGeneral\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintStart_toEndOf=\"@+id/medidasLuminosidadGeneral\"\r\n                            app:layout_constraintTop_toTopOf=\"@+id/medidasLuminosidadGeneral\" />\r\n                    </androidx.constraintlayout.widget.ConstraintLayout>\r\n                </LinearLayout>\r\n            </androidx.cardview.widget.CardView>\r\n\r\n\r\n\r\n\r\n        </GridLayout>\r\n\r\n    </LinearLayout>\r\n</ScrollView>\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/res/layout/fragment_general.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ app/src/main/res/layout/fragment_general.xml	(date 1610051333115)
--@@ -35,6 +35,32 @@
-- 
--                 android:textSize="14sp" />
-- 
--+            <LinearLayout
--+                android:layout_width="243dp"
--+                android:layout_height="93dp"
--+                android:layout_alignBottom="@id/textDashboardGeneral"
--+                android:layout_alignParentTop="true"
--+                android:layout_alignParentEnd="true"
--+                android:layout_marginStart="25dp"
--+                android:layout_marginTop="0dp"
--+                android:layout_marginEnd="-9dp"
--+                android:layout_marginBottom="-87dp"
--+                android:layout_toEndOf="@+id/textDashboardGeneral"
--+                android:orientation="vertical">
--+
--+                <Button
--+                    android:id="@+id/btnMyMachine"
--+                    android:layout_width="182dp"
--+                    android:layout_height="38dp"
--+                    android:layout_marginStart="0dp"
--+                    android:layout_marginTop="1dp"
--+                    android:layout_marginEnd="38dp"
--+                    android:layout_marginBottom="-22dp"
--+                    android:background="@drawable/btn_scan"
--+                    android:textColor="@color/white"
--+                    android:text="MI maquina" />
--+            </LinearLayout>
--+
--             <!--<ImageView
--                 android:layout_width="62dp"
--                 android:layout_height="62dp"
--Index: .idea/jarRepositories.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"RemoteRepositoriesConfiguration\">\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"central\" />\r\n      <option name=\"name\" value=\"Maven Central repository\" />\r\n      <option name=\"url\" value=\"https://repo1.maven.org/maven2\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"jboss.community\" />\r\n      <option name=\"name\" value=\"JBoss Community repository\" />\r\n      <option name=\"url\" value=\"https://repository.jboss.org/nexus/content/repositories/public/\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"BintrayJCenter\" />\r\n      <option name=\"name\" value=\"BintrayJCenter\" />\r\n      <option name=\"url\" value=\"https://jcenter.bintray.com/\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"Google\" />\r\n      <option name=\"name\" value=\"Google\" />\r\n      <option name=\"url\" value=\"https://dl.google.com/dl/android/maven2/\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"GitHubPackages\" />\r\n      <option name=\"name\" value=\"GitHubPackages\" />\r\n      <option name=\"url\" value=\"https://maven.pkg.github.com/Cuberto/liquid-swipe-android\" />\r\n    </remote-repository>\r\n  </component>\r\n</project>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- .idea/jarRepositories.xml	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ .idea/jarRepositories.xml	(date 1610073505595)
--@@ -26,5 +26,10 @@
--       <option name="name" value="GitHubPackages" />
--       <option name="url" value="https://maven.pkg.github.com/Cuberto/liquid-swipe-android" />
--     </remote-repository>
--+    <remote-repository>
--+      <option name="id" value="GitHubPackages" />
--+      <option name="name" value="GitHubPackages" />
--+      <option name="url" value="https://jitpack.io" />
--+    </remote-repository>
--   </component>
-- </project>
--\ No newline at end of file
--Index: build.gradle
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\nbuildscript {\r\n    repositories {\r\n        google()\r\n        jcenter()\r\n        mavenCentral()\r\n    }\r\n    dependencies {\r\n        classpath 'com.android.tools.build:gradle:4.1.1'\r\n        classpath 'com.google.gms:google-services:4.3.4'\r\n\r\n        // NOTE: Do not place your application dependencies here; they belong\r\n        // in the individual module build.gradle files\r\n    }\r\n}\r\n\r\nallprojects {\r\n    repositories {\r\n        google()\r\n        jcenter()\r\n        //Dependencia para el tutorial\r\n        def githubProperties = new Properties()\r\n        githubProperties.load(new FileInputStream(rootProject.file(\"github.properties\")))\r\n        repositories {\r\n            maven {\r\n                name = \"GitHubPackages\"\r\n\r\n                url = uri(\"https://maven.pkg.github.com/Cuberto/liquid-swipe-android\")\r\n                credentials {\r\n                    /** Create github.properties in root project folder file with\r\n                     ** gpr.usr=GITHUB_USER_ID & gpr.key=PERSONAL_ACCESS_TOKEN\r\n                     ** Or set env variable GPR_USER & GPR_API_KEY if not adding a properties file**/\r\n                    username = githubProperties['gpr.usr'] ?: System.getenv(\"GPR_USER\")\r\n                    password = githubProperties['gpr.key'] ?: System.getenv(\"GPR_API_KEY\")\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- build.gradle	(revision 202234c8183d1a7d892c2a79558cd16babbc1f78)
--+++ build.gradle	(date 1610074867324)
--@@ -33,10 +33,15 @@
--                     username = githubProperties['gpr.usr'] ?: System.getenv("GPR_USER")
--                     password = githubProperties['gpr.key'] ?: System.getenv("GPR_API_KEY")
--                 }
--+
--             }
---        }
---    }
---}
--+            maven {
--+                url 'https://jitpack.io'
--+            }
--+            }
--+        }
--+    }
--+
-- 
-- task clean(type: Delete) {
--     delete rootProject.buildDir
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_13_01_2021_1_20__Default_Changelist_.xml
-===================================================================
---- .idea/shelf/Uncommitted_changes_before_Update_at_13_01_2021_1_20__Default_Changelist_.xml	(revision 20efcc6a82f57e2d6e00bfef130fc7837cadecbf)
-+++ .idea/shelf/Uncommitted_changes_before_Update_at_13_01_2021_1_20__Default_Changelist_.xml	(revision 20efcc6a82f57e2d6e00bfef130fc7837cadecbf)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_13_01_2021_1_20_[Default_Changelist]" date="1610497396221" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_13_01_2021_1_20_[Default_Changelist]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 13/01/2021 1:20 [Default Changelist]" />
--</changelist>
-\ No newline at end of file
-Index: app/src/main/AndroidManifest.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.infinitycrop\">\r\n\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" /> <!-- Permisos Qr -->\r\n    <uses-permission android:name=\"android.permission.CAMERA\" />\r\n\r\n    <uses-feature android:name=\"android.hardware.camera\" />\r\n    <uses-feature android:name=\"android.hardware.camera.autofocus\" />\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher\"\r\n        android:theme=\"@style/AppThemeHome\">\r\n        <activity android:name=\".ui.Foro.main.Community.NewPost.CreatePost.CreatePost\"></activity>\r\n        <activity android:name=\".ui.Foro.main.Community.CommunityMain\" />\r\n        <activity android:name=\".ui.Foro.lets_start.EditCommunity\" />\r\n        <activity android:name=\".ui.list_machine.ModifyMachine\" />\r\n        <activity android:name=\".ui.Foro.main.ForoMain\" />\r\n        <activity android:name=\".ui.Foro.lets_start.AddCommunity\" />\r\n        <activity android:name=\".ui.Foro.lets_start.choose_community\" />\r\n        <activity android:name=\".ui.Foro.lets_start.welcome_forum\" />\r\n        <activity android:name=\".MainActivity\" />\r\n\r\n\r\n        <service android:name=\".ui.service.ServicioMqtt\" />\r\n        <service android:name=\".ui.service.ServicioNotificaciones\" />\r\n\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\" />\r\n        <activity android:name=\".ui.profile.settings.HelpProfile\" />\r\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\" />\r\n        <activity android:name=\".ui.list_machine.AddMachine\" />\r\n        <activity android:name=\".ui.profile.settings.ModifyProfile\" />\r\n        <activity android:name=\".ui.logmail.RegisterActivity\" />\r\n        <activity android:name=\".ui.logmail.LoginActivity\" />\r\n        <activity android:name=\".ui.list_machine.CaptureAct\" />\r\n        <activity android:name=\".ui.login.LogActivity\" />\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\" />\r\n        <activity android:name=\".ui.LoadAnimations.LogprimeraActivity\" />\r\n        <activity android:name=\".ui.graphics.GraphicsActivity\" />\r\n        <activity android:name=\".ui.MachineControl.planta1\" />\r\n        <activity android:name=\".ui.notifications.NotificacionesActivity\" />\r\n\r\n        <meta-data\r\n            android:name=\"com.google.android.geo.API_KEY\"\r\n            android:value=\"@string/google_maps_key\" />\r\n        <meta-data\r\n            android:name=\"com.facebook.sdk.ApplicationId\"\r\n            android:value=\"@string/facebook_app_id\"\r\n            tools:replace=\"android:value\" />\r\n        <meta-data\r\n            android:name=\"preloaded_fonts\"\r\n            android:resource=\"@array/preloaded_fonts\" />\r\n\r\n        <activity\r\n            android:name=\"com.theartofdev.edmodo.cropper.CropImageActivity\"\r\n            android:theme=\"@style/Base.Theme.AppCompat\" />\r\n    </application>\r\n\r\n</manifest>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/AndroidManifest.xml	(revision 20efcc6a82f57e2d6e00bfef130fc7837cadecbf)
-+++ app/src/main/AndroidManifest.xml	(date 1611144863384)
-@@ -11,10 +11,13 @@
-     <uses-permission android:name="com.google.android.things.permission.MANAGE_INPUT_DRIVERS" />
-     <uses-permission android:name="com.google.android.things.permission.USE_PERIPHERAL_IO" /> <!-- Permisos Qr -->
-     <uses-permission android:name="android.permission.CAMERA" />
-+    <uses-permission android:name="com.android.alarm.permission.SET_ALARM"/>
-+
- 
-     <uses-feature android:name="android.hardware.camera" />
-     <uses-feature android:name="android.hardware.camera.autofocus" />
- 
-+
-     <application
-         android:allowBackup="true"
-         android:icon="@mipmap/ic_launcher"
-@@ -37,6 +40,7 @@
- 
-         <activity android:name=".ui.LoadAnimations.IntroductoryActivity">
-             <intent-filter>
-+                <action android:name="android.intent.action.SET_ALARM"/>
-                 <action android:name="android.intent.action.MAIN" />
- 
-                 <category android:name="android.intent.category.LAUNCHER" />
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_19_33__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_19_33__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_21_29__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_21_29__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_17_01_2021_15_05__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_17_01_2021_15_05__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_08__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_08__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_19_07__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_19_07__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_15_01_2021_13_24__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_15_01_2021_13_24__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_14_53__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_14_53__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_15__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_15__Default_Changelist_.xml
Index: .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_20_41_[Default_Changelist]/shelved.patch
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_20_41_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_20_41_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,1090 +0,0 @@
-Index: app/src/main/res/font/drawable-v24/ic_minus.xml
-===================================================================
---- app/src/main/res/font/drawable-v24/ic_minus.xml	(revision 6343757b3aa0a02b7d7cde424e6f51bffe4320e0)
-+++ app/src/main/res/font/drawable-v24/ic_minus.xml	(revision 6343757b3aa0a02b7d7cde424e6f51bffe4320e0)
-@@ -1,22 +0,0 @@
--<vector xmlns:android="http://schemas.android.com/apk/res/android"
--    android:width="44dp"
--    android:height="53dp"
--    android:viewportWidth="44"
--    android:viewportHeight="53">
--  <path
--      android:pathData="M43.3314,0.436H10.6279C5.089,0.436 0.5989,4.9262 0.5989,10.4651V41.8605C0.5989,47.3994 5.089,51.8895 10.6279,51.8895H43.3314V0.436Z"
--      android:strokeAlpha="0.2"
--      android:strokeWidth="0.872093"
--      android:fillColor="#F3F3F3"
--      android:strokeColor="#F5F5F5"
--      android:fillAlpha="0.2"/>
--  <group>
--    <clip-path
--        android:pathData="M13.2441,15.6975h20.9302v20.9302h-20.9302z"/>
--    <path
--        android:pathData="M29.8139,27.0347H17.6046C17.3733,27.0347 17.1515,26.9428 16.9879,26.7793C16.8244,26.6157 16.7325,26.3939 16.7325,26.1626C16.7325,25.9313 16.8244,25.7095 16.9879,25.546C17.1515,25.3824 17.3733,25.2905 17.6046,25.2905H29.8139C30.0452,25.2905 30.267,25.3824 30.4305,25.546C30.5941,25.7095 30.686,25.9313 30.686,26.1626C30.686,26.3939 30.5941,26.6157 30.4305,26.7793C30.267,26.9428 30.0452,27.0347 29.8139,27.0347Z"
--        android:strokeAlpha="0.2"
--        android:fillColor="#373131"
--        android:fillAlpha="0.2"/>
--  </group>
--</vector>
-Index: app/src/main/res/font/drawable-v24/ic_plus.xml
-===================================================================
---- app/src/main/res/font/drawable-v24/ic_plus.xml	(revision 6343757b3aa0a02b7d7cde424e6f51bffe4320e0)
-+++ app/src/main/res/font/drawable-v24/ic_plus.xml	(revision 6343757b3aa0a02b7d7cde424e6f51bffe4320e0)
-@@ -1,19 +0,0 @@
--<vector xmlns:android="http://schemas.android.com/apk/res/android"
--    android:width="44dp"
--    android:height="53dp"
--    android:viewportWidth="44"
--    android:viewportHeight="53">
--  <path
--      android:pathData="M0.7617,0.436H32.5931C38.132,0.436 42.6222,4.9262 42.6222,10.4651V41.8605C42.6222,47.3994 38.132,51.8895 32.5931,51.8895H0.7617V0.436Z"
--      android:strokeWidth="0.872093"
--      android:fillColor="#42995C"
--      android:fillAlpha="0.2"
--      android:strokeColor="#F5F5F5"/>
--  <group>
--    <clip-path
--        android:pathData="M11.6628,15.6975h20.9302v20.9302h-20.9302z"/>
--    <path
--        android:pathData="M28.2326,25.2907H23V20.0581C23,19.8268 22.9081,19.605 22.7446,19.4415C22.581,19.2779 22.3592,19.186 22.1279,19.186C21.8966,19.186 21.6748,19.2779 21.5113,19.4415C21.3477,19.605 21.2558,19.8268 21.2558,20.0581V25.2907H16.0233C15.792,25.2907 15.5702,25.3826 15.4066,25.5461C15.2431,25.7097 15.1512,25.9315 15.1512,26.1628C15.1512,26.3941 15.2431,26.6159 15.4066,26.7794C15.5702,26.943 15.792,27.0349 16.0233,27.0349H21.2558V32.2674C21.2558,32.4987 21.3477,32.7205 21.5113,32.8841C21.6748,33.0476 21.8966,33.1395 22.1279,33.1395C22.3592,33.1395 22.581,33.0476 22.7446,32.8841C22.9081,32.7205 23,32.4987 23,32.2674V27.0349H28.2326C28.4639,27.0349 28.6857,26.943 28.8492,26.7794C29.0128,26.6159 29.1047,26.3941 29.1047,26.1628C29.1047,25.9315 29.0128,25.7097 28.8492,25.5461C28.6857,25.3826 28.4639,25.2907 28.2326,25.2907Z"
--        android:fillColor="#42995C"/>
--  </group>
--</vector>
-Index: app/src/main/res/font/rubik.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/font/rubik.xml	(revision 6343757b3aa0a02b7d7cde424e6f51bffe4320e0)
-+++ app/src/main/res/font/rubik.xml	(revision 6343757b3aa0a02b7d7cde424e6f51bffe4320e0)
-@@ -1,7 +0,0 @@
--<?xml version="1.0" encoding="utf-8"?>
--<font-family xmlns:app="http://schemas.android.com/apk/res-auto"
--        app:fontProviderAuthority="com.google.android.gms.fonts"
--        app:fontProviderPackage="com.google.android.gms"
--        app:fontProviderQuery="Rubik"
--        app:fontProviderCerts="@array/com_google_android_gms_fonts_certs">
--</font-family>
-Index: app/src/main/res/font/drawable-v24/ic_launcher_foreground.xml
-===================================================================
---- app/src/main/res/font/drawable-v24/ic_launcher_foreground.xml	(revision 6343757b3aa0a02b7d7cde424e6f51bffe4320e0)
-+++ app/src/main/res/font/drawable-v24/ic_launcher_foreground.xml	(revision 6343757b3aa0a02b7d7cde424e6f51bffe4320e0)
-@@ -1,30 +0,0 @@
--<vector xmlns:android="http://schemas.android.com/apk/res/android"
--    xmlns:aapt="http://schemas.android.com/aapt"
--    android:width="108dp"
--    android:height="108dp"
--    android:viewportWidth="108"
--    android:viewportHeight="108">
--    <path android:pathData="M31,63.928c0,0 6.4,-11 12.1,-13.1c7.2,-2.6 26,-1.4 26,-1.4l38.1,38.1L107,108.928l-32,-1L31,63.928z">
--        <aapt:attr name="android:fillColor">
--            <gradient
--                android:endX="85.84757"
--                android:endY="92.4963"
--                android:startX="42.9492"
--                android:startY="49.59793"
--                android:type="linear">
--                <item
--                    android:color="#44000000"
--                    android:offset="0.0" />
--                <item
--                    android:color="#00000000"
--                    android:offset="1.0" />
--            </gradient>
--        </aapt:attr>
--    </path>
--    <path
--        android:fillColor="#FFFFFF"
--        android:fillType="nonZero"
--        android:pathData="M65.3,45.828l3.8,-6.6c0.2,-0.4 0.1,-0.9 -0.3,-1.1c-0.4,-0.2 -0.9,-0.1 -1.1,0.3l-3.9,6.7c-6.3,-2.8 -13.4,-2.8 -19.7,0l-3.9,-6.7c-0.2,-0.4 -0.7,-0.5 -1.1,-0.3C38.8,38.328 38.7,38.828 38.9,39.228l3.8,6.6C36.2,49.428 31.7,56.028 31,63.928h46C76.3,56.028 71.8,49.428 65.3,45.828zM43.4,57.328c-0.8,0 -1.5,-0.5 -1.8,-1.2c-0.3,-0.7 -0.1,-1.5 0.4,-2.1c0.5,-0.5 1.4,-0.7 2.1,-0.4c0.7,0.3 1.2,1 1.2,1.8C45.3,56.528 44.5,57.328 43.4,57.328L43.4,57.328zM64.6,57.328c-0.8,0 -1.5,-0.5 -1.8,-1.2s-0.1,-1.5 0.4,-2.1c0.5,-0.5 1.4,-0.7 2.1,-0.4c0.7,0.3 1.2,1 1.2,1.8C66.5,56.528 65.6,57.328 64.6,57.328L64.6,57.328z"
--        android:strokeWidth="1"
--        android:strokeColor="#00000000" />
--</vector>
-\ No newline at end of file
-Index: app/src/main/res/font/drawable/ic_launcher_background.xml
-===================================================================
---- app/src/main/res/font/drawable/ic_launcher_background.xml	(revision 6343757b3aa0a02b7d7cde424e6f51bffe4320e0)
-+++ app/src/main/res/font/drawable/ic_launcher_background.xml	(revision 6343757b3aa0a02b7d7cde424e6f51bffe4320e0)
-@@ -1,170 +0,0 @@
--<?xml version="1.0" encoding="utf-8"?>
--<vector xmlns:android="http://schemas.android.com/apk/res/android"
--    android:width="108dp"
--    android:height="108dp"
--    android:viewportWidth="108"
--    android:viewportHeight="108">
--    <path
--        android:fillColor="#3DDC84"
--        android:pathData="M0,0h108v108h-108z" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M9,0L9,108"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M19,0L19,108"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M29,0L29,108"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M39,0L39,108"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M49,0L49,108"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M59,0L59,108"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M69,0L69,108"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M79,0L79,108"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M89,0L89,108"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M99,0L99,108"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M0,9L108,9"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M0,19L108,19"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M0,29L108,29"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M0,39L108,39"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M0,49L108,49"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M0,59L108,59"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M0,69L108,69"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M0,79L108,79"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M0,89L108,89"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M0,99L108,99"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M19,29L89,29"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M19,39L89,39"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M19,49L89,49"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M19,59L89,59"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M19,69L89,69"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M19,79L89,79"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M29,19L29,89"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M39,19L39,89"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M49,19L49,89"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M59,19L59,89"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M69,19L69,89"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--    <path
--        android:fillColor="#00000000"
--        android:pathData="M79,19L79,89"
--        android:strokeWidth="0.8"
--        android:strokeColor="#33FFFFFF" />
--</vector>
-Index: app/src/main/res/font/rubik_bold.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/font/rubik_bold.xml	(revision 6343757b3aa0a02b7d7cde424e6f51bffe4320e0)
-+++ app/src/main/res/font/rubik_bold.xml	(revision 6343757b3aa0a02b7d7cde424e6f51bffe4320e0)
-@@ -1,7 +0,0 @@
--<?xml version="1.0" encoding="utf-8"?>
--<font-family xmlns:app="http://schemas.android.com/apk/res-auto"
--        app:fontProviderAuthority="com.google.android.gms.fonts"
--        app:fontProviderPackage="com.google.android.gms"
--        app:fontProviderQuery="name=Rubik&amp;weight=700"
--        app:fontProviderCerts="@array/com_google_android_gms_fonts_certs">
--</font-family>
-Index: app/src/main/res/font/drawable-v24/ic_more.xml
-===================================================================
---- app/src/main/res/font/drawable-v24/ic_more.xml	(revision 6343757b3aa0a02b7d7cde424e6f51bffe4320e0)
-+++ app/src/main/res/font/drawable-v24/ic_more.xml	(revision 6343757b3aa0a02b7d7cde424e6f51bffe4320e0)
-@@ -1,15 +0,0 @@
--<vector xmlns:android="http://schemas.android.com/apk/res/android"
--    android:width="27dp"
--    android:height="28dp"
--    android:viewportWidth="27"
--    android:viewportHeight="28">
--  <path
--      android:pathData="M13.7559,16.1454C14.96,16.1454 15.9361,15.1693 15.9361,13.9651C15.9361,12.761 14.96,11.7849 13.7559,11.7849C12.5517,11.7849 11.5756,12.761 11.5756,13.9651C11.5756,15.1693 12.5517,16.1454 13.7559,16.1454Z"
--      android:fillColor="#ffffff"/>
--  <path
--      android:pathData="M21.3867,16.1454C22.5908,16.1454 23.5669,15.1693 23.5669,13.9651C23.5669,12.761 22.5908,11.7849 21.3867,11.7849C20.1825,11.7849 19.2064,12.761 19.2064,13.9651C19.2064,15.1693 20.1825,16.1454 21.3867,16.1454Z"
--      android:fillColor="#ffffff"/>
--  <path
--      android:pathData="M6.1249,16.1454C7.329,16.1454 8.3052,15.1693 8.3052,13.9651C8.3052,12.761 7.329,11.7849 6.1249,11.7849C4.9208,11.7849 3.9447,12.761 3.9447,13.9651C3.9447,15.1693 4.9208,16.1454 6.1249,16.1454Z"
--      android:fillColor="#ffffff"/>
--</vector>
-Index: app/src/main/res/layout/activity_planta1.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:background=\"@drawable/bg4\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\"com.example.infinitycrop.ui.MachineControl.planta1\">\r\n\r\n    <RelativeLayout\r\n\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:layout_marginBottom=\"7.3dp\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n\r\n            android:orientation=\"vertical\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/backDashboard\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"40dp\"\r\n                android:layout_marginLeft=\"10dp\"\r\n                android:layout_marginTop=\"30dp\"\r\n                android:src=\"@drawable/icons_arrow_left_green\">\r\n\r\n            </ImageView>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"12dp\"\r\n                android:orientation=\"horizontal\">\r\n\r\n                <TextView\r\n                    android:id=\"@+id/textView\"\r\n                    android:layout_width=\"469dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginLeft=\"10dp\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"clip_horizontal\"\r\n                    android:text=\"Piso 1\"\r\n                    android:textColor=\"@color/white\"\r\n                    android:textSize=\"25dp\"\r\n                    android:textStyle=\"bold\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"bottom|right\"\r\n                    android:orientation=\"vertical\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:orientation=\"vertical\" />\r\n            </LinearLayout>\r\n\r\n            <me.sujanpoudel.wheelview.WheelView\r\n                android:id=\"@+id/wheelview\"\r\n                android:layout_width=\"290dp\"\r\n                android:layout_height=\"203dp\"\r\n                android:layout_gravity=\"center\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\"\r\n                app:wheelAnchorAngle=\"270\"\r\n                app:wheelAnimationDuration=\"500\"\r\n                app:wheelArcBackgroundColor=\"@color/colorSecondaryDark\"\r\n                app:wheelCenterIcon=\"@drawable/logo_without_background\"\r\n                app:wheelDividerStrokeWidth=\"1dp\"\r\n                app:wheelMode=\"ANIMATE_TO_ANCHOR\"\r\n                app:wheelSelectedArcBackgroundColor=\"@color/colorSecondary\"\r\n                app:wheelSelectedTextColor=\"@color/white\"\r\n                app:wheelStartAngle=\"315\"\r\n                app:wheelTextColor=\"@color/white\"\r\n                app:wheelTextSize=\"16sp\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_marginTop=\"10dp\"\r\n                android:orientation=\"horizontal\"\r\n                android:paddingLeft=\"20dp\">\r\n\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_marginLeft=\"1dp\"\r\n                    android:layout_marginRight=\"20dp\"\r\n                    android:background=\"@drawable/rectangle\"\r\n                    android:orientation=\"horizontal\">\r\n\r\n                    <LinearLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:layout_gravity=\"center\"\r\n                        android:layout_marginLeft=\"10dp\"\r\n                        android:layout_marginRight=\"15dp\"\r\n                        android:orientation=\"vertical\">\r\n\r\n                        <LinearLayout\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"40dp\"\r\n\r\n                            android:orientation=\"horizontal\">\r\n\r\n                            <TextView\r\n                                android:id=\"@+id/textViewinfo\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_gravity=\"center\"\r\n                                android:text=\"Pulsa el botón para editar:\"\r\n                                android:textColor=\"#000000\"\r\n                                android:textSize=\"16.7sp\"\r\n                                android:textStyle=\"normal\" />\r\n\r\n                            <Button\r\n                                android:id=\"@+id/btnedit\"\r\n                                android:layout_width=\"match_parent\"\r\n                                android:layout_marginTop=\"2dp\"\r\n                                android:layout_height=\"30dp\"\r\n                                android:background=\"@drawable/btn_scan\"\r\n                                android:layout_marginLeft=\"10dp\"\r\n                                android:text=\"Editar\"\r\n                                android:textColor=\"#FFFFFF\" />\r\n\r\n                        </LinearLayout>\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textView23\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"12dp\"\r\n                            android:text=\"Sección ocupada:\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n\r\n                        <LinearLayout\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:orientation=\"horizontal\">\r\n\r\n                            <CheckBox\r\n                                android:id=\"@+id/checkBoxSi\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_weight=\"1\"\r\n                                android:text=\"Si\" />\r\n\r\n                            <CheckBox\r\n                                android:id=\"@+id/checkBoxNo\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_weight=\"1\"\r\n                                android:checked=\"true\"\r\n                                android:clickable=\"false\"\r\n                                android:text=\"No\" />\r\n                        </LinearLayout>\r\n\r\n\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textView7\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"12dp\"\r\n                            android:text=\"Nombre de la especie:\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n\r\n                        <EditText\r\n                            android:id=\"@+id/editTextNobrep\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:background=\"@android:color/transparent\"\r\n                            android:maxLines=\"1\"\r\n                            android:paddingTop=\"5dp\"\r\n                            android:textColorHint=\"#9E9D9D\"\r\n                            android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                            android:textSize=\"15sp\"\r\n                            android:hint=\"Toca para añadir\"\r\n\r\n                            />\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textedit\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"22.3dp\"\r\n                            android:text=\"Hora de fin\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/editHour\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:background=\"@android:color/transparent\"\r\n                            android:ems=\"10\"\r\n                            android:text=\"Toca para añdir\"\r\n                            android:inputType=\"time\"\r\n                            android:maxLines=\"1\"\r\n                            android:paddingTop=\"5dp\"\r\n                            android:textColorHint=\"#333232\"\r\n                            android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                            android:textSize=\"15sp\" />\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textView11\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"22.3dp\"\r\n                            android:text=\"Fecha de fin\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n                        <TextView\r\n                            android:id=\"@+id/tvDate\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:background=\"@android:color/transparent\"\r\n                            android:ems=\"10\"\r\n                            android:text=\"Toca para añdir\"\r\n                            android:inputType=\"time\"\r\n                            android:editable=\"false\"\r\n                            android:maxLines=\"1\"\r\n                            android:paddingTop=\"5dp\"\r\n                            android:textColorHint=\"#333232\"\r\n                            android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                            android:textSize=\"15sp\" />\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:layout_marginBottom=\"20dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <Button\r\n\r\n                            android:id=\"@+id/btn_save\"\r\n                            android:layout_width=\"151dp\"\r\n                            android:layout_height=\"49dp\"\r\n                            android:layout_gravity=\"center\"\r\n                            android:background=\"@drawable/btn_scan\"\r\n                            android:onClick=\"saveNote\"\r\n                            android:text=\"Guardar cambios\"\r\n                            android:textColor=\"#FFFFFF\"\r\n                            android:visibility=\"gone\">\r\n\r\n                        </Button>\r\n\r\n                        <RelativeLayout\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:paddingTop=\"5dp\">\r\n\r\n                        </RelativeLayout>\r\n\r\n\r\n                    </LinearLayout>\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:id=\"@+id/btn_registMachine\"\r\n                android:layout_width=\"90dp\"\r\n                android:layout_height=\"41dp\"\r\n                android:layout_gravity=\"right\"\r\n                android:layout_marginTop=\"40.3dp\"\r\n                android:layout_marginBottom=\"16.7dp\"\r\n                android:background=\"@drawable/btn_login\"\r\n                android:foregroundGravity=\"right\"\r\n                android:gravity=\"center\"\r\n                android:orientation=\"vertical\"\r\n\r\n                android:visibility=\"gone\">\r\n\r\n\r\n            </LinearLayout>\r\n\r\n\r\n        </LinearLayout>\r\n\r\n        <androidx.constraintlayout.widget.ConstraintLayout\r\n            android:id=\"@+id/constraitR\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            tools:visibility=\"gone\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/imageprevius\"\r\n                android:layout_width=\"400dp\"\r\n                android:layout_height=\"731dp\"\r\n                android:alpha=\"0.4\"\r\n                app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\"\r\n                app:srcCompat=\"@color/black\"\r\n                tools:visibility=\"gone\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/txtInfoD\"\r\n                android:layout_width=\"264dp\"\r\n                android:layout_height=\"81dp\"\r\n                android:background=\"@color/white\"\r\n                android:paddingTop=\"10dp\"\r\n                android:text=\"Toca una casilla para visualizar los datos\"\r\n                android:textAlignment=\"center\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"20sp\"\r\n                app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"@+id/imageprevius\"\r\n                tools:visibility=\"gone\" />\r\n        </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n\r\n    </RelativeLayout>\r\n\r\n\r\n</ScrollView>\r\n\r\n\r\n\r\n\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_planta1.xml	(revision 6343757b3aa0a02b7d7cde424e6f51bffe4320e0)
-+++ app/src/main/res/layout/activity_planta1.xml	(date 1611163652315)
-@@ -204,7 +204,7 @@
-                             android:layout_width="wrap_content"
-                             android:layout_height="wrap_content"
-                             android:layout_marginTop="22.3dp"
--                            android:text="Hora de fin"
-+                            android:text="Programar una alarma"
-                             android:textColor="#9E9D9D" />
- 
-                         <TextView
-@@ -213,8 +213,7 @@
-                             android:layout_height="wrap_content"
-                             android:background="@android:color/transparent"
-                             android:ems="10"
--                            android:text="Toca para añdir"
--                            android:inputType="time"
-+                            android:text="Toca para añadir"
-                             android:maxLines="1"
-                             android:paddingTop="5dp"
-                             android:textColorHint="#333232"
-@@ -232,22 +231,21 @@
-                             android:layout_width="wrap_content"
-                             android:layout_height="wrap_content"
-                             android:layout_marginTop="22.3dp"
--                            android:text="Fecha de fin"
-+                            android:text="Ubicación de la planta"
-                             android:textColor="#9E9D9D" />
-                         <TextView
--                            android:id="@+id/tvDate"
-+                            android:id="@+id/txtStation"
-                             android:layout_width="match_parent"
-                             android:layout_height="wrap_content"
-                             android:background="@android:color/transparent"
-                             android:ems="10"
--                            android:text="Toca para añdir"
--                            android:inputType="time"
-+                            android:text="Esta planta se encuentra en la estación número: "
-                             android:editable="false"
-                             android:maxLines="1"
-                             android:paddingTop="5dp"
-                             android:textColorHint="#333232"
-                             android:textCursorDrawable="@drawable/cursor_color"
--                            android:textSize="15sp" />
-+                            android:textSize="13sp" />
- 
-                         <View
-                             android:layout_width="match_parent"
-Index: app/src/main/res/drawable/ic_launcher_background.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<vector\r\n    android:height=\"108dp\"\r\n    android:width=\"108dp\"\r\n    android:viewportHeight=\"108\"\r\n    android:viewportWidth=\"108\"\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\">\r\n    <path android:fillColor=\"#3DDC84\"\r\n          android:pathData=\"M0,0h108v108h-108z\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M9,0L9,108\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M19,0L19,108\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M29,0L29,108\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M39,0L39,108\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M49,0L49,108\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M59,0L59,108\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M69,0L69,108\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M79,0L79,108\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M89,0L89,108\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M99,0L99,108\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M0,9L108,9\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M0,19L108,19\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M0,29L108,29\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M0,39L108,39\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M0,49L108,49\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M0,59L108,59\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M0,69L108,69\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M0,79L108,79\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M0,89L108,89\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M0,99L108,99\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M19,29L89,29\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M19,39L89,39\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M19,49L89,49\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M19,59L89,59\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M19,69L89,69\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M19,79L89,79\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M29,19L29,89\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M39,19L39,89\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M49,19L49,89\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M59,19L59,89\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M69,19L69,89\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n    <path android:fillColor=\"#00000000\" android:pathData=\"M79,19L79,89\"\r\n          android:strokeColor=\"#33FFFFFF\" android:strokeWidth=\"0.8\"/>\r\n</vector>\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/drawable/ic_launcher_background.xml	(revision 6343757b3aa0a02b7d7cde424e6f51bffe4320e0)
-+++ app/src/main/res/drawable/ic_launcher_background.xml	(date 1611165557047)
-@@ -1,74 +1,170 @@
- <?xml version="1.0" encoding="utf-8"?>
--<vector
--    android:height="108dp"
-+<vector xmlns:android="http://schemas.android.com/apk/res/android"
-     android:width="108dp"
--    android:viewportHeight="108"
-+    android:height="108dp"
-     android:viewportWidth="108"
--    xmlns:android="http://schemas.android.com/apk/res/android">
--    <path android:fillColor="#3DDC84"
--          android:pathData="M0,0h108v108h-108z"/>
--    <path android:fillColor="#00000000" android:pathData="M9,0L9,108"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M19,0L19,108"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M29,0L29,108"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M39,0L39,108"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M49,0L49,108"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M59,0L59,108"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M69,0L69,108"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M79,0L79,108"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M89,0L89,108"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M99,0L99,108"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M0,9L108,9"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M0,19L108,19"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M0,29L108,29"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M0,39L108,39"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M0,49L108,49"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M0,59L108,59"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M0,69L108,69"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M0,79L108,79"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M0,89L108,89"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M0,99L108,99"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M19,29L89,29"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M19,39L89,39"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M19,49L89,49"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M19,59L89,59"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M19,69L89,69"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M19,79L89,79"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M29,19L29,89"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M39,19L39,89"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M49,19L49,89"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M59,19L59,89"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M69,19L69,89"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
--    <path android:fillColor="#00000000" android:pathData="M79,19L79,89"
--          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
-+    android:viewportHeight="108">
-+    <path
-+        android:fillColor="#3DDC84"
-+        android:pathData="M0,0h108v108h-108z" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M9,0L9,108"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M19,0L19,108"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M29,0L29,108"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M39,0L39,108"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M49,0L49,108"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M59,0L59,108"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M69,0L69,108"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M79,0L79,108"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M89,0L89,108"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M99,0L99,108"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M0,9L108,9"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M0,19L108,19"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M0,29L108,29"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M0,39L108,39"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M0,49L108,49"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M0,59L108,59"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M0,69L108,69"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M0,79L108,79"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M0,89L108,89"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M0,99L108,99"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M19,29L89,29"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M19,39L89,39"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M19,49L89,49"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M19,59L89,59"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M19,69L89,69"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M19,79L89,79"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M29,19L29,89"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M39,19L39,89"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M49,19L49,89"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M59,19L59,89"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M69,19L69,89"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
-+    <path
-+        android:fillColor="#00000000"
-+        android:pathData="M79,19L79,89"
-+        android:strokeWidth="0.8"
-+        android:strokeColor="#33FFFFFF" />
- </vector>
-Index: app/src/main/res/values/preloaded_fonts.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <array name=\"preloaded_fonts\" translatable=\"false\">\r\n        <item>@font/bungee</item>\r\n    </array>\r\n</resources>\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/values/preloaded_fonts.xml	(revision 6343757b3aa0a02b7d7cde424e6f51bffe4320e0)
-+++ app/src/main/res/values/preloaded_fonts.xml	(date 1611164807351)
-@@ -1,6 +1,6 @@
- <?xml version="1.0" encoding="utf-8"?>
- <resources>
-     <array name="preloaded_fonts" translatable="false">
--        <item>@font/bungee</item>
-+
-     </array>
- </resources>
-Index: app/src/main/res/layout/fragment_profile_foro.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.Foro.main.Profile.ProfileForoFragment\">\r\n\r\n    <!-- TODO: Update blank fragment layout -->\r\n    <TextView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:gravity=\"center\"\r\n        android:text=\"profile\" />\r\n\r\n</FrameLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_profile_foro.xml	(revision 6343757b3aa0a02b7d7cde424e6f51bffe4320e0)
-+++ app/src/main/res/layout/fragment_profile_foro.xml	(date 1611167226035)
-@@ -1,15 +1,156 @@
- <?xml version="1.0" encoding="utf-8"?>
--<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
--    xmlns:tools="http://schemas.android.com/tools"
-+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
-+
-     android:layout_width="match_parent"
-     android:layout_height="match_parent"
--    tools:context=".ui.Foro.main.Profile.ProfileForoFragment">
-+    android:background="#EFE9E9"
-+    android:orientation="vertical">
-+
-+    <RelativeLayout
-+        android:layout_width="match_parent"
-+        android:layout_height="405dp">
- 
--    <!-- TODO: Update blank fragment layout -->
--    <TextView
--        android:layout_width="match_parent"
--        android:layout_height="match_parent"
--        android:gravity="center"
--        android:text="profile" />
-+        <LinearLayout
-+            android:layout_width="match_parent"
-+            android:layout_height="350dp"
-+            android:background="@color/colorSecondary"
-+            android:orientation="vertical">
-+
-+            <ImageView
-+                android:layout_width="150dp"
-+                android:layout_height="150dp"
-+                android:layout_gravity="center_horizontal"
-+                android:layout_marginTop="45dp"
-+                android:background="@drawable/rectangle" />
-+
-+            <TextView
-+                android:layout_width="wrap_content"
-+                android:layout_height="wrap_content"
-+                android:layout_gravity="center_horizontal"
-+                android:layout_marginTop="10dp"
-+                android:text="Angle Triangle"
-+                android:textColor="#fff"
-+                android:textSize="21sp"
-+                android:textStyle="bold" />
-+        </LinearLayout>
-+
-+        <androidx.cardview.widget.CardView
-+            android:layout_width="400dp"
-+            android:layout_height="120dp"
-+            android:layout_centerHorizontal="true"
-+            android:layout_marginTop="275dp">
-+
-+            <LinearLayout
-+                android:layout_width="match_parent"
-+                android:layout_height="match_parent"
-+                android:orientation="horizontal"
-+                android:weightSum="2">
-+
-+                <LinearLayout
-+                    android:layout_width="0dp"
-+                    android:layout_height="match_parent"
-+                    android:layout_weight="1"
-+                    android:gravity="center"
-+                    android:orientation="vertical">
-+
-+                    <TextView
-+                        android:layout_width="wrap_content"
-+                        android:layout_height="wrap_content"
-+                        android:text="Posts"
-+                        android:textSize="20sp" />
-+
-+                    <TextView
-+                        android:layout_width="wrap_content"
-+                        android:layout_height="wrap_content"
-+                        android:paddingTop="10dp"
-+                        android:text="125"
-+                        android:textColor="@color/green"
-+                        android:textSize="20sp"
-+                        android:textStyle="bold" />
-+                </LinearLayout>
-+
-+                <LinearLayout
-+                    android:layout_width="0dp"
-+                    android:layout_height="match_parent"
-+                    android:layout_weight="1"
-+                    android:gravity="center"
-+                    android:orientation="vertical"
-+                    android:visibility="gone">
-+
-+                    <TextView
-+                        android:layout_width="wrap_content"
-+                        android:layout_height="wrap_content"
-+                        android:text="Followers"
-+                        android:textSize="20sp"
-+                        android:visibility="gone" />
-+
-+                    <TextView
-+                        android:layout_width="wrap_content"
-+                        android:layout_height="wrap_content"
-+                        android:paddingTop="10dp"
-+                        android:text="1205"
-+                        android:textColor="@color/green"
-+                        android:textSize="20sp"
-+                        android:textStyle="bold"
-+                        android:visibility="gone" />
-+                </LinearLayout>
-+
-+                <LinearLayout
-+                    android:layout_width="0dp"
-+                    android:layout_height="match_parent"
-+                    android:layout_weight="1"
-+                    android:gravity="center"
-+                    android:orientation="vertical">
-+
-+                    <TextView
-+                        android:layout_width="wrap_content"
-+                        android:layout_height="wrap_content"
-+                        android:text="Following"
-+                        android:textSize="20sp" />
-+
-+                    <TextView
-+                        android:layout_width="wrap_content"
-+                        android:layout_height="wrap_content"
-+                        android:paddingTop="10dp"
-+                        android:text="360"
-+                        android:textColor="@color/green"
-+                        android:textSize="20sp"
-+                        android:textStyle="bold" />
-+                </LinearLayout>
-+            </LinearLayout>
-+        </androidx.cardview.widget.CardView>
-+    </RelativeLayout>
-+
-+    <LinearLayout
-+        android:layout_width="wrap_content"
-+        android:layout_height="wrap_content"
-+        android:layout_gravity="center"
-+        android:layout_marginLeft="20dp"
-+        android:layout_marginRight="20dp"
-+        android:layout_marginTop="45dp"
-+        android:orientation="vertical">
-+
-+        <TextView
-+            android:id="@+id/progiledescription"
-+            android:layout_width="379dp"
-+            android:layout_height="100dp"
-+            android:background="@color/white"
-+            android:hint="Descripción:"
-+            android:textSize="20sp"
-+            android:padding="10dp"
-+
-+          />
-+
-+        <Button
-+            android:id="@+id/btneditDesc"
-+            android:layout_width="130dp"
-+            android:layout_height="wrap_content"
-+            android:layout_gravity="center"
-+            android:layout_marginTop="12dp"
-+            android:background="@drawable/btn_scan"
-+            android:text="Modificar"
-+            android:textColor="@color/white" />
-+
-+    </LinearLayout>
- 
--</FrameLayout>
-\ No newline at end of file
-+</LinearLayout>
-\ No newline at end of file
-Index: app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.list_machine;\r\n\r\nimport android.content.Intent;\r\nimport android.media.Image;\r\nimport android.os.Bundle;\r\nimport android.os.Parcelable;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.ItemTouchHelper;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.logmail.RegisterActivity;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerAdapter;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\nimport com.google.android.material.bottomsheet.BottomSheetDialog;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.Query;\r\n\r\nimport java.text.BreakIterator;\r\nimport java.util.Map;\r\n\r\npublic class MainActivityMachineList extends AppCompatActivity {\r\n    private FirebaseFirestore firebaseFirestore;\r\n    private RecyclerView mFirestoreList;\r\n    private Adapter adapter;\r\n    private FirebaseAuth firebaseAuth;\r\n    Button addBtn;//boton añadir nueva maquina\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_list_machines);\r\n        firebaseFirestore=FirebaseFirestore.getInstance();\r\n        mFirestoreList=findViewById(R.id.firestore_list);\r\n        firebaseAuth=FirebaseAuth.getInstance();\r\n        String uid=firebaseAuth.getUid();\r\n        //Query\r\n        Query query=firebaseFirestore\r\n                .collection(\"Machine\")\r\n               .whereEqualTo(\"userUID\", uid)\r\n                .orderBy(\"priority\",Query.Direction.ASCENDING);\r\n        //RecyclerView\r\n        FirestoreRecyclerOptions<MachineModel> options=new FirestoreRecyclerOptions.Builder<MachineModel>()\r\n                .setQuery(query, MachineModel.class)\r\n                .build();\r\n        //View Holder\r\n        adapter= new Adapter(options);\r\n        mFirestoreList.setHasFixedSize(true);\r\n        mFirestoreList.setLayoutManager(new LinearLayoutManager(this));\r\n        mFirestoreList.setAdapter(adapter);\r\n\r\n        new ItemTouchHelper(new ItemTouchHelper.SimpleCallback(0,\r\n                ItemTouchHelper.LEFT | ItemTouchHelper.RIGHT) {\r\n            @Override\r\n            public boolean onMove(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder, RecyclerView.ViewHolder target) {\r\n                return false;\r\n            }\r\n            @Override\r\n            public void onSwiped(RecyclerView.ViewHolder viewHolder, int direction) {\r\n                Toast.makeText(getApplicationContext(), \"Maquina eliminada con éxito\", Toast.LENGTH_SHORT).show();\r\n                adapter.deleteItem(viewHolder.getAdapterPosition());\r\n            }\r\n        }).attachToRecyclerView(mFirestoreList);\r\n\r\n        adapter.setOnItemClickListener(new Adapter.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(DocumentSnapshot documentSnapshot, int position) {\r\n                //documentSnapshot.getData() -> devuelve all que tiene la maquina en firebase\r\n                MachineModel machine = documentSnapshot.toObject(MachineModel.class);\r\n                final String id = documentSnapshot.getId();\r\n                final String path = documentSnapshot.getString(\"description\"); //devuelve ruta en firebase Machine\\madara\r\n                final String name = documentSnapshot.getString(\"name\");\r\n                final String identif = documentSnapshot.getId();\r\n                //botttom sheet\r\n                final BottomSheetDialog bottomSheetDialog=new BottomSheetDialog(MainActivityMachineList.this);\r\n                bottomSheetDialog.setContentView(R.layout.machine_bottom_sheet);\r\n                Button btnenter=bottomSheetDialog.findViewById(R.id.enterMachineButton);\r\n                Button btnmodify=bottomSheetDialog.findViewById(R.id.madifyMachineButton);\r\n                Button btncancel=bottomSheetDialog.findViewById(R.id.cancelMachineButton);\r\n                btnenter.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        Intent intent = new Intent(getBaseContext(), MainActivity.class);\r\n                        intent.putExtra(\"machine\", id);\r\n                        intent.putExtra(\"description\", path);\r\n                        startActivity(intent);\r\n                    }\r\n                });\r\n                btnmodify.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        //poner aca Intent para acceder al layout de modificar maquina\r\n                        //hay que pasarle un intent con extra como he hecho en el onClick de arriba\r\n                        //lo que necesitas para modificar es la variable id\r\n                        //encuentras en firebase la maquina con el id y haces la magia de modificar etc..\r\n                        //lo de maquina a favoritos es facil , si es 1 es favoirto si es 2 no lo es.\r\n                        //ejemplo\r\n                        Intent intent = new Intent(getBaseContext(), ModifyMachine.class);\r\n                        intent.putExtra(\"maq\", name);\r\n                        intent.putExtra(\"identificator\", identif);\r\n                        startActivity(intent);\r\n                    }\r\n                });\r\n                btncancel.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        bottomSheetDialog.cancel();\r\n                    }\r\n                });\r\n                bottomSheetDialog.show();\r\n\r\n\r\n            }\r\n        });\r\n\r\n        FloatingActionButton addbtn = (FloatingActionButton) findViewById(R.id.button_add_machine);\r\n        addbtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent (getApplicationContext(), AddMachine.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        adapter.stopListening();\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        adapter.startListening();\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(revision 6343757b3aa0a02b7d7cde424e6f51bffe4320e0)
-+++ app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(date 1611168245964)
-@@ -78,7 +78,7 @@
-         adapter.setOnItemClickListener(new Adapter.OnItemClickListener() {
-             @Override
-             public void onItemClick(DocumentSnapshot documentSnapshot, int position) {
--                //documentSnapshot.getData() -> devuelve all que tiene la maquina en firebase
-+                /*documentSnapshot.getData();*/ //-> devuelve all que tiene la maquina en firebase
-                 MachineModel machine = documentSnapshot.toObject(MachineModel.class);
-                 final String id = documentSnapshot.getId();
-                 final String path = documentSnapshot.getString("description"); //devuelve ruta en firebase Machine\madara
-Index: app/src/main/AndroidManifest.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.infinitycrop\">\r\n\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" /> <!-- Permisos Qr -->\r\n    <uses-permission android:name=\"android.permission.CAMERA\" />\r\n\r\n    <uses-feature android:name=\"android.hardware.camera\" />\r\n    <uses-feature android:name=\"android.hardware.camera.autofocus\" />\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher\"\r\n        android:theme=\"@style/AppThemeHome\">\r\n        <activity android:name=\".ui.Foro.main.Community.NewPost.CreatePost.CreatePost\"></activity>\r\n        <activity android:name=\".ui.Foro.main.Community.CommunityMain\" />\r\n        <activity android:name=\".ui.Foro.lets_start.EditCommunity\" />\r\n        <activity android:name=\".ui.list_machine.ModifyMachine\" />\r\n        <activity android:name=\".ui.Foro.main.ForoMain\" />\r\n        <activity android:name=\".ui.Foro.lets_start.AddCommunity\" />\r\n        <activity android:name=\".ui.Foro.lets_start.choose_community\" />\r\n        <activity android:name=\".ui.Foro.lets_start.welcome_forum\" />\r\n        <activity android:name=\".MainActivity\" />\r\n\r\n\r\n        <service android:name=\".ui.service.ServicioMqtt\" />\r\n        <service android:name=\".ui.service.ServicioNotificaciones\" />\r\n\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\" />\r\n        <activity android:name=\".ui.profile.settings.HelpProfile\" />\r\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\" />\r\n        <activity android:name=\".ui.list_machine.AddMachine\" />\r\n        <activity android:name=\".ui.profile.settings.ModifyProfile\" />\r\n        <activity android:name=\".ui.logmail.RegisterActivity\" />\r\n        <activity android:name=\".ui.logmail.LoginActivity\" />\r\n        <activity android:name=\".ui.list_machine.CaptureAct\" />\r\n        <activity android:name=\".ui.login.LogActivity\" />\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\" />\r\n        <activity android:name=\".ui.LoadAnimations.LogprimeraActivity\" />\r\n        <activity android:name=\".ui.graphics.GraphicsActivity\" />\r\n        <activity android:name=\".ui.MachineControl.planta1\" />\r\n        <activity android:name=\".ui.notifications.NotificacionesActivity\" />\r\n        <activity android:name=\".ui.guiabotanica.GuiaActivity\" />\r\n        <activity android:name=\".ui.guiabotanica.PlantActivity\" />\r\n\r\n        <meta-data\r\n            android:name=\"com.google.android.geo.API_KEY\"\r\n            android:value=\"@string/google_maps_key\" />\r\n        <meta-data\r\n            android:name=\"com.facebook.sdk.ApplicationId\"\r\n            android:value=\"@string/facebook_app_id\"\r\n            tools:replace=\"android:value\" />\r\n        <meta-data\r\n            android:name=\"preloaded_fonts\"\r\n            android:resource=\"@array/preloaded_fonts\" />\r\n\r\n        <activity\r\n            android:name=\"com.theartofdev.edmodo.cropper.CropImageActivity\"\r\n            android:theme=\"@style/Base.Theme.AppCompat\" />\r\n    </application>\r\n\r\n</manifest>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/AndroidManifest.xml	(revision 6343757b3aa0a02b7d7cde424e6f51bffe4320e0)
-+++ app/src/main/AndroidManifest.xml	(date 1611163652345)
-@@ -11,10 +11,13 @@
-     <uses-permission android:name="com.google.android.things.permission.MANAGE_INPUT_DRIVERS" />
-     <uses-permission android:name="com.google.android.things.permission.USE_PERIPHERAL_IO" /> <!-- Permisos Qr -->
-     <uses-permission android:name="android.permission.CAMERA" />
-+    <uses-permission android:name="com.android.alarm.permission.SET_ALARM"/>
-+
- 
-     <uses-feature android:name="android.hardware.camera" />
-     <uses-feature android:name="android.hardware.camera.autofocus" />
- 
-+
-     <application
-         android:allowBackup="true"
-         android:icon="@mipmap/ic_launcher"
-@@ -37,6 +40,7 @@
- 
-         <activity android:name=".ui.LoadAnimations.IntroductoryActivity">
-             <intent-filter>
-+                <action android:name="android.intent.action.SET_ALARM"/>
-                 <action android:name="android.intent.action.MAIN" />
- 
-                 <category android:name="android.intent.category.LAUNCHER" />
-Index: app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.MachineControl;\r\n\r\nimport android.app.AlarmManager;\r\nimport android.app.DatePickerDialog;\r\nimport android.app.FragmentTransaction;\r\nimport android.app.TimePickerDialog;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.graphics.drawable.ColorDrawable;\r\nimport android.os.Bundle;\r\nimport android.os.CountDownTimer;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.CheckBox;\r\nimport android.widget.DatePicker;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.TimePicker;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.constraintlayout.widget.ConstraintLayout;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.dashboard.DashboardFragment;\r\nimport com.example.infinitycrop.ui.dashboard.GeneralFragment;\r\nimport com.example.infinitycrop.ui.logmail.LoginActivity;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.google.firebase.firestore.ListenerRegistration;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\nimport java.text.ParseException;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.Calendar;\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\nimport kotlin.Unit;\r\nimport kotlin.jvm.functions.Function1;\r\nimport me.sujanpoudel.wheelview.WheelView;\r\n\r\npublic class planta1 extends AppCompatActivity {\r\n    private List<String> nombres;\r\n    private List<String> estado;\r\n    //Aviso al entrar\r\n    private ConstraintLayout fondoR;\r\n    private ImageView imgr,goBack;\r\n    private TextView textR;\r\n    //\r\n\r\n    private int piso = 1;\r\n    String one = String.valueOf(piso);\r\n    private int stated = 1;\r\n    String state = String.valueOf(stated);\r\n\r\n\r\n    private CheckBox checkYes, checkNo;\r\n    private Button editInfo, saveChanges;\r\n    private TextView mDisplayDate,mDisplayHour,infoTitle;\r\n    private EditText nameplant;\r\n    private FirebaseFirestore db;\r\n\r\n    private String idDocument;\r\n    private String id;\r\n\r\n\r\n\r\n    //Reloj\r\n    int t2Hour, t2Minute;\r\n    private DatePickerDialog.OnDateSetListener mDateSetListener;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_planta1);\r\n\r\n        //Aviso al entrar\r\n        fondoR = findViewById(R.id.constraitR);\r\n        imgr = findViewById(R.id.imageprevius);\r\n        textR = findViewById(R.id.txtInfoD);\r\n        CountDownTimer countDownTimer = new CountDownTimer(3000, 1000) {//Se pone la cuenta atras para que no se superponga con la animación\r\n            public void onTick(long millisUntilFinished) {\r\n\r\n            }\r\n\r\n            public void onFinish() {\r\n\r\n                fondoR.setVisibility(View.GONE);\r\n                imgr.setVisibility(View.GONE);\r\n                textR.setVisibility(View.GONE);\r\n\r\n            }\r\n        }.start();\r\n        //boton para volver\r\n        goBack= findViewById(R.id.backDashboard);\r\n        goBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n               finish();\r\n            }\r\n        });\r\n\r\n        db=FirebaseFirestore.getInstance();\r\n        //bungle get extra\r\n        Bundle extras = getIntent().getExtras();\r\n        id = extras.getString(\"idMachine\");\r\n\r\n        //arrays\r\n        nombres=new ArrayList<>();\r\n        estado=new ArrayList<>();\r\n        //firestore\r\n        db.collection(\"Mediciones planta 1\").document(id).collection(\"DatosPiso\")\r\n                .addSnapshotListener(new EventListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable QuerySnapshot snapshots,\r\n                                        @Nullable FirebaseFirestoreException e) {\r\n                        if (e != null) {\r\n                            return;\r\n                        }\r\n                        nombres.clear();\r\n                        for (DocumentSnapshot doc : snapshots) {\r\n                                nombres.add(doc.getString(\"name\"));\r\n                                estado.add(doc.getId());\r\n                        }\r\n                       /* Toast.makeText(getApplicationContext(),nombres.toString(), Toast.LENGTH_LONG).show();*/\r\n\r\n\r\n\r\n                        final WheelView wheelView = (WheelView) findViewById(R.id.wheelview);\r\n                        wheelView.setTitles(nombres);\r\n\r\n                        wheelView.setSelectListener(new Function1<Integer, Unit>() {\r\n                            @Override\r\n                            public Unit invoke(Integer integer) {\r\n                                showToast(integer);\r\n                                return Unit.INSTANCE;\r\n                            }\r\n                            private final  void showToast(Integer index) {\r\n                               // Toast.makeText(planta1.this,\"\"+wheelView.getTitles().get(index),Toast.LENGTH_SHORT).show();\r\n                                idDocument=estado.get(index);\r\n                                Toast.makeText(planta1.this,\"\"+idDocument,Toast.LENGTH_SHORT).show();\r\n                                itenInfo(idDocument);\r\n\r\n\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                });\r\n\r\n\r\n\r\n\r\n\r\n        //Nombre de la planta\r\n        nameplant = (EditText)findViewById(R.id.editTextNobrep);\r\n        nameplant.setEnabled(false);\r\n        //Checkboxes\r\n        checkYes=(CheckBox)findViewById(R.id.checkBoxSi);\r\n        checkYes.setKeyListener(null);\r\n        checkNo=(CheckBox)findViewById(R.id.checkBoxNo);\r\n        checkNo.setKeyListener(null);\r\n\r\n        //Boton guardar cambios\r\n        saveChanges = (Button)findViewById(R.id.btn_save);\r\n        saveChanges.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                saveNote(v);\r\n                editInfo.setVisibility(View.VISIBLE);\r\n                saveChanges.setVisibility(View.GONE);\r\n                mDisplayDate.setEnabled(false);\r\n                mDisplayHour.setEnabled(false);\r\n                nameplant.setEnabled(false);\r\n                infoTitle.setText(\"Pulsa el botón para editar:\");\r\n\r\n\r\n\r\n\r\n            }\r\n        });\r\n\r\n        //Boton editar informacion\r\n        editInfo = (Button) findViewById(R.id.btnedit);\r\n        editInfo.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                saveChanges.setVisibility(View.VISIBLE);\r\n                editInfo.setVisibility(View.GONE);\r\n                mDisplayDate.setEnabled(true);\r\n                mDisplayHour.setEnabled(true);\r\n                nameplant.setEnabled(true);\r\n                infoTitle.setText(\"Información completa:\");\r\n\r\n\r\n            }\r\n        });\r\n        infoTitle = (TextView) findViewById(R.id.textViewinfo);\r\n        //HORA\r\n        mDisplayHour =(TextView) findViewById(R.id.editHour);\r\n        mDisplayHour.setEnabled(false);\r\n        mDisplayHour.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                TimePickerDialog timePickerDialog = new TimePickerDialog(\r\n                        planta1.this, android.R.style.Theme_Holo_Light_Dialog_MinWidth, new TimePickerDialog.OnTimeSetListener() {\r\n                    @Override\r\n                    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {\r\n                        Calendar c = Calendar.getInstance();\r\n                        t2Hour = hourOfDay;\r\n                        t2Minute = minute;\r\n                        String time = t2Hour + \":\" + t2Minute;\r\n                        SimpleDateFormat f24Hours = new SimpleDateFormat(\"HH:mm\");\r\n                        try {\r\n                            Date date = f24Hours.parse(time);\r\n                            SimpleDateFormat f12Hours = new SimpleDateFormat(\"hh:mm aa\");\r\n                            mDisplayHour.setText(f12Hours.format(date));\r\n                        } catch (ParseException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                        c.set(Calendar.HOUR_OF_DAY,hourOfDay);\r\n                        c.set(Calendar.MINUTE,minute);\r\n                        c.set(Calendar.SECOND,0);\r\n                        startAlarm(c);\r\n                    }\r\n                },12,0,false\r\n                );\r\n                timePickerDialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n                timePickerDialog.updateTime(t2Hour,t2Minute);\r\n                timePickerDialog.show();\r\n\r\n            }\r\n        });\r\n\r\n\r\n\r\n        //CALENDARIO\r\n        mDisplayDate = (TextView) findViewById(R.id.tvDate);\r\n        mDisplayDate.setEnabled(false);\r\n        mDisplayDate.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Calendar cal = Calendar.getInstance();\r\n                int year = cal.get(Calendar.YEAR);\r\n                int month = cal.get(Calendar.MONTH);\r\n                int day = cal.get(Calendar.DAY_OF_MONTH);\r\n\r\n                DatePickerDialog dialog = new DatePickerDialog(planta1.this,android.R.style.Theme_Holo_Dialog_MinWidth, mDateSetListener,year,month,day);\r\n                dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n                dialog.show();\r\n            }\r\n\r\n        });\r\n        mDateSetListener = new DatePickerDialog.OnDateSetListener() {\r\n            @Override\r\n            public void onDateSet(DatePicker datePicker, int year, int month, int day) {\r\n                month = month+1;\r\n                String date = day +\"/\" + month +\"/\"+ year;\r\n                mDisplayDate.setText(date);\r\n            }\r\n        };\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n\r\n\r\n    }\r\n    private void startAlarm(Calendar c){\r\n        AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);\r\n\r\n    }\r\n    public void saveNote(View v){\r\n        String cola = idDocument;\r\n        String nombre = nameplant.getText().toString();\r\n        String hora = mDisplayHour.getText().toString();\r\n        String dia = mDisplayDate.getText().toString();\r\n        String piso = one;\r\n\r\n        Map<String, Object> note = new HashMap<>();\r\n        note.put(\"name\",nombre);\r\n        note.put(\"fecha\",dia);\r\n        note.put(\"hora\",hora);\r\n        note.put(\"piso\",piso);\r\n\r\n        db.collection(\"Mediciones planta 1\").document(id).collection(\"DatosPiso\").document(cola).update(note).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n            @Override\r\n            public void onSuccess(Void aVoid) {\r\n            Toast.makeText(planta1.this,\"va bien\",Toast.LENGTH_SHORT).show();\r\n            }\r\n        }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Toast.makeText(planta1.this,\"va mal\",Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    private void itenInfo(String uiDoc){\r\n        //hacer consulta a ese documento con uiDOc y sacar su info\r\n        //luego set Text a all\r\n        db.collection(\"Mediciones planta 1\").document(id).collection(\"DatosPiso\").document(uiDoc).get()\r\n                .addOnSuccessListener(new OnSuccessListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onSuccess(DocumentSnapshot documentSnapshot) {\r\n                        if(documentSnapshot.exists()){\r\n                            String nombre = documentSnapshot.getString(\"name\");\r\n                            String fecha = documentSnapshot.getString(\"fecha\");\r\n                            String hora = documentSnapshot.getString(\"hora\");\r\n\r\n                           // Map<String,Object> note = documentSnapshot.getData();\r\n                            nameplant.setText(nombre);\r\n                            mDisplayHour.setText(hora);\r\n                            mDisplayDate.setText(fecha);\r\n\r\n                        }else{\r\n                            Toast.makeText(planta1.this,\"Document does exist\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }\r\n                }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Toast.makeText(planta1.this,\"va mal\",Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n                /*.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable DocumentSnapshot value, @Nullable FirebaseFirestoreException error) {\r\n\r\n                    }\r\n                });*/\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java	(revision 6343757b3aa0a02b7d7cde424e6f51bffe4320e0)
-+++ app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java	(date 1611163652339)
-@@ -8,8 +8,10 @@
- import android.content.Intent;
- import android.graphics.Color;
- import android.graphics.drawable.ColorDrawable;
-+import android.os.Build;
- import android.os.Bundle;
- import android.os.CountDownTimer;
-+import android.provider.AlarmClock;
- import android.view.View;
- import android.widget.Button;
- import android.widget.CheckBox;
-@@ -23,6 +25,7 @@
- 
- import androidx.annotation.NonNull;
- import androidx.annotation.Nullable;
-+import androidx.annotation.RequiresApi;
- import androidx.appcompat.app.AppCompatActivity;
- import androidx.constraintlayout.widget.ConstraintLayout;
- import androidx.fragment.app.Fragment;
-@@ -41,14 +44,18 @@
- import com.google.firebase.firestore.ListenerRegistration;
- import com.google.firebase.firestore.QuerySnapshot;
- 
-+import java.sql.Time;
- import java.text.ParseException;
- import java.text.SimpleDateFormat;
-+import java.time.LocalDate;
-+import java.time.LocalTime;
- import java.util.ArrayList;
- import java.util.Arrays;
- import java.util.Calendar;
- import java.util.Date;
- import java.util.HashMap;
- import java.util.List;
-+import java.util.Locale;
- import java.util.Map;
- 
- import kotlin.Unit;
-@@ -72,7 +79,7 @@
- 
-     private CheckBox checkYes, checkNo;
-     private Button editInfo, saveChanges;
--    private TextView mDisplayDate,mDisplayHour,infoTitle;
-+    private TextView mDisplayHour,infoTitle,mStation;
-     private EditText nameplant;
-     private FirebaseFirestore db;
- 
-@@ -137,6 +144,8 @@
-                                 nombres.add(doc.getString("name"));
-                                 estado.add(doc.getId());
-                         }
-+
-+
-                        /* Toast.makeText(getApplicationContext(),nombres.toString(), Toast.LENGTH_LONG).show();*/
- 
- 
-@@ -170,6 +179,9 @@
-         //Nombre de la planta
-         nameplant = (EditText)findViewById(R.id.editTextNobrep);
-         nameplant.setEnabled(false);
-+        mDisplayHour=(TextView) findViewById(R.id.editHour);
-+        mDisplayHour.setEnabled(false);
-+        mStation=(TextView)findViewById(R.id.txtStation);
-         //Checkboxes
-         checkYes=(CheckBox)findViewById(R.id.checkBoxSi);
-         checkYes.setKeyListener(null);
-@@ -184,7 +196,6 @@
-                 saveNote(v);
-                 editInfo.setVisibility(View.VISIBLE);
-                 saveChanges.setVisibility(View.GONE);
--                mDisplayDate.setEnabled(false);
-                 mDisplayHour.setEnabled(false);
-                 nameplant.setEnabled(false);
-                 infoTitle.setText("Pulsa el botón para editar:");
-@@ -203,54 +214,32 @@
- 
-                 saveChanges.setVisibility(View.VISIBLE);
-                 editInfo.setVisibility(View.GONE);
--                mDisplayDate.setEnabled(true);
-                 mDisplayHour.setEnabled(true);
-                 nameplant.setEnabled(true);
-                 infoTitle.setText("Información completa:");
- 
- 
-+
-             }
-         });
-         infoTitle = (TextView) findViewById(R.id.textViewinfo);
-         //HORA
--        mDisplayHour =(TextView) findViewById(R.id.editHour);
--        mDisplayHour.setEnabled(false);
-+
-         mDisplayHour.setOnClickListener(new View.OnClickListener() {
-             @Override
-             public void onClick(View v) {
--                TimePickerDialog timePickerDialog = new TimePickerDialog(
--                        planta1.this, android.R.style.Theme_Holo_Light_Dialog_MinWidth, new TimePickerDialog.OnTimeSetListener() {
--                    @Override
--                    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
--                        Calendar c = Calendar.getInstance();
--                        t2Hour = hourOfDay;
--                        t2Minute = minute;
--                        String time = t2Hour + ":" + t2Minute;
--                        SimpleDateFormat f24Hours = new SimpleDateFormat("HH:mm");
--                        try {
--                            Date date = f24Hours.parse(time);
--                            SimpleDateFormat f12Hours = new SimpleDateFormat("hh:mm aa");
--                            mDisplayHour.setText(f12Hours.format(date));
--                        } catch (ParseException e) {
--                            e.printStackTrace();
--                        }
--                        c.set(Calendar.HOUR_OF_DAY,hourOfDay);
--                        c.set(Calendar.MINUTE,minute);
--                        c.set(Calendar.SECOND,0);
--                        startAlarm(c);
--                    }
--                },12,0,false
--                );
--                timePickerDialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));
--                timePickerDialog.updateTime(t2Hour,t2Minute);
--                timePickerDialog.show();
-+                Intent intent = new Intent(AlarmClock.ACTION_SET_ALARM);
-+                if(intent.resolveActivity(getPackageManager())!=null){
-+                    startActivity(intent);
-+                }
- 
--            }
-+        }
-         });
- 
- 
- 
--        //CALENDARIO
-+
-+        /*//CALENDARIO
-         mDisplayDate = (TextView) findViewById(R.id.tvDate);
-         mDisplayDate.setEnabled(false);
-         mDisplayDate.setOnClickListener(new View.OnClickListener() {
-@@ -275,7 +264,7 @@
-                 mDisplayDate.setText(date);
-             }
-         };
--
-+            */
-     }
- 
-     @Override
-@@ -284,21 +273,25 @@
- 
- 
-     }
--    private void startAlarm(Calendar c){
--        AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
--
--    }
-+    /*public void establecerAlarma(String mensaje,int dias,int hora,int minutos){
-+        Intent intent = new Intent(AlarmClock.ACTION_SET_ALARM)
-+                .putExtra(AlarmClock.EXTRA_DAYS,dias)
-+                .putExtra(AlarmClock.EXTRA_MESSAGE,mensaje)
-+                .putExtra(AlarmClock.EXTRA_HOUR,hora)
-+                .putExtra(AlarmClock.EXTRA_MINUTES,minutos);
-+        if(intent.resolveActivity(getPackageManager())!=null){
-+            startActivity(intent);
-+        }
-+    }*/
-+
-     public void saveNote(View v){
-         String cola = idDocument;
-         String nombre = nameplant.getText().toString();
--        String hora = mDisplayHour.getText().toString();
--        String dia = mDisplayDate.getText().toString();
-+
-         String piso = one;
- 
-         Map<String, Object> note = new HashMap<>();
-         note.put("name",nombre);
--        note.put("fecha",dia);
--        note.put("hora",hora);
-         note.put("piso",piso);
- 
-         db.collection("Mediciones planta 1").document(id).collection("DatosPiso").document(cola).update(note).addOnSuccessListener(new OnSuccessListener<Void>() {
-@@ -325,13 +318,26 @@
-                     public void onSuccess(DocumentSnapshot documentSnapshot) {
-                         if(documentSnapshot.exists()){
-                             String nombre = documentSnapshot.getString("name");
--                            String fecha = documentSnapshot.getString("fecha");
--                            String hora = documentSnapshot.getString("hora");
-+                            String estacion = documentSnapshot.getString("estacion");
-+                            int resultado =documentSnapshot.getLong("estado").intValue();
-+                            if(resultado==1){
-+                                checkYes.isSelected();
-+                                checkYes.setChecked(true);
-+                                checkYes.isChecked();
-+                                checkNo.setChecked(false);
-+                            }else{
-+                                checkNo.isSelected();
-+                                checkNo.setChecked(true);
-+                                checkNo.isChecked();
-+                                checkYes.setChecked(false);
-+                            }
-+
- 
-                            // Map<String,Object> note = documentSnapshot.getData();
-                             nameplant.setText(nombre);
--                            mDisplayHour.setText(hora);
--                            mDisplayDate.setText(fecha);
-+                            mStation.setText(estacion);
-+
-+
- 
-                         }else{
-                             Toast.makeText(planta1.this,"Document does exist",Toast.LENGTH_SHORT).show();
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_19_33__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_19_33__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_21_29__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_21_29__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_17_01_2021_15_05__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_17_01_2021_15_05__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_08__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_08__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_19_07__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_19_07__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_15_01_2021_13_24__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_15_01_2021_13_24__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_14_53__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_14_53__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_15__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_15__Default_Changelist_.xml
Index: .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_19_58_[Default_Changelist]/shelved.patch
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_19_58_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_19_58_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,755 +0,0 @@
-Index: app/src/main/AndroidManifest.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    package=\"com.example.infinitycrop\">\n\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\n    <uses-permission android:name=\"android.permission.INTERNET\" />\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" /> <!-- Permisos Qr -->\n    <uses-permission android:name=\"android.permission.CAMERA\" />\n    <uses-permission android:name=\"com.android.alarm.permission.SET_ALARM\" />\n\n    <uses-feature android:name=\"android.hardware.camera\" />\n    <uses-feature android:name=\"android.hardware.camera.autofocus\" />\n\n    <application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher\"\n        android:theme=\"@style/AppThemeHome\">\n        <activity android:name=\".ui.dashboard.CreateClima\"></activity>\n        <activity android:name=\".ui.Foro.main.Community.NewPost.PostView\" />\n        <activity android:name=\".ui.Foro.main.Community.NewPost.CreatePost.CreatePost\" />\n        <activity android:name=\".ui.Foro.main.Community.CommunityMain\" />\n        <activity android:name=\".ui.Foro.lets_start.EditCommunity\" />\n        <activity android:name=\".ui.list_machine.ModifyMachine\" />\n        <activity android:name=\".ui.Foro.main.ForoMain\" />\n        <activity android:name=\".ui.Foro.lets_start.AddCommunity\" />\n        <activity android:name=\".ui.Foro.lets_start.choose_community\" />\n        <activity android:name=\".ui.Foro.lets_start.welcome_forum\" />\n        <activity android:name=\".MainActivity\" />\n\n        <service android:name=\".ui.service.ServicioMqtt\" />\n        <service android:name=\".ui.service.ServicioNotificaciones\" />\n\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity\">\n            <intent-filter>\n                <action android:name=\"android.intent.action.SET_ALARM\" />\n                <action android:name=\"android.intent.action.MAIN\" />\n\n                <category android:name=\"android.intent.category.LAUNCHER\" />\n            </intent-filter>\n        </activity>\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\" />\n        <activity android:name=\".ui.profile.settings.HelpProfile\" />\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\" />\n        <activity android:name=\".ui.list_machine.AddMachine\" />\n        <activity android:name=\".ui.profile.settings.ModifyProfile\" />\n        <activity android:name=\".ui.logmail.RegisterActivity\" />\n        <activity android:name=\".ui.logmail.LoginActivity\" />\n        <activity android:name=\".ui.list_machine.CaptureAct\" />\n        <activity android:name=\".ui.login.LogActivity\" />\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\" />\n        <activity android:name=\".ui.LoadAnimations.LogprimeraActivity\" />\n        <activity android:name=\".ui.graphics.GraphicsActivity\" />\n        <activity android:name=\".ui.MachineControl.planta1\" />\n        <activity android:name=\".ui.notifications.NotificacionesActivity\" />\n        <activity android:name=\".ui.guiabotanica.GuiaActivity\" />\n        <activity android:name=\".ui.guiabotanica.PlantActivity\" />\n\n        <meta-data\n            android:name=\"com.google.android.geo.API_KEY\"\n            android:value=\"@string/google_maps_key\" />\n        <meta-data\n            android:name=\"com.facebook.sdk.ApplicationId\"\n            android:value=\"@string/facebook_app_id\"\n            tools:replace=\"android:value\" />\n        <meta-data\n            android:name=\"preloaded_fonts\"\n            android:resource=\"@array/preloaded_fonts\" />\n\n        <activity\n            android:name=\"com.theartofdev.edmodo.cropper.CropImageActivity\"\n            android:theme=\"@style/Base.Theme.AppCompat\" />\n    </application>\n\n</manifest>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/AndroidManifest.xml	(revision 6a46eaa504348e2e3bd04e08f565c03719a31f9d)
-+++ app/src/main/AndroidManifest.xml	(date 1611252890544)
-@@ -22,7 +22,8 @@
-         android:label="@string/app_name"
-         android:roundIcon="@mipmap/ic_launcher"
-         android:theme="@style/AppThemeHome">
--        <activity android:name=".ui.dashboard.CreateClima"></activity>
-+        <activity android:name=".ui.dashboard.EditarClima"></activity>
-+        <activity android:name=".ui.dashboard.CreateClima" />
-         <activity android:name=".ui.Foro.main.Community.NewPost.PostView" />
-         <activity android:name=".ui.Foro.main.Community.NewPost.CreatePost.CreatePost" />
-         <activity android:name=".ui.Foro.main.Community.CommunityMain" />
-Index: app/src/main/res/layout/bottom_sheet_create_clima.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\">\r\n    <Button\r\n        android:id=\"@+id/createNewClima\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"24dp\"\r\n        android:layout_marginTop=\"32dp\"\r\n        android:layout_marginEnd=\"24dp\"\r\n        android:background=\"@drawable/button_enter_machine\"\r\n        android:stateListAnimator=\"@null\"\r\n        android:text=\"Acceder a la máquina\"\r\n        android:textAllCaps=\"false\"\r\n        android:textColor=\"#FFFFFF\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.5\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <Button\r\n        android:id=\"@+id/createDefaultClima\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"24dp\"\r\n        android:layout_marginTop=\"16dp\"\r\n        android:layout_marginEnd=\"24dp\"\r\n        android:background=\"@drawable/button_action_machine\"\r\n        android:stateListAnimator=\"@null\"\r\n        android:text=\"Modificar máquina\"\r\n        android:textAllCaps=\"false\"\r\n        android:textColor=\"@color/colorPrimaryDashboard\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.5\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/createNewClima\" />\r\n\r\n    <Button\r\n        android:id=\"@+id/btn_cancelarCreateClima\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"24dp\"\r\n        android:layout_marginTop=\"16dp\"\r\n        android:layout_marginEnd=\"24dp\"\r\n        android:background=\"@drawable/button_action_machine\"\r\n        android:stateListAnimator=\"@null\"\r\n        android:text=\"Cancelar\"\r\n        android:textAllCaps=\"false\"\r\n        android:textColor=\"@color/colorPrimaryDashboard\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.5\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/createDefaultClima\" />\r\n</androidx.constraintlayout.widget.ConstraintLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/bottom_sheet_create_clima.xml	(revision 6a46eaa504348e2e3bd04e08f565c03719a31f9d)
-+++ app/src/main/res/layout/bottom_sheet_create_clima.xml	(date 1611250710601)
-@@ -1,8 +1,10 @@
- <?xml version="1.0" encoding="utf-8"?>
- <androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
-     android:layout_width="match_parent"
--    android:layout_height="match_parent"
-+    android:layout_height="wrap_content"
-+    android:background="@drawable/bottom_sheet_background"
-     xmlns:app="http://schemas.android.com/apk/res-auto">
-+
-     <Button
-         android:id="@+id/createNewClima"
-         android:layout_width="0dp"
-@@ -12,7 +14,7 @@
-         android:layout_marginEnd="24dp"
-         android:background="@drawable/button_enter_machine"
-         android:stateListAnimator="@null"
--        android:text="Acceder a la máquina"
-+        android:text="Crear nuevo clima"
-         android:textAllCaps="false"
-         android:textColor="#FFFFFF"
-         app:layout_constraintEnd_toEndOf="parent"
-@@ -29,7 +31,7 @@
-         android:layout_marginEnd="24dp"
-         android:background="@drawable/button_action_machine"
-         android:stateListAnimator="@null"
--        android:text="Modificar máquina"
-+        android:text="Crear apartir del clima por defecto"
-         android:textAllCaps="false"
-         android:textColor="@color/colorPrimaryDashboard"
-         app:layout_constraintEnd_toEndOf="parent"
-@@ -44,11 +46,13 @@
-         android:layout_marginStart="24dp"
-         android:layout_marginTop="16dp"
-         android:layout_marginEnd="24dp"
-+        android:layout_marginBottom="40dp"
-         android:background="@drawable/button_action_machine"
-         android:stateListAnimator="@null"
-         android:text="Cancelar"
-         android:textAllCaps="false"
-         android:textColor="@color/colorPrimaryDashboard"
-+        app:layout_constraintBottom_toBottomOf="parent"
-         app:layout_constraintEnd_toEndOf="parent"
-         app:layout_constraintHorizontal_bias="0.5"
-         app:layout_constraintStart_toStartOf="parent"
-Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/RvClimas/AdapterClimas.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.dashboard.RvClimas;\r\n\r\nimport android.content.Context;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.R;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.QueryDocumentSnapshot;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\nimport com.squareup.picasso.Picasso;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\n\r\nimport java.util.List;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\npublic class AdapterClimas extends RecyclerView.Adapter<AdapterClimas.ClimasHolder>  implements  View.OnClickListener,MqttCallback {\r\n\r\n    //Acceso a la maquina\r\n    public static MqttClient client = null;\r\n    private List<ClimaModel> climaModelList;\r\n    private Context context;\r\n    private FirebaseFirestore db;\r\n    private View.OnClickListener listener;\r\n    private FirebaseAuth firebaseAuth;\r\n    private String machineId;\r\n\r\n    public AdapterClimas(List<ClimaModel> climaModelList, Context context,String machineId) {\r\n        this.climaModelList = climaModelList;\r\n        this.context = context;\r\n        this.machineId=machineId;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public ClimasHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View v= LayoutInflater.from(parent.getContext())\r\n                .inflate(R.layout.static_rv_item,parent,false);\r\n        v.setOnClickListener(this);\r\n        return new ClimasHolder(v);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull final ClimasHolder holder, int position) {\r\n        db=FirebaseFirestore.getInstance();\r\n        final ClimaModel climaModel=climaModelList.get(position);\r\n\r\n        holder.textView.setText(climaModel.getName());\r\n        //String idMachine=climaModel.getMachineId();\r\n        String climaID=climaModel.getUid();\r\n        final String[] idRealMachine = {\"\"};\r\n\r\n        //recupera el id del documento en la coleccion Machine\r\n\r\n        db.collection(\"Machine\")\r\n                .whereEqualTo(\"description\",machineId)\r\n                .limit(1)\r\n                .get()\r\n                .addOnCompleteListener(new OnCompleteListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<QuerySnapshot> task) {\r\n                        if (task.isSuccessful()) {\r\n                            for (QueryDocumentSnapshot document : task.getResult()) {\r\n                                idRealMachine[0] =document.getId();\r\n                            }\r\n                            db.collection(\"Machine\").document(idRealMachine[0]).collection(\"Clima\")\r\n                                    .document(\"Activado\").get()\r\n                                    .addOnCompleteListener(new OnCompleteListener<DocumentSnapshot>() {\r\n                                        @Override\r\n                                        public void onComplete(@NonNull Task<DocumentSnapshot> task) {\r\n                                            if (task.isSuccessful()) {\r\n                                                DocumentSnapshot document = task.getResult();\r\n                                                if (document.exists()) {\r\n                                                    String climaActivated= document.getString(\"climaID\");\r\n                                                    if(climaModel.getUid().equals(climaActivated)){\r\n                                                        holder.linearLayout.setBackgroundResource(R.drawable.button_action_machine);\r\n                                                        setClimaTemperatura(machineId,climaModel.getTemperatura(),climaModel.getHumedad());\r\n                                                    }\r\n                                                } else {\r\n\r\n                                                }\r\n                                            } else {\r\n\r\n                                            }\r\n                                        }\r\n                                    });\r\n\r\n                        } else {\r\n\r\n                        }\r\n                    }\r\n                });\r\n\r\n\r\n        /*db.collection(\"Machine\")\r\n                .whereEqualTo(\"description\",machineId)\r\n                .limit(1)\r\n                .get()\r\n                .addOnCompleteListener(new OnCompleteListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<QuerySnapshot> task) {\r\n                        if (task.isSuccessful()) {\r\n                            String idRealMachine=\"\";\r\n                            for (QueryDocumentSnapshot document : task.getResult()) {\r\n                                idRealMachine=document.getId();\r\n                            }\r\n\r\n                            db.collection(\"Machine\").document(idRealMachine).collection(\"Clima\")\r\n                                    .document(\"Activado\").get()\r\n                                    .addOnCompleteListener(new OnCompleteListener<DocumentSnapshot>() {\r\n                                @Override\r\n                                public void onComplete(@NonNull Task<DocumentSnapshot> task) {\r\n                                    if (task.isSuccessful()) {\r\n                                        DocumentSnapshot document = task.getResult();\r\n                                        if (document.exists()) {\r\n                                            String idClima=document.getString(\"climaID\");\r\n                                            if(climaModel.getUid().equals(idClima)){\r\n                                                holder.linearLayout.setBackgroundResource(R.drawable.button_action_machine);\r\n                                            }\r\n\r\n\r\n                                        } else {\r\n\r\n                                        }\r\n                                    } else {\r\n\r\n                                    }\r\n                                }\r\n                            });\r\n                        } else {\r\n\r\n                        }\r\n                    }\r\n                });*/\r\n    }\r\n\r\n    private void getClimaIdActivated(String UidMachine){\r\n\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return climaModelList.size();\r\n    }\r\n\r\n    //onclick\r\n\r\n    public void setOnClickListener(View.OnClickListener listener) {\r\n        this.listener = listener;\r\n    }\r\n\r\n    @Override\r\n    public void onClick(View v) {\r\n        if(listener!=null){\r\n            listener.onClick(v);\r\n        }\r\n    }\r\n\r\n    //MQTT -> INICIO\r\n\r\n    public void setClimaTemperatura(String machine,String temperatura,String humedad){\r\n        String mensaje=machine+\"-5-\"+temperatura;\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"operaciones\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"operaciones\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(mensaje.getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"operaciones\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n        setClimaHumedad(machineId,humedad);\r\n    }\r\n    public void setClimaHumedad(String machine,String humedad){\r\n        String mensaje=machine+\"-4-\"+humedad;\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"operaciones\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"operaciones\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(mensaje.getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"operaciones\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n\r\n    }\r\n\r\n\r\n\r\n    //MQTT-> FIN\r\n\r\n    public static class ClimasHolder extends RecyclerView.ViewHolder{\r\n        protected TextView textView;\r\n        protected ImageView imageView;\r\n        protected LinearLayout linearLayout;\r\n        public ClimasHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            imageView=itemView.findViewById(R.id.image);\r\n            textView=itemView.findViewById(R.id.text);\r\n            linearLayout=itemView.findViewById(R.id.linearLayoutItem);\r\n        }\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/dashboard/RvClimas/AdapterClimas.java	(revision 6a46eaa504348e2e3bd04e08f565c03719a31f9d)
-+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/RvClimas/AdapterClimas.java	(date 1611254516426)
-@@ -180,7 +180,7 @@
-     //MQTT -> INICIO
- 
-     public void setClimaTemperatura(String machine,String temperatura,String humedad){
--        String mensaje=machine+"-5-"+temperatura;
-+        String mensaje="5-"+temperatura;
-         try {
-             client = new MqttClient(Mqtt.broker, Mqtt.clientId, new
-                     MemoryPersistence());
-@@ -201,8 +201,8 @@
-         //conexión con el broker Root1 = Lector de datos
-         //nos subscribimos a topic
-         try {
--            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "operaciones");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
--            client.subscribe(topicRoot + "operaciones", Mqtt.qos);
-+            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "operaciones-"+machine);//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
-+            client.subscribe(topicRoot + "operaciones-"+machine, Mqtt.qos);
-             client.setCallback((MqttCallback) this);
-         } catch (MqttException e) {
-             Log.e(Mqtt.TAG, "Error al suscribir.", e);
-@@ -212,14 +212,14 @@
-             MqttMessage message = new MqttMessage(mensaje.getBytes());
-             message.setQos(Mqtt.qos);
-             message.setRetained(false);
--            client.publish(topicRoot+"operaciones", message);
-+            client.publish(topicRoot+"operaciones-"+machine, message);
-         } catch (MqttException e) {
-             Log.e(Mqtt.TAG, "Error al publicar.", e);
-         }
-         setClimaHumedad(machineId,humedad);
-     }
-     public void setClimaHumedad(String machine,String humedad){
--        String mensaje=machine+"-4-"+humedad;
-+        String mensaje="4-"+humedad;
-         try {
-             client = new MqttClient(Mqtt.broker, Mqtt.clientId, new
-                     MemoryPersistence());
-@@ -240,8 +240,8 @@
-         //conexión con el broker Root1 = Lector de datos
-         //nos subscribimos a topic
-         try {
--            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "operaciones");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
--            client.subscribe(topicRoot + "operaciones", Mqtt.qos);
-+            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "operaciones-"+machine);//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
-+            client.subscribe(topicRoot + "operaciones-"+machine, Mqtt.qos);
-             client.setCallback((MqttCallback) this);
-         } catch (MqttException e) {
-             Log.e(Mqtt.TAG, "Error al suscribir.", e);
-@@ -251,7 +251,7 @@
-             MqttMessage message = new MqttMessage(mensaje.getBytes());
-             message.setQos(Mqtt.qos);
-             message.setRetained(false);
--            client.publish(topicRoot+"operaciones", message);
-+            client.publish(topicRoot+"operaciones-"+machine, message);
-         } catch (MqttException e) {
-             Log.e(Mqtt.TAG, "Error al publicar.", e);
-         }
-Index: app/src/main/java/com/example/infinitycrop/ui/control_panel/Control_panelFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.control_panel;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.constraintlayout.widget.ConstraintLayout;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.Foro.lets_start.welcome_forum;\r\nimport com.example.infinitycrop.ui.graphics.GraphicsActivity;\r\nimport com.example.infinitycrop.ui.guiabotanica.GuiaActivity;\r\nimport com.example.infinitycrop.ui.notifications.NotificacionesActivity;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link Control_panelFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class Control_panelFragment extends Fragment {\r\n\r\n    private String uid;\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n    private ConstraintLayout btn_forum;\r\n    private ConstraintLayout btn_grafics;\r\n    private ConstraintLayout btn_notificaciones;\r\n    private ConstraintLayout btn_guia;\r\n\r\n    public Control_panelFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment control_panel.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static Control_panelFragment newInstance(String param1, String param2) {\r\n        Control_panelFragment fragment = new Control_panelFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_control_panel, container, false);\r\n        MainActivity myActivity = (MainActivity)getActivity();\r\n        uid=myActivity.getMachineUID();\r\n\r\n        //buttons\r\n        btn_forum=v.findViewById(R.id.btn_forum);\r\n\r\n        //onClick\r\n        btn_forum.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), welcome_forum.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n\r\n\r\n        //buttons\r\n        btn_grafics=v.findViewById(R.id.btn_graficas);\r\n\r\n        //onClick\r\n        btn_grafics.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), GraphicsActivity.class);\r\n                intent.putExtra(\"idMachine\", uid);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n\r\n        //buttons\r\n        btn_notificaciones=v.findViewById(R.id.btn_notificaciones);\r\n\r\n        //onClick\r\n        btn_notificaciones.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), NotificacionesActivity.class);\r\n                intent.putExtra(\"idMachine\", uid);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n        //buttons\r\n        btn_guia=v.findViewById(R.id.btn_guia_botanica);\r\n\r\n        //onClick\r\n        btn_guia.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), GuiaActivity.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n        return v;\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/control_panel/Control_panelFragment.java	(revision 6a46eaa504348e2e3bd04e08f565c03719a31f9d)
-+++ app/src/main/java/com/example/infinitycrop/ui/control_panel/Control_panelFragment.java	(date 1611255085673)
-@@ -3,6 +3,7 @@
- import android.content.Intent;
- import android.os.Bundle;
- 
-+import androidx.annotation.NonNull;
- import androidx.constraintlayout.widget.ConstraintLayout;
- import androidx.fragment.app.Fragment;
- 
-@@ -14,9 +15,15 @@
- import com.example.infinitycrop.MainActivity;
- import com.example.infinitycrop.R;
- import com.example.infinitycrop.ui.Foro.lets_start.welcome_forum;
-+import com.example.infinitycrop.ui.Foro.main.ForoMain;
- import com.example.infinitycrop.ui.graphics.GraphicsActivity;
- import com.example.infinitycrop.ui.guiabotanica.GuiaActivity;
- import com.example.infinitycrop.ui.notifications.NotificacionesActivity;
-+import com.google.android.gms.tasks.OnCompleteListener;
-+import com.google.android.gms.tasks.Task;
-+import com.google.firebase.auth.FirebaseAuth;
-+import com.google.firebase.firestore.DocumentSnapshot;
-+import com.google.firebase.firestore.FirebaseFirestore;
- 
- /**
-  * A simple {@link Fragment} subclass.
-@@ -71,6 +78,9 @@
-         }
-     }
- 
-+    private FirebaseFirestore db;
-+    private FirebaseAuth firebaseAuth;
-+    private String idAuth;
-     @Override
-     public View onCreateView(LayoutInflater inflater, ViewGroup container,
-                              Bundle savedInstanceState) {
-@@ -79,6 +89,9 @@
-         MainActivity myActivity = (MainActivity)getActivity();
-         uid=myActivity.getMachineUID();
- 
-+        db=FirebaseFirestore.getInstance();
-+        firebaseAuth= FirebaseAuth.getInstance();
-+        idAuth=firebaseAuth.getUid();
-         //buttons
-         btn_forum=v.findViewById(R.id.btn_forum);
- 
-@@ -86,8 +99,24 @@
-         btn_forum.setOnClickListener(new View.OnClickListener() {
-             @Override
-             public void onClick(View v) {
--                Intent intent = new Intent(getActivity(), welcome_forum.class);
--                startActivity(intent);
-+                db.collection("Foro user").document(idAuth)
-+                        .get().addOnCompleteListener(new OnCompleteListener<DocumentSnapshot>() {
-+                    @Override
-+                    public void onComplete(@NonNull Task<DocumentSnapshot> task) {
-+                        if (task.isSuccessful()) {
-+                            DocumentSnapshot document = task.getResult();
-+                            if (document.exists()) {
-+                                Intent intent = new Intent(getActivity(), ForoMain.class);
-+                                startActivity(intent);
-+                            } else {
-+                                Intent intent = new Intent(getActivity(), welcome_forum.class);
-+                                startActivity(intent);
-+                            }
-+                        } else {
-+
-+                        }
-+                    }
-+                });
-             }
-         });
- 
-Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.Manifest;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.location.Location;\r\nimport android.location.LocationListener;\r\nimport android.location.LocationManager;\r\nimport android.os.AsyncTask;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.os.Handler;\r\nimport android.os.StrictMode;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.Foro.lets_start.rv_community.CommunityModel;\r\nimport com.example.infinitycrop.ui.Foro.main.Home.RVs.RVFollowed.AdapterFollowedCmty;\r\nimport com.example.infinitycrop.ui.MachineControl.planta1;\r\nimport com.example.infinitycrop.ui.dashboard.RvClimas.AdapterClimas;\r\nimport com.example.infinitycrop.ui.dashboard.RvClimas.ClimaModel;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvModel;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.android.material.bottomsheet.BottomSheetDialog;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.google.firebase.firestore.Query;\r\nimport com.google.firebase.firestore.QueryDocumentSnapshot;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\nimport com.loopj.android.http.AsyncHttpClient;\r\nimport com.loopj.android.http.JsonHttpResponseHandler;\r\nimport com.loopj.android.http.RequestParams;\r\nimport com.squareup.okhttp.Callback;\r\nimport com.squareup.okhttp.OkHttpClient;\r\nimport com.squareup.okhttp.Request;\r\nimport com.squareup.okhttp.Response;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.io.InputStreamReader;\r\nimport java.net.HttpURLConnection;\r\nimport java.net.MalformedURLException;\r\nimport java.net.URL;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.concurrent.ExecutionException;\r\n\r\nimport cz.msebera.android.httpclient.Header;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link DashboardFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class DashboardFragment extends Fragment implements MqttCallback {\r\n\r\n    private RecyclerView recyclerView;\r\n    //private StaticRvAdapter staticRvAdapter;\r\n    private AdapterClimas adapterClimas;\r\n    private TabLayout tabLayout;\r\n    private ViewPager viewPager;\r\n    //Weather\r\n\r\n    final long MIN_TIME = 200;\r\n    final float MIN_DISTANCE = 200;\r\n    final int REQUEST_CODE = 101;\r\n    final String APP_ID = \"2599fe29f309cebdb21dd7dcf235662a\";\r\n    String Location_Provider = LocationManager.GPS_PROVIDER;\r\n    final String WEATHER_URL = \"https://api.openweathermap.org/data/2.5/weather\";\r\n\r\n    TextView NameofCity, weatherState, Temperature;\r\n    ImageView mweatherIcon;\r\n    private String idUser;\r\n    LocationManager mLocationManager;\r\n    LocationListener mLocationListner;\r\n    private List<ClimaModel> climaModelList=new ArrayList<>();\r\n    private FirebaseFirestore db;\r\n    private FirebaseAuth mAuth;\r\n    //Acceso a la maquina\r\n    public static MqttClient client = null;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public DashboardFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment DashboardFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static DashboardFragment newInstance(String param1, String param2) {\r\n        DashboardFragment fragment = new DashboardFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n    private String uidActualMachine;\r\n    private TextView btn_createCima;\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        final View v = inflater.inflate(R.layout.fragment_dashboard, container, false);\r\n        //FIREBASE\r\n\r\n        MainActivity myActivity = (MainActivity) getActivity();\r\n        uidActualMachine=myActivity.getMachineUID();\r\n        //Recojo los datos del usuario\r\n        mAuth = FirebaseAuth.getInstance();\r\n        final FirebaseUser usuario = mAuth.getCurrentUser();\r\n        final FirebaseFirestore fStore = FirebaseFirestore.getInstance();\r\n        idUser = mAuth.getUid();\r\n        db=FirebaseFirestore.getInstance();\r\n        btn_createCima=v.findViewById(R.id.btn_anyadir_clima);\r\n        //rv\r\n        recyclerView = v.findViewById(R.id.rv_1);\r\n        initRvClimas();\r\n        getMyClimas();\r\n\r\n        btn_createCima.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                final BottomSheetDialog bottomSheetDialog=new BottomSheetDialog(getContext(),R.style.BottomSheetDialogTheme);\r\n                bottomSheetDialog.setContentView(R.layout.bottom_sheet_create_clima);\r\n\r\n                Button create_new=bottomSheetDialog.findViewById(R.id.createNewClima);\r\n                Button create_plantilla=bottomSheetDialog.findViewById(R.id.createDefaultClima);\r\n                Button backClimna=bottomSheetDialog.findViewById(R.id.btn_cancelarCreateClima);\r\n\r\n\r\n                create_new.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n\r\n                    }\r\n                });\r\n\r\n                create_plantilla.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n\r\n                    }\r\n                });\r\n\r\n\r\n                backClimna.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        bottomSheetDialog.dismiss();\r\n                    }\r\n                });\r\n\r\n\r\n\r\n                bottomSheetDialog.show();\r\n            }\r\n        });\r\n\r\n\r\n        //guardo el nombre en un textView\r\n        /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);\r\n        String res=\"Hola\"+\" \"+usuario.getDisplayName();\r\n        nombre.setText(res);\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(usuario.getDisplayName() == null){\r\n                    String res1=\"Hola\"+\" \"+snapshot.getString(\"username\");\r\n                    nombre.setText(res1);\r\n                }\r\n            }\r\n        });*/\r\n\r\n        //switch methods\r\n /*     Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });*/\r\n\r\n\r\n        //\r\n\r\n\r\n        //RECYCLER VIEW\r\n        /*ArrayList<StaticRvModel> item = new ArrayList<>();\r\n        item.add(new StaticRvModel(R.drawable.icons_sun, \"Soleado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_night_mode, \"Nocturno\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_energy_saving, \"Ahorro\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_power_off, \"Apagado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_custom, \"Custom\"));*/\r\n\r\n        final TextView medidasT = v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidasH = v.findViewById(R.id.medidaHumedadGeneral);\r\n        /*final TextView medidasS = v.findViewById(R.id.medidaSalinidadGeneral);*/\r\n        /*final TextView medidasL = v.findViewById(R.id.medidasLuminosidadGeneral);*/\r\n\r\n\r\n\r\n\r\n        //TABS\r\n        tabLayout = v.findViewById(R.id.tab_layout);\r\n        viewPager = v.findViewById(R.id.view_pager);\r\n        //Array\r\n        ArrayList<String> arrayList = new ArrayList<>();\r\n\r\n        //set up with viewpager\r\n        tabLayout.setupWithViewPager(viewPager);\r\n\r\n        TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());\r\n        //Pestañas\r\n        adapter.addFrag(new GeneralFragment(), \"General\");\r\n        adapter.addFrag(new Planta1Fragment(), \"Planta 1\");\r\n        adapter.addFrag(new Planta2Fragment(), \"Planta 2\");\r\n\r\n        viewPager.setAdapter(adapter);\r\n\r\n        /*((MainActivity)getActivity()).ola();*/\r\n     /*   //LEER DATOS FIREBASE\r\n        //Temperatura\r\n       DocumentReference documentTemperatura=fStore.collection(\"SensoresA-T\").document(\"Temperatura\");\r\n        documentTemperatura.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediTemp=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasT.setText(resMediTemp);\r\n            }\r\n        });\r\n        //Humedad\r\n        DocumentReference documentHumedad=fStore.collection(\"SensoresA-T\").document(\"Humedad\");\r\n        documentHumedad.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediHum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasH.setText(resMediHum);\r\n            }\r\n        });\r\n        //Iluminación\r\n        DocumentReference documentIluminación=fStore.collection(\"SensoresA-T\").document(\"Iluminación\");\r\n        documentIluminación.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIlum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasL.setText(resMediIlum);\r\n            }\r\n        });\r\n        //Temperatura ambiente\r\n        DocumentReference documentambiente=fStore.collection(\"SensoresA-T\").document(\"Temperatura ambiente\");\r\n        documentambiente.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIAmb=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasS.setText(resMediIAmb);\r\n            }\r\n        });\r\n\r\n      */\r\n        //Weather App\r\n        weatherState =(TextView) v.findViewById(R.id.weatherCondition);\r\n        Temperature = (TextView)v.findViewById(R.id.temperature);\r\n        mweatherIcon =(ImageView) v.findViewById(R.id.weatherIcon);\r\n        NameofCity = (TextView)v.findViewById(R.id.cityName);\r\n\r\n        return v;\r\n    }\r\n    @Override\r\n    public void onResume() {\r\n        super.onResume();\r\n        getWeatherForCurrentLocation();\r\n    }\r\n    private void getWeatherForCurrentLocation() {\r\n        mLocationManager = (LocationManager) getContext().getSystemService(Context.LOCATION_SERVICE);\r\n        mLocationListner = new LocationListener() {\r\n            @Override\r\n            public void onLocationChanged(Location location) {\r\n                String Latitude = String.valueOf(location.getLatitude());\r\n                String Longitude = String.valueOf(location.getLongitude());\r\n                RequestParams params = new RequestParams();\r\n                params.put(\"lat\",Latitude);\r\n                params.put(\"lon\",Longitude);\r\n                params.put(\"appid\",APP_ID);\r\n                letsDoSomeWorking(params);\r\n\r\n            }\r\n            @Override\r\n            public void onStatusChanged(String provider, int status, Bundle extras) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onProviderEnabled(String provider) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onProviderDisabled(String provider) {\r\n\r\n            }\r\n        };\r\n        if (ActivityCompat.checkSelfPermission(getContext(), Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            // TODO: Consider calling\r\n            //    ActivityCompat#requestPermissions\r\n            // here to request the missing permissions, and then overriding\r\n            //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\r\n            //                                          int[] grantResults)\r\n            // to handle the case where the user grants the permission. See the documentation\r\n            // for ActivityCompat#requestPermissions for more details.\r\n            ActivityCompat.requestPermissions(getActivity(),new String[]{Manifest.permission.ACCESS_FINE_LOCATION},REQUEST_CODE);\r\n            return;\r\n        }\r\n        mLocationManager.requestLocationUpdates(Location_Provider, MIN_TIME, MIN_DISTANCE, mLocationListner);\r\n    }\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        if (requestCode == REQUEST_CODE) {\r\n            if (grantResults.length > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                Toast.makeText(getContext(), \"Localizacion obtenida\", Toast.LENGTH_SHORT).show();\r\n                getWeatherForCurrentLocation();\r\n            } else {\r\n                Toast.makeText(getContext(), \"Localizaacion no obtenida\", Toast.LENGTH_SHORT).show();\r\n            }\r\n\r\n        }\r\n    }\r\n    private void letsDoSomeWorking(RequestParams params){\r\n        AsyncHttpClient client =new AsyncHttpClient();\r\n        client.get(WEATHER_URL,params,new JsonHttpResponseHandler(){\r\n            @Override\r\n            public void onSuccess(int statusCode, Header[] headers, JSONObject response) {\r\n                /*Toast.makeText(getContext(), \"Data obteninda\", Toast.LENGTH_SHORT).show();*/\r\n                weatherData weatherD= weatherData.fromJson(response);\r\n                updateUI(weatherD);\r\n                //super.onSuccess(statusCode, headers, response);\r\n            }\r\n            @Override\r\n            public void onFailure(int statusCode, Header[] headers, Throwable throwable, JSONObject errorResponse) {\r\n                //super.onFailure(statusCode, headers, throwable, errorResponse);\r\n                Toast.makeText(getContext(), \"Data no obteninda\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n    }\r\n    private void updateUI(weatherData weather){\r\n        Temperature.setText(weather.getmTemperature());\r\n        NameofCity.setText(weather.getMcity());\r\n        weatherState.setText(weather.getmWeatherType());\r\n        int resourceID =getResources().getIdentifier(weather.getMicon(),\"drawable\",getActivity().getPackageName());\r\n        mweatherIcon.setImageResource(resourceID);\r\n\r\n\r\n    }\r\n    @Override\r\n    public void onPause() {\r\n        super.onPause();\r\n        if(mLocationManager!=null){\r\n            mLocationManager.removeUpdates(mLocationListner);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n\r\n\r\n\r\n\r\n    private void setText(final TextView text, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                text.setText(value);\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n\r\n    //App location\r\n   /* private void getLocation() {\r\n\r\n        //Check Permissions again\r\n\r\n        /*if (ActivityCompat.checkSelfPermission(\r\n                getContext(),Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(\r\n                getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n        } else {\r\n\r\n            Location LocationNetwork=locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);\r\n             if (LocationNetwork !=null)\r\n            {\r\n                double lat=LocationNetwork.getLatitude();\r\n                double longi=LocationNetwork.getLongitude();\r\n\r\n                latitude=String.valueOf(lat);\r\n                longitude=String.valueOf(longi);\r\n               /* loc_func(LocationNetwork);*/\r\n              /*  api_key(String.valueOf(view_city.getText()));\r\n                showLocationTxt.setText(\"Your Location:\"+\"\\n\"+\"Latitude= \"+latitude+\"\\n\"+\"Longitude= \"+longitude);\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private void OnGPS() {\r\n\r\n        final AlertDialog.Builder builder= new AlertDialog.Builder(getContext());\r\n\r\n        builder.setMessage(\"Enable GPS\").setCancelable(false).setPositiveButton(\"YES\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS));\r\n                getLocation();\r\n            }\r\n        }).setNegativeButton(\"NO\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                dialog.cancel();\r\n            }\r\n        });\r\n        final AlertDialog alertDialog=builder.create();\r\n        alertDialog.show();\r\n    }\r\n\r\n    private void loc_func(Location location){\r\n        try {\r\n            Geocoder geocoder=new Geocoder(getContext());\r\n            List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);\r\n            /*String address = addresses.get(0).getSubLocality();*/\r\n           /* String cityName = addresses.get(0).getLocality();\r\n            String stateName = addresses.get(0).getAdminArea();\r\n            String country = addresses.get(0).getCountryName();\r\n            //txt_paddress.setText(address);\r\n            view_city.setText(cityName);\r\n            view_country.setText(country);\r\n            //txt_state.setText(stateName);*/\r\n\r\n       /* } catch (IOException e) {\r\n            e.printStackTrace();\r\n            Toast.makeText(getContext(), \"Error:\"+e, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void inicioGPS(){\r\n\r\n\r\n        //Check gps is enable or not\r\n\r\n        if (!locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))\r\n        {\r\n            //Write Function To enable gps\r\n\r\n            OnGPS();\r\n        }\r\n        else\r\n        {\r\n            //GPS is already On then\r\n\r\n            /*getLocation();*/\r\n /*       }\r\n    }*/\r\n\r\n    private void initRvClimas(){\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(), LinearLayoutManager.HORIZONTAL, false));\r\n        //recyclerView.setAdapter(staticRvAdapter);\r\n    }\r\n    private void getMyClimas(){\r\n\r\n        db.collection(\"Climas\").document(\"Default\").get()\r\n                .addOnCompleteListener(new OnCompleteListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<DocumentSnapshot> task) {\r\n                        if (task.isSuccessful()) {\r\n                            DocumentSnapshot document = task.getResult();\r\n                            if (document.exists()) {\r\n                                String name=document.getString(\"name\");\r\n                                String creator=document.getString(\"creator\");\r\n                                String temperatura=document.getString(\"temperatura\");\r\n                                String humedad=document.getString(\"humedad\");\r\n                                String machine=document.getString(\"machineId\");\r\n                                boolean defecto=document.getBoolean(\"defecto\");\r\n                                String uid=document.getId();\r\n                                final ClimaModel DefaultClima=new ClimaModel(temperatura,humedad,name,creator,uid,uidActualMachine,defecto);\r\n\r\n                                db.collection(\"Climas\")\r\n                                        .whereEqualTo(\"creator\",idUser)\r\n                                        .addSnapshotListener(new EventListener<QuerySnapshot>() {\r\n                                            @Override\r\n                                            public void onEvent(@Nullable QuerySnapshot value,\r\n                                                                @Nullable FirebaseFirestoreException e) {\r\n                                                if (e != null) {\r\n                                                    return;\r\n                                                }\r\n                                                if(value!=null){\r\n                                                    climaModelList.clear();\r\n                                                    climaModelList.add(DefaultClima);\r\n                                                    for (QueryDocumentSnapshot doc : value) {\r\n                                                        String name=doc.getString(\"name\");\r\n                                                        String creator=doc.getString(\"creator\");\r\n                                                        String temperatura=doc.getString(\"temperatura\");\r\n                                                        String humedad=doc.getString(\"humedad\");\r\n                                                        String machine=doc.getString(\"machineId\");\r\n                                                        boolean defecto=doc.getBoolean(\"defecto\");\r\n                                                        String uid=doc.getId();\r\n\r\n                                                        ClimaModel climaModel=new ClimaModel(temperatura,humedad,name,creator,uid,uidActualMachine,defecto);\r\n                                                        climaModelList.add(climaModel);\r\n                                                    }\r\n                                                    adapterClimas= new AdapterClimas(climaModelList,getContext(),uidActualMachine);\r\n                                                    onclickClima();\r\n                                                    recyclerView.setAdapter(adapterClimas);\r\n                                                }\r\n                                            }\r\n                                        });\r\n\r\n                            }\r\n                        } else {\r\n\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n\r\n    private void onclickClima(){\r\n        adapterClimas.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                int position=recyclerView.getChildLayoutPosition(v);\r\n                ClimaModel climaModel=climaModelList.get(position);\r\n                bottomSheetClima(climaModel,position);\r\n            }\r\n        });\r\n    }\r\n\r\n    private String climaActivated;\r\n\r\n    private void bottomSheetClima(final ClimaModel climaModel, final int position){\r\n        final String uiDocument=climaModel.getUid();\r\n        final BottomSheetDialog bottomSheetDialog=new BottomSheetDialog(getContext(),R.style.BottomSheetDialogTheme);\r\n        bottomSheetDialog.setContentView(R.layout.bottom_sheet_climas);\r\n        final AlertDialog.Builder builder = new AlertDialog.Builder(getContext());\r\n\r\n        TextView name=bottomSheetDialog.findViewById(R.id.name_clima);\r\n        TextView temp=bottomSheetDialog.findViewById(R.id.umbral_temperatura_clima);\r\n        TextView hum=bottomSheetDialog.findViewById(R.id.umbral_humedad_clima);\r\n        final Button activar=bottomSheetDialog.findViewById(R.id.btn_activatClima);\r\n        Button editar=bottomSheetDialog.findViewById(R.id.btn_editar_clima);\r\n        Button eliminar=bottomSheetDialog.findViewById(R.id.btn_eliminar_clima);\r\n        Button cancelar=bottomSheetDialog.findViewById(R.id.btn_cancelar_clima);\r\n\r\n        name.setText(climaModel.getName());\r\n        temp.setText(climaModel.getTemperatura());\r\n        hum.setText(climaModel.getHumedad());\r\n        //onClick\r\n\r\n\r\n        final String[] idRealMachine = {\"\"};\r\n        db.collection(\"Machine\")\r\n                .whereEqualTo(\"description\",uidActualMachine)\r\n                .limit(1)\r\n                .get()\r\n                .addOnCompleteListener(new OnCompleteListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<QuerySnapshot> task) {\r\n                        if (task.isSuccessful()) {\r\n                            for (QueryDocumentSnapshot document : task.getResult()) {\r\n                                idRealMachine[0] =document.getId();\r\n                            }\r\n                            db.collection(\"Machine\").document(idRealMachine[0]).collection(\"Clima\")\r\n                                    .document(\"Activado\").get()\r\n                                    .addOnCompleteListener(new OnCompleteListener<DocumentSnapshot>() {\r\n                                        @Override\r\n                                        public void onComplete(@NonNull Task<DocumentSnapshot> task) {\r\n                                            if (task.isSuccessful()) {\r\n                                                DocumentSnapshot document = task.getResult();\r\n                                                if (document.exists()) {\r\n                                                    climaActivated= document.getString(\"climaID\");\r\n                                                    if(climaModel.getUid().equals(climaActivated)){\r\n                                                        activar.setText(\"Desactivar clima\");\r\n                                                        activar.setBackgroundResource(R.drawable.button_unfollow);\r\n                                                        activar.setTextColor(getResources().getColor(R.color.black));\r\n                                                    }else{\r\n                                                        activar.setText(\"Activar clima\");\r\n                                                        activar.setBackgroundResource(R.drawable.button_enter_machine);\r\n                                                        activar.setTextColor(getResources().getColor(R.color.white));\r\n                                                    }\r\n                                                } else {\r\n\r\n                                                }\r\n                                            } else {\r\n\r\n                                            }\r\n                                        }\r\n                                    });\r\n\r\n                        } else {\r\n\r\n                        }\r\n                    }\r\n                });\r\n\r\n        activar.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                if(activar.getText().equals(\"Desactivar clima\")){\r\n                    if(climaModel.isDefecto()){\r\n                        Toast.makeText(getContext(),\"Tienes que tener activado al menos un clima\", Toast.LENGTH_LONG).show();\r\n                    }else{\r\n                        db.collection(\"Machine\").document(idRealMachine[0]).collection(\"Clima\").document(\"Activado\").update(\"climaID\",\"Default\");\r\n                    }\r\n                }else if(activar.getText().equals(\"Activar clima\")){\r\n                    db.collection(\"Machine\").document(idRealMachine[0]).collection(\"Clima\").document(\"Activado\").update(\"climaID\",climaModel.getUid());\r\n                }\r\n                getMyClimas();\r\n                bottomSheetDialog.dismiss();\r\n\r\n            }\r\n        });\r\n\r\n        if(climaModel.isDefecto()){\r\n            editar.setVisibility(View.GONE);\r\n            eliminar.setVisibility(View.GONE);\r\n            cancelar.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    bottomSheetDialog.dismiss();\r\n                }\r\n            });\r\n        }else{\r\n            editar.setVisibility(View.VISIBLE);\r\n            eliminar.setVisibility(View.VISIBLE);\r\n            editar.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    //Intent tiwh extra to edit clima\r\n                }\r\n            });\r\n            eliminar.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    builder.setMessage(\"¿Seguro que quieres eliminar este clima?\");\r\n                    builder.setTitle(\"Eliminar clima\");\r\n                    builder.setPositiveButton(\"Eliminar\", new DialogInterface.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(DialogInterface dialog, int which) {\r\n                            if(climaModel.getUid().equals(climaActivated)){\r\n                                db.collection(\"Machine\").document(idRealMachine[0]).collection(\"Clima\").document(\"Activado\").update(\"climaID\",\"Default\");\r\n                                db.collection(\"Climas\").document(climaModel.getUid()).delete();\r\n                            }else{\r\n                                db.collection(\"Climas\").document(climaModel.getUid()).delete();\r\n                            }\r\n\r\n                            bottomSheetDialog.dismiss();\r\n                            dialog.cancel();\r\n                        }\r\n                    }).setNegativeButton(\"Cancelar\", new DialogInterface.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(DialogInterface dialog, int which) {\r\n                            dialog.cancel();\r\n                        }\r\n                    });\r\n                    AlertDialog dialog = builder.create();\r\n                    dialog.show();\r\n                }\r\n            });\r\n            cancelar.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    bottomSheetDialog.dismiss();\r\n                }\r\n            });\r\n        }\r\n        bottomSheetDialog.show();\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(revision 6a46eaa504348e2e3bd04e08f565c03719a31f9d)
-+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(date 1611253775125)
-@@ -34,7 +34,9 @@
- import com.example.comun.Mqtt;
- import com.example.infinitycrop.MainActivity;
- import com.example.infinitycrop.R;
-+import com.example.infinitycrop.ui.Foro.lets_start.EditCommunity;
- import com.example.infinitycrop.ui.Foro.lets_start.rv_community.CommunityModel;
-+import com.example.infinitycrop.ui.Foro.main.Community.NewPost.CreatePost.CreatePost;
- import com.example.infinitycrop.ui.Foro.main.Home.RVs.RVFollowed.AdapterFollowedCmty;
- import com.example.infinitycrop.ui.MachineControl.planta1;
- import com.example.infinitycrop.ui.dashboard.RvClimas.AdapterClimas;
-@@ -194,14 +196,20 @@
-                 create_new.setOnClickListener(new View.OnClickListener() {
-                     @Override
-                     public void onClick(View v) {
--
-+                        Intent intent = new Intent(getContext(), CreateClima.class);
-+                        intent.putExtra("modo", "new");
-+                        startActivity(intent);
-+                        bottomSheetDialog.dismiss();
-                     }
-                 });
- 
-                 create_plantilla.setOnClickListener(new View.OnClickListener() {
-                     @Override
-                     public void onClick(View v) {
--
-+                        Intent intent = new Intent(getContext(), CreateClima.class);
-+                        intent.putExtra("modo", "default");
-+                        startActivity(intent);
-+                        bottomSheetDialog.dismiss();
-                     }
-                 });
- 
-@@ -794,6 +802,10 @@
-                 @Override
-                 public void onClick(View v) {
-                     //Intent tiwh extra to edit clima
-+                    Intent intent = new Intent(getContext(), EditarClima.class);
-+                    intent.putExtra("id", climaModel.getUid());
-+                    startActivity(intent);
-+                    bottomSheetDialog.dismiss();
-                 }
-             });
-             eliminar.setOnClickListener(new View.OnClickListener() {
-Index: app/src/main/res/layout/activity_create_clima.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.dashboard.CreateClima\">\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_create_clima.xml	(revision 6a46eaa504348e2e3bd04e08f565c03719a31f9d)
-+++ app/src/main/res/layout/activity_create_clima.xml	(date 1611253154797)
-@@ -1,9 +1,112 @@
- <?xml version="1.0" encoding="utf-8"?>
--<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
-+<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
-     xmlns:app="http://schemas.android.com/apk/res-auto"
-     xmlns:tools="http://schemas.android.com/tools"
-     android:layout_width="match_parent"
-+    android:background="#EFE9E9"
-     android:layout_height="match_parent"
-     tools:context=".ui.dashboard.CreateClima">
- 
--</androidx.constraintlayout.widget.ConstraintLayout>
-\ No newline at end of file
-+    <androidx.constraintlayout.widget.ConstraintLayout
-+        android:layout_width="match_parent"
-+        android:layout_height="wrap_content">
-+
-+
-+        <TextView
-+            android:id="@+id/textView37"
-+            android:layout_width="wrap_content"
-+            android:layout_height="wrap_content"
-+            android:layout_marginTop="20dp"
-+            android:layout_marginBottom="500dp"
-+            android:text="Crear Clima"
-+            android:textColor="@color/black"
-+            android:textSize="22sp"
-+            android:textStyle="bold"
-+            app:layout_constraintBottom_toBottomOf="parent"
-+            app:layout_constraintEnd_toEndOf="parent"
-+            app:layout_constraintStart_toStartOf="parent"
-+            app:layout_constraintTop_toTopOf="parent" />
-+
-+        <com.google.android.material.textfield.TextInputLayout
-+            android:id="@+id/textInputLayout2"
-+            android:layout_width="match_parent"
-+            android:layout_height="wrap_content"
-+            android:layout_marginStart="20dp"
-+            android:layout_marginTop="50dp"
-+            android:layout_marginEnd="20dp"
-+            app:layout_constraintEnd_toEndOf="parent"
-+            app:layout_constraintStart_toStartOf="parent"
-+            app:layout_constraintTop_toBottomOf="@+id/textView37">
-+
-+            <com.google.android.material.textfield.TextInputEditText
-+                android:id="@+id/name_climaCreateClima"
-+                android:layout_width="match_parent"
-+                android:layout_height="wrap_content"
-+                android:hint="Nombre del clima" />
-+        </com.google.android.material.textfield.TextInputLayout>
-+
-+        <TextView
-+            android:id="@+id/textView38"
-+            android:layout_width="0dp"
-+            android:layout_height="wrap_content"
-+            android:layout_marginStart="20dp"
-+            android:layout_marginTop="29dp"
-+            android:text="Definir umbrales >"
-+            app:layout_constraintEnd_toEndOf="parent"
-+            app:layout_constraintStart_toStartOf="parent"
-+            app:layout_constraintTop_toBottomOf="@+id/textInputLayout2" />
-+
-+        <EditText
-+            android:id="@+id/temperaturaCreateClima"
-+            android:layout_width="0dp"
-+            android:layout_height="wrap_content"
-+            android:layout_marginStart="20dp"
-+            android:layout_marginTop="8dp"
-+            android:layout_marginEnd="8dp"
-+            android:ems="10"
-+            android:hint="Temperatura"
-+            android:inputType="numberDecimal"
-+            app:layout_constraintEnd_toStartOf="@+id/humedadCreateClima"
-+            app:layout_constraintStart_toStartOf="parent"
-+            app:layout_constraintTop_toBottomOf="@+id/textView38" />
-+
-+        <EditText
-+            android:id="@+id/humedadCreateClima"
-+            android:layout_width="0dp"
-+            android:layout_height="wrap_content"
-+            android:layout_marginEnd="20dp"
-+            android:ems="10"
-+            android:hint="Humedad"
-+            android:inputType="numberDecimal"
-+            app:layout_constraintEnd_toEndOf="parent"
-+            app:layout_constraintStart_toEndOf="@+id/temperaturaCreateClima"
-+            app:layout_constraintTop_toTopOf="@+id/temperaturaCreateClima" />
-+
-+        <Button
-+            android:id="@+id/btn_cancelar_crearClima"
-+            android:layout_width="wrap_content"
-+            android:layout_height="wrap_content"
-+            android:layout_marginStart="20dp"
-+            android:layout_marginTop="20dp"
-+            android:background="@drawable/button_action_machine"
-+            android:padding="10dp"
-+            android:text="@string/posts_text11"
-+            android:textColor="@color/colorPrimaryDashboard"
-+            app:layout_constraintStart_toStartOf="parent"
-+            app:layout_constraintTop_toBottomOf="@+id/temperaturaCreateClima" />
-+
-+        <Button
-+            android:id="@+id/btn_createClima_act"
-+            android:layout_width="wrap_content"
-+            android:layout_height="wrap_content"
-+            android:layout_marginTop="20dp"
-+            android:layout_marginEnd="20dp"
-+            android:background="@drawable/button_enter_machine"
-+            android:padding="10dp"
-+            android:text="Crear clima"
-+            android:textColor="@color/white"
-+            app:layout_constraintEnd_toEndOf="parent"
-+            app:layout_constraintTop_toBottomOf="@+id/humedadCreateClima" />
-+    </androidx.constraintlayout.widget.ConstraintLayout>
-+
-+</ScrollView>
-\ No newline at end of file
-Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/EditarClima.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/dashboard/EditarClima.java	(date 1611253680763)
-+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/EditarClima.java	(date 1611253680763)
-@@ -0,0 +1,107 @@
-+package com.example.infinitycrop.ui.dashboard;
-+
-+import androidx.annotation.NonNull;
-+import androidx.appcompat.app.AppCompatActivity;
-+
-+import android.os.Bundle;
-+import android.view.View;
-+import android.widget.Button;
-+import android.widget.EditText;
-+import android.widget.Toast;
-+
-+import com.example.infinitycrop.R;
-+import com.google.android.gms.tasks.OnCompleteListener;
-+import com.google.android.gms.tasks.Task;
-+import com.google.android.material.textfield.TextInputEditText;
-+import com.google.firebase.auth.FirebaseAuth;
-+import com.google.firebase.firestore.DocumentSnapshot;
-+import com.google.firebase.firestore.FirebaseFirestore;
-+
-+import java.util.HashMap;
-+import java.util.Map;
-+
-+public class EditarClima extends AppCompatActivity {
-+
-+
-+    private String modo;
-+    private TextInputEditText name_climaCreateClima;
-+    private EditText temperaturaCreateClima;
-+    private EditText humedadCreateClima;
-+    private Button btn_createClima_act;
-+    private Button btn_cancelar_crearClima;
-+    private FirebaseFirestore db;
-+    private FirebaseAuth firebaseAuth;
-+    private String id;
-+    private String uid;
-+
-+    @Override
-+    protected void onCreate(Bundle savedInstanceState) {
-+        super.onCreate(savedInstanceState);
-+        setContentView(R.layout.activity_editar_clima);
-+
-+        Bundle extras = getIntent().getExtras();
-+        id = extras.getString("id");
-+
-+        db=FirebaseFirestore.getInstance();
-+
-+        name_climaCreateClima=findViewById(R.id.name_climaEditClima);
-+        temperaturaCreateClima=findViewById(R.id.temperaturaEditClima);
-+        humedadCreateClima=findViewById(R.id.humedadEditClima);
-+        btn_createClima_act=findViewById(R.id.btn_EditClima_act);
-+        btn_cancelar_crearClima=findViewById(R.id.btn_cancelar_EditClima);
-+        firebaseAuth= FirebaseAuth.getInstance();
-+        uid=firebaseAuth.getUid();
-+
-+
-+        db.collection("Climas").document(id).get()
-+                .addOnCompleteListener(new OnCompleteListener<DocumentSnapshot>() {
-+                    @Override
-+                    public void onComplete(@NonNull Task<DocumentSnapshot> task) {
-+                        if (task.isSuccessful()) {
-+                            DocumentSnapshot document = task.getResult();
-+                            if (document.exists()) {
-+                                name_climaCreateClima.setText(document.getString("name"));
-+                                temperaturaCreateClima.setText(document.getString("temperatura"));
-+                                humedadCreateClima.setText(document.getString("humedad"));
-+                            } else {
-+
-+                            }
-+                        } else {
-+
-+                        }
-+                    }
-+                });
-+
-+        btn_cancelar_crearClima.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                finish();
-+            }
-+        });
-+
-+        btn_createClima_act.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                if(name_climaCreateClima.getText().equals("") || temperaturaCreateClima.getText().toString().equals("") || humedadCreateClima.getText().toString().equals("")){
-+                    Toast.makeText(getApplicationContext(),"Introduce todos los datos necesarios", Toast.LENGTH_LONG).show();
-+                }else{
-+
-+
-+                    final Map<String, Object> a = new HashMap<>();
-+                    a.put("name", name_climaCreateClima.getText().toString());
-+                    a.put("humedad", humedadCreateClima.getText().toString());
-+                    a.put("temperatura", temperaturaCreateClima.getText().toString() );
-+                    a.put("creator", uid );
-+                    a.put("machineId", "" );
-+                    a.put("defecto", false );
-+
-+                    db.collection("Climas").document(id).update(a);
-+
-+                    Toast.makeText(getApplicationContext(),"Clima editado con éxito", Toast.LENGTH_LONG).show();
-+                    finish();
-+                }
-+
-+            }
-+        });
-+    }
-+}
-\ No newline at end of file
-Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/CreateClima.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport com.example.infinitycrop.R;\r\n\r\npublic class CreateClima extends AppCompatActivity {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_create_clima);\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/dashboard/CreateClima.java	(revision 6a46eaa504348e2e3bd04e08f565c03719a31f9d)
-+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/CreateClima.java	(date 1611252696183)
-@@ -1,16 +1,110 @@
- package com.example.infinitycrop.ui.dashboard;
- 
-+import androidx.annotation.NonNull;
- import androidx.appcompat.app.AppCompatActivity;
- 
- import android.os.Bundle;
-+import android.view.View;
-+import android.widget.Button;
-+import android.widget.EditText;
-+import android.widget.Toast;
- 
- import com.example.infinitycrop.R;
-+import com.google.android.gms.tasks.OnCompleteListener;
-+import com.google.android.gms.tasks.Task;
-+import com.google.android.material.textfield.TextInputEditText;
-+import com.google.firebase.auth.FirebaseAuth;
-+import com.google.firebase.firestore.DocumentSnapshot;
-+import com.google.firebase.firestore.FirebaseFirestore;
-+
-+import java.util.HashMap;
-+import java.util.Map;
- 
- public class CreateClima extends AppCompatActivity {
- 
-+
-+    private String modo;
-+    private TextInputEditText name_climaCreateClima;
-+    private EditText temperaturaCreateClima;
-+    private EditText humedadCreateClima;
-+    private Button btn_createClima_act;
-+    private Button btn_cancelar_crearClima;
-+    private FirebaseFirestore db;
-+    private FirebaseAuth firebaseAuth;
-+    private String uid;
-+
-     @Override
-     protected void onCreate(Bundle savedInstanceState) {
-         super.onCreate(savedInstanceState);
-         setContentView(R.layout.activity_create_clima);
-+
-+        Bundle extras = getIntent().getExtras();
-+        modo = extras.getString("modo");
-+
-+        db=FirebaseFirestore.getInstance();
-+
-+        name_climaCreateClima=findViewById(R.id.name_climaCreateClima);
-+        temperaturaCreateClima=findViewById(R.id.temperaturaCreateClima);
-+        humedadCreateClima=findViewById(R.id.humedadCreateClima);
-+        btn_createClima_act=findViewById(R.id.btn_createClima_act);
-+        btn_cancelar_crearClima=findViewById(R.id.btn_cancelar_crearClima);
-+        firebaseAuth= FirebaseAuth.getInstance();
-+        uid=firebaseAuth.getUid();
-+
-+        btn_cancelar_crearClima.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                finish();
-+            }
-+        });
-+
-+
-+        if(modo.equals("default")){
-+            db.collection("Climas").document("Default").get()
-+                    .addOnCompleteListener(new OnCompleteListener<DocumentSnapshot>() {
-+                        @Override
-+                        public void onComplete(@NonNull Task<DocumentSnapshot> task) {
-+                            if (task.isSuccessful()) {
-+                                DocumentSnapshot document = task.getResult();
-+                                if (document.exists()) {
-+                                   name_climaCreateClima.setText(document.getString("name"));
-+                                    temperaturaCreateClima.setText(document.getString("temperatura"));
-+                                    humedadCreateClima.setText(document.getString("humedad"));
-+                                } else {
-+
-+                                }
-+                            } else {
-+
-+                            }
-+                        }
-+                    });
-+        }
-+
-+
-+        btn_createClima_act.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                if(name_climaCreateClima.getText().equals("") || temperaturaCreateClima.getText().toString().equals("") || humedadCreateClima.getText().toString().equals("")){
-+                    Toast.makeText(getApplicationContext(),"Introduce todos los datos necesarios", Toast.LENGTH_LONG).show();
-+                }else{
-+
-+
-+                    final Map<String, Object> a = new HashMap<>();
-+                    a.put("name", name_climaCreateClima.getText().toString());
-+                    a.put("humedad", humedadCreateClima.getText().toString());
-+                    a.put("temperatura", temperaturaCreateClima.getText().toString() );
-+                    a.put("creator", uid );
-+                    a.put("machineId", "" );
-+                    a.put("defecto", false );
-+
-+                    db.collection("Climas").add(a);
-+
-+                    Toast.makeText(getApplicationContext(),"Clima creado con éxito", Toast.LENGTH_LONG).show();
-+                    finish();
-+                }
-+
-+            }
-+        });
-+
-     }
- }
-\ No newline at end of file
-Index: app/src/main/res/layout/activity_editar_clima.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_editar_clima.xml	(date 1611253284125)
-+++ app/src/main/res/layout/activity_editar_clima.xml	(date 1611253284125)
-@@ -0,0 +1,112 @@
-+<?xml version="1.0" encoding="utf-8"?>
-+<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
-+    xmlns:app="http://schemas.android.com/apk/res-auto"
-+    xmlns:tools="http://schemas.android.com/tools"
-+    android:layout_width="match_parent"
-+    android:background="#EFE9E9"
-+    android:layout_height="match_parent"
-+    tools:context=".ui.dashboard.EditarClima">
-+
-+    <androidx.constraintlayout.widget.ConstraintLayout
-+        android:layout_width="match_parent"
-+        android:layout_height="wrap_content">
-+
-+
-+        <TextView
-+            android:id="@+id/textView37"
-+            android:layout_width="wrap_content"
-+            android:layout_height="wrap_content"
-+            android:layout_marginTop="20dp"
-+            android:layout_marginBottom="500dp"
-+            android:text="Editar Clima"
-+            android:textColor="@color/black"
-+            android:textSize="22sp"
-+            android:textStyle="bold"
-+            app:layout_constraintBottom_toBottomOf="parent"
-+            app:layout_constraintEnd_toEndOf="parent"
-+            app:layout_constraintStart_toStartOf="parent"
-+            app:layout_constraintTop_toTopOf="parent" />
-+
-+        <com.google.android.material.textfield.TextInputLayout
-+            android:id="@+id/textInputLayout2"
-+            android:layout_width="match_parent"
-+            android:layout_height="wrap_content"
-+            android:layout_marginStart="20dp"
-+            android:layout_marginTop="50dp"
-+            android:layout_marginEnd="20dp"
-+            app:layout_constraintEnd_toEndOf="parent"
-+            app:layout_constraintStart_toStartOf="parent"
-+            app:layout_constraintTop_toBottomOf="@+id/textView37">
-+
-+            <com.google.android.material.textfield.TextInputEditText
-+                android:id="@+id/name_climaEditClima"
-+                android:layout_width="match_parent"
-+                android:layout_height="wrap_content"
-+                android:hint="Nombre del clima" />
-+        </com.google.android.material.textfield.TextInputLayout>
-+
-+        <TextView
-+            android:id="@+id/textView38"
-+            android:layout_width="0dp"
-+            android:layout_height="wrap_content"
-+            android:layout_marginStart="20dp"
-+            android:layout_marginTop="29dp"
-+            android:text="Definir umbrales >"
-+            app:layout_constraintEnd_toEndOf="parent"
-+            app:layout_constraintStart_toStartOf="parent"
-+            app:layout_constraintTop_toBottomOf="@+id/textInputLayout2" />
-+
-+        <EditText
-+            android:id="@+id/temperaturaEditClima"
-+            android:layout_width="0dp"
-+            android:layout_height="wrap_content"
-+            android:layout_marginStart="20dp"
-+            android:layout_marginTop="8dp"
-+            android:layout_marginEnd="8dp"
-+            android:ems="10"
-+            android:hint="Temperatura"
-+            android:inputType="numberDecimal"
-+            app:layout_constraintEnd_toStartOf="@+id/humedadEditClima"
-+            app:layout_constraintStart_toStartOf="parent"
-+            app:layout_constraintTop_toBottomOf="@+id/textView38" />
-+
-+        <EditText
-+            android:id="@+id/humedadEditClima"
-+            android:layout_width="0dp"
-+            android:layout_height="wrap_content"
-+            android:layout_marginEnd="20dp"
-+            android:ems="10"
-+            android:hint="Humedad"
-+            android:inputType="numberDecimal"
-+            app:layout_constraintEnd_toEndOf="parent"
-+            app:layout_constraintStart_toEndOf="@+id/temperaturaEditClima"
-+            app:layout_constraintTop_toTopOf="@+id/temperaturaEditClima" />
-+
-+        <Button
-+            android:id="@+id/btn_cancelar_EditClima"
-+            android:layout_width="wrap_content"
-+            android:layout_height="wrap_content"
-+            android:layout_marginStart="20dp"
-+            android:layout_marginTop="20dp"
-+            android:background="@drawable/button_action_machine"
-+            android:padding="10dp"
-+            android:text="@string/posts_text11"
-+            android:textColor="@color/colorPrimaryDashboard"
-+            app:layout_constraintStart_toStartOf="parent"
-+            app:layout_constraintTop_toBottomOf="@+id/temperaturaEditClima" />
-+
-+        <Button
-+            android:id="@+id/btn_EditClima_act"
-+            android:layout_width="wrap_content"
-+            android:layout_height="wrap_content"
-+            android:layout_marginTop="20dp"
-+            android:layout_marginEnd="20dp"
-+            android:background="@drawable/button_enter_machine"
-+            android:padding="10dp"
-+            android:text="Guardar cambios"
-+            android:textColor="@color/white"
-+            app:layout_constraintEnd_toEndOf="parent"
-+            app:layout_constraintTop_toBottomOf="@+id/humedadEditClima" />
-+    </androidx.constraintlayout.widget.ConstraintLayout>
-+
-+</ScrollView>
-\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_20_09__Default_Changelist_.xml
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_20_09__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_20_09__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_21_01_2021_20_09_[Default_Changelist]" date="1611256355247" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_20_09_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 21/01/2021 20:09 [Default Changelist]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_20_09_[Default_Changelist]/shelved.patch
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_20_09_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_20_09_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,999 +0,0 @@
-Index: app/src/main/AndroidManifest.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.infinitycrop\">\r\n\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" /> <!-- Permisos Qr -->\r\n    <uses-permission android:name=\"android.permission.CAMERA\" />\r\n    <uses-permission android:name=\"com.android.alarm.permission.SET_ALARM\" />\r\n\r\n    <uses-feature android:name=\"android.hardware.camera\" />\r\n    <uses-feature android:name=\"android.hardware.camera.autofocus\" />\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher\"\r\n        android:theme=\"@style/AppThemeHome\">\r\n        <activity android:name=\".ui.dashboard.CreateClima\"></activity>\r\n        <activity android:name=\".ui.Foro.main.Community.NewPost.PostView\" />\r\n        <activity android:name=\".ui.Foro.main.Community.NewPost.CreatePost.CreatePost\" />\r\n        <activity android:name=\".ui.Foro.main.Community.CommunityMain\" />\r\n        <activity android:name=\".ui.Foro.lets_start.EditCommunity\" />\r\n        <activity android:name=\".ui.list_machine.ModifyMachine\" />\r\n        <activity android:name=\".ui.Foro.main.ForoMain\" />\r\n        <activity android:name=\".ui.Foro.lets_start.AddCommunity\" />\r\n        <activity android:name=\".ui.Foro.lets_start.choose_community\" />\r\n        <activity android:name=\".ui.Foro.lets_start.welcome_forum\" />\r\n        <activity android:name=\".MainActivity\" />\r\n\r\n        <service android:name=\".ui.service.ServicioMqtt\" />\r\n        <service android:name=\".ui.service.ServicioNotificaciones\" />\r\n\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.SET_ALARM\" />\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\" />\r\n        <activity android:name=\".ui.profile.settings.HelpProfile\" />\r\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\" />\r\n        <activity android:name=\".ui.list_machine.AddMachine\" />\r\n        <activity android:name=\".ui.profile.settings.ModifyProfile\" />\r\n        <activity android:name=\".ui.logmail.RegisterActivity\" />\r\n        <activity android:name=\".ui.logmail.LoginActivity\" />\r\n        <activity android:name=\".ui.list_machine.CaptureAct\" />\r\n        <activity android:name=\".ui.login.LogActivity\" />\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\" />\r\n        <activity android:name=\".ui.LoadAnimations.LogprimeraActivity\" />\r\n        <activity android:name=\".ui.graphics.GraphicsActivity\" />\r\n        <activity android:name=\".ui.MachineControl.planta1\" />\r\n        <activity android:name=\".ui.notifications.NotificacionesActivity\" />\r\n        <activity android:name=\".ui.guiabotanica.GuiaActivity\" />\r\n        <activity android:name=\".ui.guiabotanica.PlantActivity\" />\r\n\r\n        <meta-data\r\n            android:name=\"com.google.android.geo.API_KEY\"\r\n            android:value=\"@string/google_maps_key\" />\r\n        <meta-data\r\n            android:name=\"com.facebook.sdk.ApplicationId\"\r\n            android:value=\"@string/facebook_app_id\"\r\n            tools:replace=\"android:value\" />\r\n        <meta-data\r\n            android:name=\"preloaded_fonts\"\r\n            android:resource=\"@array/preloaded_fonts\" />\r\n\r\n        <activity\r\n            android:name=\"com.theartofdev.edmodo.cropper.CropImageActivity\"\r\n            android:theme=\"@style/Base.Theme.AppCompat\" />\r\n    </application>\r\n\r\n</manifest>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/AndroidManifest.xml	(revision 6a46eaa504348e2e3bd04e08f565c03719a31f9d)
-+++ app/src/main/AndroidManifest.xml	(date 1611256072129)
-@@ -22,45 +22,51 @@
-         android:label="@string/app_name"
-         android:roundIcon="@mipmap/ic_launcher"
-         android:theme="@style/AppThemeHome">
--        <activity android:name=".ui.dashboard.CreateClima"></activity>
--        <activity android:name=".ui.Foro.main.Community.NewPost.PostView" />
--        <activity android:name=".ui.Foro.main.Community.NewPost.CreatePost.CreatePost" />
--        <activity android:name=".ui.Foro.main.Community.CommunityMain" />
--        <activity android:name=".ui.Foro.lets_start.EditCommunity" />
--        <activity android:name=".ui.list_machine.ModifyMachine" />
--        <activity android:name=".ui.Foro.main.ForoMain" />
--        <activity android:name=".ui.Foro.lets_start.AddCommunity" />
--        <activity android:name=".ui.Foro.lets_start.choose_community" />
--        <activity android:name=".ui.Foro.lets_start.welcome_forum" />
--        <activity android:name=".MainActivity" />
-+        <activity android:name=".ui.dashboard.CreateClima" android:screenOrientation="portrait"></activity>
-+        <activity android:name=".ui.Foro.main.Community.NewPost.PostView" android:screenOrientation="portrait"/>
-+        <activity android:name=".ui.Foro.main.Community.NewPost.CreatePost.CreatePost" android:screenOrientation="portrait"/>
-+        <activity android:name=".ui.Foro.main.Community.CommunityMain" android:screenOrientation="portrait"/>
-+        <activity android:name=".ui.Foro.lets_start.EditCommunity" android:screenOrientation="portrait"/>
-+        <activity android:name=".ui.Foro.main.Profile.EditProfileActivity" android:screenOrientation="portrait"/>
-+        <activity android:name=".ui.list_machine.ModifyMachine" android:screenOrientation="portrait"/>
-+        <activity android:name=".ui.Foro.main.ForoMain" android:screenOrientation="portrait"/>
-+        <activity android:name=".ui.Foro.lets_start.AddCommunity" android:screenOrientation="portrait"/>
-+        <activity android:name=".ui.Foro.lets_start.choose_community" android:screenOrientation="portrait"/>
-+        <activity android:name=".ui.Foro.lets_start.welcome_forum" android:screenOrientation="portrait"/>
-+        <activity android:name=".MainActivity" android:screenOrientation="portrait"/>
- 
-         <service android:name=".ui.service.ServicioMqtt" />
-         <service android:name=".ui.service.ServicioNotificaciones" />
- 
--        <activity android:name=".ui.LoadAnimations.IntroductoryActivity">
-+        <activity
-+            android:name=".ui.LoadAnimations.IntroductoryActivity" android:screenOrientation="portrait">
-+
-+
-             <intent-filter>
-+
-                 <action android:name="android.intent.action.SET_ALARM" />
-                 <action android:name="android.intent.action.MAIN" />
- 
-                 <category android:name="android.intent.category.LAUNCHER" />
-             </intent-filter>
-         </activity>
--        <activity android:name=".ui.profile.settings.AboutInfinityCrap" />
--        <activity android:name=".ui.profile.settings.HelpProfile" />
--        <activity android:name=".ui.list_machine.MainActivityMachineList" />
--        <activity android:name=".ui.list_machine.AddMachine" />
--        <activity android:name=".ui.profile.settings.ModifyProfile" />
--        <activity android:name=".ui.logmail.RegisterActivity" />
--        <activity android:name=".ui.logmail.LoginActivity" />
--        <activity android:name=".ui.list_machine.CaptureAct" />
--        <activity android:name=".ui.login.LogActivity" />
--        <activity android:name=".ui.LoadAnimations.IntroductoryActivity2" />
--        <activity android:name=".ui.LoadAnimations.LogprimeraActivity" />
--        <activity android:name=".ui.graphics.GraphicsActivity" />
--        <activity android:name=".ui.MachineControl.planta1" />
--        <activity android:name=".ui.notifications.NotificacionesActivity" />
--        <activity android:name=".ui.guiabotanica.GuiaActivity" />
--        <activity android:name=".ui.guiabotanica.PlantActivity" />
-+        <activity android:name=".ui.profile.settings.AboutInfinityCrap" android:screenOrientation="portrait"/>
-+        <activity android:name=".ui.profile.settings.HelpProfile" android:screenOrientation="portrait"/>
-+        <activity android:name=".ui.list_machine.MainActivityMachineList" android:screenOrientation="portrait"/>
-+        <activity android:name=".ui.list_machine.AddMachine" android:screenOrientation="portrait"/>
-+        <activity android:name=".ui.profile.settings.ModifyProfile" android:screenOrientation="portrait"/>
-+        <activity android:name=".ui.logmail.RegisterActivity" android:screenOrientation="portrait"/>
-+        <activity android:name=".ui.logmail.LoginActivity" android:screenOrientation="portrait"/>
-+        <activity android:name=".ui.list_machine.CaptureAct" android:screenOrientation="portrait"/>
-+        <activity android:name=".ui.login.LogActivity" android:screenOrientation="portrait"/>
-+        <activity android:name=".ui.LoadAnimations.IntroductoryActivity2" android:screenOrientation="portrait" />
-+        <activity android:name=".ui.LoadAnimations.LogprimeraActivity" android:screenOrientation="portrait"/>
-+        <activity android:name=".ui.graphics.GraphicsActivity" android:screenOrientation="portrait" />
-+        <activity android:name=".ui.MachineControl.planta1" android:screenOrientation="portrait"/>
-+        <activity android:name=".ui.MachineControl.planta2" android:screenOrientation="portrait" />
-+        <activity android:name=".ui.notifications.NotificacionesActivity" android:screenOrientation="portrait" />
-+        <activity android:name=".ui.guiabotanica.GuiaActivity" android:screenOrientation="portrait"/>
-+        <activity android:name=".ui.guiabotanica.PlantActivity" android:screenOrientation="portrait" />
- 
-         <meta-data
-             android:name="com.google.android.geo.API_KEY"
-Index: app/src/main/res/layout/activity_log.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"#F6F1F1\">\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:background=\"#F6F1F1\"\r\n        android:orientation=\"vertical\"\r\n        android:paddingTop=\"20dp\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"38.3dp\"\r\n            android:orientation=\"horizontal\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/textView\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"bottom\"\r\n                android:layout_marginLeft=\"32dp\"\r\n                android:layout_weight=\"1\"\r\n                android:gravity=\"clip_horizontal\"\r\n                android:text=\"@string/title_orderLog\"\r\n                android:textColor=\"#000000\"\r\n                android:textSize=\"27sp\"\r\n                android:textStyle=\"normal\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"match_parent\"\r\n                android:layout_weight=\"1\"\r\n                android:gravity=\"bottom|right\"\r\n                android:orientation=\"vertical\">\r\n\r\n                <TextView\r\n                    android:id=\"@+id/textView5\"\r\n                    android:layout_width=\"30dp\"\r\n                    android:layout_height=\"30dp\"\r\n                    android:layout_marginRight=\"8dp\"\r\n                    android:background=\"@drawable/circulo_pequenyo\" />\r\n\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:orientation=\"vertical\">\r\n\r\n                <FrameLayout\r\n                    android:layout_width=\"50dp\"\r\n                    android:layout_height=\"100dp\"\r\n                    android:background=\"@drawable/medio_circulo\">\r\n\r\n                </FrameLayout>\r\n            </LinearLayout>\r\n        </LinearLayout>\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"243dp\"\r\n            android:layout_marginTop=\"28dp\"\r\n            android:orientation=\"horizontal\"\r\n            android:paddingLeft=\"14.5dp\">\r\n\r\n            <View\r\n                android:layout_width=\"5.6dp\"\r\n                android:layout_height=\"240dp\"\r\n                android:background=\"#94c804\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"241dp\"\r\n                android:layout_marginLeft=\"13dp\"\r\n                android:layout_marginRight=\"35.6dp\"\r\n                android:layout_weight=\"1\"\r\n                android:background=\"@drawable/rectangle\"\r\n                android:orientation=\"horizontal\">\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"225dp\"\r\n                    android:layout_marginLeft=\"13dp\"\r\n                    android:layout_marginRight=\"19dp\"\r\n                    android:orientation=\"vertical\">\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/textViewinfo\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginTop=\"20.3dp\"\r\n                        android:gravity=\"center_horizontal\"\r\n                        android:text=\"@string/title_bienv\"\r\n                        android:textColor=\"#000000\"\r\n                        android:textSize=\"16.7sp\"\r\n                        android:textStyle=\"normal\" />\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/textView7\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginTop=\"22.3dp\"\r\n                        android:text=\"@string/title_userR\"\r\n                        android:textColor=\"#9E9D9D\" />\r\n\r\n                    <EditText\r\n                        android:id=\"@+id/editTextTextPersonName\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:background=\"@android:color/transparent\"\r\n                        android:maxLines=\"1\"\r\n                        android:paddingTop=\"5dp\"\r\n                        android:textColorHint=\"#333232\"\r\n                        android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                        android:textSize=\"15sp\" />\r\n\r\n                    <View\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"1dp\"\r\n                        android:layout_marginTop=\"5dp\"\r\n                        android:background=\"#9e9e9e\" />\r\n\r\n                    <RelativeLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:paddingTop=\"5dp\">\r\n\r\n                    </RelativeLayout>\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/textView8\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginTop=\"23dp\"\r\n                        android:text=\"@string/title_passwordR\"\r\n                        android:textColor=\"#9e9d9d\"\r\n                        android:textSize=\"15sp\" />\r\n\r\n                    <EditText\r\n                        android:id=\"@+id/editTextTextPassword\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:background=\"@android:color/transparent\"\r\n                        android:inputType=\"textPassword\"\r\n                        android:maxLines=\"1\"\r\n                        android:textColor=\"#333232\"\r\n                        android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                        android:textSize=\"15sp\" />\r\n\r\n                    <View\r\n                        android:id=\"@+id/view2\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"1dp\"\r\n                        android:layout_marginTop=\"5dp\"\r\n                        android:background=\"#9e9e9e\" />\r\n\r\n\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n        </LinearLayout>\r\n\r\n        <LinearLayout\r\n            android:id=\"@+id/btn_login\"\r\n            android:layout_width=\"90dp\"\r\n            android:layout_height=\"41dp\"\r\n            android:layout_gravity=\"right\"\r\n            android:layout_marginTop=\"40.3dp\"\r\n            android:layout_marginBottom=\"16.7dp\"\r\n            android:background=\"@drawable/btn_login\"\r\n            android:foregroundGravity=\"right\"\r\n            android:gravity=\"center\"\r\n            android:onClick=\"onclick\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/textView9\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center\"\r\n                android:gravity=\"center\"\r\n                android:text=\"@string/title_registrar\"\r\n                android:textColor=\"@android:color/background_light\"\r\n                android:textStyle=\"bold\" />\r\n        </LinearLayout>\r\n\r\n        <TextView\r\n            android:id=\"@+id/register_buton\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"24dp\"\r\n            android:layout_gravity=\"center\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:text=\"@string/btn_newuser\"\r\n            android:textColor=\"#94c804\" />\r\n\r\n    </LinearLayout>\r\n\r\n</ScrollView>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_log.xml	(revision 6a46eaa504348e2e3bd04e08f565c03719a31f9d)
-+++ app/src/main/res/layout/activity_log.xml	(date 1611254761341)
-@@ -9,7 +9,8 @@
-         android:layout_height="match_parent"
-         android:background="#F6F1F1"
-         android:orientation="vertical"
--        android:paddingTop="20dp">
-+        android:paddingTop="20dp"
-+        android:maxLength="40">
- 
-         <LinearLayout
-             android:layout_width="match_parent"
-@@ -113,6 +114,7 @@
-                         android:layout_height="wrap_content"
-                         android:background="@android:color/transparent"
-                         android:maxLines="1"
-+                        android:maxLength="40"
-                         android:paddingTop="5dp"
-                         android:textColorHint="#333232"
-                         android:textCursorDrawable="@drawable/cursor_color"
-@@ -146,10 +148,11 @@
-                         android:layout_height="wrap_content"
-                         android:background="@android:color/transparent"
-                         android:inputType="textPassword"
--                        android:maxLines="1"
-                         android:textColor="#333232"
-                         android:textCursorDrawable="@drawable/cursor_color"
--                        android:textSize="15sp" />
-+                        android:textSize="15sp"
-+                        android:maxLines="1"
-+                        android:maxLength="40"/>
- 
-                     <View
-                         android:id="@+id/view2"
-Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.MachineControl.planta1;\r\nimport com.google.android.material.bottomsheet.BottomSheetDialog;\r\nimport com.google.firebase.Timestamp;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\n\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link GeneralFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class GeneralFragment extends Fragment implements MqttCallback{\r\n    public static MqttClient client = null;\r\n    private String uid;\r\n    private FirebaseFirestore db;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public GeneralFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment GeneralFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static GeneralFragment newInstance(String param1, String param2) {\r\n        GeneralFragment fragment = new GeneralFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v = inflater.inflate(R.layout.fragment_general, container, false);\r\n        //switch methods\r\n        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });\r\n        db = FirebaseFirestore.getInstance();\r\n        MainActivity myActivity = (MainActivity) getActivity();\r\n        final TextView medidaTemp=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidaHum=v.findViewById(R.id.medidaHumedadGeneral);\r\n        /*final TextView medidaHumAm=v.findViewById(R.id.medidaSalinidadGeneral);*/\r\n        final TextView medidaLuz=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n        uid=myActivity.getMachineUID();\r\n        db.collection(\"Mediciones general\")\r\n                .document(uid)\r\n                .addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable DocumentSnapshot snapshot,\r\n                                        @Nullable FirebaseFirestoreException e) {\r\n                        if (e != null) {\r\n                            return;\r\n                        }\r\n\r\n                        if (snapshot != null && snapshot.exists()) {\r\n                            //Temperatura\r\n                            String medidaT=snapshot.getString(\"Temperatura\");\r\n                            medidaTemp.setText(medidaT+\"°C\");\r\n                            //Humedad\r\n                            String medidaH=snapshot.getString(\"Humedad\");\r\n                            medidaHum.setText(medidaH+\"%\");\r\n                            //Humedad Ambiente\r\n                            /*String medidaHA=snapshot.getString(\"Humedad Ambiente\");\r\n                            medidaHumAm.setText(medidaHA+\"%\");*/\r\n                            //Luminosidad\r\n                            String medidaL=snapshot.getString(\"Luminosidad\");\r\n                            medidaLuz.setText(medidaL+\"%\");\r\n\r\n\r\n                        } else {\r\n\r\n                        }\r\n                    }\r\n                });\r\n\r\n        //Boton para acceder a la maquina para sus parcelas\r\n        Button btnmymachine = (Button) v.findViewById(R.id.btnMyMachine);\r\n        btnmymachine.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                BottomSheetDialog bottomSheetDialog = new BottomSheetDialog(\r\n                        getContext()\r\n                );\r\n                bottomSheetDialog.setContentView(R.layout.plantamaquina_bottom_sheet);\r\n                Button btnp1=bottomSheetDialog.findViewById(R.id.enterPlant2);\r\n                Button btn2=bottomSheetDialog.findViewById(R.id.enterPlant1);\r\n                bottomSheetDialog.show();\r\n                btnp1.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        Intent intent = new Intent (getContext(), planta1.class);\r\n                        intent.putExtra(\"idMachine\", uid);\r\n                        startActivity(intent);\r\n\r\n\r\n\r\n                    }\r\n\r\n                });\r\n            }\r\n        });\r\n\r\n        return v;\r\n    }\r\n        /*btnmymachine.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent (getContext(), MiMaquina.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n        });*/\r\n\r\n\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"operaciones\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"operaciones\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"1-OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"operaciones\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"operaciones\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"operaciones\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"1-ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"operaciones\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(revision 6a46eaa504348e2e3bd04e08f565c03719a31f9d)
-+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(date 1611249048471)
-@@ -20,6 +20,7 @@
- import com.example.infinitycrop.MainActivity;
- import com.example.infinitycrop.R;
- import com.example.infinitycrop.ui.MachineControl.planta1;
-+import com.example.infinitycrop.ui.MachineControl.planta2;
- import com.google.android.material.bottomsheet.BottomSheetDialog;
- import com.google.firebase.Timestamp;
- import com.google.firebase.database.DataSnapshot;
-@@ -170,6 +171,18 @@
-                         Intent intent = new Intent (getContext(), planta1.class);
-                         intent.putExtra("idMachine", uid);
-                         startActivity(intent);
-+
-+
-+
-+                    }
-+
-+                });
-+                btn2.setOnClickListener(new View.OnClickListener() {
-+                    @Override
-+                    public void onClick(View v) {
-+                        Intent intent = new Intent (getContext(), planta2.class);
-+                        intent.putExtra("idMachine", uid);
-+                        startActivity(intent);
- 
- 
- 
-Index: app/src/main/res/layout/activity_welcome_forum.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"#EFE9E9\"\r\n    tools:context=\".ui.Foro.lets_start.welcome_forum\">\r\n\r\n    <ScrollView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n        <androidx.constraintlayout.widget.ConstraintLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\">\r\n\r\n\r\n            <TextView\r\n                android:id=\"@+id/textView13\"\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginStart=\"20dp\"\r\n                android:layout_marginTop=\"20dp\"\r\n                android:text=\"@string/welcome_text1\"\r\n                android:textSize=\"24dp\"\r\n                android:textStyle=\"bold\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toBottomOf=\"@+id/btn_back_welcome\" />\r\n\r\n            <ProgressBar\r\n                android:id=\"@+id/progressBar\"\r\n                style=\"@style/Widget.AppCompat.ProgressBar.Horizontal\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:layout_marginStart=\"20dp\"\r\n                android:layout_marginTop=\"16dp\"\r\n                android:layout_marginEnd=\"20dp\"\r\n                android:indeterminate=\"false\"\r\n                android:max=\"100\"\r\n                android:progress=\"20\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toBottomOf=\"@+id/textView13\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/textView20\"\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginStart=\"20dp\"\r\n                android:layout_marginTop=\"40dp\"\r\n                android:text=\"@string/welcome_text2\"\r\n                android:textSize=\"18dp\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toBottomOf=\"@+id/progressBar\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/textView21\"\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginStart=\"20dp\"\r\n                android:layout_marginTop=\"9dp\"\r\n                android:text=\"@string/welcome_text3\"\r\n                android:textSize=\"22dp\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toBottomOf=\"@+id/textView20\" />\r\n\r\n            <androidx.constraintlayout.widget.ConstraintLayout\r\n                android:id=\"@+id/relativeLayoutwelcome\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"250dp\"\r\n                android:layout_marginStart=\"20dp\"\r\n                android:layout_marginEnd=\"20dp\"\r\n                android:elevation=\"6dp\"\r\n                android:layout_marginBottom=\"90dp\"\r\n                android:background=\"@drawable/bg_settings\"\r\n                app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintHorizontal_bias=\"0.0\"\r\n                app:layout_constraintStart_toStartOf=\"parent\">\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/image_user\"\r\n                    android:layout_width=\"105dp\"\r\n                    android:layout_height=\"90dp\"\r\n                    android:layout_marginStart=\"16dp\"\r\n                    android:layout_marginTop=\"16dp\"\r\n                    android:background=\"@drawable/circle\"\r\n                    android:src=\"@drawable/icons_user\"\r\n                    app:layout_constraintStart_toStartOf=\"parent\"\r\n                    app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                <EditText\r\n                    android:id=\"@+id/name_user\"\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_alignParentEnd=\"true\"\r\n                    android:layout_marginStart=\"8dp\"\r\n                    android:layout_marginTop=\"8dp\"\r\n                    android:layout_marginEnd=\"16dp\"\r\n                    android:inputType=\"textPersonName\"\r\n                    android:text=\"Name\"\r\n                    app:layout_constraintEnd_toEndOf=\"parent\"\r\n                    app:layout_constraintStart_toEndOf=\"@+id/image_user\"\r\n                    app:layout_constraintTop_toBottomOf=\"@+id/textView24\" />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/text_changeImg\"\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"8dp\"\r\n                    android:text=\"@string/welcome_text5\"\r\n                    android:textColor=\"@color/colorPrimaryDarkDashboard\"\r\n                    app:layout_constraintEnd_toEndOf=\"@+id/image_user\"\r\n                    app:layout_constraintStart_toStartOf=\"@+id/image_user\"\r\n                    app:layout_constraintTop_toBottomOf=\"@+id/image_user\" />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/textView24\"\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginStart=\"8dp\"\r\n                    android:layout_marginTop=\"16dp\"\r\n                    android:layout_marginEnd=\"16dp\"\r\n                    android:text=\"@string/welcome_text6\"\r\n                    app:layout_constraintEnd_toEndOf=\"parent\"\r\n                    app:layout_constraintStart_toEndOf=\"@+id/image_user\"\r\n                    app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/textView25\"\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginStart=\"16dp\"\r\n                    android:layout_marginTop=\"16dp\"\r\n                    android:text=\"@string/welcome_text8\"\r\n                    app:layout_constraintEnd_toEndOf=\"parent\"\r\n                    app:layout_constraintStart_toStartOf=\"parent\"\r\n                    app:layout_constraintTop_toBottomOf=\"@+id/text_changeImg\" />\r\n\r\n                <EditText\r\n                    android:id=\"@+id/user_description\"\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginStart=\"16dp\"\r\n                    android:layout_marginTop=\"8dp\"\r\n                    android:layout_marginEnd=\"16dp\"\r\n                    android:ems=\"10\"\r\n                    android:gravity=\"start|top\"\r\n                    android:inputType=\"textMultiLine\"\r\n                    app:layout_constraintEnd_toEndOf=\"parent\"\r\n                    app:layout_constraintStart_toStartOf=\"parent\"\r\n                    app:layout_constraintTop_toBottomOf=\"@+id/textView25\" />\r\n\r\n\r\n            </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n            <TextView\r\n                android:id=\"@+id/textView22\"\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginStart=\"20dp\"\r\n                android:layout_marginTop=\"35dp\"\r\n                android:layout_marginBottom=\"8dp\"\r\n                android:text=\"@string/welcome_text4\"\r\n                android:textSize=\"16dp\"\r\n                app:layout_constraintBottom_toTopOf=\"@+id/relativeLayoutwelcome\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toBottomOf=\"@+id/textView21\" />\r\n\r\n            <ImageView\r\n                android:id=\"@+id/btn_back_welcome\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"40dp\"\r\n                android:layout_marginStart=\"20dp\"\r\n                android:layout_marginTop=\"20dp\"\r\n                android:src=\"@drawable/icons_arrow_left_green\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n        </androidx.constraintlayout.widget.ConstraintLayout>\r\n    </ScrollView>\r\n\r\n    <Button\r\n        android:id=\"@+id/btn_continue_1\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_alignParentStart=\"true\"\r\n        android:layout_alignParentEnd=\"true\"\r\n        android:layout_alignParentBottom=\"true\"\r\n        android:textColor=\"@color/white\"\r\n        android:background=\"@drawable/button_enter_machine\"\r\n        android:layout_marginStart=\"20dp\"\r\n        android:layout_marginEnd=\"20dp\"\r\n        android:layout_marginBottom=\"20dp\"\r\n        android:text=\"@string/welcome_text7\" />\r\n\r\n</RelativeLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_welcome_forum.xml	(revision 6a46eaa504348e2e3bd04e08f565c03719a31f9d)
-+++ app/src/main/res/layout/activity_welcome_forum.xml	(date 1611254761347)
-@@ -153,7 +153,9 @@
-                     android:inputType="textMultiLine"
-                     app:layout_constraintEnd_toEndOf="parent"
-                     app:layout_constraintStart_toStartOf="parent"
--                    app:layout_constraintTop_toBottomOf="@+id/textView25" />
-+                    app:layout_constraintTop_toBottomOf="@+id/textView25"
-+                    android:maxLines="1"
-+                    />
- 
- 
-             </androidx.constraintlayout.widget.ConstraintLayout>
-Index: app/src/main/java/com/example/infinitycrop/ui/map/MapFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.map;\r\n\r\nimport android.Manifest;\r\nimport android.app.Activity;\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.IntentSender;\r\nimport android.content.pm.PackageManager;\r\nimport android.location.Location;\r\nimport android.location.LocationListener;\r\nimport android.location.LocationManager;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.fragment.app.FragmentActivity;\r\n\r\nimport android.provider.Settings;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.google.android.gms.common.ConnectionResult;\r\nimport com.google.android.gms.common.api.GoogleApiClient;\r\nimport com.google.android.gms.common.api.PendingResult;\r\nimport com.google.android.gms.common.api.ResultCallback;\r\nimport com.google.android.gms.common.api.Status;\r\nimport com.google.android.gms.location.LocationRequest;\r\nimport com.google.android.gms.location.LocationServices;\r\nimport com.google.android.gms.location.LocationSettingsRequest;\r\nimport com.google.android.gms.location.LocationSettingsResult;\r\nimport com.google.android.gms.location.LocationSettingsStates;\r\nimport com.google.android.gms.location.LocationSettingsStatusCodes;\r\nimport com.google.android.gms.maps.CameraUpdateFactory;\r\nimport com.google.android.gms.maps.GoogleMap;\r\nimport com.google.android.gms.maps.OnMapReadyCallback;\r\nimport com.google.android.gms.maps.SupportMapFragment;\r\nimport com.google.android.gms.maps.model.BitmapDescriptorFactory;\r\nimport com.google.android.gms.maps.model.LatLng;\r\nimport com.google.android.gms.maps.model.MarkerOptions;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.android.gms.location.FusedLocationProviderClient;\r\n\r\nimport java.util.Map;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link MapFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class MapFragment extends Fragment implements\r\n        OnMapReadyCallback, GoogleMap.OnMapClickListener, GoogleApiClient.ConnectionCallbacks, GoogleApiClient.OnConnectionFailedListener {\r\n\r\n\r\n    private static final String LOGTAG = \"0\";\r\n    private static final int PETICION_CONFIG_UBICACION = 0;\r\n    private GoogleMap mapa;\r\n    private final LatLng UPV = new LatLng(38.996379, -0.166173);\r\n    private Location currentLocation;\r\n    private LocationManager locationManager;\r\n    private LocationListener locationListener;\r\n    private LatLng userLatLong;\r\n    FusedLocationProviderClient fusedLocationProviderClient;\r\n    private static final int REQUEST_CODE = 101;\r\n    private LocationRequest locRequest;\r\n    private GoogleApiClient googleApiClient;\r\n    final static int REQUEST_LOCATION = 199;\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public MapFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment NotificationFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static MapFragment newInstance(String param1, String param2) {\r\n        MapFragment fragment = new MapFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_map, container, false);\r\n        fusedLocationProviderClient = LocationServices.getFusedLocationProviderClient(getContext());\r\n        fetchLocation();\r\n\r\n        final Button irUPV = (Button)v.findViewById(R.id.irUPV);\r\n        irUPV.setOnClickListener(new View.OnClickListener() {\r\n            public void onClick(View v) {\r\n                EnableGPSAutoMatically();\r\n            }\r\n        });\r\n\r\n        return v;\r\n    }\r\n\r\n\r\n    private void fetchLocation() {\r\n        if (ActivityCompat.checkSelfPermission(\r\n                getContext(), Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(\r\n                getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n\r\n            // Se le piden los permisos\r\n            ActivityCompat.requestPermissions(getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_CODE);\r\n\r\n            // Hacemos que esta función se llame a si misma para que no tengamos que cerrar y abrir la app de nuevo para ver nuestra localización\r\n            fetchLocation();\r\n            return;\r\n        }\r\n\r\n        Task<Location> task = fusedLocationProviderClient.getLastLocation();\r\n        task.addOnSuccessListener(new OnSuccessListener<Location>() {\r\n            @Override\r\n            public void onSuccess(Location location) {\r\n                if (location != null) {\r\n                    currentLocation = location;\r\n                    Toast.makeText(getContext(), \"Latitud: \" + currentLocation.getLatitude() + \" | \" +\"Longitud: \"+ currentLocation.getLongitude(), Toast.LENGTH_SHORT).show();\r\n\r\n                    SupportMapFragment supportMapFragment = (SupportMapFragment) getChildFragmentManager().findFragmentById(R.id.mapa);\r\n                    assert supportMapFragment != null;\r\n                    supportMapFragment.getMapAsync(MapFragment.this);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    //TODO: ///////////////////////////////////////////////////////////////////////////////\r\n\r\n    @Override\r\n    public void onMapReady(GoogleMap googleMap) {\r\n        mapa = googleMap;\r\n        mapa.setMapType(GoogleMap.MAP_TYPE_SATELLITE);\r\n        mapa.getUiSettings().setZoomControlsEnabled(true);\r\n        if (ActivityCompat.checkSelfPermission(getContext(), Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            // TODO: Consider calling\r\n            //    ActivityCompat#requestPermissions\r\n            // here to request the missing permissions, and then overriding\r\n            //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\r\n            //                                          int[] grantResults)\r\n            // to handle the case where the user grants the permission. See the documentation\r\n            // for ActivityCompat#requestPermissions for more details.\r\n\r\n            return;\r\n        }\r\n        mapa.setMyLocationEnabled(true);\r\n    }\r\n\r\n    @Override public void onMapClick(LatLng puntoPulsado) {\r\n        mapa.addMarker(new MarkerOptions().position(puntoPulsado)\r\n                .icon(BitmapDescriptorFactory\r\n                        .defaultMarker(BitmapDescriptorFactory.HUE_YELLOW)));\r\n    }\r\n    private void EnableGPSAutoMatically() {\r\n        GoogleApiClient googleApiClient = null;\r\n        if (googleApiClient == null) {\r\n            googleApiClient = new GoogleApiClient.Builder(getContext())\r\n                    .addApi(LocationServices.API).addConnectionCallbacks(this)\r\n                    .addOnConnectionFailedListener((GoogleApiClient.OnConnectionFailedListener) this).build();\r\n            googleApiClient.connect();\r\n            LocationRequest locationRequest = LocationRequest.create();\r\n            locationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);\r\n            locationRequest.setInterval(30 * 1000);\r\n            locationRequest.setFastestInterval(5 * 1000);\r\n            LocationSettingsRequest.Builder builder = new LocationSettingsRequest.Builder()\r\n                    .addLocationRequest(locationRequest);\r\n\r\n            // **************************\r\n            builder.setAlwaysShow(true); // this is the key ingredient\r\n            // **************************\r\n\r\n            PendingResult<LocationSettingsResult> result = LocationServices.SettingsApi\r\n                    .checkLocationSettings(googleApiClient, builder.build());\r\n            result.setResultCallback(new ResultCallback<LocationSettingsResult>() {\r\n                @Override\r\n                public void onResult(LocationSettingsResult result) {\r\n                    final Status status = result.getStatus();\r\n                    final LocationSettingsStates state = result\r\n                            .getLocationSettingsStates();\r\n                    switch (status.getStatusCode()) {\r\n                        case LocationSettingsStatusCodes.SUCCESS:\r\n                            toast(\"GPS activado\");\r\n                            // All location settings are satisfied. The client can\r\n                            // initialize location\r\n                            // requests here.\r\n\r\n                            mapa.animateCamera(CameraUpdateFactory.newLatLng(UPV));\r\n                            mapa.moveCamera(CameraUpdateFactory.newLatLngZoom(UPV, 18));\r\n                            mapa.addMarker(new MarkerOptions()\r\n                                    .position(UPV)\r\n                                    .title(\"UPV\")\r\n                                    .snippet(\"Universidad Politécnica de Valencia Campus de Gandía\")\r\n                                    /* .icon(BitmapDescriptorFactory\r\n                                             .fromResource(android.R.drawable.ic_menu_view))*/\r\n                                    .anchor(0.5f, 0.5f));\r\n                            break;\r\n                        case LocationSettingsStatusCodes.RESOLUTION_REQUIRED:\r\n                            toast(\"El GPS no está activado\");\r\n                            // Location settings are not satisfied. But could be\r\n                            // fixed by showing the user\r\n                            // a dialog.\r\n                            try {\r\n                                final AlertDialog.Builder builder = new AlertDialog.Builder(getContext());\r\n                                builder.setMessage(\"El GPS parece estar desactivado, ¿quieres activarlo?\")\r\n                                        .setCancelable(false)\r\n                                        .setPositiveButton(\"Sí\", new DialogInterface.OnClickListener() {\r\n                                            public void onClick(final DialogInterface dialog, final int id) {\r\n\r\n                                                // Hacemos que esta función se llame a si misma para que no tengamos que cerrar y abrir la app de nuevo para ver nuestra localización\r\n                                                EnableGPSAutoMatically();\r\n                                            }\r\n                                        })\r\n                                        .setNegativeButton(\"No\", new DialogInterface.OnClickListener() {\r\n                                            public void onClick(final DialogInterface dialog, final int id) {\r\n                                                dialog.cancel();\r\n                                            }\r\n                                        });\r\n                                final AlertDialog alert = builder.create();\r\n                                alert.show();\r\n                                // ,\r\n                                // and check the result in onActivityResult().\r\n                                status.startResolutionForResult(getActivity(), 1000);\r\n\r\n                            } catch (IntentSender.SendIntentException e) {\r\n                                // Ignore the error.\r\n                            }\r\n                            break;\r\n                        case LocationSettingsStatusCodes.SETTINGS_CHANGE_UNAVAILABLE:\r\n                            toast(\"No has activado el GPS\");\r\n                            // Location settings are not satisfied. However, we have\r\n                            // no way to fix the\r\n                            // settings so we won't show the dialog.\r\n                            break;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n\r\n        if (requestCode == 1000) {\r\n            if(resultCode == FragmentActivity.RESULT_OK){\r\n                String result=data.getStringExtra(\"result\");\r\n            }\r\n            if (resultCode == FragmentActivity.RESULT_CANCELED) {\r\n                //Write your code if there's no result\r\n            }\r\n        }\r\n    }\r\n    @Override\r\n    public void onConnected(@Nullable Bundle bundle) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onConnectionSuspended(int i) {\r\n        toast(\"Suspended\");\r\n    }\r\n\r\n    @Override\r\n    public void onConnectionFailed(@NonNull ConnectionResult connectionResult) {\r\n        toast(\"Failed\");\r\n    }\r\n    private void toast(String message) {\r\n        try {\r\n            Toast.makeText(getContext(), message, Toast.LENGTH_SHORT).show();\r\n        } catch (Exception ex) {\r\n\r\n        }\r\n\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/map/MapFragment.java	(revision 6a46eaa504348e2e3bd04e08f565c03719a31f9d)
-+++ app/src/main/java/com/example/infinitycrop/ui/map/MapFragment.java	(date 1611252667509)
-@@ -153,7 +153,7 @@
-             public void onSuccess(Location location) {
-                 if (location != null) {
-                     currentLocation = location;
--                    Toast.makeText(getContext(), "Latitud: " + currentLocation.getLatitude() + " | " +"Longitud: "+ currentLocation.getLongitude(), Toast.LENGTH_SHORT).show();
-+
- 
-                     SupportMapFragment supportMapFragment = (SupportMapFragment) getChildFragmentManager().findFragmentById(R.id.mapa);
-                     assert supportMapFragment != null;
-Index: app/src/main/res/layout/activity_add_community.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"#EFE9E9\"\r\n    tools:context=\".ui.Foro.lets_start.AddCommunity\">\r\n\r\n    <androidx.constraintlayout.widget.ConstraintLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\">\r\n\r\n        <RelativeLayout\r\n            android:id=\"@+id/relativeLayout4AddCommunity\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"24dp\"\r\n            android:layout_marginTop=\"34dp\"\r\n            android:layout_marginEnd=\"24dp\"\r\n            android:padding=\"12dp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n\r\n            <TextView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_alignParentTop=\"false\"\r\n                android:layout_centerHorizontal=\"true\"\r\n                android:layout_centerVertical=\"true\"\r\n                android:layout_marginLeft=\"16dp\"\r\n                android:text=\"@string/editCommunity_text1\"\r\n                android:textColor=\"#202020\"\r\n                android:textSize=\"20sp\" />\r\n\r\n            <ImageView\r\n                android:id=\"@+id/backToChooseCommunity\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"40dp\"\r\n                android:layout_alignParentLeft=\"true\"\r\n                android:layout_centerVertical=\"true\"\r\n                android:src=\"@drawable/icons_arrow_left_green\">\r\n\r\n            </ImageView>\r\n        </RelativeLayout>\r\n\r\n        <LinearLayout\r\n            android:id=\"@+id/linearLayout3\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"8dp\"\r\n            android:gravity=\"center\"\r\n            android:orientation=\"vertical\"\r\n            android:padding=\"5dp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/relativeLayout4AddCommunity\">\r\n\r\n            <com.makeramen.roundedimageview.RoundedImageView\r\n                android:id=\"@+id/img_bS_Addcommunity\"\r\n                android:layout_width=\"120dp\"\r\n                android:layout_height=\"120dp\"\r\n                android:layout_margin=\"10dp\"\r\n                android:scaleType=\"centerCrop\"\r\n                android:src=\"@drawable/log_portada\"\r\n                app:riv_corner_radius=\"10dp\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/changeImg_addCommunity\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:text=\"@string/editCommunity_text2\"\r\n                android:textColor=\"@color/blue\" />\r\n        </LinearLayout>\r\n\r\n        <LinearLayout\r\n            android:id=\"@+id/linearLayout4\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"16dp\"\r\n            android:orientation=\"vertical\"\r\n            android:padding=\"20dp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/linearLayout3\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/textView26\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginBottom=\"8dp\"\r\n                android:text=\"@string/editCommunity_text3\" />\r\n\r\n            <EditText\r\n                android:id=\"@+id/input_name_addCommunity\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:ems=\"10\"\r\n                android:inputType=\"textPersonName\" />\r\n        </LinearLayout>\r\n\r\n        <LinearLayout\r\n            android:id=\"@+id/linearLayout\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"8dp\"\r\n            android:orientation=\"vertical\"\r\n            android:padding=\"20dp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintHorizontal_bias=\"0.0\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/linearLayout4\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/textView27\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginBottom=\"8dp\"\r\n                android:text=\"@string/editCommunity_text5\" />\r\n\r\n            <EditText\r\n                android:id=\"@+id/input_desc_addCommunity\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:ems=\"10\"\r\n                android:gravity=\"start|top\"\r\n                android:inputType=\"textMultiLine\" />\r\n\r\n        </LinearLayout>\r\n\r\n        <Button\r\n            android:id=\"@+id/btn_createCommunity\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"16dp\"\r\n            android:layout_marginEnd=\"20dp\"\r\n            android:layout_marginBottom=\"20dp\"\r\n            android:background=\"@drawable/button_enter_machine\"\r\n            android:text=\"@string/editCommunity_text6\"\r\n            android:textColor=\"@color/white\"\r\n            app:layout_constraintBottom_toBottomOf=\"parent\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/linearLayout\" />\r\n\r\n    </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n</ScrollView>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_add_community.xml	(revision 6a46eaa504348e2e3bd04e08f565c03719a31f9d)
-+++ app/src/main/res/layout/activity_add_community.xml	(date 1611254761375)
-@@ -98,7 +98,9 @@
-                 android:layout_width="match_parent"
-                 android:layout_height="wrap_content"
-                 android:ems="10"
--                android:inputType="textPersonName" />
-+                android:inputType="textPersonName"
-+                android:maxLines="1"
-+                android:maxLength="40"/>
-         </LinearLayout>
- 
-         <LinearLayout
-Index: app/src/main/res/layout/activity_planta1.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:background=\"@drawable/bg4\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\"com.example.infinitycrop.ui.MachineControl.planta1\">\r\n\r\n    <RelativeLayout\r\n\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:layout_marginBottom=\"7.3dp\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n\r\n            android:orientation=\"vertical\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/backDashboard\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"40dp\"\r\n                android:layout_marginLeft=\"10dp\"\r\n                android:layout_marginTop=\"30dp\"\r\n                android:src=\"@drawable/icons_arrow_left_green\">\r\n\r\n            </ImageView>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"12dp\"\r\n                android:orientation=\"horizontal\">\r\n\r\n                <TextView\r\n                    android:id=\"@+id/textView\"\r\n                    android:layout_width=\"469dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginLeft=\"10dp\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"clip_horizontal\"\r\n                    android:text=\"Piso 1\"\r\n                    android:textColor=\"@color/white\"\r\n                    android:textSize=\"25dp\"\r\n                    android:textStyle=\"bold\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"bottom|right\"\r\n                    android:orientation=\"vertical\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:orientation=\"vertical\" />\r\n            </LinearLayout>\r\n\r\n            <me.sujanpoudel.wheelview.WheelView\r\n                android:id=\"@+id/wheelview\"\r\n                android:layout_width=\"290dp\"\r\n                android:layout_height=\"203dp\"\r\n                android:layout_gravity=\"center\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\"\r\n                app:wheelAnchorAngle=\"270\"\r\n                app:wheelAnimationDuration=\"500\"\r\n                app:wheelArcBackgroundColor=\"@color/colorSecondaryDark\"\r\n                app:wheelCenterIcon=\"@drawable/logo_without_background\"\r\n                app:wheelDividerStrokeWidth=\"1dp\"\r\n                app:wheelMode=\"ANIMATE_TO_ANCHOR\"\r\n                app:wheelSelectedArcBackgroundColor=\"@color/colorSecondary\"\r\n                app:wheelSelectedTextColor=\"@color/white\"\r\n                app:wheelStartAngle=\"315\"\r\n                app:wheelTextColor=\"@color/white\"\r\n                app:wheelTextSize=\"16sp\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_marginTop=\"10dp\"\r\n                android:orientation=\"horizontal\"\r\n                android:paddingLeft=\"20dp\">\r\n\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_marginLeft=\"1dp\"\r\n                    android:layout_marginRight=\"20dp\"\r\n                    android:background=\"@drawable/rectangle\"\r\n                    android:orientation=\"horizontal\">\r\n\r\n                    <LinearLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:layout_gravity=\"center\"\r\n                        android:layout_marginLeft=\"10dp\"\r\n                        android:layout_marginRight=\"15dp\"\r\n                        android:orientation=\"vertical\">\r\n\r\n                        <LinearLayout\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"40dp\"\r\n\r\n                            android:orientation=\"horizontal\">\r\n\r\n                            <TextView\r\n                                android:id=\"@+id/textViewinfo\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_gravity=\"center\"\r\n                                android:text=\"Pulsa el botón para editar:\"\r\n                                android:textColor=\"#000000\"\r\n                                android:textSize=\"16.7sp\"\r\n                                android:textStyle=\"normal\" />\r\n\r\n                            <Button\r\n                                android:id=\"@+id/btnedit\"\r\n                                android:layout_width=\"match_parent\"\r\n                                android:layout_marginTop=\"2dp\"\r\n                                android:layout_height=\"30dp\"\r\n                                android:background=\"@drawable/btn_scan\"\r\n                                android:layout_marginLeft=\"10dp\"\r\n                                android:text=\"Editar\"\r\n                                android:textColor=\"#FFFFFF\" />\r\n\r\n                        </LinearLayout>\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textView23\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"12dp\"\r\n                            android:text=\"Sección ocupada:\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n\r\n                        <LinearLayout\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:orientation=\"horizontal\">\r\n\r\n                            <CheckBox\r\n                                android:id=\"@+id/checkBoxSi\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_weight=\"1\"\r\n                                android:text=\"Si\" />\r\n\r\n                            <CheckBox\r\n                                android:id=\"@+id/checkBoxNo\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_weight=\"1\"\r\n                                android:checked=\"true\"\r\n                                android:clickable=\"false\"\r\n                                android:text=\"No\" />\r\n                        </LinearLayout>\r\n\r\n\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textView7\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"12dp\"\r\n                            android:text=\"Nombre de la especie:\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n\r\n                        <EditText\r\n                            android:id=\"@+id/editTextNobrep\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:background=\"@android:color/transparent\"\r\n                            android:maxLines=\"1\"\r\n                            android:paddingTop=\"5dp\"\r\n                            android:textColorHint=\"#9E9D9D\"\r\n                            android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                            android:textSize=\"15sp\"\r\n                            android:hint=\"Toca para añadir\"\r\n\r\n                            />\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textedit\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"22.3dp\"\r\n                            android:text=\"Programar una alarma\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/editHour\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:background=\"@android:color/transparent\"\r\n                            android:ems=\"10\"\r\n                            android:text=\"Toca para añadir\"\r\n                            android:maxLines=\"1\"\r\n                            android:paddingTop=\"5dp\"\r\n                            android:textColorHint=\"#333232\"\r\n                            android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                            android:textSize=\"15sp\" />\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textView11\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"22.3dp\"\r\n                            android:text=\"Ubicación de la planta\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n                        <TextView\r\n                            android:id=\"@+id/txtStation\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:background=\"@android:color/transparent\"\r\n                            android:ems=\"10\"\r\n                            android:text=\"Esta planta se encuentra en la estación número: \"\r\n                            android:editable=\"false\"\r\n                            android:maxLines=\"1\"\r\n                            android:paddingTop=\"5dp\"\r\n                            android:textColorHint=\"#333232\"\r\n                            android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                            android:textSize=\"13sp\" />\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:layout_marginBottom=\"20dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <Button\r\n\r\n                            android:id=\"@+id/btn_save\"\r\n                            android:layout_width=\"151dp\"\r\n                            android:layout_height=\"49dp\"\r\n                            android:layout_gravity=\"center\"\r\n                            android:background=\"@drawable/btn_scan\"\r\n                            android:onClick=\"saveNote\"\r\n                            android:text=\"Guardar cambios\"\r\n                            android:textColor=\"#FFFFFF\"\r\n                            android:visibility=\"gone\">\r\n\r\n                        </Button>\r\n\r\n                        <RelativeLayout\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:paddingTop=\"5dp\">\r\n\r\n                        </RelativeLayout>\r\n\r\n\r\n                    </LinearLayout>\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:id=\"@+id/btn_registMachine\"\r\n                android:layout_width=\"90dp\"\r\n                android:layout_height=\"41dp\"\r\n                android:layout_gravity=\"right\"\r\n                android:layout_marginTop=\"40.3dp\"\r\n                android:layout_marginBottom=\"16.7dp\"\r\n                android:background=\"@drawable/btn_login\"\r\n                android:foregroundGravity=\"right\"\r\n                android:gravity=\"center\"\r\n                android:orientation=\"vertical\"\r\n\r\n                android:visibility=\"gone\">\r\n\r\n\r\n            </LinearLayout>\r\n\r\n\r\n        </LinearLayout>\r\n\r\n        <androidx.constraintlayout.widget.ConstraintLayout\r\n            android:id=\"@+id/constraitR\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            tools:visibility=\"gone\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/imageprevius\"\r\n                android:layout_width=\"400dp\"\r\n                android:layout_height=\"731dp\"\r\n                android:alpha=\"0.4\"\r\n                app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\"\r\n                app:srcCompat=\"@color/black\"\r\n                tools:visibility=\"gone\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/txtInfoD\"\r\n                android:layout_width=\"264dp\"\r\n                android:layout_height=\"81dp\"\r\n                android:background=\"@color/white\"\r\n                android:paddingTop=\"10dp\"\r\n                android:text=\"Toca una casilla para visualizar los datos\"\r\n                android:textAlignment=\"center\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"20sp\"\r\n                app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"@+id/imageprevius\"\r\n                tools:visibility=\"gone\" />\r\n        </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n\r\n    </RelativeLayout>\r\n\r\n\r\n</ScrollView>\r\n\r\n\r\n\r\n\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_planta1.xml	(revision 6a46eaa504348e2e3bd04e08f565c03719a31f9d)
-+++ app/src/main/res/layout/activity_planta1.xml	(date 1611254761360)
-@@ -184,12 +184,13 @@
-                             android:layout_width="match_parent"
-                             android:layout_height="wrap_content"
-                             android:background="@android:color/transparent"
--                            android:maxLines="1"
-                             android:paddingTop="5dp"
-                             android:textColorHint="#9E9D9D"
-                             android:textCursorDrawable="@drawable/cursor_color"
-                             android:textSize="15sp"
-                             android:hint="Toca para añadir"
-+                            android:maxLines="1"
-+                            android:maxLength="40"
- 
-                             />
- 
-@@ -218,7 +219,8 @@
-                             android:paddingTop="5dp"
-                             android:textColorHint="#333232"
-                             android:textCursorDrawable="@drawable/cursor_color"
--                            android:textSize="15sp" />
-+                            android:textSize="15sp"
-+                            android:maxLength="40"/>
- 
-                         <View
-                             android:layout_width="match_parent"
-Index: app/src/main/res/layout/activity_register.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"#F6F1F1\">\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:background=\"#F6F1F1\"\r\n        android:orientation=\"vertical\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"38.3dp\"\r\n            android:orientation=\"horizontal\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/textView\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"bottom\"\r\n                android:layout_marginLeft=\"32dp\"\r\n                android:layout_weight=\"1\"\r\n                android:gravity=\"clip_horizontal\"\r\n                android:text=\"@string/title_register\"\r\n                android:textColor=\"#000000\"\r\n                android:textSize=\"27sp\"\r\n                android:textStyle=\"normal\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"match_parent\"\r\n                android:layout_weight=\"1\"\r\n                android:gravity=\"bottom|right\"\r\n                android:orientation=\"vertical\">\r\n\r\n                <TextView\r\n                    android:id=\"@+id/textView5\"\r\n                    android:layout_width=\"30dp\"\r\n                    android:layout_height=\"30dp\"\r\n                    android:layout_marginRight=\"8dp\"\r\n                    android:background=\"@drawable/circulo_pequenyo\" />\r\n\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:orientation=\"vertical\">\r\n\r\n                <FrameLayout\r\n                    android:layout_width=\"50dp\"\r\n                    android:layout_height=\"100dp\"\r\n                    android:background=\"@drawable/medio_circulo\">\r\n\r\n                </FrameLayout>\r\n            </LinearLayout>\r\n        </LinearLayout>\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"283dp\"\r\n            android:layout_marginTop=\"28dp\"\r\n            android:orientation=\"horizontal\"\r\n            android:paddingLeft=\"14.5dp\">\r\n\r\n            <View\r\n                android:layout_width=\"5.6dp\"\r\n                android:layout_height=\"match_parent\"\r\n                android:background=\"#94c804\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:layout_marginLeft=\"13dp\"\r\n                android:layout_marginRight=\"35.6dp\"\r\n                android:layout_weight=\"1\"\r\n                android:background=\"@drawable/rectangle\"\r\n                android:orientation=\"horizontal\">\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"280dp\"\r\n                    android:layout_marginLeft=\"13dp\"\r\n                    android:layout_marginRight=\"19dp\"\r\n                    android:orientation=\"vertical\">\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/textViewinfo\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginTop=\"20.3dp\"\r\n                        android:gravity=\"center_horizontal\"\r\n                        android:text=\"@string/title_bienvR\"\r\n                        android:textColor=\"#000000\"\r\n                        android:textSize=\"16.7sp\"\r\n                        android:textStyle=\"normal\" />\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/textView7\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginTop=\"22.3dp\"\r\n                        android:text=\"@string/title_userR\"\r\n                        android:textColor=\"#9E9D9D\" />\r\n\r\n                    <EditText\r\n                        android:id=\"@+id/editTextTextPersonName\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:background=\"@android:color/transparent\"\r\n                        android:maxLines=\"1\"\r\n                        android:paddingTop=\"5dp\"\r\n                        android:textColorHint=\"#333232\"\r\n                        android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                        android:textSize=\"15sp\" />\r\n\r\n                    <View\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"1dp\"\r\n                        android:layout_marginTop=\"5dp\"\r\n                        android:background=\"#9e9e9e\" />\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/textView11\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginTop=\"22.3dp\"\r\n                        android:text=\"@string/title_nameR\"\r\n                        android:textColor=\"#9E9D9D\" />\r\n\r\n                    <EditText\r\n                        android:id=\"@+id/editTextTextPersonName2\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:background=\"@android:color/transparent\"\r\n                        android:maxLines=\"1\"\r\n                        android:paddingTop=\"5dp\"\r\n                        android:textColorHint=\"#333232\"\r\n                        android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                        android:textSize=\"15sp\" />\r\n\r\n                    <View\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"1dp\"\r\n                        android:layout_marginTop=\"5dp\"\r\n                        android:background=\"#9e9e9e\" />\r\n\r\n                    <RelativeLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:paddingTop=\"5dp\">\r\n\r\n                    </RelativeLayout>\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/textView8\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginTop=\"23dp\"\r\n                        android:text=\"@string/title_passwordR\"\r\n                        android:textColor=\"#9e9d9d\"\r\n                        android:textSize=\"15sp\" />\r\n\r\n                    <EditText\r\n                        android:id=\"@+id/editTextTextPassword\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:background=\"@android:color/transparent\"\r\n                        android:inputType=\"textPassword\"\r\n                        android:maxLines=\"1\"\r\n                        android:textColor=\"#333232\"\r\n                        android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                        android:textSize=\"15sp\" />\r\n\r\n                    <View\r\n                        android:id=\"@+id/view2\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"1dp\"\r\n                        android:layout_marginTop=\"5dp\"\r\n                        android:background=\"#9e9e9e\" />\r\n\r\n\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n        </LinearLayout>\r\n\r\n        <LinearLayout\r\n            android:id=\"@+id/btn_login\"\r\n            android:layout_width=\"90dp\"\r\n            android:layout_height=\"41dp\"\r\n            android:layout_gravity=\"right\"\r\n            android:layout_marginTop=\"40.3dp\"\r\n            android:layout_marginBottom=\"16.7dp\"\r\n            android:background=\"@drawable/btn_login\"\r\n            android:foregroundGravity=\"right\"\r\n            android:gravity=\"center\"\r\n            android:onClick=\"onclick\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/textView9\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center\"\r\n                android:gravity=\"center\"\r\n                android:text=\"@string/title_registrar\"\r\n                android:textColor=\"@android:color/background_light\"\r\n                android:textStyle=\"bold\" />\r\n        </LinearLayout>\r\n\r\n    </LinearLayout>\r\n\r\n</ScrollView>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_register.xml	(revision 6a46eaa504348e2e3bd04e08f565c03719a31f9d)
-+++ app/src/main/res/layout/activity_register.xml	(date 1611254761407)
-@@ -8,7 +8,8 @@
-         android:layout_width="match_parent"
-         android:layout_height="match_parent"
-         android:background="#F6F1F1"
--        android:orientation="vertical">
-+        android:orientation="vertical"
-+        >
- 
-         <LinearLayout
-             android:layout_width="match_parent"
-@@ -111,11 +112,12 @@
-                         android:layout_width="match_parent"
-                         android:layout_height="wrap_content"
-                         android:background="@android:color/transparent"
--                        android:maxLines="1"
-                         android:paddingTop="5dp"
-                         android:textColorHint="#333232"
-                         android:textCursorDrawable="@drawable/cursor_color"
--                        android:textSize="15sp" />
-+                        android:textSize="15sp"
-+                        android:maxLines="1"
-+                        android:maxLength="40"/>
- 
-                     <View
-                         android:layout_width="match_parent"
-@@ -136,11 +138,12 @@
-                         android:layout_width="match_parent"
-                         android:layout_height="wrap_content"
-                         android:background="@android:color/transparent"
--                        android:maxLines="1"
-                         android:paddingTop="5dp"
-                         android:textColorHint="#333232"
-                         android:textCursorDrawable="@drawable/cursor_color"
--                        android:textSize="15sp" />
-+                        android:textSize="15sp"
-+                        android:maxLines="1"
-+                        android:maxLength="40"/>
- 
-                     <View
-                         android:layout_width="match_parent"
-@@ -173,7 +176,8 @@
-                         android:maxLines="1"
-                         android:textColor="#333232"
-                         android:textCursorDrawable="@drawable/cursor_color"
--                        android:textSize="15sp" />
-+                        android:textSize="15sp"
-+                        android:maxLength="40"/>
- 
-                     <View
-                         android:id="@+id/view2"
-Index: app/src/main/res/layout/qr_scanner.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    android:background=\"@drawable/bg2\"\r\n    android:layout_height=\"match_parent\">\r\n\r\n    <RelativeLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:layout_marginBottom=\"7.3dp\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n\r\n            android:orientation=\"vertical\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/backTomachinelist\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"40dp\"\r\n                android:layout_marginLeft=\"10dp\"\r\n                android:layout_marginTop=\"30dp\"\r\n                android:src=\"@drawable/icons_arrow_left_green\">\r\n\r\n            </ImageView>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"40dp\"\r\n                android:orientation=\"horizontal\">\r\n\r\n                <TextView\r\n                    android:id=\"@+id/textView\"\r\n                    android:layout_width=\"469dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_gravity=\"bottom\"\r\n                    android:layout_marginLeft=\"10dp\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"clip_horizontal\"\r\n                    android:text=\"@string/title_register_machine\"\r\n                    android:textColor=\"@color/black\"\r\n                    android:textSize=\"25dp\"\r\n                    android:textStyle=\"bold\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"bottom|right\"\r\n                    android:orientation=\"vertical\"/>\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:orientation=\"vertical\"\r\n                />\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"356dp\"\r\n                android:layout_marginTop=\"28dp\"\r\n                android:orientation=\"horizontal\"\r\n                >\r\n\r\n             <LinearLayout\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:orientation=\"horizontal\">\r\n\r\n            </LinearLayout>\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"344dp\"\r\n                    android:layout_marginLeft=\"13dp\"\r\n                    android:layout_marginRight=\"35.6dp\"\r\n                    android:layout_weight=\"1\"\r\n                    android:background=\"@drawable/rectangle\"\r\n                    android:orientation=\"horizontal\">\r\n\r\n                    <LinearLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:layout_marginLeft=\"13dp\"\r\n                        android:layout_marginRight=\"19dp\"\r\n                        android:orientation=\"vertical\">\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textViewinfo\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"20.3dp\"\r\n                            android:gravity=\"center_horizontal\"\r\n                            android:text=\"@string/title_infoMachine\"\r\n                            android:textColor=\"#000000\"\r\n                            android:textSize=\"16.7sp\"\r\n                            android:textStyle=\"normal\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textView7\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"22.3dp\"\r\n                            android:text=\"@string/title_name_machine\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n\r\n                        <EditText\r\n                            android:id=\"@+id/editTextTextMchineName\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:background=\"@android:color/transparent\"\r\n                            android:maxLines=\"1\"\r\n                            android:paddingTop=\"5dp\"\r\n                            android:textColorHint=\"#333232\"\r\n                            android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                            android:textSize=\"15sp\" />\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"5dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textView11\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"22.3dp\"\r\n                            android:text=\"@string/title_name_model\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n\r\n                        <EditText\r\n                            android:id=\"@+id/editTextTextMachineModel\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:background=\"#F6F1F1\"\r\n                            android:editable=\"false\"\r\n                            android:maxLines=\"1\"\r\n                            android:paddingTop=\"5dp\"\r\n                            android:text=\"Primero escanea el QR\"\r\n                            android:textColor=\"#A19F9F\"\r\n\r\n                            android:textColorHint=\"#F6F1F1\"\r\n                            android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                            android:textSize=\"15sp\" />\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"5dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n\r\n                        <CheckBox\r\n                            android:id=\"@+id/btn_fav\"\r\n                            android:layout_width=\"260dp\"\r\n                            android:layout_height=\"28dp\"\r\n                            android:layout_marginTop=\"22.3dp\"\r\n                            android:text=\"@string/title_name_favorites\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n\r\n\r\n                        <Button\r\n                            android:id=\"@+id/btn_scan\"\r\n                            android:layout_width=\"151dp\"\r\n                            android:layout_height=\"49dp\"\r\n                            android:layout_gravity=\"center\"\r\n                            android:layout_marginTop=\"20dp\"\r\n                            android:background=\"@drawable/btn_scan\"\r\n                            android:text=\"@string/title_scan_machine\"\r\n                            android:textColor=\"#FFFFFF\"\r\n                            >\r\n\r\n                        </Button>\r\n\r\n                        <RelativeLayout\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:paddingTop=\"5dp\">\r\n\r\n                        </RelativeLayout>\r\n\r\n\r\n                    </LinearLayout>\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:visibility=\"gone\"\r\n                android:id=\"@+id/btn_registMachine\"\r\n                android:layout_width=\"90dp\"\r\n                android:layout_height=\"41dp\"\r\n                android:layout_gravity=\"right\"\r\n                android:layout_marginTop=\"40.3dp\"\r\n                android:layout_marginBottom=\"16.7dp\"\r\n                android:background=\"@drawable/btn_login\"\r\n                android:foregroundGravity=\"right\"\r\n                android:gravity=\"center\"\r\n                android:onClick=\"onclick\"\r\n                android:orientation=\"vertical\">\r\n\r\n\r\n            </LinearLayout>\r\n            <TextView\r\n                android:layout_marginTop=\"20dp\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center\"\r\n                android:textStyle=\"bold\"\r\n                android:textColor=\"@color/black\"\r\n                android:text=\"Busca tu código en la máquina y escanealo\">\r\n\r\n            </TextView>\r\n            <ImageView\r\n                android:layout_marginTop=\"20dp\"\r\n                android:layout_width=\"76dp\"\r\n                android:layout_height=\"76dp\"\r\n                android:background=\"@drawable/qr_code\"\r\n                android:layout_gravity=\"center\">\r\n\r\n            </ImageView>\r\n        </LinearLayout>\r\n\r\n\r\n    </RelativeLayout>\r\n\r\n\r\n</ScrollView>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/qr_scanner.xml	(revision 6a46eaa504348e2e3bd04e08f565c03719a31f9d)
-+++ app/src/main/res/layout/qr_scanner.xml	(date 1611254761313)
-@@ -112,11 +112,12 @@
-                             android:layout_width="match_parent"
-                             android:layout_height="wrap_content"
-                             android:background="@android:color/transparent"
--                            android:maxLines="1"
-                             android:paddingTop="5dp"
-                             android:textColorHint="#333232"
-                             android:textCursorDrawable="@drawable/cursor_color"
--                            android:textSize="15sp" />
-+                            android:textSize="15sp"
-+                            android:maxLines="1"
-+                            android:maxLength="40"/>
- 
-                         <View
-                             android:layout_width="match_parent"
-Index: app/src/main/res/layout/activity_create_post.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.Foro.main.Community.NewPost.CreatePost.CreatePost\">\r\n\r\n    <androidx.constraintlayout.widget.ConstraintLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\">\r\n\r\n\r\n        <ImageView\r\n            android:id=\"@+id/img_CreatePost\"\r\n            android:layout_width=\"150dp\"\r\n            android:layout_height=\"150dp\"\r\n            android:layout_marginTop=\"30dp\"\r\n            android:scaleType=\"centerCrop\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/textView32\" />\r\n\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:id=\"@+id/input_tittlePost\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginEnd=\"20dp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/txt_changeImgPost\">\r\n\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:id=\"@+id/input_editText_Createpost\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:hint=\"@string/posts_text4\" />\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n\r\n        <TextView\r\n            android:id=\"@+id/textView32\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"16dp\"\r\n            android:layout_marginBottom=\"30dp\"\r\n            android:text=\"@string/posts_text5\"\r\n            android:textColor=\"@color/black\"\r\n            android:textSize=\"22sp\"\r\n            app:layout_constraintBottom_toTopOf=\"@+id/img_CreatePost\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:id=\"@+id/inputDescriptionCreatePost\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:layout_marginTop=\"16dp\"\r\n            android:layout_marginEnd=\"20dp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/input_tittlePost\">\r\n\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:id=\"@+id/input_desc_editText_Createpost\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:hint=\"@string/posts_text6\" />\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        <TextView\r\n            android:id=\"@+id/textView33\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:layout_marginTop=\"18dp\"\r\n            android:text=\"@string/posts_text7\"\r\n            android:textSize=\"16sp\"\r\n            app:layout_constraintEnd_toStartOf=\"@+id/btn_createClimaCreatePost\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/inputDescriptionCreatePost\" />\r\n\r\n        <androidx.constraintlayout.widget.ConstraintLayout\r\n            android:id=\"@+id/btn_createClimaCreatePost\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"10dp\"\r\n            android:layout_marginEnd=\"20dp\"\r\n            android:background=\"@drawable/button_action_machine\"\r\n            android:padding=\"5dp\"\r\n            app:layout_constraintBottom_toBottomOf=\"@+id/textView33\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toEndOf=\"@+id/textView33\"\r\n            app:layout_constraintTop_toTopOf=\"@+id/textView33\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/imageView7\"\r\n                android:layout_width=\"30dp\"\r\n                android:layout_height=\"30dp\"\r\n                android:layout_marginStart=\"10dp\"\r\n                android:src=\"@drawable/icons_community_add_post\"\r\n                app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                app:layout_constraintEnd_toStartOf=\"@+id/textView34\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/textView34\"\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginStart=\"5dp\"\r\n                android:text=\"@string/posts_text9\"\r\n                app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toEndOf=\"@+id/imageView7\"\r\n                app:layout_constraintTop_toTopOf=\"parent\" />\r\n        </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n        <androidx.recyclerview.widget.RecyclerView\r\n            android:id=\"@+id/recyclerView\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:layout_marginTop=\"8dp\"\r\n            android:layout_marginEnd=\"20dp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/textView33\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/txt_changeImgPost\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"8dp\"\r\n            android:gravity=\"center\"\r\n            android:textColor=\"@color/blue\"\r\n            android:text=\"@string/posts_text8\"\r\n            app:layout_constraintEnd_toEndOf=\"@+id/img_CreatePost\"\r\n            app:layout_constraintStart_toStartOf=\"@+id/img_CreatePost\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/img_CreatePost\" />\r\n\r\n        <Button\r\n            android:id=\"@+id/btnBackCreatePost\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:layout_marginTop=\"24dp\"\r\n            android:background=\"@drawable/button_action_machine\"\r\n            android:padding=\"10dp\"\r\n            android:text=\"@string/posts_text11\"\r\n            android:textColor=\"@color/colorPrimaryDashboard\"\r\n            app:layout_constraintBottom_toBottomOf=\"@+id/btn_createButtonPost\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/recyclerView\" />\r\n\r\n        <Button\r\n            android:id=\"@+id/btn_createButtonPost\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"24dp\"\r\n            android:layout_marginEnd=\"20dp\"\r\n            android:layout_marginBottom=\"30dp\"\r\n            android:background=\"@drawable/button_enter_machine\"\r\n            android:padding=\"10dp\"\r\n            android:text=\"@string/posts_text10\"\r\n            android:textColor=\"@color/white\"\r\n            app:layout_constraintBottom_toBottomOf=\"parent\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/recyclerView\" />\r\n\r\n    </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n\r\n</ScrollView>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_create_post.xml	(revision 6a46eaa504348e2e3bd04e08f565c03719a31f9d)
-+++ app/src/main/res/layout/activity_create_post.xml	(date 1611254761383)
-@@ -36,7 +36,9 @@
-                 android:id="@+id/input_editText_Createpost"
-                 android:layout_width="match_parent"
-                 android:layout_height="wrap_content"
--                android:hint="@string/posts_text4" />
-+                android:hint="@string/posts_text4"
-+                android:maxLines="1"
-+                android:maxLength="40"/>
-         </com.google.android.material.textfield.TextInputLayout>
- 
- 
-@@ -69,7 +71,8 @@
-                 android:id="@+id/input_desc_editText_Createpost"
-                 android:layout_width="match_parent"
-                 android:layout_height="wrap_content"
--                android:hint="@string/posts_text6" />
-+                android:hint="@string/posts_text6"
-+               />
-         </com.google.android.material.textfield.TextInputLayout>
- 
-         <TextView
-Index: app/src/main/java/com/example/infinitycrop/ui/Foro/main/Profile/ProfileForoFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.Foro.main.Profile;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport com.example.infinitycrop.R;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link ProfileForoFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class ProfileForoFragment extends Fragment {\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public ProfileForoFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment ProfileForoFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static ProfileForoFragment newInstance(String param1, String param2) {\r\n        ProfileForoFragment fragment = new ProfileForoFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        return inflater.inflate(R.layout.fragment_profile_foro, container, false);\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/Foro/main/Profile/ProfileForoFragment.java	(revision 6a46eaa504348e2e3bd04e08f565c03719a31f9d)
-+++ app/src/main/java/com/example/infinitycrop/ui/Foro/main/Profile/ProfileForoFragment.java	(date 1611249048476)
-@@ -1,14 +1,55 @@
- package com.example.infinitycrop.ui.Foro.main.Profile;
- 
-+import android.app.Activity;
-+import android.content.Intent;
-+import android.graphics.Color;
-+import android.net.Uri;
- import android.os.Bundle;
--
--import androidx.fragment.app.Fragment;
--
- import android.view.LayoutInflater;
- import android.view.View;
- import android.view.ViewGroup;
-+import android.widget.Button;
-+import android.widget.EditText;
-+import android.widget.ImageView;
-+import android.widget.LinearLayout;
-+import android.widget.TextView;
-+import android.widget.Toast;
- 
-+import androidx.annotation.NonNull;
-+import androidx.annotation.Nullable;
-+import androidx.fragment.app.Fragment;
-+
-+import com.bumptech.glide.Glide;
- import com.example.infinitycrop.R;
-+import com.example.infinitycrop.ui.Foro.main.Community.NewPost.CreatePost.CreatePost;
-+import com.example.infinitycrop.ui.MachineControl.planta1;
-+import com.google.android.gms.tasks.Continuation;
-+import com.google.android.gms.tasks.OnCompleteListener;
-+import com.google.android.gms.tasks.OnFailureListener;
-+import com.google.android.gms.tasks.OnSuccessListener;
-+import com.google.android.gms.tasks.Task;
-+import com.google.firebase.Timestamp;
-+import com.google.firebase.auth.FirebaseAuth;
-+import com.google.firebase.firestore.DocumentReference;
-+import com.google.firebase.firestore.DocumentSnapshot;
-+import com.google.firebase.firestore.EventListener;
-+import com.google.firebase.firestore.FirebaseFirestore;
-+import com.google.firebase.firestore.FirebaseFirestoreException;
-+import com.google.firebase.firestore.QuerySnapshot;
-+import com.google.firebase.storage.StorageReference;
-+import com.google.firebase.storage.UploadTask;
-+import com.squareup.picasso.Picasso;
-+import com.theartofdev.edmodo.cropper.CropImage;
-+import com.theartofdev.edmodo.cropper.CropImageView;
-+
-+import java.io.File;
-+import java.util.Date;
-+import java.util.HashMap;
-+import java.util.HashSet;
-+import java.util.Map;
-+import java.util.UUID;
-+
-+import static android.app.Activity.RESULT_OK;
- 
- /**
-  * A simple {@link Fragment} subclass.
-@@ -16,7 +57,19 @@
-  * create an instance of this fragment.
-  */
- public class ProfileForoFragment extends Fragment {
--
-+    private StorageReference mStorageRef;
-+    private String image_url;
-+    private FirebaseFirestore db;
-+    private FirebaseAuth firebaseAuth;
-+    private String uid;
-+    private String Nuser;
-+    Button btnEdit,btnSave;
-+    EditText txtNamep,descriptionP;
-+    ImageView imgP;
-+    ImageView lapiz1,lapiz2,lapiz3;
-+    TextView txtPost,txtFollow;
-+    LinearLayout l1p;
-+    private  Uri resultUri;
-     // TODO: Rename parameter arguments, choose names that match
-     // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
-     private static final String ARG_PARAM1 = "param1";
-@@ -60,7 +113,112 @@
-     @Override
-     public View onCreateView(LayoutInflater inflater, ViewGroup container,
-                              Bundle savedInstanceState) {
-+
-         // Inflate the layout for this fragment
--        return inflater.inflate(R.layout.fragment_profile_foro, container, false);
--    }
-+        final View root = inflater.inflate(R.layout.fragment_profile_foro, container, false);
-+        db = FirebaseFirestore.getInstance();
-+        firebaseAuth = FirebaseAuth.getInstance();
-+        uid = firebaseAuth.getUid();
-+        //Declaracion de los elementos
-+        lapiz1 = root.findViewById(R.id.pencil1);
-+        lapiz2 = root.findViewById(R.id.pencil2);
-+        lapiz3 = root.findViewById(R.id.pencil3);
-+        l1p = root.findViewById(R.id.layout1P);
-+        imgP = root.findViewById(R.id.imgP);
-+        imgP.setEnabled(false);
-+        btnEdit = root.findViewById(R.id.btneditDesc);
-+        btnSave = root.findViewById(R.id.btn_saveP);
-+        txtNamep = root.findViewById(R.id.nameP);
-+        txtNamep.setEnabled(false);
-+        descriptionP = root.findViewById(R.id.progiledescription);
-+        descriptionP.setEnabled(false);
-+        txtFollow = root.findViewById(R.id.followingP);
-+        txtPost = root.findViewById(R.id.txtPostN);
-+
-+
-+        String name;
-+            //firebase
-+        DocumentReference docRef = db.collection("Foro user").document(uid);
-+        docRef.addSnapshotListener(new EventListener<DocumentSnapshot>() {
-+            @Override
-+            public void onEvent(@Nullable DocumentSnapshot snapshot,
-+                                @Nullable FirebaseFirestoreException e) {
-+                if (e != null) {
-+
-+                    return;
-+                }
-+
-+                if (snapshot != null && snapshot.exists()) {
-+                    String nombre = snapshot.getString("name");
-+                    String descipcion = snapshot.getString("description");
-+                    String foto =snapshot.getString("url");
-+
-+                    txtNamep.setText(nombre);
-+                    /*imgP.setText(link);*/
-+                    descriptionP.setText(descipcion);
-+                    if(!foto.equals("")){
-+                        Picasso.get().load(foto).into(imgP);
-+                    }
-+                } else {
-+
-+                }
-+            }
-+        });
-+
-+        db.collection("Foro user").document(uid).collection("Following")
-+
-+                .addSnapshotListener(new EventListener<QuerySnapshot>() {
-+                    @Override
-+                    public void onEvent(@Nullable QuerySnapshot snapshots,
-+                                        @Nullable FirebaseFirestoreException e) {
-+                        if (e != null) {
-+
-+                            return;
-+                        }
-+
-+                        int cont=0;
-+                        for (DocumentSnapshot doc : snapshots) {
-+                            cont++;
-+
-+                        }
-+                        String contador=String.valueOf(cont);
-+                        txtFollow.setText(contador);
-+                    }
-+                });
-+        db.collection("Posts").addSnapshotListener(new EventListener<QuerySnapshot>() {
-+            @Override
-+            public void onEvent(@Nullable QuerySnapshot snapshots,
-+                                @Nullable FirebaseFirestoreException e) {
-+                if (e != null) {
-+
-+                    return;
-+                }
-+
-+                int cont=0;
-+                for (DocumentSnapshot doc : snapshots) {
-+                    if(doc.getString("creator").equals(uid)) {
-+                        cont++;
-+                    }
-+                }
-+                String contador=String.valueOf(cont);
-+                txtPost.setText(contador);
-+            }
-+        });
-+
-+        //boton editar
-+        btnEdit.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                Intent intent = new Intent(getActivity().getApplication(), EditProfileActivity.class);
-+                startActivity(intent);
-+            }
-+
-+            });
-+
-+
-+        return root;
-+
-+    }
-+
-+
- }
-\ No newline at end of file
-Index: app/src/main/res/layout/fragment_on_boarding3.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"@color/blue\">\r\n\r\n    <ImageView\r\n        android:id=\"@+id/backToGuide\"\r\n        android:layout_width=\"243dp\"\r\n        android:layout_height=\"289dp\"\r\n        android:src=\"@drawable/tapicon\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"@+id/textView2\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/textView2\"\r\n        app:layout_constraintVertical_bias=\"0.187\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/textView2\"\r\n        android:layout_width=\"240dp\"\r\n        android:layout_height=\"20dp\"\r\n        android:layout_marginTop=\"25dp\"\r\n        android:text=\"Herramientas a tu disposición\"\r\n        android:textColor=\"@color/yellow\"\r\n        android:textSize=\"16sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintBottom_toTopOf=\"@+id/guideline3\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.144\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"\r\n        app:layout_constraintVertical_bias=\"0.0\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/btn_skip\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:text=\"Saltar\"\r\n        android:textColor=\"@color/yellow\"\r\n        android:textSize=\"16sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintBottom_toBottomOf=\"@+id/textView2\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toEndOf=\"@+id/textView2\"\r\n        app:layout_constraintTop_toTopOf=\"@+id/textView2\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/textView17\"\r\n        android:layout_width=\"306dp\"\r\n        android:layout_height=\"65dp\"\r\n        android:fontFamily=\"sans-serif-light\"\r\n        android:text=\"Todo el control\"\r\n        android:textSize=\"46sp\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/backToGuide\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"@+id/backToGuide\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/backToGuide\"\r\n        app:layout_constraintVertical_bias=\"0.0\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/textView12\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:fontFamily=\"sans-serif-condensed\"\r\n        android:text=\"En tus manos\"\r\n        android:textColor=\"@color/yellow\"\r\n        android:textSize=\"30sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/backToGuide\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"@+id/textView17\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/textView17\"\r\n        app:layout_constraintVertical_bias=\"0.0\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/textView18\"\r\n        android:layout_width=\"147dp\"\r\n        android:layout_height=\"43dp\"\r\n        android:fontFamily=\"sans-serif-light\"\r\n\r\n        android:text=\"Visualiza y supervisa el rendimieno de tu cultivo de forma fácil y sencilla\"\r\n        android:textSize=\"12sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintBottom_toTopOf=\"@+id/guideline5\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/textView12\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"@+id/textView12\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/textView12\"\r\n        app:layout_constraintVertical_bias=\"0.0\" />\r\n\r\n    <ImageView\r\n        android:layout_width=\"50dp\"\r\n        android:layout_height=\"10dp\"\r\n        android:src=\"@drawable/tab3\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"@+id/textView17\"\r\n        app:layout_constraintTop_toTopOf=\"@+id/guideline5\"\r\n        app:layout_constraintVertical_bias=\"0.076\" />\r\n\r\n    <androidx.constraintlayout.widget.Guideline\r\n        android:id=\"@+id/guideline3\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:orientation=\"horizontal\"\r\n        app:layout_constraintGuide_begin=\"50dp\" />\r\n\r\n    <androidx.constraintlayout.widget.Guideline\r\n        android:id=\"@+id/guideline5\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:orientation=\"horizontal\"\r\n        app:layout_constraintGuide_end=\"50dp\" />\r\n\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_on_boarding3.xml	(revision 6a46eaa504348e2e3bd04e08f565c03719a31f9d)
-+++ app/src/main/res/layout/fragment_on_boarding3.xml	(date 1611251662261)
-@@ -4,7 +4,7 @@
-     xmlns:tools="http://schemas.android.com/tools"
-     android:layout_width="match_parent"
-     android:layout_height="match_parent"
--    android:background="@color/blue">
-+    android:background="@color/grenn">
- 
-     <ImageView
-         android:id="@+id/backToGuide"
-@@ -24,7 +24,7 @@
-         android:layout_height="20dp"
-         android:layout_marginTop="25dp"
-         android:text="Herramientas a tu disposición"
--        android:textColor="@color/yellow"
-+        android:textColor="@color/colorSecondaryLight"
-         android:textSize="16sp"
-         android:textStyle="bold"
-         app:layout_constraintBottom_toTopOf="@+id/guideline3"
-@@ -39,7 +39,7 @@
-         android:layout_width="wrap_content"
-         android:layout_height="wrap_content"
-         android:text="Saltar"
--        android:textColor="@color/yellow"
-+        android:textColor="@color/colorSecondaryLight"
-         android:textSize="16sp"
-         android:textStyle="bold"
-         app:layout_constraintBottom_toBottomOf="@+id/textView2"
-@@ -51,6 +51,7 @@
-         android:id="@+id/textView17"
-         android:layout_width="306dp"
-         android:layout_height="65dp"
-+        android:textColor="@color/white"
-         android:fontFamily="sans-serif-light"
-         android:text="Todo el control"
-         android:textSize="46sp"
-@@ -67,7 +68,7 @@
-         android:layout_height="wrap_content"
-         android:fontFamily="sans-serif-condensed"
-         android:text="En tus manos"
--        android:textColor="@color/yellow"
-+        android:textColor="@color/colorSecondaryLight"
-         android:textSize="30sp"
-         android:textStyle="bold"
-         app:layout_constraintBottom_toBottomOf="parent"
-@@ -82,7 +83,7 @@
-         android:layout_width="147dp"
-         android:layout_height="43dp"
-         android:fontFamily="sans-serif-light"
--
-+        android:textColor="@color/white"
-         android:text="Visualiza y supervisa el rendimieno de tu cultivo de forma fácil y sencilla"
-         android:textSize="12sp"
-         android:textStyle="bold"
-Index: app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.MachineControl;\r\n\r\nimport android.app.AlarmManager;\r\nimport android.app.DatePickerDialog;\r\nimport android.app.FragmentTransaction;\r\nimport android.app.TimePickerDialog;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.graphics.drawable.ColorDrawable;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.os.CountDownTimer;\r\nimport android.provider.AlarmClock;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.CheckBox;\r\nimport android.widget.DatePicker;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.TimePicker;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.annotation.RequiresApi;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.constraintlayout.widget.ConstraintLayout;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.dashboard.DashboardFragment;\r\nimport com.example.infinitycrop.ui.dashboard.GeneralFragment;\r\nimport com.example.infinitycrop.ui.logmail.LoginActivity;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.google.firebase.firestore.ListenerRegistration;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\nimport java.sql.Time;\r\nimport java.text.ParseException;\r\nimport java.text.SimpleDateFormat;\r\nimport java.time.LocalDate;\r\nimport java.time.LocalTime;\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.Calendar;\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\nimport java.util.Map;\r\n\r\nimport kotlin.Unit;\r\nimport kotlin.jvm.functions.Function1;\r\nimport me.sujanpoudel.wheelview.WheelView;\r\n\r\npublic class planta1 extends AppCompatActivity {\r\n    private List<String> nombres;\r\n    private List<String> estado;\r\n    //Aviso al entrar\r\n    private ConstraintLayout fondoR;\r\n    private ImageView imgr,goBack;\r\n    private TextView textR;\r\n    //\r\n\r\n    private int piso = 1;\r\n    String one = String.valueOf(piso);\r\n    private int stated = 1;\r\n    String state = String.valueOf(stated);\r\n\r\n\r\n    private CheckBox checkYes, checkNo;\r\n    private Button editInfo, saveChanges;\r\n    private TextView mDisplayHour,infoTitle,mStation;\r\n    private EditText nameplant;\r\n    private FirebaseFirestore db;\r\n\r\n    private String idDocument;\r\n    private String id;\r\n\r\n\r\n\r\n    //Reloj\r\n    int t2Hour, t2Minute;\r\n    private DatePickerDialog.OnDateSetListener mDateSetListener;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_planta1);\r\n\r\n        //Aviso al entrar\r\n        fondoR = findViewById(R.id.constraitR);\r\n        imgr = findViewById(R.id.imageprevius);\r\n        textR = findViewById(R.id.txtInfoD);\r\n        CountDownTimer countDownTimer = new CountDownTimer(3000, 1000) {//Se pone la cuenta atras para que no se superponga con la animación\r\n            public void onTick(long millisUntilFinished) {\r\n\r\n            }\r\n\r\n            public void onFinish() {\r\n\r\n                fondoR.setVisibility(View.GONE);\r\n                imgr.setVisibility(View.GONE);\r\n                textR.setVisibility(View.GONE);\r\n\r\n            }\r\n        }.start();\r\n        //boton para volver\r\n        goBack= findViewById(R.id.backDashboard);\r\n        goBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n               finish();\r\n            }\r\n        });\r\n\r\n        db=FirebaseFirestore.getInstance();\r\n        //bungle get extra\r\n        Bundle extras = getIntent().getExtras();\r\n        id = extras.getString(\"idMachine\");\r\n\r\n        //arrays\r\n        nombres=new ArrayList<>();\r\n        estado=new ArrayList<>();\r\n        //firestore\r\n        db.collection(\"Mediciones planta 1\").document(id).collection(\"DatosPiso\")\r\n                .addSnapshotListener(new EventListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable QuerySnapshot snapshots,\r\n                                        @Nullable FirebaseFirestoreException e) {\r\n                        if (e != null) {\r\n                            return;\r\n                        }\r\n                        nombres.clear();\r\n                        for (DocumentSnapshot doc : snapshots) {\r\n                                nombres.add(doc.getString(\"name\"));\r\n                                estado.add(doc.getId());\r\n                        }\r\n\r\n\r\n                       /* Toast.makeText(getApplicationContext(),nombres.toString(), Toast.LENGTH_LONG).show();*/\r\n\r\n\r\n\r\n                        final WheelView wheelView = (WheelView) findViewById(R.id.wheelview);\r\n                        wheelView.setTitles(nombres);\r\n\r\n                        wheelView.setSelectListener(new Function1<Integer, Unit>() {\r\n                            @Override\r\n                            public Unit invoke(Integer integer) {\r\n                                showToast(integer);\r\n                                return Unit.INSTANCE;\r\n                            }\r\n                            private final  void showToast(Integer index) {\r\n                               // Toast.makeText(planta1.this,\"\"+wheelView.getTitles().get(index),Toast.LENGTH_SHORT).show();\r\n                                idDocument=estado.get(index);\r\n                                Toast.makeText(planta1.this,\"\"+idDocument,Toast.LENGTH_SHORT).show();\r\n                                itenInfo(idDocument);\r\n\r\n\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                });\r\n\r\n\r\n\r\n\r\n\r\n        //Nombre de la planta\r\n        nameplant = (EditText)findViewById(R.id.editTextNobrep);\r\n        nameplant.setEnabled(false);\r\n        mDisplayHour=(TextView) findViewById(R.id.editHour);\r\n        mDisplayHour.setEnabled(false);\r\n        mStation=(TextView)findViewById(R.id.txtStation);\r\n        //Checkboxes\r\n        checkYes=(CheckBox)findViewById(R.id.checkBoxSi);\r\n        checkYes.setKeyListener(null);\r\n        checkNo=(CheckBox)findViewById(R.id.checkBoxNo);\r\n        checkNo.setKeyListener(null);\r\n\r\n        //Boton guardar cambios\r\n        saveChanges = (Button)findViewById(R.id.btn_save);\r\n        saveChanges.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                saveNote(v);\r\n                editInfo.setVisibility(View.VISIBLE);\r\n                saveChanges.setVisibility(View.GONE);\r\n                mDisplayHour.setEnabled(false);\r\n                nameplant.setEnabled(false);\r\n                infoTitle.setText(\"Pulsa el botón para editar:\");\r\n\r\n\r\n\r\n\r\n            }\r\n        });\r\n\r\n        //Boton editar informacion\r\n        editInfo = (Button) findViewById(R.id.btnedit);\r\n        editInfo.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                saveChanges.setVisibility(View.VISIBLE);\r\n                editInfo.setVisibility(View.GONE);\r\n                mDisplayHour.setEnabled(true);\r\n                nameplant.setEnabled(true);\r\n                infoTitle.setText(\"Información completa:\");\r\n\r\n\r\n\r\n            }\r\n        });\r\n        infoTitle = (TextView) findViewById(R.id.textViewinfo);\r\n        //HORA\r\n\r\n        mDisplayHour.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(AlarmClock.ACTION_SET_ALARM);\r\n                if(intent.resolveActivity(getPackageManager())!=null){\r\n                    startActivity(intent);\r\n                }\r\n\r\n        }\r\n        });\r\n\r\n\r\n\r\n\r\n        /*//CALENDARIO\r\n        mDisplayDate = (TextView) findViewById(R.id.tvDate);\r\n        mDisplayDate.setEnabled(false);\r\n        mDisplayDate.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Calendar cal = Calendar.getInstance();\r\n                int year = cal.get(Calendar.YEAR);\r\n                int month = cal.get(Calendar.MONTH);\r\n                int day = cal.get(Calendar.DAY_OF_MONTH);\r\n\r\n                DatePickerDialog dialog = new DatePickerDialog(planta1.this,android.R.style.Theme_Holo_Dialog_MinWidth, mDateSetListener,year,month,day);\r\n                dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n                dialog.show();\r\n            }\r\n\r\n        });\r\n        mDateSetListener = new DatePickerDialog.OnDateSetListener() {\r\n            @Override\r\n            public void onDateSet(DatePicker datePicker, int year, int month, int day) {\r\n                month = month+1;\r\n                String date = day +\"/\" + month +\"/\"+ year;\r\n                mDisplayDate.setText(date);\r\n            }\r\n        };\r\n            */\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n\r\n\r\n    }\r\n    /*public void establecerAlarma(String mensaje,int dias,int hora,int minutos){\r\n        Intent intent = new Intent(AlarmClock.ACTION_SET_ALARM)\r\n                .putExtra(AlarmClock.EXTRA_DAYS,dias)\r\n                .putExtra(AlarmClock.EXTRA_MESSAGE,mensaje)\r\n                .putExtra(AlarmClock.EXTRA_HOUR,hora)\r\n                .putExtra(AlarmClock.EXTRA_MINUTES,minutos);\r\n        if(intent.resolveActivity(getPackageManager())!=null){\r\n            startActivity(intent);\r\n        }\r\n    }*/\r\n\r\n    public void saveNote(View v){\r\n        String cola = idDocument;\r\n        String nombre = nameplant.getText().toString();\r\n\r\n        String piso = one;\r\n\r\n        Map<String, Object> note = new HashMap<>();\r\n        note.put(\"name\",nombre);\r\n        note.put(\"piso\",piso);\r\n\r\n        db.collection(\"Mediciones planta 1\").document(id).collection(\"DatosPiso\").document(cola).update(note).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n            @Override\r\n            public void onSuccess(Void aVoid) {\r\n            Toast.makeText(planta1.this,\"va bien\",Toast.LENGTH_SHORT).show();\r\n            }\r\n        }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Toast.makeText(planta1.this,\"va mal\",Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    private void itenInfo(String uiDoc){\r\n        //hacer consulta a ese documento con uiDOc y sacar su info\r\n        //luego set Text a all\r\n        db.collection(\"Mediciones planta 1\").document(id).collection(\"DatosPiso\").document(uiDoc).get()\r\n                .addOnSuccessListener(new OnSuccessListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onSuccess(DocumentSnapshot documentSnapshot) {\r\n                        if(documentSnapshot.exists()){\r\n                            String nombre = documentSnapshot.getString(\"name\");\r\n                            String estacion = documentSnapshot.getString(\"estacion\");\r\n                            int resultado =documentSnapshot.getLong(\"estado\").intValue();\r\n                            if(resultado==1){\r\n                                checkYes.isSelected();\r\n                                checkYes.setChecked(true);\r\n                                checkYes.isChecked();\r\n                                checkNo.setChecked(false);\r\n                            }else{\r\n                                checkNo.isSelected();\r\n                                checkNo.setChecked(true);\r\n                                checkNo.isChecked();\r\n                                checkYes.setChecked(false);\r\n                            }\r\n\r\n\r\n                           // Map<String,Object> note = documentSnapshot.getData();\r\n                            nameplant.setText(nombre);\r\n                            mStation.setText(estacion);\r\n\r\n\r\n\r\n                        }else{\r\n                            Toast.makeText(planta1.this,\"Document does exist\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }\r\n                }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Toast.makeText(planta1.this,\"va mal\",Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n                /*.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable DocumentSnapshot value, @Nullable FirebaseFirestoreException error) {\r\n\r\n                    }\r\n                });*/\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java	(revision 6a46eaa504348e2e3bd04e08f565c03719a31f9d)
-+++ app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java	(date 1611253200763)
-@@ -162,7 +162,6 @@
-                             private final  void showToast(Integer index) {
-                                // Toast.makeText(planta1.this,""+wheelView.getTitles().get(index),Toast.LENGTH_SHORT).show();
-                                 idDocument=estado.get(index);
--                                Toast.makeText(planta1.this,""+idDocument,Toast.LENGTH_SHORT).show();
-                                 itenInfo(idDocument);
- 
- 
-@@ -176,21 +175,21 @@
- 
- 
- 
--        //Nombre de la planta
--        nameplant = (EditText)findViewById(R.id.editTextNobrep);
--        nameplant.setEnabled(false);
--        mDisplayHour=(TextView) findViewById(R.id.editHour);
--        mDisplayHour.setEnabled(false);
--        mStation=(TextView)findViewById(R.id.txtStation);
--        //Checkboxes
--        checkYes=(CheckBox)findViewById(R.id.checkBoxSi);
--        checkYes.setKeyListener(null);
--        checkNo=(CheckBox)findViewById(R.id.checkBoxNo);
--        checkNo.setKeyListener(null);
-+            //Nombre de la planta
-+            nameplant = (EditText)findViewById(R.id.editTextNobrep);
-+            nameplant.setEnabled(false);
-+            mDisplayHour=(TextView) findViewById(R.id.editHour);
-+            mDisplayHour.setEnabled(false);
-+            mStation=(TextView)findViewById(R.id.txtStation);
-+            //Checkboxes
-+            checkYes=(CheckBox)findViewById(R.id.checkBoxSi);
-+            checkYes.setKeyListener(null);
-+            checkNo=(CheckBox)findViewById(R.id.checkBoxNo);
-+            checkNo.setKeyListener(null);
- 
--        //Boton guardar cambios
--        saveChanges = (Button)findViewById(R.id.btn_save);
--        saveChanges.setOnClickListener(new View.OnClickListener() {
-+            //Boton guardar cambios
-+            saveChanges = (Button)findViewById(R.id.btn_save);
-+            saveChanges.setOnClickListener(new View.OnClickListener() {
-             @Override
-             public void onClick(View v) {
-                 saveNote(v);
-@@ -297,12 +296,12 @@
-         db.collection("Mediciones planta 1").document(id).collection("DatosPiso").document(cola).update(note).addOnSuccessListener(new OnSuccessListener<Void>() {
-             @Override
-             public void onSuccess(Void aVoid) {
--            Toast.makeText(planta1.this,"va bien",Toast.LENGTH_SHORT).show();
-+            Toast.makeText(planta1.this,"Datos guardados correctamente",Toast.LENGTH_SHORT).show();
-             }
-         }).addOnFailureListener(new OnFailureListener() {
-             @Override
-             public void onFailure(@NonNull Exception e) {
--                Toast.makeText(planta1.this,"va mal",Toast.LENGTH_SHORT).show();
-+                Toast.makeText(planta1.this,"Error al guardar",Toast.LENGTH_SHORT).show();
-             }
-         });
- 
-@@ -346,7 +345,7 @@
-                 }).addOnFailureListener(new OnFailureListener() {
-             @Override
-             public void onFailure(@NonNull Exception e) {
--                Toast.makeText(planta1.this,"va mal",Toast.LENGTH_SHORT).show();
-+                Toast.makeText(planta1.this,"Error al obtener piso",Toast.LENGTH_SHORT).show();
-             }
-         });
-                 /*.addSnapshotListener(new EventListener<DocumentSnapshot>() {
-Index: app/src/main/res/layout/fragment_profile_foro.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"#EFE9E9\"\r\n    android:orientation=\"vertical\">\r\n\r\n    <RelativeLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"405dp\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"350dp\"\r\n            android:background=\"@color/colorSecondary\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <ImageView\r\n                android:layout_width=\"150dp\"\r\n                android:layout_height=\"150dp\"\r\n                android:layout_gravity=\"center_horizontal\"\r\n                android:layout_marginTop=\"45dp\"\r\n                android:background=\"@drawable/rectangle\" />\r\n\r\n            <TextView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center_horizontal\"\r\n                android:layout_marginTop=\"10dp\"\r\n                android:text=\"Angle Triangle\"\r\n                android:textColor=\"#fff\"\r\n                android:textSize=\"21sp\"\r\n                android:textStyle=\"bold\" />\r\n        </LinearLayout>\r\n\r\n        <androidx.cardview.widget.CardView\r\n            android:layout_width=\"400dp\"\r\n            android:layout_height=\"120dp\"\r\n            android:layout_centerHorizontal=\"true\"\r\n            android:layout_marginTop=\"275dp\">\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:orientation=\"horizontal\"\r\n                android:weightSum=\"2\">\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"center\"\r\n                    android:orientation=\"vertical\">\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:text=\"Posts\"\r\n                        android:textSize=\"20sp\" />\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:paddingTop=\"10dp\"\r\n                        android:text=\"125\"\r\n                        android:textColor=\"@color/green\"\r\n                        android:textSize=\"20sp\"\r\n                        android:textStyle=\"bold\" />\r\n                </LinearLayout>\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"center\"\r\n                    android:orientation=\"vertical\"\r\n                    android:visibility=\"gone\">\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:text=\"Followers\"\r\n                        android:textSize=\"20sp\"\r\n                        android:visibility=\"gone\" />\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:paddingTop=\"10dp\"\r\n                        android:text=\"1205\"\r\n                        android:textColor=\"@color/green\"\r\n                        android:textSize=\"20sp\"\r\n                        android:textStyle=\"bold\"\r\n                        android:visibility=\"gone\" />\r\n                </LinearLayout>\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"center\"\r\n                    android:orientation=\"vertical\">\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:text=\"Following\"\r\n                        android:textSize=\"20sp\" />\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:paddingTop=\"10dp\"\r\n                        android:text=\"360\"\r\n                        android:textColor=\"@color/green\"\r\n                        android:textSize=\"20sp\"\r\n                        android:textStyle=\"bold\" />\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n        </androidx.cardview.widget.CardView>\r\n    </RelativeLayout>\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_gravity=\"center\"\r\n        android:layout_marginLeft=\"20dp\"\r\n        android:layout_marginRight=\"20dp\"\r\n        android:layout_marginTop=\"45dp\"\r\n        android:orientation=\"vertical\">\r\n\r\n        <TextView\r\n            android:id=\"@+id/progiledescription\"\r\n            android:layout_width=\"379dp\"\r\n            android:layout_height=\"100dp\"\r\n            android:background=\"@color/white\"\r\n            android:hint=\"Descripción:\"\r\n            android:textSize=\"20sp\"\r\n            android:padding=\"10dp\"\r\n\r\n          />\r\n\r\n        <Button\r\n            android:id=\"@+id/btneditDesc\"\r\n            android:layout_width=\"130dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center\"\r\n            android:layout_marginTop=\"12dp\"\r\n            android:background=\"@drawable/btn_scan\"\r\n            android:text=\"Modificar\"\r\n            android:textColor=\"@color/white\" />\r\n\r\n    </LinearLayout>\r\n\r\n</LinearLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_profile_foro.xml	(revision 6a46eaa504348e2e3bd04e08f565c03719a31f9d)
-+++ app/src/main/res/layout/fragment_profile_foro.xml	(date 1611254761369)
-@@ -1,6 +1,7 @@
- <?xml version="1.0" encoding="utf-8"?>
- <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
- 
-+    xmlns:app="http://schemas.android.com/apk/res-auto"
-     android:layout_width="match_parent"
-     android:layout_height="match_parent"
-     android:background="#EFE9E9"
-@@ -11,27 +12,75 @@
-         android:layout_height="405dp">
- 
-         <LinearLayout
-+            android:id="@+id/layout1P"
-             android:layout_width="match_parent"
-             android:layout_height="350dp"
-             android:background="@color/colorSecondary"
-             android:orientation="vertical">
- 
--            <ImageView
--                android:layout_width="150dp"
--                android:layout_height="150dp"
--                android:layout_gravity="center_horizontal"
--                android:layout_marginTop="45dp"
--                android:background="@drawable/rectangle" />
-+            <LinearLayout
-+                android:layout_width="wrap_content"
-+                android:layout_height="wrap_content"
-+                android:layout_gravity="center"
-+                android:layout_marginTop="25dp"
-+                android:gravity="center"
-+                android:orientation="horizontal">
-+
-+                <ImageView
-+                    android:id="@+id/imgP"
-+                    android:layout_width="150dp"
-+                    android:layout_height="150dp"
-+                    android:layout_gravity="center_horizontal"
-+                    android:background="@drawable/rectangle"
-+                    android:scaleType="centerCrop" />
- 
--            <TextView
-+                <ImageView
-+                    android:id="@+id/pencil1"
-+                    android:layout_width="62dp"
-+                    android:layout_height="41dp"
-+                    android:visibility="gone"
-+                    app:srcCompat="@drawable/pencil" />
-+            </LinearLayout>
-+
-+            <LinearLayout
-                 android:layout_width="wrap_content"
-                 android:layout_height="wrap_content"
--                android:layout_gravity="center_horizontal"
--                android:layout_marginTop="10dp"
--                android:text="Angle Triangle"
--                android:textColor="#fff"
--                android:textSize="21sp"
--                android:textStyle="bold" />
-+                android:orientation="horizontal"
-+                android:layout_gravity="center"
-+                android:layout_marginTop="15dp">
-+
-+                <EditText
-+                    android:id="@+id/nameP"
-+                    android:layout_width="wrap_content"
-+                    android:layout_height="wrap_content"
-+                    android:layout_gravity="center_horizontal"
-+
-+                    android:background="@null"
-+                    android:text="Angle Triangle"
-+                    android:textColor="#fff"
-+                    android:textSize="21sp"
-+                    android:textStyle="bold" />
-+
-+                <ImageView
-+                    android:id="@+id/pencil2"
-+                    android:layout_width="53dp"
-+                    android:layout_height="32dp"
-+                    android:layout_gravity="center"
-+                    android:layout_weight="1"
-+                    android:visibility="gone"
-+                    app:srcCompat="@drawable/pencil" />
-+            </LinearLayout>
-+
-+            <Button
-+                android:id="@+id/btneditDesc"
-+                android:layout_width="wrap_content"
-+                android:layout_height="38dp"
-+                android:layout_gravity="end|clip_vertical"
-+                android:layout_marginTop="12dp"
-+                android:layout_marginRight="12dp"
-+                android:background="@drawable/btn_savep"
-+                android:text="Editar"
-+                android:textColor="@color/colorSecondary" />
-         </LinearLayout>
- 
-         <androidx.cardview.widget.CardView
-@@ -44,7 +93,8 @@
-                 android:layout_width="match_parent"
-                 android:layout_height="match_parent"
-                 android:orientation="horizontal"
--                android:weightSum="2">
-+                android:weightSum="2"
-+                android:gravity="center">
- 
-                 <LinearLayout
-                     android:layout_width="0dp"
-@@ -60,6 +110,7 @@
-                         android:textSize="20sp" />
- 
-                     <TextView
-+                        android:id="@+id/txtPostN"
-                         android:layout_width="wrap_content"
-                         android:layout_height="wrap_content"
-                         android:paddingTop="10dp"
-@@ -105,10 +156,11 @@
-                     <TextView
-                         android:layout_width="wrap_content"
-                         android:layout_height="wrap_content"
--                        android:text="Following"
-+                        android:text="Suiguiendo"
-                         android:textSize="20sp" />
- 
-                     <TextView
-+                        android:id="@+id/followingP"
-                         android:layout_width="wrap_content"
-                         android:layout_height="wrap_content"
-                         android:paddingTop="10dp"
-@@ -128,28 +180,47 @@
-         android:layout_marginLeft="20dp"
-         android:layout_marginRight="20dp"
-         android:layout_marginTop="45dp"
--        android:orientation="vertical">
-+        android:orientation="vertical"
-+        >
- 
--        <TextView
--            android:id="@+id/progiledescription"
--            android:layout_width="379dp"
--            android:layout_height="100dp"
--            android:background="@color/white"
--            android:hint="Descripción:"
--            android:textSize="20sp"
--            android:padding="10dp"
-+        <LinearLayout
-+            android:layout_width="wrap_content"
-+            android:layout_height="wrap_content"
-+            android:orientation="horizontal"
-+            android:layout_gravity="center">
-+
-+            <EditText
-+                android:id="@+id/progiledescription"
-+                android:layout_width="285dp"
-+                android:layout_height="100dp"
-+                android:background="@color/white"
-+                android:hint="Descripción:"
-+                android:padding="10dp"
-+                android:textSize="15sp"
- 
--          />
-+                />
-+
-+            <ImageView
-+                android:id="@+id/pencil3"
-+                android:layout_width="62dp"
-+                android:layout_height="41dp"
-+                android:layout_weight="1"
-+                android:visibility="gone"
-+                app:srcCompat="@drawable/pencil" />
-+        </LinearLayout>
- 
-         <Button
--            android:id="@+id/btneditDesc"
--            android:layout_width="130dp"
-+            android:id="@+id/btn_saveP"
-+            android:layout_width="120dp"
-             android:layout_height="wrap_content"
-             android:layout_gravity="center"
--            android:layout_marginTop="12dp"
-+            android:layout_marginTop="15dp"
-             android:background="@drawable/btn_scan"
--            android:text="Modificar"
--            android:textColor="@color/white" />
-+            android:text="Guardar"
-+            android:textColor="@color/white"
-+            android:visibility="gone"
-+
-+            />
- 
-     </LinearLayout>
- 
-Index: app/src/main/res/values/colors.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <color name=\"colorPrimary\">#fafafa</color>\r\n    <color name=\"colorPrimaryLight\">#ffffff</color>\r\n    <color name=\"colorPrimaryDark\">#c7c7c7</color>\r\n    <color name=\"colorSecondary\">#a0c63e</color>\r\n    <color name=\"colorSecondaryLight\">#d4f96f</color>\r\n    <color name=\"colorSecondaryDark\">#6e9500</color>\r\n    <color name=\"tittleTextApparience\">#424242</color>\r\n    <!-- dashboard colors-->\r\n    <color name=\"colorPrimaryDashboard\">#a0c63e</color>\r\n    <color name=\"colorPrimaryDarkDashboard\">#3700B3</color>\r\n    <color name=\"colorAccentDashboard\">#a0c63e</color>\r\n\r\n    <!-- tutorial colors-->\r\n    <color name=\"white\">#ffffff</color>\r\n    <color name=\"black\">#000000</color>\r\n    <color name=\"grey\">#c7c7c7</color>\r\n    <color name=\"blue\">#5098C8</color>\r\n    <color name=\"yellow\">#fef65b</color>\r\n    <color name=\"green\">#474747</color>\r\n    <color name=\"red\">#ff0000</color>\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/values/colors.xml	(revision 6a46eaa504348e2e3bd04e08f565c03719a31f9d)
-+++ app/src/main/res/values/colors.xml	(date 1611252057602)
-@@ -20,4 +20,5 @@
-     <color name="yellow">#fef65b</color>
-     <color name="green">#474747</color>
-     <color name="red">#ff0000</color>
-+    <color name="grenn">#6c7156</color>
- </resources>
-\ No newline at end of file
-Index: app/src/main/res/layout/activity_modify_profile.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"#EFE9E9\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    tools:context=\".ui.profile.settings.ModifyProfile\">\r\n\r\n    <androidx.constraintlayout.widget.ConstraintLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n\r\n        <RelativeLayout\r\n            android:id=\"@+id/relativeLayout1\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"24dp\"\r\n            android:layout_marginTop=\"32dp\"\r\n            android:layout_marginEnd=\"24dp\"\r\n            android:padding=\"12dp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintHorizontal_bias=\"0.0\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n\r\n            <TextView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_alignParentTop=\"false\"\r\n                android:layout_centerHorizontal=\"true\"\r\n                android:layout_centerVertical=\"true\"\r\n                android:layout_marginLeft=\"16dp\"\r\n                android:text=\"Editar perfil\"\r\n                android:textColor=\"#202020\"\r\n                android:textSize=\"20sp\" />\r\n\r\n            <ImageView\r\n                android:id=\"@+id/backToProfile2\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"40dp\"\r\n                android:layout_alignParentLeft=\"true\"\r\n                android:layout_centerVertical=\"true\"\r\n                android:src=\"@drawable/icons_arrow_left_green\">\r\n\r\n            </ImageView>\r\n        </RelativeLayout>\r\n\r\n        <RelativeLayout\r\n            android:id=\"@+id/relativeLayout2\"\r\n            android:layout_width=\"353dp\"\r\n            android:layout_height=\"189dp\"\r\n            android:layout_marginTop=\"48dp\"\r\n            android:background=\"@drawable/bg_settings\"\r\n            android:padding=\"12dp\"\r\n            app:layout_constraintBottom_toBottomOf=\"parent\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/relativeLayout1\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/textView14\"\r\n                android:layout_width=\"149dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_alignParentStart=\"true\"\r\n                android:layout_alignParentTop=\"true\"\r\n                android:layout_alignParentEnd=\"true\"\r\n                android:layout_marginStart=\"16dp\"\r\n                android:layout_marginTop=\"8dp\"\r\n                android:layout_marginEnd=\"176dp\"\r\n                android:text=\"Datos del usuario:\" />\r\n\r\n            <EditText\r\n                android:id=\"@+id/nombreUsario\"\r\n                android:layout_width=\"323dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/textView14\"\r\n                android:layout_alignParentStart=\"true\"\r\n                android:layout_alignParentEnd=\"true\"\r\n                android:layout_marginStart=\"16dp\"\r\n                android:layout_marginTop=\"16dp\"\r\n                android:layout_marginEnd=\"24dp\"\r\n                android:maxLines=\"1\"\r\n                android:paddingTop=\"5dp\"\r\n                android:textColorHint=\"#333232\"\r\n                android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                android:textSize=\"15sp\" />\r\n\r\n            <!--<View\r\n                android:layout_width=\"200dp\"\r\n                android:layout_height=\"0dp\"\r\n                android:layout_below=\"@+id/editTextTextPersonName\"\r\n                android:layout_alignStart=\"@+id/editTextTextPersonName\"\r\n                android:layout_alignEnd=\"@+id/editTextTextPersonName\"\r\n                android:layout_alignBottom=\"@+id/editTextTextPersonName\"\r\n                android:layout_marginStart=\"0dp\"\r\n                android:layout_marginTop=\"4dp\"\r\n                android:layout_marginEnd=\"1dp\"\r\n                android:layout_marginBottom=\"-4dp\"\r\n                android:background=\"#9e9e9e\" />\r\n                -->\r\n\r\n\r\n            <Button\r\n                android:id=\"@+id/btn_modify\"\r\n                android:layout_width=\"123dp\"\r\n                android:layout_height=\"41dp\"\r\n                android:layout_below=\"@+id/btn_fav\"\r\n                android:layout_alignParentStart=\"true\"\r\n                android:layout_alignParentEnd=\"true\"\r\n                android:layout_alignParentBottom=\"true\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_marginStart=\"108dp\"\r\n                android:layout_marginTop=\"24dp\"\r\n                android:layout_marginEnd=\"111dp\"\r\n                android:layout_marginBottom=\"13dp\"\r\n                android:background=\"#94c804\"\r\n                android:text=\"Modificar\"\r\n                android:textColor=\"#FFFFFF\"></Button>\r\n\r\n\r\n        </RelativeLayout>\r\n\r\n\r\n    </androidx.constraintlayout.widget.ConstraintLayout>\r\n </ScrollView>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_modify_profile.xml	(revision 6a46eaa504348e2e3bd04e08f565c03719a31f9d)
-+++ app/src/main/res/layout/activity_modify_profile.xml	(date 1611254761397)
-@@ -35,7 +35,9 @@
-                 android:layout_marginLeft="16dp"
-                 android:text="Editar perfil"
-                 android:textColor="#202020"
--                android:textSize="20sp" />
-+                android:textSize="20sp"
-+                android:maxLines="1"
-+                android:maxLength="40"/>
- 
-             <ImageView
-                 android:id="@+id/backToProfile2"
-Index: app/src/main/res/layout/activity_edit_community.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\nxmlns:tools=\"http://schemas.android.com/tools\"\r\nandroid:layout_width=\"match_parent\"\r\nandroid:layout_height=\"match_parent\"\r\nandroid:background=\"#EFE9E9\"\r\ntools:context=\".ui.Foro.lets_start.EditCommunity\">\r\n\r\n<androidx.constraintlayout.widget.ConstraintLayout\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"wrap_content\">\r\n\r\n    <RelativeLayout\r\n        android:id=\"@+id/relativeLayout4AddCommunity\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"24dp\"\r\n        android:layout_marginTop=\"34dp\"\r\n        android:layout_marginEnd=\"24dp\"\r\n        android:padding=\"12dp\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n\r\n        <TextView\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_alignParentTop=\"false\"\r\n            android:layout_centerHorizontal=\"true\"\r\n            android:layout_centerVertical=\"true\"\r\n            android:layout_marginLeft=\"16dp\"\r\n            android:text=\"@string/editCommunity_text7\"\r\n            android:textColor=\"#202020\"\r\n            android:textSize=\"20sp\" />\r\n\r\n        <ImageView\r\n            android:id=\"@+id/backEditCommunity\"\r\n            android:layout_width=\"40dp\"\r\n            android:layout_height=\"40dp\"\r\n            android:layout_alignParentLeft=\"true\"\r\n            android:layout_centerVertical=\"true\"\r\n            android:src=\"@drawable/icons_arrow_left_green\">\r\n\r\n        </ImageView>\r\n    </RelativeLayout>\r\n\r\n    <LinearLayout\r\n        android:id=\"@+id/linearLayout3\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"8dp\"\r\n        android:gravity=\"center\"\r\n        android:orientation=\"vertical\"\r\n        android:padding=\"5dp\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/relativeLayout4AddCommunity\">\r\n\r\n        <com.makeramen.roundedimageview.RoundedImageView\r\n            android:id=\"@+id/img_bS_Editcommunity\"\r\n            android:layout_width=\"120dp\"\r\n            android:layout_height=\"120dp\"\r\n            android:layout_margin=\"10dp\"\r\n            android:scaleType=\"centerCrop\"\r\n            android:src=\"@drawable/log_portada\"\r\n            app:riv_corner_radius=\"10dp\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/changeImg_EditCommunity\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"@string/editCommunity_text2\"\r\n            android:textColor=\"@color/blue\" />\r\n    </LinearLayout>\r\n\r\n    <LinearLayout\r\n        android:id=\"@+id/linearLayout4\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"16dp\"\r\n        android:orientation=\"vertical\"\r\n        android:padding=\"20dp\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/linearLayout3\">\r\n\r\n        <TextView\r\n            android:id=\"@+id/textView26\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginBottom=\"8dp\"\r\n            android:text=\"@string/editCommunity_text3\" />\r\n\r\n        <EditText\r\n            android:id=\"@+id/input_name_EditCommunity\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:ems=\"10\"\r\n            android:inputType=\"textPersonName\" />\r\n    </LinearLayout>\r\n\r\n    <LinearLayout\r\n        android:id=\"@+id/linearLayout\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"8dp\"\r\n        android:orientation=\"vertical\"\r\n        android:padding=\"20dp\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/linearLayout4\">\r\n\r\n        <TextView\r\n            android:id=\"@+id/textView27\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginBottom=\"8dp\"\r\n            android:text=\"@string/editCommunity_text5\" />\r\n\r\n        <EditText\r\n            android:id=\"@+id/input_desc_EditCommunity\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:ems=\"10\"\r\n            android:gravity=\"start|top\"\r\n            android:inputType=\"textMultiLine\" />\r\n\r\n    </LinearLayout>\r\n\r\n    <Button\r\n        android:id=\"@+id/btn_EditCommunity\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"16dp\"\r\n        android:padding=\"10dp\"\r\n        android:layout_marginEnd=\"20dp\"\r\n        android:layout_marginBottom=\"20dp\"\r\n        android:background=\"@drawable/button_enter_machine\"\r\n        android:text=\"@string/editCommunity_text8\"\r\n        android:textColor=\"@color/white\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/linearLayout\" />\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n</ScrollView>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_edit_community.xml	(revision 6a46eaa504348e2e3bd04e08f565c03719a31f9d)
-+++ app/src/main/res/layout/activity_edit_community.xml	(date 1611254761390)
-@@ -98,7 +98,9 @@
-             android:layout_width="match_parent"
-             android:layout_height="wrap_content"
-             android:ems="10"
--            android:inputType="textPersonName" />
-+            android:inputType="textPersonName"
-+            android:maxLines="1"
-+            android:maxLength="40"/>
-     </LinearLayout>
- 
-     <LinearLayout
-Index: app/src/main/res/layout/activity_modify_machine.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"#EFE9E9\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    tools:context=\".ui.list_machine.ModifyMachine\">\r\n\r\n    <androidx.constraintlayout.widget.ConstraintLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n\r\n        <RelativeLayout\r\n            android:id=\"@+id/relativeLayout1\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"24dp\"\r\n            android:layout_marginTop=\"32dp\"\r\n            android:layout_marginEnd=\"24dp\"\r\n            android:padding=\"12dp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintHorizontal_bias=\"0.0\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n\r\n            <TextView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_alignParentTop=\"false\"\r\n                android:layout_centerHorizontal=\"true\"\r\n                android:layout_centerVertical=\"true\"\r\n                android:layout_marginLeft=\"16dp\"\r\n                android:text=\"Editar máquina\"\r\n                android:textColor=\"#202020\"\r\n                android:textSize=\"20sp\" />\r\n\r\n            <ImageView\r\n                android:id=\"@+id/backToListMachine\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"40dp\"\r\n                android:layout_alignParentLeft=\"true\"\r\n                android:layout_centerVertical=\"true\"\r\n                android:src=\"@drawable/icons_arrow_left_green\">\r\n\r\n            </ImageView>\r\n        </RelativeLayout>\r\n\r\n        <RelativeLayout\r\n            android:id=\"@+id/relativeLayout2\"\r\n            android:layout_width=\"354dp\"\r\n            android:layout_height=\"246dp\"\r\n            android:layout_marginTop=\"48dp\"\r\n            android:background=\"@drawable/bg_settings\"\r\n            android:padding=\"12dp\"\r\n            app:layout_constraintBottom_toBottomOf=\"parent\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/relativeLayout1\">\r\n\r\n            <!--<View\r\n                android:layout_width=\"200dp\"\r\n                android:layout_height=\"0dp\"\r\n                android:layout_below=\"@+id/editTextTextPersonName\"\r\n                android:layout_alignStart=\"@+id/editTextTextPersonName\"\r\n                android:layout_alignEnd=\"@+id/editTextTextPersonName\"\r\n                android:layout_alignBottom=\"@+id/editTextTextPersonName\"\r\n                android:layout_marginStart=\"0dp\"\r\n                android:layout_marginTop=\"4dp\"\r\n                android:layout_marginEnd=\"1dp\"\r\n                android:layout_marginBottom=\"-4dp\"\r\n                android:background=\"#9e9e9e\" />\r\n                -->\r\n\r\n            <TextView\r\n                android:id=\"@+id/textView15\"\r\n                android:layout_width=\"150dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/nombreUsario\"\r\n                android:layout_alignParentStart=\"true\"\r\n                android:layout_alignParentEnd=\"true\"\r\n                android:layout_marginStart=\"16dp\"\r\n                android:layout_marginTop=\"16dp\"\r\n                android:layout_marginEnd=\"176dp\"\r\n                android:text=\"Datos de la máquina:\" />\r\n\r\n            <EditText\r\n                android:id=\"@+id/nombreMaquina\"\r\n                android:layout_width=\"294dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/textView15\"\r\n                android:layout_alignParentStart=\"true\"\r\n                android:layout_alignParentEnd=\"true\"\r\n                android:layout_marginStart=\"16dp\"\r\n                android:layout_marginTop=\"16dp\"\r\n                android:layout_marginEnd=\"24dp\"\r\n                android:maxLines=\"1\"\r\n                android:paddingTop=\"5dp\"\r\n                android:textColorHint=\"#333232\"\r\n                android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                android:textSize=\"15sp\" />\r\n\r\n            <!-- <View\r\n                 android:layout_width=\"200dp\"\r\n                 android:layout_height=\"0dp\"\r\n                 android:layout_below=\"@+id/editTextTextMachineName\"\r\n                 android:layout_alignStart=\"@+id/editTextTextPersonName\"\r\n                 android:layout_alignEnd=\"@+id/editTextTextPersonName\"\r\n                 android:layout_alignBottom=\"@+id/editTextTextPersonName\"\r\n                 android:layout_marginStart=\"0dp\"\r\n                 android:layout_marginTop=\"2dp\"\r\n                 android:layout_marginEnd=\"-1dp\"\r\n                 android:layout_marginBottom=\"-83dp\"\r\n                 android:background=\"#9e9e9e\" />\r\n -->\r\n\r\n            <CheckBox\r\n                android:id=\"@+id/btn_fav_editar\"\r\n                android:layout_width=\"260dp\"\r\n                android:layout_height=\"28dp\"\r\n                android:layout_below=\"@+id/nombreMaquina\"\r\n                android:layout_alignParentStart=\"true\"\r\n                android:layout_alignParentEnd=\"true\"\r\n                android:layout_marginStart=\"16dp\"\r\n                android:layout_marginTop=\"16dp\"\r\n                android:layout_marginEnd=\"24dp\"\r\n                android:text=\"@string/title_name_favorites\"\r\n                android:textColor=\"#9E9D9D\" />\r\n\r\n            <Button\r\n                android:id=\"@+id/btn_modify_machine\"\r\n                android:layout_width=\"123dp\"\r\n                android:layout_height=\"41dp\"\r\n                android:layout_alignParentStart=\"true\"\r\n                android:layout_alignParentEnd=\"true\"\r\n                android:layout_alignParentBottom=\"true\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_marginStart=\"108dp\"\r\n                android:layout_marginEnd=\"111dp\"\r\n                android:layout_marginBottom=\"13dp\"\r\n                android:background=\"#94c804\"\r\n                android:text=\"Modificar\"\r\n                android:textColor=\"#FFFFFF\"></Button>\r\n\r\n\r\n        </RelativeLayout>\r\n\r\n\r\n    </androidx.constraintlayout.widget.ConstraintLayout>\r\n</ScrollView>\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_modify_machine.xml	(revision 6a46eaa504348e2e3bd04e08f565c03719a31f9d)
-+++ app/src/main/res/layout/activity_modify_machine.xml	(date 1611254761354)
-@@ -97,6 +97,7 @@
-                 android:layout_marginTop="16dp"
-                 android:layout_marginEnd="24dp"
-                 android:maxLines="1"
-+                android:maxLength="40"
-                 android:paddingTop="5dp"
-                 android:textColorHint="#333232"
-                 android:textCursorDrawable="@drawable/cursor_color"
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_15__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_15__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_21_29__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_21_29__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_18_27__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_18_27__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_13_14__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_13_14__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_17_01_2021_15_05__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_17_01_2021_15_05__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_19_07__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_19_07__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_20_41__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_20_41__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_08__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_08__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_14_53__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_14_53__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_15_01_2021_13_24__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_15_01_2021_13_24__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_19_33__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_19_33__Default_Changelist_.xml
Index: .idea/shelf/Uncommitted_changes_before_Update_at_15_01_2021_13_24_[Default_Changelist]/shelved.patch
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_15_01_2021_13_24_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_15_01_2021_13_24_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,658 +0,0 @@
-Index: app/src/main/java/com/example/infinitycrop/ui/Foro/lets_start/choose_community.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.Foro.lets_start;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.Foro.lets_start.rv_community.CommunityAdapter;\r\nimport com.example.infinitycrop.ui.Foro.lets_start.rv_community.CommunityModel;\r\nimport com.example.infinitycrop.ui.list_machine.Adapter;\r\nimport com.example.infinitycrop.ui.list_machine.MachineModel;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\nimport com.google.android.material.bottomsheet.BottomSheetDialog;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.google.firebase.firestore.Query;\r\nimport com.google.firebase.firestore.ThrowOnExtraProperties;\r\nimport com.makeramen.roundedimageview.RoundedImageView;\r\nimport com.squareup.picasso.Picasso;\r\n\r\npublic class choose_community extends AppCompatActivity {\r\n\r\n    //1. declaro la variable del recyclerView\r\n    private RecyclerView mFirestoreList;\r\n    private RecyclerView communitiesRv;\r\n    //2. Firebase variables\r\n    private FirebaseFirestore firebaseFirestore;\r\n    private FirebaseAuth firebaseAuth;\r\n    private String uid;\r\n    //5. declaro viewHolder\r\n    private CommunityAdapter communityAdapter;\r\n    private CommunityAdapter communitiesAdapter;\r\n    //variables del layout\r\n    private ImageView btn_back;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_choose_community);\r\n\r\n        //1. initialice the ETE SETCH recyclerView\r\n        mFirestoreList=findViewById(R.id.myCommunity_list);\r\n        communitiesRv=findViewById(R.id.communities_list);\r\n        //2. firebase variables\r\n        firebaseFirestore=FirebaseFirestore.getInstance();\r\n        firebaseAuth=FirebaseAuth.getInstance();\r\n        uid=firebaseAuth.getUid();\r\n        //variables del layout\r\n        btn_back=findViewById(R.id.btn_back_welcome2);\r\n        //onClick\r\n        btn_back.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                finish();\r\n            }\r\n        });\r\n\r\n        //RV my communities\r\n\r\n        //3.Query\r\n        //3.1 saco todos los documentos\r\n        Query query= firebaseFirestore.collection(\"Community\")\r\n                .whereEqualTo(\"creator\",uid);\r\n\r\n        //4.Recycler optiones\r\n        FirestoreRecyclerOptions<CommunityModel> options=new FirestoreRecyclerOptions.Builder<CommunityModel>()\r\n                .setQuery(query,CommunityModel.class)\r\n                .build();\r\n\r\n        //5. View holder\r\n        communityAdapter=new CommunityAdapter(options);\r\n        mFirestoreList.setHasFixedSize(false);\r\n        mFirestoreList.setLayoutManager(new GridLayoutManager(this,4,GridLayoutManager.VERTICAL,false));\r\n        mFirestoreList.setAdapter(communityAdapter);\r\n\r\n       communityAdapter.setOnItemClickListener(new CommunityAdapter.OnItemClickListener() {\r\n           @Override\r\n           public void onItemClick(DocumentSnapshot documentSnapshot, int position) {\r\n               CommunityModel communityModel = documentSnapshot.toObject(CommunityModel.class);\r\n               final String id = documentSnapshot.getId();\r\n               //final String path = documentSnapshot.getString(\"name\");\r\n               //Toast.makeText(getApplicationContext(),id, Toast.LENGTH_LONG).show();\r\n               bottomSheetCommunity(communityModel,id,position);\r\n\r\n           }\r\n       });\r\n\r\n       //RV most popular communities\r\n\r\n        //3.Query\r\n        //3.1 saco todos los documentos\r\n        Query queryCommunities= firebaseFirestore.collection(\"Community\")\r\n                .orderBy(\"followers\",Query.Direction.DESCENDING)\r\n                .limit(30);\r\n\r\n        //4.Recycler optiones\r\n        FirestoreRecyclerOptions<CommunityModel> optionsCommunities=new FirestoreRecyclerOptions.Builder<CommunityModel>()\r\n                .setQuery(queryCommunities,CommunityModel.class)\r\n                .build();\r\n\r\n        //5. View holder\r\n        communitiesAdapter=new CommunityAdapter(optionsCommunities);\r\n        communitiesRv.setHasFixedSize(false);\r\n        communitiesRv.setLayoutManager(new GridLayoutManager(this,4,GridLayoutManager.VERTICAL,false));\r\n        communitiesRv.setAdapter(communitiesAdapter);\r\n\r\n        communitiesAdapter.setOnItemClickListener(new CommunityAdapter.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(DocumentSnapshot documentSnapshot, int position) {\r\n                CommunityModel communityModel = documentSnapshot.toObject(CommunityModel.class);\r\n                final String id = documentSnapshot.getId();\r\n                //final String path = documentSnapshot.getString(\"name\");\r\n                //Toast.makeText(getApplicationContext(),id, Toast.LENGTH_LONG).show();\r\n                bottomSheetCommunity(communityModel,id,position);\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        communityAdapter.startListening();\r\n        communitiesAdapter.startListening();\r\n    }\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        communityAdapter.stopListening();\r\n        communitiesAdapter.startListening();\r\n    }\r\n\r\n    private void bottomSheetCommunity(final CommunityModel communityModel, final String uiDocument, final int position){\r\n        final BottomSheetDialog bottomSheetDialog=new BottomSheetDialog(choose_community.this,R.style.BottomSheetDialogTheme);\r\n        bottomSheetDialog.setContentView(R.layout.bottom_sheet_community);\r\n        if(communityModel.getCreator().equals(\"pepe\")){ //cuando haces click sobre tu comunidad\r\n            //variables from the botomSheet layout\r\n            TextView name=bottomSheetDialog.findViewById(R.id.name_bS_community);\r\n            TextView name2=bottomSheetDialog.findViewById(R.id.name_bS_community2);\r\n            name.setText(communityModel.getName());\r\n            name2.setText(communityModel.getName());\r\n            RoundedImageView img=bottomSheetDialog.findViewById(R.id.img_bS_community);\r\n            Picasso.get().load(communityModel.getImg()).into(img);\r\n            TextView desc=bottomSheetDialog.findViewById(R.id.desc_bS_community);\r\n            desc.setText(communityModel.getDescription());\r\n            TextView posts=bottomSheetDialog.findViewById(R.id.num_posts);\r\n            String post= String.valueOf(communityModel.getPosts());\r\n            posts.setText(post);\r\n            TextView followers=bottomSheetDialog.findViewById(R.id.num_followers);\r\n            String followersString= String.valueOf(communityModel.getFollowers());\r\n            followers.setText(followersString);\r\n            //button follow , unfollow\r\n            final Button button=bottomSheetDialog.findViewById(R.id.btn_follow);\r\n            firebaseFirestore.collection(\"Foro user\").document(uid)\r\n                    .collection(\"Following\").document(uiDocument)\r\n                    .addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                        @Override\r\n                        public void onEvent(@Nullable DocumentSnapshot value, @Nullable FirebaseFirestoreException error) {\r\n                            if(value.exists()){\r\n                                button.setText(R.string.community_sheet_text5);\r\n                                button.setBackgroundResource(R.drawable.button_unfollow);\r\n                                button.setTextColor(getResources().getColor(R.color.black));\r\n                            }else{\r\n                                button.setText(R.string.community_sheet_text4);\r\n                            }\r\n                        }\r\n                    });\r\n            button.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    //ya es suscrito\r\n                    String textButton=button.getText().toString();\r\n                    String ifText=getResources().getString(R.string.community_sheet_text5);\r\n                    if(textButton.equals(ifText)){\r\n                        //eliminar de la coleccion following de Foro user\r\n                        communitiesAdapter.unFollow(position,uiDocument);\r\n                        communityAdapter.unFollow(position,uiDocument);\r\n                    }else{ //no esta suscrito\r\n                        //añadir comunidad a la coleccion Following\r\n                        communitiesAdapter.follow(position,uiDocument);\r\n                        communityAdapter.follow(position,uiDocument);\r\n                    }\r\n                    bottomSheetDialog.dismiss();\r\n                }\r\n            });\r\n            bottomSheetDialog.findViewById(R.id.btn_cancelBottomSheet).setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    bottomSheetDialog.dismiss();\r\n                }\r\n            });\r\n\r\n        }else if(communityModel.getCreator().equals(\"asfa\")){ //cuando hago click en otra comunidad\r\n            //variables from the botomSheet layout\r\n            TextView name=bottomSheetDialog.findViewById(R.id.name_bS_community);\r\n            TextView name2=bottomSheetDialog.findViewById(R.id.name_bS_community2);\r\n            name.setText(communityModel.getName());\r\n            name2.setText(communityModel.getName());\r\n            RoundedImageView img=bottomSheetDialog.findViewById(R.id.img_bS_community);\r\n            Picasso.get().load(communityModel.getImg()).into(img);\r\n            TextView desc=bottomSheetDialog.findViewById(R.id.desc_bS_community);\r\n            desc.setText(communityModel.getDescription());\r\n            TextView posts=bottomSheetDialog.findViewById(R.id.num_posts);\r\n            String post= String.valueOf(communityModel.getPosts());\r\n            posts.setText(post);\r\n            TextView followers=bottomSheetDialog.findViewById(R.id.num_followers);\r\n            String followersString= String.valueOf(communityModel.getFollowers());\r\n            followers.setText(followersString);\r\n            //button follow , unfollow\r\n            final Button button=bottomSheetDialog.findViewById(R.id.btn_follow);\r\n            firebaseFirestore.collection(\"Foro user\").document(uid)\r\n                    .collection(\"Following\").document(uiDocument)\r\n                    .addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                        @Override\r\n                        public void onEvent(@Nullable DocumentSnapshot value, @Nullable FirebaseFirestoreException error) {\r\n                            if(value.exists()){\r\n                                button.setText(R.string.community_sheet_text5);\r\n                                button.setBackgroundResource(R.drawable.button_unfollow);\r\n                                button.setTextColor(getResources().getColor(R.color.black));\r\n                            }else{\r\n                                button.setText(R.string.community_sheet_text4);\r\n                            }\r\n                        }\r\n                    });\r\n            button.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    //ya es suscrito\r\n                    String textButton=button.getText().toString();\r\n                    String ifText=getResources().getString(R.string.community_sheet_text5);\r\n                    if(textButton.equals(ifText)){\r\n                        //eliminar de la coleccion following de Foro user\r\n                        communitiesAdapter.unFollow(position,uiDocument);\r\n                        communityAdapter.unFollow(position,uiDocument);\r\n                    }else{ //no esta suscrito\r\n                        //añadir comunidad a la coleccion Following\r\n                        communitiesAdapter.follow(position,uiDocument);\r\n                        communityAdapter.follow(position,uiDocument);\r\n                    }\r\n                    bottomSheetDialog.dismiss();\r\n                }\r\n            });\r\n            bottomSheetDialog.findViewById(R.id.btn_cancelBottomSheet).setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    bottomSheetDialog.dismiss();\r\n                }\r\n            });\r\n        }\r\n        bottomSheetDialog.show();\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/Foro/lets_start/choose_community.java	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
-+++ app/src/main/java/com/example/infinitycrop/ui/Foro/lets_start/choose_community.java	(date 1610374813296)
-@@ -15,6 +15,7 @@
- import android.widget.TextView;
- import android.widget.Toast;
- 
-+import com.example.infinitycrop.MainActivity;
- import com.example.infinitycrop.R;
- import com.example.infinitycrop.ui.Foro.lets_start.rv_community.CommunityAdapter;
- import com.example.infinitycrop.ui.Foro.lets_start.rv_community.CommunityModel;
-@@ -22,6 +23,7 @@
- import com.example.infinitycrop.ui.list_machine.MachineModel;
- import com.firebase.ui.firestore.FirestoreRecyclerOptions;
- import com.google.android.material.bottomsheet.BottomSheetDialog;
-+import com.google.android.material.floatingactionbutton.FloatingActionButton;
- import com.google.firebase.auth.FirebaseAuth;
- import com.google.firebase.firestore.DocumentSnapshot;
- import com.google.firebase.firestore.EventListener;
-@@ -46,6 +48,7 @@
-     private CommunityAdapter communitiesAdapter;
-     //variables del layout
-     private ImageView btn_back;
-+    private FloatingActionButton btn_addCommunity;
- 
-     @Override
-     protected void onCreate(Bundle savedInstanceState) {
-@@ -61,6 +64,7 @@
-         uid=firebaseAuth.getUid();
-         //variables del layout
-         btn_back=findViewById(R.id.btn_back_welcome2);
-+        btn_addCommunity=findViewById(R.id.button_add_community);
-         //onClick
-         btn_back.setOnClickListener(new View.OnClickListener() {
-             @Override
-@@ -68,6 +72,13 @@
-                 finish();
-             }
-         });
-+        btn_addCommunity.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                Intent intent = new Intent(getApplicationContext(), AddCommunity.class);
-+                startActivity(intent);
-+            }
-+        });
- 
-         //RV my communities
- 
-@@ -149,7 +160,7 @@
-     private void bottomSheetCommunity(final CommunityModel communityModel, final String uiDocument, final int position){
-         final BottomSheetDialog bottomSheetDialog=new BottomSheetDialog(choose_community.this,R.style.BottomSheetDialogTheme);
-         bottomSheetDialog.setContentView(R.layout.bottom_sheet_community);
--        if(communityModel.getCreator().equals("pepe")){ //cuando haces click sobre tu comunidad
-+        if(communityModel.getCreator().equals(uid)){ //cuando haces click sobre tu comunidad
-             //variables from the botomSheet layout
-             TextView name=bottomSheetDialog.findViewById(R.id.name_bS_community);
-             TextView name2=bottomSheetDialog.findViewById(R.id.name_bS_community2);
-@@ -167,35 +178,16 @@
-             followers.setText(followersString);
-             //button follow , unfollow
-             final Button button=bottomSheetDialog.findViewById(R.id.btn_follow);
--            firebaseFirestore.collection("Foro user").document(uid)
--                    .collection("Following").document(uiDocument)
--                    .addSnapshotListener(new EventListener<DocumentSnapshot>() {
--                        @Override
--                        public void onEvent(@Nullable DocumentSnapshot value, @Nullable FirebaseFirestoreException error) {
--                            if(value.exists()){
--                                button.setText(R.string.community_sheet_text5);
--                                button.setBackgroundResource(R.drawable.button_unfollow);
--                                button.setTextColor(getResources().getColor(R.color.black));
--                            }else{
--                                button.setText(R.string.community_sheet_text4);
--                            }
--                        }
--                    });
-+            button.setText(R.string.community_sheet_text7);
-+            button.setBackgroundResource(R.drawable.button_action_machine);
-+            button.setTextColor(getResources().getColor(R.color.colorPrimaryDashboard));
-             button.setOnClickListener(new View.OnClickListener() {
-                 @Override
-                 public void onClick(View v) {
--                    //ya es suscrito
--                    String textButton=button.getText().toString();
--                    String ifText=getResources().getString(R.string.community_sheet_text5);
--                    if(textButton.equals(ifText)){
--                        //eliminar de la coleccion following de Foro user
--                        communitiesAdapter.unFollow(position,uiDocument);
--                        communityAdapter.unFollow(position,uiDocument);
--                    }else{ //no esta suscrito
--                        //añadir comunidad a la coleccion Following
--                        communitiesAdapter.follow(position,uiDocument);
--                        communityAdapter.follow(position,uiDocument);
--                    }
-+                    //Intent modificar community
-+                    Intent intent = new Intent(getBaseContext(), EditCommunity.class);
-+                    intent.putExtra("community", uiDocument);
-+                    startActivity(intent);
-                     bottomSheetDialog.dismiss();
-                 }
-             });
-@@ -206,8 +198,9 @@
-                 }
-             });
- 
--        }else if(communityModel.getCreator().equals("asfa")){ //cuando hago click en otra comunidad
-+        }else{ //cuando hago click en otra comunidad
-             //variables from the botomSheet layout
-+            final int suscriptores=communityModel.getFollowers();
-             TextView name=bottomSheetDialog.findViewById(R.id.name_bS_community);
-             TextView name2=bottomSheetDialog.findViewById(R.id.name_bS_community2);
-             name.setText(communityModel.getName());
-@@ -246,12 +239,10 @@
-                     String ifText=getResources().getString(R.string.community_sheet_text5);
-                     if(textButton.equals(ifText)){
-                         //eliminar de la coleccion following de Foro user
--                        communitiesAdapter.unFollow(position,uiDocument);
--                        communityAdapter.unFollow(position,uiDocument);
-+                        communitiesAdapter.unFollow(position,uiDocument,suscriptores);
-                     }else{ //no esta suscrito
-                         //añadir comunidad a la coleccion Following
--                        communitiesAdapter.follow(position,uiDocument);
--                        communityAdapter.follow(position,uiDocument);
-+                        communitiesAdapter.follow(position,uiDocument,suscriptores);
-                     }
-                     bottomSheetDialog.dismiss();
-                 }
-Index: app/src/main/res/layout/activity_add_community.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.Foro.lets_start.AddCommunity\">\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_add_community.xml	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
-+++ app/src/main/res/layout/activity_add_community.xml	(date 1610356720290)
-@@ -1,9 +1,149 @@
- <?xml version="1.0" encoding="utf-8"?>
--<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
-+<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
-     xmlns:app="http://schemas.android.com/apk/res-auto"
-     xmlns:tools="http://schemas.android.com/tools"
-     android:layout_width="match_parent"
-     android:layout_height="match_parent"
-+    android:background="#EFE9E9"
-     tools:context=".ui.Foro.lets_start.AddCommunity">
- 
--</androidx.constraintlayout.widget.ConstraintLayout>
-\ No newline at end of file
-+    <androidx.constraintlayout.widget.ConstraintLayout
-+        android:layout_width="match_parent"
-+        android:layout_height="wrap_content">
-+
-+        <RelativeLayout
-+            android:id="@+id/relativeLayout4AddCommunity"
-+            android:layout_width="match_parent"
-+            android:layout_height="wrap_content"
-+            android:layout_marginStart="24dp"
-+            android:layout_marginTop="34dp"
-+            android:layout_marginEnd="24dp"
-+            android:padding="12dp"
-+            app:layout_constraintEnd_toEndOf="parent"
-+            app:layout_constraintStart_toStartOf="parent"
-+            app:layout_constraintTop_toTopOf="parent">
-+
-+
-+            <TextView
-+                android:layout_width="wrap_content"
-+                android:layout_height="wrap_content"
-+                android:layout_alignParentTop="false"
-+                android:layout_centerHorizontal="true"
-+                android:layout_centerVertical="true"
-+                android:layout_marginLeft="16dp"
-+                android:text="@string/editCommunity_text1"
-+                android:textColor="#202020"
-+                android:textSize="20sp" />
-+
-+            <ImageView
-+                android:id="@+id/backToChooseCommunity"
-+                android:layout_width="40dp"
-+                android:layout_height="40dp"
-+                android:layout_alignParentLeft="true"
-+                android:layout_centerVertical="true"
-+                android:src="@drawable/icons_arrow_left_green">
-+
-+            </ImageView>
-+        </RelativeLayout>
-+
-+        <LinearLayout
-+            android:id="@+id/linearLayout3"
-+            android:layout_width="match_parent"
-+            android:layout_height="wrap_content"
-+            android:layout_marginTop="8dp"
-+            android:gravity="center"
-+            android:orientation="vertical"
-+            android:padding="5dp"
-+            app:layout_constraintEnd_toEndOf="parent"
-+            app:layout_constraintStart_toStartOf="parent"
-+            app:layout_constraintTop_toBottomOf="@+id/relativeLayout4AddCommunity">
-+
-+            <com.makeramen.roundedimageview.RoundedImageView
-+                android:id="@+id/img_bS_Addcommunity"
-+                android:layout_width="120dp"
-+                android:layout_height="120dp"
-+                android:layout_margin="10dp"
-+                android:scaleType="centerCrop"
-+                android:src="@drawable/log_portada"
-+                app:riv_corner_radius="10dp" />
-+
-+            <TextView
-+                android:id="@+id/changeImg_addCommunity"
-+                android:layout_width="wrap_content"
-+                android:layout_height="wrap_content"
-+                android:text="@string/editCommunity_text2"
-+                android:textColor="@color/blue" />
-+        </LinearLayout>
-+
-+        <LinearLayout
-+            android:id="@+id/linearLayout4"
-+            android:layout_width="match_parent"
-+            android:layout_height="wrap_content"
-+            android:layout_marginTop="16dp"
-+            android:orientation="vertical"
-+            android:padding="20dp"
-+            app:layout_constraintEnd_toEndOf="parent"
-+            app:layout_constraintStart_toStartOf="parent"
-+            app:layout_constraintTop_toBottomOf="@+id/linearLayout3">
-+
-+            <TextView
-+                android:id="@+id/textView26"
-+                android:layout_width="match_parent"
-+                android:layout_height="wrap_content"
-+                android:layout_marginBottom="8dp"
-+                android:text="@string/editCommunity_text3" />
-+
-+            <EditText
-+                android:id="@+id/input_name_addCommunity"
-+                android:layout_width="match_parent"
-+                android:layout_height="wrap_content"
-+                android:ems="10"
-+                android:inputType="textPersonName" />
-+        </LinearLayout>
-+
-+        <LinearLayout
-+            android:id="@+id/linearLayout"
-+            android:layout_width="match_parent"
-+            android:layout_height="wrap_content"
-+            android:layout_marginTop="8dp"
-+            android:orientation="vertical"
-+            android:padding="20dp"
-+            app:layout_constraintEnd_toEndOf="parent"
-+            app:layout_constraintHorizontal_bias="0.0"
-+            app:layout_constraintStart_toStartOf="parent"
-+            app:layout_constraintTop_toBottomOf="@+id/linearLayout4">
-+
-+            <TextView
-+                android:id="@+id/textView27"
-+                android:layout_width="match_parent"
-+                android:layout_height="wrap_content"
-+                android:layout_marginBottom="8dp"
-+                android:text="@string/editCommunity_text5" />
-+
-+            <EditText
-+                android:id="@+id/input_desc_addCommunity"
-+                android:layout_width="match_parent"
-+                android:layout_height="wrap_content"
-+                android:ems="10"
-+                android:gravity="start|top"
-+                android:inputType="textMultiLine" />
-+
-+        </LinearLayout>
-+
-+        <Button
-+            android:id="@+id/btn_createCommunity"
-+            android:layout_width="0dp"
-+            android:layout_height="wrap_content"
-+            android:layout_marginTop="16dp"
-+            android:layout_marginEnd="20dp"
-+            android:layout_marginBottom="20dp"
-+            android:background="@drawable/button_enter_machine"
-+            android:text="@string/editCommunity_text6"
-+            android:textColor="@color/white"
-+            app:layout_constraintBottom_toBottomOf="parent"
-+            app:layout_constraintEnd_toEndOf="parent"
-+            app:layout_constraintTop_toBottomOf="@+id/linearLayout" />
-+
-+    </androidx.constraintlayout.widget.ConstraintLayout>
-+
-+</ScrollView>
-\ No newline at end of file
-Index: app/src/main/java/com/example/infinitycrop/ui/Foro/lets_start/rv_community/CommunityAdapter.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.Foro.lets_start.rv_community;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.cardview.widget.CardView;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.Adapter;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerAdapter;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.squareup.picasso.Picasso;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class CommunityAdapter extends FirestoreRecyclerAdapter<CommunityModel, CommunityAdapter.CommunityViewHolder> {\r\n    private OnItemClickListener listener;\r\n    private FirebaseFirestore db;\r\n    private FirebaseAuth firebaseAuth;\r\n    public CommunityAdapter(@NonNull FirestoreRecyclerOptions<CommunityModel> options) {\r\n        super(options);\r\n    }\r\n\r\n    @Override\r\n    protected void onBindViewHolder(@NonNull final CommunityViewHolder holder, int position, @NonNull CommunityModel model) {\r\n        holder.name_community.setText(model.getName());\r\n        Picasso.get().load(model.getImg()).into(holder.img_community);\r\n        DocumentSnapshot snapshot = getSnapshots().getSnapshot(holder.getAdapterPosition());\r\n        final String uid=snapshot.getId();\r\n        db=FirebaseFirestore.getInstance();\r\n        firebaseAuth=FirebaseAuth.getInstance();\r\n        String id=firebaseAuth.getUid();\r\n        db.collection(\"Foro user\").document(id).collection(\"Following\").document(uid)\r\n                .get().addOnCompleteListener(new OnCompleteListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<DocumentSnapshot> task) {\r\n                if (task.isSuccessful()) {\r\n                    DocumentSnapshot document = task.getResult();\r\n                    if (document.exists()) {\r\n                        holder.cardView_community.setBackgroundResource(R.color.colorPrimaryDashboard);\r\n                    }\r\n                } else {\r\n\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    public void unFollow(int posicion,String uiDocument){\r\n        db=FirebaseFirestore.getInstance();\r\n        firebaseAuth=FirebaseAuth.getInstance();\r\n        String id=firebaseAuth.getUid();\r\n        db.collection(\"Foro user\").document(id)\r\n                .collection(\"Following\").document(uiDocument).delete();\r\n        //actualizar RV\r\n        notifyItemChanged(posicion);\r\n    }\r\n    public void follow(int posicion,String uiDocument){\r\n        db=FirebaseFirestore.getInstance();\r\n        firebaseAuth=FirebaseAuth.getInstance();\r\n        String id=firebaseAuth.getUid();\r\n        Map<String, Object> data = new HashMap<>();\r\n        data.put(\"user id\", id);\r\n        db.collection(\"Foro user\").document(id)\r\n                .collection(\"Following\").document(uiDocument).set(data);\r\n        //actualizar RV\r\n        notifyItemChanged(posicion);\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public CommunityViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view= LayoutInflater.from(parent.getContext()).inflate(R.layout.community_item,parent,false);\r\n        return new CommunityViewHolder(view);\r\n    }\r\n\r\n    class CommunityViewHolder extends RecyclerView.ViewHolder{\r\n        protected TextView name_community;\r\n        protected TextView creator_community;\r\n        protected ImageView img_community;\r\n        protected CardView cardView_community;\r\n        public CommunityViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            name_community=itemView.findViewById(R.id.name_community);\r\n            img_community=itemView.findViewById(R.id.img_community);\r\n            cardView_community=itemView.findViewById(R.id.cardView_community);\r\n            itemView.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    int position=getAdapterPosition();\r\n                    if (position != RecyclerView.NO_POSITION && listener != null) {\r\n                        listener.onItemClick(getSnapshots().getSnapshot(position), position);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    public interface OnItemClickListener {\r\n        void onItemClick(DocumentSnapshot documentSnapshot, int position);\r\n    }\r\n    public void setOnItemClickListener(OnItemClickListener listener) {\r\n        this.listener = listener;\r\n    }\r\n\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/Foro/lets_start/rv_community/CommunityAdapter.java	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
-+++ app/src/main/java/com/example/infinitycrop/ui/Foro/lets_start/rv_community/CommunityAdapter.java	(date 1610228484649)
-@@ -38,7 +38,7 @@
-     }
- 
-     @Override
--    protected void onBindViewHolder(@NonNull final CommunityViewHolder holder, int position, @NonNull CommunityModel model) {
-+    protected void onBindViewHolder(@NonNull final CommunityViewHolder holder, int position, @NonNull final CommunityModel model) {
-         holder.name_community.setText(model.getName());
-         Picasso.get().load(model.getImg()).into(holder.img_community);
-         DocumentSnapshot snapshot = getSnapshots().getSnapshot(holder.getAdapterPosition());
-@@ -54,6 +54,8 @@
-                     DocumentSnapshot document = task.getResult();
-                     if (document.exists()) {
-                         holder.cardView_community.setBackgroundResource(R.color.colorPrimaryDashboard);
-+                    }else{
-+                        holder.cardView_community.setBackgroundResource(R.color.white);
-                     }
-                 } else {
- 
-@@ -64,16 +66,20 @@
- 
-     }
- 
--    public void unFollow(int posicion,String uiDocument){
-+    public void unFollow(int posicion,String uiDocument,int followers){
-         db=FirebaseFirestore.getInstance();
-         firebaseAuth=FirebaseAuth.getInstance();
-         String id=firebaseAuth.getUid();
-         db.collection("Foro user").document(id)
-                 .collection("Following").document(uiDocument).delete();
-+        db.collection("Community").document(uiDocument)
-+                .collection("Following").document(id).delete();
-+        followers--;
-+        db.collection("Community").document(uiDocument).update("followers",followers);
-         //actualizar RV
-         notifyItemChanged(posicion);
-     }
--    public void follow(int posicion,String uiDocument){
-+    public void follow(int posicion,String uiDocument,int followers){
-         db=FirebaseFirestore.getInstance();
-         firebaseAuth=FirebaseAuth.getInstance();
-         String id=firebaseAuth.getUid();
-@@ -81,6 +87,10 @@
-         data.put("user id", id);
-         db.collection("Foro user").document(id)
-                 .collection("Following").document(uiDocument).set(data);
-+        db.collection("Community").document(uiDocument)
-+                .collection("Following").document(id).set(data);
-+        followers++;
-+        db.collection("Community").document(uiDocument).update("followers",followers);
-         //actualizar RV
-         notifyItemChanged(posicion);
-     }
-Index: github.properties
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>gpr.usr = 61469172\ngpr.key = 72a0f63b7097b413e8ff78a7dd6ca9412aaf232c
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>windows-1252
-===================================================================
---- github.properties	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
-+++ github.properties	(date 1609365746853)
-@@ -1,2 +1,2 @@
--gpr.usr = 61469172
--gpr.key = 72a0f63b7097b413e8ff78a7dd6ca9412aaf232c
-\ No newline at end of file
-+gpr.usr = 61473165
-+gpr.key = 9671a8c2e26934b214e49dd99b96077296ee2aca
-\ No newline at end of file
-Index: app/src/main/res/layout/activity_choose_community.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"#EFE9E9\"\r\n    tools:context=\".ui.Foro.lets_start.choose_community\">\r\n\r\n\r\n<ScrollView\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\">\r\n\r\n    <androidx.constraintlayout.widget.ConstraintLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n        <androidx.constraintlayout.widget.ConstraintLayout\r\n            android:id=\"@+id/constraintLayout2\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"20dp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n\r\n            <ImageView\r\n                android:id=\"@+id/btn_back_welcome2\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"40dp\"\r\n                android:layout_marginStart=\"20dp\"\r\n                android:layout_marginTop=\"20dp\"\r\n                android:src=\"@drawable/icons_arrow_left_green\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/textView13\"\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginStart=\"20dp\"\r\n                android:layout_marginTop=\"20dp\"\r\n                android:text=\"@string/community_text1\"\r\n                android:textSize=\"24dp\"\r\n                android:textStyle=\"bold\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toBottomOf=\"@+id/btn_back_welcome2\" />\r\n\r\n            <ProgressBar\r\n                android:id=\"@+id/progressBar\"\r\n                style=\"@style/Widget.AppCompat.ProgressBar.Horizontal\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:layout_marginStart=\"20dp\"\r\n                android:layout_marginTop=\"16dp\"\r\n                android:layout_marginEnd=\"20dp\"\r\n                android:indeterminate=\"false\"\r\n                android:max=\"100\"\r\n                android:progress=\"60\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toBottomOf=\"@+id/textView13\" />\r\n        </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n\r\n        <TextView\r\n            android:id=\"@+id/textView19\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginEnd=\"20dp\"\r\n            android:text=\"@string/community_text2\"\r\n            android:textSize=\"20sp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/constraintLayout2\" />\r\n\r\n        <androidx.recyclerview.widget.RecyclerView\r\n            android:id=\"@+id/myCommunity_list\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:layout_marginTop=\"8dp\"\r\n            android:layout_marginEnd=\"20dp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/textView19\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/textView27\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:layout_marginTop=\"8dp\"\r\n            android:layout_marginEnd=\"20dp\"\r\n            android:text=\"@string/community_text3\"\r\n            android:textSize=\"20sp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/myCommunity_list\" />\r\n\r\n        <androidx.recyclerview.widget.RecyclerView\r\n            android:id=\"@+id/communities_list\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:layout_marginTop=\"8dp\"\r\n            android:layout_marginEnd=\"20dp\"\r\n            app:layout_constraintBottom_toBottomOf=\"parent\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/textView27\" />\r\n    </androidx.constraintlayout.widget.ConstraintLayout>\r\n</ScrollView>\r\n\r\n    <Button\r\n        android:id=\"@+id/btn_continue_2\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_alignParentStart=\"true\"\r\n        android:layout_alignParentBottom=\"true\"\r\n        android:layout_marginStart=\"20dp\"\r\n        android:layout_marginEnd=\"0dp\"\r\n        android:layout_marginBottom=\"20dp\"\r\n        android:layout_toStartOf=\"@+id/button_add_community\"\r\n        android:background=\"@drawable/button_enter_machine\"\r\n        android:text=\"@string/community_sheet_text6\"\r\n        android:textColor=\"@color/white\" />\r\n\r\n    <com.google.android.material.floatingactionbutton.FloatingActionButton\r\n        android:id=\"@+id/button_add_community\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_alignParentEnd=\"true\"\r\n        android:layout_alignParentBottom=\"true\"\r\n        android:layout_gravity=\"bottom|end\"\r\n        android:layout_marginStart=\"16dp\"\r\n        android:backgroundTint=\"#fff\"\r\n        android:layout_marginTop=\"16dp\"\r\n        android:layout_marginEnd=\"20dp\"\r\n        android:layout_marginBottom=\"20dp\"\r\n        android:src=\"@drawable/icons_add_community\" />\r\n</RelativeLayout>\r\n\r\n\r\n\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_choose_community.xml	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
-+++ app/src/main/res/layout/activity_choose_community.xml	(date 1610359820544)
-@@ -110,6 +110,7 @@
-             android:layout_marginStart="20dp"
-             android:layout_marginTop="8dp"
-             android:layout_marginEnd="20dp"
-+            android:layout_marginBottom="150dp"
-             app:layout_constraintBottom_toBottomOf="parent"
-             app:layout_constraintEnd_toEndOf="parent"
-             app:layout_constraintStart_toStartOf="parent"
-Index: app/src/main/res/values/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><resources>\n    <string name=\"app_name\">Infinity Crop</string>\n    <string name=\"title_home\">Infinity Crop</string>\n    <string name=\"title_inicio\">Inicio</string>\n    <string name=\"title_dashboard\">Panel de control</string>\n    <string name=\"title_notifications\">Notificaciones</string>\n    <string name=\"title_wellcome_login\">¡Te damos la bienvenida!</string>\n    <string name=\"title_orderLog\">Inicia sesión</string>\n    <string name=\"title_cont_faceboock\">Iniciar sesión con Facebook</string>\n    <string name=\"title_cont_google\">Iniciar sesión con Google</string>\n    <string name=\"title_cont_mail\">Iniciar sesión con Email</string>\n\n    <string name=\"title_register\">Registrate</string>\n    <string name=\"title_bienv\">Hola de nuevo!</string>\n    <string name=\"title_bienvR\">¡Hola, es un placer!</string>\n    <string name=\"title_userR\">Introduce un correo:</string>\n    <string name=\"title_nameR\">Introduce un nombre:</string>\n    <string name=\"title_passwordR\">Introduce una contraseña:</string>\n    <string name=\"title_registrar\">Acceder</string>\n    <string name=\"btn_newuser\">Si no tienes una cuenta, puedes registarte <u>Aquí</u> </string>\n    <string name=\"title_olvidado\">He olvidado mi contraseña</string>\n    <!-- ANYADIR UNA NUEVA MAQUINA STRINGS -->\n    <string name=\"title_register_machine\">Registra una nueva máquina</string>\n    <string name=\"title_infoMachine\">Completa estos campos</string>\n    <string name=\"btn_registMachine\">Añadir máquina</string>\n    <string name=\"title_name_machine\">Introduce el nombre de tu máquina:</string>\n    <string name=\"title_name_model\">Modelo de tu máquina:</string>\n    <string name=\"title_name_favorites\">Añadir tu máquina a favoritos</string>\n    <string name=\"title_scan_machine\">Escanear máquina</string>\n\n\n    <!-- TODO: Remove or change this placeholder text -->\n\n    <string name=\"change_city\">Change city</string>\n\n    <!-- Put your own APP ID here -->\n    <string name=\"open_weather_maps_app_id\">11111</string>\n\n    <string name=\"weather_sunny\">&#xf00d;</string>\n    <string name=\"weather_clear_night\">&#xf02e;</string>\n\n    <string name=\"weather_foggy\">&#xf014;</string>\n    <string name=\"weather_cloudy\">&#xf013;</string>\n    <string name=\"weather_rainy\">&#xf019;</string>\n    <string name=\"weather_snowy\">&#xf01b;</string>\n    <string name=\"weather_thunder\">&#xf01e;</string>\n    <string name=\"weather_drizzle\">&#xf01c;</string>\n\n    <string name=\"place_not_found\">Sorry, no weather data found.</string>\n    <string name=\"facebook_app_id\">140146287567868</string>\n    <string name=\"fb_login_protocol_scheme\">fb140146287567868</string>\n    <!-- TODO: Remove or change this placeholder text -->\n    <string name=\"hello_blank_fragment\">Hello blank fragment</string>\n\n\n    <!-- foro -->\n    <!-- welcome user -->\n    <string name=\"welcome_text1\">Vamos a empezar...</string>\n    <string name=\"welcome_text2\">Bienvenido al</string>\n    <string name=\"welcome_text3\"> <b>Foro</b> de <i>Infinity Crop</i></string>\n    <string name=\"welcome_text4\">Continuar como</string>\n    <string name=\"welcome_text5\">Cambiar imagen</string>\n    <string name=\"welcome_text6\">Nombre del usuario: </string>\n    <string name=\"welcome_text7\">Continuar </string>\n    <string name=\"welcome_text8\">Descripción (opcional): </string>ç\n    <!-- choose community -->\n    <string name=\"community_text1\">Uno más y hemos terminado...</string>\n    <string name=\"community_text2\"><b>Tus comunidadades</b></string>\n    <string name=\"community_text3\"><b>Lo más popular</b></string>\n    <!-- choose community -> bottom Sheet community -->\n    <string name=\"community_sheet_text1\">Posts</string>\n    <string name=\"community_sheet_text2\">Followers</string>\n    <string name=\"community_sheet_text3\">Cancelar</string>\n    <string name=\"community_sheet_text4\">Suscribirse</string>\n    <string name=\"community_sheet_text5\">Dejar de seguir</string>\n    <string name=\"community_sheet_text6\">Finalizar</string>\n\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/values/strings.xml	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
-+++ app/src/main/res/values/strings.xml	(date 1610365441180)
-@@ -74,5 +74,15 @@
-     <string name="community_sheet_text4">Suscribirse</string>
-     <string name="community_sheet_text5">Dejar de seguir</string>
-     <string name="community_sheet_text6">Finalizar</string>
--
-+    <string name="community_sheet_text7">Editar</string>
-+    <!-- addCommunity  -->
-+    <string name="editCommunity_text1">Crear communidad</string>
-+    <string name="editCommunity_text2"><b>Cambiar imagen</b></string>
-+    <string name="editCommunity_text3">Nombre (obligatorio)</string>
-+    <string name="editCommunity_text4">Nombre</string>
-+    <string name="editCommunity_text5">Descripción (opcional)</string>
-+    <string name="editCommunity_text6">Guardar</string>
-+    <!-- EditCommunity  -->
-+    <string name="editCommunity_text7">Editar Communidad</string>
-+    <string name="editCommunity_text8">Guardar cambios</string>
- </resources>
-\ No newline at end of file
-Index: app/src/main/AndroidManifest.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    package=\"com.example.infinitycrop\">\n\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\n    <uses-permission android:name=\"android.permission.INTERNET\" />\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" /> <!-- Permisos Qr -->\n    <uses-permission android:name=\"android.permission.CAMERA\" />\n\n    <uses-feature android:name=\"android.hardware.camera\" />\n    <uses-feature android:name=\"android.hardware.camera.autofocus\" />\n\n    <application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher\"\n        android:theme=\"@style/AppThemeHome\">\n        <activity android:name=\".ui.list_machine.ModifyMachine\"></activity>\n        <activity android:name=\".ui.Foro.main.ForoMain\" />\n        <activity android:name=\".ui.Foro.lets_start.AddCommunity\" />\n        <activity android:name=\".ui.Foro.lets_start.choose_community\" />\n        <activity android:name=\".ui.Foro.lets_start.welcome_forum\" />\n        <activity android:name=\".MainActivity\" />\n\n        <service android:name=\".ui.service.ServicioMqtt\" />\n\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity\">\n            <intent-filter>\n                <action android:name=\"android.intent.action.MAIN\" />\n\n                <category android:name=\"android.intent.category.LAUNCHER\" />\n            </intent-filter>\n        </activity>\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\" />\n        <activity android:name=\".ui.profile.settings.HelpProfile\" />\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\" />\n        <activity android:name=\".ui.list_machine.AddMachine\" />\n        <activity android:name=\".ui.profile.settings.ModifyProfile\" />\n        <activity android:name=\".ui.logmail.RegisterActivity\" />\n        <activity android:name=\".ui.logmail.LoginActivity\" />\n        <activity android:name=\".ui.list_machine.CaptureAct\" />\n        <activity android:name=\".ui.login.LogActivity\" />\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\" />\n        <activity android:name=\".ui.LoadAnimations.LogprimeraActivity\" />\n        <activity android:name=\".ui.graphics.GraphicsActivity\" />\n        <activity android:name=\".ui.list_machine.ModifyMachine\" />\n\n        <meta-data\n            android:name=\"com.google.android.geo.API_KEY\"\n            android:value=\"@string/google_maps_key\" />\n        <meta-data\n            android:name=\"com.facebook.sdk.ApplicationId\"\n            android:value=\"@string/facebook_app_id\"\n            tools:replace=\"android:value\" />\n        <meta-data\n            android:name=\"preloaded_fonts\"\n            android:resource=\"@array/preloaded_fonts\" />\n\n        <activity\n            android:name=\"com.theartofdev.edmodo.cropper.CropImageActivity\"\n            android:theme=\"@style/Base.Theme.AppCompat\" />\n    </application>\n\n</manifest>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/AndroidManifest.xml	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
-+++ app/src/main/AndroidManifest.xml	(date 1610364270532)
-@@ -21,7 +21,8 @@
-         android:label="@string/app_name"
-         android:roundIcon="@mipmap/ic_launcher"
-         android:theme="@style/AppThemeHome">
--        <activity android:name=".ui.list_machine.ModifyMachine"></activity>
-+        <activity android:name=".ui.Foro.lets_start.EditCommunity"></activity>
-+        <activity android:name=".ui.list_machine.ModifyMachine" />
-         <activity android:name=".ui.Foro.main.ForoMain" />
-         <activity android:name=".ui.Foro.lets_start.AddCommunity" />
-         <activity android:name=".ui.Foro.lets_start.choose_community" />
-Index: app/src/main/java/com/example/infinitycrop/ui/Foro/lets_start/AddCommunity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.Foro.lets_start;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport com.example.infinitycrop.R;\r\n\r\npublic class AddCommunity extends AppCompatActivity {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_add_community);\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/Foro/lets_start/AddCommunity.java	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
-+++ app/src/main/java/com/example/infinitycrop/ui/Foro/lets_start/AddCommunity.java	(date 1610375353677)
-@@ -1,16 +1,211 @@
- package com.example.infinitycrop.ui.Foro.lets_start;
- 
-+import androidx.annotation.NonNull;
-+import androidx.annotation.Nullable;
- import androidx.appcompat.app.AppCompatActivity;
- 
-+import android.app.Activity;
-+import android.content.Intent;
-+import android.graphics.Bitmap;
-+import android.net.Uri;
- import android.os.Bundle;
-+import android.view.View;
-+import android.widget.Button;
-+import android.widget.EditText;
-+import android.widget.ImageView;
-+import android.widget.TextView;
-+import android.widget.Toast;
- 
- import com.example.infinitycrop.R;
-+import com.example.infinitycrop.ui.Foro.lets_start.rv_community.CommunityModel;
-+import com.google.android.gms.tasks.Continuation;
-+import com.google.android.gms.tasks.OnCompleteListener;
-+import com.google.android.gms.tasks.OnFailureListener;
-+import com.google.android.gms.tasks.OnSuccessListener;
-+import com.google.android.gms.tasks.Task;
-+import com.google.firebase.auth.FirebaseAuth;
-+import com.google.firebase.auth.FirebaseUser;
-+import com.google.firebase.firestore.DocumentReference;
-+import com.google.firebase.firestore.FirebaseFirestore;
-+import com.google.firebase.firestore.QueryDocumentSnapshot;
-+import com.google.firebase.firestore.QuerySnapshot;
-+import com.google.firebase.storage.FirebaseStorage;
-+import com.google.firebase.storage.StorageReference;
-+import com.google.firebase.storage.UploadTask;
-+import com.squareup.picasso.Picasso;
-+import com.theartofdev.edmodo.cropper.CropImage;
-+import com.theartofdev.edmodo.cropper.CropImageView;
-+
-+import java.io.ByteArrayOutputStream;
-+import java.io.File;
-+import java.io.IOException;
-+import java.util.HashMap;
-+import java.util.Map;
-+
-+import id.zelory.compressor.Compressor;
- 
- public class AddCommunity extends AppCompatActivity {
- 
-+    //layout variables
-+    private EditText input_name;
-+    private TextView change_img;
-+    private EditText input_desc;
-+    private ImageView img_addCommunity;
-+    private ImageView btn_back;
-+    private Button btn_create;
-+    private String name;
-+    //firebase variables
-+    private FirebaseUser usuario;
-+    private FirebaseFirestore db;
-+    private DocumentReference documentReference;
-+    private StorageReference mStorageRef;
-+    private String id;
-+    //change image variables
-+    private String image_url;
-+    private Bitmap thumb_bitmap;
-+    private byte[] thumb_byte;
-     @Override
-     protected void onCreate(Bundle savedInstanceState) {
-         super.onCreate(savedInstanceState);
-         setContentView(R.layout.activity_add_community);
-+
-+        //layout variables
-+        input_name=findViewById(R.id.input_name_addCommunity);
-+        input_desc=findViewById(R.id.input_desc_addCommunity);
-+        change_img=findViewById(R.id.changeImg_addCommunity);
-+        img_addCommunity=findViewById(R.id.img_bS_Addcommunity);
-+        btn_back=findViewById(R.id.backToChooseCommunity);
-+        btn_create=findViewById(R.id.btn_createCommunity);
-+        //change img variables
-+        thumb_bitmap=null;
-+        image_url="";
-+        //firebase variables
-+        usuario = FirebaseAuth.getInstance().getCurrentUser();
-+        db= FirebaseFirestore.getInstance();
-+        mStorageRef = FirebaseStorage.getInstance().getReference();
-+        id=usuario.getUid();
-+        mStorageRef.child("foro/user/Default/default.jpg").getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {
-+            @Override
-+            public void onSuccess(Uri uri) {
-+                // Got the download URL for 'users/me/profile.png'
-+                Picasso.get().load(uri).into(img_addCommunity);
-+                image_url=uri.toString();
-+            }
-+        }).addOnFailureListener(new OnFailureListener() {
-+            @Override
-+            public void onFailure(@NonNull Exception exception) {
-+                // Handle any errors
-+            }
-+        });
-+        //Onclick
-+        btn_back.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                finish();
-+            }
-+        });
-+        change_img.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                if(input_name.getText().toString().equals("")){
-+                    Toast.makeText(getApplicationContext(),"Indique un nombre valido",Toast.LENGTH_LONG).show();
-+                }else{
-+                    CropImage.startPickImageActivity(AddCommunity.this);
-+                }
-+            }
-+        });
-+        btn_create.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                name=input_name.getText().toString();
-+                if(name.equals("")){
-+                    Toast.makeText(getApplicationContext(),"Indique un nombre valido",Toast.LENGTH_LONG).show();
-+                }else{
-+                    NameIsUsed();
-+                }
-+            }
-+        });
-+    }
-+
-+    public void NameIsUsed(){
-+        db.collection("Community")
-+                .whereEqualTo("name", name)
-+                .get()
-+                .addOnCompleteListener(new OnCompleteListener<QuerySnapshot>() {
-+                    @Override
-+                    public void onComplete(@NonNull Task<QuerySnapshot> task) {
-+                        if (task.isSuccessful()) {
-+                            QuerySnapshot document = task.getResult();
-+                            if (document.size()>=1) {
-+                                Toast.makeText(getApplicationContext(),"El nombre ya existe",Toast.LENGTH_LONG).show();
-+                            } else {
-+                                saveCommunity();
-+                            }
-+                        } else {
-+
-+                        }
-+                    }
-+                });
-+    }
-+
-+    @Override
-+    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {
-+        super.onActivityResult(requestCode, resultCode, data);
-+
-+        if(requestCode==CropImage.PICK_IMAGE_CHOOSER_REQUEST_CODE && resultCode == Activity.RESULT_OK){
-+            Uri imageuri=CropImage.getPickImageResultUri(this,data);
-+            //recortar imagen
-+            CropImage.activity(imageuri)
-+                    .setGuidelines(CropImageView.Guidelines.ON)
-+                    .start(AddCommunity.this);
-+        }
-+        if(requestCode==CropImage.CROP_IMAGE_ACTIVITY_REQUEST_CODE){
-+            CropImage.ActivityResult result=CropImage.getActivityResult(data);
-+            if(resultCode==RESULT_OK){
-+                Uri resultUri=result.getUri();
-+                File url=new File(resultUri.getPath());
-+                Picasso.get().load(url).into(img_addCommunity);
-+                //comprimir imagen
-+                try{
-+                    thumb_bitmap=new Compressor(this)
-+                            .setQuality(90)
-+                            .compressToBitmap(url);
-+                }catch (IOException e){
-+                    e.printStackTrace();
-+                }
-+                ByteArrayOutputStream byteArrayOutputStream=new ByteArrayOutputStream();
-+                thumb_bitmap.compress(Bitmap.CompressFormat.JPEG,90,byteArrayOutputStream);
-+                 thumb_byte= byteArrayOutputStream.toByteArray();
-+                //save img in storage
-+                name=input_name.getText().toString();
-+                String urlStorage="foro/user/"+id+"/community";
-+                final StorageReference ref = mStorageRef.child(urlStorage).child(name);
-+                UploadTask uploadTask=ref.putBytes(thumb_byte);
-+                //subit imagen storage
-+                Task<Uri> uriTask=uploadTask.continueWithTask(new Continuation<UploadTask.TaskSnapshot, Task<Uri>>() {
-+                    @Override
-+                    public Task<Uri> then(@NonNull Task<UploadTask.TaskSnapshot> task) throws Exception {
-+                        return ref.getDownloadUrl();
-+                    }
-+                }).addOnCompleteListener(new OnCompleteListener<Uri>() {
-+                    @Override
-+                    public void onComplete(@NonNull Task<Uri> task) {
-+                        Uri dowloadUri=task.getResult();
-+                        image_url=dowloadUri.toString();
-+                    }
-+                });
-+            }
-+        }
-+    }
-+
-+
-+    public void saveCommunity(){
-+        name=input_name.getText().toString();
-+        //create the community document
-+        CommunityModel communityModel=
-+                new CommunityModel(image_url,name,input_desc.getText().toString(),id,0,false,0);
-+        db.collection("Community").add(communityModel);
-+
-+        finish();
-     }
- }
-\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_17_01_2021_15_05_[Default_Changelist]/shelved.patch
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_17_01_2021_15_05_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_17_01_2021_15_05_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,1205 +0,0 @@
-Index: app/src/main/java/com/example/infinitycrop/ui/Foro/lets_start/choose_community.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.Foro.lets_start;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.Foro.lets_start.rv_community.CommunityAdapter;\r\nimport com.example.infinitycrop.ui.Foro.lets_start.rv_community.CommunityModel;\r\nimport com.example.infinitycrop.ui.list_machine.Adapter;\r\nimport com.example.infinitycrop.ui.list_machine.MachineModel;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\nimport com.google.android.material.bottomsheet.BottomSheetDialog;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.google.firebase.firestore.Query;\r\nimport com.google.firebase.firestore.ThrowOnExtraProperties;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.makeramen.roundedimageview.RoundedImageView;\r\nimport com.squareup.picasso.Picasso;\r\n\r\npublic class choose_community extends AppCompatActivity {\r\n\r\n    //1. declaro la variable del recyclerView\r\n    private RecyclerView mFirestoreList;\r\n    private RecyclerView communitiesRv;\r\n    //2. Firebase variables\r\n    private FirebaseFirestore firebaseFirestore;\r\n    private FirebaseAuth firebaseAuth;\r\n    private StorageReference firebaseStorage;\r\n    private String uid;\r\n    //5. declaro viewHolder\r\n    private CommunityAdapter communityAdapter;\r\n    private CommunityAdapter communitiesAdapter;\r\n    //variables del layout\r\n    private ImageView btn_back;\r\n    private FloatingActionButton btn_addCommunity;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_choose_community);\r\n\r\n        //1. initialice the ETE SETCH recyclerView\r\n        mFirestoreList=findViewById(R.id.myCommunity_list);\r\n        communitiesRv=findViewById(R.id.communities_list);\r\n        //2. firebase variables\r\n        firebaseFirestore=FirebaseFirestore.getInstance();\r\n        firebaseStorage=FirebaseStorage.getInstance().getReference();\r\n        firebaseAuth=FirebaseAuth.getInstance();\r\n        uid=firebaseAuth.getUid();\r\n        //variables del layout\r\n        btn_back=findViewById(R.id.btn_back_welcome2);\r\n        btn_addCommunity=findViewById(R.id.button_add_community);\r\n        //onClick\r\n        btn_back.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                finish();\r\n            }\r\n        });\r\n        btn_addCommunity.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getApplicationContext(), AddCommunity.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n        //RV my communities\r\n\r\n        //3.Query\r\n        //3.1 saco todos los documentos\r\n        Query query= firebaseFirestore.collection(\"Community\")\r\n                .whereEqualTo(\"creator\",uid);\r\n\r\n        //4.Recycler optiones\r\n        FirestoreRecyclerOptions<CommunityModel> options=new FirestoreRecyclerOptions.Builder<CommunityModel>()\r\n                .setQuery(query,CommunityModel.class)\r\n                .build();\r\n\r\n        //5. View holder\r\n        communityAdapter=new CommunityAdapter(options);\r\n        mFirestoreList.setHasFixedSize(false);\r\n        mFirestoreList.setLayoutManager(new GridLayoutManager(this,4,GridLayoutManager.VERTICAL,false));\r\n        mFirestoreList.setAdapter(communityAdapter);\r\n\r\n       communityAdapter.setOnItemClickListener(new CommunityAdapter.OnItemClickListener() {\r\n           @Override\r\n           public void onItemClick(DocumentSnapshot documentSnapshot, int position) {\r\n               CommunityModel communityModel = documentSnapshot.toObject(CommunityModel.class);\r\n               final String id = documentSnapshot.getId();\r\n               //final String path = documentSnapshot.getString(\"name\");\r\n               //Toast.makeText(getApplicationContext(),id, Toast.LENGTH_LONG).show();\r\n               bottomSheetCommunity(communityModel,id,position);\r\n\r\n           }\r\n       });\r\n\r\n       //RV most popular communities\r\n\r\n        //3.Query\r\n        //3.1 saco todos los documentos\r\n        Query queryCommunities= firebaseFirestore.collection(\"Community\")\r\n                .orderBy(\"followers\",Query.Direction.DESCENDING)\r\n                .limit(30);\r\n\r\n        //4.Recycler optiones\r\n        FirestoreRecyclerOptions<CommunityModel> optionsCommunities=new FirestoreRecyclerOptions.Builder<CommunityModel>()\r\n                .setQuery(queryCommunities,CommunityModel.class)\r\n                .build();\r\n\r\n        //5. View holder\r\n        communitiesAdapter=new CommunityAdapter(optionsCommunities);\r\n        communitiesRv.setHasFixedSize(false);\r\n        communitiesRv.setLayoutManager(new GridLayoutManager(this,4,GridLayoutManager.VERTICAL,false));\r\n        communitiesRv.setAdapter(communitiesAdapter);\r\n\r\n        communitiesAdapter.setOnItemClickListener(new CommunityAdapter.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(DocumentSnapshot documentSnapshot, int position) {\r\n                CommunityModel communityModel = documentSnapshot.toObject(CommunityModel.class);\r\n                final String id = documentSnapshot.getId();\r\n                //final String path = documentSnapshot.getString(\"name\");\r\n                //Toast.makeText(getApplicationContext(),id, Toast.LENGTH_LONG).show();\r\n                bottomSheetCommunity(communityModel,id,position);\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        communityAdapter.startListening();\r\n        communitiesAdapter.startListening();\r\n    }\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        communityAdapter.stopListening();\r\n        communitiesAdapter.startListening();\r\n    }\r\n\r\n    private void bottomSheetCommunity(final CommunityModel communityModel, final String uiDocument, final int position){\r\n        final BottomSheetDialog bottomSheetDialog=new BottomSheetDialog(choose_community.this,R.style.BottomSheetDialogTheme);\r\n        bottomSheetDialog.setContentView(R.layout.bottom_sheet_community);\r\n        final AlertDialog.Builder builder = new AlertDialog.Builder(this);\r\n        if(communityModel.getCreator().equals(uid)){ //cuando haces click sobre tu comunidad\r\n            //variables from the botomSheet layout\r\n            TextView name=bottomSheetDialog.findViewById(R.id.name_bS_community);\r\n            TextView name2=bottomSheetDialog.findViewById(R.id.name_bS_community2);\r\n            name.setText(R.string.editCommunity_text9);\r\n            name.setTextSize(14);\r\n            name.setTextColor(getResources().getColor(R.color.red));\r\n            name2.setText(communityModel.getName());\r\n            RoundedImageView img=bottomSheetDialog.findViewById(R.id.img_bS_community);\r\n            Picasso.get().load(communityModel.getImg()).into(img);\r\n            TextView desc=bottomSheetDialog.findViewById(R.id.desc_bS_community);\r\n            desc.setText(communityModel.getDescription());\r\n            TextView posts=bottomSheetDialog.findViewById(R.id.num_posts);\r\n            String post= String.valueOf(communityModel.getPosts());\r\n            posts.setText(post);\r\n            TextView followers=bottomSheetDialog.findViewById(R.id.num_followers);\r\n            String followersString= String.valueOf(communityModel.getFollowers());\r\n            followers.setText(followersString);\r\n            //button editar , eliminar\r\n            final Button button=bottomSheetDialog.findViewById(R.id.btn_follow);\r\n            button.setText(R.string.community_sheet_text7);\r\n            button.setBackgroundResource(R.drawable.button_action_machine);\r\n            button.setTextColor(getResources().getColor(R.color.colorPrimaryDashboard));\r\n            button.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    //Intent modificar community\r\n                    Intent intent = new Intent(getBaseContext(), EditCommunity.class);\r\n                    intent.putExtra(\"community\", uiDocument);\r\n                    startActivity(intent);\r\n                    bottomSheetDialog.dismiss();\r\n                }\r\n            });\r\n            name.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    builder.setMessage(\"Seguro que quieres eliminar esta comunidad?\");\r\n                    builder.setTitle(\"Eliminar comunidad\");\r\n                    builder.setPositiveButton(\"Eliminar\", new DialogInterface.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(DialogInterface dialog, int which) {\r\n                            communityAdapter.deleteItem(position);\r\n                            firebaseStorage.child(\"foro/user/\"+uid+\"/community/\"+communityModel.getName()).delete();\r\n                            dialog.cancel();\r\n                        }\r\n                    }).setNegativeButton(\"Cancelar\", new DialogInterface.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(DialogInterface dialog, int which) {\r\n                            dialog.cancel();\r\n                        }\r\n                    });\r\n                    AlertDialog dialog = builder.create();\r\n                    dialog.show();\r\n                    bottomSheetDialog.dismiss();\r\n                }\r\n            });\r\n            bottomSheetDialog.findViewById(R.id.btn_cancelBottomSheet).setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    bottomSheetDialog.dismiss();\r\n                }\r\n            });\r\n\r\n        }else{ //cuando hago click en otra comunidad\r\n            //variables from the botomSheet layout\r\n            final int suscriptores=communityModel.getFollowers();\r\n            TextView name=bottomSheetDialog.findViewById(R.id.name_bS_community);\r\n            TextView name2=bottomSheetDialog.findViewById(R.id.name_bS_community2);\r\n            name.setText(communityModel.getName());\r\n            name2.setText(communityModel.getName());\r\n            RoundedImageView img=bottomSheetDialog.findViewById(R.id.img_bS_community);\r\n            Picasso.get().load(communityModel.getImg()).into(img);\r\n            TextView desc=bottomSheetDialog.findViewById(R.id.desc_bS_community);\r\n            desc.setText(communityModel.getDescription());\r\n            TextView posts=bottomSheetDialog.findViewById(R.id.num_posts);\r\n            String post= String.valueOf(communityModel.getPosts());\r\n            posts.setText(post);\r\n            TextView followers=bottomSheetDialog.findViewById(R.id.num_followers);\r\n            String followersString= String.valueOf(communityModel.getFollowers());\r\n            followers.setText(followersString);\r\n            //button follow , unfollow\r\n            final Button button=bottomSheetDialog.findViewById(R.id.btn_follow);\r\n            firebaseFirestore.collection(\"Foro user\").document(uid)\r\n                    .collection(\"Following\").document(uiDocument)\r\n                    .addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                        @Override\r\n                        public void onEvent(@Nullable DocumentSnapshot value, @Nullable FirebaseFirestoreException error) {\r\n                            if(value.exists()){\r\n                                button.setText(R.string.community_sheet_text5);\r\n                                button.setBackgroundResource(R.drawable.button_unfollow);\r\n                                button.setTextColor(getResources().getColor(R.color.black));\r\n                            }else{\r\n                                button.setText(R.string.community_sheet_text4);\r\n                            }\r\n                        }\r\n                    });\r\n            button.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    //ya es suscrito\r\n                    String textButton=button.getText().toString();\r\n                    String ifText=getResources().getString(R.string.community_sheet_text5);\r\n                    if(textButton.equals(ifText)){\r\n                        //eliminar de la coleccion following de Foro user\r\n                        communitiesAdapter.unFollow(position,uiDocument,suscriptores);\r\n                    }else{ //no esta suscrito\r\n                        //añadir comunidad a la coleccion Following\r\n                        communitiesAdapter.follow(position,uiDocument,suscriptores);\r\n                    }\r\n                    bottomSheetDialog.dismiss();\r\n                }\r\n            });\r\n            bottomSheetDialog.findViewById(R.id.btn_cancelBottomSheet).setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    bottomSheetDialog.dismiss();\r\n                }\r\n            });\r\n        }\r\n        bottomSheetDialog.show();\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/Foro/lets_start/choose_community.java	(revision fb41fa8845742d9402871b245cb4033bf7a31cf1)
-+++ app/src/main/java/com/example/infinitycrop/ui/Foro/lets_start/choose_community.java	(date 1610831917307)
-@@ -21,6 +21,7 @@
- import com.example.infinitycrop.R;
- import com.example.infinitycrop.ui.Foro.lets_start.rv_community.CommunityAdapter;
- import com.example.infinitycrop.ui.Foro.lets_start.rv_community.CommunityModel;
-+import com.example.infinitycrop.ui.Foro.main.ForoMain;
- import com.example.infinitycrop.ui.list_machine.Adapter;
- import com.example.infinitycrop.ui.list_machine.MachineModel;
- import com.firebase.ui.firestore.FirestoreRecyclerOptions;
-@@ -54,6 +55,7 @@
-     //variables del layout
-     private ImageView btn_back;
-     private FloatingActionButton btn_addCommunity;
-+    private Button btn_over;
- 
-     @Override
-     protected void onCreate(Bundle savedInstanceState) {
-@@ -71,6 +73,7 @@
-         //variables del layout
-         btn_back=findViewById(R.id.btn_back_welcome2);
-         btn_addCommunity=findViewById(R.id.button_add_community);
-+        btn_over=findViewById(R.id.btn_continue_2);
-         //onClick
-         btn_back.setOnClickListener(new View.OnClickListener() {
-             @Override
-@@ -85,6 +88,13 @@
-                 startActivity(intent);
-             }
-         });
-+        btn_over.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                Intent intent = new Intent(getApplicationContext(), ForoMain.class);
-+                startActivity(intent);
-+            }
-+        });
- 
-         //RV my communities
- 
-Index: app/src/main/res/layout/activity_foro_main.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.Foro.main.ForoMain\">\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_foro_main.xml	(revision fb41fa8845742d9402871b245cb4033bf7a31cf1)
-+++ app/src/main/res/layout/activity_foro_main.xml	(date 1610832572137)
-@@ -1,9 +1,33 @@
- <?xml version="1.0" encoding="utf-8"?>
--<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
-+<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
-     xmlns:app="http://schemas.android.com/apk/res-auto"
-     xmlns:tools="http://schemas.android.com/tools"
-     android:layout_width="match_parent"
-     android:layout_height="match_parent"
-+    android:id="@+id/menu_foro_container"
-     tools:context=".ui.Foro.main.ForoMain">
-+    <androidx.viewpager.widget.ViewPager
-+        android:id="@+id/view_pagerForo"
-+        android:layout_width="match_parent"
-+        android:layout_height="match_parent"
-+        android:background="#EFE9E9"
-+        android:layout_alignParentStart="true"
-+        android:layout_centerVertical="true"
-+        android:animateLayoutChanges="true"
-+        android:layoutDirection="locale"
-+        />
-+    <com.ismaeldivita.chipnavigation.ChipNavigationBar
-+        android:id="@+id/botton_nav_foro"
-+        android:layout_width="match_parent"
-+        android:layout_height="wrap_content"
-+        app:cnb_menuResource="@menu/foro_nav_item"
-+        android:layout_alignParentBottom="true"
-+        android:background="@drawable/round_corners_foro_menu"
-+        app:cnb_unselectedColor="@color/black"
-+        android:paddingTop="10dp"
-+        android:paddingBottom="10dp"
-+        app:cnb_radius="8dp"
-+        android:layout_margin="10dp"
-+        android:elevation="8dp"/>
- 
--</androidx.constraintlayout.widget.ConstraintLayout>
-\ No newline at end of file
-+</RelativeLayout>
-\ No newline at end of file
-Index: app/src/main/res/values/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><resources>\n    <string name=\"app_name\">Infinity Crop</string>\n    <string name=\"title_home\">Infinity Crop</string>\n    <string name=\"title_inicio\">Inicio</string>\n    <string name=\"title_dashboard\">Panel de control</string>\n    <string name=\"title_notifications\">Notificaciones</string>\n    <string name=\"title_wellcome_login\">¡Te damos la bienvenida!</string>\n    <string name=\"title_orderLog\">Inicia sesión</string>\n    <string name=\"title_cont_faceboock\">Iniciar sesión con Facebook</string>\n    <string name=\"title_cont_google\">Iniciar sesión con Google</string>\n    <string name=\"title_cont_mail\">Iniciar sesión con Email</string>\n\n    <string name=\"title_register\">Registrate</string>\n    <string name=\"title_bienv\">Hola de nuevo!</string>\n    <string name=\"title_bienvR\">¡Hola, es un placer!</string>\n    <string name=\"title_userR\">Introduce un correo:</string>\n    <string name=\"title_nameR\">Introduce un nombre:</string>\n    <string name=\"title_passwordR\">Introduce una contraseña:</string>\n    <string name=\"title_registrar\">Acceder</string>\n    <string name=\"btn_newuser\">Si no tienes una cuenta, puedes registarte <u>Aquí</u> </string>\n    <string name=\"title_olvidado\">He olvidado mi contraseña</string>\n    <!-- ANYADIR UNA NUEVA MAQUINA STRINGS -->\n    <string name=\"title_register_machine\">Registra una nueva máquina</string>\n    <string name=\"title_infoMachine\">Completa estos campos</string>\n    <string name=\"btn_registMachine\">Añadir máquina</string>\n    <string name=\"title_name_machine\">Introduce el nombre de tu máquina:</string>\n    <string name=\"title_name_model\">Modelo de tu máquina:</string>\n    <string name=\"title_name_favorites\">Añadir tu máquina a favoritos</string>\n    <string name=\"title_scan_machine\">Escanear máquina</string>\n\n\n    <!-- TODO: Remove or change this placeholder text -->\n\n    <string name=\"change_city\">Change city</string>\n\n    <!-- Put your own APP ID here -->\n    <string name=\"open_weather_maps_app_id\">11111</string>\n\n    <string name=\"weather_sunny\">&#xf00d;</string>\n    <string name=\"weather_clear_night\">&#xf02e;</string>\n\n    <string name=\"weather_foggy\">&#xf014;</string>\n    <string name=\"weather_cloudy\">&#xf013;</string>\n    <string name=\"weather_rainy\">&#xf019;</string>\n    <string name=\"weather_snowy\">&#xf01b;</string>\n    <string name=\"weather_thunder\">&#xf01e;</string>\n    <string name=\"weather_drizzle\">&#xf01c;</string>\n\n    <string name=\"place_not_found\">Sorry, no weather data found.</string>\n    <string name=\"facebook_app_id\">140146287567868</string>\n    <string name=\"fb_login_protocol_scheme\">fb140146287567868</string>\n    <!-- TODO: Remove or change this placeholder text -->\n    <string name=\"hello_blank_fragment\">Hello blank fragment</string>\n\n\n    <!-- foro -->\n    <!-- welcome user -->\n    <string name=\"welcome_text1\">Vamos a empezar...</string>\n    <string name=\"welcome_text2\">Bienvenido al</string>\n    <string name=\"welcome_text3\"> <b>Foro</b> de <i>Infinity Crop</i></string>\n    <string name=\"welcome_text4\">Continuar como</string>\n    <string name=\"welcome_text5\">Cambiar imagen</string>\n    <string name=\"welcome_text6\">Nombre del usuario: </string>\n    <string name=\"welcome_text7\">Continuar </string>\n    <string name=\"welcome_text8\">Descripción (opcional): </string>ç\n    <!-- choose community -->\n    <string name=\"community_text1\">Uno más y hemos terminado...</string>\n    <string name=\"community_text2\"><b>Tus comunidadades</b></string>\n    <string name=\"community_text3\"><b>Lo más popular</b></string>\n    <!-- choose community -> bottom Sheet community -->\n    <string name=\"community_sheet_text1\">Posts</string>\n    <string name=\"community_sheet_text2\">Followers</string>\n    <string name=\"community_sheet_text3\">Cancelar</string>\n    <string name=\"community_sheet_text4\">Suscribirse</string>\n    <string name=\"community_sheet_text5\">Dejar de seguir</string>\n    <string name=\"community_sheet_text6\">Finalizar</string>\n    <string name=\"community_sheet_text7\">Editar</string>\n    <!-- addCommunity  -->\n    <string name=\"editCommunity_text1\">Crear communidad</string>\n    <string name=\"editCommunity_text2\"><b>Cambiar imagen</b></string>\n    <string name=\"editCommunity_text3\">Nombre (obligatorio)</string>\n    <string name=\"editCommunity_text4\">Nombre</string>\n    <string name=\"editCommunity_text5\">Descripción (opcional)</string>\n    <string name=\"editCommunity_text6\">Guardar</string>\n    <!-- EditCommunity  -->\n    <string name=\"editCommunity_text7\">Editar Communidad</string>\n    <string name=\"editCommunity_text8\">Guardar cambios</string>\n    <string name=\"editCommunity_text9\">Eliminar comunidad</string>\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/values/strings.xml	(revision fb41fa8845742d9402871b245cb4033bf7a31cf1)
-+++ app/src/main/res/values/strings.xml	(date 1610837107639)
-@@ -86,4 +86,11 @@
-     <string name="editCommunity_text7">Editar Communidad</string>
-     <string name="editCommunity_text8">Guardar cambios</string>
-     <string name="editCommunity_text9">Eliminar comunidad</string>
-+    <!-- main foro menu  -->
-+    <string name="menu_foro1">Buscar</string>
-+    <string name="menu_foro2">Inicio</string>
-+    <string name="menu_foro3">Suscripciones</string>
-+    <string name="menu_foro4">Perfil</string>
-+    <!-- foro home  -->
-+    <string name="home_foro1"><b>Comunidades que sigues > </b></string>
- </resources>
-\ No newline at end of file
-Index: github.properties
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>gpr.usr = 61469172\ngpr.key = 72a0f63b7097b413e8ff78a7dd6ca9412aaf232c
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>windows-1252
-===================================================================
---- github.properties	(revision fb41fa8845742d9402871b245cb4033bf7a31cf1)
-+++ github.properties	(date 1610820456596)
-@@ -1,2 +1,2 @@
--gpr.usr = 61469172
--gpr.key = 72a0f63b7097b413e8ff78a7dd6ca9412aaf232c
-\ No newline at end of file
-+gpr.usr = 61473165
-+gpr.key = 9671a8c2e26934b214e49dd99b96077296ee2aca
-\ No newline at end of file
-Index: app/src/main/java/com/example/infinitycrop/ui/Foro/main/ForoMain.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.Foro.main;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport com.example.infinitycrop.R;\r\n\r\npublic class ForoMain extends AppCompatActivity {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_foro_main);\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/Foro/main/ForoMain.java	(revision fb41fa8845742d9402871b245cb4033bf7a31cf1)
-+++ app/src/main/java/com/example/infinitycrop/ui/Foro/main/ForoMain.java	(date 1610836329788)
-@@ -1,16 +1,208 @@
- package com.example.infinitycrop.ui.Foro.main;
- 
-+import androidx.annotation.NonNull;
- import androidx.appcompat.app.AppCompatActivity;
-+import androidx.fragment.app.Fragment;
-+import androidx.fragment.app.FragmentManager;
-+import androidx.fragment.app.FragmentPagerAdapter;
-+import androidx.viewpager.widget.ViewPager;
- 
- import android.os.Bundle;
- 
- import com.example.infinitycrop.R;
-+import com.example.infinitycrop.ui.Foro.main.Home.HomeForoFragment;
-+import com.example.infinitycrop.ui.Foro.main.Profile.ProfileForoFragment;
-+import com.example.infinitycrop.ui.Foro.main.Search.SearchForoFragment;
-+import com.example.infinitycrop.ui.Foro.main.Subscription.PanelForoFragment;
-+import com.ismaeldivita.chipnavigation.ChipNavigationBar;
-+
-+import java.util.ArrayList;
- 
- public class ForoMain extends AppCompatActivity {
- 
-+    ChipNavigationBar chipNavigationBar;
-+    private ViewPager viewPager;
-+    private int index = 0;
-     @Override
-     protected void onCreate(Bundle savedInstanceState) {
-         super.onCreate(savedInstanceState);
-         setContentView(R.layout.activity_foro_main);
-+
-+        chipNavigationBar=findViewById(R.id.botton_nav_foro);
-+        viewPager = findViewById(R.id.view_pagerForo);
-+        chipNavigationBar.setItemSelected(R.id.foro_home,true);
-+
-+        ViewPagerAdapter viewPagerAdapter = new ViewPagerAdapter(getSupportFragmentManager());
-+        viewPager.setAdapter(viewPagerAdapter);
-+
-+        final ViewPagerAdapter adapter = new ViewPagerAdapter(getSupportFragmentManager());
-+        final HomeForoFragment fragment_1 = new HomeForoFragment();
-+        final SearchForoFragment fragment_2 = new SearchForoFragment();
-+        final PanelForoFragment fragment_3 = new PanelForoFragment();
-+        final ProfileForoFragment fragment_4 = new ProfileForoFragment();
-+        adapter.addFragment(fragment_1);
-+        adapter.addFragment(fragment_2);
-+        adapter.addFragment(fragment_3);
-+        adapter.addFragment(fragment_4);
-+        viewPager.setAdapter(adapter);
-+        viewPager.setOffscreenPageLimit(4);
-+        index = 1;
-+        chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {
-+            @Override
-+            public void onItemSelected(int i) {
-+                switch(i){
-+                    case R.id.foro_home:
-+                        viewPager.setCurrentItem(0);
-+                        break;
-+                    case R.id.foro_search:
-+                        viewPager.setCurrentItem(1);
-+                        break;
-+                    case R.id.foro_panel:
-+                        viewPager.setCurrentItem(2);
-+                        break;
-+                    case R.id.foro_profile:
-+                        viewPager.setCurrentItem(3);
-+                        break;
-+                }
-+
-+
-+            }
-+        });
-+        viewPager.addOnPageChangeListener(new ViewPager.OnPageChangeListener() {
-+            @Override
-+            public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
-+
-+            }
-+
-+            @Override
-+            public void onPageSelected(int position) {
-+
-+                if (position == 0){
-+
-+                    chipNavigationBar.setItemSelected(R.id.foro_home, true);
-+                    chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {
-+                        @Override
-+                        public void onItemSelected(int id) {
-+
-+                            switch(id){
-+                                case R.id.foro_home:
-+                                    viewPager.setCurrentItem(0);
-+                                    break;
-+                                case R.id.foro_search:
-+                                    viewPager.setCurrentItem(1);
-+                                    break;
-+                                case R.id.foro_panel:
-+                                    viewPager.setCurrentItem(2);
-+                                    break;
-+                                case R.id.foro_profile:
-+                                    viewPager.setCurrentItem(3);
-+                                    break;
-+                            }
-+                        }
-+                    });
-+
-+                    index = 0;
-+
-+                }else if (position == 1){
-+
-+                    chipNavigationBar.setItemSelected(R.id.foro_search, true);
-+
-+                    if(index == 0 || index == 2){
-+
-+                        //fragment_2.downloadPlates_2();
-+                    }
-+                    index = 1;
-+                    //Toast.makeText(Home.this, ""+index, Toast.LENGTH_SHORT).show();
-+                }else if (position == 2){
-+
-+                    chipNavigationBar.setItemSelected(R.id.foro_panel, true);
-+                    chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {
-+                        @Override
-+                        public void onItemSelected(int id) {
-+
-+                            switch(id){
-+                                case R.id.foro_home:
-+                                    viewPager.setCurrentItem(0);
-+                                    break;
-+                                case R.id.foro_search:
-+                                    viewPager.setCurrentItem(1);
-+                                    break;
-+                                case R.id.foro_panel:
-+                                    viewPager.setCurrentItem(2);
-+                                    break;
-+                                case R.id.foro_profile:
-+                                    viewPager.setCurrentItem(3);
-+                                    break;
-+                            }
-+                        }
-+                    });
-+
-+                    index = 2;
-+
-+                }else if (position == 3){
-+
-+                    chipNavigationBar.setItemSelected(R.id.foro_profile, true);
-+                    chipNavigationBar.setOnItemSelectedListener(new ChipNavigationBar.OnItemSelectedListener() {
-+                        @Override
-+                        public void onItemSelected(int id) {
-+
-+                            switch(id){
-+                                case R.id.foro_home:
-+                                    viewPager.setCurrentItem(0);
-+                                    break;
-+                                case R.id.foro_search:
-+                                    viewPager.setCurrentItem(1);
-+                                    break;
-+                                case R.id.foro_panel:
-+                                    viewPager.setCurrentItem(2);
-+                                    break;
-+                                case R.id.foro_profile:
-+                                    viewPager.setCurrentItem(3);
-+                                    break;
-+                            }
-+                        }
-+                    });
-+
-+                    index = 3;
-+                }
-+            }
-+
-+            @Override
-+            public void onPageScrollStateChanged(int state) {
-+
-+            }
-+        });
-+    }
-+
-+    class ViewPagerAdapter extends FragmentPagerAdapter {
-+
-+
-+
-+        private ArrayList<Fragment> fragments;
-+        private ArrayList<String> titles;
-+
-+        ViewPagerAdapter (FragmentManager fm){
-+            super(fm);
-+            this.fragments = new ArrayList<>();
-+            this.titles = new ArrayList<>();
-+
-+        }
-+
-+        @NonNull
-+        @Override
-+        public Fragment getItem(int position) {
-+            return fragments.get(position);
-+        }
-+
-+        @Override
-+        public int getCount() {
-+            return fragments.size();
-+        }
-+
-+        public void addFragment(Fragment fragment){
-+            fragments.add(fragment);
-+
-+        }
-+
-     }
- }
-\ No newline at end of file
-Index: app/src/main/java/com/example/infinitycrop/ui/Foro/lets_start/rv_community/CommunityModel.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.Foro.lets_start.rv_community;\r\n\r\npublic class CommunityModel {\r\n\r\n    //IMPORTANTE : los nombres tienen que ser iguales a los del documento del firebase\r\n\r\n    private String img;\r\n    private String name;\r\n    private String description;\r\n    private String creator;\r\n    private int followers;\r\n    private Boolean following;\r\n    private int posts;\r\n\r\n    //IMPORTANTE: tiene que haber un constructor vacío, si no, no funcionaría\r\n    public CommunityModel() {}\r\n\r\n    //Constructor que usare para añadir una communidad\r\n\r\n    public CommunityModel(String img, String name, String description, String creator, int followers, Boolean following, int posts) {\r\n        this.img = img;\r\n        this.name = name;\r\n        this.description = description;\r\n        this.creator = creator;\r\n        this.followers = followers;\r\n        this.following = following;\r\n        this.posts = posts;\r\n    }\r\n\r\n\r\n\r\n\r\n    /*        GETTERS & SETTERS            */\r\n\r\n    public String getImg() {\r\n        return img;\r\n    }\r\n\r\n    public void setImg(String img) {\r\n        this.img = img;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getDescription() {\r\n        return description;\r\n    }\r\n\r\n    public void setDescription(String description) {\r\n        this.description = description;\r\n    }\r\n\r\n    public String getCreator() {\r\n        return creator;\r\n    }\r\n\r\n    public void setCreator(String creator) {\r\n        this.creator = creator;\r\n    }\r\n\r\n    public int getFollowers() {\r\n        return followers;\r\n    }\r\n\r\n    public void setFollowers(int followers) {\r\n        this.followers = followers;\r\n    }\r\n\r\n    public Boolean getFollowing() {\r\n        return following;\r\n    }\r\n\r\n    public void setFollowing(Boolean following) {\r\n        this.following = following;\r\n    }\r\n\r\n    public int getPosts() {\r\n        return posts;\r\n    }\r\n\r\n    public void setPosts(int posts) {\r\n        this.posts = posts;\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/Foro/lets_start/rv_community/CommunityModel.java	(revision fb41fa8845742d9402871b245cb4033bf7a31cf1)
-+++ app/src/main/java/com/example/infinitycrop/ui/Foro/lets_start/rv_community/CommunityModel.java	(date 1610889481112)
-@@ -11,6 +11,7 @@
-     private int followers;
-     private Boolean following;
-     private int posts;
-+    private String uid;
- 
-     //IMPORTANTE: tiene que haber un constructor vacío, si no, no funcionaría
-     public CommunityModel() {}
-@@ -26,9 +27,17 @@
-         this.following = following;
-         this.posts = posts;
-     }
--
--
--
-+    //constructor para el foro
-+    public CommunityModel(String img, String name, String description, String creator, int followers, Boolean following, int posts, String uid) {
-+        this.img = img;
-+        this.name = name;
-+        this.description = description;
-+        this.creator = creator;
-+        this.followers = followers;
-+        this.following = following;
-+        this.posts = posts;
-+        this.uid = uid;
-+    }
- 
-     /*        GETTERS & SETTERS            */
- 
-@@ -87,4 +96,12 @@
-     public void setPosts(int posts) {
-         this.posts = posts;
-     }
-+
-+    public String getUid() {
-+        return uid;
-+    }
-+
-+    public void setUid(String uid) {
-+        this.uid = uid;
-+    }
- }
-Index: app/src/main/res/drawable/round_corners_foro_menu.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/drawable/round_corners_foro_menu.xml	(date 1610830591259)
-+++ app/src/main/res/drawable/round_corners_foro_menu.xml	(date 1610830591259)
-@@ -0,0 +1,5 @@
-+<?xml version="1.0" encoding="utf-8"?>
-+<shape xmlns:android="http://schemas.android.com/apk/res/android">
-+    <corners android:radius="8dp"/>
-+    <solid android:color="@color/white"/>
-+</shape>
-\ No newline at end of file
-Index: app/src/main/res/layout/fragment_home_foro.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_home_foro.xml	(date 1610887305389)
-+++ app/src/main/res/layout/fragment_home_foro.xml	(date 1610887305389)
-@@ -0,0 +1,71 @@
-+<?xml version="1.0" encoding="utf-8"?>
-+<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
-+    xmlns:app="http://schemas.android.com/apk/res-auto"
-+    xmlns:tools="http://schemas.android.com/tools"
-+    android:layout_width="match_parent"
-+    android:layout_height="match_parent"
-+    tools:context=".ui.Foro.main.Home.HomeForoFragment">
-+
-+
-+    <ScrollView
-+        android:layout_width="match_parent"
-+        android:layout_height="match_parent">
-+        <androidx.constraintlayout.widget.ConstraintLayout
-+            android:layout_width="match_parent"
-+            android:layout_height="wrap_content">
-+
-+
-+            <TextView
-+                android:id="@+id/textView28"
-+                android:layout_width="0dp"
-+                android:layout_height="wrap_content"
-+                android:layout_marginStart="20dp"
-+                android:layout_marginTop="20dp"
-+                android:layout_marginEnd="20dp"
-+                android:text="@string/home_foro1"
-+                android:textSize="15sp"
-+                app:layout_constraintEnd_toEndOf="parent"
-+                app:layout_constraintStart_toStartOf="parent"
-+                app:layout_constraintTop_toTopOf="parent" />
-+
-+            <androidx.recyclerview.widget.RecyclerView
-+                android:id="@+id/followed_communities"
-+                android:layout_width="match_parent"
-+                android:layout_height="wrap_content"
-+                android:layout_marginStart="20dp"
-+                android:layout_marginTop="8dp"
-+                android:layout_marginEnd="20dp"
-+                app:layout_constraintEnd_toEndOf="parent"
-+                app:layout_constraintStart_toStartOf="parent"
-+                app:layout_constraintTop_toBottomOf="@+id/textView28" />
-+
-+            <View
-+                android:id="@+id/view4"
-+                android:layout_width="match_parent"
-+                android:layout_height="1dp"
-+                android:layout_marginTop="10dp"
-+                android:background="@color/colorPrimaryDark"
-+                app:layout_constraintEnd_toEndOf="parent"
-+                app:layout_constraintHorizontal_bias="0.0"
-+                app:layout_constraintStart_toStartOf="parent"
-+                app:layout_constraintTop_toBottomOf="@+id/followed_communities" />
-+
-+            <androidx.recyclerview.widget.RecyclerView
-+                android:id="@+id/followed_posts"
-+                android:layout_width="match_parent"
-+                android:layout_height="wrap_content"
-+                android:layout_marginTop="10dp"
-+                android:layout_marginBottom="70dp"
-+                android:isScrollContainer="false"
-+                android:nestedScrollingEnabled="false"
-+                app:layout_constraintBottom_toBottomOf="parent"
-+                app:layout_constraintEnd_toEndOf="parent"
-+                app:layout_constraintStart_toStartOf="parent"
-+                app:layout_constraintTop_toBottomOf="@+id/view4" />
-+        </androidx.constraintlayout.widget.ConstraintLayout>
-+
-+    </ScrollView>
-+
-+
-+
-+</FrameLayout>
-\ No newline at end of file
-Index: app/src/main/java/com/example/infinitycrop/ui/Foro/main/Search/SearchForoFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/Foro/main/Search/SearchForoFragment.java	(date 1610836297670)
-+++ app/src/main/java/com/example/infinitycrop/ui/Foro/main/Search/SearchForoFragment.java	(date 1610836297670)
-@@ -0,0 +1,66 @@
-+package com.example.infinitycrop.ui.Foro.main.Search;
-+
-+import android.os.Bundle;
-+
-+import androidx.fragment.app.Fragment;
-+
-+import android.view.LayoutInflater;
-+import android.view.View;
-+import android.view.ViewGroup;
-+
-+import com.example.infinitycrop.R;
-+
-+/**
-+ * A simple {@link Fragment} subclass.
-+ * Use the {@link SearchForoFragment#newInstance} factory method to
-+ * create an instance of this fragment.
-+ */
-+public class SearchForoFragment extends Fragment {
-+
-+    // TODO: Rename parameter arguments, choose names that match
-+    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
-+    private static final String ARG_PARAM1 = "param1";
-+    private static final String ARG_PARAM2 = "param2";
-+
-+    // TODO: Rename and change types of parameters
-+    private String mParam1;
-+    private String mParam2;
-+
-+    public SearchForoFragment() {
-+        // Required empty public constructor
-+    }
-+
-+    /**
-+     * Use this factory method to create a new instance of
-+     * this fragment using the provided parameters.
-+     *
-+     * @param param1 Parameter 1.
-+     * @param param2 Parameter 2.
-+     * @return A new instance of fragment SearchForoFragment.
-+     */
-+    // TODO: Rename and change types and number of parameters
-+    public static SearchForoFragment newInstance(String param1, String param2) {
-+        SearchForoFragment fragment = new SearchForoFragment();
-+        Bundle args = new Bundle();
-+        args.putString(ARG_PARAM1, param1);
-+        args.putString(ARG_PARAM2, param2);
-+        fragment.setArguments(args);
-+        return fragment;
-+    }
-+
-+    @Override
-+    public void onCreate(Bundle savedInstanceState) {
-+        super.onCreate(savedInstanceState);
-+        if (getArguments() != null) {
-+            mParam1 = getArguments().getString(ARG_PARAM1);
-+            mParam2 = getArguments().getString(ARG_PARAM2);
-+        }
-+    }
-+
-+    @Override
-+    public View onCreateView(LayoutInflater inflater, ViewGroup container,
-+                             Bundle savedInstanceState) {
-+        // Inflate the layout for this fragment
-+        return inflater.inflate(R.layout.fragment_search_foro, container, false);
-+    }
-+}
-\ No newline at end of file
-Index: app/src/main/res/layout/fragment_panel_foro.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_panel_foro.xml	(date 1610836328953)
-+++ app/src/main/res/layout/fragment_panel_foro.xml	(date 1610836328953)
-@@ -0,0 +1,15 @@
-+<?xml version="1.0" encoding="utf-8"?>
-+<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
-+    xmlns:tools="http://schemas.android.com/tools"
-+    android:layout_width="match_parent"
-+    android:layout_height="match_parent"
-+    tools:context=".ui.Foro.main.Subscription.PanelForoFragment">
-+
-+    <!-- TODO: Update blank fragment layout -->
-+    <TextView
-+        android:layout_width="match_parent"
-+        android:layout_height="match_parent"
-+        android:gravity="center"
-+        android:text="panel" />
-+
-+</FrameLayout>
-\ No newline at end of file
-Index: app/src/main/java/com/example/infinitycrop/ui/Foro/main/Home/HomeForoFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/Foro/main/Home/HomeForoFragment.java	(date 1610891991560)
-+++ app/src/main/java/com/example/infinitycrop/ui/Foro/main/Home/HomeForoFragment.java	(date 1610891991560)
-@@ -0,0 +1,361 @@
-+package com.example.infinitycrop.ui.Foro.main.Home;
-+
-+import android.content.DialogInterface;
-+import android.content.Intent;
-+import android.os.Bundle;
-+
-+import androidx.annotation.NonNull;
-+import androidx.annotation.Nullable;
-+import androidx.appcompat.app.AlertDialog;
-+import androidx.fragment.app.Fragment;
-+import androidx.recyclerview.widget.LinearLayoutManager;
-+import androidx.recyclerview.widget.RecyclerView;
-+
-+import android.view.LayoutInflater;
-+import android.view.View;
-+import android.view.ViewGroup;
-+import android.widget.Button;
-+import android.widget.TextView;
-+import android.widget.Toast;
-+
-+import com.example.infinitycrop.R;
-+import com.example.infinitycrop.ui.Foro.lets_start.EditCommunity;
-+import com.example.infinitycrop.ui.Foro.lets_start.choose_community;
-+import com.example.infinitycrop.ui.Foro.lets_start.rv_community.CommunityModel;
-+import com.example.infinitycrop.ui.Foro.main.Home.RVs.PostModel;
-+import com.example.infinitycrop.ui.Foro.main.Home.RVs.RVFollowed.AdapterFollowedCmty;
-+import com.example.infinitycrop.ui.Foro.main.Home.RVs.RvPost.AdapterPost;
-+import com.google.android.gms.tasks.OnCompleteListener;
-+import com.google.android.gms.tasks.Task;
-+import com.google.android.material.bottomsheet.BottomSheetDialog;
-+import com.google.firebase.auth.FirebaseAuth;
-+import com.google.firebase.firestore.DocumentSnapshot;
-+import com.google.firebase.firestore.EventListener;
-+import com.google.firebase.firestore.FirebaseFirestore;
-+import com.google.firebase.firestore.FirebaseFirestoreException;
-+import com.google.firebase.firestore.QueryDocumentSnapshot;
-+import com.google.firebase.firestore.QuerySnapshot;
-+import com.google.firebase.storage.FirebaseStorage;
-+import com.makeramen.roundedimageview.RoundedImageView;
-+import com.squareup.picasso.Picasso;
-+
-+import java.util.ArrayList;
-+import java.util.List;
-+import java.util.zip.CheckedOutputStream;
-+
-+/**
-+ * A simple {@link Fragment} subclass.
-+ * Use the {@link HomeForoFragment#newInstance} factory method to
-+ * create an instance of this fragment.
-+ */
-+public class HomeForoFragment extends Fragment {
-+
-+    // TODO: Rename parameter arguments, choose names that match
-+    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
-+    private static final String ARG_PARAM1 = "param1";
-+    private static final String ARG_PARAM2 = "param2";
-+
-+    // TODO: Rename and change types of parameters
-+    private String mParam1;
-+    private String mParam2;
-+
-+    public HomeForoFragment() {
-+        // Required empty public constructor
-+    }
-+
-+    /**
-+     * Use this factory method to create a new instance of
-+     * this fragment using the provided parameters.
-+     *
-+     * @param param1 Parameter 1.
-+     * @param param2 Parameter 2.
-+     * @return A new instance of fragment HomeForoFragment.
-+     */
-+    // TODO: Rename and change types and number of parameters
-+    public static HomeForoFragment newInstance(String param1, String param2) {
-+        HomeForoFragment fragment = new HomeForoFragment();
-+        Bundle args = new Bundle();
-+        args.putString(ARG_PARAM1, param1);
-+        args.putString(ARG_PARAM2, param2);
-+        fragment.setArguments(args);
-+        return fragment;
-+    }
-+
-+
-+
-+    @Override
-+    public void onCreate(Bundle savedInstanceState) {
-+        super.onCreate(savedInstanceState);
-+        if (getArguments() != null) {
-+            mParam1 = getArguments().getString(ARG_PARAM1);
-+            mParam2 = getArguments().getString(ARG_PARAM2);
-+        }
-+    }
-+
-+    //attributes
-+    //Rv
-+    private RecyclerView followed_comunities;
-+    private AdapterFollowedCmty adapterFollowedCmty;
-+    private RecyclerView followed_posts;
-+    private AdapterPost adapterPost;
-+    //firebase
-+    private FirebaseFirestore db;
-+    private FirebaseAuth firebaseAuth;
-+    private String uid;
-+
-+    //List
-+    private List<CommunityModel> communityModels= new ArrayList<>();
-+    private List<String> cimmunitiesId= new ArrayList<>();
-+    private List<PostModel> posts= new ArrayList<>();
-+
-+    @Override
-+    public View onCreateView(LayoutInflater inflater, ViewGroup container,
-+                             Bundle savedInstanceState) {
-+        // Inflate the layout for this fragment
-+        View v= inflater.inflate(R.layout.fragment_home_foro, container, false);
-+        //firebase
-+        db=FirebaseFirestore.getInstance();
-+        firebaseAuth=FirebaseAuth.getInstance();
-+        uid=firebaseAuth.getUid();
-+        //rv declaration
-+        followed_comunities=v.findViewById(R.id.followed_communities);
-+        followed_posts=v.findViewById(R.id.followed_posts);
-+        initRvFollowedCommunities();
-+        initRvFollowedPosts();
-+        getIdFollowedCommunities();
-+        return v;
-+    }
-+    private void initRvFollowedCommunities(){
-+        followed_comunities.setHasFixedSize(true);
-+        followed_comunities.setLayoutManager(new LinearLayoutManager(getContext(),LinearLayoutManager.HORIZONTAL,false));
-+    }
-+    private void getIdFollowedCommunities(){
-+        db.collection("Foro user").document(uid).collection("Following")
-+                .addSnapshotListener(new EventListener<QuerySnapshot>() {
-+                    @Override
-+                    public void onEvent(@Nullable QuerySnapshot value,
-+                                        @Nullable FirebaseFirestoreException e) {
-+                        if (e != null) {
-+                            return;
-+                        }
-+                        cimmunitiesId.clear();
-+                        for (QueryDocumentSnapshot doc : value) {
-+                            cimmunitiesId.add(doc.getId());
-+                        }
-+                        //guardo en la lista todas las comunidades que ha creado el user logged
-+                        db.collection("Community")
-+                                .whereEqualTo("creator",uid)
-+                                .addSnapshotListener(new EventListener<QuerySnapshot>() {
-+                                    @Override
-+                                    public void onEvent(@Nullable QuerySnapshot value,
-+                                                        @Nullable FirebaseFirestoreException e) {
-+                                        if (e != null) {
-+                                            return;
-+                                        }
-+
-+                                        for (QueryDocumentSnapshot doc : value) {
-+                                            cimmunitiesId.add(doc.getId());
-+                                        }
-+                                        getFollowedCommunities();
-+                                        getFollowedPosts();
-+
-+                                    }
-+                                });
-+                    }
-+                });
-+    }
-+    private void getFollowedCommunities(){
-+        //guardo en la lista todos los comunidades que se ha suscrito
-+        db.collection("Community")
-+                .addSnapshotListener(new EventListener<QuerySnapshot>() {
-+                    @Override
-+                    public void onEvent(@Nullable QuerySnapshot value,
-+                                        @Nullable FirebaseFirestoreException e) {
-+                        if (e != null) {
-+                            return;
-+                        }
-+                        communityModels.clear();
-+                        for (QueryDocumentSnapshot doc : value) {
-+                            for(String id: cimmunitiesId){
-+                                if(id.equals(doc.getId())){
-+                                    CommunityModel communityModel=doc.toObject(CommunityModel.class);
-+                                    communityModel.setUid(doc.getId());
-+                                    communityModels.add(communityModel);
-+                                }
-+                            }
-+                        }
-+                        adapterFollowedCmty= new AdapterFollowedCmty(communityModels,getContext());
-+                        onclickAdapterFollowedCmty();
-+                        followed_comunities.setAdapter(adapterFollowedCmty);
-+                    }
-+                });
-+
-+    }
-+    private void onclickAdapterFollowedCmty(){
-+        adapterFollowedCmty.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                int position=followed_comunities.getChildLayoutPosition(v);
-+                CommunityModel community=communityModels.get(position);
-+                bottomSheetCommunity(community,position);
-+            }
-+        });
-+    }
-+    //posts rv
-+    private void initRvFollowedPosts(){
-+        followed_posts.setHasFixedSize(false);
-+        followed_posts.setLayoutManager(new LinearLayoutManager(getContext(),LinearLayoutManager.VERTICAL,false));
-+    }
-+    private void getFollowedPosts(){
-+        posts.clear();
-+        //get all the post where i was subscribed.
-+        db.collection("Posts")
-+                .get()
-+                .addOnCompleteListener(new OnCompleteListener<QuerySnapshot>() {
-+                    @Override
-+                    public void onComplete(@NonNull Task<QuerySnapshot> task) {
-+                        if (task.isSuccessful()) {
-+                            for (QueryDocumentSnapshot document : task.getResult()) {
-+                                for(String id: cimmunitiesId){
-+                                    if(document.getString("community").equals(id)){
-+                                        PostModel postModel=document.toObject(PostModel.class);
-+                                        postModel.setUid(document.getId().toString());
-+                                        posts.add(postModel);
-+                                    }
-+                                }
-+                            }
-+                            adapterPost=new AdapterPost(posts,getContext());
-+                            followed_posts.setAdapter(adapterPost);
-+                        } else {
-+
-+                        }
-+                    }
-+                });
-+
-+    }
-+
-+    //bottom sheet community
-+    private void bottomSheetCommunity(CommunityModel communityModel, final int position){
-+        final String uiDocument=communityModel.getUid();
-+        final BottomSheetDialog bottomSheetDialog=new BottomSheetDialog(getContext(),R.style.BottomSheetDialogTheme);
-+        bottomSheetDialog.setContentView(R.layout.bottom_sheet_community);
-+        final AlertDialog.Builder builder = new AlertDialog.Builder(getContext());
-+        if(communityModel.getCreator().equals(uid)){ //cuando haces click sobre tu comunidad
-+            //variables from the botomSheet layout
-+            TextView name=bottomSheetDialog.findViewById(R.id.name_bS_community);
-+            TextView name2=bottomSheetDialog.findViewById(R.id.name_bS_community2);
-+            name.setText(R.string.editCommunity_text9);
-+            name.setTextSize(14);
-+            name.setTextColor(getResources().getColor(R.color.red));
-+            name2.setText(communityModel.getName());
-+            RoundedImageView img=bottomSheetDialog.findViewById(R.id.img_bS_community);
-+            Picasso.get().load(communityModel.getImg()).into(img);
-+            TextView desc=bottomSheetDialog.findViewById(R.id.desc_bS_community);
-+            desc.setText(communityModel.getDescription());
-+            TextView posts=bottomSheetDialog.findViewById(R.id.num_posts);
-+            String post= String.valueOf(communityModel.getPosts());
-+            posts.setText(post);
-+            TextView followers=bottomSheetDialog.findViewById(R.id.num_followers);
-+            String followersString= String.valueOf(communityModel.getFollowers());
-+            followers.setText(followersString);
-+            //button editar , eliminar
-+            final Button button=bottomSheetDialog.findViewById(R.id.btn_follow);
-+            button.setText(R.string.community_sheet_text7);
-+            button.setBackgroundResource(R.drawable.button_action_machine);
-+            button.setTextColor(getResources().getColor(R.color.colorPrimaryDashboard));
-+            button.setOnClickListener(new View.OnClickListener() {
-+                @Override
-+                public void onClick(View v) {
-+                    //Intent
-+
-+                    bottomSheetDialog.dismiss();
-+                }
-+            });
-+            name.setOnClickListener(new View.OnClickListener() {
-+                @Override
-+                public void onClick(View v) {
-+                    builder.setMessage("Seguro que quieres eliminar esta comunidad?");
-+                    builder.setTitle("Eliminar comunidad");
-+                    builder.setPositiveButton("Eliminar", new DialogInterface.OnClickListener() {
-+                        @Override
-+                        public void onClick(DialogInterface dialog, int which) {
-+
-+                            dialog.cancel();
-+                        }
-+                    }).setNegativeButton("Cancelar", new DialogInterface.OnClickListener() {
-+                        @Override
-+                        public void onClick(DialogInterface dialog, int which) {
-+                            dialog.cancel();
-+                        }
-+                    });
-+                    AlertDialog dialog = builder.create();
-+                    dialog.show();
-+                    bottomSheetDialog.dismiss();
-+                }
-+            });
-+            bottomSheetDialog.findViewById(R.id.btn_cancelBottomSheet).setOnClickListener(new View.OnClickListener() {
-+                @Override
-+                public void onClick(View v) {
-+                    bottomSheetDialog.dismiss();
-+                }
-+            });
-+
-+        }else{ //cuando hago click en otra comunidad
-+            //variables from the botomSheet layout
-+            final int suscriptores=communityModel.getFollowers();
-+            TextView name=bottomSheetDialog.findViewById(R.id.name_bS_community);
-+            TextView name2=bottomSheetDialog.findViewById(R.id.name_bS_community2);
-+            name.setText(communityModel.getName());
-+            name2.setText(communityModel.getName());
-+            RoundedImageView img=bottomSheetDialog.findViewById(R.id.img_bS_community);
-+            Picasso.get().load(communityModel.getImg()).into(img);
-+            TextView desc=bottomSheetDialog.findViewById(R.id.desc_bS_community);
-+            desc.setText(communityModel.getDescription());
-+            TextView posts=bottomSheetDialog.findViewById(R.id.num_posts);
-+            String post= String.valueOf(communityModel.getPosts());
-+            posts.setText(post);
-+            TextView followers=bottomSheetDialog.findViewById(R.id.num_followers);
-+            String followersString= String.valueOf(communityModel.getFollowers());
-+            followers.setText(followersString);
-+            //button follow , unfollow
-+            final Button button=bottomSheetDialog.findViewById(R.id.btn_follow);
-+            db.collection("Foro user").document(uid)
-+                    .collection("Following").document(uiDocument)
-+                    .addSnapshotListener(new EventListener<DocumentSnapshot>() {
-+                        @Override
-+                        public void onEvent(@Nullable DocumentSnapshot value, @Nullable FirebaseFirestoreException error) {
-+                            if(value.exists()){
-+                                button.setText(R.string.community_sheet_text5);
-+                                button.setBackgroundResource(R.drawable.button_unfollow);
-+                                button.setTextColor(getResources().getColor(R.color.black));
-+                            }else{
-+                                button.setText(R.string.community_sheet_text4);
-+                            }
-+                        }
-+                    });
-+            button.setOnClickListener(new View.OnClickListener() {
-+                @Override
-+                public void onClick(View v) {
-+                    //ya es suscrito
-+                    String textButton=button.getText().toString();
-+                    String ifText=getResources().getString(R.string.community_sheet_text5);
-+                    if(textButton.equals(ifText)){
-+                        //eliminar de la coleccion following de Foro user
-+                        adapterFollowedCmty.unFollow(position,uiDocument,suscriptores);
-+                    }else{ //no esta suscrito
-+                        //añadir comunidad a la coleccion Following
-+                        //communitiesAdapter.follow(position,uiDocument,suscriptores);
-+                    }
-+                    bottomSheetDialog.dismiss();
-+                }
-+            });
-+            bottomSheetDialog.findViewById(R.id.btn_cancelBottomSheet).setOnClickListener(new View.OnClickListener() {
-+                @Override
-+                public void onClick(View v) {
-+                    bottomSheetDialog.dismiss();
-+                }
-+            });
-+        }
-+        bottomSheetDialog.show();
-+    }
-+}
-\ No newline at end of file
-Index: app/src/main/res/layout/fragment_search_foro.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_search_foro.xml	(date 1610836298074)
-+++ app/src/main/res/layout/fragment_search_foro.xml	(date 1610836298074)
-@@ -0,0 +1,15 @@
-+<?xml version="1.0" encoding="utf-8"?>
-+<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
-+    xmlns:tools="http://schemas.android.com/tools"
-+    android:layout_width="match_parent"
-+    android:layout_height="match_parent"
-+    tools:context=".ui.Foro.main.Search.SearchForoFragment">
-+
-+    <!-- TODO: Update blank fragment layout -->
-+    <TextView
-+        android:layout_width="match_parent"
-+        android:layout_height="match_parent"
-+        android:gravity="center"
-+        android:text="seacrh" />
-+
-+</FrameLayout>
-\ No newline at end of file
-Index: app/src/main/java/com/example/infinitycrop/ui/Foro/main/Profile/ProfileForoFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/Foro/main/Profile/ProfileForoFragment.java	(date 1610836297814)
-+++ app/src/main/java/com/example/infinitycrop/ui/Foro/main/Profile/ProfileForoFragment.java	(date 1610836297814)
-@@ -0,0 +1,66 @@
-+package com.example.infinitycrop.ui.Foro.main.Profile;
-+
-+import android.os.Bundle;
-+
-+import androidx.fragment.app.Fragment;
-+
-+import android.view.LayoutInflater;
-+import android.view.View;
-+import android.view.ViewGroup;
-+
-+import com.example.infinitycrop.R;
-+
-+/**
-+ * A simple {@link Fragment} subclass.
-+ * Use the {@link ProfileForoFragment#newInstance} factory method to
-+ * create an instance of this fragment.
-+ */
-+public class ProfileForoFragment extends Fragment {
-+
-+    // TODO: Rename parameter arguments, choose names that match
-+    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
-+    private static final String ARG_PARAM1 = "param1";
-+    private static final String ARG_PARAM2 = "param2";
-+
-+    // TODO: Rename and change types of parameters
-+    private String mParam1;
-+    private String mParam2;
-+
-+    public ProfileForoFragment() {
-+        // Required empty public constructor
-+    }
-+
-+    /**
-+     * Use this factory method to create a new instance of
-+     * this fragment using the provided parameters.
-+     *
-+     * @param param1 Parameter 1.
-+     * @param param2 Parameter 2.
-+     * @return A new instance of fragment ProfileForoFragment.
-+     */
-+    // TODO: Rename and change types and number of parameters
-+    public static ProfileForoFragment newInstance(String param1, String param2) {
-+        ProfileForoFragment fragment = new ProfileForoFragment();
-+        Bundle args = new Bundle();
-+        args.putString(ARG_PARAM1, param1);
-+        args.putString(ARG_PARAM2, param2);
-+        fragment.setArguments(args);
-+        return fragment;
-+    }
-+
-+    @Override
-+    public void onCreate(Bundle savedInstanceState) {
-+        super.onCreate(savedInstanceState);
-+        if (getArguments() != null) {
-+            mParam1 = getArguments().getString(ARG_PARAM1);
-+            mParam2 = getArguments().getString(ARG_PARAM2);
-+        }
-+    }
-+
-+    @Override
-+    public View onCreateView(LayoutInflater inflater, ViewGroup container,
-+                             Bundle savedInstanceState) {
-+        // Inflate the layout for this fragment
-+        return inflater.inflate(R.layout.fragment_profile_foro, container, false);
-+    }
-+}
-\ No newline at end of file
-Index: app/src/main/res/menu/foro_nav_item.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/menu/foro_nav_item.xml	(date 1610830213128)
-+++ app/src/main/res/menu/foro_nav_item.xml	(date 1610830213128)
-@@ -0,0 +1,33 @@
-+<?xml version="1.0" encoding="utf-8"?>
-+<menu xmlns:android="http://schemas.android.com/apk/res/android"
-+    xmlns:app="http://schemas.android.com/apk/res-auto">
-+    <!-- home, buscar, panel de comunidades, pefil -->
-+    <item
-+        android:id="@+id/foro_home"
-+        android:icon="@drawable/icons_foro_home"
-+        android:title="@string/menu_foro2"
-+        app:cnb_backgroundColor="@color/colorPrimaryDashboard"
-+        app:cnb_iconColor="#ffffff"
-+        app:cnb_textColor="#ffffff" />
-+    <item
-+        android:id="@+id/foro_search"
-+        android:icon="@drawable/icons_foro_infinity"
-+        android:title="@string/menu_foro1"
-+        app:cnb_backgroundColor="@color/colorPrimaryDashboard"
-+        app:cnb_iconColor="#ffffff"
-+        app:cnb_textColor="#ffffff" />
-+    <item
-+        android:id="@+id/foro_panel"
-+        android:icon="@drawable/icons_foro_panel"
-+        android:title="@string/menu_foro3"
-+        app:cnb_backgroundColor="@color/colorPrimaryDashboard"
-+        app:cnb_iconColor="#ffffff"
-+        app:cnb_textColor="#ffffff" />
-+    <item
-+        android:id="@+id/foro_profile"
-+        android:icon="@drawable/icons_foro_profile"
-+        android:title="@string/menu_foro4"
-+        app:cnb_backgroundColor="@color/colorPrimaryDashboard"
-+        app:cnb_iconColor="#ffffff"
-+        app:cnb_textColor="#ffffff" />
-+</menu>
-\ No newline at end of file
-Index: app/src/main/java/com/example/infinitycrop/ui/Foro/main/Subscription/PanelForoFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/Foro/main/Subscription/PanelForoFragment.java	(date 1610836328733)
-+++ app/src/main/java/com/example/infinitycrop/ui/Foro/main/Subscription/PanelForoFragment.java	(date 1610836328733)
-@@ -0,0 +1,66 @@
-+package com.example.infinitycrop.ui.Foro.main.Subscription;
-+
-+import android.os.Bundle;
-+
-+import androidx.fragment.app.Fragment;
-+
-+import android.view.LayoutInflater;
-+import android.view.View;
-+import android.view.ViewGroup;
-+
-+import com.example.infinitycrop.R;
-+
-+/**
-+ * A simple {@link Fragment} subclass.
-+ * Use the {@link PanelForoFragment#newInstance} factory method to
-+ * create an instance of this fragment.
-+ */
-+public class PanelForoFragment extends Fragment {
-+
-+    // TODO: Rename parameter arguments, choose names that match
-+    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
-+    private static final String ARG_PARAM1 = "param1";
-+    private static final String ARG_PARAM2 = "param2";
-+
-+    // TODO: Rename and change types of parameters
-+    private String mParam1;
-+    private String mParam2;
-+
-+    public PanelForoFragment() {
-+        // Required empty public constructor
-+    }
-+
-+    /**
-+     * Use this factory method to create a new instance of
-+     * this fragment using the provided parameters.
-+     *
-+     * @param param1 Parameter 1.
-+     * @param param2 Parameter 2.
-+     * @return A new instance of fragment PanelForoFragment.
-+     */
-+    // TODO: Rename and change types and number of parameters
-+    public static PanelForoFragment newInstance(String param1, String param2) {
-+        PanelForoFragment fragment = new PanelForoFragment();
-+        Bundle args = new Bundle();
-+        args.putString(ARG_PARAM1, param1);
-+        args.putString(ARG_PARAM2, param2);
-+        fragment.setArguments(args);
-+        return fragment;
-+    }
-+
-+    @Override
-+    public void onCreate(Bundle savedInstanceState) {
-+        super.onCreate(savedInstanceState);
-+        if (getArguments() != null) {
-+            mParam1 = getArguments().getString(ARG_PARAM1);
-+            mParam2 = getArguments().getString(ARG_PARAM2);
-+        }
-+    }
-+
-+    @Override
-+    public View onCreateView(LayoutInflater inflater, ViewGroup container,
-+                             Bundle savedInstanceState) {
-+        // Inflate the layout for this fragment
-+        return inflater.inflate(R.layout.fragment_panel_foro, container, false);
-+    }
-+}
-\ No newline at end of file
-Index: app/src/main/res/layout/fragment_profile_foro.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_profile_foro.xml	(date 1610836298096)
-+++ app/src/main/res/layout/fragment_profile_foro.xml	(date 1610836298096)
-@@ -0,0 +1,15 @@
-+<?xml version="1.0" encoding="utf-8"?>
-+<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
-+    xmlns:tools="http://schemas.android.com/tools"
-+    android:layout_width="match_parent"
-+    android:layout_height="match_parent"
-+    tools:context=".ui.Foro.main.Profile.ProfileForoFragment">
-+
-+    <!-- TODO: Update blank fragment layout -->
-+    <TextView
-+        android:layout_width="match_parent"
-+        android:layout_height="match_parent"
-+        android:gravity="center"
-+        android:text="profile" />
-+
-+</FrameLayout>
-\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_08_[Default_Changelist]/shelved.patch
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_08_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_08_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,1610 +0,0 @@
-Index: app/src/main/res/layout/activity_create_post.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.Foro.main.Community.NewPost.CreatePost.CreatePost\">\r\n\r\n    <androidx.constraintlayout.widget.ConstraintLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\">\r\n\r\n\r\n        <ImageView\r\n            android:id=\"@+id/img_CreatePost\"\r\n            android:layout_width=\"150dp\"\r\n            android:layout_height=\"150dp\"\r\n            android:layout_marginTop=\"30dp\"\r\n            android:scaleType=\"centerCrop\"\r\n            android:src=\"@mipmap/ic_launcher\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/btn_back_to_foro\"\r\n             />\r\n\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:id=\"@+id/textInputLayout\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginEnd=\"20dp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/txt_changeImgPost\">\r\n\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:hint=\"@string/posts_text4\" />\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        <com.google.android.material.floatingactionbutton.FloatingActionButton\r\n            android:id=\"@+id/btn_back_to_foro\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_alignParentStart=\"true\"\r\n            android:layout_alignParentTop=\"true\"\r\n            android:layout_gravity=\"start|top\"\r\n            android:layout_marginStart=\"16dp\"\r\n            android:layout_marginTop=\"16dp\"\r\n            android:src=\"@drawable/icons_back_foro\"\r\n            app:backgroundTint=\"@color/white\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/textView32\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"@string/posts_text5\"\r\n            android:textColor=\"@color/black\"\r\n            android:textSize=\"22sp\"\r\n            app:layout_constraintBottom_toBottomOf=\"@+id/btn_back_to_foro\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"@+id/btn_back_to_foro\" />\r\n\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:id=\"@+id/textInputLayout2\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:layout_marginTop=\"16dp\"\r\n            android:layout_marginEnd=\"20dp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/textInputLayout\">\r\n\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:hint=\"@string/posts_text6\" />\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        <TextView\r\n            android:id=\"@+id/textView33\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:layout_marginTop=\"18dp\"\r\n            android:text=\"@string/posts_text7\"\r\n            android:textSize=\"16sp\"\r\n            app:layout_constraintEnd_toStartOf=\"@+id/constraintLayout4\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/textInputLayout2\" />\r\n\r\n        <androidx.constraintlayout.widget.ConstraintLayout\r\n            android:id=\"@+id/constraintLayout4\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"10dp\"\r\n            android:layout_marginEnd=\"20dp\"\r\n            android:background=\"@drawable/button_action_machine\"\r\n            android:padding=\"5dp\"\r\n            app:layout_constraintBottom_toBottomOf=\"@+id/textView33\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toEndOf=\"@+id/textView33\"\r\n            app:layout_constraintTop_toTopOf=\"@+id/textView33\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/imageView7\"\r\n                android:layout_width=\"30dp\"\r\n                android:layout_height=\"30dp\"\r\n                android:layout_marginStart=\"10dp\"\r\n                android:src=\"@drawable/icons_community_add_post\"\r\n                app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                app:layout_constraintEnd_toStartOf=\"@+id/textView34\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/textView34\"\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginStart=\"5dp\"\r\n                android:text=\"@string/posts_text9\"\r\n                app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toEndOf=\"@+id/imageView7\"\r\n                app:layout_constraintTop_toTopOf=\"parent\" />\r\n        </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n        <androidx.recyclerview.widget.RecyclerView\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:layout_marginTop=\"8dp\"\r\n            android:layout_marginEnd=\"20dp\"\r\n            android:layout_marginBottom=\"20dp\"\r\n            app:layout_constraintBottom_toBottomOf=\"parent\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/textView33\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/txt_changeImgPost\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"8dp\"\r\n            android:gravity=\"center\"\r\n            android:textColor=\"@color/blue\"\r\n            android:text=\"@string/posts_text8\"\r\n            app:layout_constraintEnd_toEndOf=\"@+id/img_CreatePost\"\r\n            app:layout_constraintStart_toStartOf=\"@+id/img_CreatePost\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/img_CreatePost\" />\r\n\r\n    </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n\r\n</ScrollView>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_create_post.xml	(revision 97b60040cb9ddffbf7eb424364e4fc4451452801)
-+++ app/src/main/res/layout/activity_create_post.xml	(date 1610996430485)
-@@ -17,14 +17,12 @@
-             android:layout_height="150dp"
-             android:layout_marginTop="30dp"
-             android:scaleType="centerCrop"
--            android:src="@mipmap/ic_launcher"
-             app:layout_constraintEnd_toEndOf="parent"
-             app:layout_constraintStart_toStartOf="parent"
--            app:layout_constraintTop_toBottomOf="@+id/btn_back_to_foro"
--             />
-+            app:layout_constraintTop_toBottomOf="@+id/textView32" />
- 
-         <com.google.android.material.textfield.TextInputLayout
--            android:id="@+id/textInputLayout"
-+            android:id="@+id/input_tittlePost"
-             android:layout_width="match_parent"
-             android:layout_height="wrap_content"
-             android:layout_marginStart="20dp"
-@@ -35,39 +33,29 @@
-             app:layout_constraintTop_toBottomOf="@+id/txt_changeImgPost">
- 
-             <com.google.android.material.textfield.TextInputEditText
-+                android:id="@+id/input_editText_Createpost"
-                 android:layout_width="match_parent"
-                 android:layout_height="wrap_content"
-                 android:hint="@string/posts_text4" />
-         </com.google.android.material.textfield.TextInputLayout>
- 
--        <com.google.android.material.floatingactionbutton.FloatingActionButton
--            android:id="@+id/btn_back_to_foro"
--            android:layout_width="wrap_content"
--            android:layout_height="wrap_content"
--            android:layout_alignParentStart="true"
--            android:layout_alignParentTop="true"
--            android:layout_gravity="start|top"
--            android:layout_marginStart="16dp"
--            android:layout_marginTop="16dp"
--            android:src="@drawable/icons_back_foro"
--            app:backgroundTint="@color/white"
--            app:layout_constraintStart_toStartOf="parent"
--            app:layout_constraintTop_toTopOf="parent" />
- 
-         <TextView
-             android:id="@+id/textView32"
-             android:layout_width="wrap_content"
-             android:layout_height="wrap_content"
-+            android:layout_marginTop="16dp"
-+            android:layout_marginBottom="30dp"
-             android:text="@string/posts_text5"
-             android:textColor="@color/black"
-             android:textSize="22sp"
--            app:layout_constraintBottom_toBottomOf="@+id/btn_back_to_foro"
-+            app:layout_constraintBottom_toTopOf="@+id/img_CreatePost"
-             app:layout_constraintEnd_toEndOf="parent"
-             app:layout_constraintStart_toStartOf="parent"
--            app:layout_constraintTop_toTopOf="@+id/btn_back_to_foro" />
-+            app:layout_constraintTop_toTopOf="parent" />
- 
-         <com.google.android.material.textfield.TextInputLayout
--            android:id="@+id/textInputLayout2"
-+            android:id="@+id/inputDescriptionCreatePost"
-             android:layout_width="match_parent"
-             android:layout_height="wrap_content"
-             android:layout_marginStart="20dp"
-@@ -75,9 +63,10 @@
-             android:layout_marginEnd="20dp"
-             app:layout_constraintEnd_toEndOf="parent"
-             app:layout_constraintStart_toStartOf="parent"
--            app:layout_constraintTop_toBottomOf="@+id/textInputLayout">
-+            app:layout_constraintTop_toBottomOf="@+id/input_tittlePost">
- 
-             <com.google.android.material.textfield.TextInputEditText
-+                android:id="@+id/input_desc_editText_Createpost"
-                 android:layout_width="match_parent"
-                 android:layout_height="wrap_content"
-                 android:hint="@string/posts_text6" />
-@@ -91,12 +80,12 @@
-             android:layout_marginTop="18dp"
-             android:text="@string/posts_text7"
-             android:textSize="16sp"
--            app:layout_constraintEnd_toStartOf="@+id/constraintLayout4"
-+            app:layout_constraintEnd_toStartOf="@+id/btn_createClimaCreatePost"
-             app:layout_constraintStart_toStartOf="parent"
--            app:layout_constraintTop_toBottomOf="@+id/textInputLayout2" />
-+            app:layout_constraintTop_toBottomOf="@+id/inputDescriptionCreatePost" />
- 
-         <androidx.constraintlayout.widget.ConstraintLayout
--            android:id="@+id/constraintLayout4"
-+            android:id="@+id/btn_createClimaCreatePost"
-             android:layout_width="0dp"
-             android:layout_height="wrap_content"
-             android:layout_marginStart="10dp"
-@@ -132,13 +121,12 @@
-         </androidx.constraintlayout.widget.ConstraintLayout>
- 
-         <androidx.recyclerview.widget.RecyclerView
-+            android:id="@+id/recyclerView"
-             android:layout_width="match_parent"
-             android:layout_height="wrap_content"
-             android:layout_marginStart="20dp"
-             android:layout_marginTop="8dp"
-             android:layout_marginEnd="20dp"
--            android:layout_marginBottom="20dp"
--            app:layout_constraintBottom_toBottomOf="parent"
-             app:layout_constraintEnd_toEndOf="parent"
-             app:layout_constraintStart_toStartOf="parent"
-             app:layout_constraintTop_toBottomOf="@+id/textView33" />
-@@ -155,6 +143,35 @@
-             app:layout_constraintStart_toStartOf="@+id/img_CreatePost"
-             app:layout_constraintTop_toBottomOf="@+id/img_CreatePost" />
- 
-+        <Button
-+            android:id="@+id/btnBackCreatePost"
-+            android:layout_width="wrap_content"
-+            android:layout_height="wrap_content"
-+            android:layout_marginStart="20dp"
-+            android:layout_marginTop="24dp"
-+            android:background="@drawable/button_action_machine"
-+            android:padding="10dp"
-+            android:text="@string/posts_text11"
-+            android:textColor="@color/colorPrimaryDashboard"
-+            app:layout_constraintBottom_toBottomOf="@+id/btn_createButtonPost"
-+            app:layout_constraintStart_toStartOf="parent"
-+            app:layout_constraintTop_toBottomOf="@+id/recyclerView" />
-+
-+        <Button
-+            android:id="@+id/btn_createButtonPost"
-+            android:layout_width="wrap_content"
-+            android:layout_height="wrap_content"
-+            android:layout_marginTop="24dp"
-+            android:layout_marginEnd="20dp"
-+            android:layout_marginBottom="30dp"
-+            android:background="@drawable/button_enter_machine"
-+            android:padding="10dp"
-+            android:text="@string/posts_text10"
-+            android:textColor="@color/white"
-+            app:layout_constraintBottom_toBottomOf="parent"
-+            app:layout_constraintEnd_toEndOf="parent"
-+            app:layout_constraintTop_toBottomOf="@+id/recyclerView" />
-+
-     </androidx.constraintlayout.widget.ConstraintLayout>
- 
- 
-Index: app/src/main/res/layout/fragment_new_post.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    tools:context=\".ui.Foro.main.Community.NewPost.NewPostFragment\">\r\n\r\n    <ScrollView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n        <androidx.constraintlayout.widget.ConstraintLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\">\r\n\r\n            <androidx.constraintlayout.widget.ConstraintLayout\r\n                android:id=\"@+id/btn_layoutCreatePost\"\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginStart=\"60dp\"\r\n                android:layout_marginTop=\"60dp\"\r\n                android:layout_marginEnd=\"60dp\"\r\n                android:background=\"@drawable/button_action_machine\"\r\n                android:padding=\"10dp\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/imageView5\"\r\n                    android:layout_width=\"40dp\"\r\n                    android:layout_height=\"40dp\"\r\n                    android:layout_marginStart=\"20dp\"\r\n                    android:src=\"@drawable/icons_community_add_post\"\r\n                    app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                    app:layout_constraintStart_toStartOf=\"parent\"\r\n                    app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/textView30\"\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginStart=\"10dp\"\r\n                    android:layout_marginEnd=\"20dp\"\r\n                    android:text=\"@string/posts_text2\"\r\n                    android:textColor=\"@color/black\"\r\n                    android:textSize=\"18sp\"\r\n                    app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                    app:layout_constraintEnd_toStartOf=\"@+id/imageView6\"\r\n                    app:layout_constraintStart_toEndOf=\"@+id/imageView5\"\r\n                    app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/imageView6\"\r\n                    android:layout_width=\"20dp\"\r\n                    android:layout_height=\"20dp\"\r\n                    android:layout_marginEnd=\"5dp\"\r\n                    android:src=\"@drawable/icons_arrow_right\"\r\n                    app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                    app:layout_constraintEnd_toEndOf=\"parent\"\r\n                    app:layout_constraintTop_toTopOf=\"parent\" />\r\n            </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n            <TextView\r\n                android:id=\"@+id/textView31\"\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginStart=\"20dp\"\r\n                android:layout_marginTop=\"20dp\"\r\n                android:layout_marginEnd=\"20dp\"\r\n                android:text=\"@string/posts_text3\"\r\n                android:textSize=\"16sp\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toBottomOf=\"@+id/btn_layoutCreatePost\" />\r\n\r\n            <androidx.recyclerview.widget.RecyclerView\r\n                android:id=\"@+id/rv_myGalleryPosts\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:layout_marginTop=\"10dp\"\r\n                android:layout_marginBottom=\"196dp\"\r\n                app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toBottomOf=\"@+id/textView31\" />\r\n\r\n\r\n        </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n    </ScrollView>\r\n\r\n</FrameLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_new_post.xml	(revision 97b60040cb9ddffbf7eb424364e4fc4451452801)
-+++ app/src/main/res/layout/fragment_new_post.xml	(date 1611063280197)
-@@ -81,7 +81,7 @@
-                 android:layout_width="match_parent"
-                 android:layout_height="match_parent"
-                 android:layout_marginTop="10dp"
--                android:layout_marginBottom="196dp"
-+                android:layout_marginBottom="70dp"
-                 app:layout_constraintBottom_toBottomOf="parent"
-                 app:layout_constraintEnd_toEndOf="parent"
-                 app:layout_constraintStart_toStartOf="parent"
-Index: app/src/main/res/layout/fragment_planta2.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    tools:context=\".ui.dashboard.DashboardFragment\">\n\n\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\n\n        <RelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginLeft=\"20dp\"\n            android:layout_marginTop=\"10dp\"\n            android:layout_marginRight=\"20dp\">\n\n            <TextView\n                android:id=\"@+id/textDashboard\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Dashboard  >\"\n\n                android:textSize=\"19sp\" />\n\n            <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_below=\"@+id/textDashboard\"\n                android:text=\"4 sensores\"\n\n                android:textSize=\"14sp\" />\n\n            <!--<ImageView\n                android:layout_width=\"62dp\"\n                android:layout_height=\"62dp\"\n                android:layout_alignParentRight=\"true\"\n                android:src=\"@drawable/ic_sun\" />-->\n        </RelativeLayout>\n        <GridLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:columnCount=\"2\"\n            android:rowCount=\"3\"\n            android:alignmentMode=\"alignMargins\"\n            android:columnOrderPreserved=\"false\">\n            <!--temperatura-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Temperatura\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchTemperatura\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:buttonTint=\"#FFFFFF\"\n                            android:checked=\"true\"\n                            android:fitsSystemWindows=\"false\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaTemperaturaPlanta2\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"34°C\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textTemperatura\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textTemperatura\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgTemperatura\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_temperature\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaTemperaturaPlanta2\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaTemperaturaPlanta2\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaTemperaturaPlanta2\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--humedad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Humedad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchHumedad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaHumedadPlanta2\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"68%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textHumedad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textHumedad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgHumedad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_humidity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaHumedadPlanta2\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaHumedadPlanta2\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaHumedadPlanta2\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--salinidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"H. Ambiente\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchSalinidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaSalinidadPlanta2\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"10%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textSalinidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textSalinidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgSalinidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_humedad_ambiente\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaSalinidadPlanta2\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaSalinidadPlanta2\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaSalinidadPlanta2\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--Luminosidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Luminosidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchLuminosidadPlanta2\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchLuminosidadPlanta2\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorHighlight=\"#FFFFFF\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidasLuminosidadPlanta2\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"90%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textLuminosidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textLuminosidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgLuminosidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_luminosity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidasLuminosidadPlanta2\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidasLuminosidadPlanta2\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidasLuminosidadPlanta2\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n\n\n\n\n        </GridLayout>\n\n    </LinearLayout>\n</ScrollView>\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_planta2.xml	(revision 97b60040cb9ddffbf7eb424364e4fc4451452801)
-+++ app/src/main/res/layout/fragment_planta2.xml	(date 1610994569788)
-@@ -75,17 +75,21 @@
- 
-                         <TextView
-                             android:id="@+id/textTemperatura"
--                            android:layout_width="wrap_content"
-+                            android:layout_width="0dp"
-                             android:layout_height="wrap_content"
-                             android:layout_marginStart="8dp"
-                             android:layout_marginTop="8dp"
-+                            android:layout_marginEnd="8dp"
-                             android:text="Temperatura"
-                             android:textSize="16sp"
--                            app:layout_constraintBottom_toBottomOf="@+id/switchTemperatura"
-+                            app:layout_constraintEnd_toEndOf="parent"
-+                            app:layout_constraintStart_toStartOf="parent"
-+                            app:layout_constraintTop_toTopOf="parent" />
-+                            <!--app:layout_constraintBottom_toBottomOf="@+id/switchTemperatura"-->
-                             app:layout_constraintStart_toStartOf="parent"
-                             app:layout_constraintTop_toTopOf="parent" />
- 
--                        <Switch
-+                        <!--<Switch
-                             android:id="@+id/switchTemperatura"
-                             android:layout_width="wrap_content"
-                             android:layout_height="wrap_content"
-@@ -97,7 +101,7 @@
-                             android:textColorLink="#a0c63e"
-                             android:textSize="8sp"
-                             app:layout_constraintEnd_toEndOf="parent"
--                            app:layout_constraintTop_toTopOf="parent" />
-+                            app:layout_constraintTop_toTopOf="parent" />-->
- 
-                         <TextView
-                             android:id="@+id/medidaTemperaturaPlanta2"
-@@ -149,17 +153,21 @@
- 
-                         <TextView
-                             android:id="@+id/textHumedad"
--                            android:layout_width="wrap_content"
-+                            android:layout_width="0dp"
-                             android:layout_height="wrap_content"
-                             android:layout_marginStart="8dp"
-                             android:layout_marginTop="8dp"
-+                            android:layout_marginEnd="8dp"
-                             android:text="Humedad"
-                             android:textSize="16sp"
--                            app:layout_constraintBottom_toBottomOf="@+id/switchHumedad"
-+                            app:layout_constraintEnd_toEndOf="parent"
-+                            app:layout_constraintStart_toStartOf="parent"
-+                            app:layout_constraintTop_toTopOf="parent" />
-+                            <!--app:layout_constraintBottom_toBottomOf="@+id/switchHumedad"-->
-                             app:layout_constraintStart_toStartOf="parent"
-                             app:layout_constraintTop_toTopOf="parent" />
- 
--                        <Switch
-+                        <!--<Switch
-                             android:id="@+id/switchHumedad"
-                             android:layout_width="wrap_content"
-                             android:layout_height="wrap_content"
-@@ -169,7 +177,7 @@
-                             android:textColorLink="#a0c63e"
-                             android:textSize="8sp"
-                             app:layout_constraintEnd_toEndOf="parent"
--                            app:layout_constraintTop_toTopOf="parent" />
-+                            app:layout_constraintTop_toTopOf="parent" />-->
- 
-                         <TextView
-                             android:id="@+id/medidaHumedadPlanta2"
-@@ -221,17 +229,21 @@
- 
-                         <TextView
-                             android:id="@+id/textSalinidad"
--                            android:layout_width="wrap_content"
-+                            android:layout_width="0dp"
-                             android:layout_height="wrap_content"
-                             android:layout_marginStart="8dp"
-                             android:layout_marginTop="8dp"
-+                            android:layout_marginEnd="8dp"
-                             android:text="H. Ambiente"
-                             android:textSize="16sp"
--                            app:layout_constraintBottom_toBottomOf="@+id/switchSalinidad"
-+                            app:layout_constraintEnd_toEndOf="parent"
-+                            app:layout_constraintStart_toStartOf="parent"
-+                            app:layout_constraintTop_toTopOf="parent" />
-+                            <!--app:layout_constraintBottom_toBottomOf="@+id/switchSalinidad"-->
-                             app:layout_constraintStart_toStartOf="parent"
-                             app:layout_constraintTop_toTopOf="parent" />
- 
--                        <Switch
-+                        <!--<Switch
-                             android:id="@+id/switchSalinidad"
-                             android:layout_width="wrap_content"
-                             android:layout_height="wrap_content"
-@@ -241,7 +253,7 @@
-                             android:textColorLink="#a0c63e"
-                             android:textSize="8sp"
-                             app:layout_constraintEnd_toEndOf="parent"
--                            app:layout_constraintTop_toTopOf="parent" />
-+                            app:layout_constraintTop_toTopOf="parent" />-->
- 
-                         <TextView
-                             android:id="@+id/medidaSalinidadPlanta2"
-Index: app/src/main/res/layout/post_item.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"wrap_content\"\r\n    android:paddingBottom=\"10dp\"\r\n    android:paddingEnd=\"20dp\"\r\n    android:paddingStart=\"20dp\"\r\n    android:orientation=\"vertical\">\r\n\r\n    <androidx.cardview.widget.CardView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"380dp\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        android:background=\"@drawable/round_corners_foro_menu\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n        <androidx.constraintlayout.widget.ConstraintLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\">\r\n\r\n            <androidx.constraintlayout.widget.ConstraintLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\">\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/img_community_post\"\r\n                    android:layout_width=\"40dp\"\r\n                    android:layout_height=\"40dp\"\r\n                    android:layout_marginStart=\"10dp\"\r\n                    android:layout_marginTop=\"10dp\"\r\n                    app:layout_constraintStart_toStartOf=\"parent\"\r\n                    app:layout_constraintTop_toTopOf=\"parent\"\r\n                    app:srcCompat=\"@drawable/icons_info\" />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/name_community_post\"\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginStart=\"10dp\"\r\n                    android:layout_marginEnd=\"10dp\"\r\n                    android:text=\"TextView\"\r\n                    android:textSize=\"16sp\"\r\n                    android:textStyle=\"bold\"\r\n                    app:layout_constraintBottom_toTopOf=\"@+id/creator_community_post\"\r\n                    app:layout_constraintEnd_toEndOf=\"parent\"\r\n                    app:layout_constraintStart_toEndOf=\"@+id/img_community_post\"\r\n                    app:layout_constraintTop_toTopOf=\"@+id/img_community_post\" />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/creator_community_post\"\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginStart=\"10dp\"\r\n                    android:layout_marginEnd=\"10dp\"\r\n                    android:text=\"TextView\"\r\n                    app:layout_constraintBottom_toBottomOf=\"@+id/img_community_post\"\r\n                    app:layout_constraintEnd_toEndOf=\"parent\"\r\n                    app:layout_constraintStart_toEndOf=\"@+id/img_community_post\"\r\n                    app:layout_constraintTop_toBottomOf=\"@+id/name_community_post\" />\r\n\r\n                <View\r\n                    android:id=\"@+id/view\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"1dp\"\r\n                    android:layout_marginTop=\"10dp\"\r\n                    android:background=\"@color/colorPrimaryDark\"\r\n                    app:layout_constraintEnd_toEndOf=\"parent\"\r\n                    app:layout_constraintStart_toStartOf=\"parent\"\r\n                    app:layout_constraintTop_toBottomOf=\"@+id/img_community_post\" />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/name_post\"\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginStart=\"10dp\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:layout_marginEnd=\"10dp\"\r\n                    android:text=\"TextView\"\r\n                    android:textSize=\"17sp\"\r\n                    android:textStyle=\"bold\"\r\n                    app:layout_constraintEnd_toEndOf=\"parent\"\r\n                    app:layout_constraintStart_toStartOf=\"parent\"\r\n                    app:layout_constraintTop_toBottomOf=\"@+id/view\" />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/desc_post\"\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginStart=\"10dp\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:layout_marginEnd=\"10dp\"\r\n                    android:text=\"TextView\"\r\n                    app:layout_constraintEnd_toEndOf=\"parent\"\r\n                    app:layout_constraintStart_toStartOf=\"parent\"\r\n                    app:layout_constraintTop_toBottomOf=\"@+id/name_post\" />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/time_post\"\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginStart=\"10dp\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:layout_marginEnd=\"10dp\"\r\n                    android:text=\"TextView\"\r\n                    android:textColor=\"@color/grey\"\r\n                    android:textSize=\"12sp\"\r\n                    app:layout_constraintEnd_toEndOf=\"parent\"\r\n                    app:layout_constraintStart_toStartOf=\"parent\"\r\n                    app:layout_constraintTop_toBottomOf=\"@+id/desc_post\" />\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/img_post\"\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"0dp\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:scaleType=\"centerCrop\"\r\n                    app:layout_constraintBottom_toTopOf=\"@+id/constraintLayout\"\r\n                    app:layout_constraintEnd_toEndOf=\"parent\"\r\n                    app:layout_constraintStart_toStartOf=\"parent\"\r\n                    app:layout_constraintTop_toBottomOf=\"@+id/time_post\"\r\n                    tools:srcCompat=\"@tools:sample/avatars\" />\r\n\r\n                <androidx.constraintlayout.widget.ConstraintLayout\r\n                    android:id=\"@+id/constraintLayout\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    app:layout_constraintBottom_toBottomOf=\"parent\">\r\n\r\n\r\n                    <ImageView\r\n                        android:id=\"@+id/like_post\"\r\n                        android:layout_width=\"40dp\"\r\n                        android:layout_height=\"40dp\"\r\n                        android:layout_marginStart=\"10dp\"\r\n                        android:layout_marginTop=\"5dp\"\r\n                        android:src=\"@drawable/icons_like\"\r\n                        app:layout_constraintStart_toStartOf=\"parent\"\r\n                        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/numLikes_post\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginStart=\"8dp\"\r\n                        android:text=\"TextView\"\r\n                        app:layout_constraintBottom_toBottomOf=\"@+id/like_post\"\r\n                        app:layout_constraintStart_toEndOf=\"@+id/like_post\"\r\n                        app:layout_constraintTop_toTopOf=\"@+id/like_post\" />\r\n\r\n                </androidx.constraintlayout.widget.ConstraintLayout>\r\n            </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n\r\n        </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n    </androidx.cardview.widget.CardView>\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/post_item.xml	(revision 97b60040cb9ddffbf7eb424364e4fc4451452801)
-+++ app/src/main/res/layout/post_item.xml	(date 1611012506565)
-@@ -118,7 +118,7 @@
-                     android:layout_width="0dp"
-                     android:layout_height="0dp"
-                     android:layout_marginTop="5dp"
--                    android:scaleType="centerCrop"
-+                    android:scaleType="fitXY"
-                     app:layout_constraintBottom_toTopOf="@+id/constraintLayout"
-                     app:layout_constraintEnd_toEndOf="parent"
-                     app:layout_constraintStart_toStartOf="parent"
-Index: app/src/main/java/com/example/infinitycrop/ui/Foro/main/Community/Posts/PostsCommunityFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.Foro.main.Community.Posts;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.Foro.lets_start.rv_community.CommunityModel;\r\nimport com.example.infinitycrop.ui.Foro.main.Community.CommunityMain;\r\nimport com.example.infinitycrop.ui.Foro.main.Home.RVs.PostModel;\r\nimport com.example.infinitycrop.ui.Foro.main.Home.RVs.RvPost.AdapterPost;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.QueryDocumentSnapshot;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link PostsCommunityFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class PostsCommunityFragment extends Fragment {\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public PostsCommunityFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment PostsCommunityFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static PostsCommunityFragment newInstance(String param1, String param2) {\r\n        PostsCommunityFragment fragment = new PostsCommunityFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    private String communityID;\r\n\r\n    //Rv, adapter\r\n    private RecyclerView rv_postCommunity;\r\n    private AdapterPost adapterPost;\r\n    //List\r\n    private List<PostModel> posts= new ArrayList<>();\r\n    //firebase\r\n    private FirebaseFirestore db;\r\n    private FirebaseAuth firebaseAuth;\r\n    private String uid;\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_posts_community, container, false);\r\n        CommunityMain communityMain= (CommunityMain) getActivity();\r\n        assert communityMain != null;\r\n        communityID=communityMain.getCommunityUid();\r\n        //firebase\r\n        db=FirebaseFirestore.getInstance();\r\n        firebaseAuth=FirebaseAuth.getInstance();\r\n        uid=firebaseAuth.getUid();\r\n        //rv\r\n        rv_postCommunity=v.findViewById(R.id.post_community);\r\n\r\n        initRvPosts();\r\n        getPostsFromCommunity();\r\n\r\n        return v;\r\n    }\r\n\r\n    private void initRvPosts(){\r\n        rv_postCommunity.setHasFixedSize(false);\r\n        rv_postCommunity.setLayoutManager(new LinearLayoutManager(getContext(),LinearLayoutManager.VERTICAL,false));\r\n    }\r\n    private void getPostsFromCommunity(){\r\n        posts.clear();\r\n        //get all the post of the community\r\n        db.collection(\"Posts\")\r\n                .whereEqualTo(\"community\",communityID)\r\n                .get()\r\n                .addOnCompleteListener(new OnCompleteListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<QuerySnapshot> task) {\r\n                        if (task.isSuccessful()) {\r\n                            for (QueryDocumentSnapshot document : task.getResult()) {\r\n                                PostModel postModel=document.toObject(PostModel.class);\r\n                                postModel.setUid(document.getId().toString());\r\n                                posts.add(postModel);\r\n                            }\r\n                            adapterPost=new AdapterPost(posts,getContext());\r\n                            rv_postCommunity.setAdapter(adapterPost);\r\n                        } else {\r\n\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/Foro/main/Community/Posts/PostsCommunityFragment.java	(revision 97b60040cb9ddffbf7eb424364e4fc4451452801)
-+++ app/src/main/java/com/example/infinitycrop/ui/Foro/main/Community/Posts/PostsCommunityFragment.java	(date 1611062751000)
-@@ -6,6 +6,7 @@
- import androidx.fragment.app.Fragment;
- import androidx.recyclerview.widget.LinearLayoutManager;
- import androidx.recyclerview.widget.RecyclerView;
-+import androidx.swiperefreshlayout.widget.SwipeRefreshLayout;
- 
- import android.view.LayoutInflater;
- import android.view.View;
-@@ -20,6 +21,7 @@
- import com.google.android.gms.tasks.Task;
- import com.google.firebase.auth.FirebaseAuth;
- import com.google.firebase.firestore.FirebaseFirestore;
-+import com.google.firebase.firestore.Query;
- import com.google.firebase.firestore.QueryDocumentSnapshot;
- import com.google.firebase.firestore.QuerySnapshot;
- 
-@@ -84,6 +86,7 @@
-     private FirebaseFirestore db;
-     private FirebaseAuth firebaseAuth;
-     private String uid;
-+    private SwipeRefreshLayout swipeRefreshLayout;
- 
-     @Override
-     public View onCreateView(LayoutInflater inflater, ViewGroup container,
-@@ -102,6 +105,16 @@
- 
-         initRvPosts();
-         getPostsFromCommunity();
-+
-+        swipeRefreshLayout=v.findViewById(R.id.swipeToRefresh);
-+        swipeRefreshLayout.setOnRefreshListener(new SwipeRefreshLayout.OnRefreshListener() {
-+            @Override
-+            public void onRefresh() {
-+                getPostsFromCommunity();
-+                adapterPost.notifyDataSetChanged();
-+                swipeRefreshLayout.setRefreshing(false);
-+            }
-+        });
- 
-         return v;
-     }
-Index: app/src/main/res/values/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><resources>\n    <string name=\"app_name\">Infinity Crop</string>\n    <string name=\"title_home\">Infinity Crop</string>\n    <string name=\"title_inicio\">Inicio</string>\n    <string name=\"title_dashboard\">Panel de control</string>\n    <string name=\"title_notifications\">Notificaciones</string>\n    <string name=\"title_wellcome_login\">¡Te damos la bienvenida!</string>\n    <string name=\"title_orderLog\">Inicia sesión</string>\n    <string name=\"title_cont_faceboock\">Iniciar sesión con Facebook</string>\n    <string name=\"title_cont_google\">Iniciar sesión con Google</string>\n    <string name=\"title_cont_mail\">Iniciar sesión con Email</string>\n\n    <string name=\"title_register\">Registrate</string>\n    <string name=\"title_bienv\">Hola de nuevo!</string>\n    <string name=\"title_bienvR\">¡Hola, es un placer!</string>\n    <string name=\"title_userR\">Introduce un correo:</string>\n    <string name=\"title_nameR\">Introduce un nombre:</string>\n    <string name=\"title_passwordR\">Introduce una contraseña:</string>\n    <string name=\"title_registrar\">Acceder</string>\n    <string name=\"btn_newuser\">Si no tienes una cuenta, puedes registarte <u>Aquí</u> </string>\n    <string name=\"title_olvidado\">He olvidado mi contraseña</string>\n    <!-- ANYADIR UNA NUEVA MAQUINA STRINGS -->\n    <string name=\"title_register_machine\">Registra una nueva máquina</string>\n    <string name=\"title_infoMachine\">Completa estos campos</string>\n    <string name=\"btn_registMachine\">Añadir máquina</string>\n    <string name=\"title_name_machine\">Introduce el nombre de tu máquina:</string>\n    <string name=\"title_name_model\">Modelo de tu máquina:</string>\n    <string name=\"title_name_favorites\">Añadir tu máquina a favoritos</string>\n    <string name=\"title_scan_machine\">Escanear máquina</string>\n\n\n    <!-- TODO: Remove or change this placeholder text -->\n\n    <string name=\"change_city\">Change city</string>\n\n    <!-- Put your own APP ID here -->\n    <string name=\"open_weather_maps_app_id\">11111</string>\n\n    <string name=\"weather_sunny\">&#xf00d;</string>\n    <string name=\"weather_clear_night\">&#xf02e;</string>\n\n    <string name=\"weather_foggy\">&#xf014;</string>\n    <string name=\"weather_cloudy\">&#xf013;</string>\n    <string name=\"weather_rainy\">&#xf019;</string>\n    <string name=\"weather_snowy\">&#xf01b;</string>\n    <string name=\"weather_thunder\">&#xf01e;</string>\n    <string name=\"weather_drizzle\">&#xf01c;</string>\n\n    <string name=\"place_not_found\">Sorry, no weather data found.</string>\n    <string name=\"facebook_app_id\">140146287567868</string>\n    <string name=\"fb_login_protocol_scheme\">fb140146287567868</string>\n    <!-- TODO: Remove or change this placeholder text -->\n    <string name=\"hello_blank_fragment\">Hello blank fragment</string>\n\n\n    <!-- foro -->\n    <!-- welcome user -->\n    <string name=\"welcome_text1\">Vamos a empezar...</string>\n    <string name=\"welcome_text2\">Bienvenido al</string>\n    <string name=\"welcome_text3\"> <b>Foro</b> de <i>Infinity Crop</i></string>\n    <string name=\"welcome_text4\">Continuar como</string>\n    <string name=\"welcome_text5\">Cambiar imagen</string>\n    <string name=\"welcome_text6\">Nombre del usuario: </string>\n    <string name=\"welcome_text7\">Continuar </string>\n    <string name=\"welcome_text8\">Descripción (opcional): </string>ç\n    <!-- choose community -->\n    <string name=\"community_text1\">Uno más y hemos terminado...</string>\n    <string name=\"community_text2\"><b>Tus comunidadades</b></string>\n    <string name=\"community_text3\"><b>Lo más popular</b></string>\n    <!-- choose community -> bottom Sheet community -->\n    <string name=\"community_sheet_text1\">Posts</string>\n    <string name=\"community_sheet_text2\">Followers</string>\n    <string name=\"community_sheet_text3\">Cancelar</string>\n    <string name=\"community_sheet_text4\">Suscribirse</string>\n    <string name=\"community_sheet_text5\">Dejar de seguir</string>\n    <string name=\"community_sheet_text6\">Finalizar</string>\n    <string name=\"community_sheet_text7\">Editar</string>\n    <!-- addCommunity  -->\n    <string name=\"editCommunity_text1\">Crear communidad</string>\n    <string name=\"editCommunity_text2\"><b>Cambiar imagen</b></string>\n    <string name=\"editCommunity_text3\">Nombre (obligatorio)</string>\n    <string name=\"editCommunity_text4\">Nombre</string>\n    <string name=\"editCommunity_text5\">Descripción (opcional)</string>\n    <string name=\"editCommunity_text6\">Guardar</string>\n    <!-- EditCommunity  -->\n    <string name=\"editCommunity_text7\">Editar Communidad</string>\n    <string name=\"editCommunity_text8\">Guardar cambios</string>\n    <string name=\"editCommunity_text9\">Eliminar comunidad</string>\n    <!-- main foro menu  -->\n    <string name=\"menu_foro1\">Buscar</string>\n    <string name=\"menu_foro2\">Inicio</string>\n    <string name=\"menu_foro3\">Suscripciones</string>\n    <string name=\"menu_foro4\">Perfil</string>\n    <!-- foro home  -->\n    <string name=\"home_foro1\"><b>Comunidades que sigues > </b></string>\n    <!-- foro home > bottom sheet community  -->\n    <string name=\"home_foro2\"><b>Ir a la communidad </b></string>\n    <!-- community menu  -->\n    <string name=\"community_menu_foro1\">Posts</string>\n    <string name=\"community_menu_foro2\">Nuevo post</string>\n    <string name=\"community_menu_foro3\">Información</string>\n    <!--post fragment -->\n    <string name=\"posts_text1\"><b>Posts de la comunidad</b></string>\n    <!--post fragment -> new post -->\n    <string name=\"posts_text2\"><b>Nuevo post</b></string>\n    <string name=\"posts_text3\"><b>Tu galería de posts ></b></string>\n    <!--create post -->\n    <string name=\"posts_text4\"><b>Título</b></string>\n    <string name=\"posts_text5\"><b>Nuevo post</b></string>\n    <string name=\"posts_text6\"><b>Descripción</b></string>\n    <string name=\"posts_text7\"><b>Elegir clima a añadir al post ></b></string>\n    <string name=\"posts_text8\">Cambiar foto</string>\n    <string name=\"posts_text9\">Crear clima</string>\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/values/strings.xml	(revision 97b60040cb9ddffbf7eb424364e4fc4451452801)
-+++ app/src/main/res/values/strings.xml	(date 1610978504229)
-@@ -111,4 +111,6 @@
-     <string name="posts_text7"><b>Elegir clima a añadir al post ></b></string>
-     <string name="posts_text8">Cambiar foto</string>
-     <string name="posts_text9">Crear clima</string>
-+    <string name="posts_text10">Crear Post</string>
-+    <string name="posts_text11">Cancelar</string>
- </resources>
-\ No newline at end of file
-Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.dashboard;\n\nimport android.content.Intent;\nimport android.os.Bundle;\n\nimport androidx.annotation.Nullable;\nimport androidx.constraintlayout.widget.ConstraintLayout;\nimport androidx.fragment.app.Fragment;\n\nimport android.util.Log;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.Button;\nimport android.widget.CompoundButton;\nimport android.widget.Switch;\nimport android.widget.TextView;\n\nimport com.example.comun.Mqtt;\nimport com.example.infinitycrop.MainActivity;\nimport com.example.infinitycrop.R;\nimport com.example.infinitycrop.ui.MachineControl.planta1;\nimport com.google.android.material.bottomsheet.BottomSheetDialog;\nimport com.google.firebase.firestore.DocumentSnapshot;\nimport com.google.firebase.firestore.EventListener;\nimport com.google.firebase.firestore.FirebaseFirestore;\nimport com.google.firebase.firestore.FirebaseFirestoreException;\n\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\nimport org.eclipse.paho.client.mqttv3.MqttClient;\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\nimport org.eclipse.paho.client.mqttv3.MqttException;\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\n\nimport static com.example.comun.Mqtt.topicRoot;\n\n/**\n * A simple {@link Fragment} subclass.\n * Use the {@link GeneralFragment#newInstance} factory method to\n * create an instance of this fragment.\n */\npublic class GeneralFragment extends Fragment implements MqttCallback{\n    public static MqttClient client = null;\n    private String uid;\n    private FirebaseFirestore db;\n    // TODO: Rename parameter arguments, choose names that match\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\n    private static final String ARG_PARAM1 = \"param1\";\n    private static final String ARG_PARAM2 = \"param2\";\n\n    // TODO: Rename and change types of parameters\n    private String mParam1;\n    private String mParam2;\n\n    public GeneralFragment() {\n        // Required empty public constructor\n    }\n\n    /**\n     * Use this factory method to create a new instance of\n     * this fragment using the provided parameters.\n     *\n     * @param param1 Parameter 1.\n     * @param param2 Parameter 2.\n     * @return A new instance of fragment GeneralFragment.\n     */\n    // TODO: Rename and change types and number of parameters\n    public static GeneralFragment newInstance(String param1, String param2) {\n        GeneralFragment fragment = new GeneralFragment();\n        Bundle args = new Bundle();\n        args.putString(ARG_PARAM1, param1);\n        args.putString(ARG_PARAM2, param2);\n        fragment.setArguments(args);\n        return fragment;\n    }\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        if (getArguments() != null) {\n            mParam1 = getArguments().getString(ARG_PARAM1);\n            mParam2 = getArguments().getString(ARG_PARAM2);\n        }\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        View v = inflater.inflate(R.layout.fragment_general, container, false);\n        //switch methods\n        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\n                if (isChecked) {\n                    // The toggle is enabled\n                    enviarLucesOn();\n                } else {\n                    // The toggle is disabled\n                    enviarLucesOff();\n                }\n            }\n        });\n        db = FirebaseFirestore.getInstance();\n        MainActivity myActivity = (MainActivity) getActivity();\n        final TextView medidaTemp=v.findViewById(R.id.medidaTemperaturaGeneral);\n        final TextView medidaHum=v.findViewById(R.id.medidaHumedadGeneral);\n        final TextView medidaHumAm=v.findViewById(R.id.medidaSalinidadGeneral);\n        final TextView medidaLuz=v.findViewById(R.id.medidasLuminosidadGeneral);\n        uid=myActivity.getMachineUID();\n        db.collection(\"Mediciones general\")\n                .document(uid)\n                .addSnapshotListener(new EventListener<DocumentSnapshot>() {\n                    @Override\n                    public void onEvent(@Nullable DocumentSnapshot snapshot,\n                                        @Nullable FirebaseFirestoreException e) {\n                        if (e != null) {\n                            return;\n                        }\n\n                        if (snapshot != null && snapshot.exists()) {\n                            //Temperatura\n                            String medidaT=snapshot.getString(\"Temperatura\");\n                            medidaTemp.setText(medidaT+\"°C\");\n                            //Humedad\n                            String medidaH=snapshot.getString(\"Humedad\");\n                            medidaHum.setText(medidaH+\"%\");\n                            //Humedad Ambiente\n                            String medidaHA=snapshot.getString(\"Humedad Ambiente\");\n                            medidaHumAm.setText(medidaHA+\"%\");\n                            //Luminosidad\n                            String medidaL=snapshot.getString(\"Luminosidad\");\n                            medidaLuz.setText(medidaL+\"%\");\n\n\n                        } else {\n\n                        }\n                    }\n                });\n\n        //Boton para acceder a la maquina para sus parcelas\n        Button btnmymachine = (Button) v.findViewById(R.id.btnMyMachine);\n        btnmymachine.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n\n                BottomSheetDialog bottomSheetDialog = new BottomSheetDialog(\n                        getContext()\n                );\n                bottomSheetDialog.setContentView(R.layout.plantamaquina_bottom_sheet);\n                Button btnp1=bottomSheetDialog.findViewById(R.id.enterPlant2);\n                Button btn2=bottomSheetDialog.findViewById(R.id.enterPlant1);\n                bottomSheetDialog.show();\n                btnp1.setOnClickListener(new View.OnClickListener() {\n                    @Override\n                    public void onClick(View v) {\n                        Intent intent = new Intent (getContext(), planta1.class);\n                        intent.putExtra(\"idMachine\", uid);\n                        startActivity(intent);\n\n                    }\n                });\n            }\n        });\n\n        return v;\n    }\n        /*btnmymachine.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Intent intent = new Intent (getContext(), MiMaquina.class);\n                startActivity(intent);\n\n            }\n        });*/\n\n\n\n    public void enviarLucesOff(){\n        try {\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\n                    MemoryPersistence());\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n        MqttConnectOptions connOpts = new MqttConnectOptions();\n        connOpts.setCleanSession(true);\n        connOpts.setKeepAliveInterval(60);\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\n\n        try {\n            client.connect(connOpts);\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n\n        //conexión con el broker Root1 = Lector de datos\n        //nos subscribimos a topic lectura\n        try {\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\n            client.setCallback((MqttCallback) this);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\n        }\n        try {\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\n            MqttMessage message = new MqttMessage(\"Superior OFF\".getBytes());\n            message.setQos(Mqtt.qos);\n            message.setRetained(false);\n            client.publish(topicRoot+\"luces\", message);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\n        }\n    }\n    public void enviarLucesOn(){\n        try {\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\n                    MemoryPersistence());\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n        MqttConnectOptions connOpts = new MqttConnectOptions();\n        connOpts.setCleanSession(true);\n        connOpts.setKeepAliveInterval(60);\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\n\n        try {\n            client.connect(connOpts);\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n\n        //conexión con el broker Root1 = Lector de datos\n        //nos subscribimos a topic lectura\n        try {\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\n            client.setCallback((MqttCallback) this);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\n        }\n        try {\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\n            MqttMessage message = new MqttMessage(\"Superior ON\".getBytes());\n            message.setQos(Mqtt.qos);\n            message.setRetained(false);\n            client.publish(topicRoot+\"luces\", message);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\n        }\n    }\n\n    @Override\n    public void connectionLost(Throwable cause) {\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\n    }\n\n    @Override\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\n\n    }\n\n    @Override\n    public void deliveryComplete(IMqttDeliveryToken token) {\n        Log.d(Mqtt.TAG, \"Entrega completa\");\n    }\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(revision 97b60040cb9ddffbf7eb424364e4fc4451452801)
-+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(date 1611084238766)
-@@ -3,8 +3,8 @@
- import android.content.Intent;
- import android.os.Bundle;
- 
-+import androidx.annotation.NonNull;
- import androidx.annotation.Nullable;
--import androidx.constraintlayout.widget.ConstraintLayout;
- import androidx.fragment.app.Fragment;
- 
- import android.util.Log;
-@@ -21,6 +21,12 @@
- import com.example.infinitycrop.R;
- import com.example.infinitycrop.ui.MachineControl.planta1;
- import com.google.android.material.bottomsheet.BottomSheetDialog;
-+import com.google.firebase.Timestamp;
-+import com.google.firebase.database.DataSnapshot;
-+import com.google.firebase.database.DatabaseError;
-+import com.google.firebase.database.DatabaseReference;
-+import com.google.firebase.database.FirebaseDatabase;
-+import com.google.firebase.database.ValueEventListener;
- import com.google.firebase.firestore.DocumentSnapshot;
- import com.google.firebase.firestore.EventListener;
- import com.google.firebase.firestore.FirebaseFirestore;
-@@ -34,6 +40,10 @@
- import org.eclipse.paho.client.mqttv3.MqttMessage;
- import org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;
- 
-+import java.util.Date;
-+import java.util.HashMap;
-+import java.util.Map;
-+
- import static com.example.comun.Mqtt.topicRoot;
- 
- /**
-@@ -200,18 +210,18 @@
-         //conexión con el broker Root1 = Lector de datos
-         //nos subscribimos a topic lectura
-         try {
--            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "luces");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
--            client.subscribe(topicRoot + "luces", Mqtt.qos);
-+            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "operaciones");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
-+            client.subscribe(topicRoot + "operaciones", Mqtt.qos);
-             client.setCallback((MqttCallback) this);
-         } catch (MqttException e) {
-             Log.e(Mqtt.TAG, "Error al suscribir.", e);
-         }
-         try {
-             Log.i(Mqtt.TAG, "Publicando mensaje: " + "mensaje");
--            MqttMessage message = new MqttMessage("Superior OFF".getBytes());
-+            MqttMessage message = new MqttMessage("1-OFF".getBytes());
-             message.setQos(Mqtt.qos);
-             message.setRetained(false);
--            client.publish(topicRoot+"luces", message);
-+            client.publish(topicRoot+"operaciones", message);
-         } catch (MqttException e) {
-             Log.e(Mqtt.TAG, "Error al publicar.", e);
-         }
-@@ -237,18 +247,18 @@
-         //conexión con el broker Root1 = Lector de datos
-         //nos subscribimos a topic lectura
-         try {
--            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "luces");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
--            client.subscribe(topicRoot + "luces", Mqtt.qos);
-+            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "operaciones");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
-+            client.subscribe(topicRoot + "operaciones", Mqtt.qos);
-             client.setCallback((MqttCallback) this);
-         } catch (MqttException e) {
-             Log.e(Mqtt.TAG, "Error al suscribir.", e);
-         }
-         try {
-             Log.i(Mqtt.TAG, "Publicando mensaje: " + "mensaje");
--            MqttMessage message = new MqttMessage("Superior ON".getBytes());
-+            MqttMessage message = new MqttMessage("1-ON".getBytes());
-             message.setQos(Mqtt.qos);
-             message.setRetained(false);
--            client.publish(topicRoot+"luces", message);
-+            client.publish(topicRoot+"operaciones", message);
-         } catch (MqttException e) {
-             Log.e(Mqtt.TAG, "Error al publicar.", e);
-         }
-Index: app/src/main/java/com/example/infinitycrop/ui/Foro/main/Community/NewPost/NewPostFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.Foro.main.Community.NewPost;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.constraintlayout.widget.ConstraintLayout;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.Foro.main.Community.CommunityMain;\r\nimport com.example.infinitycrop.ui.Foro.main.Community.NewPost.CreatePost.CreatePost;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link NewPostFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class NewPostFragment extends Fragment {\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public NewPostFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment NewPostFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static NewPostFragment newInstance(String param1, String param2) {\r\n        NewPostFragment fragment = new NewPostFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    private String comunityID;\r\n    private ConstraintLayout btn_create;\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_new_post, container, false);\r\n\r\n        CommunityMain communityMain= (CommunityMain) getActivity();\r\n        comunityID=communityMain.getCommunityUid();\r\n\r\n        btn_create=v.findViewById(R.id.btn_layoutCreatePost);\r\n        btn_create.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), CreatePost.class);\r\n                intent.putExtra(\"community\", comunityID);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n        return v;\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/Foro/main/Community/NewPost/NewPostFragment.java	(revision 97b60040cb9ddffbf7eb424364e4fc4451452801)
-+++ app/src/main/java/com/example/infinitycrop/ui/Foro/main/Community/NewPost/NewPostFragment.java	(date 1611063499185)
-@@ -5,6 +5,7 @@
- 
- import androidx.constraintlayout.widget.ConstraintLayout;
- import androidx.fragment.app.Fragment;
-+import androidx.recyclerview.widget.RecyclerView;
- 
- import android.view.LayoutInflater;
- import android.view.View;
-@@ -63,6 +64,8 @@
- 
-     private String comunityID;
-     private ConstraintLayout btn_create;
-+    private RecyclerView rv_myPost;
-+
-     @Override
-     public View onCreateView(LayoutInflater inflater, ViewGroup container,
-                              Bundle savedInstanceState) {
-@@ -72,6 +75,9 @@
-         CommunityMain communityMain= (CommunityMain) getActivity();
-         comunityID=communityMain.getCommunityUid();
- 
-+        //rv, adapter
-+        rv_myPost=v.findViewById(R.id.rv_myGalleryPosts);
-+
-         btn_create=v.findViewById(R.id.btn_layoutCreatePost);
-         btn_create.setOnClickListener(new View.OnClickListener() {
-             @Override
-Index: app/src/main/java/com/example/infinitycrop/ui/list_machine/AddMachine.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.list_machine;\n\nimport android.app.ProgressDialog;\nimport android.content.DialogInterface;\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.text.TextUtils;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.CheckBox;\nimport android.widget.EditText;\nimport android.widget.ImageView;\nimport android.widget.LinearLayout;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AlertDialog;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport com.example.infinitycrop.R;\nimport com.google.android.gms.tasks.OnCompleteListener;\nimport com.google.android.gms.tasks.Task;\nimport com.google.firebase.Timestamp;\nimport com.google.firebase.auth.FirebaseAuth;\nimport com.google.firebase.firestore.CollectionReference;\nimport com.google.firebase.firestore.DocumentReference;\nimport com.google.firebase.firestore.DocumentSnapshot;\nimport com.google.firebase.firestore.FirebaseFirestore;\nimport com.google.firebase.firestore.QueryDocumentSnapshot;\nimport com.google.firebase.firestore.QuerySnapshot;\nimport com.google.zxing.integration.android.IntentIntegrator;\nimport com.google.zxing.integration.android.IntentResult;\n\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class AddMachine extends AppCompatActivity implements View.OnClickListener{\n    Button scanBtn;\n    private EditText TextnameMachine;\n    private EditText Textmodel;\n    private CheckBox fav;\n    private long priorityMachine;\n    private LinearLayout BtnregistMachine;\n    private ProgressDialog progressDialogo;\n    private ImageView backToProfile;\n    private String codigo_qr;\n    private CollectionReference machineRef;\n    private FirebaseAuth firebaseAuth;\n    @Override public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.qr_scanner);\n\n        //Boton escanear\n        scanBtn = findViewById(R.id.btn_scan);\n        scanBtn.setOnClickListener(this);\n        //textos y boton de registrar maquina\n        TextnameMachine = (EditText) findViewById(R.id.editTextTextMchineName);\n        Textmodel = (EditText) findViewById(R.id.editTextTextMachineModel);\n        fav = (CheckBox) findViewById(R.id.btn_fav);\n        machineRef = FirebaseFirestore.getInstance().collection(\"Machine\");\n        firebaseAuth=FirebaseAuth.getInstance();\n        BtnregistMachine = (LinearLayout) findViewById(R.id.btn_registMachine);\n        progressDialogo =new ProgressDialog(this);\n\n        BtnregistMachine.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                onclick(v);\n            }\n        });\n        backToProfile =findViewById(R.id.backTomachinelist);\n        backToProfile.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                finish();\n            }\n        });\n    }\n\n\n    private void registMachine(){\n        final String name = TextnameMachine.getText().toString().trim();\n        final String model = Textmodel.getText().toString().trim();\n\n\n        //comprobamos si estan vacias o no\n        //verificamos si las cajas estan vacias o no\n        if(TextUtils.isEmpty(name)){\n            Toast.makeText(this,\"Debes introducir un nombre\",Toast.LENGTH_LONG).show();\n            return;\n        }\n        if(model.equals(\"Primero escanea el QR\")){\n            Toast.makeText(this,\"Escanea el QR de tu maquina\",Toast.LENGTH_LONG).show();\n            return;\n        }\n        if (fav.isSelected()) {\n\n            return;\n        }\n\n        progressDialogo.setMessage(\"Registrando obteniendo contenido en línea...\");\n        progressDialogo.show();\n    }\n\n\n    @Override\n    public void onClick(View v) {\n        final String name = TextnameMachine.getText().toString().trim();\n        if(name.isEmpty()){\n            Toast.makeText(getApplicationContext(),\"Debes introducir un nombre\",Toast.LENGTH_LONG).show();\n        }else {\n            scanCode();\n        }\n    }\n\n    private void scanCode(){\n        IntentIntegrator integrator = new IntentIntegrator(this);\n        integrator.setCaptureActivity(CaptureAct.class);\n        integrator.setOrientationLocked(false);\n        integrator.setDesiredBarcodeFormats(IntentIntegrator.ALL_CODE_TYPES);\n        integrator.setPrompt(\"Escaneando código de tu máquina\");\n        integrator.initiateScan();\n    }\n    @Override\n    protected void onActivityResult(final int requestCode, final int resultCode, Intent data) {\n        final int[] res = new int[1];\n        final IntentResult result = IntentIntegrator.parseActivityResult(requestCode, resultCode, data);\n        if (result!= null){\n            if (result.getContents() !=null){\n                codigo_qr=result.getContents();\n                FirebaseFirestore rootRef = FirebaseFirestore.getInstance();\n                final CollectionReference docIdRef = rootRef.collection(\"Machine\");\n                docIdRef.whereEqualTo(\"description\", codigo_qr)\n                        .get()\n                        .addOnCompleteListener(new OnCompleteListener<QuerySnapshot>() {\n                            @Override\n                            public void onComplete(@NonNull Task<QuerySnapshot> task) {\n                                if(task.isSuccessful()){\n                                    QuerySnapshot document = task.getResult();\n                                    if (document.size()>=1) {\n                                        dialogYaExiste(result);\n                                    } else {\n                                        dialogAñadirmaquina(result);\n                                    }\n                                }else {\n\n                                }\n                            }\n                        });\n                /*docIdRef.get().addOnCompleteListener(new OnCompleteListener<DocumentSnapshot>() {\n                    @Override\n                    public void onComplete(@NonNull Task<DocumentSnapshot> task) {\n                        if (task.isSuccessful()) {\n                            DocumentSnapshot document = task.getResult();\n                            if (document.exists()) {\n                                dialogYaExiste(result);\n                            } else {\n                                dialogYaExiste(result);\n                            }\n                        } else {\n\n                        }\n                    }\n                });*/\n\n            }\n            else {\n                Toast.makeText(this, \"Sin resultados\", Toast.LENGTH_LONG).show();\n            }\n        }\n        else{\n            super.onActivityResult(requestCode, resultCode, data);\n        }\n\n    }\n    public void dialogAñadirmaquina(IntentResult result){\n        AlertDialog.Builder builder = new AlertDialog.Builder(this);\n        builder.setMessage(result.getContents());\n        builder.setTitle(\"El código de tu máquina es\");\n        builder.setPositiveButton(\"Escanear de nuevo\", new DialogInterface.OnClickListener() {\n            @Override\n            public void onClick(DialogInterface dialog, int which) {\n\n                scanCode();\n            }\n        }).setNegativeButton(\"Añadir\", new DialogInterface.OnClickListener() {\n            @Override\n            public void onClick(DialogInterface dialog, int which) {\n                addMachine();\n            }\n        });\n        AlertDialog dialog = builder.create();\n        dialog.show();\n    }\n    public void dialogYaExiste(IntentResult result){\n        AlertDialog.Builder builder = new AlertDialog.Builder(this);\n        builder.setMessage(result.getContents());\n        builder.setTitle(\"Error! El QR ya ha sido utilizado por otro usuario\");\n        builder.setPositiveButton(\"Escanear de nuevo\", new DialogInterface.OnClickListener() {\n            @Override\n            public void onClick(DialogInterface dialog, int which) {\n\n                scanCode();\n            }\n        }).setNegativeButton(\"Cancelar\", new DialogInterface.OnClickListener() {\n            @Override\n            public void onClick(DialogInterface dialog, int which) {\n                dialog.cancel();\n            }\n        });\n        AlertDialog dialog = builder.create();\n        dialog.show();\n    }\n    public void onclick(View v){\n\n        //invocamos al metodo\n        switch (v.getId()){\n            case R.id.btn_registMachine:\n                registMachine();\n        }\n    }\n    public void addMachine(){\n        Textmodel.setText(codigo_qr);\n        if (fav.isChecked()) {\n            priorityMachine=1;\n        }else{\n            priorityMachine=2;\n        }\n        String uid=firebaseAuth.getUid();\n        final String id=Textmodel.getText().toString().trim();\n        /*final Map<String, Object> data = new HashMap<>();\n        data.put(\"userUID\", uid);*/\n        //collecion mediciones\n        final Map<String, Object> intoMediciones = new HashMap<>();\n        intoMediciones.put(\"machineID\", id);\n        intoMediciones.put(\"fecha\", new Timestamp(new Date()));\n        intoMediciones.put(\"Temperatura\", 0);\n        intoMediciones.put(\"Humedad\", 0);\n        intoMediciones.put(\"Humedad Ambiente\", 0);\n        intoMediciones.put(\"Luminosidad\", 0);\n        //coleccion actuadores\n        final Map<String, Object> intoActuadores = new HashMap<>();\n        intoActuadores.put(\"machineID\", id);\n        intoActuadores.put(\"fecha\", new Timestamp(new Date()));\n        intoActuadores.put(\"Bomba de agua\", false);\n        intoActuadores.put(\"Ventiladores\", false);\n        intoActuadores.put(\"Luces\", false);\n        machineRef.add(new MachineModel(TextnameMachine.getText().toString().trim(), priorityMachine, id, uid));\n        FirebaseFirestore.getInstance().collection(\"Mediciones\").document().set(intoMediciones);\n        FirebaseFirestore.getInstance().collection(\"Actuadores\").document().set(intoActuadores);\n                /*.addOnCompleteListener(new OnCompleteListener<DocumentReference>() {\n                    @Override\n                    public void onComplete(@NonNull Task<DocumentReference> task) {\n                        DocumentReference document=task.getResult();\n                        machineRef.document(document.getId()).collection(\"Nivel 1\")\n                                .document(\"Mediciones\")\n                                .set(data);\n                    }\n                })\n                .addOnCompleteListener(new OnCompleteListener<DocumentReference>() {\n                    @Override\n                    public void onComplete(@NonNull Task<DocumentReference> task) {\n                        DocumentReference document=task.getResult();\n                        machineRef.document(document.getId()).collection(\"Nivel 1\")\n                                .document(\"Actuadores\")\n                                .set(data);\n                    }\n                })\n                .addOnCompleteListener(new OnCompleteListener<DocumentReference>() {\n                    @Override\n                    public void onComplete(@NonNull Task<DocumentReference> task) {\n                        DocumentReference document=task.getResult();\n                        machineRef.document(document.getId()).collection(\"Nivel 2\")\n                                .document(\"Mediciones\")\n                                .set(data);\n                    }\n                })\n                .addOnCompleteListener(new OnCompleteListener<DocumentReference>() {\n                    @Override\n                    public void onComplete(@NonNull Task<DocumentReference> task) {\n                        DocumentReference document=task.getResult();\n                        machineRef.document(document.getId()).collection(\"Nivel 2\")\n                                .document(\"Actuadores\")\n                                .set(data);\n                    }\n                });*/\n        Toast.makeText(this, \"Maquina añadida\", Toast.LENGTH_SHORT).show();\n        finish();\n    }\n}\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/list_machine/AddMachine.java	(revision 97b60040cb9ddffbf7eb424364e4fc4451452801)
-+++ app/src/main/java/com/example/infinitycrop/ui/list_machine/AddMachine.java	(date 1611086380634)
-@@ -49,6 +49,7 @@
-     private String codigo_qr;
-     private CollectionReference machineRef;
-     private FirebaseAuth firebaseAuth;
-+    private FirebaseFirestore db;
-     @Override public void onCreate(Bundle savedInstanceState) {
-         super.onCreate(savedInstanceState);
-         setContentView(R.layout.qr_scanner);
-@@ -61,6 +62,7 @@
-         Textmodel = (EditText) findViewById(R.id.editTextTextMachineModel);
-         fav = (CheckBox) findViewById(R.id.btn_fav);
-         machineRef = FirebaseFirestore.getInstance().collection("Machine");
-+        db=FirebaseFirestore.getInstance();
-         firebaseAuth=FirebaseAuth.getInstance();
-         BtnregistMachine = (LinearLayout) findViewById(R.id.btn_registMachine);
-         progressDialogo =new ProgressDialog(this);
-@@ -233,60 +235,88 @@
-         final String id=Textmodel.getText().toString().trim();
-         /*final Map<String, Object> data = new HashMap<>();
-         data.put("userUID", uid);*/
--        //collecion mediciones
--        final Map<String, Object> intoMediciones = new HashMap<>();
--        intoMediciones.put("machineID", id);
--        intoMediciones.put("fecha", new Timestamp(new Date()));
--        intoMediciones.put("Temperatura", 0);
--        intoMediciones.put("Humedad", 0);
--        intoMediciones.put("Humedad Ambiente", 0);
--        intoMediciones.put("Luminosidad", 0);
--        //coleccion actuadores
--        final Map<String, Object> intoActuadores = new HashMap<>();
--        intoActuadores.put("machineID", id);
--        intoActuadores.put("fecha", new Timestamp(new Date()));
--        intoActuadores.put("Bomba de agua", false);
--        intoActuadores.put("Ventiladores", false);
--        intoActuadores.put("Luces", false);
-+        //collecion mediciones general
-+        final Map<String, Object> a = new HashMap<>();
-+        a.put("Humedad", "0");
-+        a.put("Luminosidad", "0");
-+        a.put("Temperatura", "0");
-+        a.put("Fecha", new Timestamp(new Date()));
-+        a.put("machineId", id);
-+        //collecion mediciones planta 1
-+        final Map<String, Object> a1 = new HashMap<>();
-+        a1.put("Humedad", "0");
-+        a1.put("Humedad Ambiente", "0");
-+        a1.put("Temperatura", "0");
-+        a1.put("Fecha", new Timestamp(new Date()));
-+        a1.put("machineId", id);
-+        //collecion mediciones planta 2
-+        final Map<String, Object> a2 = new HashMap<>();
-+        a2.put("Humedad Ambiente", "0");
-+        a2.put("Temperatura", "0");
-+        a2.put("Fecha", new Timestamp(new Date()));
-+        a2.put("machineId", id);
-         machineRef.add(new MachineModel(TextnameMachine.getText().toString().trim(), priorityMachine, id, uid));
--        FirebaseFirestore.getInstance().collection("Mediciones").document().set(intoMediciones);
--        FirebaseFirestore.getInstance().collection("Actuadores").document().set(intoActuadores);
--                /*.addOnCompleteListener(new OnCompleteListener<DocumentReference>() {
--                    @Override
--                    public void onComplete(@NonNull Task<DocumentReference> task) {
--                        DocumentReference document=task.getResult();
--                        machineRef.document(document.getId()).collection("Nivel 1")
--                                .document("Mediciones")
--                                .set(data);
--                    }
--                })
--                .addOnCompleteListener(new OnCompleteListener<DocumentReference>() {
--                    @Override
--                    public void onComplete(@NonNull Task<DocumentReference> task) {
--                        DocumentReference document=task.getResult();
--                        machineRef.document(document.getId()).collection("Nivel 1")
--                                .document("Actuadores")
--                                .set(data);
--                    }
--                })
--                .addOnCompleteListener(new OnCompleteListener<DocumentReference>() {
--                    @Override
--                    public void onComplete(@NonNull Task<DocumentReference> task) {
--                        DocumentReference document=task.getResult();
--                        machineRef.document(document.getId()).collection("Nivel 2")
--                                .document("Mediciones")
--                                .set(data);
--                    }
--                })
--                .addOnCompleteListener(new OnCompleteListener<DocumentReference>() {
--                    @Override
--                    public void onComplete(@NonNull Task<DocumentReference> task) {
--                        DocumentReference document=task.getResult();
--                        machineRef.document(document.getId()).collection("Nivel 2")
--                                .document("Actuadores")
--                                .set(data);
--                    }
--                });*/
-+        db.collection("Mediciones general").document(id).set(a);
-+        db.collection("Mediciones planta 1").document(id).set(a1);
-+        db.collection("Mediciones planta 2").document(id).set(a2);
-+        //añadir subCollecion datos piso
-+        final Map<String, Object> planta1 = new HashMap<>();
-+        planta1.put("fecha", "00/00/0000");
-+        planta1.put("hora", "00:00 a. m.");
-+        planta1.put("name", "Planta 1");
-+        planta1.put("piso", 1);
-+        planta1.put("estacion","Esta planta se encuentra en la estación número 1");
-+        planta1.put("estado",0);
-+        final Map<String, Object> planta2 = new HashMap<>();
-+        planta2.put("fecha", "00/00/0000");
-+        planta2.put("hora", "00:00 a. m.");
-+        planta2.put("name", "Planta 2");
-+        planta2.put("piso", 1);
-+        planta2.put("estado",0);
-+        planta2.put("estacion","Esta planta se encuentra en la estación número 2");
-+        final Map<String, Object> planta3 = new HashMap<>();
-+        planta3.put("fecha", "00/00/0000");
-+        planta3.put("hora", "00:00 a. m.");
-+        planta3.put("name", "Planta 3");
-+        planta3.put("piso", 1);
-+        planta3.put("estado",0);
-+        planta3.put("estacion","Esta planta se encuentra en la estación número 3");
-+        db.collection("Mediciones planta 1").document(id).collection("DatosPiso")
-+                .document("planta1").set(planta1);
-+        db.collection("Mediciones planta 1").document(id).collection("DatosPiso")
-+                .document("planta2").set(planta2);
-+        db.collection("Mediciones planta 1").document(id).collection("DatosPiso")
-+                .document("planta3").set(planta3);
-+        //añadir subCollecion datos piso 2
-+        final Map<String, Object> planta4 = new HashMap<>();
-+        planta4.put("fecha", "00/00/0000");
-+        planta4.put("hora", "00:00 a. m.");
-+        planta4.put("name", "Planta 1");
-+        planta4.put("piso", 2);
-+        planta4.put("estacion","Esta planta se encuentra en la estación número 4");
-+        planta4.put("estado",0);
-+        final Map<String, Object> planta5 = new HashMap<>();
-+        planta5.put("fecha", "00/00/0000");
-+        planta5.put("hora", "00:00 a. m.");
-+        planta5.put("name", "Planta 2");
-+        planta5.put("piso", 2);
-+        planta5.put("estado",0);
-+        planta5.put("estacion","Esta planta se encuentra en la estación número 5");
-+        final Map<String, Object> planta6 = new HashMap<>();
-+        planta6.put("fecha", "00/00/0000");
-+        planta6.put("hora", "00:00 a. m.");
-+        planta6.put("name", "Planta 3");
-+        planta6.put("piso", 2);
-+        planta6.put("estado",0);
-+        planta6.put("estacion","Esta planta se encuentra en la estación número 6");
-+        db.collection("Mediciones planta 2").document(id).collection("DatosPiso")
-+                .document("planta1").set(planta4);
-+        db.collection("Mediciones planta 2").document(id).collection("DatosPiso")
-+                .document("planta2").set(planta5);
-+        db.collection("Mediciones planta 2").document(id).collection("DatosPiso")
-+                .document("planta3").set(planta6);
-+
-+
-         Toast.makeText(this, "Maquina añadida", Toast.LENGTH_SHORT).show();
-         finish();
-     }
-Index: app/src/main/java/com/example/infinitycrop/ui/Foro/main/Community/NewPost/CreatePost/CreatePost.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.Foro.main.Community.NewPost.CreatePost;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.app.Activity;\r\nimport android.content.Intent;\r\nimport android.graphics.Bitmap;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.Foro.lets_start.welcome_forum;\r\nimport com.google.android.gms.tasks.Continuation;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\nimport com.squareup.picasso.Picasso;\r\nimport com.theartofdev.edmodo.cropper.CropImage;\r\nimport com.theartofdev.edmodo.cropper.CropImageView;\r\n\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\n\r\nimport id.zelory.compressor.Compressor;\r\n\r\npublic class CreatePost extends AppCompatActivity {\r\n\r\n    private ImageView img_post;\r\n    private Bitmap thumb_bitmap;\r\n    private TextView btn_changeImg;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_create_post);\r\n\r\n        img_post=findViewById(R.id.img_CreatePost);\r\n        btn_changeImg=findViewById(R.id.txt_changeImgPost);\r\n        CropImage.startPickImageActivity(CreatePost.this);\r\n        btn_changeImg.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                CropImage.startPickImageActivity(CreatePost.this);\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        if(requestCode==CropImage.PICK_IMAGE_CHOOSER_REQUEST_CODE && resultCode == Activity.RESULT_OK){\r\n            Uri imageuri=CropImage.getPickImageResultUri(this,data);\r\n            //recortar imagen\r\n            CropImage.activity(imageuri)\r\n                    .setGuidelines(CropImageView.Guidelines.ON)\r\n                    .start(CreatePost.this);\r\n        }\r\n        if(requestCode==CropImage.CROP_IMAGE_ACTIVITY_REQUEST_CODE){\r\n            CropImage.ActivityResult result=CropImage.getActivityResult(data);\r\n            if(resultCode==RESULT_OK){\r\n                Uri resultUri=result.getUri();\r\n                File url=new File(resultUri.getPath());\r\n                Picasso.get().load(url).into(img_post);\r\n                //comprimir imagen\r\n                try{\r\n                    thumb_bitmap=new Compressor(this)\r\n                            .setQuality(90)\r\n                            .compressToBitmap(url);\r\n                }catch (IOException e){\r\n                    e.printStackTrace();\r\n                }\r\n                ByteArrayOutputStream byteArrayOutputStream=new ByteArrayOutputStream();\r\n                thumb_bitmap.compress(Bitmap.CompressFormat.JPEG,100,byteArrayOutputStream);\r\n                final byte[] thumb_byte= byteArrayOutputStream.toByteArray();\r\n\r\n                /*String urlStorage=\"foro/user/\"+id+\"/profile img\";\r\n                final StorageReference ref = mStorageRef.child(urlStorage).child(\"userImg\");\r\n                UploadTask uploadTask=ref.putBytes(thumb_byte);\r\n                //subit imagen storage\r\n                Task<Uri> uriTask=uploadTask.continueWithTask(new Continuation<UploadTask.TaskSnapshot, Task<Uri>>() {\r\n                    @Override\r\n                    public Task<Uri> then(@NonNull Task<UploadTask.TaskSnapshot> task) throws Exception {\r\n                        return ref.getDownloadUrl();\r\n                    }\r\n                }).addOnCompleteListener(new OnCompleteListener<Uri>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<Uri> task) {\r\n                        Uri dowloadUri=task.getResult();\r\n                        image_url=dowloadUri.toString();\r\n\r\n                    }\r\n                });*/\r\n\r\n\r\n\r\n            }\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/Foro/main/Community/NewPost/CreatePost/CreatePost.java	(revision 97b60040cb9ddffbf7eb424364e4fc4451452801)
-+++ app/src/main/java/com/example/infinitycrop/ui/Foro/main/Community/NewPost/CreatePost/CreatePost.java	(date 1611007548402)
-@@ -3,6 +3,8 @@
- import androidx.annotation.NonNull;
- import androidx.annotation.Nullable;
- import androidx.appcompat.app.AppCompatActivity;
-+import androidx.constraintlayout.widget.ConstraintLayout;
-+import androidx.recyclerview.widget.RecyclerView;
- 
- import android.app.Activity;
- import android.content.Intent;
-@@ -10,14 +12,28 @@
- import android.net.Uri;
- import android.os.Bundle;
- import android.view.View;
-+import android.widget.Button;
- import android.widget.ImageView;
- import android.widget.TextView;
-+import android.widget.Toast;
- 
- import com.example.infinitycrop.R;
-+import com.example.infinitycrop.ui.Foro.lets_start.rv_community.CommunityModel;
- import com.example.infinitycrop.ui.Foro.lets_start.welcome_forum;
-+import com.example.infinitycrop.ui.Foro.main.Home.RVs.PostModel;
-+import com.example.infinitycrop.ui.Foro.main.Home.RVs.RvPost.AdapterPost;
- import com.google.android.gms.tasks.Continuation;
- import com.google.android.gms.tasks.OnCompleteListener;
- import com.google.android.gms.tasks.Task;
-+import com.google.android.material.textfield.TextInputEditText;
-+import com.google.firebase.Timestamp;
-+import com.google.firebase.auth.FirebaseAuth;
-+import com.google.firebase.auth.FirebaseUser;
-+import com.google.firebase.firestore.DocumentSnapshot;
-+import com.google.firebase.firestore.FirebaseFirestore;
-+import com.google.firebase.firestore.QueryDocumentSnapshot;
-+import com.google.firebase.firestore.QuerySnapshot;
-+import com.google.firebase.storage.FirebaseStorage;
- import com.google.firebase.storage.StorageReference;
- import com.google.firebase.storage.UploadTask;
- import com.squareup.picasso.Picasso;
-@@ -27,6 +43,10 @@
- import java.io.ByteArrayOutputStream;
- import java.io.File;
- import java.io.IOException;
-+import java.util.Date;
-+import java.util.HashMap;
-+import java.util.Map;
-+import java.util.UUID;
- 
- import id.zelory.compressor.Compressor;
- 
-@@ -35,20 +55,56 @@
-     private ImageView img_post;
-     private Bitmap thumb_bitmap;
-     private TextView btn_changeImg;
-+    private StorageReference mStorageRef;
-+    private Button btn_back;
-+    private TextInputEditText input_name;
-+    private TextInputEditText desc_name;
-+    private Button btn_createPost;
-+    private String image_url;
-+    private  Uri resultUri;
-+    private FirebaseUser usuario;
-+    private FirebaseFirestore db;
-+    private String id;
-+    private String uid;
-     @Override
-     protected void onCreate(Bundle savedInstanceState) {
-         super.onCreate(savedInstanceState);
-         setContentView(R.layout.activity_create_post);
- 
-+        Bundle extras = getIntent().getExtras();
-+        uid = extras.getString("community");
-+
-+        btn_back=findViewById(R.id.btnBackCreatePost);
-         img_post=findViewById(R.id.img_CreatePost);
-         btn_changeImg=findViewById(R.id.txt_changeImgPost);
-+        input_name=findViewById(R.id.input_editText_Createpost);
-+        desc_name=findViewById(R.id.input_desc_editText_Createpost);
-+        btn_createPost=findViewById(R.id.btn_createButtonPost);
-+        mStorageRef = FirebaseStorage.getInstance().getReference();
-+        usuario = FirebaseAuth.getInstance().getCurrentUser();
-+        db= FirebaseFirestore.getInstance();
-+        id=usuario.getUid();
-+        //init fotopicker
-         CropImage.startPickImageActivity(CreatePost.this);
-+        //onclicks
-         btn_changeImg.setOnClickListener(new View.OnClickListener() {
-             @Override
-             public void onClick(View v) {
-                 CropImage.startPickImageActivity(CreatePost.this);
-             }
-         });
-+        btn_back.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                cerrarActivity();
-+            }
-+        });
-+        btn_createPost.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                comprobarInputs();
-+            }
-+        });
-     }
- 
-     @Override
-@@ -65,42 +121,75 @@
-         if(requestCode==CropImage.CROP_IMAGE_ACTIVITY_REQUEST_CODE){
-             CropImage.ActivityResult result=CropImage.getActivityResult(data);
-             if(resultCode==RESULT_OK){
--                Uri resultUri=result.getUri();
-+                resultUri=result.getUri();
-                 File url=new File(resultUri.getPath());
-                 Picasso.get().load(url).into(img_post);
--                //comprimir imagen
--                try{
--                    thumb_bitmap=new Compressor(this)
--                            .setQuality(90)
--                            .compressToBitmap(url);
--                }catch (IOException e){
--                    e.printStackTrace();
--                }
--                ByteArrayOutputStream byteArrayOutputStream=new ByteArrayOutputStream();
--                thumb_bitmap.compress(Bitmap.CompressFormat.JPEG,100,byteArrayOutputStream);
--                final byte[] thumb_byte= byteArrayOutputStream.toByteArray();
-+            }
-+        }
-+    }
-+    private void comprobarInputs(){
-+        if(input_name.getText().toString().equals("")){
-+            Toast.makeText(getApplicationContext(),"Indique el título del post", Toast.LENGTH_LONG).show();
-+        }else if(img_post.getDrawable()==null){
-+            Toast.makeText(getApplicationContext(),"Seleccione una imagen para el post", Toast.LENGTH_LONG).show();
-+        }else{
-+            //all gucci
-+            subirPost();
-+        }
-+    }
- 
--                /*String urlStorage="foro/user/"+id+"/profile img";
--                final StorageReference ref = mStorageRef.child(urlStorage).child("userImg");
--                UploadTask uploadTask=ref.putBytes(thumb_byte);
--                //subit imagen storage
--                Task<Uri> uriTask=uploadTask.continueWithTask(new Continuation<UploadTask.TaskSnapshot, Task<Uri>>() {
--                    @Override
--                    public Task<Uri> then(@NonNull Task<UploadTask.TaskSnapshot> task) throws Exception {
--                        return ref.getDownloadUrl();
--                    }
--                }).addOnCompleteListener(new OnCompleteListener<Uri>() {
--                    @Override
--                    public void onComplete(@NonNull Task<Uri> task) {
--                        Uri dowloadUri=task.getResult();
--                        image_url=dowloadUri.toString();
--
--                    }
--                });*/
-+    private void subirPost(){
-+        //upload image into storage firebase
-+        String urlStorage="foro/communities/"+uid+"/posts/"+UUID.randomUUID().toString();
-+        final StorageReference ref = mStorageRef.child(urlStorage);
-+        UploadTask uploadTask=ref.putFile(resultUri);
-+        //subit imagen storage
-+        Task<Uri> uriTask=uploadTask.continueWithTask(new Continuation<UploadTask.TaskSnapshot, Task<Uri>>() {
-+            @Override
-+            public Task<Uri> then(@NonNull Task<UploadTask.TaskSnapshot> task) throws Exception {
-+                return ref.getDownloadUrl();
-+            }
-+        }).addOnCompleteListener(new OnCompleteListener<Uri>() {
-+            @Override
-+            public void onComplete(@NonNull Task<Uri> task) {
-+                Uri dowloadUri=task.getResult();
-+                image_url=dowloadUri.toString();
-+                //subir a coleccion posts
-+                Map<String, Object> post = new HashMap<>();
-+                post.put("creator", id);post.put("community", uid);
-+                post.put("likes", 0);post.put("tittle", input_name.getText().toString());
-+                post.put("desc", desc_name.getText().toString());post.put("comments", "");
-+                post.put("img", image_url);post.put("date", new Timestamp(new Date()));
-+                db.collection("Posts").add(post);
-+                sumNumOfPost();
-+                cerrarActivity();
-+            }
-+        });
-+    }
- 
-+    private void sumNumOfPost(){
-+        db.collection("Community").document(uid)
-+                .get().addOnCompleteListener(new OnCompleteListener<DocumentSnapshot>() {
-+                @Override
-+                public void onComplete(@NonNull Task<DocumentSnapshot> task) {
-+                    if (task.isSuccessful()) {
-+                        DocumentSnapshot document = task.getResult();
-+                        if (document.exists()) {
-+                            CommunityModel posts=document.toObject(CommunityModel.class);
-+                            int numPosts=posts.getPosts();
-+                            numPosts++;
-+                            db.collection("Community").document(uid).update("posts",numPosts);
-+                        } else {
- 
-+                        }
-+                    } else {
- 
--            }
--        }
-+                    }
-+                }
-+            });
-     }
-+
-+    private void cerrarActivity(){
-+        finish();
-+    }
- }
-\ No newline at end of file
-Index: app/src/main/res/layout/fragment_general.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    tools:context=\".ui.dashboard.DashboardFragment\">\n\n\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\n\n        <RelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginLeft=\"20dp\"\n            android:layout_marginTop=\"10dp\"\n            android:layout_marginRight=\"20dp\">\n\n            <TextView\n                android:id=\"@+id/textDashboardGeneral\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Dashboard  >\"\n\n                android:textSize=\"19sp\" />\n\n            <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_below=\"@+id/textDashboardGeneral\"\n                android:text=\"4 sensores\"\n\n                android:textSize=\"14sp\" />\n\n            <LinearLayout\n                android:layout_width=\"243dp\"\n                android:layout_height=\"93dp\"\n                android:layout_alignBottom=\"@id/textDashboardGeneral\"\n                android:layout_alignParentTop=\"true\"\n                android:layout_alignParentEnd=\"true\"\n                android:layout_marginStart=\"25dp\"\n                android:layout_marginTop=\"0dp\"\n                android:layout_marginEnd=\"-9dp\"\n                android:layout_marginBottom=\"-87dp\"\n                android:layout_toEndOf=\"@+id/textDashboardGeneral\"\n                android:orientation=\"vertical\">\n\n                <Button\n                    android:id=\"@+id/btnMyMachine\"\n                    android:layout_width=\"182dp\"\n                    android:layout_height=\"38dp\"\n                    android:layout_marginStart=\"0dp\"\n                    android:layout_marginTop=\"1dp\"\n                    android:layout_marginEnd=\"38dp\"\n                    android:layout_marginBottom=\"-22dp\"\n                    android:background=\"@drawable/btn_scan\"\n                    android:textColor=\"@color/white\"\n                    android:text=\"MI maquina\" />\n            </LinearLayout>\n\n            <!--<ImageView\n                android:layout_width=\"62dp\"\n                android:layout_height=\"62dp\"\n                android:layout_alignParentRight=\"true\"\n                android:src=\"@drawable/ic_sun\" />-->\n        </RelativeLayout>\n        <GridLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:columnCount=\"2\"\n            android:rowCount=\"3\"\n            android:alignmentMode=\"alignMargins\"\n            android:columnOrderPreserved=\"false\">\n            <!--temperatura-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textTemperaturaGeneral\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Temperatura\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchTemperaturaGeneral\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchTemperaturaGeneral\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:buttonTint=\"#FFFFFF\"\n                            android:checked=\"true\"\n                            android:fitsSystemWindows=\"false\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaTemperaturaGeneral\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"34°C\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textTemperaturaGeneral\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textTemperaturaGeneral\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgTemperaturaGeneral\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_temperature\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaTemperaturaGeneral\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaTemperaturaGeneral\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaTemperaturaGeneral\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--humedad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textHumedadGeneral\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Humedad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchHumedadGeneral\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchHumedadGeneral\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaHumedadGeneral\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"68%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textHumedadGeneral\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textHumedadGeneral\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgHumedadGeneral\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_humidity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaHumedadGeneral\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaHumedadGeneral\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaHumedadGeneral\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--salinidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textSalinidadGeneral\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"H. Ambiente\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchSalinidadGeneral\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchSalinidadGeneral\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaSalinidadGeneral\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"10%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textSalinidadGeneral\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textSalinidadGeneral\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgSalinidadGeneral\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_humedad_ambiente\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaSalinidadGeneral\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaSalinidadGeneral\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaSalinidadGeneral\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--Luminosidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textLuminosidadGeneral\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Luminosidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchLuminosidadGeneral\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchLuminosidadGeneral\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorHighlight=\"#FFFFFF\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidasLuminosidadGeneral\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"90%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textLuminosidadGeneral\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textLuminosidadGeneral\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgLuminosidadGeneral\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_luminosity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidasLuminosidadGeneral\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidasLuminosidadGeneral\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidasLuminosidadGeneral\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n\n\n\n\n        </GridLayout>\n\n    </LinearLayout>\n</ScrollView>\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_general.xml	(revision 97b60040cb9ddffbf7eb424364e4fc4451452801)
-+++ app/src/main/res/layout/fragment_general.xml	(date 1610993420598)
-@@ -101,17 +101,20 @@
- 
-                         <TextView
-                             android:id="@+id/textTemperaturaGeneral"
--                            android:layout_width="wrap_content"
-+                            android:layout_width="0dp"
-                             android:layout_height="wrap_content"
-                             android:layout_marginStart="8dp"
-                             android:layout_marginTop="8dp"
-                             android:text="Temperatura"
-                             android:textSize="16sp"
--                            app:layout_constraintBottom_toBottomOf="@+id/switchTemperaturaGeneral"
-+                            app:layout_constraintEnd_toEndOf="parent"
-+                            app:layout_constraintStart_toStartOf="parent"
-+                            app:layout_constraintTop_toTopOf="parent" />
-+                            <!--app:layout_constraintBottom_toBottomOf="@+id/switchTemperaturaGeneral"-->
-                             app:layout_constraintStart_toStartOf="parent"
-                             app:layout_constraintTop_toTopOf="parent" />
- 
--                        <Switch
-+                        <!--<Switch
-                             android:id="@+id/switchTemperaturaGeneral"
-                             android:layout_width="wrap_content"
-                             android:layout_height="wrap_content"
-@@ -123,7 +126,7 @@
-                             android:textColorLink="#a0c63e"
-                             android:textSize="8sp"
-                             app:layout_constraintEnd_toEndOf="parent"
--                            app:layout_constraintTop_toTopOf="parent" />
-+                            app:layout_constraintTop_toTopOf="parent" />-->
- 
-                         <TextView
-                             android:id="@+id/medidaTemperaturaGeneral"
-@@ -175,17 +178,20 @@
- 
-                         <TextView
-                             android:id="@+id/textHumedadGeneral"
--                            android:layout_width="wrap_content"
-+                            android:layout_width="0dp"
-                             android:layout_height="wrap_content"
-                             android:layout_marginStart="8dp"
-                             android:layout_marginTop="8dp"
-                             android:text="Humedad"
-                             android:textSize="16sp"
--                            app:layout_constraintBottom_toBottomOf="@+id/switchHumedadGeneral"
-+                            app:layout_constraintEnd_toEndOf="parent"
-+                            app:layout_constraintStart_toStartOf="parent"
-+                            app:layout_constraintTop_toTopOf="parent" />
-+                            <!--app:layout_constraintBottom_toBottomOf="@+id/switchHumedadGeneral"-->
-                             app:layout_constraintStart_toStartOf="parent"
-                             app:layout_constraintTop_toTopOf="parent" />
- 
--                        <Switch
-+                        <!--<Switch
-                             android:id="@+id/switchHumedadGeneral"
-                             android:layout_width="wrap_content"
-                             android:layout_height="wrap_content"
-@@ -195,7 +201,7 @@
-                             android:textColorLink="#a0c63e"
-                             android:textSize="8sp"
-                             app:layout_constraintEnd_toEndOf="parent"
--                            app:layout_constraintTop_toTopOf="parent" />
-+                            app:layout_constraintTop_toTopOf="parent" />-->
- 
-                         <TextView
-                             android:id="@+id/medidaHumedadGeneral"
-@@ -247,17 +253,20 @@
- 
-                         <TextView
-                             android:id="@+id/textSalinidadGeneral"
--                            android:layout_width="wrap_content"
-+                            android:layout_width="0dp"
-                             android:layout_height="wrap_content"
-                             android:layout_marginStart="8dp"
-                             android:layout_marginTop="8dp"
--                            android:text="H. Ambiente"
-+                            android:text="Humedad Ambiente"
-                             android:textSize="16sp"
--                            app:layout_constraintBottom_toBottomOf="@+id/switchSalinidadGeneral"
-+                            app:layout_constraintEnd_toEndOf="parent"
-+                            app:layout_constraintStart_toStartOf="parent"
-+                            app:layout_constraintTop_toTopOf="parent" />
-+                            <!--app:layout_constraintBottom_toBottomOf="@+id/switchSalinidadGeneral"-->
-                             app:layout_constraintStart_toStartOf="parent"
-                             app:layout_constraintTop_toTopOf="parent" />
- 
--                        <Switch
-+                        <!--<Switch
-                             android:id="@+id/switchSalinidadGeneral"
-                             android:layout_width="wrap_content"
-                             android:layout_height="wrap_content"
-@@ -267,7 +276,7 @@
-                             android:textColorLink="#a0c63e"
-                             android:textSize="8sp"
-                             app:layout_constraintEnd_toEndOf="parent"
--                            app:layout_constraintTop_toTopOf="parent" />
-+                            app:layout_constraintTop_toTopOf="parent" />-->
- 
-                         <TextView
-                             android:id="@+id/medidaSalinidadGeneral"
-Index: app/src/main/res/layout/fragment_posts_community.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.Foro.main.Community.Posts.PostsCommunityFragment\">\r\n\r\n    <ScrollView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n        <androidx.constraintlayout.widget.ConstraintLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/textView29\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"30dp\"\r\n                android:text=\"@string/posts_text1\"\r\n                android:textSize=\"18sp\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n            <androidx.recyclerview.widget.RecyclerView\r\n                android:id=\"@+id/post_community\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"20dp\"\r\n                android:layout_marginBottom=\"40dp\"\r\n                android:isScrollContainer=\"false\"\r\n                android:nestedScrollingEnabled=\"false\"\r\n                app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toBottomOf=\"@+id/textView29\" />\r\n        </androidx.constraintlayout.widget.ConstraintLayout>\r\n    </ScrollView>\r\n</FrameLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_posts_community.xml	(revision 97b60040cb9ddffbf7eb424364e4fc4451452801)
-+++ app/src/main/res/layout/fragment_posts_community.xml	(date 1611013095463)
-@@ -6,14 +6,13 @@
-     android:layout_height="match_parent"
-     tools:context=".ui.Foro.main.Community.Posts.PostsCommunityFragment">
- 
--    <ScrollView
-+    <androidx.swiperefreshlayout.widget.SwipeRefreshLayout
-+        android:id="@+id/swipeToRefresh"
-         android:layout_width="match_parent"
-         android:layout_height="match_parent">
--
-         <androidx.constraintlayout.widget.ConstraintLayout
-             android:layout_width="match_parent"
--            android:layout_height="wrap_content">
--
-+            android:layout_height="match_parent">
-             <TextView
-                 android:id="@+id/textView29"
-                 android:layout_width="wrap_content"
-@@ -28,15 +27,17 @@
-             <androidx.recyclerview.widget.RecyclerView
-                 android:id="@+id/post_community"
-                 android:layout_width="match_parent"
--                android:layout_height="wrap_content"
-+                android:layout_height="0dp"
-                 android:layout_marginTop="20dp"
--                android:layout_marginBottom="40dp"
--                android:isScrollContainer="false"
--                android:nestedScrollingEnabled="false"
-+                android:layout_marginBottom="70dp"
-                 app:layout_constraintBottom_toBottomOf="parent"
-                 app:layout_constraintEnd_toEndOf="parent"
-                 app:layout_constraintStart_toStartOf="parent"
-                 app:layout_constraintTop_toBottomOf="@+id/textView29" />
-         </androidx.constraintlayout.widget.ConstraintLayout>
--    </ScrollView>
-+
-+    </androidx.swiperefreshlayout.widget.SwipeRefreshLayout>
-+
-+
-+
- </FrameLayout>
-\ No newline at end of file
-Index: app/src/main/res/layout/fragment_planta1.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    tools:context=\".ui.dashboard.DashboardFragment\">\n\n\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\n\n        <RelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginLeft=\"20dp\"\n            android:layout_marginTop=\"10dp\"\n            android:layout_marginRight=\"20dp\">\n\n            <TextView\n                android:id=\"@+id/textDashboard\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Dashboard  >\"\n\n                android:textSize=\"19sp\" />\n\n            <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_below=\"@+id/textDashboard\"\n                android:text=\"4 sensores\"\n\n                android:textSize=\"14sp\" />\n\n            <!--<ImageView\n                android:layout_width=\"62dp\"\n                android:layout_height=\"62dp\"\n                android:layout_alignParentRight=\"true\"\n                android:src=\"@drawable/ic_sun\" />-->\n        </RelativeLayout>\n        <GridLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:columnCount=\"2\"\n            android:rowCount=\"3\"\n            android:alignmentMode=\"alignMargins\"\n            android:columnOrderPreserved=\"false\">\n            <!--temperatura-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Temperatura\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchTemperatura\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchTemperatura\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:buttonTint=\"#FFFFFF\"\n                            android:checked=\"true\"\n                            android:fitsSystemWindows=\"false\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaTemperatura\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"34°C\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textTemperatura\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textTemperatura\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgTemperatura\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_temperature\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaTemperatura\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaTemperatura\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--humedad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Humedad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchHumedad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchHumedad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaHumedad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"68%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textHumedad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textHumedad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgHumedad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_humidity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaHumedad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaHumedad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--salinidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"H. Ambiente\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchSalinidad\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchSalinidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidaSalinidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"10%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textSalinidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textSalinidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgSalinidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_humedad_ambiente\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaSalinidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaSalinidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n            <!--Luminosidad-->\n            <androidx.cardview.widget.CardView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_columnWeight=\"1\"\n                android:layout_rowWeight=\"1\"\n                app:cardElevation=\"6dp\"\n                app:cardCornerRadius=\"12dp\"\n                android:layout_marginBottom=\"12dp\"\n                android:layout_margin=\"12dp\"\n                >\n\n                <LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n\n                    android:orientation=\"vertical\"\n                    android:padding=\"2dp\">\n\n                    <androidx.constraintlayout.widget.ConstraintLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_marginBottom=\"12dp\"\n                        android:layout_height=\"match_parent\">\n\n\n                        <TextView\n                            android:id=\"@+id/textLuminosidad\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginStart=\"8dp\"\n                            android:layout_marginTop=\"8dp\"\n                            android:text=\"Luminosidad\"\n                            android:textSize=\"16sp\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchLuminosidadPlamta1\"\n                            app:layout_constraintStart_toStartOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <Switch\n                            android:id=\"@+id/switchLuminosidadPlamta1\"\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_marginTop=\"8dp\"\n                            android:layout_marginEnd=\"8dp\"\n                            android:checked=\"true\"\n                            android:textColorHighlight=\"#FFFFFF\"\n                            android:textColorLink=\"#a0c63e\"\n                            android:textSize=\"8sp\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintTop_toTopOf=\"parent\" />\n\n                        <TextView\n                            android:id=\"@+id/medidasLuminosidad\"\n                            android:layout_width=\"90dp\"\n                            android:layout_height=\"39dp\"\n                            android:layout_marginTop=\"24dp\"\n                            android:text=\"90%\"\n                            android:textSize=\"31sp\"\n                            app:layout_constraintStart_toStartOf=\"@+id/textLuminosidad\"\n                            app:layout_constraintTop_toBottomOf=\"@+id/textLuminosidad\" />\n\n                        <ImageView\n                            android:id=\"@+id/imgLuminosidad\"\n                            android:layout_width=\"53dp\"\n                            android:layout_height=\"55dp\"\n                            android:layout_marginEnd=\"1dp\"\n                            android:src=\"@drawable/icons_luminosity\"\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintEnd_toEndOf=\"parent\"\n                            app:layout_constraintStart_toEndOf=\"@+id/medidasLuminosidad\"\n                            app:layout_constraintTop_toTopOf=\"@+id/medidasLuminosidad\" />\n                    </androidx.constraintlayout.widget.ConstraintLayout>\n                </LinearLayout>\n            </androidx.cardview.widget.CardView>\n\n\n\n\n        </GridLayout>\n\n    </LinearLayout>\n</ScrollView>\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_planta1.xml	(revision 97b60040cb9ddffbf7eb424364e4fc4451452801)
-+++ app/src/main/res/layout/fragment_planta1.xml	(date 1610994569689)
-@@ -75,17 +75,21 @@
- 
-                         <TextView
-                             android:id="@+id/textTemperatura"
--                            android:layout_width="wrap_content"
-+                            android:layout_width="0dp"
-                             android:layout_height="wrap_content"
-                             android:layout_marginStart="8dp"
-                             android:layout_marginTop="8dp"
-+                            android:layout_marginEnd="8dp"
-                             android:text="Temperatura"
-                             android:textSize="16sp"
--                            app:layout_constraintBottom_toBottomOf="@+id/switchTemperatura"
-+                            app:layout_constraintEnd_toEndOf="parent"
-+                            app:layout_constraintStart_toStartOf="parent"
-+                            app:layout_constraintTop_toTopOf="parent" />
-+                            <!--app:layout_constraintBottom_toBottomOf="@+id/switchTemperatura"-->
-                             app:layout_constraintStart_toStartOf="parent"
-                             app:layout_constraintTop_toTopOf="parent" />
- 
--                        <Switch
-+                        <!--<Switch
-                             android:id="@+id/switchTemperatura"
-                             android:layout_width="wrap_content"
-                             android:layout_height="wrap_content"
-@@ -97,7 +101,7 @@
-                             android:textColorLink="#a0c63e"
-                             android:textSize="8sp"
-                             app:layout_constraintEnd_toEndOf="parent"
--                            app:layout_constraintTop_toTopOf="parent" />
-+                            app:layout_constraintTop_toTopOf="parent" />-->
- 
-                         <TextView
-                             android:id="@+id/medidaTemperatura"
-@@ -149,17 +153,21 @@
- 
-                         <TextView
-                             android:id="@+id/textHumedad"
--                            android:layout_width="wrap_content"
-+                            android:layout_width="0dp"
-                             android:layout_height="wrap_content"
-                             android:layout_marginStart="8dp"
-                             android:layout_marginTop="8dp"
-+                            android:layout_marginEnd="8dp"
-                             android:text="Humedad"
-                             android:textSize="16sp"
--                            app:layout_constraintBottom_toBottomOf="@+id/switchHumedad"
-+                            app:layout_constraintEnd_toEndOf="parent"
-+                            app:layout_constraintStart_toStartOf="parent"
-+                            app:layout_constraintTop_toTopOf="parent" />
-+                            <!--app:layout_constraintBottom_toBottomOf="@+id/switchHumedad"-->
-                             app:layout_constraintStart_toStartOf="parent"
-                             app:layout_constraintTop_toTopOf="parent" />
- 
--                        <Switch
-+                        <!--<Switch
-                             android:id="@+id/switchHumedad"
-                             android:layout_width="wrap_content"
-                             android:layout_height="wrap_content"
-@@ -169,7 +177,7 @@
-                             android:textColorLink="#a0c63e"
-                             android:textSize="8sp"
-                             app:layout_constraintEnd_toEndOf="parent"
--                            app:layout_constraintTop_toTopOf="parent" />
-+                            app:layout_constraintTop_toTopOf="parent" />-->
- 
-                         <TextView
-                             android:id="@+id/medidaHumedad"
-@@ -221,17 +229,21 @@
- 
-                         <TextView
-                             android:id="@+id/textSalinidad"
--                            android:layout_width="wrap_content"
-+                            android:layout_width="0dp"
-                             android:layout_height="wrap_content"
-                             android:layout_marginStart="8dp"
-                             android:layout_marginTop="8dp"
--                            android:text="H. Ambiente"
-+                            android:layout_marginEnd="8dp"
-+                            android:text="Humedad Ambiente"
-                             android:textSize="16sp"
--                            app:layout_constraintBottom_toBottomOf="@+id/switchSalinidad"
-+                            app:layout_constraintEnd_toEndOf="parent"
-+                            app:layout_constraintStart_toStartOf="parent"
-+                            app:layout_constraintTop_toTopOf="parent" />
-+                            <!--app:layout_constraintBottom_toBottomOf="@+id/switchSalinidad"-->
-                             app:layout_constraintStart_toStartOf="parent"
-                             app:layout_constraintTop_toTopOf="parent" />
- 
--                        <Switch
-+                        <!--<Switch
-                             android:id="@+id/switchSalinidad"
-                             android:layout_width="wrap_content"
-                             android:layout_height="wrap_content"
-@@ -241,7 +253,7 @@
-                             android:textColorLink="#a0c63e"
-                             android:textSize="8sp"
-                             app:layout_constraintEnd_toEndOf="parent"
--                            app:layout_constraintTop_toTopOf="parent" />
-+                            app:layout_constraintTop_toTopOf="parent" />-->
- 
-                         <TextView
-                             android:id="@+id/medidaSalinidad"
-Index: github.properties
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>gpr.usr = 61469172\ngpr.key = 72a0f63b7097b413e8ff78a7dd6ca9412aaf232c
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>windows-1252
-===================================================================
---- github.properties	(revision 97b60040cb9ddffbf7eb424364e4fc4451452801)
-+++ github.properties	(date 1610820456596)
-@@ -1,2 +1,2 @@
--gpr.usr = 61469172
--gpr.key = 72a0f63b7097b413e8ff78a7dd6ca9412aaf232c
-\ No newline at end of file
-+gpr.usr = 61473165
-+gpr.key = 9671a8c2e26934b214e49dd99b96077296ee2aca
-\ No newline at end of file
-Index: app/src/main/java/com/example/infinitycrop/ui/Foro/main/Home/HomeForoFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.Foro.main.Home;\r\n\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.Foro.lets_start.EditCommunity;\r\nimport com.example.infinitycrop.ui.Foro.lets_start.choose_community;\r\nimport com.example.infinitycrop.ui.Foro.lets_start.rv_community.CommunityModel;\r\nimport com.example.infinitycrop.ui.Foro.lets_start.welcome_forum;\r\nimport com.example.infinitycrop.ui.Foro.main.Community.CommunityMain;\r\nimport com.example.infinitycrop.ui.Foro.main.Home.RVs.PostModel;\r\nimport com.example.infinitycrop.ui.Foro.main.Home.RVs.RVFollowed.AdapterFollowedCmty;\r\nimport com.example.infinitycrop.ui.Foro.main.Home.RVs.RvPost.AdapterPost;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.android.material.bottomsheet.BottomSheetDialog;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.google.firebase.firestore.QueryDocumentSnapshot;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.makeramen.roundedimageview.RoundedImageView;\r\nimport com.squareup.picasso.Picasso;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashSet;\r\nimport java.util.List;\r\nimport java.util.Set;\r\nimport java.util.zip.CheckedOutputStream;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link HomeForoFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class HomeForoFragment extends Fragment {\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public HomeForoFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment HomeForoFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static HomeForoFragment newInstance(String param1, String param2) {\r\n        HomeForoFragment fragment = new HomeForoFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    //attributes\r\n    //Rv\r\n    private RecyclerView followed_comunities;\r\n    private AdapterFollowedCmty adapterFollowedCmty;\r\n    private RecyclerView followed_posts;\r\n    private AdapterPost adapterPost;\r\n    //firebase\r\n    private FirebaseFirestore db;\r\n    private FirebaseAuth firebaseAuth;\r\n    private String uid;\r\n\r\n    //List\r\n    private List<CommunityModel> communityModels= new ArrayList<>();\r\n    //Set para que no se repitan las id de las comunidades y que no se dupliquen\r\n    private Set<String> cimmunitiesId = new HashSet<>();\r\n    private List<PostModel> posts= new ArrayList<>();\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_home_foro, container, false);\r\n        //firebase\r\n        db=FirebaseFirestore.getInstance();\r\n        firebaseAuth=FirebaseAuth.getInstance();\r\n        uid=firebaseAuth.getUid();\r\n        //rv declaration\r\n        followed_comunities=v.findViewById(R.id.followed_communities);\r\n        followed_posts=v.findViewById(R.id.followed_posts);\r\n        initRvFollowedCommunities();\r\n        initRvFollowedPosts();\r\n        getIdFollowedCommunities();\r\n        return v;\r\n    }\r\n    private void initRvFollowedCommunities(){\r\n        followed_comunities.setHasFixedSize(true);\r\n        followed_comunities.setLayoutManager(new LinearLayoutManager(getContext(),LinearLayoutManager.HORIZONTAL,false));\r\n    }\r\n    private void getIdFollowedCommunities(){\r\n        db.collection(\"Foro user\").document(uid).collection(\"Following\")\r\n                .addSnapshotListener(new EventListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable QuerySnapshot value,\r\n                                        @Nullable FirebaseFirestoreException e) {\r\n                        if (e != null) {\r\n                            return;\r\n                        }\r\n                        if(value!=null){\r\n                            cimmunitiesId.clear();\r\n                            for (QueryDocumentSnapshot doc : value) {\r\n                                cimmunitiesId.add(doc.getId());\r\n                            }\r\n                            //guardo en la lista todas las comunidades que ha creado el user logged\r\n                            db.collection(\"Community\")\r\n                                    .whereEqualTo(\"creator\",uid)\r\n                                    .addSnapshotListener(new EventListener<QuerySnapshot>() {\r\n                                        @Override\r\n                                        public void onEvent(@Nullable QuerySnapshot value,\r\n                                                            @Nullable FirebaseFirestoreException e) {\r\n                                            if (e != null) {\r\n                                                return;\r\n                                            }\r\n\r\n                                            for (QueryDocumentSnapshot doc : value) {\r\n                                                cimmunitiesId.add(doc.getId());\r\n                                            }\r\n                                            getFollowedCommunities();\r\n                                            getFollowedPosts();\r\n\r\n                                        }\r\n                                    });\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n    private void getFollowedCommunities(){\r\n        //guardo en la lista todos los comunidades que se ha suscrito\r\n        db.collection(\"Community\")\r\n                .addSnapshotListener(new EventListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable QuerySnapshot value,\r\n                                        @Nullable FirebaseFirestoreException e) {\r\n                        if (e != null) {\r\n                            return;\r\n                        }\r\n                        if(value!=null){\r\n                            communityModels.clear();\r\n                            for (QueryDocumentSnapshot doc : value) {\r\n                                for(String id: cimmunitiesId){\r\n                                    if(id.equals(doc.getId())){\r\n                                        CommunityModel communityModel=doc.toObject(CommunityModel.class);\r\n                                        communityModel.setUid(doc.getId());\r\n                                        communityModels.add(communityModel);\r\n                                    }\r\n                                }\r\n                            }\r\n                            adapterFollowedCmty= new AdapterFollowedCmty(communityModels,getContext());\r\n                            onclickAdapterFollowedCmty();\r\n                            followed_comunities.setAdapter(adapterFollowedCmty);\r\n                        }\r\n                    }\r\n                });\r\n\r\n    }\r\n    private void onclickAdapterFollowedCmty(){\r\n        adapterFollowedCmty.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                int position=followed_comunities.getChildLayoutPosition(v);\r\n                CommunityModel community=communityModels.get(position);\r\n                bottomSheetCommunity(community,position);\r\n            }\r\n        });\r\n    }\r\n    //posts rv\r\n    private void initRvFollowedPosts(){\r\n        followed_posts.setHasFixedSize(false);\r\n        followed_posts.setLayoutManager(new LinearLayoutManager(getContext(),LinearLayoutManager.VERTICAL,false));\r\n    }\r\n    private void getFollowedPosts(){\r\n        posts.clear();\r\n        //get all the post where i was subscribed.\r\n        db.collection(\"Posts\")\r\n                .get()\r\n                .addOnCompleteListener(new OnCompleteListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<QuerySnapshot> task) {\r\n                        if (task.isSuccessful()) {\r\n                            for (QueryDocumentSnapshot document : task.getResult()) {\r\n                                for(String id: cimmunitiesId){\r\n                                    if(document.getString(\"community\").equals(id)){\r\n                                        PostModel postModel=document.toObject(PostModel.class);\r\n                                        postModel.setUid(document.getId().toString());\r\n                                        posts.add(postModel);\r\n                                    }\r\n                                }\r\n                            }\r\n                            adapterPost=new AdapterPost(posts,getContext());\r\n                            followed_posts.setAdapter(adapterPost);\r\n                        } else {\r\n\r\n                        }\r\n                    }\r\n                });\r\n\r\n    }\r\n\r\n    //bottom sheet community\r\n    private void bottomSheetCommunity(CommunityModel communityModel, final int position){\r\n        final String uiDocument=communityModel.getUid();\r\n        final BottomSheetDialog bottomSheetDialog=new BottomSheetDialog(getContext(),R.style.BottomSheetDialogTheme);\r\n        bottomSheetDialog.setContentView(R.layout.bottom_sheet_community);\r\n        final AlertDialog.Builder builder = new AlertDialog.Builder(getContext());\r\n        if(communityModel.getCreator().equals(uid)){ //cuando haces click sobre tu comunidad\r\n            //variables from the botomSheet layout\r\n            TextView name=bottomSheetDialog.findViewById(R.id.name_bS_community);\r\n            TextView name2=bottomSheetDialog.findViewById(R.id.name_bS_community2);\r\n            name.setText(R.string.home_foro2);\r\n            name.setTextSize(14);\r\n            name.setTextColor(getResources().getColor(R.color.colorPrimaryDashboard));\r\n            name2.setText(communityModel.getName());\r\n            RoundedImageView img=bottomSheetDialog.findViewById(R.id.img_bS_community);\r\n            Picasso.get().load(communityModel.getImg()).into(img);\r\n            TextView desc=bottomSheetDialog.findViewById(R.id.desc_bS_community);\r\n            desc.setText(communityModel.getDescription());\r\n            TextView posts=bottomSheetDialog.findViewById(R.id.num_posts);\r\n            String post= String.valueOf(communityModel.getPosts());\r\n            posts.setText(post);\r\n            TextView followers=bottomSheetDialog.findViewById(R.id.num_followers);\r\n            String followersString= String.valueOf(communityModel.getFollowers());\r\n            followers.setText(followersString);\r\n            //button editar , eliminar\r\n            final Button button=bottomSheetDialog.findViewById(R.id.btn_follow);\r\n            button.setText(R.string.community_sheet_text7);\r\n            button.setBackgroundResource(R.drawable.button_action_machine);\r\n            button.setTextColor(getResources().getColor(R.color.colorPrimaryDashboard));\r\n            button.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    //Intent\r\n                    Intent intent = new Intent(getContext(), EditCommunity.class);\r\n                    intent.putExtra(\"community\", uiDocument);\r\n                    startActivity(intent);\r\n                    bottomSheetDialog.dismiss();\r\n                }\r\n            });\r\n            name.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    initComunityLayout(uiDocument);\r\n                    bottomSheetDialog.dismiss();\r\n                }\r\n            });\r\n            bottomSheetDialog.findViewById(R.id.btn_cancelBottomSheet).setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    bottomSheetDialog.dismiss();\r\n                }\r\n            });\r\n\r\n        }else{ //cuando hago click en otra comunidad\r\n            //variables from the botomSheet layout\r\n            final int suscriptores=communityModel.getFollowers();\r\n            TextView name=bottomSheetDialog.findViewById(R.id.name_bS_community);\r\n            TextView name2=bottomSheetDialog.findViewById(R.id.name_bS_community2);\r\n            name.setText(R.string.home_foro2);\r\n            name.setTextSize(14);\r\n            name.setTextColor(getResources().getColor(R.color.colorPrimaryDashboard));\r\n            name2.setText(communityModel.getName());\r\n            RoundedImageView img=bottomSheetDialog.findViewById(R.id.img_bS_community);\r\n            Picasso.get().load(communityModel.getImg()).into(img);\r\n            TextView desc=bottomSheetDialog.findViewById(R.id.desc_bS_community);\r\n            desc.setText(communityModel.getDescription());\r\n            TextView posts=bottomSheetDialog.findViewById(R.id.num_posts);\r\n            String post= String.valueOf(communityModel.getPosts());\r\n            posts.setText(post);\r\n            TextView followers=bottomSheetDialog.findViewById(R.id.num_followers);\r\n            String followersString= String.valueOf(communityModel.getFollowers());\r\n            followers.setText(followersString);\r\n            //button follow , unfollow\r\n            final Button button=bottomSheetDialog.findViewById(R.id.btn_follow);\r\n            db.collection(\"Foro user\").document(uid)\r\n                    .collection(\"Following\").document(uiDocument)\r\n                    .addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                        @Override\r\n                        public void onEvent(@Nullable DocumentSnapshot value, @Nullable FirebaseFirestoreException error) {\r\n                            if(value.exists()){\r\n                                button.setText(R.string.community_sheet_text5);\r\n                                button.setBackgroundResource(R.drawable.button_unfollow);\r\n                                button.setTextColor(getResources().getColor(R.color.black));\r\n                            }else{\r\n                                button.setText(R.string.community_sheet_text4);\r\n                            }\r\n                        }\r\n                    });\r\n            button.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    //ya es suscrito\r\n                    String textButton=button.getText().toString();\r\n                    String ifText=getResources().getString(R.string.community_sheet_text5);\r\n                    if(textButton.equals(ifText)){\r\n                        //eliminar de la coleccion following de Foro user\r\n                        adapterFollowedCmty.unFollow(position,uiDocument,suscriptores);\r\n                    }else{ //no esta suscrito\r\n                        //añadir comunidad a la coleccion Following\r\n                        //communitiesAdapter.follow(position,uiDocument,suscriptores);\r\n                    }\r\n                    bottomSheetDialog.dismiss();\r\n                }\r\n            });\r\n            name.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    initComunityLayout(uiDocument);\r\n                    bottomSheetDialog.dismiss();\r\n                }\r\n            });\r\n            bottomSheetDialog.findViewById(R.id.btn_cancelBottomSheet).setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    bottomSheetDialog.dismiss();\r\n                }\r\n            });\r\n        }\r\n        bottomSheetDialog.show();\r\n    }\r\n    //funcion que abre el layout de comunidadMain\r\n    private void initComunityLayout(String uiDocument){\r\n        Intent intent = new Intent(getActivity(), CommunityMain.class);\r\n        intent.putExtra(\"community\", uiDocument);\r\n        startActivity(intent);\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/Foro/main/Home/HomeForoFragment.java	(revision 97b60040cb9ddffbf7eb424364e4fc4451452801)
-+++ app/src/main/java/com/example/infinitycrop/ui/Foro/main/Home/HomeForoFragment.java	(date 1611062751047)
-@@ -10,6 +10,7 @@
- import androidx.fragment.app.Fragment;
- import androidx.recyclerview.widget.LinearLayoutManager;
- import androidx.recyclerview.widget.RecyclerView;
-+import androidx.swiperefreshlayout.widget.SwipeRefreshLayout;
- 
- import android.view.LayoutInflater;
- import android.view.View;
-@@ -35,6 +36,7 @@
- import com.google.firebase.firestore.EventListener;
- import com.google.firebase.firestore.FirebaseFirestore;
- import com.google.firebase.firestore.FirebaseFirestoreException;
-+import com.google.firebase.firestore.Query;
- import com.google.firebase.firestore.QueryDocumentSnapshot;
- import com.google.firebase.firestore.QuerySnapshot;
- import com.google.firebase.storage.FirebaseStorage;
-@@ -113,11 +115,16 @@
-     private Set<String> cimmunitiesId = new HashSet<>();
-     private List<PostModel> posts= new ArrayList<>();
- 
-+    //swipe to refresh
-+    private SwipeRefreshLayout swipeRefreshLayout;
-+
-     @Override
-     public View onCreateView(LayoutInflater inflater, ViewGroup container,
-                              Bundle savedInstanceState) {
-         // Inflate the layout for this fragment
-         View v= inflater.inflate(R.layout.fragment_home_foro, container, false);
-+        //refresh
-+        swipeRefreshLayout=v.findViewById(R.id.swipeToRefreshHomeForo);
-         //firebase
-         db=FirebaseFirestore.getInstance();
-         firebaseAuth=FirebaseAuth.getInstance();
-@@ -128,6 +135,15 @@
-         initRvFollowedCommunities();
-         initRvFollowedPosts();
-         getIdFollowedCommunities();
-+        swipeRefreshLayout.setOnRefreshListener(new SwipeRefreshLayout.OnRefreshListener() {
-+            @Override
-+            public void onRefresh() {
-+                getIdFollowedCommunities();
-+                adapterFollowedCmty.notifyDataSetChanged();
-+                adapterPost.notifyDataSetChanged();
-+                swipeRefreshLayout.setRefreshing(false);
-+            }
-+        });
-         return v;
-     }
-     private void initRvFollowedCommunities(){
-Index: app/src/main/res/layout/fragment_home_foro.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.Foro.main.Home.HomeForoFragment\">\r\n\r\n\r\n    <ScrollView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n        <androidx.constraintlayout.widget.ConstraintLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\">\r\n\r\n\r\n            <TextView\r\n                android:id=\"@+id/textView28\"\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginStart=\"20dp\"\r\n                android:layout_marginTop=\"20dp\"\r\n                android:layout_marginEnd=\"20dp\"\r\n                android:text=\"@string/home_foro1\"\r\n                android:textSize=\"15sp\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n            <androidx.recyclerview.widget.RecyclerView\r\n                android:id=\"@+id/followed_communities\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginStart=\"20dp\"\r\n                android:layout_marginTop=\"8dp\"\r\n                android:layout_marginEnd=\"20dp\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toBottomOf=\"@+id/textView28\" />\r\n\r\n            <View\r\n                android:id=\"@+id/view4\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"1dp\"\r\n                android:layout_marginTop=\"10dp\"\r\n                android:background=\"@color/colorPrimaryDark\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintHorizontal_bias=\"0.0\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toBottomOf=\"@+id/followed_communities\" />\r\n\r\n            <androidx.recyclerview.widget.RecyclerView\r\n                android:id=\"@+id/followed_posts\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"10dp\"\r\n                android:layout_marginBottom=\"70dp\"\r\n                android:isScrollContainer=\"false\"\r\n                android:nestedScrollingEnabled=\"false\"\r\n                app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toBottomOf=\"@+id/view4\" />\r\n        </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n    </ScrollView>\r\n\r\n\r\n\r\n</FrameLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_home_foro.xml	(revision 97b60040cb9ddffbf7eb424364e4fc4451452801)
-+++ app/src/main/res/layout/fragment_home_foro.xml	(date 1611013668678)
-@@ -5,14 +5,17 @@
-     android:layout_width="match_parent"
-     android:layout_height="match_parent"
-     tools:context=".ui.Foro.main.Home.HomeForoFragment">
--
--
--    <ScrollView
-+    <androidx.swiperefreshlayout.widget.SwipeRefreshLayout
-+        android:id="@+id/swipeToRefreshHomeForo"
-         android:layout_width="match_parent"
-         android:layout_height="match_parent">
-+
-+        <!--<ScrollView
-+    android:layout_width="match_parent"
-+    android:layout_height="match_parent">-->
-         <androidx.constraintlayout.widget.ConstraintLayout
-             android:layout_width="match_parent"
--            android:layout_height="wrap_content">
-+            android:layout_height="match_parent">
- 
- 
-             <TextView
-@@ -20,7 +23,7 @@
-                 android:layout_width="0dp"
-                 android:layout_height="wrap_content"
-                 android:layout_marginStart="20dp"
--                android:layout_marginTop="20dp"
-+                android:layout_marginTop="10dp"
-                 android:layout_marginEnd="20dp"
-                 android:text="@string/home_foro1"
-                 android:textSize="15sp"
-@@ -43,7 +46,7 @@
-                 android:id="@+id/view4"
-                 android:layout_width="match_parent"
-                 android:layout_height="1dp"
--                android:layout_marginTop="10dp"
-+                android:layout_marginTop="5dp"
-                 android:background="@color/colorPrimaryDark"
-                 app:layout_constraintEnd_toEndOf="parent"
-                 app:layout_constraintHorizontal_bias="0.0"
-@@ -53,19 +56,16 @@
-             <androidx.recyclerview.widget.RecyclerView
-                 android:id="@+id/followed_posts"
-                 android:layout_width="match_parent"
--                android:layout_height="wrap_content"
--                android:layout_marginTop="10dp"
-+                android:layout_height="0dp"
-+                android:layout_marginTop="5dp"
-                 android:layout_marginBottom="70dp"
-                 android:isScrollContainer="false"
--                android:nestedScrollingEnabled="false"
-                 app:layout_constraintBottom_toBottomOf="parent"
-                 app:layout_constraintEnd_toEndOf="parent"
-                 app:layout_constraintStart_toStartOf="parent"
-                 app:layout_constraintTop_toBottomOf="@+id/view4" />
-         </androidx.constraintlayout.widget.ConstraintLayout>
- 
--    </ScrollView>
--
--
--
-+        <!--</ScrollView>-->
-+    </androidx.swiperefreshlayout.widget.SwipeRefreshLayout>
- </FrameLayout>
-\ No newline at end of file
-Index: app/src/main/java/com/example/infinitycrop/ui/Foro/main/Home/RVs/PostModel.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.Foro.main.Home.RVs;\r\n\r\npublic class PostModel {\r\n    private String creator;\r\n    private String community;\r\n    private String tittle;\r\n    private String desc;\r\n    private int likes;\r\n    private String img;\r\n    private String date;\r\n    private String comments;\r\n    private String uid;\r\n\r\n    public PostModel() {\r\n    }\r\n\r\n    public PostModel(String creator, String community, String tittle, String desc, int likes, String img, String date, String comments, String uid) {\r\n        this.creator = creator;\r\n        this.community = community;\r\n        this.tittle = tittle;\r\n        this.desc = desc;\r\n        this.likes = likes;\r\n        this.img = img;\r\n        this.date = date;\r\n        this.comments = comments;\r\n        this.uid = uid;\r\n    }\r\n\r\n    public String getCreator() {\r\n        return creator;\r\n    }\r\n\r\n    public void setCreator(String creator) {\r\n        this.creator = creator;\r\n    }\r\n\r\n    public String getCommunity() {\r\n        return community;\r\n    }\r\n\r\n    public void setCommunity(String community) {\r\n        this.community = community;\r\n    }\r\n\r\n    public String getTittle() {\r\n        return tittle;\r\n    }\r\n\r\n    public void setTittle(String tittle) {\r\n        this.tittle = tittle;\r\n    }\r\n\r\n    public String getDesc() {\r\n        return desc;\r\n    }\r\n\r\n    public void setDesc(String desc) {\r\n        this.desc = desc;\r\n    }\r\n\r\n    public int getLikes() {\r\n        return likes;\r\n    }\r\n\r\n    public void setLikes(int likes) {\r\n        this.likes = likes;\r\n    }\r\n\r\n    public String getImg() {\r\n        return img;\r\n    }\r\n\r\n    public void setImg(String img) {\r\n        this.img = img;\r\n    }\r\n\r\n    public String getDate() {\r\n        return date;\r\n    }\r\n\r\n    public void setDate(String date) {\r\n        this.date = date;\r\n    }\r\n\r\n    public String getComments() {\r\n        return comments;\r\n    }\r\n\r\n    public void setComments(String comments) {\r\n        this.comments = comments;\r\n    }\r\n\r\n    public String getUid() {\r\n        return uid;\r\n    }\r\n\r\n    public void setUid(String uid) {\r\n        this.uid = uid;\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/Foro/main/Home/RVs/PostModel.java	(revision 97b60040cb9ddffbf7eb424364e4fc4451452801)
-+++ app/src/main/java/com/example/infinitycrop/ui/Foro/main/Home/RVs/PostModel.java	(date 1611000883232)
-@@ -1,5 +1,7 @@
- package com.example.infinitycrop.ui.Foro.main.Home.RVs;
- 
-+import com.google.firebase.Timestamp;
-+
- public class PostModel {
-     private String creator;
-     private String community;
-@@ -7,14 +9,14 @@
-     private String desc;
-     private int likes;
-     private String img;
--    private String date;
-+    private Timestamp date;
-     private String comments;
-     private String uid;
- 
-     public PostModel() {
-     }
- 
--    public PostModel(String creator, String community, String tittle, String desc, int likes, String img, String date, String comments, String uid) {
-+    public PostModel(String creator, String community, String tittle, String desc, int likes, String img, Timestamp date, String comments, String uid) {
-         this.creator = creator;
-         this.community = community;
-         this.tittle = tittle;
-@@ -74,11 +76,11 @@
-         this.img = img;
-     }
- 
--    public String getDate() {
-+    public Timestamp getDate() {
-         return date;
-     }
- 
--    public void setDate(String date) {
-+    public void setDate(Timestamp date) {
-         this.date = date;
-     }
- 
-Index: app/src/main/java/com/example/infinitycrop/ui/Foro/main/Home/RVs/RvPost/AdapterPost.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.Foro.main.Home.RVs.RvPost;\r\n\r\nimport android.content.Context;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.Foro.main.Home.RVs.PostModel;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.squareup.picasso.Picasso;\r\n\r\nimport java.util.List;\r\n\r\npublic class AdapterPost extends RecyclerView.Adapter<AdapterPost.PostHolder>{\r\n\r\n    private List<PostModel> postModelList;\r\n    private Context context;\r\n    private FirebaseFirestore db;\r\n\r\n    public AdapterPost(List<PostModel> postModelList, Context context) {\r\n        this.postModelList = postModelList;\r\n        this.context = context;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public PostHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View v= LayoutInflater.from(parent.getContext()).\r\n                inflate(R.layout.post_item,parent,false);\r\n        return new PostHolder(v);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull final PostHolder holder, int position) {\r\n        db=FirebaseFirestore.getInstance();\r\n        final PostModel postModel= postModelList.get(position);\r\n        //img\r\n        final String url=postModel.getImg();\r\n        Picasso.get().load(url).into(holder.img_post);\r\n        //tittle post\r\n        String tittle=postModel.getTittle();\r\n        holder.name_post.setText(tittle);\r\n        //desc\r\n        String desc=postModel.getDesc();\r\n        holder.desc_post.setText(desc);\r\n        //num likes\r\n        int likes=postModel.getLikes();\r\n        String resLikes=likes+\" Likes\";\r\n        holder.numLikes_post.setText(resLikes);\r\n        //get names,img of community, user etc\r\n        db.collection(\"Community\").document(postModel.getCommunity())\r\n                .get().addOnCompleteListener(new OnCompleteListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<DocumentSnapshot> task) {\r\n                if (task.isSuccessful()) {\r\n                    DocumentSnapshot document = task.getResult();\r\n                    if (document.exists()) {\r\n                        String nameCom=document.getString(\"name\");\r\n                        String urlCom=document.getString(\"img\");\r\n                        holder.name_community_post.setText(nameCom);\r\n                        Picasso.get().load(urlCom).into(holder.img_community_post);\r\n                    } else {\r\n\r\n                    }\r\n                } else {\r\n\r\n                }\r\n            }\r\n        });\r\n        db.collection(\"Foro user\").document(postModel.getCreator())\r\n                .get().addOnCompleteListener(new OnCompleteListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<DocumentSnapshot> task) {\r\n                if (task.isSuccessful()) {\r\n                    DocumentSnapshot document = task.getResult();\r\n                    if (document.exists()) {\r\n                        String nameCreator=document.getString(\"name\");\r\n                        holder.creator_community_post.setText(nameCreator);\r\n                    } else {\r\n\r\n                    }\r\n                } else {\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return postModelList.size();\r\n    }\r\n\r\n\r\n    public static class PostHolder extends RecyclerView.ViewHolder{\r\n        protected TextView name_community_post;\r\n        protected TextView creator_community_post;\r\n        protected TextView name_post;\r\n        protected TextView desc_post;\r\n        protected ImageView img_post;\r\n        protected TextView time_post;\r\n        protected ImageView like_post;\r\n        protected ImageView img_community_post;\r\n        protected TextView numLikes_post;\r\n        public PostHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            name_community_post=itemView.findViewById(R.id.name_community_post);\r\n            creator_community_post=itemView.findViewById(R.id.creator_community_post);\r\n            img_community_post=itemView.findViewById(R.id.img_community_post);\r\n            name_post=itemView.findViewById(R.id.name_post);\r\n            desc_post=itemView.findViewById(R.id.desc_post);\r\n            img_post=itemView.findViewById(R.id.img_post);\r\n            time_post=itemView.findViewById(R.id.time_post);\r\n            like_post=itemView.findViewById(R.id.like_post);\r\n            numLikes_post=itemView.findViewById(R.id.numLikes_post);\r\n        }\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/Foro/main/Home/RVs/RvPost/AdapterPost.java	(revision 97b60040cb9ddffbf7eb424364e4fc4451452801)
-+++ app/src/main/java/com/example/infinitycrop/ui/Foro/main/Home/RVs/RvPost/AdapterPost.java	(date 1611071732892)
-@@ -1,6 +1,8 @@
- package com.example.infinitycrop.ui.Foro.main.Home.RVs.RvPost;
- 
- import android.content.Context;
-+import android.content.Intent;
-+import android.text.format.DateUtils;
- import android.view.LayoutInflater;
- import android.view.View;
- import android.view.ViewGroup;
-@@ -11,6 +13,8 @@
- import androidx.recyclerview.widget.RecyclerView;
- 
- import com.example.infinitycrop.R;
-+import com.example.infinitycrop.ui.Foro.lets_start.EditCommunity;
-+import com.example.infinitycrop.ui.Foro.main.Community.CommunityMain;
- import com.example.infinitycrop.ui.Foro.main.Home.RVs.PostModel;
- import com.google.android.gms.tasks.OnCompleteListener;
- import com.google.android.gms.tasks.Task;
-@@ -52,6 +56,11 @@
-         //desc
-         String desc=postModel.getDesc();
-         holder.desc_post.setText(desc);
-+        //time
-+        CharSequence prettyTime = DateUtils.getRelativeDateTimeString(
-+                context, postModel.getDate().toDate().getTime(), DateUtils.SECOND_IN_MILLIS,
-+                DateUtils.WEEK_IN_MILLIS, 0);
-+        holder.time_post.setText(prettyTime);
-         //num likes
-         int likes=postModel.getLikes();
-         String resLikes=likes+" Likes";
-@@ -76,6 +85,15 @@
-                 }
-             }
-         });
-+        //onclick on community
-+        holder.name_community_post.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                Intent intent = new Intent(holder.name_community_post.getContext(), CommunityMain.class);
-+                intent.putExtra("community", postModel.getCommunity());
-+                holder.name_community_post.getContext().startActivity(intent);
-+            }
-+        });
-         db.collection("Foro user").document(postModel.getCreator())
-                 .get().addOnCompleteListener(new OnCompleteListener<DocumentSnapshot>() {
-             @Override
-Index: app/src/main/java/com/example/infinitycrop/ui/service/ServicioMqtt.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.service;\r\n\r\n\r\nimport android.app.Service;\r\nimport android.content.Intent;\r\nimport android.os.IBinder;\r\nimport android.util.Log;\r\nimport android.widget.Toast;\r\n\r\n\r\nimport androidx.annotation.Nullable;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.google.firebase.Timestamp;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\n\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n\r\npublic class ServicioMqtt extends Service implements MqttCallback {\r\n\r\n    public static MqttClient client = null;\r\n    private FirebaseFirestore db;\r\n    private String getId;\r\n\r\n    @Override public void onCreate(){\r\n        Toast.makeText(this,\"Conectando con tu maquina......\", Toast.LENGTH_LONG).show();\r\n        db = FirebaseFirestore.getInstance();\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        // Nos suscribimos al topic rfid\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Suscrito a \" + topicRoot+\"lecturaDatos\");\r\n            client.subscribe(topicRoot+\"lecturaDatos\", Mqtt.qos);\r\n            client.setCallback(this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Suscrito a \" + topicRoot+\"lecturaDatos1\");\r\n            client.subscribe(topicRoot+\"lecturaDatos1\", Mqtt.qos);\r\n            client.setCallback(this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Suscrito a \" + topicRoot+\"lecturaDatos2\");\r\n            client.subscribe(topicRoot+\"lecturaDatos2\", Mqtt.qos);\r\n            client.setCallback(this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public int onStartCommand(Intent intenc, int flags, int idArranque) {\r\n        getId =intenc.getStringExtra(\"machine\");\r\n\r\n        return START_STICKY;\r\n    }\r\n    @Override public void onDestroy() {\r\n\r\n    }\r\n    @Override public IBinder onBind(Intent intencion) {\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n        String payload = new String(message.getPayload());\r\n        String[] parts = payload.split(\"-\");\r\n        String part1 = parts[0];\r\n        String part2 = parts[1];\r\n        String part3 = parts[2];\r\n        String part4 = parts[3];\r\n        String part5 = parts[4];\r\n\r\n        if(topic.equals(topicRoot+\"lecturaDatos\")){\r\n            Map<String, Object> user = new HashMap<>();\r\n            user.put(\"Humedad\", part2);\r\n            user.put(\"Humedad Ambiente\", part3);\r\n            user.put(\"Luminosidad\", part4);\r\n            user.put(\"Temperatura\", part5);\r\n            user.put(\"Fecha\", new Timestamp(new Date()));\r\n            user.put(\"machineId\", part1);\r\n            db.collection(\"Mediciones general\").document(getId).set(user);\r\n        }\r\n        if(topic.equals(topicRoot+\"lecturaDatos1\")){\r\n            Map<String, Object> user = new HashMap<>();\r\n            user.put(\"Humedad\", part2);\r\n            user.put(\"Humedad Ambiente\", part3);\r\n            user.put(\"Luminosidad\", part4);\r\n            user.put(\"Temperatura\", part5);\r\n            user.put(\"Fecha\", new Timestamp(new Date()));\r\n            user.put(\"machineId\", part1);\r\n            db.collection(\"Mediciones planta 1\").document(getId).set(user);\r\n        }\r\n        if(topic.equals(topicRoot+\"lecturaDatos2\")){\r\n            Map<String, Object> user = new HashMap<>();\r\n            user.put(\"Humedad\", part2);\r\n            user.put(\"Humedad Ambiente\", part3);\r\n            user.put(\"Luminosidad\", part4);\r\n            user.put(\"Temperatura\", part5);\r\n            user.put(\"Fecha\", new Timestamp(new Date()));\r\n            user.put(\"machineId\", part1);\r\n            db.collection(\"Mediciones planta 2\").document(getId).set(user);\r\n        }\r\n\r\n        db.collection(\"Mediciones general\").document(getId).addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot value, @Nullable FirebaseFirestoreException error) {\r\n\r\n                //Temperatura\r\n                String temperatura = value.getString(\"Temperatura\");\r\n                Double tempValue = Double.parseDouble(temperatura);\r\n                if (tempValue > 7) {\r\n                    final Map<String, Object> notificacionesTempAlerta = new HashMap<>();\r\n                    notificacionesTempAlerta.put(\"Tipo\", \"1\");\r\n                    notificacionesTempAlerta.put(\"MachineID\", getId);\r\n                    notificacionesTempAlerta.put(\"Fecha\", new Timestamp(new Date()));\r\n                    notificacionesTempAlerta.put(\"Medicion\", \"temperatura\");\r\n\r\n                    db.collection(\"Notificaciones\").add(notificacionesTempAlerta);\r\n                }\r\n\r\n                if (tempValue > 3 && tempValue < 6) {\r\n\r\n                    final Map<String, Object> notificacionesTempAviso = new HashMap<>();\r\n                    notificacionesTempAviso.put(\"Tipo\", \"2\");\r\n                    notificacionesTempAviso.put(\"MachineID\", getId);\r\n                    notificacionesTempAviso.put(\"Fecha\", new Timestamp(new Date()));\r\n                    notificacionesTempAviso.put(\"Medicion\", \"temperatura\");\r\n\r\n                    db.collection(\"Notificaciones\").add(notificacionesTempAviso);\r\n                }\r\n\r\n\r\n                //Humedad\r\n                String humedad = value.getString(\"Humedad\");\r\n                Double humedadValue = Double.parseDouble(humedad);\r\n                if (humedadValue > 13) {\r\n                    final Map<String, Object> notificacionesHumedadAlerta = new HashMap<>();\r\n                    notificacionesHumedadAlerta.put(\"Tipo\", \"1\");\r\n                    notificacionesHumedadAlerta.put(\"MachineID\", getId);\r\n                    notificacionesHumedadAlerta.put(\"Fecha\", new Timestamp(new Date()));\r\n                    notificacionesHumedadAlerta.put(\"Medicion\", \"humedad\");\r\n\r\n                    db.collection(\"Notificaciones\").add(notificacionesHumedadAlerta);\r\n                }\r\n\r\n                if (humedadValue > 5 && humedadValue < 8) {\r\n                    final Map<String, Object> notificacionesHumedadAviso = new HashMap<>();\r\n                    notificacionesHumedadAviso.put(\"Tipo\", \"2\");\r\n                    notificacionesHumedadAviso.put(\"MachineID\", getId);\r\n                    notificacionesHumedadAviso.put(\"Fecha\", new Timestamp(new Date()));\r\n                    notificacionesHumedadAviso.put(\"Medicion\", \"humedad\");\r\n\r\n                    db.collection(\"Notificaciones\").add(notificacionesHumedadAviso);\r\n\r\n                }\r\n\r\n\r\n                //Humedad Ambiente\r\n                String humedadAmb = value.getString(\"Humedad Ambiente\");\r\n                Double humedadAmbValue = Double.parseDouble(humedadAmb);\r\n                if (humedadAmbValue > 13) {\r\n                    final Map<String, Object> notificacionesHumedadAmbAlerta = new HashMap<>();\r\n                    notificacionesHumedadAmbAlerta.put(\"Tipo\", \"1\");\r\n                    notificacionesHumedadAmbAlerta.put(\"MachineID\", getId);\r\n                    notificacionesHumedadAmbAlerta.put(\"Fecha\", new Timestamp(new Date()));\r\n                    notificacionesHumedadAmbAlerta.put(\"Medicion\", \"humedad ambiente\");\r\n\r\n                    db.collection(\"Notificaciones\").add(notificacionesHumedadAmbAlerta);\r\n\r\n                }\r\n                if (humedadAmbValue > 5 && humedadAmbValue < 12) {\r\n                    final Map<String, Object> notificacionesHumedadAmbAviso = new HashMap<>();\r\n                    notificacionesHumedadAmbAviso.put(\"Tipo\", \"2\");\r\n                    notificacionesHumedadAmbAviso.put(\"MachineID\", getId);\r\n                    notificacionesHumedadAmbAviso.put(\"Fecha\", new Timestamp(new Date()));\r\n                    notificacionesHumedadAmbAviso.put(\"Medicion\", \"humedad ambiente\");\r\n\r\n\r\n                    db.collection(\"Notificaciones\").add(notificacionesHumedadAmbAviso);\r\n                }\r\n\r\n\r\n                //Luminosidad\r\n                String luminosidad = value.getString(\"Luminosidad\");\r\n                Double luminosidadValue = Double.parseDouble(luminosidad);\r\n\r\n                if (luminosidadValue > 54) {\r\n                    final Map<String, Object> notificacionesLuminosidadAlerta = new HashMap<>();\r\n                    notificacionesLuminosidadAlerta.put(\"Tipo\", \"1\");\r\n                    notificacionesLuminosidadAlerta.put(\"MachineID\", getId);\r\n                    notificacionesLuminosidadAlerta.put(\"Fecha\", new Timestamp(new Date()));\r\n                    notificacionesLuminosidadAlerta.put(\"Medicion\", \"luminosidad\");\r\n\r\n                    db.collection(\"Notificaciones\").add(notificacionesLuminosidadAlerta);\r\n                }\r\n                if (luminosidadValue > 36 && luminosidadValue < 47) {\r\n                    final Map<String, Object> notificacionesLuminosidadAviso = new HashMap<>();\r\n                    notificacionesLuminosidadAviso.put(\"Tipo\", \"2\");\r\n                    notificacionesLuminosidadAviso.put(\"MachineID\", getId);\r\n                    notificacionesLuminosidadAviso.put(\"Fecha\", new Timestamp(new Date()));\r\n                    notificacionesLuminosidadAviso.put(\"Medicion\", \"luminosidad\");\r\n\r\n                    db.collection(\"Notificaciones\").add(notificacionesLuminosidadAviso);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/service/ServicioMqtt.java	(revision 97b60040cb9ddffbf7eb424364e4fc4451452801)
-+++ app/src/main/java/com/example/infinitycrop/ui/service/ServicioMqtt.java	(date 1611084481785)
-@@ -8,10 +8,16 @@
- import android.widget.Toast;
- 
- 
-+import androidx.annotation.NonNull;
- import androidx.annotation.Nullable;
- 
- import com.example.comun.Mqtt;
- import com.google.firebase.Timestamp;
-+import com.google.firebase.database.DataSnapshot;
-+import com.google.firebase.database.DatabaseError;
-+import com.google.firebase.database.DatabaseReference;
-+import com.google.firebase.database.FirebaseDatabase;
-+import com.google.firebase.database.ValueEventListener;
- import com.google.firebase.firestore.DocumentSnapshot;
- import com.google.firebase.firestore.EventListener;
- import com.google.firebase.firestore.FirebaseFirestore;
-@@ -38,7 +44,7 @@
-     public static MqttClient client = null;
-     private FirebaseFirestore db;
-     private String getId;
--
-+    private DatabaseReference databaseReference;
-     @Override public void onCreate(){
-         Toast.makeText(this,"Conectando con tu maquina......", Toast.LENGTH_LONG).show();
-         db = FirebaseFirestore.getInstance();
-@@ -81,11 +87,91 @@
-         } catch (MqttException e) {
-             Log.e(Mqtt.TAG, "Error al suscribir.", e);
-         }
-+
-+        //notificaciones
-+
-     }
- 
-     @Override
-     public int onStartCommand(Intent intenc, int flags, int idArranque) {
-         getId =intenc.getStringExtra("machine");
-+        databaseReference= FirebaseDatabase.getInstance().getReference();
-+        //lectura real-time database
-+        databaseReference.child("Mediciones general")
-+                .child(getId).addValueEventListener(new ValueEventListener() {
-+            @Override
-+            public void onDataChange(@NonNull DataSnapshot snapshot) {
-+                if(snapshot.exists()){
-+                    String luz= snapshot.child("Luminosidad").getValue().toString();
-+                    String humedad=snapshot.child("MediaHumedad").getValue().toString();
-+                    String temper=snapshot.child("MediaTemperatura").getValue().toString();
-+                    final Map<String, Object> a = new HashMap<>();
-+                    a.put("Humedad", humedad);
-+                    a.put("Luminosidad", luz);
-+                    a.put("Temperatura", temper);
-+                    a.put("Fecha", new Timestamp(new Date()));
-+                    a.put("machineId", getId);
-+                    db.collection("Mediciones general").document(getId)
-+                            .set(a);
-+
-+                    db.collection("Mediciones").add(a);
-+                }
-+            }
-+            @Override
-+            public void onCancelled(@NonNull DatabaseError error) {
-+
-+            }
-+        });
-+        databaseReference.child("Mediciones nivel 1")
-+                .child(getId).addValueEventListener(new ValueEventListener() {
-+            @Override
-+            public void onDataChange(@NonNull DataSnapshot snapshot) {
-+                if(snapshot.exists()){
-+                    String humedadAmbiente= snapshot.child("HumedadAmbiente").getValue().toString();
-+                    String humedad=snapshot.child("Humedad").getValue().toString();
-+                    String temper=snapshot.child("TemperaturaAmbiente").getValue().toString();
-+                    String pres1=snapshot.child("Presencia1").getValue().toString();
-+                    String pres2=snapshot.child("Presencia2").getValue().toString();
-+                    String pres3=snapshot.child("Presencia3").getValue().toString();
-+                    final Map<String, Object> a = new HashMap<>();
-+                    a.put("Humedad", humedad);
-+                    a.put("Humedad Ambiente", humedadAmbiente);
-+                    a.put("Temperatura", temper);
-+                    a.put("Fecha", new Timestamp(new Date()));
-+                    a.put("machineId", getId);
-+                    db.collection("Mediciones planta 1").document(getId)
-+                            .set(a);
-+                }
-+            }
-+            @Override
-+            public void onCancelled(@NonNull DatabaseError error) {
-+
-+            }
-+        });
-+        databaseReference.child("Mediciones nivel 2")
-+                .child(getId).addValueEventListener(new ValueEventListener() {
-+            @Override
-+            public void onDataChange(@NonNull DataSnapshot snapshot) {
-+                if(snapshot.exists()){
-+                    String humedadAmbiente= snapshot.child("HumedadAmbiente").getValue().toString();
-+                    String temper=snapshot.child("TemperaturaAmbiente").getValue().toString();
-+                    String pres1=snapshot.child("Presencia1").getValue().toString();
-+                    String pres2=snapshot.child("Presencia2").getValue().toString();
-+                    String pres3=snapshot.child("Presencia3").getValue().toString();
-+                    final Map<String, Object> a = new HashMap<>();
-+                    a.put("Humedad Ambiente", humedadAmbiente);
-+                    a.put("Temperatura", temper);
-+                    a.put("Fecha", new Timestamp(new Date()));
-+                    a.put("machineId", getId);
-+                    db.collection("Mediciones planta 2").document(getId)
-+                            .set(a);
-+                }
-+            }
-+            @Override
-+            public void onCancelled(@NonNull DatabaseError error) {
-+
-+            }
-+        });
- 
-         return START_STICKY;
-     }
-@@ -104,43 +190,48 @@
-     @Override
-     public void messageArrived(String topic, MqttMessage message) throws Exception {
-         String payload = new String(message.getPayload());
--        String[] parts = payload.split("-");
-+        /*String[] parts = payload.split("-");
-         String part1 = parts[0];
-         String part2 = parts[1];
-         String part3 = parts[2];
-         String part4 = parts[3];
-         String part5 = parts[4];
- 
--        if(topic.equals(topicRoot+"lecturaDatos")){
--            Map<String, Object> user = new HashMap<>();
--            user.put("Humedad", part2);
--            user.put("Humedad Ambiente", part3);
--            user.put("Luminosidad", part4);
--            user.put("Temperatura", part5);
--            user.put("Fecha", new Timestamp(new Date()));
--            user.put("machineId", part1);
--            db.collection("Mediciones general").document(getId).set(user);
--        }
--        if(topic.equals(topicRoot+"lecturaDatos1")){
--            Map<String, Object> user = new HashMap<>();
--            user.put("Humedad", part2);
--            user.put("Humedad Ambiente", part3);
--            user.put("Luminosidad", part4);
--            user.put("Temperatura", part5);
--            user.put("Fecha", new Timestamp(new Date()));
--            user.put("machineId", part1);
--            db.collection("Mediciones planta 1").document(getId).set(user);
--        }
--        if(topic.equals(topicRoot+"lecturaDatos2")){
--            Map<String, Object> user = new HashMap<>();
--            user.put("Humedad", part2);
--            user.put("Humedad Ambiente", part3);
--            user.put("Luminosidad", part4);
--            user.put("Temperatura", part5);
--            user.put("Fecha", new Timestamp(new Date()));
--            user.put("machineId", part1);
--            db.collection("Mediciones planta 2").document(getId).set(user);
--        }
-+        switch (topic) {
-+            case topicRoot + "lecturaDatos": {
-+                Map<String, Object> user = new HashMap<>();
-+                user.put("Humedad", part2);
-+                user.put("Humedad Ambiente", part3);
-+                user.put("Luminosidad", part4);
-+                user.put("Temperatura", part5);
-+                user.put("Fecha", new Timestamp(new Date()));
-+                user.put("machineId", part1);
-+                db.collection("Mediciones general").document(part1).set(user);
-+                break;
-+            }
-+            case topicRoot + "lecturaDatos1": {
-+                Map<String, Object> user = new HashMap<>();
-+                user.put("Humedad", part2);
-+                user.put("Humedad Ambiente", part3);
-+                user.put("Luminosidad", part4);
-+                user.put("Temperatura", part5);
-+                user.put("Fecha", new Timestamp(new Date()));
-+                user.put("machineId", part1);
-+                db.collection("Mediciones planta 1").document(part1).set(user);
-+                break;
-+            }
-+            case topicRoot + "lecturaDatos2": {
-+                Map<String, Object> user = new HashMap<>();
-+                user.put("Humedad", part2);
-+                user.put("Humedad Ambiente", part3);
-+                user.put("Luminosidad", part4);
-+                user.put("Temperatura", part5);
-+                user.put("Fecha", new Timestamp(new Date()));
-+                user.put("machineId", part1);
-+                db.collection("Mediciones planta 2").document(part1).set(user);
-+                break;
-+            }
-+        }*/
- 
-         db.collection("Mediciones general").document(getId).addSnapshotListener(new EventListener<DocumentSnapshot>() {
-             @Override
Index: .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_15__Default_Changelist_.xml
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_15__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_15__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,44 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_19_01_2021_21_15_[Default_Changelist]" date="1611087351297" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_15_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 19/01/2021 21:15 [Default Changelist]" />
-  <binary>
-    <option name="BEFORE_PATH" value="app/src/main/res/drawable-xhdpi/d01d.png" />
-    <option name="AFTER_PATH" />
-    <option name="SHELVED_PATH" />
-  </binary>
-  <binary>
-    <option name="BEFORE_PATH" value="app/src/main/res/drawable-xhdpi/d09d.png" />
-    <option name="AFTER_PATH" />
-    <option name="SHELVED_PATH" />
-  </binary>
-  <binary>
-    <option name="BEFORE_PATH" value="app/src/main/res/drawable-xhdpi/cloud.png" />
-    <option name="AFTER_PATH" />
-    <option name="SHELVED_PATH" />
-  </binary>
-  <binary>
-    <option name="BEFORE_PATH" value="app/src/main/res/drawable-xhdpi/d13d.png" />
-    <option name="AFTER_PATH" />
-    <option name="SHELVED_PATH" />
-  </binary>
-  <binary>
-    <option name="BEFORE_PATH" value="app/src/main/res/drawable-xhdpi/d10d.png" />
-    <option name="AFTER_PATH" />
-    <option name="SHELVED_PATH" />
-  </binary>
-  <binary>
-    <option name="BEFORE_PATH" value="app/src/main/res/drawable-xhdpi/d11d.png" />
-    <option name="AFTER_PATH" />
-    <option name="SHELVED_PATH" />
-  </binary>
-  <binary>
-    <option name="BEFORE_PATH" value="app/src/main/res/drawable-xhdpi/d02d.png" />
-    <option name="AFTER_PATH" />
-    <option name="SHELVED_PATH" />
-  </binary>
-  <binary>
-    <option name="BEFORE_PATH" value="app/src/main/res/drawable-xhdpi/d04d.png" />
-    <option name="AFTER_PATH" />
-    <option name="SHELVED_PATH" />
-  </binary>
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_21_38__Default_Changelist_.xml
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_21_38__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_21_38__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_21_01_2021_21_38_[Default_Changelist]" date="1611261501670" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_21_38_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 21/01/2021 21:38 [Default Changelist]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_18_10_[Default_Changelist]/shelved.patch
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_18_10_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_18_10_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,523 +0,0 @@
-Index: app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.MachineControl;\r\n\r\nimport android.app.AlarmManager;\r\nimport android.app.DatePickerDialog;\r\nimport android.app.FragmentTransaction;\r\nimport android.app.TimePickerDialog;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.graphics.drawable.ColorDrawable;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.os.CountDownTimer;\r\nimport android.provider.AlarmClock;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.CheckBox;\r\nimport android.widget.DatePicker;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.TimePicker;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.annotation.RequiresApi;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.constraintlayout.widget.ConstraintLayout;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.dashboard.DashboardFragment;\r\nimport com.example.infinitycrop.ui.dashboard.GeneralFragment;\r\nimport com.example.infinitycrop.ui.logmail.LoginActivity;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.google.firebase.firestore.ListenerRegistration;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\nimport java.sql.Time;\r\nimport java.text.ParseException;\r\nimport java.text.SimpleDateFormat;\r\nimport java.time.LocalDate;\r\nimport java.time.LocalTime;\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.Calendar;\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\nimport java.util.Map;\r\n\r\nimport kotlin.Unit;\r\nimport kotlin.jvm.functions.Function1;\r\nimport me.sujanpoudel.wheelview.WheelView;\r\n\r\npublic class planta1 extends AppCompatActivity {\r\n    private List<String> nombres;\r\n    private List<String> estado;\r\n    //Aviso al entrar\r\n    private ConstraintLayout fondoR;\r\n    private ImageView imgr,goBack;\r\n    private TextView textR;\r\n    //\r\n\r\n    private int piso = 1;\r\n    String one = String.valueOf(piso);\r\n    private int stated = 1;\r\n    String state = String.valueOf(stated);\r\n\r\n\r\n    private CheckBox checkYes, checkNo;\r\n    private Button editInfo, saveChanges;\r\n    private TextView mDisplayHour,infoTitle,mStation;\r\n    private EditText nameplant;\r\n    private FirebaseFirestore db;\r\n\r\n    private String idDocument;\r\n    private String id;\r\n\r\n\r\n\r\n    //Reloj\r\n    int t2Hour, t2Minute;\r\n    private DatePickerDialog.OnDateSetListener mDateSetListener;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_planta1);\r\n\r\n        //Aviso al entrar\r\n        fondoR = findViewById(R.id.constraitR);\r\n        imgr = findViewById(R.id.imageprevius);\r\n        textR = findViewById(R.id.txtInfoD);\r\n        CountDownTimer countDownTimer = new CountDownTimer(3000, 1000) {//Se pone la cuenta atras para que no se superponga con la animación\r\n            public void onTick(long millisUntilFinished) {\r\n\r\n            }\r\n\r\n            public void onFinish() {\r\n\r\n                fondoR.setVisibility(View.GONE);\r\n                imgr.setVisibility(View.GONE);\r\n                textR.setVisibility(View.GONE);\r\n\r\n            }\r\n        }.start();\r\n        //boton para volver\r\n        goBack= findViewById(R.id.backDashboard);\r\n        goBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n               finish();\r\n            }\r\n        });\r\n\r\n        db=FirebaseFirestore.getInstance();\r\n        //bungle get extra\r\n        Bundle extras = getIntent().getExtras();\r\n        id = extras.getString(\"idMachine\");\r\n\r\n        //arrays\r\n        nombres=new ArrayList<>();\r\n        estado=new ArrayList<>();\r\n        //firestore\r\n        db.collection(\"Mediciones planta 1\").document(id).collection(\"DatosPiso\")\r\n                .addSnapshotListener(new EventListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable QuerySnapshot snapshots,\r\n                                        @Nullable FirebaseFirestoreException e) {\r\n                        if (e != null) {\r\n                            return;\r\n                        }\r\n                        nombres.clear();\r\n                        for (DocumentSnapshot doc : snapshots) {\r\n                                nombres.add(doc.getString(\"name\"));\r\n                                estado.add(doc.getId());\r\n                        }\r\n\r\n\r\n                       /* Toast.makeText(getApplicationContext(),nombres.toString(), Toast.LENGTH_LONG).show();*/\r\n\r\n\r\n\r\n                        final WheelView wheelView = (WheelView) findViewById(R.id.wheelview);\r\n                        wheelView.setTitles(nombres);\r\n\r\n                        wheelView.setSelectListener(new Function1<Integer, Unit>() {\r\n                            @Override\r\n                            public Unit invoke(Integer integer) {\r\n                                showToast(integer);\r\n                                return Unit.INSTANCE;\r\n                            }\r\n                            private final  void showToast(Integer index) {\r\n                               // Toast.makeText(planta1.this,\"\"+wheelView.getTitles().get(index),Toast.LENGTH_SHORT).show();\r\n                                idDocument=estado.get(index);\r\n                                Toast.makeText(planta1.this,\"\"+idDocument,Toast.LENGTH_SHORT).show();\r\n                                itenInfo(idDocument);\r\n\r\n\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                });\r\n\r\n\r\n\r\n\r\n\r\n        //Nombre de la planta\r\n        nameplant = (EditText)findViewById(R.id.editTextNobrep);\r\n        nameplant.setEnabled(false);\r\n        mDisplayHour=(TextView) findViewById(R.id.editHour);\r\n        mDisplayHour.setEnabled(false);\r\n        mStation=(TextView)findViewById(R.id.txtStation);\r\n        //Checkboxes\r\n        checkYes=(CheckBox)findViewById(R.id.checkBoxSi);\r\n        checkYes.setKeyListener(null);\r\n        checkNo=(CheckBox)findViewById(R.id.checkBoxNo);\r\n        checkNo.setKeyListener(null);\r\n\r\n        //Boton guardar cambios\r\n        saveChanges = (Button)findViewById(R.id.btn_save);\r\n        saveChanges.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                saveNote(v);\r\n                editInfo.setVisibility(View.VISIBLE);\r\n                saveChanges.setVisibility(View.GONE);\r\n                mDisplayHour.setEnabled(false);\r\n                nameplant.setEnabled(false);\r\n                infoTitle.setText(\"Pulsa el botón para editar:\");\r\n\r\n\r\n\r\n\r\n            }\r\n        });\r\n\r\n        //Boton editar informacion\r\n        editInfo = (Button) findViewById(R.id.btnedit);\r\n        editInfo.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                saveChanges.setVisibility(View.VISIBLE);\r\n                editInfo.setVisibility(View.GONE);\r\n                mDisplayHour.setEnabled(true);\r\n                nameplant.setEnabled(true);\r\n                infoTitle.setText(\"Información completa:\");\r\n\r\n\r\n\r\n            }\r\n        });\r\n        infoTitle = (TextView) findViewById(R.id.textViewinfo);\r\n        //HORA\r\n\r\n        mDisplayHour.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(AlarmClock.ACTION_SET_ALARM);\r\n                if(intent.resolveActivity(getPackageManager())!=null){\r\n                    startActivity(intent);\r\n                }\r\n\r\n        }\r\n        });\r\n\r\n\r\n\r\n\r\n        /*//CALENDARIO\r\n        mDisplayDate = (TextView) findViewById(R.id.tvDate);\r\n        mDisplayDate.setEnabled(false);\r\n        mDisplayDate.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Calendar cal = Calendar.getInstance();\r\n                int year = cal.get(Calendar.YEAR);\r\n                int month = cal.get(Calendar.MONTH);\r\n                int day = cal.get(Calendar.DAY_OF_MONTH);\r\n\r\n                DatePickerDialog dialog = new DatePickerDialog(planta1.this,android.R.style.Theme_Holo_Dialog_MinWidth, mDateSetListener,year,month,day);\r\n                dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n                dialog.show();\r\n            }\r\n\r\n        });\r\n        mDateSetListener = new DatePickerDialog.OnDateSetListener() {\r\n            @Override\r\n            public void onDateSet(DatePicker datePicker, int year, int month, int day) {\r\n                month = month+1;\r\n                String date = day +\"/\" + month +\"/\"+ year;\r\n                mDisplayDate.setText(date);\r\n            }\r\n        };\r\n            */\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n\r\n\r\n    }\r\n    /*public void establecerAlarma(String mensaje,int dias,int hora,int minutos){\r\n        Intent intent = new Intent(AlarmClock.ACTION_SET_ALARM)\r\n                .putExtra(AlarmClock.EXTRA_DAYS,dias)\r\n                .putExtra(AlarmClock.EXTRA_MESSAGE,mensaje)\r\n                .putExtra(AlarmClock.EXTRA_HOUR,hora)\r\n                .putExtra(AlarmClock.EXTRA_MINUTES,minutos);\r\n        if(intent.resolveActivity(getPackageManager())!=null){\r\n            startActivity(intent);\r\n        }\r\n    }*/\r\n\r\n    public void saveNote(View v){\r\n        String cola = idDocument;\r\n        String nombre = nameplant.getText().toString();\r\n\r\n        String piso = one;\r\n\r\n        Map<String, Object> note = new HashMap<>();\r\n        note.put(\"name\",nombre);\r\n        note.put(\"piso\",piso);\r\n\r\n        db.collection(\"Mediciones planta 1\").document(id).collection(\"DatosPiso\").document(cola).update(note).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n            @Override\r\n            public void onSuccess(Void aVoid) {\r\n            Toast.makeText(planta1.this,\"va bien\",Toast.LENGTH_SHORT).show();\r\n            }\r\n        }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Toast.makeText(planta1.this,\"va mal\",Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    private void itenInfo(String uiDoc){\r\n        //hacer consulta a ese documento con uiDOc y sacar su info\r\n        //luego set Text a all\r\n        db.collection(\"Mediciones planta 1\").document(id).collection(\"DatosPiso\").document(uiDoc).get()\r\n                .addOnSuccessListener(new OnSuccessListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onSuccess(DocumentSnapshot documentSnapshot) {\r\n                        if(documentSnapshot.exists()){\r\n                            String nombre = documentSnapshot.getString(\"name\");\r\n                            String estacion = documentSnapshot.getString(\"estacion\");\r\n                            int resultado =documentSnapshot.getLong(\"estado\").intValue();\r\n                            if(resultado==1){\r\n                                checkYes.isSelected();\r\n                                checkYes.setChecked(true);\r\n                                checkYes.isChecked();\r\n                                checkNo.setChecked(false);\r\n                            }else{\r\n                                checkNo.isSelected();\r\n                                checkNo.setChecked(true);\r\n                                checkNo.isChecked();\r\n                                checkYes.setChecked(false);\r\n                            }\r\n\r\n\r\n                           // Map<String,Object> note = documentSnapshot.getData();\r\n                            nameplant.setText(nombre);\r\n                            mStation.setText(estacion);\r\n\r\n\r\n\r\n                        }else{\r\n                            Toast.makeText(planta1.this,\"Document does exist\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }\r\n                }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Toast.makeText(planta1.this,\"va mal\",Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n                /*.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable DocumentSnapshot value, @Nullable FirebaseFirestoreException error) {\r\n\r\n                    }\r\n                });*/\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java	(revision a2d08b76fd6384ad69213c5a5bfed450eec259e1)
-+++ app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java	(date 1611248763034)
-@@ -176,21 +176,21 @@
- 
- 
- 
--        //Nombre de la planta
--        nameplant = (EditText)findViewById(R.id.editTextNobrep);
--        nameplant.setEnabled(false);
--        mDisplayHour=(TextView) findViewById(R.id.editHour);
--        mDisplayHour.setEnabled(false);
--        mStation=(TextView)findViewById(R.id.txtStation);
--        //Checkboxes
--        checkYes=(CheckBox)findViewById(R.id.checkBoxSi);
--        checkYes.setKeyListener(null);
--        checkNo=(CheckBox)findViewById(R.id.checkBoxNo);
--        checkNo.setKeyListener(null);
-+            //Nombre de la planta
-+            nameplant = (EditText)findViewById(R.id.editTextNobrep);
-+            nameplant.setEnabled(false);
-+            mDisplayHour=(TextView) findViewById(R.id.editHour);
-+            mDisplayHour.setEnabled(false);
-+            mStation=(TextView)findViewById(R.id.txtStation);
-+            //Checkboxes
-+            checkYes=(CheckBox)findViewById(R.id.checkBoxSi);
-+            checkYes.setKeyListener(null);
-+            checkNo=(CheckBox)findViewById(R.id.checkBoxNo);
-+            checkNo.setKeyListener(null);
- 
--        //Boton guardar cambios
--        saveChanges = (Button)findViewById(R.id.btn_save);
--        saveChanges.setOnClickListener(new View.OnClickListener() {
-+            //Boton guardar cambios
-+            saveChanges = (Button)findViewById(R.id.btn_save);
-+            saveChanges.setOnClickListener(new View.OnClickListener() {
-             @Override
-             public void onClick(View v) {
-                 saveNote(v);
-Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.MachineControl.planta1;\r\nimport com.google.android.material.bottomsheet.BottomSheetDialog;\r\nimport com.google.firebase.Timestamp;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\n\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link GeneralFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class GeneralFragment extends Fragment implements MqttCallback{\r\n    public static MqttClient client = null;\r\n    private String uid;\r\n    private FirebaseFirestore db;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public GeneralFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment GeneralFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static GeneralFragment newInstance(String param1, String param2) {\r\n        GeneralFragment fragment = new GeneralFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v = inflater.inflate(R.layout.fragment_general, container, false);\r\n        //switch methods\r\n        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });\r\n        db = FirebaseFirestore.getInstance();\r\n        MainActivity myActivity = (MainActivity) getActivity();\r\n        final TextView medidaTemp=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidaHum=v.findViewById(R.id.medidaHumedadGeneral);\r\n        /*final TextView medidaHumAm=v.findViewById(R.id.medidaSalinidadGeneral);*/\r\n        final TextView medidaLuz=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n        uid=myActivity.getMachineUID();\r\n        db.collection(\"Mediciones general\")\r\n                .document(uid)\r\n                .addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable DocumentSnapshot snapshot,\r\n                                        @Nullable FirebaseFirestoreException e) {\r\n                        if (e != null) {\r\n                            return;\r\n                        }\r\n\r\n                        if (snapshot != null && snapshot.exists()) {\r\n                            //Temperatura\r\n                            String medidaT=snapshot.getString(\"Temperatura\");\r\n                            medidaTemp.setText(medidaT+\"°C\");\r\n                            //Humedad\r\n                            String medidaH=snapshot.getString(\"Humedad\");\r\n                            medidaHum.setText(medidaH+\"%\");\r\n                            //Humedad Ambiente\r\n                            /*String medidaHA=snapshot.getString(\"Humedad Ambiente\");\r\n                            medidaHumAm.setText(medidaHA+\"%\");*/\r\n                            //Luminosidad\r\n                            String medidaL=snapshot.getString(\"Luminosidad\");\r\n                            medidaLuz.setText(medidaL+\"%\");\r\n\r\n\r\n                        } else {\r\n\r\n                        }\r\n                    }\r\n                });\r\n\r\n        //Boton para acceder a la maquina para sus parcelas\r\n        Button btnmymachine = (Button) v.findViewById(R.id.btnMyMachine);\r\n        btnmymachine.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                BottomSheetDialog bottomSheetDialog = new BottomSheetDialog(\r\n                        getContext()\r\n                );\r\n                bottomSheetDialog.setContentView(R.layout.plantamaquina_bottom_sheet);\r\n                Button btnp1=bottomSheetDialog.findViewById(R.id.enterPlant2);\r\n                Button btn2=bottomSheetDialog.findViewById(R.id.enterPlant1);\r\n                bottomSheetDialog.show();\r\n                btnp1.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        Intent intent = new Intent (getContext(), planta1.class);\r\n                        intent.putExtra(\"idMachine\", uid);\r\n                        startActivity(intent);\r\n\r\n\r\n\r\n                    }\r\n\r\n                });\r\n            }\r\n        });\r\n\r\n        return v;\r\n    }\r\n        /*btnmymachine.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent (getContext(), MiMaquina.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n        });*/\r\n\r\n\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"operaciones\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"operaciones\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"1-OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"operaciones\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"operaciones\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"operaciones\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"1-ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"operaciones\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(revision a2d08b76fd6384ad69213c5a5bfed450eec259e1)
-+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(date 1611249045844)
-@@ -20,6 +20,7 @@
- import com.example.infinitycrop.MainActivity;
- import com.example.infinitycrop.R;
- import com.example.infinitycrop.ui.MachineControl.planta1;
-+import com.example.infinitycrop.ui.MachineControl.planta2;
- import com.google.android.material.bottomsheet.BottomSheetDialog;
- import com.google.firebase.Timestamp;
- import com.google.firebase.database.DataSnapshot;
-@@ -170,6 +171,18 @@
-                         Intent intent = new Intent (getContext(), planta1.class);
-                         intent.putExtra("idMachine", uid);
-                         startActivity(intent);
-+
-+
-+
-+                    }
-+
-+                });
-+                btn2.setOnClickListener(new View.OnClickListener() {
-+                    @Override
-+                    public void onClick(View v) {
-+                        Intent intent = new Intent (getContext(), planta2.class);
-+                        intent.putExtra("idMachine", uid);
-+                        startActivity(intent);
- 
- 
- 
-Index: app/src/main/java/com/example/infinitycrop/ui/Foro/main/Profile/ProfileForoFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.Foro.main.Profile;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport com.example.infinitycrop.R;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link ProfileForoFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class ProfileForoFragment extends Fragment {\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public ProfileForoFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment ProfileForoFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static ProfileForoFragment newInstance(String param1, String param2) {\r\n        ProfileForoFragment fragment = new ProfileForoFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        return inflater.inflate(R.layout.fragment_profile_foro, container, false);\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/Foro/main/Profile/ProfileForoFragment.java	(revision a2d08b76fd6384ad69213c5a5bfed450eec259e1)
-+++ app/src/main/java/com/example/infinitycrop/ui/Foro/main/Profile/ProfileForoFragment.java	(date 1611248763058)
-@@ -1,14 +1,55 @@
- package com.example.infinitycrop.ui.Foro.main.Profile;
- 
-+import android.app.Activity;
-+import android.content.Intent;
-+import android.graphics.Color;
-+import android.net.Uri;
- import android.os.Bundle;
--
--import androidx.fragment.app.Fragment;
--
- import android.view.LayoutInflater;
- import android.view.View;
- import android.view.ViewGroup;
-+import android.widget.Button;
-+import android.widget.EditText;
-+import android.widget.ImageView;
-+import android.widget.LinearLayout;
-+import android.widget.TextView;
-+import android.widget.Toast;
- 
-+import androidx.annotation.NonNull;
-+import androidx.annotation.Nullable;
-+import androidx.fragment.app.Fragment;
-+
-+import com.bumptech.glide.Glide;
- import com.example.infinitycrop.R;
-+import com.example.infinitycrop.ui.Foro.main.Community.NewPost.CreatePost.CreatePost;
-+import com.example.infinitycrop.ui.MachineControl.planta1;
-+import com.google.android.gms.tasks.Continuation;
-+import com.google.android.gms.tasks.OnCompleteListener;
-+import com.google.android.gms.tasks.OnFailureListener;
-+import com.google.android.gms.tasks.OnSuccessListener;
-+import com.google.android.gms.tasks.Task;
-+import com.google.firebase.Timestamp;
-+import com.google.firebase.auth.FirebaseAuth;
-+import com.google.firebase.firestore.DocumentReference;
-+import com.google.firebase.firestore.DocumentSnapshot;
-+import com.google.firebase.firestore.EventListener;
-+import com.google.firebase.firestore.FirebaseFirestore;
-+import com.google.firebase.firestore.FirebaseFirestoreException;
-+import com.google.firebase.firestore.QuerySnapshot;
-+import com.google.firebase.storage.StorageReference;
-+import com.google.firebase.storage.UploadTask;
-+import com.squareup.picasso.Picasso;
-+import com.theartofdev.edmodo.cropper.CropImage;
-+import com.theartofdev.edmodo.cropper.CropImageView;
-+
-+import java.io.File;
-+import java.util.Date;
-+import java.util.HashMap;
-+import java.util.HashSet;
-+import java.util.Map;
-+import java.util.UUID;
-+
-+import static android.app.Activity.RESULT_OK;
- 
- /**
-  * A simple {@link Fragment} subclass.
-@@ -16,7 +57,19 @@
-  * create an instance of this fragment.
-  */
- public class ProfileForoFragment extends Fragment {
--
-+    private StorageReference mStorageRef;
-+    private String image_url;
-+    private FirebaseFirestore db;
-+    private FirebaseAuth firebaseAuth;
-+    private String uid;
-+    private String Nuser;
-+    Button btnEdit,btnSave;
-+    EditText txtNamep,descriptionP;
-+    ImageView imgP;
-+    ImageView lapiz1,lapiz2,lapiz3;
-+    TextView txtPost,txtFollow;
-+    LinearLayout l1p;
-+    private  Uri resultUri;
-     // TODO: Rename parameter arguments, choose names that match
-     // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
-     private static final String ARG_PARAM1 = "param1";
-@@ -60,7 +113,112 @@
-     @Override
-     public View onCreateView(LayoutInflater inflater, ViewGroup container,
-                              Bundle savedInstanceState) {
-+
-         // Inflate the layout for this fragment
--        return inflater.inflate(R.layout.fragment_profile_foro, container, false);
--    }
-+        final View root = inflater.inflate(R.layout.fragment_profile_foro, container, false);
-+        db = FirebaseFirestore.getInstance();
-+        firebaseAuth = FirebaseAuth.getInstance();
-+        uid = firebaseAuth.getUid();
-+        //Declaracion de los elementos
-+        lapiz1 = root.findViewById(R.id.pencil1);
-+        lapiz2 = root.findViewById(R.id.pencil2);
-+        lapiz3 = root.findViewById(R.id.pencil3);
-+        l1p = root.findViewById(R.id.layout1P);
-+        imgP = root.findViewById(R.id.imgP);
-+        imgP.setEnabled(false);
-+        btnEdit = root.findViewById(R.id.btneditDesc);
-+        btnSave = root.findViewById(R.id.btn_saveP);
-+        txtNamep = root.findViewById(R.id.nameP);
-+        txtNamep.setEnabled(false);
-+        descriptionP = root.findViewById(R.id.progiledescription);
-+        descriptionP.setEnabled(false);
-+        txtFollow = root.findViewById(R.id.followingP);
-+        txtPost = root.findViewById(R.id.txtPostN);
-+
-+
-+        String name;
-+            //firebase
-+        DocumentReference docRef = db.collection("Foro user").document(uid);
-+        docRef.addSnapshotListener(new EventListener<DocumentSnapshot>() {
-+            @Override
-+            public void onEvent(@Nullable DocumentSnapshot snapshot,
-+                                @Nullable FirebaseFirestoreException e) {
-+                if (e != null) {
-+
-+                    return;
-+                }
-+
-+                if (snapshot != null && snapshot.exists()) {
-+                    String nombre = snapshot.getString("name");
-+                    String descipcion = snapshot.getString("description");
-+                    String foto =snapshot.getString("url");
-+
-+                    txtNamep.setText(nombre);
-+                    /*imgP.setText(link);*/
-+                    descriptionP.setText(descipcion);
-+                    if(!foto.equals("")){
-+                        Picasso.get().load(foto).into(imgP);
-+                    }
-+                } else {
-+
-+                }
-+            }
-+        });
-+
-+        db.collection("Foro user").document(uid).collection("Following")
-+
-+                .addSnapshotListener(new EventListener<QuerySnapshot>() {
-+                    @Override
-+                    public void onEvent(@Nullable QuerySnapshot snapshots,
-+                                        @Nullable FirebaseFirestoreException e) {
-+                        if (e != null) {
-+
-+                            return;
-+                        }
-+
-+                        int cont=0;
-+                        for (DocumentSnapshot doc : snapshots) {
-+                            cont++;
-+
-+                        }
-+                        String contador=String.valueOf(cont);
-+                        txtFollow.setText(contador);
-+                    }
-+                });
-+        db.collection("Posts").addSnapshotListener(new EventListener<QuerySnapshot>() {
-+            @Override
-+            public void onEvent(@Nullable QuerySnapshot snapshots,
-+                                @Nullable FirebaseFirestoreException e) {
-+                if (e != null) {
-+
-+                    return;
-+                }
-+
-+                int cont=0;
-+                for (DocumentSnapshot doc : snapshots) {
-+                    if(doc.getString("creator").equals(uid)) {
-+                        cont++;
-+                    }
-+                }
-+                String contador=String.valueOf(cont);
-+                txtPost.setText(contador);
-+            }
-+        });
-+
-+        //boton editar
-+        btnEdit.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                Intent intent = new Intent(getActivity().getApplication(), EditProfileActivity.class);
-+                startActivity(intent);
-+            }
-+
-+            });
-+
-+
-+        return root;
-+
-+    }
-+
-+
- }
-\ No newline at end of file
-Index: app/src/main/AndroidManifest.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.infinitycrop\">\r\n\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" /> <!-- Permisos Qr -->\r\n    <uses-permission android:name=\"android.permission.CAMERA\" />\r\n    <uses-permission android:name=\"com.android.alarm.permission.SET_ALARM\"/>\r\n\r\n\r\n    <uses-feature android:name=\"android.hardware.camera\" />\r\n    <uses-feature android:name=\"android.hardware.camera.autofocus\" />\r\n\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher\"\r\n        android:theme=\"@style/AppThemeHome\">\r\n        <activity android:name=\".ui.Foro.main.Community.NewPost.PostView\"></activity>\r\n        <activity android:name=\".ui.Foro.main.Community.NewPost.CreatePost.CreatePost\" />\r\n        <activity android:name=\".ui.Foro.main.Community.CommunityMain\" />\r\n        <activity android:name=\".ui.Foro.lets_start.EditCommunity\" />\r\n        <activity android:name=\".ui.list_machine.ModifyMachine\" />\r\n        <activity android:name=\".ui.Foro.main.ForoMain\" />\r\n        <activity android:name=\".ui.Foro.lets_start.AddCommunity\" />\r\n        <activity android:name=\".ui.Foro.lets_start.choose_community\" />\r\n        <activity android:name=\".ui.Foro.lets_start.welcome_forum\" />\r\n        <activity android:name=\".MainActivity\" />\r\n\r\n        <service android:name=\".ui.service.ServicioMqtt\" />\r\n        <service android:name=\".ui.service.ServicioNotificaciones\" />\r\n\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.SET_ALARM\"/>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\" />\r\n        <activity android:name=\".ui.profile.settings.HelpProfile\" />\r\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\" />\r\n        <activity android:name=\".ui.list_machine.AddMachine\" />\r\n        <activity android:name=\".ui.profile.settings.ModifyProfile\" />\r\n        <activity android:name=\".ui.logmail.RegisterActivity\" />\r\n        <activity android:name=\".ui.logmail.LoginActivity\" />\r\n        <activity android:name=\".ui.list_machine.CaptureAct\" />\r\n        <activity android:name=\".ui.login.LogActivity\" />\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\" />\r\n        <activity android:name=\".ui.LoadAnimations.LogprimeraActivity\" />\r\n        <activity android:name=\".ui.graphics.GraphicsActivity\" />\r\n        <activity android:name=\".ui.MachineControl.planta1\" />\r\n        <activity android:name=\".ui.notifications.NotificacionesActivity\" />\r\n        <activity android:name=\".ui.guiabotanica.GuiaActivity\" />\r\n        <activity android:name=\".ui.guiabotanica.PlantActivity\" />\r\n\r\n        <meta-data\r\n            android:name=\"com.google.android.geo.API_KEY\"\r\n            android:value=\"@string/google_maps_key\" />\r\n        <meta-data\r\n            android:name=\"com.facebook.sdk.ApplicationId\"\r\n            android:value=\"@string/facebook_app_id\"\r\n            tools:replace=\"android:value\" />\r\n        <meta-data\r\n            android:name=\"preloaded_fonts\"\r\n            android:resource=\"@array/preloaded_fonts\" />\r\n\r\n        <activity\r\n            android:name=\"com.theartofdev.edmodo.cropper.CropImageActivity\"\r\n            android:theme=\"@style/Base.Theme.AppCompat\" />\r\n    </application>\r\n\r\n</manifest>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/AndroidManifest.xml	(revision a2d08b76fd6384ad69213c5a5bfed450eec259e1)
-+++ app/src/main/AndroidManifest.xml	(date 1611248763052)
-@@ -28,6 +28,7 @@
-         <activity android:name=".ui.Foro.main.Community.NewPost.CreatePost.CreatePost" />
-         <activity android:name=".ui.Foro.main.Community.CommunityMain" />
-         <activity android:name=".ui.Foro.lets_start.EditCommunity" />
-+        <activity android:name=".ui.Foro.main.Profile.EditProfileActivity" />
-         <activity android:name=".ui.list_machine.ModifyMachine" />
-         <activity android:name=".ui.Foro.main.ForoMain" />
-         <activity android:name=".ui.Foro.lets_start.AddCommunity" />
-@@ -59,6 +60,7 @@
-         <activity android:name=".ui.LoadAnimations.LogprimeraActivity" />
-         <activity android:name=".ui.graphics.GraphicsActivity" />
-         <activity android:name=".ui.MachineControl.planta1" />
-+        <activity android:name=".ui.MachineControl.planta2" />
-         <activity android:name=".ui.notifications.NotificacionesActivity" />
-         <activity android:name=".ui.guiabotanica.GuiaActivity" />
-         <activity android:name=".ui.guiabotanica.PlantActivity" />
-Index: app/src/main/res/layout/fragment_profile_foro.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"#EFE9E9\"\r\n    android:orientation=\"vertical\">\r\n\r\n    <RelativeLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"405dp\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"350dp\"\r\n            android:background=\"@color/colorSecondary\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <ImageView\r\n                android:layout_width=\"150dp\"\r\n                android:layout_height=\"150dp\"\r\n                android:layout_gravity=\"center_horizontal\"\r\n                android:layout_marginTop=\"45dp\"\r\n                android:background=\"@drawable/rectangle\" />\r\n\r\n            <TextView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center_horizontal\"\r\n                android:layout_marginTop=\"10dp\"\r\n                android:text=\"Angle Triangle\"\r\n                android:textColor=\"#fff\"\r\n                android:textSize=\"21sp\"\r\n                android:textStyle=\"bold\" />\r\n        </LinearLayout>\r\n\r\n        <androidx.cardview.widget.CardView\r\n            android:layout_width=\"400dp\"\r\n            android:layout_height=\"120dp\"\r\n            android:layout_centerHorizontal=\"true\"\r\n            android:layout_marginTop=\"275dp\">\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:orientation=\"horizontal\"\r\n                android:weightSum=\"2\">\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"center\"\r\n                    android:orientation=\"vertical\">\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:text=\"Posts\"\r\n                        android:textSize=\"20sp\" />\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:paddingTop=\"10dp\"\r\n                        android:text=\"125\"\r\n                        android:textColor=\"@color/green\"\r\n                        android:textSize=\"20sp\"\r\n                        android:textStyle=\"bold\" />\r\n                </LinearLayout>\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"center\"\r\n                    android:orientation=\"vertical\"\r\n                    android:visibility=\"gone\">\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:text=\"Followers\"\r\n                        android:textSize=\"20sp\"\r\n                        android:visibility=\"gone\" />\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:paddingTop=\"10dp\"\r\n                        android:text=\"1205\"\r\n                        android:textColor=\"@color/green\"\r\n                        android:textSize=\"20sp\"\r\n                        android:textStyle=\"bold\"\r\n                        android:visibility=\"gone\" />\r\n                </LinearLayout>\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"center\"\r\n                    android:orientation=\"vertical\">\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:text=\"Following\"\r\n                        android:textSize=\"20sp\" />\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:paddingTop=\"10dp\"\r\n                        android:text=\"360\"\r\n                        android:textColor=\"@color/green\"\r\n                        android:textSize=\"20sp\"\r\n                        android:textStyle=\"bold\" />\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n        </androidx.cardview.widget.CardView>\r\n    </RelativeLayout>\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_gravity=\"center\"\r\n        android:layout_marginLeft=\"20dp\"\r\n        android:layout_marginRight=\"20dp\"\r\n        android:layout_marginTop=\"45dp\"\r\n        android:orientation=\"vertical\">\r\n\r\n        <TextView\r\n            android:id=\"@+id/progiledescription\"\r\n            android:layout_width=\"379dp\"\r\n            android:layout_height=\"100dp\"\r\n            android:background=\"@color/white\"\r\n            android:hint=\"Descripción:\"\r\n            android:textSize=\"20sp\"\r\n            android:padding=\"10dp\"\r\n\r\n          />\r\n\r\n        <Button\r\n            android:id=\"@+id/btneditDesc\"\r\n            android:layout_width=\"130dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center\"\r\n            android:layout_marginTop=\"12dp\"\r\n            android:background=\"@drawable/btn_scan\"\r\n            android:text=\"Modificar\"\r\n            android:textColor=\"@color/white\" />\r\n\r\n    </LinearLayout>\r\n\r\n</LinearLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_profile_foro.xml	(revision a2d08b76fd6384ad69213c5a5bfed450eec259e1)
-+++ app/src/main/res/layout/fragment_profile_foro.xml	(date 1611248763064)
-@@ -1,6 +1,7 @@
- <?xml version="1.0" encoding="utf-8"?>
- <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
- 
-+    xmlns:app="http://schemas.android.com/apk/res-auto"
-     android:layout_width="match_parent"
-     android:layout_height="match_parent"
-     android:background="#EFE9E9"
-@@ -11,27 +12,75 @@
-         android:layout_height="405dp">
- 
-         <LinearLayout
-+            android:id="@+id/layout1P"
-             android:layout_width="match_parent"
-             android:layout_height="350dp"
-             android:background="@color/colorSecondary"
-             android:orientation="vertical">
- 
--            <ImageView
--                android:layout_width="150dp"
--                android:layout_height="150dp"
--                android:layout_gravity="center_horizontal"
--                android:layout_marginTop="45dp"
--                android:background="@drawable/rectangle" />
-+            <LinearLayout
-+                android:layout_width="wrap_content"
-+                android:layout_height="wrap_content"
-+                android:layout_gravity="center"
-+                android:layout_marginTop="25dp"
-+                android:gravity="center"
-+                android:orientation="horizontal">
-+
-+                <ImageView
-+                    android:id="@+id/imgP"
-+                    android:layout_width="150dp"
-+                    android:layout_height="150dp"
-+                    android:layout_gravity="center_horizontal"
-+                    android:background="@drawable/rectangle"
-+                    android:scaleType="centerCrop" />
-+
-+                <ImageView
-+                    android:id="@+id/pencil1"
-+                    android:layout_width="62dp"
-+                    android:layout_height="41dp"
-+                    android:visibility="gone"
-+                    app:srcCompat="@drawable/pencil" />
-+            </LinearLayout>
- 
--            <TextView
-+            <LinearLayout
-                 android:layout_width="wrap_content"
-                 android:layout_height="wrap_content"
--                android:layout_gravity="center_horizontal"
--                android:layout_marginTop="10dp"
--                android:text="Angle Triangle"
--                android:textColor="#fff"
--                android:textSize="21sp"
--                android:textStyle="bold" />
-+                android:orientation="horizontal"
-+                android:layout_gravity="center"
-+                android:layout_marginTop="15dp">
-+
-+                <EditText
-+                    android:id="@+id/nameP"
-+                    android:layout_width="wrap_content"
-+                    android:layout_height="wrap_content"
-+                    android:layout_gravity="center_horizontal"
-+
-+                    android:background="@null"
-+                    android:text="Angle Triangle"
-+                    android:textColor="#fff"
-+                    android:textSize="21sp"
-+                    android:textStyle="bold" />
-+
-+                <ImageView
-+                    android:id="@+id/pencil2"
-+                    android:layout_width="53dp"
-+                    android:layout_height="32dp"
-+                    android:layout_gravity="center"
-+                    android:layout_weight="1"
-+                    android:visibility="gone"
-+                    app:srcCompat="@drawable/pencil" />
-+            </LinearLayout>
-+
-+            <Button
-+                android:id="@+id/btneditDesc"
-+                android:layout_width="wrap_content"
-+                android:layout_height="38dp"
-+                android:layout_gravity="end|clip_vertical"
-+                android:layout_marginTop="12dp"
-+                android:layout_marginRight="12dp"
-+                android:background="@drawable/btn_savep"
-+                android:text="Editar"
-+                android:textColor="@color/colorSecondary" />
-         </LinearLayout>
- 
-         <androidx.cardview.widget.CardView
-@@ -44,7 +93,8 @@
-                 android:layout_width="match_parent"
-                 android:layout_height="match_parent"
-                 android:orientation="horizontal"
--                android:weightSum="2">
-+                android:weightSum="2"
-+                android:gravity="center">
- 
-                 <LinearLayout
-                     android:layout_width="0dp"
-@@ -60,6 +110,7 @@
-                         android:textSize="20sp" />
- 
-                     <TextView
-+                        android:id="@+id/txtPostN"
-                         android:layout_width="wrap_content"
-                         android:layout_height="wrap_content"
-                         android:paddingTop="10dp"
-@@ -105,10 +156,11 @@
-                     <TextView
-                         android:layout_width="wrap_content"
-                         android:layout_height="wrap_content"
--                        android:text="Following"
-+                        android:text="Suiguiendo"
-                         android:textSize="20sp" />
- 
-                     <TextView
-+                        android:id="@+id/followingP"
-                         android:layout_width="wrap_content"
-                         android:layout_height="wrap_content"
-                         android:paddingTop="10dp"
-@@ -128,28 +180,48 @@
-         android:layout_marginLeft="20dp"
-         android:layout_marginRight="20dp"
-         android:layout_marginTop="45dp"
--        android:orientation="vertical">
-+        android:orientation="vertical"
-+        >
- 
--        <TextView
--            android:id="@+id/progiledescription"
--            android:layout_width="379dp"
--            android:layout_height="100dp"
--            android:background="@color/white"
--            android:hint="Descripción:"
--            android:textSize="20sp"
--            android:padding="10dp"
-+        <LinearLayout
-+            android:layout_width="wrap_content"
-+            android:layout_height="wrap_content"
-+            android:orientation="horizontal"
-+            android:gravity="center"
-+            android:layout_gravity="center">
-+
-+            <EditText
-+                android:id="@+id/progiledescription"
-+                android:layout_width="285dp"
-+                android:layout_height="100dp"
-+                android:background="@color/white"
-+                android:hint="Descripción:"
-+                android:padding="10dp"
-+                android:textSize="20sp"
- 
--          />
-+                />
-+
-+            <ImageView
-+                android:id="@+id/pencil3"
-+                android:layout_width="62dp"
-+                android:layout_height="41dp"
-+                android:layout_weight="1"
-+                android:visibility="gone"
-+                app:srcCompat="@drawable/pencil" />
-+        </LinearLayout>
- 
-         <Button
--            android:id="@+id/btneditDesc"
--            android:layout_width="130dp"
-+            android:id="@+id/btn_saveP"
-+            android:layout_width="120dp"
-             android:layout_height="wrap_content"
-             android:layout_gravity="center"
--            android:layout_marginTop="12dp"
-+            android:layout_marginTop="15dp"
-             android:background="@drawable/btn_scan"
--            android:text="Modificar"
--            android:textColor="@color/white" />
-+            android:text="Guardar"
-+            android:textColor="@color/white"
-+            android:visibility="gone"
-+
-+            />
- 
-     </LinearLayout>
- 
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_15__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_15__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_21_29__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_21_29__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_18_27__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_18_27__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_13_14__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_13_14__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_17_01_2021_15_05__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_17_01_2021_15_05__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_19_07__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_19_07__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_20_41__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_20_41__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_08__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_08__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_14_53__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_14_53__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_15_01_2021_13_24__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_15_01_2021_13_24__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_19_33__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_19_33__Default_Changelist_.xml
Index: .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_14_53__Default_Changelist_.xml
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_14_53__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_14_53__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_16_01_2021_14_53_[Default_Changelist]" date="1610805391574" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_14_53_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 16/01/2021 14:53 [Default Changelist]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_14_53_[Default_Changelist]/shelved.patch
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_14_53_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_14_53_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,599 +0,0 @@
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20_[Default_Changelist]/shelved.patch
-===================================================================
---- .idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20_[Default_Changelist]/shelved.patch	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
-+++ .idea/shelf/Uncommitted_changes_before_Update_at_02_01_2021_18_20_[Default_Changelist]/shelved.patch	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
-@@ -1,248 +0,0 @@
--Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.Manifest;\r\nimport android.app.Activity;\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.content.res.ColorStateList;\r\nimport android.location.Address;\r\nimport android.location.Geocoder;\r\nimport android.location.Location;\r\nimport android.location.LocationManager;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.os.StrictMode;\r\nimport android.provider.Settings;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvModel;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.location.FusedLocationProviderClient;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.annotations.NotNull;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.squareup.okhttp.Call;\r\nimport com.squareup.okhttp.Callback;\r\nimport com.squareup.okhttp.OkHttpClient;\r\nimport com.squareup.okhttp.Request;\r\nimport com.squareup.okhttp.Response;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link DashboardFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class DashboardFragment extends Fragment implements MqttCallback{\r\n\r\n    private RecyclerView recyclerView;\r\n    private StaticRvAdapter staticRvAdapter;\r\n    private TabLayout tabLayout;\r\n    private ViewPager viewPager;\r\n    //WEATHER\r\n    private static  final int REQUEST_LOCATION=1;\r\n    double lat;\r\n    double longi;\r\n\r\n    TextView showLocationTxt;\r\n\r\n    LocationManager locationManager;\r\n    String latitude,longitude;\r\n\r\n    TextView view_city;\r\n    TextView view_temp;\r\n    TextView view_desc;\r\n    TextView view_country;\r\n\r\n    ImageView view_weather;\r\n    //\r\n\r\n\r\n    public static MqttClient client = null;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public DashboardFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment DashboardFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static DashboardFragment newInstance(String param1, String param2) {\r\n        DashboardFragment fragment = new DashboardFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_dashboard, container, false);\r\n        //FIREBASE\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        final FirebaseUser usuario = mAuth.getCurrentUser();\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=usuario.getUid();\r\n        //guardo el nombre en un textView\r\n        /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);\r\n        String res=\"Hola\"+\" \"+usuario.getDisplayName();\r\n        nombre.setText(res);\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(usuario.getDisplayName() == null){\r\n                    String res1=\"Hola\"+\" \"+snapshot.getString(\"username\");\r\n                    nombre.setText(res1);\r\n                }\r\n            }\r\n        });*/\r\n\r\n        //switch methods\r\n /*     Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });*/\r\n\r\n\r\n        //WEATHER\r\n        ActivityCompat.requestPermissions(getActivity(),new String[]\r\n                {Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n\r\n        view_city =v.findViewById(R.id.town);\r\n        view_city.setText(\"\");\r\n        view_temp =v.findViewById(R.id.temp);\r\n        view_temp.setText(\"\");\r\n        view_desc =v.findViewById(R.id.desc);\r\n        view_desc.setText(\"\");\r\n        view_country=v.findViewById(R.id.txtCountry);\r\n        view_country.setText(\"\");\r\n        view_weather =v.findViewById(R.id.wheather_image);\r\n\r\n        locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);\r\n        inicioGPS();\r\n        //\r\n\r\n\r\n\r\n\r\n        //RECYCLER VIEW\r\n        ArrayList<StaticRvModel> item=new ArrayList<>();\r\n        item.add(new StaticRvModel(R.drawable.icons_sun,\"Soleado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_night_mode,\"Nocturno\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_energy_saving,\"Ahorro\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_power_off,\"Apagado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_custom,\"Custom\"));\r\n\r\n        final TextView medidasT=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidasH=v.findViewById(R.id.medidaHumedadGeneral);\r\n        final TextView medidasS=v.findViewById(R.id.medidaSalinidadGeneral);\r\n        final TextView medidasL=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n\r\n        recyclerView=v.findViewById(R.id.rv_1);\r\n        staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(),LinearLayoutManager.HORIZONTAL,false));\r\n        recyclerView.setAdapter(staticRvAdapter);\r\n\r\n\r\n        //TABS\r\n        tabLayout = v.findViewById(R.id.tab_layout);\r\n        viewPager = v.findViewById(R.id.view_pager);\r\n         //Array\r\n        ArrayList<String> arrayList = new ArrayList<>();\r\n\r\n        //set up with viewpager\r\n        tabLayout.setupWithViewPager(viewPager);\r\n\r\n        TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());\r\n        //Pestañas\r\n        adapter.addFrag(new GeneralFragment(),\"General\");\r\n        adapter.addFrag(new Planta1Fragment(),\"Planta 1\");\r\n        adapter.addFrag(new Planta2Fragment(),\"Planta 2\");\r\n\r\n        viewPager.setAdapter(adapter );\r\n\r\n        /*((MainActivity)getActivity()).ola();*/\r\n     /*   //LEER DATOS FIREBASE\r\n        //Temperatura\r\n       DocumentReference documentTemperatura=fStore.collection(\"SensoresA-T\").document(\"Temperatura\");\r\n        documentTemperatura.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediTemp=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasT.setText(resMediTemp);\r\n            }\r\n        });\r\n        //Humedad\r\n        DocumentReference documentHumedad=fStore.collection(\"SensoresA-T\").document(\"Humedad\");\r\n        documentHumedad.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediHum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasH.setText(resMediHum);\r\n            }\r\n        });\r\n        //Iluminación\r\n        DocumentReference documentIluminación=fStore.collection(\"SensoresA-T\").document(\"Iluminación\");\r\n        documentIluminación.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIlum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasL.setText(resMediIlum);\r\n            }\r\n        });\r\n        //Temperatura ambiente\r\n        DocumentReference documentambiente=fStore.collection(\"SensoresA-T\").document(\"Temperatura ambiente\");\r\n        documentambiente.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIAmb=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasS.setText(resMediIAmb);\r\n            }\r\n        });\r\n\r\n      */\r\n\r\n        return v;\r\n    }\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n\r\n\r\n    //WEATHER METHODS\r\n    private void api_key(final String City) {\r\n        OkHttpClient client = new OkHttpClient();\r\n\r\n        Request request = new Request.Builder()\r\n                .url(\"https://api.openweathermap.org/data/2.5/weather?q=\" + City + \"&appid=a6f41d947e0542a26580bcd5c3fb90ef&units=metric\")\r\n                .get()\r\n                .build();\r\n        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n        StrictMode.setThreadPolicy(policy);\r\n        try {\r\n            Response response = client.newCall(request).execute();\r\n            client.newCall(request).enqueue(new Callback() {\r\n                @Override\r\n                public void onFailure(Request request, IOException e) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onResponse(Response response) throws IOException {\r\n                    String responseData = response.body().string();\r\n                    try {\r\n                        JSONObject json = new JSONObject(responseData);\r\n                        JSONArray array = json.getJSONArray(\"weather\");\r\n                        JSONObject object = array.getJSONObject(0);\r\n\r\n                        String description = object.getString(\"description\");\r\n                        String icons = object.getString(\"icon\");\r\n\r\n                        JSONObject temp1 = json.getJSONObject(\"main\");\r\n                        Double Temperature = temp1.getDouble(\"temp\");\r\n\r\n                        setText(view_city, City);\r\n\r\n                        String temps = Math.round(Temperature) + \" °C\";\r\n                        setText(view_temp, temps);\r\n                        setText(view_desc, description);\r\n                        setImage(view_weather, icons);\r\n\r\n                    } catch (JSONException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n\r\n            });\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    private void setText(final TextView text, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                text.setText(value);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setImage(final ImageView imageView, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                //paste switch\r\n                switch (value) {\r\n                    case \"01d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"01n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"02d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"02n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"03d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"03n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"04d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"04n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"09d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"09n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"10d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"10n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"11d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"11n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"13d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    case \"13n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    default:\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.wheather));\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    //App location\r\n    private void getLocation() {\r\n\r\n        //Check Permissions again\r\n\r\n        /*if (ActivityCompat.checkSelfPermission(\r\n                getContext(),Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(\r\n                getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n        } else {\r\n\r\n            Location LocationNetwork=locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);\r\n             if (LocationNetwork !=null)\r\n            {\r\n                double lat=LocationNetwork.getLatitude();\r\n                double longi=LocationNetwork.getLongitude();\r\n\r\n                latitude=String.valueOf(lat);\r\n                longitude=String.valueOf(longi);\r\n                loc_func(LocationNetwork);\r\n                api_key(String.valueOf(view_city.getText()));\r\n                showLocationTxt.setText(\"Your Location:\"+\"\\n\"+\"Latitude= \"+latitude+\"\\n\"+\"Longitude= \"+longitude);\r\n            }\r\n\r\n        }*/\r\n\r\n    }\r\n\r\n    private void OnGPS() {\r\n\r\n        final AlertDialog.Builder builder= new AlertDialog.Builder(getContext());\r\n\r\n        builder.setMessage(\"Enable GPS\").setCancelable(false).setPositiveButton(\"YES\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS));\r\n                getLocation();\r\n            }\r\n        }).setNegativeButton(\"NO\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                dialog.cancel();\r\n            }\r\n        });\r\n        final AlertDialog alertDialog=builder.create();\r\n        alertDialog.show();\r\n    }\r\n\r\n    private void loc_func(Location location){\r\n        try {\r\n            Geocoder geocoder=new Geocoder(getContext());\r\n            List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);\r\n            String address = addresses.get(0).getSubLocality();\r\n            String cityName = addresses.get(0).getLocality();\r\n            String stateName = addresses.get(0).getAdminArea();\r\n            String country = addresses.get(0).getCountryName();\r\n            //txt_paddress.setText(address);\r\n            view_city.setText(cityName);\r\n            view_country.setText(country);\r\n            //txt_state.setText(stateName);*/\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            Toast.makeText(getContext(), \"Error:\"+e, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void inicioGPS(){\r\n\r\n\r\n        //Check gps is enable or not\r\n\r\n        if (!locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))\r\n        {\r\n            //Write Function To enable gps\r\n\r\n            OnGPS();\r\n        }\r\n        else\r\n        {\r\n            //GPS is already On then\r\n\r\n            getLocation();\r\n        }\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
--+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(date 1609523605203)
--@@ -201,7 +201,7 @@
--         view_weather =v.findViewById(R.id.wheather_image);
-- 
--         locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);
---        inicioGPS();
--+       /* inicioGPS();*/
--         //
-- 
-- 
--@@ -501,7 +501,7 @@
--     }
-- 
--     //App location
---    private void getLocation() {
--+   /* private void getLocation() {
-- 
--         //Check Permissions again
-- 
--@@ -519,12 +519,12 @@
-- 
--                 latitude=String.valueOf(lat);
--                 longitude=String.valueOf(longi);
---                loc_func(LocationNetwork);
---                api_key(String.valueOf(view_city.getText()));
--+               /* loc_func(LocationNetwork);*/
--+              /*  api_key(String.valueOf(view_city.getText()));
--                 showLocationTxt.setText("Your Location:"+"\n"+"Latitude= "+latitude+"\n"+"Longitude= "+longitude);
--             }
-- 
---        }*/
--+        }
-- 
--     }
-- 
--@@ -553,8 +553,8 @@
--         try {
--             Geocoder geocoder=new Geocoder(getContext());
--             List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);
---            String address = addresses.get(0).getSubLocality();
---            String cityName = addresses.get(0).getLocality();
--+            /*String address = addresses.get(0).getSubLocality();*/
--+           /* String cityName = addresses.get(0).getLocality();
--             String stateName = addresses.get(0).getAdminArea();
--             String country = addresses.get(0).getCountryName();
--             //txt_paddress.setText(address);
--@@ -562,7 +562,7 @@
--             view_country.setText(country);
--             //txt_state.setText(stateName);*/
-- 
---        } catch (IOException e) {
--+       /* } catch (IOException e) {
--             e.printStackTrace();
--             Toast.makeText(getContext(), "Error:"+e, Toast.LENGTH_SHORT).show();
--         }
--@@ -583,7 +583,7 @@
--         {
--             //GPS is already On then
-- 
---            getLocation();
---        }
---    }
--+            /*getLocation();*/
--+ /*       }
--+    }*/
-- }
--\ No newline at end of file
--Index: app/src/main/res/layout/fragment_login.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.login.LogActivity\" >\r\n\r\n    <ImageView\r\n        android:id=\"@+id/imageView4\"\r\n        android:layout_width=\"254dp\"\r\n        android:layout_height=\"188dp\"\r\n        android:contentDescription=\"@string/title_wellcome_login\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"\r\n        app:layout_constraintVertical_bias=\"0.0\"\r\n        app:srcCompat=\"@drawable/stickerlog\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/textView3\"\r\n        android:layout_width=\"184dp\"\r\n        android:layout_height=\"20dp\"\r\n        android:layout_marginTop=\"40dp\"\r\n        android:layout_marginEnd=\"52dp\"\r\n        android:text=\"@string/title_wellcome_login\"\r\n        android:textColor=\"@color/colorPrimaryLight\"\r\n        android:textSize=\"16sp\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/imageView4\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n    <TextView\r\n        android:id=\"@+id/textView4\"\r\n        android:layout_width=\"151dp\"\r\n        android:layout_height=\"32dp\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:layout_marginEnd=\"84dp\"\r\n        android:text=\"@string/title_orderLog\"\r\n        android:textColor=\"@color/colorPrimary\"\r\n        android:textSize=\"26sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/imageView4\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/textView3\" />\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"530dp\"\r\n        android:orientation=\"vertical\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/imageView4\"\r\n        app:layout_constraintVertical_bias=\"0.527\">\r\n\r\n        <ImageView\r\n            android:id=\"@+id/imageView3\"\r\n            android:layout_width=\"254dp\"\r\n            android:layout_height=\"146dp\"\r\n            android:layout_gravity=\"center_horizontal\"\r\n            android:layout_marginBottom=\"70dp\"\r\n            android:contentDescription=\"@string/title_wellcome_login\"\r\n            app:srcCompat=\"@drawable/logo_and_text\" />\r\n\r\n        <!--<Button\r\n               android:id=\"@+id/btn_facebook\"\r\n               android:layout_width=\"match_parent\"\r\n               android:layout_height=\"wrap_content\"\r\n               android:background=\"@drawable/btn_facebook\"\r\n               android:drawableLeft=\"@drawable/ic_facebook_icon\"\r\n               android:paddingLeft=\"20dp\"\r\n               android:textColor=\"#FFFF\"\r\n               android:layout_marginLeft=\"20dp\"\r\n               android:layout_marginRight=\"20dp\"\r\n               android:text=\"@string/title_cont_faceboock\" /> -->\r\n        <com.facebook.login.widget.LoginButton\r\n            android:id=\"@+id/btn_facebook\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:background=\"@drawable/btn_facebook\"\r\n            android:drawableLeft=\"@drawable/ic_facebook_icon\"\r\n            android:paddingLeft=\"20dp\"\r\n            android:textColor=\"#FFFF\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginRight=\"20dp\"\r\n            android:text=\"@string/title_cont_faceboock\" />\r\n        <!-- <com.facebook.login.widget.LoginButton\r\n            android:id=\"@+id/login_button\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center_horizontal\"\r\n            android:layout_marginTop=\"30dp\"\r\n            android:layout_marginBottom=\"30dp\" />  -->\r\n\r\n        <com.google.android.gms.common.SignInButton\r\n            android:id=\"@+id/btn_google\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginRight=\"20dp\"\r\n            android:background=\"@drawable/btn_google\"\r\n            android:drawableLeft=\"@drawable/ic_google_icon\"\r\n            android:text=\"@string/title_cont_google\"\r\n            android:textColor=\"#000000\" />\r\n\r\n        <Button\r\n            android:id=\"@+id/btn_mail\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginRight=\"20dp\"\r\n            android:background=\"@drawable/btn_mail\"\r\n            android:drawableLeft=\"@drawable/ic_mail_icon\"\r\n            android:onClick=\"Email\"\r\n            android:paddingLeft=\"20dp\"\r\n            android:text=\"@string/title_cont_mail\"\r\n            android:textColor=\"#000000\" />\r\n\r\n    </LinearLayout>\r\n\r\n\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/res/layout/fragment_login.xml	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
--+++ app/src/main/res/layout/fragment_login.xml	(date 1609520835155)
--@@ -5,7 +5,7 @@
--     xmlns:tools="http://schemas.android.com/tools"
--     android:layout_width="match_parent"
--     android:layout_height="match_parent"
---    tools:context=".ui.login.LogActivity" >
--+     >
-- 
--     <ImageView
--         android:id="@+id/imageView4"
--Index: app/src/main/AndroidManifest.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.infinitycrop\">\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/>\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\"/>\r\n    <uses-permission android:name=\"android.permission.INTERNET\"/>\r\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" />\r\n    <!--Permisos Qr-->\r\n    <uses-permission android:name=\"android.permission.CAMERA\"/>\r\n    <uses-feature android:name=\"android.hardware.camera\"></uses-feature>\r\n    <uses-feature android:name=\"android.hardware.camera.autofocus\"></uses-feature>\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher\"\r\n        android:theme=\"@style/AppThemeHome\"\r\n        >\r\n\r\n        <activity android:name=\".MainActivity\" android:theme=\"@style/SplashTheme\">\r\n        </activity>\r\n        <service android:name=\"com.example.infinitycrop.ui.service.ServicioMqtt\" />\r\n        <activity android:name=\"com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\">\r\n\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.HelpProfile\">\r\n\r\n        </activity>\r\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\"></activity>\r\n        <activity android:name=\".ui.list_machine.AddMachine\"></activity>\r\n        <activity android:name=\".ui.logmail.RegisterActivity\"></activity>\r\n        <activity android:name=\".ui.logmail.LoginActivity\"></activity>\r\n        <activity android:name=\".ui.list_machine.CaptureAct\"></activity>\r\n        <activity android:name=\"com.example.infinitycrop.ui.login.LogActivity\"></activity>\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\"></activity>\r\n        <activity android:name=\".ui.profile.settings.ModifyProfile\"></activity>\r\n\r\n\r\n\r\n\r\n        <meta-data android:name=\"com.google.android.geo.API_KEY\"\r\n            android:value=\"@string/google_maps_key\" />\r\n\r\n        <meta-data android:name=\"com.facebook.sdk.ApplicationId\"\r\n            tools:replace=\"android:value\"\r\n            android:value=\"@string/facebook_app_id\"/>\r\n        <meta-data\r\n            android:name=\"preloaded_fonts\"\r\n            android:resource=\"@array/preloaded_fonts\" />\r\n\r\n\r\n    </application>\r\n\r\n</manifest>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/AndroidManifest.xml	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
--+++ app/src/main/AndroidManifest.xml	(date 1609520835161)
--@@ -44,7 +44,7 @@
--         <activity android:name=".ui.list_machine.CaptureAct"></activity>
--         <activity android:name="com.example.infinitycrop.ui.login.LogActivity"></activity>
--         <activity android:name=".ui.LoadAnimations.IntroductoryActivity2"></activity>
---        <activity android:name=".ui.profile.settings.ModifyProfile"></activity>
--+        <activity android:name=".ui.LoadAnimations.LogprimeraActivity"></activity>
-- 
-- 
-- 
--Index: app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.list_machine;\r\n\r\nimport android.content.Intent;\r\nimport android.media.Image;\r\nimport android.os.Bundle;\r\nimport android.os.Parcelable;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.ItemTouchHelper;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.logmail.RegisterActivity;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerAdapter;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\nimport com.google.android.material.bottomsheet.BottomSheetDialog;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.Query;\r\n\r\nimport java.text.BreakIterator;\r\nimport java.util.Map;\r\n\r\npublic class MainActivityMachineList extends AppCompatActivity {\r\n    private FirebaseFirestore firebaseFirestore;\r\n    private RecyclerView mFirestoreList;\r\n    private Adapter adapter;\r\n    private FirebaseAuth firebaseAuth;\r\n    Button addBtn;//boton añadir nueva maquina\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_list_machines);\r\n        firebaseFirestore=FirebaseFirestore.getInstance();\r\n        mFirestoreList=findViewById(R.id.firestore_list);\r\n        firebaseAuth=FirebaseAuth.getInstance();\r\n        String uid=firebaseAuth.getUid();\r\n        //Query\r\n        Query query=firebaseFirestore\r\n                .collection(\"Machine\")\r\n                .whereEqualTo(\"userUID\", uid)\r\n                .orderBy(\"priority\",Query.Direction.ASCENDING);\r\n        //RecyclerView\r\n        FirestoreRecyclerOptions<MachineModel> options=new FirestoreRecyclerOptions.Builder<MachineModel>()\r\n                .setQuery(query, MachineModel.class)\r\n                .build();\r\n        //View Holder\r\n        adapter= new Adapter(options);\r\n        mFirestoreList.setHasFixedSize(true);\r\n        mFirestoreList.setLayoutManager(new LinearLayoutManager(this));\r\n        mFirestoreList.setAdapter(adapter);\r\n\r\n        new ItemTouchHelper(new ItemTouchHelper.SimpleCallback(0,\r\n                ItemTouchHelper.LEFT | ItemTouchHelper.RIGHT) {\r\n            @Override\r\n            public boolean onMove(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder, RecyclerView.ViewHolder target) {\r\n                return false;\r\n            }\r\n            @Override\r\n            public void onSwiped(RecyclerView.ViewHolder viewHolder, int direction) {\r\n                Toast.makeText(getApplicationContext(), \"Maquina eliminada con éxito\", Toast.LENGTH_SHORT).show();\r\n                adapter.deleteItem(viewHolder.getAdapterPosition());\r\n            }\r\n        }).attachToRecyclerView(mFirestoreList);\r\n\r\n        adapter.setOnItemClickListener(new Adapter.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(DocumentSnapshot documentSnapshot, int position) {\r\n                //documentSnapshot.getData() -> devuelve all que tiene la maquina en firebase\r\n                MachineModel machine = documentSnapshot.toObject(MachineModel.class);\r\n                final String id = documentSnapshot.getId();\r\n                final String path = documentSnapshot.getString(\"description\"); //devuelve ruta en firebase Machine\\madara\r\n                //botttom sheet\r\n                final BottomSheetDialog bottomSheetDialog=new BottomSheetDialog(MainActivityMachineList.this);\r\n                bottomSheetDialog.setContentView(R.layout.machine_bottom_sheet);\r\n                Button btnenter=bottomSheetDialog.findViewById(R.id.enterMachineButton);\r\n                Button btnmodify=bottomSheetDialog.findViewById(R.id.madifyMachineButton);\r\n                Button btncancel=bottomSheetDialog.findViewById(R.id.cancelMachineButton);\r\n                btnenter.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        Intent intent = new Intent(getBaseContext(), MainActivity.class);\r\n                        intent.putExtra(\"machine\", id);\r\n                        intent.putExtra(\"description\", path);\r\n                        startActivity(intent);\r\n                    }\r\n                });\r\n                btnmodify.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        //poner aca Intent para acceder al layout de modificar maquina\r\n                        //hay que pasarle un intent con extra como he hecho en el onClick de arriba\r\n                        //lo que necesitas para modificar es la variable id\r\n                        //encuentras en firebase la maquina con el id y haces la magia de modificar etc..\r\n                        //lo de maquina a favoritos es facil , si es 1 es favoirto si es 2 no lo es.\r\n                        //ejemplo\r\n                        /*Intent intent = new Intent(getBaseContext(), MainActivity.class);//Main por tu clase\r\n                        intent.putExtra(\"machine\", id);\r\n                        startActivity(intent);*/\r\n                    }\r\n                });\r\n                btncancel.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        bottomSheetDialog.cancel();\r\n                    }\r\n                });\r\n                bottomSheetDialog.show();\r\n\r\n\r\n            }\r\n        });\r\n\r\n        FloatingActionButton addbtn = (FloatingActionButton) findViewById(R.id.button_add_machine);\r\n        addbtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent (getApplicationContext(), AddMachine.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        adapter.stopListening();\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        adapter.startListening();\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
--+++ app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(date 1609606384560)
--@@ -50,7 +50,7 @@
--         //Query
--         Query query=firebaseFirestore
--                 .collection("Machine")
---                .whereEqualTo("userUID", uid)
--+               .whereEqualTo("userUID", uid)
--                 .orderBy("priority",Query.Direction.ASCENDING);
--         //RecyclerView
--         FirestoreRecyclerOptions<MachineModel> options=new FirestoreRecyclerOptions.Builder<MachineModel>()
--Index: app/src/main/java/com/example/infinitycrop/ui/login/LogActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.login;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity2;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.MainActivityMachineList;\r\nimport com.example.infinitycrop.ui.logmail.LoginActivity;\r\nimport com.facebook.AccessToken;\r\nimport com.facebook.AccessTokenTracker;\r\nimport com.facebook.CallbackManager;\r\nimport com.facebook.FacebookCallback;\r\nimport com.facebook.FacebookException;\r\nimport com.facebook.login.LoginResult;\r\nimport com.facebook.login.widget.LoginButton;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInAccount;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.common.SignInButton;\r\nimport com.google.android.gms.common.api.ApiException;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthCredential;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FacebookAuthProvider;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.auth.GoogleAuthProvider;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.facebook.FacebookSdk;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\n\r\npublic class LogActivity extends AppCompatActivity{\r\n    /*private GoogleApiClient googleApiClient;\r\n    private SignInButton signInButton;\r\n    public static final int SIGN_IN_CODE = 777;*/\r\n    //Variable para gestionar FirebaseAuth\r\n    private FirebaseAuth mAuth;\r\n    //Agregar cliente de inicio de sesión de Google\r\n    private GoogleSignInClient mGoogleSignInClient;\r\n    //Constante\r\n    int RC_SIGN_IN = 1;\r\n    SignInButton btnLogin,btnGoogle;\r\n    String TAG = \"GoogleSignIn\";\r\n\r\n    private FirebaseAuth.AuthStateListener authStateListener;\r\n    private AccessTokenTracker accessTokenTracker;\r\n    private LoginButton loginButtonFacebook;\r\n    private CallbackManager mCallbackManager;\r\n    private  static  final String TAG2 = \"FacebookAuthentication\";\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.fragment_login);\r\n        /*GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestEmail()\r\n                .build();\r\n        googleApiClient = new GoogleApiClient.Builder(this)\r\n        .enableAutoManage(this, this)\r\n        .addApi(Auth.GOOGLE_SIGN_IN_API,gso)\r\n        .build();\r\n        signInButton =findViewById(R.id.btn_google);\r\n        signInButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = Auth.GoogleSignInApi.getSignInIntent(googleApiClient);\r\n                startActivityForResult(intent,SIGN_IN_CODE);\r\n            }\r\n        });*/\r\n\r\n        //Botones\r\n        btnGoogle=findViewById(R.id.btn_google);\r\n        loginButtonFacebook = findViewById(R.id.btn_facebook);\r\n        loginButtonFacebook.setReadPermissions(\"email\",\"public_profile\");\r\n\r\n        //Listeners\r\n        btnGoogle.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                signIn();\r\n            }\r\n        });\r\n\r\n        // Configurar Google Sign In\r\n        GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestIdToken(getString(R.string.default_web_client_id))\r\n                .requestEmail()\r\n                .build();\r\n        // Crear un GoogleSignInClient con las opciones especificadas por gso.\r\n        mGoogleSignInClient = GoogleSignIn.getClient(this, gso);\r\n\r\n\r\n\r\n        // Inicializar Firebase Auth\r\n        mAuth = FirebaseAuth.getInstance();\r\n        FacebookSdk.sdkInitialize(getApplicationContext());\r\n\r\n        //Facebook\r\n        mCallbackManager = CallbackManager.Factory.create();\r\n        loginButtonFacebook.registerCallback(mCallbackManager, new FacebookCallback<LoginResult>() {\r\n            @Override\r\n            public void onSuccess(LoginResult loginResult) {\r\n                Log.d(TAG2,\"onSuccess\"+loginResult);\r\n                handleFacebookToken(loginResult.getAccessToken());\r\n            }\r\n\r\n            @Override\r\n            public void onCancel() {\r\n                Log.d(TAG2,\"onCancel\");\r\n            }\r\n\r\n            @Override\r\n            public void onError(FacebookException error) {\r\n                Log.d(TAG2,\"onError: \"+error);\r\n            }\r\n\r\n        });\r\n\r\n        authStateListener = new FirebaseAuth.AuthStateListener() {\r\n            @Override\r\n            public void onAuthStateChanged(@NonNull FirebaseAuth firebaseAuth) {\r\n                FirebaseUser user = firebaseAuth.getCurrentUser();\r\n                if(user!=null){\r\n                    Intent dashboardActivity = new Intent(LogActivity.this, MainActivityMachineList.class);\r\n                    startActivity(dashboardActivity);\r\n                    LogActivity.this.finish();\r\n                }\r\n            }\r\n        };\r\n\r\n        accessTokenTracker = new AccessTokenTracker() {\r\n            @Override\r\n            protected void onCurrentAccessTokenChanged(AccessToken oldAccessToken, AccessToken currentAccessToken) {\r\n                if(currentAccessToken == null){\r\n                    mAuth.signOut();\r\n                }\r\n            }\r\n        };\r\n\r\n    }\r\n    private void signIn() {\r\n        Intent signInIntent = mGoogleSignInClient.getSignInIntent();\r\n        startActivityForResult(signInIntent, RC_SIGN_IN);\r\n    }\r\n\r\n    @Override\r\n    public void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        mCallbackManager.onActivityResult(requestCode,resultCode,data);\r\n\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        //Resultado devuelto al iniciar el Intent de GoogleSignInApi.getSignInIntent (...);\r\n        // Result returned from launching the Intent from GoogleSignInApi.getSignInIntent(...);\r\n        if (requestCode == RC_SIGN_IN) {\r\n            Task<GoogleSignInAccount> task = GoogleSignIn.getSignedInAccountFromIntent(data);\r\n            if(task.isSuccessful()){\r\n                try {\r\n                    // Google Sign In was successful, authenticate with Firebase\r\n                    GoogleSignInAccount account = task.getResult(ApiException.class);\r\n                    Log.d(TAG, \"firebaseAuthWithGoogle:\" + account.getId());\r\n                    firebaseAuthWithGoogle(account.getIdToken());\r\n                } catch (ApiException e) {\r\n                    // Google Sign In fallido, actualizar GUI\r\n                    Log.w(TAG, \"Google sign in failed\", e);\r\n                }\r\n            }else{\r\n                Log.d(TAG, \"Error, login no exitoso:\" + task.getException().toString());\r\n                Toast.makeText(this, \"Ocurrio un error. \"+task.getException().toString(),\r\n                        Toast.LENGTH_LONG).show();\r\n            }\r\n        }\r\n    }\r\n    private void firebaseAuthWithGoogle(String idToken) {\r\n        AuthCredential credential = GoogleAuthProvider.getCredential(idToken, null);\r\n        mAuth.signInWithCredential(credential)\r\n                .addOnCompleteListener(this, new OnCompleteListener<AuthResult>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<AuthResult> task) {\r\n                        if (task.isSuccessful()) {\r\n                            FirebaseFirestore db=FirebaseFirestore.getInstance();\r\n                            String userID= mAuth.getCurrentUser().getUid();\r\n                            String name= mAuth.getCurrentUser().getDisplayName();\r\n                            String mail= mAuth.getCurrentUser().getEmail();\r\n                            Map<String, Object> data = new HashMap<>();\r\n                            data.put(\"username\", name);\r\n                            data.put(\"mail\", mail);\r\n                            db.collection(\"Usuarios\").document(userID)\r\n                                    .set(data);\r\n                            /*db.collection(\"Usuarios\").document(userID)\r\n                                    .collection(\"Maquinas\").document(\"fecha\")\r\n                                    .set(data);*/\r\n\r\n                            // Sign in success, update UI with the signed-in user's information\r\n                            Log.d(TAG, \"signInWithCredential:success\");\r\n                            //FirebaseUser user = mAuth.getCurrentUser();\r\n                            //Iniciar DASHBOARD u otra actividad luego del SigIn Exitoso\r\n                            Intent dashboardActivity = new Intent(LogActivity.this, IntroductoryActivity2.class);\r\n                            startActivity(dashboardActivity);\r\n                            LogActivity.this.finish();\r\n                        } else {\r\n                            // If sign in fails, display a message to the user.\r\n                            Log.w(TAG, \"signInWithCredential:failure\", task.getException());\r\n\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n    @Override\r\n    protected void onStart() {\r\n        FirebaseUser user = mAuth.getCurrentUser();\r\n        if(user!=null){ //si no es null el usuario ya esta logueado\r\n            //mover al usuario al dashboard\r\n            Intent dashboardActivity = new Intent(LogActivity.this, MainActivityMachineList.class);\r\n            startActivity(dashboardActivity);\r\n        }\r\n        super.onStart();\r\n        mAuth.addAuthStateListener(authStateListener);\r\n    }\r\n    //metodo para navegar entre activitys con los botones\r\n    public void Email (View view){\r\n        Intent email = new Intent(this, LoginActivity.class);\r\n        startActivity(email);\r\n    }\r\n   /* @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if(requestCode == SIGN_IN_CODE){\r\n            GoogleSignInResult result = Auth.GoogleSignInApi.getSignInResultFromIntent(data);\r\n            handleSignResult(result);\r\n        }\r\n    }\r\n\r\n    private void handleSignResult(GoogleSignInResult result) {\r\n        if (result.isSuccess()){\r\n            goMainScreen();\r\n        }else{\r\n            Toast.makeText(this, \"Error al iniciar sesión\", Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void goMainScreen() {\r\n       Intent intent=new Intent(this, MainActivity.class);\r\n       startActivity(intent);\r\n    }\r\n\r\n    //metodo para navegar entre activitys con los botones\r\n    public void Email (View view){\r\n        Intent email = new Intent(this, LoginActivity.class);\r\n        startActivity(email);\r\n    }\r\n\r\n    @Override\r\n    public void onConnectionFailed(@NonNull ConnectionResult connectionResult) {\r\n\r\n    }*/\r\n    //Funciones Login con facebook\r\n    private void handleFacebookToken(AccessToken token){\r\n        Log.d(TAG2,\"handleFacebookToken\" + token);\r\n\r\n        AuthCredential credential = FacebookAuthProvider.getCredential(token.getToken());\r\n        mAuth.signInWithCredential(credential).addOnCompleteListener(this, new OnCompleteListener<AuthResult>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<AuthResult> task) {\r\n                if(task.isSuccessful()){\r\n                    Log.d(TAG2,\"sing in with credential: successfully\");\r\n                    FirebaseUser user = mAuth.getCurrentUser();\r\n                    if(user!=null){ //si no es null el usuario ya esta logueado\r\n                        Intent dashboardActivity = new Intent(LogActivity.this, MainActivityMachineList.class);\r\n                        startActivity(dashboardActivity);\r\n                    }\r\n                }else{\r\n                    Log.d(TAG2,\"sing in with credential: failed\", task.getException());\r\n                    Toast.makeText(LogActivity.this,\"Authentication Failed\", Toast.LENGTH_SHORT);\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        if(authStateListener != null){\r\n            mAuth.removeAuthStateListener(authStateListener);\r\n            finish();\r\n        }\r\n    }\r\n\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/login/LogActivity.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
--+++ app/src/main/java/com/example/infinitycrop/ui/login/LogActivity.java	(date 1609520835136)
--@@ -63,7 +63,7 @@
--     @Override
--     protected void onCreate(Bundle savedInstanceState) {
--         super.onCreate(savedInstanceState);
---        setContentView(R.layout.fragment_login);
--+       /* setContentView(R.layout.fragment_login);*/
--         /*GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)
--                 .requestEmail()
--                 .build();
--Index: app/src/main/java/com/example/infinitycrop/ui/logmail/RegisterActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.logmail;\r\n\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.text.TextUtils;\r\nimport android.view.View;\r\nimport android.widget.EditText;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.infinitycrop.ui.LoadAnimations.IntroductoryActivity2;\r\nimport com.example.infinitycrop.R;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseAuthUserCollisionException;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class RegisterActivity extends AppCompatActivity {\r\n    //objetos visibles\r\n    private EditText Textmail;\r\n    private EditText Textname;\r\n    private EditText Textpassword;\r\n    private LinearLayout Btnregistrar;\r\n    private ProgressDialog progressDialog;\r\n    //objeto firebase\r\n    private FirebaseAuth mAuth;\r\n    private FirebaseFirestore fStore;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_register);\r\n        mAuth = FirebaseAuth.getInstance();\r\n        fStore=FirebaseFirestore.getInstance();\r\n        //referenciamos los views\r\n        Textmail = (EditText) findViewById(R.id.editTextTextPersonName);\r\n        Textname = (EditText) findViewById(R.id.editTextTextPersonName2);\r\n        Textpassword = (EditText) findViewById(R.id.editTextTextPassword);\r\n\r\n        Btnregistrar = (LinearLayout) findViewById(R.id.btn_login);\r\n        progressDialog =new ProgressDialog(this);\r\n\r\n        //atacamos el listener al boton\r\n        Btnregistrar.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                onclick(v);\r\n            }\r\n        });\r\n\r\n\r\n\r\n    }\r\n    public void onclick(View view){\r\n        //invocamos al metodo\r\n        registrarUsuario();\r\n    }\r\n    private void registrarUsuario(){\r\n        //obtendremos el email y la contraseña desde la caja de texto\r\n        final String email = Textmail.getText().toString().trim();\r\n        final String nombre = Textname.getText().toString().trim();\r\n        String password = Textpassword.getText().toString().trim();\r\n\r\n        //verificamos si las cajas estan vacias o no\r\n        if(TextUtils.isEmpty(email)){\r\n            Toast.makeText(this,\"Debes introducir un correo\",Toast.LENGTH_LONG).show();\r\n            return;\r\n        }\r\n        if(TextUtils.isEmpty(password)){\r\n            Toast.makeText(this,\"Debes introducir una contraseña\",Toast.LENGTH_LONG).show();\r\n            return;\r\n        }\r\n        if(TextUtils.isEmpty(nombre)){\r\n            Toast.makeText(this,\"Debes introducir una nombre\",Toast.LENGTH_LONG).show();\r\n            return;\r\n        }\r\n        progressDialog.setMessage(\"Registrando obteniendo contenido en línea...\");\r\n        progressDialog.show();\r\n        //creando un nuevo usuario\r\n        mAuth.createUserWithEmailAndPassword(email,password).addOnCompleteListener( this, new OnCompleteListener<AuthResult>() {\r\n\r\n            @Override\r\n            public void onComplete(@NonNull Task<AuthResult> task) {\r\n                //comprovar si el resultado ha sido resuelto correctamente\r\n                if (task.isSuccessful()) {\r\n\r\n                    //enviar coorreo de confirmación\r\n                    FirebaseUser user = mAuth.getCurrentUser();\r\n                    user.sendEmailVerification().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            Toast.makeText(RegisterActivity.this,\"Verification has been send\",Toast.LENGTH_SHORT);\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n\r\n                            Toast.makeText(RegisterActivity.this,\"Error en el envío de correo\",Toast.LENGTH_SHORT);\r\n                        }\r\n                    });\r\n\r\n                    String userID= mAuth.getCurrentUser().getUid();\r\n                    DocumentReference documentReference=fStore.collection(\"Usuarios\").document(userID);\r\n                    Map<String,Object> datauser=new HashMap<>();\r\n                    datauser.put(\"username\",nombre);\r\n                    datauser.put(\"mail\",email);\r\n                    documentReference.set(datauser).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            Toast.makeText(RegisterActivity.this, \"Iniciando sesión\", Toast.LENGTH_LONG).show();\r\n                            Intent intencion = new Intent (getApplication(), IntroductoryActivity2.class);\r\n                            startActivity(intencion);\r\n                            finish();\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n\r\n                        }\r\n                    });\r\n\r\n\r\n\r\n                } else {\r\n                    if (task.getException() instanceof FirebaseAuthUserCollisionException) {//si se presenta una colisión\r\n                        Toast.makeText(RegisterActivity.this, \"Este Usuario ya existe\", Toast.LENGTH_SHORT).show();\r\n                    } else {\r\n                        Toast.makeText(RegisterActivity.this, \"No se puede registrar este usuario\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n\r\n                }\r\n                progressDialog.dismiss();\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void onStop() {\r\n        finish();\r\n        super.onStop();\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/logmail/RegisterActivity.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
--+++ app/src/main/java/com/example/infinitycrop/ui/logmail/RegisterActivity.java	(date 1609552727772)
--@@ -149,9 +149,5 @@
--         });
--     }
-- 
---    @Override
---    public void onStop() {
---        finish();
---        super.onStop();
---    }
--+
-- }
--Index: app/src/main/java/com/example/infinitycrop/ui/LoadAnimations/IntroductoryActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.LoadAnimations;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.app.Activity;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.os.CountDownTimer;\r\nimport android.widget.ImageView;\r\n\r\nimport com.airbnb.lottie.LottieAnimationView;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.login.LogActivity;\r\n\r\nimport static java.security.AccessController.getContext;\r\n\r\npublic class IntroductoryActivity extends AppCompatActivity {\r\n    ImageView logo,splashImg;\r\n    LottieAnimationView lottieAnimationView;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_introductory);\r\n        logo = findViewById(R.id.log);\r\n        splashImg = findViewById(R.id.img);\r\n        lottieAnimationView = findViewById(R.id.lottie);\r\n\r\n        splashImg.animate().translationY(-4000).setDuration(1000).setStartDelay(4000);\r\n        logo.animate().translationY(4000).setDuration(1000).setStartDelay(4000);\r\n        lottieAnimationView.animate().translationY(1600).setDuration(800).setStartDelay(3900);\r\n\r\n        if (this.equals(0)) {\r\n            finish();\r\n        }\r\n        new CountDownTimer(4660, 1000) {\r\n\r\n            public void onTick(long millisUntilFinished) {\r\n\r\n\r\n            }\r\n\r\n\r\n            public void onFinish() {\r\n                Intent intent= new Intent (getApplicationContext(), LogActivity.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n\r\n        }.start();\r\n\r\n    }\r\n    @Override\r\n    public void onStop() {\r\n        finish();\r\n        super.onStop();\r\n    }\r\n\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/LoadAnimations/IntroductoryActivity.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
--+++ app/src/main/java/com/example/infinitycrop/ui/LoadAnimations/IntroductoryActivity.java	(date 1609520835167)
--@@ -28,7 +28,7 @@
-- 
--         splashImg.animate().translationY(-4000).setDuration(1000).setStartDelay(4000);
--         logo.animate().translationY(4000).setDuration(1000).setStartDelay(4000);
---        lottieAnimationView.animate().translationY(1600).setDuration(800).setStartDelay(3900);
--+        lottieAnimationView.animate().translationY(1400).setDuration(800).setStartDelay(3900);
-- 
--         if (this.equals(0)) {
--             finish();
--@@ -42,7 +42,7 @@
-- 
-- 
--             public void onFinish() {
---                Intent intent= new Intent (getApplicationContext(), LogActivity.class);
--+                Intent intent= new Intent (getApplicationContext(), LogprimeraActivity.class);
--                 startActivity(intent);
-- 
--             }
--Index: app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.profile;\r\n\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.graphics.Bitmap;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.util.LruCache;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.android.volley.RequestQueue;\r\nimport com.android.volley.toolbox.ImageLoader;\r\nimport com.android.volley.toolbox.NetworkImageView;\r\nimport com.android.volley.toolbox.Volley;\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.MainActivityMachineList;\r\nimport com.example.infinitycrop.ui.login.LogActivity;\r\nimport com.example.infinitycrop.ui.profile.settings.AboutInfinityCrap;\r\nimport com.example.infinitycrop.ui.profile.settings.HelpProfile;\r\n//import com.example.infinitycrop.ui.profile.settings.ModifyProfile;\r\nimport com.firebase.ui.auth.AuthUI;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link ProfileFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class ProfileFragment extends Fragment {\r\n    //atributos para confirmación de correo\r\n    private FirebaseUser us;\r\n    private TextView txtverf;\r\n    private Button btnconf;\r\n\r\n\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public ProfileFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment ProfileFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static ProfileFragment newInstance(String param1, String param2) {\r\n        ProfileFragment fragment = new ProfileFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_profile, container, false);\r\n\r\n        ImageView irAPerfil =v.findViewById(R.id.irAEditarPerfil);\r\n        irAPerfil.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                /*Intent intent = new Intent(getActivity(), ModifyProfile.class);\r\n                startActivity(intent);*/\r\n            }\r\n        });\r\n\r\n        //Enlaces de los botones de configuracion\r\n        //personalice colors\r\n        RelativeLayout customColors_btn =v.findViewById(R.id.relativeLayout4);\r\n        customColors_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n            }\r\n        });\r\n        //about us\r\n        RelativeLayout aboutInfinity_btn =v.findViewById(R.id.relativeLayout6);\r\n        aboutInfinity_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), AboutInfinityCrap.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        //help\r\n        RelativeLayout help_profile =v.findViewById(R.id.relativeLayout5);\r\n        help_profile.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), HelpProfile.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        //firebase\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=mAuth.getCurrentUser().getUid();\r\n        final GoogleSignInClient mGoogleSignInClient;\r\n        GoogleSignInOptions gso;\r\n        final FirebaseUser usuario = FirebaseAuth.getInstance().getCurrentUser();\r\n        //guardo la imagen en un ImagenView\r\n        final ImageView img = (ImageView) v.findViewById(R.id.profile);\r\n        //guardo el nombre en un textView\r\n        final TextView nombre = (TextView) v.findViewById(R.id.username);\r\n        nombre.setText(usuario.getDisplayName());\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(nombre.getText() == \"\"){\r\n                    nombre.setText(snapshot.getString(\"username\"));\r\n                    img.setImageResource(R.drawable.icons_user);\r\n                }\r\n            }\r\n        });\r\n\r\n        //guardo el mail en un textView\r\n        TextView correo = (TextView) v.findViewById(R.id.mailUser);\r\n        correo.setText(usuario.getEmail());\r\n        //cargar imágen con glide:\r\n        Glide.with(this).load(usuario.getPhotoUrl()).into(img);\r\n        //boton cerrar sesion\r\n\r\n        //Configurar las gso para google signIn con el fin de luego desloguear de google\r\n        gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestIdToken(getString(R.string.default_web_client_id))\r\n                .requestEmail()\r\n                .build();\r\n        mGoogleSignInClient = GoogleSignIn.getClient(getActivity(), gso);\r\n\r\n        RelativeLayout cerrarSesion =(RelativeLayout) v.findViewById(R.id.btn_end_session);\r\n        cerrarSesion.setOnClickListener(new View.OnClickListener() {\r\n            public void onClick(View view) {\r\n                new AlertDialog.Builder(requireContext())\r\n                        .setTitle(\"Cerrar sesión\")\r\n                        .setMessage(\"¿Estas seguro que quieres cerrar sesión?\")\r\n                        .setPositiveButton(\"Confirmar\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n                                //Cerrar session con Firebase\r\n                                mAuth.signOut();\r\n                                //Cerrar sesión con google tambien: Google sign out\r\n                                mGoogleSignInClient.signOut().addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                                    @Override\r\n                                    public void onComplete(@NonNull Task<Void> task) {\r\n                                        //Abrir MainActivity con SigIn button\r\n                                        if(task.isSuccessful()){\r\n                                            Intent logActivity = new Intent(getActivity().getApplicationContext(), LogActivity.class);\r\n                                            startActivity(logActivity);\r\n                                            getActivity().finish();\r\n                                        }else{\r\n                                            Toast.makeText(getActivity().getApplicationContext(), \"No se pudo cerrar sesión con google\",\r\n                                                    Toast.LENGTH_LONG).show();\r\n                                        }\r\n                                    }\r\n                                });\r\n\r\n                            }\r\n                        })\r\n                        .setNegativeButton(\"Cancelar\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                            }\r\n                        })\r\n                        .show();\r\n\r\n\r\n            }\r\n        });\r\n\r\n        //Confirmación de verificación de correo\r\n        TextView txtverify = (TextView) v.findViewById(R.id.txtVerif);\r\n        Button btnverify = (Button) v.findViewById(R.id.btnverif);\r\n        final FirebaseUser user = mAuth.getCurrentUser();\r\n        if(!user.isEmailVerified()){\r\n            us=user;\r\n            txtverf = txtverify;\r\n            btnconf = btnverify;\r\n\r\n            txtverify.setVisibility(View.VISIBLE);\r\n            btnverify.setVisibility(View.VISIBLE);\r\n\r\n            btnverify.setOnClickListener(new View.OnClickListener()\r\n            {\r\n                @Override\r\n                public void onClick(final View v)\r\n                {\r\n\r\n                    FirebaseUser user = mAuth.getCurrentUser();\r\n                    user.sendEmailVerification().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            Toast.makeText(getActivity(),\"Enviando correo de confirmación\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n\r\n                            Toast.makeText(getActivity(),\"Error en el envío de correo\",Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            /*}else{\r\n            txtverify.setVisibility(View.GONE);\r\n            btnverify.setVisibility(View.GONE);*/\r\n        }\r\n        /*RequestQueue colaPeticiones = Volley.newRequestQueue(getActivity()\r\n                .getApplicationContext());\r\n        ImageLoader lectorImagenes = new ImageLoader(colaPeticiones,\r\n                new ImageLoader.ImageCache() {\r\n                    private final LruCache<String, Bitmap> cache =\r\n                            new LruCache<String, Bitmap>(10);\r\n                    public void putBitmap(String url, Bitmap bitmap) {\r\n                        cache.put(url, bitmap);\r\n                    }\r\n                    public Bitmap getBitmap(String url) {\r\n                        return cache.get(url);\r\n                    }\r\n                });\r\n        Uri urlImagen = usuario.getPhotoUrl();\r\n        if (urlImagen != null) {\r\n            NetworkImageView fotoUsuario = (NetworkImageView)\r\n                    v.findViewById(R.id.profile);\r\n            fotoUsuario.setImageUrl(urlImagen.toString(), lectorImagenes);\r\n        }else{\r\n            NetworkImageView fotoUsuario = (NetworkImageView)\r\n                    v.findViewById(R.id.profile);\r\n            fotoUsuario.setImageUrl(String.valueOf(R.drawable.icons_user), lectorImagenes);\r\n        }*/\r\n        return v;\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
--+++ app/src/main/java/com/example/infinitycrop/ui/profile/ProfileFragment.java	(date 1609520835174)
--@@ -32,7 +32,7 @@
-- import com.example.infinitycrop.ui.login.LogActivity;
-- import com.example.infinitycrop.ui.profile.settings.AboutInfinityCrap;
-- import com.example.infinitycrop.ui.profile.settings.HelpProfile;
---//import com.example.infinitycrop.ui.profile.settings.ModifyProfile;
--+/*import com.example.infinitycrop.ui.profile.settings.ModifyProfile;*/
-- import com.firebase.ui.auth.AuthUI;
-- import com.google.android.gms.auth.api.signin.GoogleSignIn;
-- import com.google.android.gms.auth.api.signin.GoogleSignInClient;
--@@ -112,7 +112,7 @@
--         irAPerfil.setOnClickListener(new View.OnClickListener() {
--             @Override
--             public void onClick(View v) {
---                /*Intent intent = new Intent(getActivity(), ModifyProfile.class);
--+               /* Intent intent = new Intent(getActivity(), ModifyProfile.class);
--                 startActivity(intent);*/
--             }
--         });
--Index: app/src/main/java/com/example/infinitycrop/ui/OnBoardingFragment/OnBoardingFragment4.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.infinitycrop.ui.OnBoardingFragment;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.list_machine.AddMachine;\r\n\r\npublic class OnBoardingFragment4 extends Fragment {\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        final ViewGroup root = (ViewGroup) inflater.inflate(R.layout.fragment_on_boarding4,container,false);\r\n        TextView button = (TextView) root.findViewById(R.id.btn_skip);\r\n        button.setOnClickListener(new View.OnClickListener()\r\n        {\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                Intent intent = new Intent((getActivity().getApplication()), AddMachine.class);\r\n                TextView editText = (TextView) root.findViewById(R.id.btn_skip);\r\n\r\n                startActivity(intent);\r\n\r\n            }\r\n        });\r\n        Button button1 = (Button) root.findViewById(R.id.btn_start);\r\n        button1.setOnClickListener(new View.OnClickListener()\r\n        {\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                Intent i = new Intent((getActivity().getApplication()), AddMachine.class);\r\n                Button button1 = (Button) root.findViewById(R.id.btn_start);\r\n                startActivity(i);\r\n            }\r\n        });\r\n\r\n        return root;\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
----- app/src/main/java/com/example/infinitycrop/ui/OnBoardingFragment/OnBoardingFragment4.java	(revision 801face8d6cf8e5f489a543ad6110fb371e7a296)
--+++ app/src/main/java/com/example/infinitycrop/ui/OnBoardingFragment/OnBoardingFragment4.java	(date 1609520835179)
--@@ -17,6 +17,7 @@
--     @Override
--     public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
--         final ViewGroup root = (ViewGroup) inflater.inflate(R.layout.fragment_on_boarding4,container,false);
--+
--         TextView button = (TextView) root.findViewById(R.id.btn_skip);
--         button.setOnClickListener(new View.OnClickListener()
--         {
--@@ -30,6 +31,7 @@
-- 
--             }
--         });
--+
--         Button button1 = (Button) root.findViewById(R.id.btn_start);
--         button1.setOnClickListener(new View.OnClickListener()
--         {
--diff --git .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_28_12_2020_17_44__Default_Changelist_.xml
--diff --git .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_30_12_2020_23_02__Default_Changelist_.xml
-Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.Manifest;\r\nimport android.app.Activity;\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.content.res.ColorStateList;\r\nimport android.location.Address;\r\nimport android.location.Geocoder;\r\nimport android.location.Location;\r\nimport android.location.LocationManager;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.os.StrictMode;\r\nimport android.provider.Settings;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvModel;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.location.FusedLocationProviderClient;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.annotations.NotNull;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.squareup.okhttp.Call;\r\nimport com.squareup.okhttp.Callback;\r\nimport com.squareup.okhttp.OkHttpClient;\r\nimport com.squareup.okhttp.Request;\r\nimport com.squareup.okhttp.Response;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link DashboardFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class DashboardFragment extends Fragment implements MqttCallback{\r\n\r\n    private RecyclerView recyclerView;\r\n    private StaticRvAdapter staticRvAdapter;\r\n    private TabLayout tabLayout;\r\n    private ViewPager viewPager;\r\n    //WEATHER\r\n    private static  final int REQUEST_LOCATION=1;\r\n    double lat;\r\n    double longi;\r\n\r\n    TextView showLocationTxt;\r\n\r\n    LocationManager locationManager;\r\n    String latitude,longitude;\r\n\r\n    TextView view_city;\r\n    TextView view_temp;\r\n    TextView view_desc;\r\n    TextView view_country;\r\n\r\n    ImageView view_weather;\r\n    //\r\n\r\n\r\n    public static MqttClient client = null;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public DashboardFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment DashboardFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static DashboardFragment newInstance(String param1, String param2) {\r\n        DashboardFragment fragment = new DashboardFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_dashboard, container, false);\r\n        //FIREBASE\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        final FirebaseUser usuario = mAuth.getCurrentUser();\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=usuario.getUid();\r\n        //guardo el nombre en un textView\r\n        /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);\r\n        String res=\"Hola\"+\" \"+usuario.getDisplayName();\r\n        nombre.setText(res);\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(usuario.getDisplayName() == null){\r\n                    String res1=\"Hola\"+\" \"+snapshot.getString(\"username\");\r\n                    nombre.setText(res1);\r\n                }\r\n            }\r\n        });*/\r\n\r\n        //switch methods\r\n /*     Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });*/\r\n\r\n\r\n        //WEATHER\r\n        ActivityCompat.requestPermissions(getActivity(),new String[]\r\n                {Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n\r\n        view_city =v.findViewById(R.id.town);\r\n        view_city.setText(\"\");\r\n        view_temp =v.findViewById(R.id.temp);\r\n        view_temp.setText(\"\");\r\n        view_desc =v.findViewById(R.id.desc);\r\n        view_desc.setText(\"\");\r\n        view_country=v.findViewById(R.id.txtCountry);\r\n        view_country.setText(\"\");\r\n        view_weather =v.findViewById(R.id.wheather_image);\r\n\r\n        locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);\r\n       /* inicioGPS();*/\r\n        //\r\n\r\n\r\n\r\n\r\n        //RECYCLER VIEW\r\n        ArrayList<StaticRvModel> item=new ArrayList<>();\r\n        item.add(new StaticRvModel(R.drawable.icons_sun,\"Soleado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_night_mode,\"Nocturno\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_energy_saving,\"Ahorro\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_power_off,\"Apagado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_custom,\"Custom\"));\r\n\r\n        final TextView medidasT=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidasH=v.findViewById(R.id.medidaHumedadGeneral);\r\n        final TextView medidasS=v.findViewById(R.id.medidaSalinidadGeneral);\r\n        final TextView medidasL=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n\r\n        recyclerView=v.findViewById(R.id.rv_1);\r\n        staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(),LinearLayoutManager.HORIZONTAL,false));\r\n        recyclerView.setAdapter(staticRvAdapter);\r\n\r\n\r\n        //TABS\r\n        tabLayout = v.findViewById(R.id.tab_layout);\r\n        viewPager = v.findViewById(R.id.view_pager);\r\n         //Array\r\n        ArrayList<String> arrayList = new ArrayList<>();\r\n\r\n        //set up with viewpager\r\n        tabLayout.setupWithViewPager(viewPager);\r\n\r\n        TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());\r\n        //Pestañas\r\n        adapter.addFrag(new GeneralFragment(),\"General\");\r\n        adapter.addFrag(new Planta1Fragment(),\"Planta 1\");\r\n        adapter.addFrag(new Planta2Fragment(),\"Planta 2\");\r\n\r\n        viewPager.setAdapter(adapter );\r\n\r\n        /*((MainActivity)getActivity()).ola();*/\r\n     /*   //LEER DATOS FIREBASE\r\n        //Temperatura\r\n       DocumentReference documentTemperatura=fStore.collection(\"SensoresA-T\").document(\"Temperatura\");\r\n        documentTemperatura.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediTemp=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasT.setText(resMediTemp);\r\n            }\r\n        });\r\n        //Humedad\r\n        DocumentReference documentHumedad=fStore.collection(\"SensoresA-T\").document(\"Humedad\");\r\n        documentHumedad.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediHum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasH.setText(resMediHum);\r\n            }\r\n        });\r\n        //Iluminación\r\n        DocumentReference documentIluminación=fStore.collection(\"SensoresA-T\").document(\"Iluminación\");\r\n        documentIluminación.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIlum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasL.setText(resMediIlum);\r\n            }\r\n        });\r\n        //Temperatura ambiente\r\n        DocumentReference documentambiente=fStore.collection(\"SensoresA-T\").document(\"Temperatura ambiente\");\r\n        documentambiente.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIAmb=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasS.setText(resMediIAmb);\r\n            }\r\n        });\r\n\r\n      */\r\n\r\n        return v;\r\n    }\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n\r\n\r\n    //WEATHER METHODS\r\n    private void api_key(final String City) {\r\n        OkHttpClient client = new OkHttpClient();\r\n\r\n        Request request = new Request.Builder()\r\n                .url(\"https://api.openweathermap.org/data/2.5/weather?q=\" + City + \"&appid=a6f41d947e0542a26580bcd5c3fb90ef&units=metric\")\r\n                .get()\r\n                .build();\r\n        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n        StrictMode.setThreadPolicy(policy);\r\n        try {\r\n            Response response = client.newCall(request).execute();\r\n            client.newCall(request).enqueue(new Callback() {\r\n                @Override\r\n                public void onFailure(Request request, IOException e) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onResponse(Response response) throws IOException {\r\n                    String responseData = response.body().string();\r\n                    try {\r\n                        JSONObject json = new JSONObject(responseData);\r\n                        JSONArray array = json.getJSONArray(\"weather\");\r\n                        JSONObject object = array.getJSONObject(0);\r\n\r\n                        String description = object.getString(\"description\");\r\n                        String icons = object.getString(\"icon\");\r\n\r\n                        JSONObject temp1 = json.getJSONObject(\"main\");\r\n                        Double Temperature = temp1.getDouble(\"temp\");\r\n\r\n                        setText(view_city, City);\r\n\r\n                        String temps = Math.round(Temperature) + \" °C\";\r\n                        setText(view_temp, temps);\r\n                        setText(view_desc, description);\r\n                        setImage(view_weather, icons);\r\n\r\n                    } catch (JSONException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n\r\n            });\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    private void setText(final TextView text, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                text.setText(value);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setImage(final ImageView imageView, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                //paste switch\r\n                switch (value) {\r\n                    case \"01d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"01n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"02d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"02n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"03d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"03n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"04d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"04n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"09d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"09n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"10d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"10n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"11d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"11n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"13d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    case \"13n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    default:\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.wheather));\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    //App location\r\n   /* private void getLocation() {\r\n\r\n        //Check Permissions again\r\n\r\n        /*if (ActivityCompat.checkSelfPermission(\r\n                getContext(),Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(\r\n                getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n        } else {\r\n\r\n            Location LocationNetwork=locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);\r\n             if (LocationNetwork !=null)\r\n            {\r\n                double lat=LocationNetwork.getLatitude();\r\n                double longi=LocationNetwork.getLongitude();\r\n\r\n                latitude=String.valueOf(lat);\r\n                longitude=String.valueOf(longi);\r\n               /* loc_func(LocationNetwork);*/\r\n              /*  api_key(String.valueOf(view_city.getText()));\r\n                showLocationTxt.setText(\"Your Location:\"+\"\\n\"+\"Latitude= \"+latitude+\"\\n\"+\"Longitude= \"+longitude);\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private void OnGPS() {\r\n\r\n        final AlertDialog.Builder builder= new AlertDialog.Builder(getContext());\r\n\r\n        builder.setMessage(\"Enable GPS\").setCancelable(false).setPositiveButton(\"YES\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS));\r\n                getLocation();\r\n            }\r\n        }).setNegativeButton(\"NO\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                dialog.cancel();\r\n            }\r\n        });\r\n        final AlertDialog alertDialog=builder.create();\r\n        alertDialog.show();\r\n    }\r\n\r\n    private void loc_func(Location location){\r\n        try {\r\n            Geocoder geocoder=new Geocoder(getContext());\r\n            List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);\r\n            /*String address = addresses.get(0).getSubLocality();*/\r\n           /* String cityName = addresses.get(0).getLocality();\r\n            String stateName = addresses.get(0).getAdminArea();\r\n            String country = addresses.get(0).getCountryName();\r\n            //txt_paddress.setText(address);\r\n            view_city.setText(cityName);\r\n            view_country.setText(country);\r\n            //txt_state.setText(stateName);*/\r\n\r\n       /* } catch (IOException e) {\r\n            e.printStackTrace();\r\n            Toast.makeText(getContext(), \"Error:\"+e, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void inicioGPS(){\r\n\r\n\r\n        //Check gps is enable or not\r\n\r\n        if (!locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))\r\n        {\r\n            //Write Function To enable gps\r\n\r\n            OnGPS();\r\n        }\r\n        else\r\n        {\r\n            //GPS is already On then\r\n\r\n            /*getLocation();*/\r\n /*       }\r\n    }*/\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
-+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(date 1610497239608)
-@@ -1,20 +1,10 @@
- package com.example.infinitycrop.ui.dashboard;
- 
- import android.Manifest;
--import android.app.Activity;
--import android.app.AlertDialog;
- import android.content.Context;
--import android.content.DialogInterface;
--import android.content.Intent;
--import android.content.pm.PackageManager;
--import android.content.res.ColorStateList;
--import android.location.Address;
--import android.location.Geocoder;
--import android.location.Location;
- import android.location.LocationManager;
- import android.os.Bundle;
- 
--import androidx.annotation.Nullable;
- import androidx.core.app.ActivityCompat;
- import androidx.fragment.app.Fragment;
- import androidx.recyclerview.widget.LinearLayoutManager;
-@@ -22,36 +12,21 @@
- import androidx.viewpager.widget.ViewPager;
- 
- import android.os.StrictMode;
--import android.provider.Settings;
- import android.util.Log;
- import android.view.LayoutInflater;
- import android.view.View;
- import android.view.ViewGroup;
--import android.widget.CompoundButton;
- import android.widget.ImageView;
--import android.widget.LinearLayout;
--import android.widget.Switch;
- import android.widget.TextView;
--import android.widget.Toast;
- 
- import com.example.comun.Mqtt;
--import com.example.infinitycrop.MainActivity;
- import com.example.infinitycrop.R;
- import com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;
- import com.example.infinitycrop.ui.recycler_control.StaticRvModel;
--import com.google.android.gms.auth.api.signin.GoogleSignInClient;
--import com.google.android.gms.auth.api.signin.GoogleSignInOptions;
--import com.google.android.gms.location.FusedLocationProviderClient;
- import com.google.android.material.tabs.TabLayout;
- import com.google.firebase.auth.FirebaseAuth;
- import com.google.firebase.auth.FirebaseUser;
--import com.google.firebase.database.annotations.NotNull;
--import com.google.firebase.firestore.DocumentReference;
--import com.google.firebase.firestore.DocumentSnapshot;
--import com.google.firebase.firestore.EventListener;
- import com.google.firebase.firestore.FirebaseFirestore;
--import com.google.firebase.firestore.FirebaseFirestoreException;
--import com.squareup.okhttp.Call;
- import com.squareup.okhttp.Callback;
- import com.squareup.okhttp.OkHttpClient;
- import com.squareup.okhttp.Request;
-@@ -70,7 +45,6 @@
- 
- import java.io.IOException;
- import java.util.ArrayList;
--import java.util.List;
- 
- import static com.example.comun.Mqtt.topicRoot;
- 
-@@ -102,6 +76,8 @@
- 
-     ImageView view_weather;
-     //
-+    //Acceso a la maquina
-+
- 
- 
-     public static MqttClient client = null;
-@@ -284,6 +260,7 @@
- 
-       */
- 
-+
-         return v;
-     }
- 
-Index: app/build.gradle
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>apply plugin: 'com.android.application'\r\n\r\n\r\nandroid {\r\n    compileSdkVersion 30\r\n    buildToolsVersion \"30.0.2\"\r\n\r\n    defaultConfig {\r\n        applicationId \"com.example.infinitycrop\"\r\n        minSdkVersion 23\r\n        targetSdkVersion 30\r\n        versionCode 1\r\n        versionName \"1.0\"\r\n        multiDexEnabled true\r\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\r\n        }\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation fileTree(dir: \"libs\", include: [\"*.jar\"])\r\n    implementation 'androidx.appcompat:appcompat:1.2.0'\r\n    implementation 'com.google.android.material:material:1.2.1'\r\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.2'\r\n    implementation 'androidx.navigation:navigation-fragment:2.1.0'\r\n    implementation 'androidx.navigation:navigation-ui:2.1.0'\r\n    implementation 'androidx.lifecycle:lifecycle-extensions:2.2.0'\r\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\r\n    implementation 'com.google.firebase:firebase-auth:16.0.5'\r\n    implementation 'com.firebaseui:firebase-ui-auth:6.2.0'\r\n    implementation project(path: ':comun')\r\n    implementation 'com.google.firebase:firebase-database:19.5.1'\r\n    implementation 'com.google.firebase:firebase-storage:19.2.0'\r\n    testImplementation 'junit:junit:4.12'\r\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\r\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\r\n    implementation 'com.google.firebase:firebase-analytics'\r\n    implementation 'com.ismaeldivita.chipnavigation:chip-navigation-bar:1.3.4'\r\n    implementation 'org.jetbrains.kotlin:kotlin-stdlib:1.4.10'\r\n    implementation 'androidx.recyclerview:recyclerview:1.1.0'\r\n    implementation 'com.android.volley:volley:1.1.0'\r\n    // Also declare the dependency for the Google Play services library and specify its version\r\n    implementation 'com.google.android.gms:play-services-auth:18.1.0'\r\n    // Import the BoM for the Firebase platform\r\n    implementation platform('com.google.firebase:firebase-bom:26.0.0')\r\n    implementation 'com.google.firebase:firebase-firestore:17.1.2'\r\n    implementation 'com.android.support:multidex:1.0.3'\r\n    implementation 'com.firebaseui:firebase-ui-firestore:6.3.0'\r\n    //biblioteca para mostrar images a través de URL\r\n    implementation 'com.github.bumptech.glide:glide:4.11.0'\r\n    //import del mqtt\r\n    implementation 'org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.1.1'\r\n    implementation 'com.google.android.gms:play-services-maps:17.0.0'\r\n    compile 'com.google.android.gms:play-services-location:16.0.0'\r\n    implementation 'com.journeyapps:zxing-android-embedded:3.4.0'//añadimos esta libreria para qr\r\n    implementation 'com.facebook.android:facebook-android-sdk:[4,5)'\r\n\r\n    implementation \"androidx.viewpager2:viewpager2:1.0.0\" //libreria viewpager\r\n    implementation  'com.airbnb.android:lottie:3.4.1'//libreria para la animacion\r\n    implementation 'com.cuberto:liquid-swipe:1.0.0' //libreria para el tutorial\r\n    implementation 'androidx.core:core:1.3.1'\r\n    implementation'androidx.core:core-ktx:1.3.1'\r\n\r\n    implementation'com.squareup.okhttp3:mockwebserver:4.2.0'\r\n    implementation'com.squareup.okhttp3:okhttp:4.2.0'\r\n\r\n    implementation 'androidx.cardview:cardview:1.0.0'\r\n    implementation \"androidx.viewpager2:viewpager2:1.0.0\" //libreria viewpager\r\n\r\n    //plugins de subir imagen user foro\r\n    implementation 'com.theartofdev.edmodo:android-image-cropper:2.4.+'\r\n    implementation 'com.squareup.picasso:picasso:2.71828'\r\n    implementation 'id.zelory:compressor:2.1.0'\r\n    //imageView modo circulo\r\n    implementation 'com.makeramen:roundedimageview:2.3.0'\r\n}\r\napply plugin: 'com.google.gms.google-services'
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/build.gradle	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
-+++ app/build.gradle	(date 1610497330568)
-@@ -79,5 +79,7 @@
-     implementation 'id.zelory:compressor:2.1.0'
-     //imageView modo circulo
-     implementation 'com.makeramen:roundedimageview:2.3.0'
-+    //libreria wheelview
-+    implementation'com.github.psuzn:wheelView:1.0.0'
- }
- apply plugin: 'com.google.gms.google-services'
-\ No newline at end of file
-Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.google.firebase.firestore.Query;\r\nimport com.google.firebase.firestore.QueryDocumentSnapshot;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link GeneralFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class GeneralFragment extends Fragment implements MqttCallback{\r\n    public static MqttClient client = null;\r\n    private String uid;\r\n    private FirebaseFirestore db;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public GeneralFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment GeneralFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static GeneralFragment newInstance(String param1, String param2) {\r\n        GeneralFragment fragment = new GeneralFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v = inflater.inflate(R.layout.fragment_general, container, false);\r\n        //switch methods\r\n        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });\r\n        db = FirebaseFirestore.getInstance();\r\n        MainActivity myActivity = (MainActivity) getActivity();\r\n        final TextView medidaTemp=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidaHum=v.findViewById(R.id.medidaHumedadGeneral);\r\n        final TextView medidaHumAm=v.findViewById(R.id.medidaSalinidadGeneral);\r\n        final TextView medidaLuz=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n        uid=myActivity.getMachineUID();\r\n        db.collection(\"Mediciones general\")\r\n                .document(uid)\r\n                .addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable DocumentSnapshot snapshot,\r\n                                        @Nullable FirebaseFirestoreException e) {\r\n                        if (e != null) {\r\n                            return;\r\n                        }\r\n\r\n                        if (snapshot != null && snapshot.exists()) {\r\n                            //Temperatura\r\n                            String medidaT=snapshot.getString(\"Temperatura\");\r\n                            medidaTemp.setText(medidaT+\"°C\");\r\n                            //Humedad\r\n                            String medidaH=snapshot.getString(\"Humedad\");\r\n                            medidaHum.setText(medidaH+\"%\");\r\n                            //Humedad Ambiente\r\n                            String medidaHA=snapshot.getString(\"Humedad Ambiente\");\r\n                            medidaHumAm.setText(medidaHA+\"%\");\r\n                            //Luminosidad\r\n                            String medidaL=snapshot.getString(\"Luminosidad\");\r\n                            medidaLuz.setText(medidaL+\"%\");\r\n\r\n\r\n                        } else {\r\n\r\n                        }\r\n                    }\r\n                });\r\n\r\n        return v;\r\n    }\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"Superior OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"Superior ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
-+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(date 1610497239615)
-@@ -1,14 +1,17 @@
- package com.example.infinitycrop.ui.dashboard;
- 
-+import android.content.Intent;
- import android.os.Bundle;
- 
- import androidx.annotation.Nullable;
-+import androidx.constraintlayout.widget.ConstraintLayout;
- import androidx.fragment.app.Fragment;
- 
- import android.util.Log;
- import android.view.LayoutInflater;
- import android.view.View;
- import android.view.ViewGroup;
-+import android.widget.Button;
- import android.widget.CompoundButton;
- import android.widget.Switch;
- import android.widget.TextView;
-@@ -16,13 +19,12 @@
- import com.example.comun.Mqtt;
- import com.example.infinitycrop.MainActivity;
- import com.example.infinitycrop.R;
-+import com.example.infinitycrop.ui.MachineControl.planta1;
-+import com.google.android.material.bottomsheet.BottomSheetDialog;
- import com.google.firebase.firestore.DocumentSnapshot;
- import com.google.firebase.firestore.EventListener;
- import com.google.firebase.firestore.FirebaseFirestore;
- import com.google.firebase.firestore.FirebaseFirestoreException;
--import com.google.firebase.firestore.Query;
--import com.google.firebase.firestore.QueryDocumentSnapshot;
--import com.google.firebase.firestore.QuerySnapshot;
- 
- import org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;
- import org.eclipse.paho.client.mqttv3.MqttCallback;
-@@ -139,8 +141,43 @@
-                     }
-                 });
- 
-+        //Boton para acceder a la maquina para sus parcelas
-+        Button btnmymachine = (Button) v.findViewById(R.id.btnMyMachine);
-+        btnmymachine.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+
-+                BottomSheetDialog bottomSheetDialog = new BottomSheetDialog(
-+                        getContext()
-+                );
-+                bottomSheetDialog.setContentView(R.layout.plantamaquina_bottom_sheet);
-+                Button btnp1=bottomSheetDialog.findViewById(R.id.enterPlant2);
-+                Button btn2=bottomSheetDialog.findViewById(R.id.enterPlant1);
-+                bottomSheetDialog.show();
-+                btnp1.setOnClickListener(new View.OnClickListener() {
-+                    @Override
-+                    public void onClick(View v) {
-+                        Intent intent = new Intent (getContext(), planta1.class);
-+                        startActivity(intent);
-+
-+                    }
-+                });
-+            }
-+        });
-+
-         return v;
-     }
-+        /*btnmymachine.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                Intent intent = new Intent (getContext(), MiMaquina.class);
-+                startActivity(intent);
-+
-+            }
-+        });*/
-+
-+
-+
-     public void enviarLucesOff(){
-         try {
-             client = new MqttClient(Mqtt.broker, Mqtt.clientId, new
-Index: build.gradle
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\nbuildscript {\r\n    repositories {\r\n        google()\r\n        jcenter()\r\n        mavenCentral()\r\n    }\r\n    dependencies {\r\n        classpath 'com.android.tools.build:gradle:4.1.1'\r\n        classpath 'com.google.gms:google-services:4.3.4'\r\n\r\n        // NOTE: Do not place your application dependencies here; they belong\r\n        // in the individual module build.gradle files\r\n    }\r\n}\r\n\r\nallprojects {\r\n    repositories {\r\n        google()\r\n        jcenter()\r\n        //Dependencia para el tutorial\r\n        def githubProperties = new Properties()\r\n        githubProperties.load(new FileInputStream(rootProject.file(\"github.properties\")))\r\n        repositories {\r\n            maven {\r\n                name = \"GitHubPackages\"\r\n\r\n                url = uri(\"https://maven.pkg.github.com/Cuberto/liquid-swipe-android\")\r\n                credentials {\r\n                    /** Create github.properties in root project folder file with\r\n                     ** gpr.usr=GITHUB_USER_ID & gpr.key=PERSONAL_ACCESS_TOKEN\r\n                     ** Or set env variable GPR_USER & GPR_API_KEY if not adding a properties file**/\r\n                    username = githubProperties['gpr.usr'] ?: System.getenv(\"GPR_USER\")\r\n                    password = githubProperties['gpr.key'] ?: System.getenv(\"GPR_API_KEY\")\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- build.gradle	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
-+++ build.gradle	(date 1610497396037)
-@@ -33,10 +33,15 @@
-                     username = githubProperties['gpr.usr'] ?: System.getenv("GPR_USER")
-                     password = githubProperties['gpr.key'] ?: System.getenv("GPR_API_KEY")
-                 }
-+
-             }
--        }
--    }
--}
-+            maven {
-+                url 'https://jitpack.io'
-+            }
-+            }
-+        }
-+    }
-+
- 
- task clean(type: Delete) {
-     delete rootProject.buildDir
-Index: app/src/main/AndroidManifest.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.infinitycrop\">\r\n\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" /> <!-- Permisos Qr -->\r\n    <uses-permission android:name=\"android.permission.CAMERA\" />\r\n\r\n    <uses-feature android:name=\"android.hardware.camera\" />\r\n    <uses-feature android:name=\"android.hardware.camera.autofocus\" />\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher\"\r\n        android:theme=\"@style/AppThemeHome\">\r\n        <activity android:name=\".ui.list_machine.ModifyMachine\"></activity>\r\n        <activity android:name=\".ui.Foro.main.ForoMain\" />\r\n        <activity android:name=\".ui.Foro.lets_start.AddCommunity\" />\r\n        <activity android:name=\".ui.Foro.lets_start.choose_community\" />\r\n        <activity android:name=\".ui.Foro.lets_start.welcome_forum\" />\r\n        <activity android:name=\".MainActivity\" />\r\n\r\n        <service android:name=\".ui.service.ServicioMqtt\" />\r\n\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\" />\r\n        <activity android:name=\".ui.profile.settings.HelpProfile\" />\r\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\" />\r\n        <activity android:name=\".ui.list_machine.AddMachine\" />\r\n        <activity android:name=\".ui.profile.settings.ModifyProfile\" />\r\n        <activity android:name=\".ui.logmail.RegisterActivity\" />\r\n        <activity android:name=\".ui.logmail.LoginActivity\" />\r\n        <activity android:name=\".ui.list_machine.CaptureAct\" />\r\n        <activity android:name=\".ui.login.LogActivity\" />\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\" />\r\n        <activity android:name=\".ui.LoadAnimations.LogprimeraActivity\" />\r\n        <activity android:name=\".ui.graphics.GraphicsActivity\" />\r\n        <activity android:name=\".ui.list_machine.ModifyMachine\" />\r\n\r\n        <meta-data\r\n            android:name=\"com.google.android.geo.API_KEY\"\r\n            android:value=\"@string/google_maps_key\" />\r\n        <meta-data\r\n            android:name=\"com.facebook.sdk.ApplicationId\"\r\n            android:value=\"@string/facebook_app_id\"\r\n            tools:replace=\"android:value\" />\r\n        <meta-data\r\n            android:name=\"preloaded_fonts\"\r\n            android:resource=\"@array/preloaded_fonts\" />\r\n\r\n        <activity\r\n            android:name=\"com.theartofdev.edmodo.cropper.CropImageActivity\"\r\n            android:theme=\"@style/Base.Theme.AppCompat\" />\r\n    </application>\r\n\r\n</manifest>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/AndroidManifest.xml	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
-+++ app/src/main/AndroidManifest.xml	(date 1610497395822)
-@@ -21,12 +21,8 @@
-         android:label="@string/app_name"
-         android:roundIcon="@mipmap/ic_launcher"
-         android:theme="@style/AppThemeHome">
--        <activity android:name=".ui.list_machine.ModifyMachine"></activity>
--        <activity android:name=".ui.Foro.main.ForoMain" />
--        <activity android:name=".ui.Foro.lets_start.AddCommunity" />
--        <activity android:name=".ui.Foro.lets_start.choose_community" />
--        <activity android:name=".ui.Foro.lets_start.welcome_forum" />
--        <activity android:name=".MainActivity" />
-+        <activity android:name=".ui.forum.lets_start.welcome_forum"></activity>
-+        <activity android:name=".MainActivity"></activity>
- 
-         <service android:name=".ui.service.ServicioMqtt" />
- 
-@@ -37,11 +33,10 @@
-                 <category android:name="android.intent.category.LAUNCHER" />
-             </intent-filter>
-         </activity>
--        <activity android:name=".ui.profile.settings.AboutInfinityCrap" />
--        <activity android:name=".ui.profile.settings.HelpProfile" />
-+        <activity android:name=".ui.profile.settings.AboutInfinityCrap"></activity>
-+        <activity android:name=".ui.profile.settings.HelpProfile"></activity>
-         <activity android:name=".ui.list_machine.MainActivityMachineList" />
-         <activity android:name=".ui.list_machine.AddMachine" />
--        <activity android:name=".ui.profile.settings.ModifyProfile" />
-         <activity android:name=".ui.logmail.RegisterActivity" />
-         <activity android:name=".ui.logmail.LoginActivity" />
-         <activity android:name=".ui.list_machine.CaptureAct" />
-@@ -50,6 +45,7 @@
-         <activity android:name=".ui.LoadAnimations.LogprimeraActivity" />
-         <activity android:name=".ui.graphics.GraphicsActivity" />
-         <activity android:name=".ui.list_machine.ModifyMachine" />
-+        <activity android:name=".ui.MachineControl.planta1" />
- 
-         <meta-data
-             android:name="com.google.android.geo.API_KEY"
-@@ -61,10 +57,6 @@
-         <meta-data
-             android:name="preloaded_fonts"
-             android:resource="@array/preloaded_fonts" />
--
--        <activity
--            android:name="com.theartofdev.edmodo.cropper.CropImageActivity"
--            android:theme="@style/Base.Theme.AppCompat" />
-     </application>
- 
- </manifest>
-\ No newline at end of file
-Index: .idea/jarRepositories.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"RemoteRepositoriesConfiguration\">\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"central\" />\r\n      <option name=\"name\" value=\"Maven Central repository\" />\r\n      <option name=\"url\" value=\"https://repo1.maven.org/maven2\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"jboss.community\" />\r\n      <option name=\"name\" value=\"JBoss Community repository\" />\r\n      <option name=\"url\" value=\"https://repository.jboss.org/nexus/content/repositories/public/\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"BintrayJCenter\" />\r\n      <option name=\"name\" value=\"BintrayJCenter\" />\r\n      <option name=\"url\" value=\"https://jcenter.bintray.com/\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"Google\" />\r\n      <option name=\"name\" value=\"Google\" />\r\n      <option name=\"url\" value=\"https://dl.google.com/dl/android/maven2/\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"GitHubPackages\" />\r\n      <option name=\"name\" value=\"GitHubPackages\" />\r\n      <option name=\"url\" value=\"https://maven.pkg.github.com/Cuberto/liquid-swipe-android\" />\r\n    </remote-repository>\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- .idea/jarRepositories.xml	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
-+++ .idea/jarRepositories.xml	(date 1610497396033)
-@@ -26,5 +26,10 @@
-       <option name="name" value="GitHubPackages" />
-       <option name="url" value="https://maven.pkg.github.com/Cuberto/liquid-swipe-android" />
-     </remote-repository>
-+    <remote-repository>
-+      <option name="id" value="GitHubPackages" />
-+      <option name="name" value="GitHubPackages" />
-+      <option name="url" value="https://jitpack.io" />
-+    </remote-repository>
-   </component>
- </project>
-\ No newline at end of file
-Index: app/src/main/res/layout/fragment_general.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    tools:context=\".ui.dashboard.DashboardFragment\">\r\n\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:orientation=\"vertical\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\r\n\r\n        <RelativeLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginTop=\"10dp\"\r\n            android:layout_marginRight=\"20dp\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/textDashboardGeneral\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:text=\"Dashboard  >\"\r\n\r\n                android:textSize=\"19sp\" />\r\n\r\n            <TextView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/textDashboardGeneral\"\r\n                android:text=\"4 sensores\"\r\n\r\n                android:textSize=\"14sp\" />\r\n\r\n            <!--<ImageView\r\n                android:layout_width=\"62dp\"\r\n                android:layout_height=\"62dp\"\r\n                android:layout_alignParentRight=\"true\"\r\n                android:src=\"@drawable/ic_sun\" />-->\r\n        </RelativeLayout>\r\n        <GridLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:columnCount=\"2\"\r\n            android:rowCount=\"3\"\r\n            android:alignmentMode=\"alignMargins\"\r\n            android:columnOrderPreserved=\"false\">\r\n            <!--temperatura-->\r\n            <androidx.cardview.widget.CardView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_columnWeight=\"1\"\r\n                android:layout_rowWeight=\"1\"\r\n                app:cardElevation=\"6dp\"\r\n                app:cardCornerRadius=\"12dp\"\r\n                android:layout_marginBottom=\"12dp\"\r\n                android:layout_margin=\"12dp\"\r\n                >\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n\r\n                    android:orientation=\"vertical\"\r\n                    android:padding=\"2dp\">\r\n\r\n                    <androidx.constraintlayout.widget.ConstraintLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_marginBottom=\"12dp\"\r\n                        android:layout_height=\"match_parent\">\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textTemperaturaGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"8dp\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:text=\"Temperatura\"\r\n                            android:textSize=\"16sp\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchTemperaturaGeneral\"\r\n                            app:layout_constraintStart_toStartOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <Switch\r\n                            android:id=\"@+id/switchTemperaturaGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:layout_marginEnd=\"8dp\"\r\n                            android:buttonTint=\"#FFFFFF\"\r\n                            android:checked=\"true\"\r\n                            android:fitsSystemWindows=\"false\"\r\n                            android:textColorLink=\"#a0c63e\"\r\n                            android:textSize=\"8sp\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/medidaTemperaturaGeneral\"\r\n                            android:layout_width=\"90dp\"\r\n                            android:layout_height=\"39dp\"\r\n                            android:layout_marginTop=\"24dp\"\r\n                            android:text=\"34°C\"\r\n                            android:textSize=\"31sp\"\r\n                            app:layout_constraintStart_toStartOf=\"@+id/textTemperaturaGeneral\"\r\n                            app:layout_constraintTop_toBottomOf=\"@+id/textTemperaturaGeneral\" />\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/imgTemperaturaGeneral\"\r\n                            android:layout_width=\"53dp\"\r\n                            android:layout_height=\"55dp\"\r\n                            android:layout_marginEnd=\"1dp\"\r\n                            android:src=\"@drawable/icons_temperature\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaTemperaturaGeneral\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaTemperaturaGeneral\"\r\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaTemperaturaGeneral\" />\r\n                    </androidx.constraintlayout.widget.ConstraintLayout>\r\n                </LinearLayout>\r\n            </androidx.cardview.widget.CardView>\r\n            <!--humedad-->\r\n            <androidx.cardview.widget.CardView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_columnWeight=\"1\"\r\n                android:layout_rowWeight=\"1\"\r\n                app:cardElevation=\"6dp\"\r\n                app:cardCornerRadius=\"12dp\"\r\n                android:layout_marginBottom=\"12dp\"\r\n                android:layout_margin=\"12dp\"\r\n                >\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n\r\n                    android:orientation=\"vertical\"\r\n                    android:padding=\"2dp\">\r\n\r\n                    <androidx.constraintlayout.widget.ConstraintLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_marginBottom=\"12dp\"\r\n                        android:layout_height=\"match_parent\">\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textHumedadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"8dp\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:text=\"Humedad\"\r\n                            android:textSize=\"16sp\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchHumedadGeneral\"\r\n                            app:layout_constraintStart_toStartOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <Switch\r\n                            android:id=\"@+id/switchHumedadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:layout_marginEnd=\"8dp\"\r\n                            android:checked=\"true\"\r\n                            android:textColorLink=\"#a0c63e\"\r\n                            android:textSize=\"8sp\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/medidaHumedadGeneral\"\r\n                            android:layout_width=\"90dp\"\r\n                            android:layout_height=\"39dp\"\r\n                            android:layout_marginTop=\"24dp\"\r\n                            android:text=\"68%\"\r\n                            android:textSize=\"31sp\"\r\n                            app:layout_constraintStart_toStartOf=\"@+id/textHumedadGeneral\"\r\n                            app:layout_constraintTop_toBottomOf=\"@+id/textHumedadGeneral\" />\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/imgHumedadGeneral\"\r\n                            android:layout_width=\"53dp\"\r\n                            android:layout_height=\"55dp\"\r\n                            android:layout_marginEnd=\"1dp\"\r\n                            android:src=\"@drawable/icons_humidity\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaHumedadGeneral\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaHumedadGeneral\"\r\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaHumedadGeneral\" />\r\n                    </androidx.constraintlayout.widget.ConstraintLayout>\r\n                </LinearLayout>\r\n            </androidx.cardview.widget.CardView>\r\n            <!--salinidad-->\r\n            <androidx.cardview.widget.CardView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_columnWeight=\"1\"\r\n                android:layout_rowWeight=\"1\"\r\n                app:cardElevation=\"6dp\"\r\n                app:cardCornerRadius=\"12dp\"\r\n                android:layout_marginBottom=\"12dp\"\r\n                android:layout_margin=\"12dp\"\r\n                >\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n\r\n                    android:orientation=\"vertical\"\r\n                    android:padding=\"2dp\">\r\n\r\n                    <androidx.constraintlayout.widget.ConstraintLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_marginBottom=\"12dp\"\r\n                        android:layout_height=\"match_parent\">\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textSalinidadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"8dp\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:text=\"H. Ambiente\"\r\n                            android:textSize=\"16sp\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchSalinidadGeneral\"\r\n                            app:layout_constraintStart_toStartOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <Switch\r\n                            android:id=\"@+id/switchSalinidadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:layout_marginEnd=\"8dp\"\r\n                            android:checked=\"true\"\r\n                            android:textColorLink=\"#a0c63e\"\r\n                            android:textSize=\"8sp\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/medidaSalinidadGeneral\"\r\n                            android:layout_width=\"90dp\"\r\n                            android:layout_height=\"39dp\"\r\n                            android:layout_marginTop=\"24dp\"\r\n                            android:text=\"10%\"\r\n                            android:textSize=\"31sp\"\r\n                            app:layout_constraintStart_toStartOf=\"@+id/textSalinidadGeneral\"\r\n                            app:layout_constraintTop_toBottomOf=\"@+id/textSalinidadGeneral\" />\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/imgSalinidadGeneral\"\r\n                            android:layout_width=\"53dp\"\r\n                            android:layout_height=\"55dp\"\r\n                            android:layout_marginEnd=\"1dp\"\r\n                            android:src=\"@drawable/icons_humedad_ambiente\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidaSalinidadGeneral\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintStart_toEndOf=\"@+id/medidaSalinidadGeneral\"\r\n                            app:layout_constraintTop_toTopOf=\"@+id/medidaSalinidadGeneral\" />\r\n                    </androidx.constraintlayout.widget.ConstraintLayout>\r\n                </LinearLayout>\r\n            </androidx.cardview.widget.CardView>\r\n            <!--Luminosidad-->\r\n            <androidx.cardview.widget.CardView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_columnWeight=\"1\"\r\n                android:layout_rowWeight=\"1\"\r\n                app:cardElevation=\"6dp\"\r\n                app:cardCornerRadius=\"12dp\"\r\n                android:layout_marginBottom=\"12dp\"\r\n                android:layout_margin=\"12dp\"\r\n                >\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n\r\n                    android:orientation=\"vertical\"\r\n                    android:padding=\"2dp\">\r\n\r\n                    <androidx.constraintlayout.widget.ConstraintLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_marginBottom=\"12dp\"\r\n                        android:layout_height=\"match_parent\">\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textLuminosidadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginStart=\"8dp\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:text=\"Luminosidad\"\r\n                            android:textSize=\"16sp\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/switchLuminosidadGeneral\"\r\n                            app:layout_constraintStart_toStartOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <Switch\r\n                            android:id=\"@+id/switchLuminosidadGeneral\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"8dp\"\r\n                            android:layout_marginEnd=\"8dp\"\r\n                            android:checked=\"true\"\r\n                            android:textColorHighlight=\"#FFFFFF\"\r\n                            android:textColorLink=\"#a0c63e\"\r\n                            android:textSize=\"8sp\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/medidasLuminosidadGeneral\"\r\n                            android:layout_width=\"90dp\"\r\n                            android:layout_height=\"39dp\"\r\n                            android:layout_marginTop=\"24dp\"\r\n                            android:text=\"90%\"\r\n                            android:textSize=\"31sp\"\r\n                            app:layout_constraintStart_toStartOf=\"@+id/textLuminosidadGeneral\"\r\n                            app:layout_constraintTop_toBottomOf=\"@+id/textLuminosidadGeneral\" />\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/imgLuminosidadGeneral\"\r\n                            android:layout_width=\"53dp\"\r\n                            android:layout_height=\"55dp\"\r\n                            android:layout_marginEnd=\"1dp\"\r\n                            android:src=\"@drawable/icons_luminosity\"\r\n                            app:layout_constraintBottom_toBottomOf=\"@+id/medidasLuminosidadGeneral\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintStart_toEndOf=\"@+id/medidasLuminosidadGeneral\"\r\n                            app:layout_constraintTop_toTopOf=\"@+id/medidasLuminosidadGeneral\" />\r\n                    </androidx.constraintlayout.widget.ConstraintLayout>\r\n                </LinearLayout>\r\n            </androidx.cardview.widget.CardView>\r\n\r\n\r\n\r\n\r\n        </GridLayout>\r\n\r\n    </LinearLayout>\r\n</ScrollView>\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_general.xml	(revision a5e172ae4ce6cba2a4f89511907bf9d2f3af42a5)
-+++ app/src/main/res/layout/fragment_general.xml	(date 1610497395862)
-@@ -35,6 +35,32 @@
- 
-                 android:textSize="14sp" />
- 
-+            <LinearLayout
-+                android:layout_width="243dp"
-+                android:layout_height="93dp"
-+                android:layout_alignBottom="@id/textDashboardGeneral"
-+                android:layout_alignParentTop="true"
-+                android:layout_alignParentEnd="true"
-+                android:layout_marginStart="25dp"
-+                android:layout_marginTop="0dp"
-+                android:layout_marginEnd="-9dp"
-+                android:layout_marginBottom="-87dp"
-+                android:layout_toEndOf="@+id/textDashboardGeneral"
-+                android:orientation="vertical">
-+
-+                <Button
-+                    android:id="@+id/btnMyMachine"
-+                    android:layout_width="182dp"
-+                    android:layout_height="38dp"
-+                    android:layout_marginStart="0dp"
-+                    android:layout_marginTop="1dp"
-+                    android:layout_marginEnd="38dp"
-+                    android:layout_marginBottom="-22dp"
-+                    android:background="@drawable/btn_scan"
-+                    android:textColor="@color/white"
-+                    android:text="MI maquina" />
-+            </LinearLayout>
-+
-             <!--<ImageView
-                 android:layout_width="62dp"
-                 android:layout_height="62dp"
Index: .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_19_33_[Default_Changelist]/shelved.patch
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_19_33_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_19_33_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,1015 +0,0 @@
-Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.Manifest;\r\nimport android.content.Context;\r\nimport android.location.LocationManager;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.os.StrictMode;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvModel;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.squareup.okhttp.Callback;\r\nimport com.squareup.okhttp.OkHttpClient;\r\nimport com.squareup.okhttp.Request;\r\nimport com.squareup.okhttp.Response;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link DashboardFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class DashboardFragment extends Fragment implements MqttCallback{\r\n\r\n    private RecyclerView recyclerView;\r\n    private StaticRvAdapter staticRvAdapter;\r\n    private TabLayout tabLayout;\r\n    private ViewPager viewPager;\r\n    //WEATHER\r\n    private static  final int REQUEST_LOCATION=1;\r\n    double lat;\r\n    double longi;\r\n\r\n    TextView showLocationTxt;\r\n\r\n    LocationManager locationManager;\r\n    String latitude,longitude;\r\n\r\n    TextView view_city;\r\n    TextView view_temp;\r\n    TextView view_desc;\r\n    TextView view_country;\r\n\r\n    ImageView view_weather;\r\n    //\r\n    //Acceso a la maquina\r\n\r\n\r\n\r\n    public static MqttClient client = null;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public DashboardFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment DashboardFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static DashboardFragment newInstance(String param1, String param2) {\r\n        DashboardFragment fragment = new DashboardFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_dashboard, container, false);\r\n        //FIREBASE\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        final FirebaseUser usuario = mAuth.getCurrentUser();\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=usuario.getUid();\r\n        //guardo el nombre en un textView\r\n        /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);\r\n        String res=\"Hola\"+\" \"+usuario.getDisplayName();\r\n        nombre.setText(res);\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(usuario.getDisplayName() == null){\r\n                    String res1=\"Hola\"+\" \"+snapshot.getString(\"username\");\r\n                    nombre.setText(res1);\r\n                }\r\n            }\r\n        });*/\r\n\r\n        //switch methods\r\n /*     Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });*/\r\n\r\n\r\n        //WEATHER\r\n        ActivityCompat.requestPermissions(getActivity(),new String[]\r\n                {Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n\r\n        view_city =v.findViewById(R.id.town);\r\n        view_city.setText(\"\");\r\n        view_temp =v.findViewById(R.id.temp);\r\n        view_temp.setText(\"\");\r\n        view_desc =v.findViewById(R.id.desc);\r\n        view_desc.setText(\"\");\r\n        view_country=v.findViewById(R.id.txtCountry);\r\n        view_country.setText(\"\");\r\n        view_weather =v.findViewById(R.id.wheather_image);\r\n\r\n        locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);\r\n       /* inicioGPS();*/\r\n        //\r\n\r\n\r\n\r\n\r\n        //RECYCLER VIEW\r\n        ArrayList<StaticRvModel> item=new ArrayList<>();\r\n        item.add(new StaticRvModel(R.drawable.icons_sun,\"Soleado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_night_mode,\"Nocturno\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_energy_saving,\"Ahorro\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_power_off,\"Apagado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_custom,\"Custom\"));\r\n\r\n        final TextView medidasT=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidasH=v.findViewById(R.id.medidaHumedadGeneral);\r\n        final TextView medidasS=v.findViewById(R.id.medidaSalinidadGeneral);\r\n        final TextView medidasL=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n\r\n        recyclerView=v.findViewById(R.id.rv_1);\r\n        staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(),LinearLayoutManager.HORIZONTAL,false));\r\n        recyclerView.setAdapter(staticRvAdapter);\r\n\r\n\r\n        //TABS\r\n        tabLayout = v.findViewById(R.id.tab_layout);\r\n        viewPager = v.findViewById(R.id.view_pager);\r\n         //Array\r\n        ArrayList<String> arrayList = new ArrayList<>();\r\n\r\n        //set up with viewpager\r\n        tabLayout.setupWithViewPager(viewPager);\r\n\r\n        TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());\r\n        //Pestañas\r\n        adapter.addFrag(new GeneralFragment(),\"General\");\r\n        adapter.addFrag(new Planta1Fragment(),\"Planta 1\");\r\n        adapter.addFrag(new Planta2Fragment(),\"Planta 2\");\r\n\r\n        viewPager.setAdapter(adapter );\r\n\r\n        /*((MainActivity)getActivity()).ola();*/\r\n     /*   //LEER DATOS FIREBASE\r\n        //Temperatura\r\n       DocumentReference documentTemperatura=fStore.collection(\"SensoresA-T\").document(\"Temperatura\");\r\n        documentTemperatura.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediTemp=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasT.setText(resMediTemp);\r\n            }\r\n        });\r\n        //Humedad\r\n        DocumentReference documentHumedad=fStore.collection(\"SensoresA-T\").document(\"Humedad\");\r\n        documentHumedad.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediHum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasH.setText(resMediHum);\r\n            }\r\n        });\r\n        //Iluminación\r\n        DocumentReference documentIluminación=fStore.collection(\"SensoresA-T\").document(\"Iluminación\");\r\n        documentIluminación.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIlum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasL.setText(resMediIlum);\r\n            }\r\n        });\r\n        //Temperatura ambiente\r\n        DocumentReference documentambiente=fStore.collection(\"SensoresA-T\").document(\"Temperatura ambiente\");\r\n        documentambiente.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIAmb=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasS.setText(resMediIAmb);\r\n            }\r\n        });\r\n\r\n      */\r\n\r\n\r\n        return v;\r\n    }\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n\r\n\r\n    //WEATHER METHODS\r\n    private void api_key(final String City) {\r\n        OkHttpClient client = new OkHttpClient();\r\n\r\n        Request request = new Request.Builder()\r\n                .url(\"https://api.openweathermap.org/data/2.5/weather?q=\" + City + \"&appid=a6f41d947e0542a26580bcd5c3fb90ef&units=metric\")\r\n                .get()\r\n                .build();\r\n        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n        StrictMode.setThreadPolicy(policy);\r\n        try {\r\n            Response response = client.newCall(request).execute();\r\n            client.newCall(request).enqueue(new Callback() {\r\n                @Override\r\n                public void onFailure(Request request, IOException e) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onResponse(Response response) throws IOException {\r\n                    String responseData = response.body().string();\r\n                    try {\r\n                        JSONObject json = new JSONObject(responseData);\r\n                        JSONArray array = json.getJSONArray(\"weather\");\r\n                        JSONObject object = array.getJSONObject(0);\r\n\r\n                        String description = object.getString(\"description\");\r\n                        String icons = object.getString(\"icon\");\r\n\r\n                        JSONObject temp1 = json.getJSONObject(\"main\");\r\n                        Double Temperature = temp1.getDouble(\"temp\");\r\n\r\n                        setText(view_city, City);\r\n\r\n                        String temps = Math.round(Temperature) + \" °C\";\r\n                        setText(view_temp, temps);\r\n                        setText(view_desc, description);\r\n                        setImage(view_weather, icons);\r\n\r\n                    } catch (JSONException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n\r\n            });\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    private void setText(final TextView text, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                text.setText(value);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setImage(final ImageView imageView, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                //paste switch\r\n                switch (value) {\r\n                    case \"01d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"01n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"02d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"02n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"03d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"03n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"04d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"04n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"09d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"09n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"10d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"10n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"11d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"11n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"13d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    case \"13n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    default:\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.wheather));\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    //App location\r\n   /* private void getLocation() {\r\n\r\n        //Check Permissions again\r\n\r\n        /*if (ActivityCompat.checkSelfPermission(\r\n                getContext(),Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(\r\n                getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n        } else {\r\n\r\n            Location LocationNetwork=locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);\r\n             if (LocationNetwork !=null)\r\n            {\r\n                double lat=LocationNetwork.getLatitude();\r\n                double longi=LocationNetwork.getLongitude();\r\n\r\n                latitude=String.valueOf(lat);\r\n                longitude=String.valueOf(longi);\r\n               /* loc_func(LocationNetwork);*/\r\n              /*  api_key(String.valueOf(view_city.getText()));\r\n                showLocationTxt.setText(\"Your Location:\"+\"\\n\"+\"Latitude= \"+latitude+\"\\n\"+\"Longitude= \"+longitude);\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private void OnGPS() {\r\n\r\n        final AlertDialog.Builder builder= new AlertDialog.Builder(getContext());\r\n\r\n        builder.setMessage(\"Enable GPS\").setCancelable(false).setPositiveButton(\"YES\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS));\r\n                getLocation();\r\n            }\r\n        }).setNegativeButton(\"NO\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                dialog.cancel();\r\n            }\r\n        });\r\n        final AlertDialog alertDialog=builder.create();\r\n        alertDialog.show();\r\n    }\r\n\r\n    private void loc_func(Location location){\r\n        try {\r\n            Geocoder geocoder=new Geocoder(getContext());\r\n            List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);\r\n            /*String address = addresses.get(0).getSubLocality();*/\r\n           /* String cityName = addresses.get(0).getLocality();\r\n            String stateName = addresses.get(0).getAdminArea();\r\n            String country = addresses.get(0).getCountryName();\r\n            //txt_paddress.setText(address);\r\n            view_city.setText(cityName);\r\n            view_country.setText(country);\r\n            //txt_state.setText(stateName);*/\r\n\r\n       /* } catch (IOException e) {\r\n            e.printStackTrace();\r\n            Toast.makeText(getContext(), \"Error:\"+e, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void inicioGPS(){\r\n\r\n\r\n        //Check gps is enable or not\r\n\r\n        if (!locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))\r\n        {\r\n            //Write Function To enable gps\r\n\r\n            OnGPS();\r\n        }\r\n        else\r\n        {\r\n            //GPS is already On then\r\n\r\n            /*getLocation();*/\r\n /*       }\r\n    }*/\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(revision 97b60040cb9ddffbf7eb424364e4fc4451452801)
-+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(date 1611080613863)
-@@ -2,15 +2,22 @@
- 
- import android.Manifest;
- import android.content.Context;
-+import android.content.Intent;
-+import android.content.pm.PackageManager;
-+import android.location.Location;
-+import android.location.LocationListener;
- import android.location.LocationManager;
-+import android.os.AsyncTask;
- import android.os.Bundle;
- 
-+import androidx.annotation.NonNull;
- import androidx.core.app.ActivityCompat;
- import androidx.fragment.app.Fragment;
- import androidx.recyclerview.widget.LinearLayoutManager;
- import androidx.recyclerview.widget.RecyclerView;
- import androidx.viewpager.widget.ViewPager;
- 
-+import android.os.Handler;
- import android.os.StrictMode;
- import android.util.Log;
- import android.view.LayoutInflater;
-@@ -18,15 +25,20 @@
- import android.view.ViewGroup;
- import android.widget.ImageView;
- import android.widget.TextView;
-+import android.widget.Toast;
- 
- import com.example.comun.Mqtt;
- import com.example.infinitycrop.R;
-+import com.example.infinitycrop.ui.MachineControl.planta1;
- import com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;
- import com.example.infinitycrop.ui.recycler_control.StaticRvModel;
- import com.google.android.material.tabs.TabLayout;
- import com.google.firebase.auth.FirebaseAuth;
- import com.google.firebase.auth.FirebaseUser;
- import com.google.firebase.firestore.FirebaseFirestore;
-+import com.loopj.android.http.AsyncHttpClient;
-+import com.loopj.android.http.JsonHttpResponseHandler;
-+import com.loopj.android.http.RequestParams;
- import com.squareup.okhttp.Callback;
- import com.squareup.okhttp.OkHttpClient;
- import com.squareup.okhttp.Request;
-@@ -44,7 +56,15 @@
- import org.json.JSONObject;
- 
- import java.io.IOException;
-+import java.io.InputStream;
-+import java.io.InputStreamReader;
-+import java.net.HttpURLConnection;
-+import java.net.MalformedURLException;
-+import java.net.URL;
- import java.util.ArrayList;
-+import java.util.concurrent.ExecutionException;
-+
-+import cz.msebera.android.httpclient.Header;
- 
- import static com.example.comun.Mqtt.topicRoot;
- 
-@@ -53,33 +73,30 @@
-  * Use the {@link DashboardFragment#newInstance} factory method to
-  * create an instance of this fragment.
-  */
--public class DashboardFragment extends Fragment implements MqttCallback{
-+public class DashboardFragment extends Fragment implements MqttCallback {
- 
-     private RecyclerView recyclerView;
-     private StaticRvAdapter staticRvAdapter;
-     private TabLayout tabLayout;
-     private ViewPager viewPager;
--    //WEATHER
--    private static  final int REQUEST_LOCATION=1;
--    double lat;
--    double longi;
-+    //Weather
-+
-+    final long MIN_TIME = 200;
-+    final float MIN_DISTANCE = 200;
-+    final int REQUEST_CODE = 101;
-+    final String APP_ID = "2599fe29f309cebdb21dd7dcf235662a";
-+    String Location_Provider = LocationManager.GPS_PROVIDER;
-+    final String WEATHER_URL = "https://api.openweathermap.org/data/2.5/weather";
- 
--    TextView showLocationTxt;
-+    TextView NameofCity, weatherState, Temperature;
-+    ImageView mweatherIcon;
- 
--    LocationManager locationManager;
--    String latitude,longitude;
-+    LocationManager mLocationManager;
-+    LocationListener mLocationListner;
- 
--    TextView view_city;
--    TextView view_temp;
--    TextView view_desc;
--    TextView view_country;
- 
--    ImageView view_weather;
--    //
-+
-     //Acceso a la maquina
--
--
--
-     public static MqttClient client = null;
-     // TODO: Rename parameter arguments, choose names that match
-     // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
-@@ -125,13 +142,13 @@
-     public View onCreateView(LayoutInflater inflater, ViewGroup container,
-                              Bundle savedInstanceState) {
-         // Inflate the layout for this fragment
--        View v= inflater.inflate(R.layout.fragment_dashboard, container, false);
-+        final View v = inflater.inflate(R.layout.fragment_dashboard, container, false);
-         //FIREBASE
-         //Recojo los datos del usuario
-         final FirebaseAuth mAuth = FirebaseAuth.getInstance();
-         final FirebaseUser usuario = mAuth.getCurrentUser();
--        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();
--        String idUser=usuario.getUid();
-+        final FirebaseFirestore fStore = FirebaseFirestore.getInstance();
-+        String idUser = usuario.getUid();
-         //guardo el nombre en un textView
-         /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);
-         String res="Hola"+" "+usuario.getDisplayName();
-@@ -162,50 +179,32 @@
-         });*/
- 
- 
--        //WEATHER
--        ActivityCompat.requestPermissions(getActivity(),new String[]
--                {Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);
--
--        view_city =v.findViewById(R.id.town);
--        view_city.setText("");
--        view_temp =v.findViewById(R.id.temp);
--        view_temp.setText("");
--        view_desc =v.findViewById(R.id.desc);
--        view_desc.setText("");
--        view_country=v.findViewById(R.id.txtCountry);
--        view_country.setText("");
--        view_weather =v.findViewById(R.id.wheather_image);
--
--        locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);
--       /* inicioGPS();*/
-         //
--
--
- 
- 
-         //RECYCLER VIEW
--        ArrayList<StaticRvModel> item=new ArrayList<>();
--        item.add(new StaticRvModel(R.drawable.icons_sun,"Soleado"));
--        item.add(new StaticRvModel(R.drawable.icons_night_mode,"Nocturno"));
--        item.add(new StaticRvModel(R.drawable.icons_energy_saving,"Ahorro"));
--        item.add(new StaticRvModel(R.drawable.icons_power_off,"Apagado"));
--        item.add(new StaticRvModel(R.drawable.icons_custom,"Custom"));
-+        ArrayList<StaticRvModel> item = new ArrayList<>();
-+        item.add(new StaticRvModel(R.drawable.icons_sun, "Soleado"));
-+        item.add(new StaticRvModel(R.drawable.icons_night_mode, "Nocturno"));
-+        item.add(new StaticRvModel(R.drawable.icons_energy_saving, "Ahorro"));
-+        item.add(new StaticRvModel(R.drawable.icons_power_off, "Apagado"));
-+        item.add(new StaticRvModel(R.drawable.icons_custom, "Custom"));
- 
--        final TextView medidasT=v.findViewById(R.id.medidaTemperaturaGeneral);
--        final TextView medidasH=v.findViewById(R.id.medidaHumedadGeneral);
--        final TextView medidasS=v.findViewById(R.id.medidaSalinidadGeneral);
--        final TextView medidasL=v.findViewById(R.id.medidasLuminosidadGeneral);
-+        final TextView medidasT = v.findViewById(R.id.medidaTemperaturaGeneral);
-+        final TextView medidasH = v.findViewById(R.id.medidaHumedadGeneral);
-+        final TextView medidasS = v.findViewById(R.id.medidaSalinidadGeneral);
-+        final TextView medidasL = v.findViewById(R.id.medidasLuminosidadGeneral);
- 
--        recyclerView=v.findViewById(R.id.rv_1);
--        staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);
--        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(),LinearLayoutManager.HORIZONTAL,false));
-+        recyclerView = v.findViewById(R.id.rv_1);
-+        staticRvAdapter = new StaticRvAdapter(item, medidasT, medidasH, medidasS, medidasL);
-+        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(), LinearLayoutManager.HORIZONTAL, false));
-         recyclerView.setAdapter(staticRvAdapter);
- 
- 
-         //TABS
-         tabLayout = v.findViewById(R.id.tab_layout);
-         viewPager = v.findViewById(R.id.view_pager);
--         //Array
-+        //Array
-         ArrayList<String> arrayList = new ArrayList<>();
- 
-         //set up with viewpager
-@@ -213,11 +212,11 @@
- 
-         TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());
-         //Pestañas
--        adapter.addFrag(new GeneralFragment(),"General");
--        adapter.addFrag(new Planta1Fragment(),"Planta 1");
--        adapter.addFrag(new Planta2Fragment(),"Planta 2");
-+        adapter.addFrag(new GeneralFragment(), "General");
-+        adapter.addFrag(new Planta1Fragment(), "Planta 1");
-+        adapter.addFrag(new Planta2Fragment(), "Planta 2");
- 
--        viewPager.setAdapter(adapter );
-+        viewPager.setAdapter(adapter);
- 
-         /*((MainActivity)getActivity()).ola();*/
-      /*   //LEER DATOS FIREBASE
-@@ -259,10 +258,109 @@
-         });
- 
-       */
--
-+        //Weather App
-+        weatherState =(TextView) v.findViewById(R.id.weatherCondition);
-+        Temperature = (TextView)v.findViewById(R.id.temperature);
-+        mweatherIcon =(ImageView) v.findViewById(R.id.weatherIcon);
-+        NameofCity = (TextView)v.findViewById(R.id.cityName);
- 
-         return v;
-     }
-+    @Override
-+    public void onResume() {
-+        super.onResume();
-+        getWeatherForCurrentLocation();
-+    }
-+    private void getWeatherForCurrentLocation() {
-+        mLocationManager = (LocationManager) getContext().getSystemService(Context.LOCATION_SERVICE);
-+        mLocationListner = new LocationListener() {
-+            @Override
-+            public void onLocationChanged(Location location) {
-+                String Latitude = String.valueOf(location.getLatitude());
-+                String Longitude = String.valueOf(location.getLongitude());
-+                RequestParams params = new RequestParams();
-+                params.put("lat",Latitude);
-+                params.put("lon",Longitude);
-+                params.put("appid",APP_ID);
-+                letsDoSomeWorking(params);
-+
-+            }
-+            @Override
-+            public void onStatusChanged(String provider, int status, Bundle extras) {
-+
-+            }
-+
-+            @Override
-+            public void onProviderEnabled(String provider) {
-+
-+            }
-+
-+            @Override
-+            public void onProviderDisabled(String provider) {
-+
-+            }
-+        };
-+        if (ActivityCompat.checkSelfPermission(getContext(), Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
-+            // TODO: Consider calling
-+            //    ActivityCompat#requestPermissions
-+            // here to request the missing permissions, and then overriding
-+            //   public void onRequestPermissionsResult(int requestCode, String[] permissions,
-+            //                                          int[] grantResults)
-+            // to handle the case where the user grants the permission. See the documentation
-+            // for ActivityCompat#requestPermissions for more details.
-+            ActivityCompat.requestPermissions(getActivity(),new String[]{Manifest.permission.ACCESS_FINE_LOCATION},REQUEST_CODE);
-+            return;
-+        }
-+        mLocationManager.requestLocationUpdates(Location_Provider, MIN_TIME, MIN_DISTANCE, mLocationListner);
-+    }
-+    @Override
-+    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {
-+        super.onRequestPermissionsResult(requestCode, permissions, grantResults);
-+        if (requestCode == REQUEST_CODE) {
-+            if (grantResults.length > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED) {
-+                Toast.makeText(getContext(), "Localizacion obtenida", Toast.LENGTH_SHORT).show();
-+                getWeatherForCurrentLocation();
-+            } else {
-+                Toast.makeText(getContext(), "Localizaacion no obtenida", Toast.LENGTH_SHORT).show();
-+            }
-+
-+        }
-+    }
-+    private void letsDoSomeWorking(RequestParams params){
-+        AsyncHttpClient client =new AsyncHttpClient();
-+        client.get(WEATHER_URL,params,new JsonHttpResponseHandler(){
-+            @Override
-+            public void onSuccess(int statusCode, Header[] headers, JSONObject response) {
-+                /*Toast.makeText(getContext(), "Data obteninda", Toast.LENGTH_SHORT).show();*/
-+                weatherData weatherD= weatherData.fromJson(response);
-+                updateUI(weatherD);
-+                //super.onSuccess(statusCode, headers, response);
-+            }
-+            @Override
-+            public void onFailure(int statusCode, Header[] headers, Throwable throwable, JSONObject errorResponse) {
-+                //super.onFailure(statusCode, headers, throwable, errorResponse);
-+                Toast.makeText(getContext(), "Data no obteninda", Toast.LENGTH_SHORT).show();
-+            }
-+        });
-+    }
-+    private void updateUI(weatherData weather){
-+        Temperature.setText(weather.getmTemperature());
-+        NameofCity.setText(weather.getMcity());
-+        weatherState.setText(weather.getmWeatherType());
-+        int resourceID =getResources().getIdentifier(weather.getMicon(),"drawable",getActivity().getPackageName());
-+        mweatherIcon.setImageResource(resourceID);
-+
-+
-+    }
-+    @Override
-+    public void onPause() {
-+        super.onPause();
-+        if(mLocationManager!=null){
-+            mLocationManager.removeUpdates(mLocationListner);
-+        }
-+    }
-+
-+
- 
-     public void enviarLucesOff(){
-         try {
-@@ -355,56 +453,7 @@
-     }
- 
- 
--    //WEATHER METHODS
--    private void api_key(final String City) {
--        OkHttpClient client = new OkHttpClient();
--
--        Request request = new Request.Builder()
--                .url("https://api.openweathermap.org/data/2.5/weather?q=" + City + "&appid=a6f41d947e0542a26580bcd5c3fb90ef&units=metric")
--                .get()
--                .build();
--        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
--        StrictMode.setThreadPolicy(policy);
--        try {
--            Response response = client.newCall(request).execute();
--            client.newCall(request).enqueue(new Callback() {
--                @Override
--                public void onFailure(Request request, IOException e) {
- 
--                }
--
--                @Override
--                public void onResponse(Response response) throws IOException {
--                    String responseData = response.body().string();
--                    try {
--                        JSONObject json = new JSONObject(responseData);
--                        JSONArray array = json.getJSONArray("weather");
--                        JSONObject object = array.getJSONObject(0);
--
--                        String description = object.getString("description");
--                        String icons = object.getString("icon");
--
--                        JSONObject temp1 = json.getJSONObject("main");
--                        Double Temperature = temp1.getDouble("temp");
--
--                        setText(view_city, City);
--
--                        String temps = Math.round(Temperature) + " °C";
--                        setText(view_temp, temps);
--                        setText(view_desc, description);
--                        setImage(view_weather, icons);
--
--                    } catch (JSONException e) {
--                        e.printStackTrace();
--                    }
--                }
--
--            });
--        } catch (IOException e) {
--            e.printStackTrace();
--        }
--
--    }
- 
-     private void setText(final TextView text, final String value) {
-         getActivity().runOnUiThread(new Runnable() {
-@@ -415,67 +464,7 @@
-         });
-     }
- 
--    private void setImage(final ImageView imageView, final String value) {
--        getActivity().runOnUiThread(new Runnable() {
--            @Override
--            public void run() {
--                //paste switch
--                switch (value) {
--                    case "01d":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));
--                        break;
--                    case "01n":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));
--                        break;
--                    case "02d":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));
--                        break;
--                    case "02n":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));
--                        break;
--                    case "03d":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));
--                        break;
--                    case "03n":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));
--                        break;
--                    case "04d":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));
--                        break;
--                    case "04n":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));
--                        break;
--                    case "09d":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));
--                        break;
--                    case "09n":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));
--                        break;
--                    case "10d":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));
--                        break;
--                    case "10n":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));
--                        break;
--                    case "11d":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));
--                        break;
--                    case "11n":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));
--                        break;
--                    case "13d":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));
--                        break;
--                    case "13n":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));
--                        break;
--                    default:
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.wheather));
- 
--                }
--            }
--        });
--    }
- 
-     //App location
-    /* private void getLocation() {
-Index: app/src/main/res/layout/fragment_dashboard.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    tools:context=\".ui.dashboard.DashboardFragment\">\r\n\r\n    <!-- TODO: Update blank fragment layout -->\r\n    <!--<TextView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_centerInParent=\"true\"\r\n        android:textSize=\"50dp\"\r\n        android:text=\"Home fragment\" />-->\r\n    <!--<LinearLayout\r\n        android:orientation=\"vertical\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n        <RelativeLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginRight=\"28dp\"\r\n            android:layout_marginTop=\"32dp\"\r\n            android:layout_marginLeft=\"28dp\">\r\n\r\n            <ImageView\r\n                android:layout_alignParentRight=\"true\"\r\n                android:src=\"@drawable/ic_home\"\r\n                android:layout_width=\"62dp\"\r\n                android:layout_height=\"62dp\"/>\r\n\r\n        </RelativeLayout>\r\n\r\n    </LinearLayout>-->\r\n\r\n    <androidx.constraintlayout.widget.ConstraintLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n        <androidx.constraintlayout.widget.ConstraintLayout\r\n            android:id=\"@+id/constraintLayout3\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"10dp\"\r\n            android:gravity=\"center\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:orientation=\"horizontal\"\r\n                app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/imgLogo\"\r\n                    android:layout_width=\"32dp\"\r\n                    android:layout_height=\"32dp\"\r\n                    android:src=\"@drawable/logo_without_background\" />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/textInfinity\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_marginLeft=\"2dp\"\r\n                    android:gravity=\"center\"\r\n                    android:text=\"Infinity Crop\"\r\n                    android:textSize=\"19sp\" />\r\n\r\n            </LinearLayout>\r\n\r\n        </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n        <androidx.cardview.widget.CardView\r\n            android:id=\"@+id/hello_text\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_margin=\"12dp\"\r\n            android:layout_marginStart=\"8dp\"\r\n            android:layout_marginTop=\"60dp\"\r\n            android:layout_marginEnd=\"8dp\"\r\n            app:cardCornerRadius=\"12dp\"\r\n            app:cardElevation=\"6dp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/constraintLayout3\">\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n\r\n                android:orientation=\"vertical\"\r\n                android:padding=\"2dp\">\r\n\r\n                <androidx.constraintlayout.widget.ConstraintLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"153dp\"\r\n                    android:layout_marginBottom=\"12dp\">\r\n\r\n\r\n                    <ImageView\r\n                        android:id=\"@+id/wheather_image\"\r\n                        android:layout_width=\"158dp\"\r\n                        android:layout_height=\"130dp\"\r\n                        android:layout_marginEnd=\"32dp\"\r\n                        android:src=\"@drawable/wheather\"\r\n                        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                        app:layout_constraintEnd_toEndOf=\"parent\"\r\n                        app:layout_constraintTop_toTopOf=\"parent\"\r\n                        app:layout_constraintVertical_bias=\"0.547\"\r\n                        tools:ignore=\"MissingConstraints\" />\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/temp\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginStart=\"24dp\"\r\n                        android:layout_marginTop=\"8dp\"\r\n                        android:text=\"15°C\"\r\n                        android:textColor=\"#000000\"\r\n                        android:textSize=\"36sp\"\r\n                        app:layout_constraintEnd_toStartOf=\"@+id/wheather_image\"\r\n                        app:layout_constraintHorizontal_bias=\"0.013\"\r\n                        app:layout_constraintStart_toStartOf=\"parent\"\r\n                        app:layout_constraintTop_toBottomOf=\"@+id/town\"\r\n                        tools:ignore=\"MissingConstraints\" />\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/desc\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginStart=\"24dp\"\r\n                        android:layout_marginTop=\"8dp\"\r\n                        android:text=\"Description\"\r\n                        android:textAppearance=\"@style/TextAppearance.AppCompat.Body1\"\r\n                        android:textColor=\"#494343\"\r\n                        app:layout_constraintEnd_toStartOf=\"@+id/wheather_image\"\r\n                        app:layout_constraintHorizontal_bias=\"0.012\"\r\n                        app:layout_constraintStart_toStartOf=\"parent\"\r\n                        app:layout_constraintTop_toBottomOf=\"@+id/temp\"\r\n                        tools:ignore=\"MissingConstraints\" />\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/town\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginStart=\"24dp\"\r\n                        android:layout_marginTop=\"16dp\"\r\n                        android:text=\"Krakow\"\r\n                        android:textAppearance=\"@style/TextAppearance.AppCompat.Body1\"\r\n                        android:textSize=\"18sp\"\r\n                        app:layout_constraintEnd_toStartOf=\"@+id/wheather_image\"\r\n                        app:layout_constraintHorizontal_bias=\"0.011\"\r\n                        app:layout_constraintStart_toStartOf=\"parent\"\r\n                        app:layout_constraintTop_toTopOf=\"parent\"\r\n                        tools:ignore=\"MissingConstraints\" />\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/txtCountry\"\r\n                        android:layout_width=\"84dp\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginStart=\"24dp\"\r\n                        android:text=\"TextView\"\r\n                        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                        app:layout_constraintEnd_toStartOf=\"@+id/wheather_image\"\r\n                        app:layout_constraintHorizontal_bias=\"0.015\"\r\n                        app:layout_constraintStart_toStartOf=\"parent\"\r\n                        app:layout_constraintTop_toBottomOf=\"@+id/desc\"\r\n                        app:layout_constraintVertical_bias=\"0.818\"\r\n                        tools:ignore=\"MissingConstraints\" />\r\n\r\n                </androidx.constraintlayout.widget.ConstraintLayout>\r\n            </LinearLayout>\r\n        </androidx.cardview.widget.CardView>\r\n\r\n\r\n        <RelativeLayout\r\n            android:id=\"@+id/relativeLayout2\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"60dp\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginRight=\"20dp\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/hello_text\"\r\n            tools:layout_editor_absoluteX=\"20dp\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/textMode\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:text=\"Modos  >\"\r\n\r\n                android:textSize=\"19sp\" />\r\n\r\n            <!--<ImageView\r\n                android:layout_width=\"62dp\"\r\n                android:layout_height=\"62dp\"\r\n                android:layout_alignParentRight=\"true\"\r\n                android:src=\"@drawable/ic_sun\" />-->\r\n        </RelativeLayout>\r\n\r\n        <androidx.recyclerview.widget.RecyclerView\r\n            android:id=\"@+id/rv_1\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"150dp\"\r\n            android:layout_marginLeft=\"10dp\"\r\n            android:layout_marginTop=\"2dp\"\r\n            android:layout_marginRight=\"10dp\"\r\n            app:layout_constraintBottom_toBottomOf=\"parent\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/relativeLayout2\"\r\n            app:layout_constraintVertical_bias=\"0\" />\r\n\r\n        <!--<androidx.recyclerview.widget.RecyclerView\r\n            android:id=\"@+id/rv_2\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"200dp\"\r\n            android:layout_marginLeft=\"10dp\"\r\n            android:layout_marginTop=\"40dp\"\r\n            android:layout_marginRight=\"10dp\"\r\n            app:layout_constraintBottom_toBottomOf=\"parent\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/rv_1\"\r\n            app:layout_constraintVertical_bias=\"0\" />-->\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"400dp\"\r\n            android:layout_marginTop=\"16dp\"\r\n            android:orientation=\"vertical\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\r\n\r\n            <com.google.android.material.tabs.TabLayout\r\n                android:id=\"@+id/tab_layout\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"48dp\"\r\n                android:layout_marginLeft=\"8dp\"\r\n                android:layout_marginRight=\"8dp\"\r\n                android:background=\"@drawable/back_unselected_dash\"\r\n                app:tabIndicatorHeight=\"0dp\"\r\n                app:tabSelectedTextColor=\"@color/colorPrimary\"\r\n                app:tabBackground=\"@drawable/back_tabs_dash\"\r\n                app:tabTextColor=\"@android:color/black\" />\r\n\r\n            <androidx.constraintlayout.widget.ConstraintLayout\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\">\r\n\r\n                <androidx.viewpager.widget.ViewPager\r\n                    android:id=\"@+id/view_pager\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginStart=\"10dp\"\r\n                    android:layout_marginEnd=\"10dp\"\r\n                    app:layout_constraintEnd_toEndOf=\"parent\"\r\n                    app:layout_constraintStart_toStartOf=\"parent\"\r\n                    app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n                </androidx.viewpager.widget.ViewPager>\r\n            </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n        </LinearLayout>\r\n\r\n    </androidx.constraintlayout.widget.ConstraintLayout>\r\n</ScrollView>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_dashboard.xml	(revision 97b60040cb9ddffbf7eb424364e4fc4451452801)
-+++ app/src/main/res/layout/fragment_dashboard.xml	(date 1611080417505)
-@@ -105,77 +105,69 @@
- 
- 
-                     <ImageView
--                        android:id="@+id/wheather_image"
--                        android:layout_width="158dp"
--                        android:layout_height="130dp"
--                        android:layout_marginEnd="32dp"
--                        android:src="@drawable/wheather"
-+                        android:id="@+id/weatherIcon"
-+                        android:layout_width="146dp"
-+                        android:layout_height="117dp"
-+                        android:src="@drawable/cloudy"
-                         app:layout_constraintBottom_toBottomOf="parent"
-                         app:layout_constraintEnd_toEndOf="parent"
-+                        app:layout_constraintHorizontal_bias="1.0"
-+                        app:layout_constraintStart_toStartOf="@+id/guideline2"
-                         app:layout_constraintTop_toTopOf="parent"
--                        app:layout_constraintVertical_bias="0.547"
-+                        app:layout_constraintVertical_bias="0.472"
-                         tools:ignore="MissingConstraints" />
- 
-                     <TextView
--                        android:id="@+id/temp"
-+                        android:id="@+id/cityName"
-                         android:layout_width="wrap_content"
-                         android:layout_height="wrap_content"
--                        android:layout_marginStart="24dp"
--                        android:layout_marginTop="8dp"
--                        android:text="15°C"
--                        android:textColor="#000000"
--                        android:textSize="36sp"
--                        app:layout_constraintEnd_toStartOf="@+id/wheather_image"
--                        app:layout_constraintHorizontal_bias="0.013"
-+                        android:layout_marginStart="35dp"
-+                        android:layout_marginTop="12dp"
-+                        android:text="Cargando..."
-+                        android:textColor="@color/black"
-+                        android:textSize="32sp"
-+                        app:layout_constraintEnd_toStartOf="@+id/guideline2"
-+                        app:layout_constraintHorizontal_bias="0.0"
-                         app:layout_constraintStart_toStartOf="parent"
--                        app:layout_constraintTop_toBottomOf="@+id/town"
--                        tools:ignore="MissingConstraints" />
-+                        app:layout_constraintTop_toTopOf="parent" />
- 
-                     <TextView
--                        android:id="@+id/desc"
-+                        android:id="@+id/temperature"
-                         android:layout_width="wrap_content"
-                         android:layout_height="wrap_content"
--                        android:layout_marginStart="24dp"
--                        android:layout_marginTop="8dp"
--                        android:text="Description"
--                        android:textAppearance="@style/TextAppearance.AppCompat.Body1"
--                        android:textColor="#494343"
--                        app:layout_constraintEnd_toStartOf="@+id/wheather_image"
--                        app:layout_constraintHorizontal_bias="0.012"
--                        app:layout_constraintStart_toStartOf="parent"
--                        app:layout_constraintTop_toBottomOf="@+id/temp"
--                        tools:ignore="MissingConstraints" />
-+                        android:layout_marginTop="2dp"
-+                        android:textColor="#000000"
-+                        android:textSize="55sp"
-+                        app:layout_constraintEnd_toStartOf="@+id/weatherIcon"
-+                        app:layout_constraintHorizontal_bias="0.0"
-+                        app:layout_constraintStart_toStartOf="@+id/cityName"
-+                        app:layout_constraintTop_toBottomOf="@+id/cityName" />
- 
-                     <TextView
--                        android:id="@+id/town"
-+                        android:id="@+id/weatherCondition"
-                         android:layout_width="wrap_content"
-                         android:layout_height="wrap_content"
--                        android:layout_marginStart="24dp"
--                        android:layout_marginTop="16dp"
--                        android:text="Krakow"
--                        android:textAppearance="@style/TextAppearance.AppCompat.Body1"
--                        android:textSize="18sp"
--                        app:layout_constraintEnd_toStartOf="@+id/wheather_image"
--                        app:layout_constraintHorizontal_bias="0.011"
--                        app:layout_constraintStart_toStartOf="parent"
--                        app:layout_constraintTop_toTopOf="parent"
--                        tools:ignore="MissingConstraints" />
--
--                    <TextView
--                        android:id="@+id/txtCountry"
--                        android:layout_width="84dp"
--                        android:layout_height="wrap_content"
--                        android:layout_marginStart="24dp"
--                        android:text="TextView"
-+                        android:layout_marginBottom="16dp"
-+                        android:text="Cargando..."
-+                        android:textColor="@color/black"
-+                        android:textSize="15dp"
-                         app:layout_constraintBottom_toBottomOf="parent"
--                        app:layout_constraintEnd_toStartOf="@+id/wheather_image"
--                        app:layout_constraintHorizontal_bias="0.015"
--                        app:layout_constraintStart_toStartOf="parent"
--                        app:layout_constraintTop_toBottomOf="@+id/desc"
--                        app:layout_constraintVertical_bias="0.818"
--                        tools:ignore="MissingConstraints" />
-+                        app:layout_constraintEnd_toEndOf="@+id/cityName"
-+                        app:layout_constraintHorizontal_bias="0.0"
-+                        app:layout_constraintStart_toStartOf="@+id/temperature"
-+                        app:layout_constraintTop_toBottomOf="@+id/temperature"
-+                        app:layout_constraintVertical_bias="0.0" />
-+
-+                    <androidx.constraintlayout.widget.Guideline
-+                        android:id="@+id/guideline2"
-+                        android:layout_width="wrap_content"
-+                        android:layout_height="wrap_content"
-+                        android:orientation="vertical"
-+                        app:layout_constraintGuide_begin="237dp" />
-+
- 
-                 </androidx.constraintlayout.widget.ConstraintLayout>
-+
-             </LinearLayout>
-         </androidx.cardview.widget.CardView>
- 
-Index: app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.MachineControl;\r\n\r\nimport android.app.DatePickerDialog;\r\nimport android.app.TimePickerDialog;\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.graphics.drawable.ColorDrawable;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.CheckBox;\r\nimport android.widget.DatePicker;\r\nimport android.widget.EditText;\r\nimport android.widget.TextView;\r\nimport android.widget.TimePicker;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\nimport java.text.ParseException;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.Calendar;\r\nimport java.util.Date;\r\nimport java.util.List;\r\nimport java.util.SortedSet;\r\n\r\nimport kotlin.Unit;\r\nimport kotlin.jvm.functions.Function1;\r\nimport me.sujanpoudel.wheelview.WheelView;\r\n\r\npublic class planta1 extends AppCompatActivity {\r\n  private CheckBox checkYes, checkNo;\r\n    private Button editInfo, saveChanges;\r\n    private TextView mDisplayDate,mDisplayHour,infoTitle;\r\n    private EditText nameplant;\r\n    private FirebaseFirestore db;\r\n    private List<String> nombres;\r\n    private List<String> estado;\r\n    private String id;\r\n    private String idDocument;\r\n    //Reloj\r\n    int t2Hour, t2Minute;\r\n    private DatePickerDialog.OnDateSetListener mDateSetListener;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_planta1);\r\n        db=FirebaseFirestore.getInstance();\r\n        //bungle get extra\r\n        Bundle extras = getIntent().getExtras();\r\n        id = extras.getString(\"idMachine\");\r\n        //arrays\r\n        nombres=new ArrayList<>();\r\n        estado=new ArrayList<>();\r\n        //firestore\r\n        db.collection(\"Mediciones planta 1\").document(id).collection(\"DatosPiso\")\r\n                .addSnapshotListener(new EventListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable QuerySnapshot snapshots,\r\n                                        @Nullable FirebaseFirestoreException e) {\r\n                        if (e != null) {\r\n                            return;\r\n                        }\r\n                        for (DocumentSnapshot doc : snapshots) {\r\n                                nombres.add(doc.getString(\"name\"));\r\n                                estado.add(doc.getId());\r\n                        }\r\n                        Toast.makeText(getApplicationContext(),nombres.toString(), Toast.LENGTH_LONG).show();\r\n\r\n                        final WheelView wheelView = (WheelView) findViewById(R.id.wheelview);\r\n                        wheelView.setTitles(nombres);\r\n                        wheelView.setSelectListener(new Function1<Integer, Unit>() {\r\n                            @Override\r\n                            public Unit invoke(Integer integer) {\r\n                                showToast(integer);\r\n                                return Unit.INSTANCE;\r\n                            }\r\n                            private final  void showToast(Integer index) {\r\n                               // Toast.makeText(planta1.this,\"\"+wheelView.getTitles().get(index),Toast.LENGTH_SHORT).show();\r\n                                idDocument=estado.get(index);\r\n                                Toast.makeText(planta1.this,\"\"+idDocument,Toast.LENGTH_SHORT).show();\r\n                                itenInfo(idDocument);\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n\r\n\r\n\r\n\r\n\r\n        //Nombre de la planta\r\n        nameplant = (EditText)findViewById(R.id.editTextNobrep);\r\n        nameplant.setEnabled(false);\r\n        //Checkboxes\r\n        checkYes=(CheckBox)findViewById(R.id.checkBoxSi);\r\n        checkYes.setKeyListener(null);\r\n        checkNo=(CheckBox)findViewById(R.id.checkBoxNo);\r\n        checkNo.setKeyListener(null);\r\n\r\n        //Boton guardar cambios\r\n        saveChanges = (Button)findViewById(R.id.btn_save);\r\n        saveChanges.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                editInfo.setVisibility(View.VISIBLE);\r\n                saveChanges.setVisibility(View.GONE);\r\n                mDisplayDate.setEnabled(false);\r\n                mDisplayHour.setEnabled(false);\r\n                nameplant.setEnabled(false);\r\n                infoTitle.setText(\"Pulsa el botón para editar:\");\r\n            }\r\n        });\r\n\r\n        //Boton editar informacion\r\n        editInfo = (Button) findViewById(R.id.btnedit);\r\n        editInfo.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                saveChanges.setVisibility(View.VISIBLE);\r\n                editInfo.setVisibility(View.GONE);\r\n                mDisplayDate.setEnabled(true);\r\n                mDisplayHour.setEnabled(true);\r\n                nameplant.setEnabled(true);\r\n                infoTitle.setText(\"Información completa:\");\r\n\r\n            }\r\n        });\r\n        infoTitle = (TextView) findViewById(R.id.textViewinfo);\r\n        //HORA\r\n        mDisplayHour =(TextView) findViewById(R.id.editHour);\r\n        mDisplayHour.setEnabled(false);\r\n        mDisplayHour.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                TimePickerDialog timePickerDialog = new TimePickerDialog(\r\n                        planta1.this, android.R.style.Theme_Holo_Light_Dialog_MinWidth, new TimePickerDialog.OnTimeSetListener() {\r\n                    @Override\r\n                    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {\r\n                        t2Hour = hourOfDay;\r\n                        t2Minute = minute;\r\n                        String time = t2Hour + \":\" + t2Minute;\r\n                        SimpleDateFormat f24Hours = new SimpleDateFormat(\"HH:mm\");\r\n                        try {\r\n                            Date date = f24Hours.parse(time);\r\n                            SimpleDateFormat f12Hours = new SimpleDateFormat(\"hh:mm aa\");\r\n                            mDisplayHour.setText(f12Hours.format(date));\r\n                        } catch (ParseException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                },12,0,false\r\n                );\r\n                timePickerDialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n                timePickerDialog.updateTime(t2Hour,t2Minute);\r\n                timePickerDialog.show();\r\n            }\r\n        });\r\n\r\n\r\n        //CALENDARIO\r\n        mDisplayDate = (TextView) findViewById(R.id.tvDate);\r\n        mDisplayDate.setEnabled(false);\r\n        mDisplayDate.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Calendar cal = Calendar.getInstance();\r\n                int year = cal.get(Calendar.YEAR);\r\n                int month = cal.get(Calendar.MONTH);\r\n                int day = cal.get(Calendar.DAY_OF_MONTH);\r\n\r\n                DatePickerDialog dialog = new DatePickerDialog(planta1.this,android.R.style.Theme_Holo_Dialog_MinWidth, mDateSetListener,year,month,day);\r\n                dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n                dialog.show();\r\n            }\r\n\r\n        });\r\n        mDateSetListener = new DatePickerDialog.OnDateSetListener() {\r\n            @Override\r\n            public void onDateSet(DatePicker datePicker, int year, int month, int day) {\r\n                month = month+1;\r\n                String date = day +\"/\" + month +\"/\"+ year;\r\n                mDisplayDate.setText(date);\r\n            }\r\n        };\r\n\r\n    }\r\n\r\n    private void itenInfo(String uiDoc){\r\n        //hacer consulta a ese documento con uiDOc y sacar su info\r\n        //luego set Text a all\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java	(revision 97b60040cb9ddffbf7eb424364e4fc4451452801)
-+++ app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java	(date 1611080556561)
-@@ -1,29 +1,44 @@
- package com.example.infinitycrop.ui.MachineControl;
- 
-+import android.app.AlarmManager;
- import android.app.DatePickerDialog;
-+import android.app.FragmentTransaction;
- import android.app.TimePickerDialog;
-+import android.content.Context;
- import android.content.Intent;
- import android.graphics.Color;
- import android.graphics.drawable.ColorDrawable;
- import android.os.Bundle;
-+import android.os.CountDownTimer;
- import android.view.View;
- import android.widget.Button;
- import android.widget.CheckBox;
- import android.widget.DatePicker;
- import android.widget.EditText;
-+import android.widget.ImageView;
-+import android.widget.RelativeLayout;
- import android.widget.TextView;
- import android.widget.TimePicker;
- import android.widget.Toast;
- 
-+import androidx.annotation.NonNull;
- import androidx.annotation.Nullable;
- import androidx.appcompat.app.AppCompatActivity;
-+import androidx.constraintlayout.widget.ConstraintLayout;
-+import androidx.fragment.app.Fragment;
- 
- import com.example.infinitycrop.R;
--import com.google.firebase.auth.FirebaseUser;
-+import com.example.infinitycrop.ui.dashboard.DashboardFragment;
-+import com.example.infinitycrop.ui.dashboard.GeneralFragment;
-+import com.example.infinitycrop.ui.logmail.LoginActivity;
-+import com.google.android.gms.tasks.OnFailureListener;
-+import com.google.android.gms.tasks.OnSuccessListener;
-+import com.google.firebase.firestore.DocumentReference;
- import com.google.firebase.firestore.DocumentSnapshot;
- import com.google.firebase.firestore.EventListener;
- import com.google.firebase.firestore.FirebaseFirestore;
- import com.google.firebase.firestore.FirebaseFirestoreException;
-+import com.google.firebase.firestore.ListenerRegistration;
- import com.google.firebase.firestore.QuerySnapshot;
- 
- import java.text.ParseException;
-@@ -32,23 +47,40 @@
- import java.util.Arrays;
- import java.util.Calendar;
- import java.util.Date;
-+import java.util.HashMap;
- import java.util.List;
--import java.util.SortedSet;
-+import java.util.Map;
- 
- import kotlin.Unit;
- import kotlin.jvm.functions.Function1;
- import me.sujanpoudel.wheelview.WheelView;
- 
- public class planta1 extends AppCompatActivity {
--  private CheckBox checkYes, checkNo;
-+    private List<String> nombres;
-+    private List<String> estado;
-+    //Aviso al entrar
-+    private ConstraintLayout fondoR;
-+    private ImageView imgr,goBack;
-+    private TextView textR;
-+    //
-+
-+    private int piso = 1;
-+    String one = String.valueOf(piso);
-+    private int stated = 1;
-+    String state = String.valueOf(stated);
-+
-+
-+    private CheckBox checkYes, checkNo;
-     private Button editInfo, saveChanges;
-     private TextView mDisplayDate,mDisplayHour,infoTitle;
-     private EditText nameplant;
-     private FirebaseFirestore db;
--    private List<String> nombres;
--    private List<String> estado;
-+
-+    private String idDocument;
-     private String id;
--    private String idDocument;
-+
-+
-+
-     //Reloj
-     int t2Hour, t2Minute;
-     private DatePickerDialog.OnDateSetListener mDateSetListener;
-@@ -56,10 +88,38 @@
-     protected void onCreate(Bundle savedInstanceState) {
-         super.onCreate(savedInstanceState);
-         setContentView(R.layout.activity_planta1);
-+
-+        //Aviso al entrar
-+        fondoR = findViewById(R.id.constraitR);
-+        imgr = findViewById(R.id.imageprevius);
-+        textR = findViewById(R.id.txtInfoD);
-+        CountDownTimer countDownTimer = new CountDownTimer(3000, 1000) {//Se pone la cuenta atras para que no se superponga con la animación
-+            public void onTick(long millisUntilFinished) {
-+
-+            }
-+
-+            public void onFinish() {
-+
-+                fondoR.setVisibility(View.GONE);
-+                imgr.setVisibility(View.GONE);
-+                textR.setVisibility(View.GONE);
-+
-+            }
-+        }.start();
-+        //boton para volver
-+        goBack= findViewById(R.id.backDashboard);
-+        goBack.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+               finish();
-+            }
-+        });
-+
-         db=FirebaseFirestore.getInstance();
-         //bungle get extra
-         Bundle extras = getIntent().getExtras();
-         id = extras.getString("idMachine");
-+
-         //arrays
-         nombres=new ArrayList<>();
-         estado=new ArrayList<>();
-@@ -72,14 +132,18 @@
-                         if (e != null) {
-                             return;
-                         }
-+                        nombres.clear();
-                         for (DocumentSnapshot doc : snapshots) {
-                                 nombres.add(doc.getString("name"));
-                                 estado.add(doc.getId());
-                         }
--                        Toast.makeText(getApplicationContext(),nombres.toString(), Toast.LENGTH_LONG).show();
-+                       /* Toast.makeText(getApplicationContext(),nombres.toString(), Toast.LENGTH_LONG).show();*/
-+
-+
- 
-                         final WheelView wheelView = (WheelView) findViewById(R.id.wheelview);
-                         wheelView.setTitles(nombres);
-+
-                         wheelView.setSelectListener(new Function1<Integer, Unit>() {
-                             @Override
-                             public Unit invoke(Integer integer) {
-@@ -91,8 +155,11 @@
-                                 idDocument=estado.get(index);
-                                 Toast.makeText(planta1.this,""+idDocument,Toast.LENGTH_SHORT).show();
-                                 itenInfo(idDocument);
-+
-+
-                             }
-                         });
-+
-                     }
-                 });
- 
-@@ -114,12 +181,17 @@
-         saveChanges.setOnClickListener(new View.OnClickListener() {
-             @Override
-             public void onClick(View v) {
-+                saveNote(v);
-                 editInfo.setVisibility(View.VISIBLE);
-                 saveChanges.setVisibility(View.GONE);
-                 mDisplayDate.setEnabled(false);
-                 mDisplayHour.setEnabled(false);
-                 nameplant.setEnabled(false);
-                 infoTitle.setText("Pulsa el botón para editar:");
-+
-+
-+
-+
-             }
-         });
- 
-@@ -128,6 +200,7 @@
-         editInfo.setOnClickListener(new View.OnClickListener() {
-             @Override
-             public void onClick(View v) {
-+
-                 saveChanges.setVisibility(View.VISIBLE);
-                 editInfo.setVisibility(View.GONE);
-                 mDisplayDate.setEnabled(true);
-@@ -135,6 +208,7 @@
-                 nameplant.setEnabled(true);
-                 infoTitle.setText("Información completa:");
- 
-+
-             }
-         });
-         infoTitle = (TextView) findViewById(R.id.textViewinfo);
-@@ -165,6 +239,7 @@
-                 timePickerDialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));
-                 timePickerDialog.updateTime(t2Hour,t2Minute);
-                 timePickerDialog.show();
-+                startAlarm(v);
-             }
-         });
- 
-@@ -197,9 +272,79 @@
- 
-     }
- 
-+    @Override
-+    protected void onStart() {
-+        super.onStart();
-+
-+
-+    }
-+    private void startAlarm(View v){
-+        AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
-+
-+    }
-+    public void saveNote(View v){
-+        String cola = idDocument;
-+        String nombre = nameplant.getText().toString();
-+        String hora = mDisplayHour.getText().toString();
-+        String dia = mDisplayDate.getText().toString();
-+        String piso = one;
-+
-+        Map<String, Object> note = new HashMap<>();
-+        note.put("name",nombre);
-+        note.put("fecha",dia);
-+        note.put("hora",hora);
-+        note.put("piso",piso);
-+
-+        db.collection("Mediciones planta 1").document(id).collection("DatosPiso").document(cola).set(note).addOnSuccessListener(new OnSuccessListener<Void>() {
-+            @Override
-+            public void onSuccess(Void aVoid) {
-+            Toast.makeText(planta1.this,"va bien",Toast.LENGTH_SHORT).show();
-+            }
-+        }).addOnFailureListener(new OnFailureListener() {
-+            @Override
-+            public void onFailure(@NonNull Exception e) {
-+                Toast.makeText(planta1.this,"va mal",Toast.LENGTH_SHORT).show();
-+            }
-+        });
-+
-+
-+    }
-+
-     private void itenInfo(String uiDoc){
-         //hacer consulta a ese documento con uiDOc y sacar su info
-         //luego set Text a all
-+        db.collection("Mediciones planta 1").document(id).collection("DatosPiso").document(uiDoc).get()
-+                .addOnSuccessListener(new OnSuccessListener<DocumentSnapshot>() {
-+                    @Override
-+                    public void onSuccess(DocumentSnapshot documentSnapshot) {
-+                        if(documentSnapshot.exists()){
-+                            String nombre = documentSnapshot.getString("name");
-+                            String fecha = documentSnapshot.getString("fecha");
-+                            String hora = documentSnapshot.getString("hora");
-+
-+                           // Map<String,Object> note = documentSnapshot.getData();
-+                            nameplant.setText(nombre);
-+                            mDisplayHour.setText(hora);
-+                            mDisplayDate.setText(fecha);
-+
-+                        }else{
-+                            Toast.makeText(planta1.this,"Document does exist",Toast.LENGTH_SHORT).show();
-+                        }
-+                    }
-+                }).addOnFailureListener(new OnFailureListener() {
-+            @Override
-+            public void onFailure(@NonNull Exception e) {
-+                Toast.makeText(planta1.this,"va mal",Toast.LENGTH_SHORT).show();
-+            }
-+        });
-+                /*.addSnapshotListener(new EventListener<DocumentSnapshot>() {
-+                    @Override
-+                    public void onEvent(@Nullable DocumentSnapshot value, @Nullable FirebaseFirestoreException error) {
-+
-+                    }
-+                });*/
-+
-+
-     }
- 
- }
-Index: app/src/main/res/layout/activity_planta1.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:background=\"@drawable/bg4\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\"com.example.infinitycrop.ui.MachineControl.planta1\">\r\n\r\n    <RelativeLayout\r\n\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:layout_marginBottom=\"7.3dp\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n\r\n            android:orientation=\"vertical\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/backTomachinelist\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"40dp\"\r\n                android:layout_marginLeft=\"10dp\"\r\n                android:layout_marginTop=\"30dp\"\r\n                android:src=\"@drawable/icons_arrow_left_green\">\r\n\r\n            </ImageView>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"12dp\"\r\n                android:orientation=\"horizontal\">\r\n\r\n                <TextView\r\n                    android:id=\"@+id/textView\"\r\n                    android:layout_width=\"469dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginLeft=\"10dp\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"clip_horizontal\"\r\n                    android:text=\"Piso 1\"\r\n                    android:textColor=\"@color/white\"\r\n                    android:textSize=\"25dp\"\r\n                    android:textStyle=\"bold\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"bottom|right\"\r\n                    android:orientation=\"vertical\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:orientation=\"vertical\" />\r\n            </LinearLayout>\r\n\r\n            <me.sujanpoudel.wheelview.WheelView\r\n                android:id=\"@+id/wheelview\"\r\n                android:layout_width=\"290dp\"\r\n                android:layout_height=\"203dp\"\r\n                android:layout_gravity=\"center\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\"\r\n                app:wheelAnchorAngle=\"270\"\r\n                app:wheelAnimationDuration=\"500\"\r\n                app:wheelArcBackgroundColor=\"@color/colorSecondaryDark\"\r\n                app:wheelCenterIcon=\"@drawable/logo_without_background\"\r\n                app:wheelDividerStrokeWidth=\"1dp\"\r\n                app:wheelMode=\"ANIMATE_TO_ANCHOR\"\r\n                app:wheelSelectedArcBackgroundColor=\"@color/colorSecondary\"\r\n                app:wheelSelectedTextColor=\"@color/white\"\r\n                app:wheelStartAngle=\"315\"\r\n                app:wheelTextColor=\"@color/white\"\r\n                app:wheelTextSize=\"16sp\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_marginTop=\"10dp\"\r\n                android:orientation=\"horizontal\"\r\n                android:paddingLeft=\"20dp\">\r\n\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_marginLeft=\"1dp\"\r\n                    android:layout_marginRight=\"20dp\"\r\n                    android:background=\"@drawable/rectangle\"\r\n                    android:orientation=\"horizontal\">\r\n\r\n                    <LinearLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:layout_gravity=\"center\"\r\n                        android:layout_marginLeft=\"10dp\"\r\n                        android:layout_marginRight=\"15dp\"\r\n                        android:orientation=\"vertical\">\r\n\r\n                        <LinearLayout\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"40dp\"\r\n\r\n                            android:orientation=\"horizontal\">\r\n\r\n                            <TextView\r\n                                android:id=\"@+id/textViewinfo\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_gravity=\"center\"\r\n                                android:text=\"Pulsa el botón para editar:\"\r\n                                android:textColor=\"#000000\"\r\n                                android:textSize=\"16.7sp\"\r\n                                android:textStyle=\"normal\" />\r\n\r\n                            <Button\r\n                                android:id=\"@+id/btnedit\"\r\n                                android:layout_width=\"match_parent\"\r\n                                android:layout_marginTop=\"2dp\"\r\n                                android:layout_height=\"30dp\"\r\n                                android:background=\"@drawable/btn_scan\"\r\n                                android:layout_marginLeft=\"10dp\"\r\n                                android:text=\"Editar\"\r\n                                android:textColor=\"#FFFFFF\" />\r\n\r\n                        </LinearLayout>\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textView23\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"12dp\"\r\n                            android:text=\"Sección ocupada:\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n\r\n                        <LinearLayout\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:orientation=\"horizontal\">\r\n\r\n                            <CheckBox\r\n                                android:id=\"@+id/checkBoxSi\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_weight=\"1\"\r\n                                android:text=\"Si\" />\r\n\r\n                            <CheckBox\r\n                                android:id=\"@+id/checkBoxNo\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_weight=\"1\"\r\n                                android:checked=\"true\"\r\n                                android:clickable=\"false\"\r\n                                android:text=\"No\" />\r\n                        </LinearLayout>\r\n\r\n\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textView7\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"12dp\"\r\n                            android:text=\"Nombre de la especie:\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n\r\n                        <EditText\r\n                            android:id=\"@+id/editTextNobrep\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:background=\"@android:color/transparent\"\r\n                            android:maxLines=\"1\"\r\n                            android:paddingTop=\"5dp\"\r\n                            android:textColorHint=\"#9E9D9D\"\r\n                            android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                            android:textSize=\"15sp\"\r\n                            android:hint=\"Toca para añadir\"\r\n\r\n                            />\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textedit\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"22.3dp\"\r\n                            android:text=\"Hora de fin\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/editHour\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:background=\"@android:color/transparent\"\r\n                            android:ems=\"10\"\r\n                            android:text=\"Toca para añdir\"\r\n                            android:inputType=\"time\"\r\n                            android:maxLines=\"1\"\r\n                            android:paddingTop=\"5dp\"\r\n                            android:textColorHint=\"#333232\"\r\n                            android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                            android:textSize=\"15sp\" />\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textView11\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"22.3dp\"\r\n                            android:text=\"Fecha de fin\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n                        <TextView\r\n                            android:id=\"@+id/tvDate\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:background=\"@android:color/transparent\"\r\n                            android:ems=\"10\"\r\n                            android:text=\"Toca para añdir\"\r\n                            android:inputType=\"time\"\r\n                            android:editable=\"false\"\r\n                            android:maxLines=\"1\"\r\n                            android:paddingTop=\"5dp\"\r\n                            android:textColorHint=\"#333232\"\r\n                            android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                            android:textSize=\"15sp\" />\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:layout_marginBottom=\"20dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <Button\r\n\r\n                            android:id=\"@+id/btn_save\"\r\n                            android:layout_width=\"151dp\"\r\n                            android:layout_height=\"49dp\"\r\n                            android:layout_gravity=\"center\"\r\n                            android:background=\"@drawable/btn_scan\"\r\n                            android:visibility=\"gone\"\r\n                            android:text=\"Guardar cambios\"\r\n                            android:textColor=\"#FFFFFF\">\r\n\r\n                        </Button>\r\n\r\n                        <RelativeLayout\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:paddingTop=\"5dp\">\r\n\r\n                        </RelativeLayout>\r\n\r\n\r\n                    </LinearLayout>\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:id=\"@+id/btn_registMachine\"\r\n                android:layout_width=\"90dp\"\r\n                android:layout_height=\"41dp\"\r\n                android:layout_gravity=\"right\"\r\n                android:layout_marginTop=\"40.3dp\"\r\n                android:layout_marginBottom=\"16.7dp\"\r\n                android:background=\"@drawable/btn_login\"\r\n                android:foregroundGravity=\"right\"\r\n                android:gravity=\"center\"\r\n                android:orientation=\"vertical\"\r\n\r\n                android:visibility=\"gone\">\r\n\r\n\r\n            </LinearLayout>\r\n\r\n\r\n        </LinearLayout>\r\n\r\n\r\n    </RelativeLayout>\r\n\r\n\r\n</ScrollView>\r\n\r\n\r\n\r\n\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_planta1.xml	(revision 97b60040cb9ddffbf7eb424364e4fc4451452801)
-+++ app/src/main/res/layout/activity_planta1.xml	(date 1611078145131)
-@@ -20,7 +20,7 @@
-             android:orientation="vertical">
- 
-             <ImageView
--                android:id="@+id/backTomachinelist"
-+                android:id="@+id/backDashboard"
-                 android:layout_width="40dp"
-                 android:layout_height="40dp"
-                 android:layout_marginLeft="10dp"
-@@ -263,9 +263,10 @@
-                             android:layout_height="49dp"
-                             android:layout_gravity="center"
-                             android:background="@drawable/btn_scan"
--                            android:visibility="gone"
-+                            android:onClick="saveNote"
-                             android:text="Guardar cambios"
--                            android:textColor="#FFFFFF">
-+                            android:textColor="#FFFFFF"
-+                            android:visibility="gone">
- 
-                         </Button>
- 
-@@ -301,6 +302,41 @@
- 
-         </LinearLayout>
- 
-+        <androidx.constraintlayout.widget.ConstraintLayout
-+            android:id="@+id/constraitR"
-+            android:layout_width="match_parent"
-+            android:layout_height="match_parent"
-+            tools:visibility="gone">
-+
-+            <ImageView
-+                android:id="@+id/imageprevius"
-+                android:layout_width="400dp"
-+                android:layout_height="731dp"
-+                android:alpha="0.4"
-+                app:layout_constraintBottom_toBottomOf="parent"
-+                app:layout_constraintEnd_toEndOf="parent"
-+                app:layout_constraintStart_toStartOf="parent"
-+                app:layout_constraintTop_toTopOf="parent"
-+                app:srcCompat="@color/black"
-+                tools:visibility="gone" />
-+
-+            <TextView
-+                android:id="@+id/txtInfoD"
-+                android:layout_width="264dp"
-+                android:layout_height="81dp"
-+                android:background="@color/white"
-+                android:paddingTop="10dp"
-+                android:text="Toca una casilla para visualizar los datos"
-+                android:textAlignment="center"
-+                android:textColor="@color/black"
-+                android:textSize="20sp"
-+                app:layout_constraintBottom_toBottomOf="parent"
-+                app:layout_constraintEnd_toEndOf="parent"
-+                app:layout_constraintStart_toStartOf="parent"
-+                app:layout_constraintTop_toTopOf="@+id/imageprevius"
-+                tools:visibility="gone" />
-+        </androidx.constraintlayout.widget.ConstraintLayout>
-+
- 
-     </RelativeLayout>
- 
-Index: app/build.gradle
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>apply plugin: 'com.android.application'\r\n\r\n\r\nandroid {\r\n    compileSdkVersion 30\r\n    buildToolsVersion \"30.0.2\"\r\n\r\n    defaultConfig {\r\n        applicationId \"com.example.infinitycrop\"\r\n        minSdkVersion 23\r\n        targetSdkVersion 30\r\n        versionCode 1\r\n        versionName \"1.0\"\r\n        multiDexEnabled true\r\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\r\n        }\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation fileTree(dir: \"libs\", include: [\"*.jar\"])\r\n    implementation 'androidx.appcompat:appcompat:1.2.0'\r\n    implementation 'com.google.android.material:material:1.2.1'\r\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.2'\r\n    implementation 'androidx.navigation:navigation-fragment:2.1.0'\r\n    implementation 'androidx.navigation:navigation-ui:2.1.0'\r\n    implementation 'androidx.lifecycle:lifecycle-extensions:2.2.0'\r\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\r\n    implementation 'com.google.firebase:firebase-auth:16.0.5'\r\n    implementation 'com.firebaseui:firebase-ui-auth:6.2.0'\r\n    implementation project(path: ':comun')\r\n    implementation 'com.google.firebase:firebase-database:19.5.1'\r\n    implementation 'com.google.firebase:firebase-storage:19.2.0'\r\n    testImplementation 'junit:junit:4.12'\r\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\r\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\r\n    implementation 'com.google.firebase:firebase-analytics'\r\n    implementation 'com.ismaeldivita.chipnavigation:chip-navigation-bar:1.3.4'\r\n    implementation 'org.jetbrains.kotlin:kotlin-stdlib:1.4.10'\r\n    implementation 'androidx.recyclerview:recyclerview:1.1.0'\r\n    implementation 'com.android.volley:volley:1.1.0'\r\n    // Also declare the dependency for the Google Play services library and specify its version\r\n    implementation 'com.google.android.gms:play-services-auth:18.1.0'\r\n    // Import the BoM for the Firebase platform\r\n    implementation platform('com.google.firebase:firebase-bom:26.0.0')\r\n    implementation 'com.google.firebase:firebase-firestore:17.1.2'\r\n    implementation 'com.android.support:multidex:1.0.3'\r\n    implementation 'com.firebaseui:firebase-ui-firestore:6.3.0'\r\n    //biblioteca para mostrar images a través de URL\r\n    implementation 'com.github.bumptech.glide:glide:4.11.0'\r\n    //import del mqtt\r\n    implementation 'org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.1.1'\r\n    implementation 'com.google.android.gms:play-services-maps:17.0.0'\r\n    compile 'com.google.android.gms:play-services-location:16.0.0'\r\n    implementation 'com.journeyapps:zxing-android-embedded:3.4.0'//añadimos esta libreria para qr\r\n    implementation 'com.facebook.android:facebook-android-sdk:[4,5)'\r\n\r\n    implementation \"androidx.viewpager2:viewpager2:1.0.0\" //libreria viewpager\r\n    implementation  'com.airbnb.android:lottie:3.4.1'//libreria para la animacion\r\n    implementation 'com.cuberto:liquid-swipe:1.0.0' //libreria para el tutorial\r\n    implementation 'androidx.core:core:1.3.1'\r\n    implementation'androidx.core:core-ktx:1.3.1'\r\n\r\n    implementation'com.squareup.okhttp3:mockwebserver:4.2.0'\r\n    implementation'com.squareup.okhttp3:okhttp:4.2.0'\r\n\r\n    implementation 'androidx.cardview:cardview:1.0.0'\r\n    implementation \"androidx.viewpager2:viewpager2:1.0.0\" //libreria viewpager\r\n\r\n    //plugins de subir imagen user foro\r\n    implementation 'com.theartofdev.edmodo:android-image-cropper:2.4.+'\r\n    implementation 'com.squareup.picasso:picasso:2.71828'\r\n    implementation 'id.zelory:compressor:2.1.0'\r\n    //imageView modo circulo\r\n    implementation 'com.makeramen:roundedimageview:2.3.0'\r\n\r\n    implementation 'com.github.PhilJay:MPAndroidChart:v3.1.0' // libreria graficas\r\n    //libreria wheelview\r\n    implementation'com.github.psuzn:wheelView:1.0.0'\r\n}\r\napply plugin: 'com.google.gms.google-services'
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/build.gradle	(revision 97b60040cb9ddffbf7eb424364e4fc4451452801)
-+++ app/build.gradle	(date 1611016765707)
-@@ -47,6 +47,8 @@
-     implementation 'com.android.volley:volley:1.1.0'
-     // Also declare the dependency for the Google Play services library and specify its version
-     implementation 'com.google.android.gms:play-services-auth:18.1.0'
-+    implementation 'com.google.android.gms:play-services-ads:9.8.0'
-+
-     // Import the BoM for the Firebase platform
-     implementation platform('com.google.firebase:firebase-bom:26.0.0')
-     implementation 'com.google.firebase:firebase-firestore:17.1.2'
-@@ -83,5 +85,6 @@
-     implementation 'com.github.PhilJay:MPAndroidChart:v3.1.0' // libreria graficas
-     //libreria wheelview
-     implementation'com.github.psuzn:wheelView:1.0.0'
-+    implementation'com.loopj.android:android-async-http:1.4.11'//libreria para el tiempo
- }
- apply plugin: 'com.google.gms.google-services'
-\ No newline at end of file
-Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.constraintlayout.widget.ConstraintLayout;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.MachineControl.planta1;\r\nimport com.google.android.material.bottomsheet.BottomSheetDialog;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link GeneralFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class GeneralFragment extends Fragment implements MqttCallback{\r\n    public static MqttClient client = null;\r\n    private String uid;\r\n    private FirebaseFirestore db;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public GeneralFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment GeneralFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static GeneralFragment newInstance(String param1, String param2) {\r\n        GeneralFragment fragment = new GeneralFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v = inflater.inflate(R.layout.fragment_general, container, false);\r\n        //switch methods\r\n        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });\r\n        db = FirebaseFirestore.getInstance();\r\n        MainActivity myActivity = (MainActivity) getActivity();\r\n        final TextView medidaTemp=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidaHum=v.findViewById(R.id.medidaHumedadGeneral);\r\n        final TextView medidaHumAm=v.findViewById(R.id.medidaSalinidadGeneral);\r\n        final TextView medidaLuz=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n        uid=myActivity.getMachineUID();\r\n        db.collection(\"Mediciones general\")\r\n                .document(uid)\r\n                .addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable DocumentSnapshot snapshot,\r\n                                        @Nullable FirebaseFirestoreException e) {\r\n                        if (e != null) {\r\n                            return;\r\n                        }\r\n\r\n                        if (snapshot != null && snapshot.exists()) {\r\n                            //Temperatura\r\n                            String medidaT=snapshot.getString(\"Temperatura\");\r\n                            medidaTemp.setText(medidaT+\"°C\");\r\n                            //Humedad\r\n                            String medidaH=snapshot.getString(\"Humedad\");\r\n                            medidaHum.setText(medidaH+\"%\");\r\n                            //Humedad Ambiente\r\n                            String medidaHA=snapshot.getString(\"Humedad Ambiente\");\r\n                            medidaHumAm.setText(medidaHA+\"%\");\r\n                            //Luminosidad\r\n                            String medidaL=snapshot.getString(\"Luminosidad\");\r\n                            medidaLuz.setText(medidaL+\"%\");\r\n\r\n\r\n                        } else {\r\n\r\n                        }\r\n                    }\r\n                });\r\n\r\n        //Boton para acceder a la maquina para sus parcelas\r\n        Button btnmymachine = (Button) v.findViewById(R.id.btnMyMachine);\r\n        btnmymachine.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                BottomSheetDialog bottomSheetDialog = new BottomSheetDialog(\r\n                        getContext()\r\n                );\r\n                bottomSheetDialog.setContentView(R.layout.plantamaquina_bottom_sheet);\r\n                Button btnp1=bottomSheetDialog.findViewById(R.id.enterPlant2);\r\n                Button btn2=bottomSheetDialog.findViewById(R.id.enterPlant1);\r\n                bottomSheetDialog.show();\r\n                btnp1.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        Intent intent = new Intent (getContext(), planta1.class);\r\n                        intent.putExtra(\"idMachine\", uid);\r\n                        startActivity(intent);\r\n\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        return v;\r\n    }\r\n        /*btnmymachine.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent (getContext(), MiMaquina.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n        });*/\r\n\r\n\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"Superior OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"Superior ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(revision 97b60040cb9ddffbf7eb424364e4fc4451452801)
-+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(date 1611079933076)
-@@ -161,7 +161,10 @@
-                         intent.putExtra("idMachine", uid);
-                         startActivity(intent);
- 
-+
-+
-                     }
-+
-                 });
-             }
-         });
-Index: app/src/main/AndroidManifest.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.infinitycrop\">\r\n\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" /> <!-- Permisos Qr -->\r\n    <uses-permission android:name=\"android.permission.CAMERA\" />\r\n\r\n    <uses-feature android:name=\"android.hardware.camera\" />\r\n    <uses-feature android:name=\"android.hardware.camera.autofocus\" />\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher\"\r\n        android:theme=\"@style/AppThemeHome\">\r\n        <activity android:name=\".ui.Foro.main.Community.NewPost.CreatePost.CreatePost\"></activity>\r\n        <activity android:name=\".ui.Foro.main.Community.CommunityMain\" />\r\n        <activity android:name=\".ui.Foro.lets_start.EditCommunity\" />\r\n        <activity android:name=\".ui.list_machine.ModifyMachine\" />\r\n        <activity android:name=\".ui.Foro.main.ForoMain\" />\r\n        <activity android:name=\".ui.Foro.lets_start.AddCommunity\" />\r\n        <activity android:name=\".ui.Foro.lets_start.choose_community\" />\r\n        <activity android:name=\".ui.Foro.lets_start.welcome_forum\" />\r\n        <activity android:name=\".MainActivity\" />\r\n\r\n        <service android:name=\".ui.service.ServicioMqtt\" />\r\n        <service android:name=\".ui.service.ServicioNotificaciones\" />\r\n\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\" />\r\n        <activity android:name=\".ui.profile.settings.HelpProfile\" />\r\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\" />\r\n        <activity android:name=\".ui.list_machine.AddMachine\" />\r\n        <activity android:name=\".ui.profile.settings.ModifyProfile\" />\r\n        <activity android:name=\".ui.logmail.RegisterActivity\" />\r\n        <activity android:name=\".ui.logmail.LoginActivity\" />\r\n        <activity android:name=\".ui.list_machine.CaptureAct\" />\r\n        <activity android:name=\".ui.login.LogActivity\" />\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\" />\r\n        <activity android:name=\".ui.LoadAnimations.LogprimeraActivity\" />\r\n        <activity android:name=\".ui.graphics.GraphicsActivity\" />\r\n        <activity android:name=\".ui.MachineControl.planta1\" />\r\n        <activity android:name=\".ui.notifications.NotificacionesActivity\" />\r\n\r\n        <meta-data\r\n            android:name=\"com.google.android.geo.API_KEY\"\r\n            android:value=\"@string/google_maps_key\" />\r\n        <meta-data\r\n            android:name=\"com.facebook.sdk.ApplicationId\"\r\n            android:value=\"@string/facebook_app_id\"\r\n            tools:replace=\"android:value\" />\r\n        <meta-data\r\n            android:name=\"preloaded_fonts\"\r\n            android:resource=\"@array/preloaded_fonts\" />\r\n\r\n        <activity\r\n            android:name=\"com.theartofdev.edmodo.cropper.CropImageActivity\"\r\n            android:theme=\"@style/Base.Theme.AppCompat\" />\r\n    </application>\r\n\r\n</manifest>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/AndroidManifest.xml	(revision 97b60040cb9ddffbf7eb424364e4fc4451452801)
-+++ app/src/main/AndroidManifest.xml	(date 1611022652045)
-@@ -31,6 +31,7 @@
-         <activity android:name=".ui.Foro.lets_start.welcome_forum" />
-         <activity android:name=".MainActivity" />
- 
-+
-         <service android:name=".ui.service.ServicioMqtt" />
-         <service android:name=".ui.service.ServicioNotificaciones" />
- 
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_17_01_2021_15_05__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_17_01_2021_15_05__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_19_07__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_19_07__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_15_01_2021_13_24__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_15_01_2021_13_24__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_21_29__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_21_29__Default_Changelist_.xml
Index: .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_18_10__Default_Changelist_.xml
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_18_10__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_18_10__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_21_01_2021_18_10_[Default_Changelist]" date="1611249048514" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_18_10_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 21/01/2021 18:10 [Default Changelist]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_21_38_[Default_Changelist]/shelved.patch
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_21_38_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_21_38_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,650 +0,0 @@
-Index: app/src/main/res/layout/fragment_control_panel.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    tools:context=\".ui.control_panel.Control_panelFragment\">\r\n\r\n    <ScrollView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:orientation=\"vertical\"\r\n            >\r\n\r\n            <RelativeLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginLeft=\"20dp\"\r\n                android:layout_marginTop=\"20dp\"\r\n                android:layout_marginRight=\"20dp\">\r\n\r\n                <TextView\r\n                    android:id=\"@+id/textPanel_control\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:text=\"Panel de control  >\"\r\n\r\n                    android:textSize=\"19sp\" />\r\n\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_below=\"@+id/textPanel_control\"\r\n                    android:text=\"4 elementos\"\r\n\r\n                    android:textSize=\"14sp\" />\r\n\r\n                <!--<ImageView\r\n                    android:layout_width=\"62dp\"\r\n                    android:layout_height=\"62dp\"\r\n                    android:layout_alignParentRight=\"true\"\r\n                    android:src=\"@drawable/ic_sun\" />-->\r\n            </RelativeLayout>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginLeft=\"20dp\"\r\n                android:layout_marginTop=\"20dp\"\r\n                android:layout_marginRight=\"20dp\"\r\n                android:layout_marginBottom=\"20dp\"\r\n                android:orientation=\"horizontal\"\r\n                android:weightSum=\"2\">\r\n\r\n                <androidx.constraintlayout.widget.ConstraintLayout\r\n                    android:id=\"@+id/btn_forum\"\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"80dp\"\r\n                    android:layout_marginRight=\"8dp\"\r\n                    android:layout_weight=\"1\"\r\n                    android:background=\"@drawable/bg_settings\"\r\n                    android:orientation=\"horizontal\">\r\n\r\n                    <ImageView\r\n                        android:id=\"@+id/icon_set\"\r\n                        android:layout_width=\"40dp\"\r\n                        android:layout_height=\"40dp\"\r\n                        android:layout_alignParentTop=\"true\"\r\n                        android:layout_alignParentBottom=\"true\"\r\n                        android:layout_marginStart=\"10dp\"\r\n                        android:src=\"@drawable/icons_foro\"\r\n                        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                        app:layout_constraintEnd_toStartOf=\"@+id/textView16\"\r\n                        app:layout_constraintStart_toStartOf=\"parent\"\r\n                        app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n                    </ImageView>\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/textView16\"\r\n                        android:layout_width=\"0dp\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_centerVertical=\"true\"\r\n                        android:layout_marginEnd=\"10dp\"\r\n                        android:layout_toRightOf=\"@id/icon_set\"\r\n                        android:gravity=\"center\"\r\n                        android:text=\"Foro\"\r\n                        android:textColor=\"#202020\"\r\n                        android:textSize=\"16sp\"\r\n                        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                        app:layout_constraintEnd_toEndOf=\"parent\"\r\n                        app:layout_constraintStart_toEndOf=\"@+id/icon_set\"\r\n                        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n                <androidx.constraintlayout.widget.ConstraintLayout\r\n                    android:id=\"@+id/btn_graficas\"\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"80dp\"\r\n                    android:layout_marginRight=\"8dp\"\r\n                    android:layout_weight=\"1\"\r\n                    android:background=\"@drawable/bg_settings\"\r\n                    android:orientation=\"horizontal\">\r\n\r\n                    <ImageView\r\n                        android:id=\"@+id/icon_set1\"\r\n                        android:layout_width=\"40dp\"\r\n                        android:layout_height=\"40dp\"\r\n                        android:layout_alignParentTop=\"true\"\r\n                        android:layout_alignParentBottom=\"true\"\r\n                        android:layout_marginStart=\"10dp\"\r\n                        android:src=\"@drawable/icons_chart\"\r\n                        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                        app:layout_constraintEnd_toStartOf=\"@+id/textView162\"\r\n                        app:layout_constraintStart_toStartOf=\"parent\"\r\n                        app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n                    </ImageView>\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/textView162\"\r\n                        android:layout_width=\"0dp\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_centerVertical=\"true\"\r\n                        android:layout_marginEnd=\"10dp\"\r\n                        android:layout_toRightOf=\"@id/icon_set1\"\r\n                        android:gravity=\"center\"\r\n                        android:text=\"Graficas\"\r\n                        android:textColor=\"#202020\"\r\n                        android:textSize=\"16sp\"\r\n                        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                        app:layout_constraintEnd_toEndOf=\"parent\"\r\n                        app:layout_constraintStart_toEndOf=\"@+id/icon_set1\"\r\n                        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginLeft=\"20dp\"\r\n                android:layout_marginRight=\"20dp\"\r\n                android:layout_marginBottom=\"20dp\"\r\n                android:orientation=\"horizontal\"\r\n                android:weightSum=\"2\">\r\n\r\n                <androidx.constraintlayout.widget.ConstraintLayout\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"80dp\"\r\n                    android:layout_marginRight=\"8dp\"\r\n                    android:layout_weight=\"1\"\r\n                    android:background=\"@drawable/bg_settings\"\r\n                    android:orientation=\"horizontal\">\r\n\r\n                    <ImageView\r\n                        android:id=\"@+id/icon_set2\"\r\n                        android:layout_width=\"40dp\"\r\n                        android:layout_height=\"40dp\"\r\n                        android:layout_alignParentTop=\"true\"\r\n                        android:layout_alignParentBottom=\"true\"\r\n                        android:layout_marginStart=\"10dp\"\r\n                        android:src=\"@drawable/icons_status\"\r\n                        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                        app:layout_constraintEnd_toStartOf=\"@+id/textView1622\"\r\n                        app:layout_constraintStart_toStartOf=\"parent\"\r\n                        app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n                    </ImageView>\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/textView1622\"\r\n                        android:layout_width=\"0dp\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_centerVertical=\"true\"\r\n                        android:layout_marginEnd=\"10dp\"\r\n                        android:layout_toRightOf=\"@id/icon_set2\"\r\n                        android:gravity=\"center\"\r\n                        android:text=\"Estado de la máquina\"\r\n                        android:textColor=\"#202020\"\r\n                        android:textSize=\"16sp\"\r\n                        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                        app:layout_constraintEnd_toEndOf=\"parent\"\r\n                        app:layout_constraintStart_toEndOf=\"@+id/icon_set2\"\r\n                        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n                <androidx.constraintlayout.widget.ConstraintLayout\r\n                    android:id=\"@+id/btn_guia_botanica\"\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"80dp\"\r\n                    android:layout_marginRight=\"8dp\"\r\n                    android:layout_weight=\"1\"\r\n                    android:background=\"@drawable/bg_settings\"\r\n                    android:orientation=\"horizontal\">\r\n\r\n                    <ImageView\r\n                        android:id=\"@+id/icon_set21\"\r\n                        android:layout_width=\"40dp\"\r\n                        android:layout_height=\"40dp\"\r\n                        android:layout_alignParentTop=\"true\"\r\n                        android:layout_alignParentBottom=\"true\"\r\n                        android:layout_marginStart=\"10dp\"\r\n                        android:src=\"@drawable/icons_guia_botanica\"\r\n                        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                        app:layout_constraintEnd_toStartOf=\"@+id/textView1621\"\r\n                        app:layout_constraintStart_toStartOf=\"parent\"\r\n                        app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n                    </ImageView>\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/textView1621\"\r\n                        android:layout_width=\"0dp\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_centerVertical=\"true\"\r\n                        android:layout_marginEnd=\"10dp\"\r\n                        android:layout_toRightOf=\"@id/icon_set21\"\r\n                        android:gravity=\"center\"\r\n                        android:text=\"Guia botanica\"\r\n                        android:textColor=\"#202020\"\r\n                        android:textSize=\"16sp\"\r\n                        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                        app:layout_constraintEnd_toEndOf=\"parent\"\r\n                        app:layout_constraintStart_toEndOf=\"@+id/icon_set21\"\r\n                        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginLeft=\"20dp\"\r\n                android:layout_marginRight=\"20dp\"\r\n                android:layout_marginBottom=\"20dp\"\r\n                android:orientation=\"horizontal\"\r\n                android:weightSum=\"2\">\r\n\r\n\r\n                <androidx.constraintlayout.widget.ConstraintLayout\r\n                    android:id=\"@+id/btn_notificaciones\"\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"80dp\"\r\n                    android:layout_marginRight=\"8dp\"\r\n                    android:layout_weight=\"1\"\r\n                    android:background=\"@drawable/bg_settings\"\r\n                    android:orientation=\"horizontal\">\r\n\r\n                    <ImageView\r\n                        android:id=\"@+id/icon_notificacion\"\r\n                        android:layout_width=\"35dp\"\r\n                        android:layout_height=\"35dp\"\r\n                        android:layout_alignParentTop=\"true\"\r\n                        android:layout_alignParentBottom=\"true\"\r\n                        android:layout_marginStart=\"10dp\"\r\n                        android:src=\"@drawable/icons_notification\"\r\n                        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                        app:layout_constraintEnd_toStartOf=\"@+id/textView_notificacion\"\r\n                        app:layout_constraintStart_toStartOf=\"parent\"\r\n                        app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n                    </ImageView>\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/textView_notificacion\"\r\n                        android:layout_width=\"0dp\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_centerVertical=\"true\"\r\n                        android:layout_marginEnd=\"10dp\"\r\n                        android:layout_toRightOf=\"@id/icon_notificacion\"\r\n                        android:gravity=\"center\"\r\n                        android:text=\"Notificaciones\"\r\n                        android:textColor=\"#202020\"\r\n                        android:textSize=\"15sp\"\r\n                        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                        app:layout_constraintEnd_toEndOf=\"parent\"\r\n                        app:layout_constraintStart_toEndOf=\"@+id/icon_notificacion\"\r\n                        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n\r\n            </LinearLayout>\r\n        </LinearLayout>\r\n    </ScrollView>\r\n\r\n\r\n</FrameLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_control_panel.xml	(revision c8202bf3ec3c20b3208068f5eda44f36cbcc1991)
-+++ app/src/main/res/layout/fragment_control_panel.xml	(date 1611257120775)
-@@ -154,6 +154,7 @@
-                 android:weightSum="2">
- 
-                 <androidx.constraintlayout.widget.ConstraintLayout
-+                    android:id="@+id/btn_notificaciones"
-                     android:layout_width="0dp"
-                     android:layout_height="80dp"
-                     android:layout_marginRight="8dp"
-@@ -162,34 +163,34 @@
-                     android:orientation="horizontal">
- 
-                     <ImageView
--                        android:id="@+id/icon_set2"
--                        android:layout_width="40dp"
--                        android:layout_height="40dp"
-+                        android:id="@+id/icon_notificacion"
-+                        android:layout_width="35dp"
-+                        android:layout_height="35dp"
-                         android:layout_alignParentTop="true"
-                         android:layout_alignParentBottom="true"
-                         android:layout_marginStart="10dp"
--                        android:src="@drawable/icons_status"
-+                        android:src="@drawable/icons_notification"
-                         app:layout_constraintBottom_toBottomOf="parent"
--                        app:layout_constraintEnd_toStartOf="@+id/textView1622"
-+                        app:layout_constraintEnd_toStartOf="@+id/textView_notificacion"
-                         app:layout_constraintStart_toStartOf="parent"
-                         app:layout_constraintTop_toTopOf="parent">
- 
-                     </ImageView>
- 
-                     <TextView
--                        android:id="@+id/textView1622"
-+                        android:id="@+id/textView_notificacion"
-                         android:layout_width="0dp"
-                         android:layout_height="wrap_content"
-                         android:layout_centerVertical="true"
-                         android:layout_marginEnd="10dp"
--                        android:layout_toRightOf="@id/icon_set2"
-+                        android:layout_toRightOf="@id/icon_notificacion"
-                         android:gravity="center"
--                        android:text="Estado de la máquina"
-+                        android:text="Notificaciones"
-                         android:textColor="#202020"
--                        android:textSize="16sp"
-+                        android:textSize="15sp"
-                         app:layout_constraintBottom_toBottomOf="parent"
-                         app:layout_constraintEnd_toEndOf="parent"
--                        app:layout_constraintStart_toEndOf="@+id/icon_set2"
-+                        app:layout_constraintStart_toEndOf="@+id/icon_notificacion"
-                         app:layout_constraintTop_toTopOf="parent" />
- 
-                 </androidx.constraintlayout.widget.ConstraintLayout>
-@@ -239,7 +240,7 @@
- 
-             </LinearLayout>
- 
--            <LinearLayout
-+            <!--<LinearLayout
-                 android:layout_width="match_parent"
-                 android:layout_height="wrap_content"
-                 android:layout_marginLeft="20dp"
-@@ -292,7 +293,7 @@
-                 </androidx.constraintlayout.widget.ConstraintLayout>
- 
- 
--            </LinearLayout>
-+            </LinearLayout>-->
-         </LinearLayout>
-     </ScrollView>
- 
-Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/Planta2Fragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.dashboard;\n\n\nimport android.os.Bundle;\n\nimport androidx.annotation.Nullable;\nimport androidx.fragment.app.Fragment;\n\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.TextView;\n\nimport com.example.infinitycrop.MainActivity;\nimport com.example.infinitycrop.R;\nimport com.google.firebase.firestore.DocumentSnapshot;\nimport com.google.firebase.firestore.EventListener;\nimport com.google.firebase.firestore.FirebaseFirestore;\nimport com.google.firebase.firestore.FirebaseFirestoreException;\n\n/**\n * A simple {@link Fragment} subclass.\n * Use the {@link GeneralFragment#newInstance} factory method to\n * create an instance of this fragment.\n */\npublic class Planta2Fragment extends Fragment {\n\n    // TODO: Rename parameter arguments, choose names that match\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\n    private static final String ARG_PARAM1 = \"param1\";\n    private static final String ARG_PARAM2 = \"param2\";\n    private String uid;\n    private FirebaseFirestore db;\n    // TODO: Rename and change types of parameters\n    private String mParam1;\n    private String mParam2;\n\n    public Planta2Fragment() {\n        // Required empty public constructor\n    }\n\n    /**\n     * Use this factory method to create a new instance of\n     * this fragment using the provided parameters.\n     *\n     * @param param1 Parameter 1.\n     * @param param2 Parameter 2.\n     * @return A new instance of fragment GeneralFragment.\n     */\n    // TODO: Rename and change types and number of parameters\n    public static GeneralFragment newInstance(String param1, String param2) {\n        GeneralFragment fragment = new GeneralFragment();\n        Bundle args = new Bundle();\n        args.putString(ARG_PARAM1, param1);\n        args.putString(ARG_PARAM2, param2);\n        fragment.setArguments(args);\n        return fragment;\n    }\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        if (getArguments() != null) {\n            mParam1 = getArguments().getString(ARG_PARAM1);\n            mParam2 = getArguments().getString(ARG_PARAM2);\n        }\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        View v = inflater.inflate(R.layout.fragment_planta2, container, false);\n        db = FirebaseFirestore.getInstance();\n        MainActivity myActivity = (MainActivity) getActivity();\n        final TextView medidaTemp=v.findViewById(R.id.medidaTemperaturaPlanta2);\n        /*final TextView medidaHum=v.findViewById(R.id.medidaHumedadPlanta2);*/\n        final TextView medidaHumAm=v.findViewById(R.id.medidaSalinidadPlanta2);\n        /*final TextView medidaLuz=v.findViewById(R.id.medidasLuminosidadPlanta2);*/\n        uid=myActivity.getMachineUID();\n        db.collection(\"Mediciones planta 2\")\n                .document(uid)\n                .addSnapshotListener(new EventListener<DocumentSnapshot>() {\n                    @Override\n                    public void onEvent(@Nullable DocumentSnapshot snapshot,\n                                        @Nullable FirebaseFirestoreException e) {\n                        if (e != null) {\n                            return;\n                        }\n\n                        if (snapshot != null && snapshot.exists()) {\n                            //Temperatura\n                            String medidaT=snapshot.getString(\"Temperatura\");\n                            medidaTemp.setText(medidaT+\"°C\");\n                            //Humedad\n                            /*String medidaH=snapshot.getString(\"Humedad\");\n                            medidaHum.setText(medidaH+\"%\");*/\n                            //Humedad Ambiente\n                            String medidaHA=snapshot.getString(\"Humedad Ambiente\");\n                            medidaHumAm.setText(medidaHA+\"%\");\n                            //Luminosidad\n                            /*String medidaL=snapshot.getString(\"Luminosidad\");\n                            medidaLuz.setText(medidaL+\"%\");*/\n\n\n                        } else {\n\n                        }\n                    }\n                });\n        return v;\n    }\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/dashboard/Planta2Fragment.java	(revision c8202bf3ec3c20b3208068f5eda44f36cbcc1991)
-+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/Planta2Fragment.java	(date 1611260895188)
-@@ -3,27 +3,47 @@
- 
- import android.os.Bundle;
- 
-+import androidx.annotation.NonNull;
- import androidx.annotation.Nullable;
- import androidx.fragment.app.Fragment;
- 
-+import android.util.Log;
- import android.view.LayoutInflater;
- import android.view.View;
- import android.view.ViewGroup;
-+import android.widget.CompoundButton;
-+import android.widget.Switch;
- import android.widget.TextView;
- 
-+import com.example.comun.Mqtt;
- import com.example.infinitycrop.MainActivity;
- import com.example.infinitycrop.R;
-+import com.google.firebase.database.DataSnapshot;
-+import com.google.firebase.database.DatabaseError;
-+import com.google.firebase.database.DatabaseReference;
-+import com.google.firebase.database.FirebaseDatabase;
-+import com.google.firebase.database.ValueEventListener;
- import com.google.firebase.firestore.DocumentSnapshot;
- import com.google.firebase.firestore.EventListener;
- import com.google.firebase.firestore.FirebaseFirestore;
- import com.google.firebase.firestore.FirebaseFirestoreException;
- 
-+import org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;
-+import org.eclipse.paho.client.mqttv3.MqttCallback;
-+import org.eclipse.paho.client.mqttv3.MqttClient;
-+import org.eclipse.paho.client.mqttv3.MqttConnectOptions;
-+import org.eclipse.paho.client.mqttv3.MqttException;
-+import org.eclipse.paho.client.mqttv3.MqttMessage;
-+import org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;
-+
-+import static com.example.comun.Mqtt.topicRoot;
-+
- /**
-  * A simple {@link Fragment} subclass.
-  * Use the {@link GeneralFragment#newInstance} factory method to
-  * create an instance of this fragment.
-  */
--public class Planta2Fragment extends Fragment {
-+public class Planta2Fragment extends Fragment implements MqttCallback {
- 
-     // TODO: Rename parameter arguments, choose names that match
-     // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
-@@ -31,10 +51,12 @@
-     private static final String ARG_PARAM2 = "param2";
-     private String uid;
-     private FirebaseFirestore db;
-+
-     // TODO: Rename and change types of parameters
-     private String mParam1;
-     private String mParam2;
--
-+    private Switch switchLuz;
-+    public static MqttClient client = null;
-     public Planta2Fragment() {
-         // Required empty public constructor
-     }
-@@ -65,12 +87,14 @@
-             mParam2 = getArguments().getString(ARG_PARAM2);
-         }
-     }
--
-+    private DatabaseReference databaseReference;
-     @Override
-     public View onCreateView(LayoutInflater inflater, ViewGroup container,
-                              Bundle savedInstanceState) {
-         // Inflate the layout for this fragment
-         View v = inflater.inflate(R.layout.fragment_planta2, container, false);
-+        databaseReference= FirebaseDatabase.getInstance().getReference();
-+        switchLuz=v.findViewById(R.id.switchLuminosidadPlanta2);
-         db = FirebaseFirestore.getInstance();
-         MainActivity myActivity = (MainActivity) getActivity();
-         final TextView medidaTemp=v.findViewById(R.id.medidaTemperaturaPlanta2);
-@@ -108,6 +132,135 @@
-                         }
-                     }
-                 });
-+
-+        //switch luz
-+        /*databaseReference.child("Mediciones general")
-+                .child(uid).addValueEventListener(new ValueEventListener() {
-+            @Override
-+            public void onDataChange(@NonNull DataSnapshot snapshot) {
-+                if(snapshot.exists()){
-+                    String LuzPieza1= snapshot.child("LuzPieza1").getValue().toString();
-+                    String LuzPieza2=snapshot.child("LuzPieza2").getValue().toString();
-+                    String LuzPieza3=snapshot.child("LuzPieza3").getValue().toString();
-+                    String LuzPuerta=snapshot.child("LuzPuerta").getValue().toString();
-+                    String LuzTecho=snapshot.child("LuzTecho").getValue().toString();
-+
-+                    if(LuzPieza3.equals("0") && LuzPuerta.equals("0")){
-+                        switchLuz.setChecked(true);
-+                    }else if(LuzPieza3.equals("1") && LuzPuerta.equals("1")){
-+                        switchLuz.setChecked(false);
-+                    }
-+
-+                }
-+            }
-+            @Override
-+            public void onCancelled(@NonNull DatabaseError error) {
-+
-+            }
-+        });*/
-+
-+        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
-+            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
-+                if (isChecked) {
-+                    // The toggle is enabled
-+                    enviarLucesOn();
-+                } else {
-+                    // The toggle is disabled
-+                    enviarLucesOff();
-+                }
-+            }
-+        });
-         return v;
-     }
-+
-+
-+    public void enviarLucesOff(){
-+        try {
-+            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new
-+                    MemoryPersistence());
-+        } catch (MqttException e) {
-+            e.printStackTrace();
-+        }
-+        MqttConnectOptions connOpts = new MqttConnectOptions();
-+        connOpts.setCleanSession(true);
-+        connOpts.setKeepAliveInterval(60);
-+        connOpts.setWill(topicRoot+"WillTopic", "App desconectada".getBytes(),Mqtt.qos, false);
-+
-+        try {
-+            client.connect(connOpts);
-+        } catch (MqttException e) {
-+            e.printStackTrace();
-+        }
-+
-+        //conexión con el broker Root1 = Lector de datos
-+        //nos subscribimos a topic lectura
-+        try {
-+            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "operaciones-"+uid);//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
-+            client.subscribe(topicRoot + "operaciones-"+uid, Mqtt.qos);
-+            client.setCallback((MqttCallback) this);
-+        } catch (MqttException e) {
-+            Log.e(Mqtt.TAG, "Error al suscribir.", e);
-+        }
-+        try {
-+            Log.i(Mqtt.TAG, "Publicando mensaje: " + "mensaje");
-+            MqttMessage message = new MqttMessage("3-OFF".getBytes());
-+            message.setQos(Mqtt.qos);
-+            message.setRetained(false);
-+            client.publish(topicRoot+"operaciones-"+uid, message);
-+        } catch (MqttException e) {
-+            Log.e(Mqtt.TAG, "Error al publicar.", e);
-+        }
-+    }
-+    public void enviarLucesOn(){
-+        try {
-+            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new
-+                    MemoryPersistence());
-+        } catch (MqttException e) {
-+            e.printStackTrace();
-+        }
-+        MqttConnectOptions connOpts = new MqttConnectOptions();
-+        connOpts.setCleanSession(true);
-+        connOpts.setKeepAliveInterval(60);
-+        connOpts.setWill(topicRoot+"WillTopic", "App desconectada".getBytes(),Mqtt.qos, false);
-+
-+        try {
-+            client.connect(connOpts);
-+        } catch (MqttException e) {
-+            e.printStackTrace();
-+        }
-+
-+        //conexión con el broker Root1 = Lector de datos
-+        //nos subscribimos a topic lectura
-+        try {
-+            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "operaciones-"+uid);//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
-+            client.subscribe(topicRoot + "operaciones-"+uid, Mqtt.qos);
-+            client.setCallback((MqttCallback) this);
-+        } catch (MqttException e) {
-+            Log.e(Mqtt.TAG, "Error al suscribir.", e);
-+        }
-+        try {
-+            Log.i(Mqtt.TAG, "Publicando mensaje: " + "mensaje");
-+            MqttMessage message = new MqttMessage("3-ON".getBytes());
-+            message.setQos(Mqtt.qos);
-+            message.setRetained(false);
-+            client.publish(topicRoot+"operaciones-"+uid, message);
-+        } catch (MqttException e) {
-+            Log.e(Mqtt.TAG, "Error al publicar.", e);
-+        }
-+    }
-+
-+    @Override
-+    public void connectionLost(Throwable cause) {
-+
-+    }
-+
-+    @Override
-+    public void messageArrived(String topic, MqttMessage message) throws Exception {
-+
-+    }
-+
-+    @Override
-+    public void deliveryComplete(IMqttDeliveryToken token) {
-+
-+    }
- }
-\ No newline at end of file
-Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.dashboard;\n\nimport android.content.Intent;\nimport android.os.Bundle;\n\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.fragment.app.Fragment;\n\nimport android.util.Log;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.Button;\nimport android.widget.CompoundButton;\nimport android.widget.Switch;\nimport android.widget.TextView;\n\nimport com.example.comun.Mqtt;\nimport com.example.infinitycrop.MainActivity;\nimport com.example.infinitycrop.R;\nimport com.example.infinitycrop.ui.MachineControl.planta1;\nimport com.google.android.material.bottomsheet.BottomSheetDialog;\nimport com.google.firebase.Timestamp;\nimport com.google.firebase.database.DataSnapshot;\nimport com.google.firebase.database.DatabaseError;\nimport com.google.firebase.database.DatabaseReference;\nimport com.google.firebase.database.FirebaseDatabase;\nimport com.google.firebase.database.ValueEventListener;\nimport com.google.firebase.firestore.DocumentSnapshot;\nimport com.google.firebase.firestore.EventListener;\nimport com.google.firebase.firestore.FirebaseFirestore;\nimport com.google.firebase.firestore.FirebaseFirestoreException;\n\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\nimport org.eclipse.paho.client.mqttv3.MqttClient;\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\nimport org.eclipse.paho.client.mqttv3.MqttException;\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\n\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport static com.example.comun.Mqtt.topicRoot;\n\n/**\n * A simple {@link Fragment} subclass.\n * Use the {@link GeneralFragment#newInstance} factory method to\n * create an instance of this fragment.\n */\npublic class GeneralFragment extends Fragment implements MqttCallback{\n    public static MqttClient client = null;\n    private String uid;\n    private FirebaseFirestore db;\n    // TODO: Rename parameter arguments, choose names that match\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\n    private static final String ARG_PARAM1 = \"param1\";\n    private static final String ARG_PARAM2 = \"param2\";\n\n    // TODO: Rename and change types of parameters\n    private String mParam1;\n    private String mParam2;\n\n    public GeneralFragment() {\n        // Required empty public constructor\n    }\n\n    /**\n     * Use this factory method to create a new instance of\n     * this fragment using the provided parameters.\n     *\n     * @param param1 Parameter 1.\n     * @param param2 Parameter 2.\n     * @return A new instance of fragment GeneralFragment.\n     */\n    // TODO: Rename and change types and number of parameters\n    public static GeneralFragment newInstance(String param1, String param2) {\n        GeneralFragment fragment = new GeneralFragment();\n        Bundle args = new Bundle();\n        args.putString(ARG_PARAM1, param1);\n        args.putString(ARG_PARAM2, param2);\n        fragment.setArguments(args);\n        return fragment;\n    }\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        if (getArguments() != null) {\n            mParam1 = getArguments().getString(ARG_PARAM1);\n            mParam2 = getArguments().getString(ARG_PARAM2);\n        }\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        View v = inflater.inflate(R.layout.fragment_general, container, false);\n        //switch methods\n        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\n                if (isChecked) {\n                    // The toggle is enabled\n                    enviarLucesOn();\n                } else {\n                    // The toggle is disabled\n                    enviarLucesOff();\n                }\n            }\n        });\n        db = FirebaseFirestore.getInstance();\n        MainActivity myActivity = (MainActivity) getActivity();\n        final TextView medidaTemp=v.findViewById(R.id.medidaTemperaturaGeneral);\n        final TextView medidaHum=v.findViewById(R.id.medidaHumedadGeneral);\n        /*final TextView medidaHumAm=v.findViewById(R.id.medidaSalinidadGeneral);*/\n        final TextView medidaLuz=v.findViewById(R.id.medidasLuminosidadGeneral);\n        uid=myActivity.getMachineUID();\n        db.collection(\"Mediciones general\")\n                .document(uid)\n                .addSnapshotListener(new EventListener<DocumentSnapshot>() {\n                    @Override\n                    public void onEvent(@Nullable DocumentSnapshot snapshot,\n                                        @Nullable FirebaseFirestoreException e) {\n                        if (e != null) {\n                            return;\n                        }\n\n                        if (snapshot != null && snapshot.exists()) {\n                            //Temperatura\n                            String medidaT=snapshot.getString(\"Temperatura\");\n                            medidaTemp.setText(medidaT+\"°C\");\n                            //Humedad\n                            String medidaH=snapshot.getString(\"Humedad\");\n                            medidaHum.setText(medidaH+\"%\");\n                            //Humedad Ambiente\n                            /*String medidaHA=snapshot.getString(\"Humedad Ambiente\");\n                            medidaHumAm.setText(medidaHA+\"%\");*/\n                            //Luminosidad\n                            String medidaL=snapshot.getString(\"Luminosidad\");\n                            medidaLuz.setText(medidaL+\"%\");\n\n\n                        } else {\n\n                        }\n                    }\n                });\n\n        //Boton para acceder a la maquina para sus parcelas\n        Button btnmymachine = (Button) v.findViewById(R.id.btnMyMachine);\n        btnmymachine.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n\n                BottomSheetDialog bottomSheetDialog = new BottomSheetDialog(\n                        getContext()\n                );\n                bottomSheetDialog.setContentView(R.layout.plantamaquina_bottom_sheet);\n                Button btnp1=bottomSheetDialog.findViewById(R.id.enterPlant2);\n                Button btn2=bottomSheetDialog.findViewById(R.id.enterPlant1);\n                bottomSheetDialog.show();\n                btnp1.setOnClickListener(new View.OnClickListener() {\n                    @Override\n                    public void onClick(View v) {\n                        Intent intent = new Intent (getContext(), planta1.class);\n                        intent.putExtra(\"idMachine\", uid);\n                        startActivity(intent);\n\n\n\n                    }\n\n                });\n            }\n        });\n\n        return v;\n    }\n        /*btnmymachine.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Intent intent = new Intent (getContext(), MiMaquina.class);\n                startActivity(intent);\n\n            }\n        });*/\n\n\n\n    public void enviarLucesOff(){\n        try {\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\n                    MemoryPersistence());\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n        MqttConnectOptions connOpts = new MqttConnectOptions();\n        connOpts.setCleanSession(true);\n        connOpts.setKeepAliveInterval(60);\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\n\n        try {\n            client.connect(connOpts);\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n\n        //conexión con el broker Root1 = Lector de datos\n        //nos subscribimos a topic lectura\n        try {\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"operaciones\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\n            client.subscribe(topicRoot + \"operaciones\", Mqtt.qos);\n            client.setCallback((MqttCallback) this);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\n        }\n        try {\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\n            MqttMessage message = new MqttMessage(\"1-OFF\".getBytes());\n            message.setQos(Mqtt.qos);\n            message.setRetained(false);\n            client.publish(topicRoot+\"operaciones\", message);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\n        }\n    }\n    public void enviarLucesOn(){\n        try {\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\n                    MemoryPersistence());\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n        MqttConnectOptions connOpts = new MqttConnectOptions();\n        connOpts.setCleanSession(true);\n        connOpts.setKeepAliveInterval(60);\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\n\n        try {\n            client.connect(connOpts);\n        } catch (MqttException e) {\n            e.printStackTrace();\n        }\n\n        //conexión con el broker Root1 = Lector de datos\n        //nos subscribimos a topic lectura\n        try {\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"operaciones\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\n            client.subscribe(topicRoot + \"operaciones\", Mqtt.qos);\n            client.setCallback((MqttCallback) this);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\n        }\n        try {\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\n            MqttMessage message = new MqttMessage(\"1-ON\".getBytes());\n            message.setQos(Mqtt.qos);\n            message.setRetained(false);\n            client.publish(topicRoot+\"operaciones\", message);\n        } catch (MqttException e) {\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\n        }\n    }\n\n    @Override\n    public void connectionLost(Throwable cause) {\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\n    }\n\n    @Override\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\n\n    }\n\n    @Override\n    public void deliveryComplete(IMqttDeliveryToken token) {\n        Log.d(Mqtt.TAG, \"Entrega completa\");\n    }\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(revision c8202bf3ec3c20b3208068f5eda44f36cbcc1991)
-+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(date 1611260895174)
-@@ -55,6 +55,7 @@
-     public static MqttClient client = null;
-     private String uid;
-     private FirebaseFirestore db;
-+    private DatabaseReference databaseReference;
-     // TODO: Rename parameter arguments, choose names that match
-     // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
-     private static final String ARG_PARAM1 = "param1";
-@@ -100,19 +101,10 @@
-                              Bundle savedInstanceState) {
-         // Inflate the layout for this fragment
-         View v = inflater.inflate(R.layout.fragment_general, container, false);
-+        databaseReference= FirebaseDatabase.getInstance().getReference();
-         //switch methods
--        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);
--        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
--            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
--                if (isChecked) {
--                    // The toggle is enabled
--                    enviarLucesOn();
--                } else {
--                    // The toggle is disabled
--                    enviarLucesOff();
--                }
--            }
--        });
-+        final Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);
-+
-         db = FirebaseFirestore.getInstance();
-         MainActivity myActivity = (MainActivity) getActivity();
-         final TextView medidaTemp=v.findViewById(R.id.medidaTemperaturaGeneral);
-@@ -179,6 +171,44 @@
-             }
-         });
- 
-+        //switch luz
-+        /*databaseReference.child("Mediciones general")
-+                .child(uid).addValueEventListener(new ValueEventListener() {
-+            @Override
-+            public void onDataChange(@NonNull DataSnapshot snapshot) {
-+                if(snapshot.exists()){
-+                    String LuzPieza1= snapshot.child("LuzPieza1").getValue().toString();
-+                    String LuzPieza2=snapshot.child("LuzPieza2").getValue().toString();
-+                    String LuzPieza3=snapshot.child("LuzPieza3").getValue().toString();
-+                    String LuzPuerta=snapshot.child("LuzPuerta").getValue().toString();
-+                    String LuzTecho=snapshot.child("LuzTecho").getValue().toString();
-+
-+                    if(LuzPieza1.equals("0") && LuzPieza2.equals("0") && LuzPieza3.equals("0") && LuzPuerta.equals("0") && LuzTecho.equals("0")){
-+                        switchLuz.setChecked(true);
-+                    }else if(LuzPieza1.equals("1") && LuzPieza2.equals("1") && LuzPieza3.equals("1") && LuzPuerta.equals("1") && LuzTecho.equals("1")){
-+                        switchLuz.setChecked(false);
-+                    }
-+
-+                }
-+            }
-+            @Override
-+            public void onCancelled(@NonNull DatabaseError error) {
-+
-+            }
-+        });*/
-+
-+        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
-+            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
-+                if (isChecked) {
-+                    // The toggle is enabled
-+                    enviarLucesOn();
-+                } else {
-+                    // The toggle is disabled
-+                    enviarLucesOff();
-+                }
-+            }
-+        });
-+
-         return v;
-     }
-         /*btnmymachine.setOnClickListener(new View.OnClickListener() {
-@@ -213,8 +243,8 @@
-         //conexión con el broker Root1 = Lector de datos
-         //nos subscribimos a topic lectura
-         try {
--            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "operaciones");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
--            client.subscribe(topicRoot + "operaciones", Mqtt.qos);
-+            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "operaciones-"+uid);//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
-+            client.subscribe(topicRoot + "operaciones-"+uid, Mqtt.qos);
-             client.setCallback((MqttCallback) this);
-         } catch (MqttException e) {
-             Log.e(Mqtt.TAG, "Error al suscribir.", e);
-@@ -224,7 +254,7 @@
-             MqttMessage message = new MqttMessage("1-OFF".getBytes());
-             message.setQos(Mqtt.qos);
-             message.setRetained(false);
--            client.publish(topicRoot+"operaciones", message);
-+            client.publish(topicRoot+"operaciones-"+uid, message);
-         } catch (MqttException e) {
-             Log.e(Mqtt.TAG, "Error al publicar.", e);
-         }
-@@ -250,8 +280,8 @@
-         //conexión con el broker Root1 = Lector de datos
-         //nos subscribimos a topic lectura
-         try {
--            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "operaciones");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
--            client.subscribe(topicRoot + "operaciones", Mqtt.qos);
-+            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "operaciones-"+uid);//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
-+            client.subscribe(topicRoot + "operaciones-"+uid, Mqtt.qos);
-             client.setCallback((MqttCallback) this);
-         } catch (MqttException e) {
-             Log.e(Mqtt.TAG, "Error al suscribir.", e);
-@@ -261,7 +291,7 @@
-             MqttMessage message = new MqttMessage("1-ON".getBytes());
-             message.setQos(Mqtt.qos);
-             message.setRetained(false);
--            client.publish(topicRoot+"operaciones", message);
-+            client.publish(topicRoot+"operaciones-"+uid, message);
-         } catch (MqttException e) {
-             Log.e(Mqtt.TAG, "Error al publicar.", e);
-         }
-Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/Planta1Fragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.dashboard;\n\n\nimport android.os.Bundle;\n\nimport androidx.annotation.Nullable;\nimport androidx.fragment.app.Fragment;\n\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.TextView;\n\nimport com.example.infinitycrop.MainActivity;\nimport com.example.infinitycrop.R;\nimport com.google.firebase.firestore.DocumentSnapshot;\nimport com.google.firebase.firestore.EventListener;\nimport com.google.firebase.firestore.FirebaseFirestore;\nimport com.google.firebase.firestore.FirebaseFirestoreException;\n\n/**\n * A simple {@link Fragment} subclass.\n * Use the {@link GeneralFragment#newInstance} factory method to\n * create an instance of this fragment.\n */\npublic class Planta1Fragment extends Fragment {\n\n    // TODO: Rename parameter arguments, choose names that match\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\n    private static final String ARG_PARAM1 = \"param1\";\n    private static final String ARG_PARAM2 = \"param2\";\n    private String uid;\n    private FirebaseFirestore db;\n    // TODO: Rename and change types of parameters\n    private String mParam1;\n    private String mParam2;\n\n    public Planta1Fragment() {\n        // Required empty public constructor\n    }\n\n    /**\n     * Use this factory method to create a new instance of\n     * this fragment using the provided parameters.\n     *\n     * @param param1 Parameter 1.\n     * @param param2 Parameter 2.\n     * @return A new instance of fragment GeneralFragment.\n     */\n    // TODO: Rename and change types and number of parameters\n    public static GeneralFragment newInstance(String param1, String param2) {\n        GeneralFragment fragment = new GeneralFragment();\n        Bundle args = new Bundle();\n        args.putString(ARG_PARAM1, param1);\n        args.putString(ARG_PARAM2, param2);\n        fragment.setArguments(args);\n        return fragment;\n    }\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        if (getArguments() != null) {\n            mParam1 = getArguments().getString(ARG_PARAM1);\n            mParam2 = getArguments().getString(ARG_PARAM2);\n        }\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        View v = inflater.inflate(R.layout.fragment_planta1, container, false);\n\n\n\n        db = FirebaseFirestore.getInstance();\n        MainActivity myActivity = (MainActivity) getActivity();\n        final TextView medidaTemp=v.findViewById(R.id.medidaTemperatura);\n        final TextView medidaHum=v.findViewById(R.id.medidaHumedad);\n        final TextView medidaHumAm=v.findViewById(R.id.medidaSalinidad);\n        /*final TextView medidaLuz=v.findViewById(R.id.medidasLuminosidad);*/\n        uid=myActivity.getMachineUID();\n        db.collection(\"Mediciones planta 1\")\n                .document(uid)\n                .addSnapshotListener(new EventListener<DocumentSnapshot>() {\n                    @Override\n                    public void onEvent(@Nullable DocumentSnapshot snapshot,\n                                        @Nullable FirebaseFirestoreException e) {\n                        if (e != null) {\n                            return;\n                        }\n\n                        if (snapshot != null && snapshot.exists()) {\n                            //Temperatura\n                            String medidaT=snapshot.getString(\"Temperatura\");\n                            medidaTemp.setText(medidaT+\"°C\");\n                            //Humedad\n                            String medidaH=snapshot.getString(\"Humedad\");\n                            medidaHum.setText(medidaH+\"%\");\n                            //Humedad Ambiente\n                            String medidaHA=snapshot.getString(\"Humedad Ambiente\");\n                            medidaHumAm.setText(medidaHA+\"%\");\n                            //Luminosidad\n                            /*String medidaL=snapshot.getString(\"Luminosidad\");\n                            medidaLuz.setText(medidaL+\"%\");*/\n\n\n                        } else {\n\n                        }\n                    }\n                });\n        return v;\n    }\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/dashboard/Planta1Fragment.java	(revision c8202bf3ec3c20b3208068f5eda44f36cbcc1991)
-+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/Planta1Fragment.java	(date 1611260895157)
-@@ -3,38 +3,60 @@
- 
- import android.os.Bundle;
- 
-+import androidx.annotation.NonNull;
- import androidx.annotation.Nullable;
- import androidx.fragment.app.Fragment;
- 
-+import android.util.Log;
- import android.view.LayoutInflater;
- import android.view.View;
- import android.view.ViewGroup;
-+import android.widget.CompoundButton;
-+import android.widget.Switch;
- import android.widget.TextView;
- 
-+import com.example.comun.Mqtt;
- import com.example.infinitycrop.MainActivity;
- import com.example.infinitycrop.R;
-+import com.google.firebase.database.DataSnapshot;
-+import com.google.firebase.database.DatabaseError;
-+import com.google.firebase.database.DatabaseReference;
-+import com.google.firebase.database.FirebaseDatabase;
-+import com.google.firebase.database.ValueEventListener;
- import com.google.firebase.firestore.DocumentSnapshot;
- import com.google.firebase.firestore.EventListener;
- import com.google.firebase.firestore.FirebaseFirestore;
- import com.google.firebase.firestore.FirebaseFirestoreException;
- 
-+import org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;
-+import org.eclipse.paho.client.mqttv3.MqttCallback;
-+import org.eclipse.paho.client.mqttv3.MqttClient;
-+import org.eclipse.paho.client.mqttv3.MqttConnectOptions;
-+import org.eclipse.paho.client.mqttv3.MqttException;
-+import org.eclipse.paho.client.mqttv3.MqttMessage;
-+import org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;
-+
-+import static com.example.comun.Mqtt.topicRoot;
-+
- /**
-  * A simple {@link Fragment} subclass.
-  * Use the {@link GeneralFragment#newInstance} factory method to
-  * create an instance of this fragment.
-  */
--public class Planta1Fragment extends Fragment {
-+public class Planta1Fragment extends Fragment implements MqttCallback{
- 
-     // TODO: Rename parameter arguments, choose names that match
-     // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
-     private static final String ARG_PARAM1 = "param1";
-     private static final String ARG_PARAM2 = "param2";
-+    private DatabaseReference databaseReference;
-     private String uid;
-     private FirebaseFirestore db;
-     // TODO: Rename and change types of parameters
-     private String mParam1;
-     private String mParam2;
--
-+    private Switch switchLuz;
-+    public static MqttClient client = null;
-     public Planta1Fragment() {
-         // Required empty public constructor
-     }
-@@ -72,8 +94,8 @@
-         // Inflate the layout for this fragment
-         View v = inflater.inflate(R.layout.fragment_planta1, container, false);
- 
--
--
-+        switchLuz=v.findViewById(R.id.switchLuminosidadPlamta1);
-+        databaseReference= FirebaseDatabase.getInstance().getReference();
-         db = FirebaseFirestore.getInstance();
-         MainActivity myActivity = (MainActivity) getActivity();
-         final TextView medidaTemp=v.findViewById(R.id.medidaTemperatura);
-@@ -111,6 +133,135 @@
-                         }
-                     }
-                 });
-+
-+
-+        //switch luz
-+        /*databaseReference.child("Mediciones general")
-+                .child(uid).addValueEventListener(new ValueEventListener() {
-+            @Override
-+            public void onDataChange(@NonNull DataSnapshot snapshot) {
-+                if(snapshot.exists()){
-+                    String LuzPieza1= snapshot.child("LuzPieza1").getValue().toString();
-+                    String LuzPieza2=snapshot.child("LuzPieza2").getValue().toString();
-+                    String LuzPieza3=snapshot.child("LuzPieza3").getValue().toString();
-+                    String LuzPuerta=snapshot.child("LuzPuerta").getValue().toString();
-+                    String LuzTecho=snapshot.child("LuzTecho").getValue().toString();
-+
-+                    if(LuzPieza1.equals("0") && LuzPieza2.equals("0") && LuzTecho.equals("0")){
-+                        switchLuz.setChecked(true);
-+                    }else if(LuzPieza1.equals("1") && LuzPieza2.equals("1") && LuzTecho.equals("1")){
-+                        switchLuz.setChecked(false);
-+                    }
-+
-+                }
-+            }
-+            @Override
-+            public void onCancelled(@NonNull DatabaseError error) {
-+
-+            }
-+        });*/
-+
-+        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
-+            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
-+                if (isChecked) {
-+                    // The toggle is enabled
-+                    enviarLucesOn();
-+                } else {
-+                    // The toggle is disabled
-+                    enviarLucesOff();
-+                }
-+            }
-+        });
-         return v;
-     }
-+
-+    public void enviarLucesOff(){
-+        try {
-+            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new
-+                    MemoryPersistence());
-+        } catch (MqttException e) {
-+            e.printStackTrace();
-+        }
-+        MqttConnectOptions connOpts = new MqttConnectOptions();
-+        connOpts.setCleanSession(true);
-+        connOpts.setKeepAliveInterval(60);
-+        connOpts.setWill(topicRoot+"WillTopic", "App desconectada".getBytes(),Mqtt.qos, false);
-+
-+        try {
-+            client.connect(connOpts);
-+        } catch (MqttException e) {
-+            e.printStackTrace();
-+        }
-+
-+        //conexión con el broker Root1 = Lector de datos
-+        //nos subscribimos a topic lectura
-+        try {
-+            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "operaciones-"+uid);//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
-+            client.subscribe(topicRoot + "operaciones-"+uid, Mqtt.qos);
-+            client.setCallback((MqttCallback) this);
-+        } catch (MqttException e) {
-+            Log.e(Mqtt.TAG, "Error al suscribir.", e);
-+        }
-+        try {
-+            Log.i(Mqtt.TAG, "Publicando mensaje: " + "mensaje");
-+            MqttMessage message = new MqttMessage("2-OFF".getBytes());
-+            message.setQos(Mqtt.qos);
-+            message.setRetained(false);
-+            client.publish(topicRoot+"operaciones-"+uid, message);
-+        } catch (MqttException e) {
-+            Log.e(Mqtt.TAG, "Error al publicar.", e);
-+        }
-+    }
-+    public void enviarLucesOn(){
-+        try {
-+            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new
-+                    MemoryPersistence());
-+        } catch (MqttException e) {
-+            e.printStackTrace();
-+        }
-+        MqttConnectOptions connOpts = new MqttConnectOptions();
-+        connOpts.setCleanSession(true);
-+        connOpts.setKeepAliveInterval(60);
-+        connOpts.setWill(topicRoot+"WillTopic", "App desconectada".getBytes(),Mqtt.qos, false);
-+
-+        try {
-+            client.connect(connOpts);
-+        } catch (MqttException e) {
-+            e.printStackTrace();
-+        }
-+
-+        //conexión con el broker Root1 = Lector de datos
-+        //nos subscribimos a topic lectura
-+        try {
-+            Log.i(Mqtt.TAG, "Subscrito a " + topicRoot + "operaciones-"+uid);//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este
-+            client.subscribe(topicRoot + "operaciones-"+uid, Mqtt.qos);
-+            client.setCallback((MqttCallback) this);
-+        } catch (MqttException e) {
-+            Log.e(Mqtt.TAG, "Error al suscribir.", e);
-+        }
-+        try {
-+            Log.i(Mqtt.TAG, "Publicando mensaje: " + "mensaje");
-+            MqttMessage message = new MqttMessage("2-ON".getBytes());
-+            message.setQos(Mqtt.qos);
-+            message.setRetained(false);
-+            client.publish(topicRoot+"operaciones-"+uid, message);
-+        } catch (MqttException e) {
-+            Log.e(Mqtt.TAG, "Error al publicar.", e);
-+        }
-+    }
-+
-+    @Override
-+    public void connectionLost(Throwable cause) {
-+
-+    }
-+
-+    @Override
-+    public void messageArrived(String topic, MqttMessage message) throws Exception {
-+
-+    }
-+
-+    @Override
-+    public void deliveryComplete(IMqttDeliveryToken token) {
-+
-+    }
- }
-\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_15_[Default_Changelist]/shelved.patch
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_15_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_15_[Default_Changelist]/shelved.patch	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,1037 +0,0 @@
-Index: app/src/main/AndroidManifest.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.infinitycrop\">\r\n\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" /> <!-- Permisos Qr -->\r\n    <uses-permission android:name=\"android.permission.CAMERA\" />\r\n\r\n    <uses-feature android:name=\"android.hardware.camera\" />\r\n    <uses-feature android:name=\"android.hardware.camera.autofocus\" />\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher\"\r\n        android:theme=\"@style/AppThemeHome\">\r\n        <activity android:name=\".ui.Foro.main.Community.NewPost.CreatePost.CreatePost\"></activity>\r\n        <activity android:name=\".ui.Foro.main.Community.CommunityMain\" />\r\n        <activity android:name=\".ui.Foro.lets_start.EditCommunity\" />\r\n        <activity android:name=\".ui.list_machine.ModifyMachine\" />\r\n        <activity android:name=\".ui.Foro.main.ForoMain\" />\r\n        <activity android:name=\".ui.Foro.lets_start.AddCommunity\" />\r\n        <activity android:name=\".ui.Foro.lets_start.choose_community\" />\r\n        <activity android:name=\".ui.Foro.lets_start.welcome_forum\" />\r\n        <activity android:name=\".MainActivity\" />\r\n\r\n        <service android:name=\".ui.service.ServicioMqtt\" />\r\n        <service android:name=\".ui.service.ServicioNotificaciones\" />\r\n\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\" />\r\n        <activity android:name=\".ui.profile.settings.HelpProfile\" />\r\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\" />\r\n        <activity android:name=\".ui.list_machine.AddMachine\" />\r\n        <activity android:name=\".ui.profile.settings.ModifyProfile\" />\r\n        <activity android:name=\".ui.logmail.RegisterActivity\" />\r\n        <activity android:name=\".ui.logmail.LoginActivity\" />\r\n        <activity android:name=\".ui.list_machine.CaptureAct\" />\r\n        <activity android:name=\".ui.login.LogActivity\" />\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\" />\r\n        <activity android:name=\".ui.LoadAnimations.LogprimeraActivity\" />\r\n        <activity android:name=\".ui.graphics.GraphicsActivity\" />\r\n        <activity android:name=\".ui.MachineControl.planta1\" />\r\n        <activity android:name=\".ui.notifications.NotificacionesActivity\" />\r\n\r\n        <meta-data\r\n            android:name=\"com.google.android.geo.API_KEY\"\r\n            android:value=\"@string/google_maps_key\" />\r\n        <meta-data\r\n            android:name=\"com.facebook.sdk.ApplicationId\"\r\n            android:value=\"@string/facebook_app_id\"\r\n            tools:replace=\"android:value\" />\r\n        <meta-data\r\n            android:name=\"preloaded_fonts\"\r\n            android:resource=\"@array/preloaded_fonts\" />\r\n\r\n        <activity\r\n            android:name=\"com.theartofdev.edmodo.cropper.CropImageActivity\"\r\n            android:theme=\"@style/Base.Theme.AppCompat\" />\r\n    </application>\r\n\r\n</manifest>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/AndroidManifest.xml	(revision f2f4560d5c63afc456a8ea31d2cd81a0233ac735)
-+++ app/src/main/AndroidManifest.xml	(date 1611081197289)
-@@ -31,6 +31,7 @@
-         <activity android:name=".ui.Foro.lets_start.welcome_forum" />
-         <activity android:name=".MainActivity" />
- 
-+
-         <service android:name=".ui.service.ServicioMqtt" />
-         <service android:name=".ui.service.ServicioNotificaciones" />
- 
-Index: app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.MachineControl;\r\n\r\nimport android.app.DatePickerDialog;\r\nimport android.app.TimePickerDialog;\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.graphics.drawable.ColorDrawable;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.CheckBox;\r\nimport android.widget.DatePicker;\r\nimport android.widget.EditText;\r\nimport android.widget.TextView;\r\nimport android.widget.TimePicker;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.infinitycrop.R;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\nimport java.text.ParseException;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.Calendar;\r\nimport java.util.Date;\r\nimport java.util.List;\r\nimport java.util.SortedSet;\r\n\r\nimport kotlin.Unit;\r\nimport kotlin.jvm.functions.Function1;\r\nimport me.sujanpoudel.wheelview.WheelView;\r\n\r\npublic class planta1 extends AppCompatActivity {\r\n  private CheckBox checkYes, checkNo;\r\n    private Button editInfo, saveChanges;\r\n    private TextView mDisplayDate,mDisplayHour,infoTitle;\r\n    private EditText nameplant;\r\n    private FirebaseFirestore db;\r\n    private List<String> nombres;\r\n    private List<String> estado;\r\n    private String id;\r\n    private String idDocument;\r\n    //Reloj\r\n    int t2Hour, t2Minute;\r\n    private DatePickerDialog.OnDateSetListener mDateSetListener;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_planta1);\r\n        db=FirebaseFirestore.getInstance();\r\n        //bungle get extra\r\n        Bundle extras = getIntent().getExtras();\r\n        id = extras.getString(\"idMachine\");\r\n        //arrays\r\n        nombres=new ArrayList<>();\r\n        estado=new ArrayList<>();\r\n        //firestore\r\n        db.collection(\"Mediciones planta 1\").document(id).collection(\"DatosPiso\")\r\n                .addSnapshotListener(new EventListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable QuerySnapshot snapshots,\r\n                                        @Nullable FirebaseFirestoreException e) {\r\n                        if (e != null) {\r\n                            return;\r\n                        }\r\n                        for (DocumentSnapshot doc : snapshots) {\r\n                                nombres.add(doc.getString(\"name\"));\r\n                                estado.add(doc.getId());\r\n                        }\r\n                        Toast.makeText(getApplicationContext(),nombres.toString(), Toast.LENGTH_LONG).show();\r\n\r\n                        final WheelView wheelView = (WheelView) findViewById(R.id.wheelview);\r\n                        wheelView.setTitles(nombres);\r\n                        wheelView.setSelectListener(new Function1<Integer, Unit>() {\r\n                            @Override\r\n                            public Unit invoke(Integer integer) {\r\n                                showToast(integer);\r\n                                return Unit.INSTANCE;\r\n                            }\r\n                            private final  void showToast(Integer index) {\r\n                               // Toast.makeText(planta1.this,\"\"+wheelView.getTitles().get(index),Toast.LENGTH_SHORT).show();\r\n                                idDocument=estado.get(index);\r\n                                Toast.makeText(planta1.this,\"\"+idDocument,Toast.LENGTH_SHORT).show();\r\n                                itenInfo(idDocument);\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n\r\n\r\n\r\n\r\n\r\n        //Nombre de la planta\r\n        nameplant = (EditText)findViewById(R.id.editTextNobrep);\r\n        nameplant.setEnabled(false);\r\n        //Checkboxes\r\n        checkYes=(CheckBox)findViewById(R.id.checkBoxSi);\r\n        checkYes.setKeyListener(null);\r\n        checkNo=(CheckBox)findViewById(R.id.checkBoxNo);\r\n        checkNo.setKeyListener(null);\r\n\r\n        //Boton guardar cambios\r\n        saveChanges = (Button)findViewById(R.id.btn_save);\r\n        saveChanges.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                editInfo.setVisibility(View.VISIBLE);\r\n                saveChanges.setVisibility(View.GONE);\r\n                mDisplayDate.setEnabled(false);\r\n                mDisplayHour.setEnabled(false);\r\n                nameplant.setEnabled(false);\r\n                infoTitle.setText(\"Pulsa el botón para editar:\");\r\n            }\r\n        });\r\n\r\n        //Boton editar informacion\r\n        editInfo = (Button) findViewById(R.id.btnedit);\r\n        editInfo.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                saveChanges.setVisibility(View.VISIBLE);\r\n                editInfo.setVisibility(View.GONE);\r\n                mDisplayDate.setEnabled(true);\r\n                mDisplayHour.setEnabled(true);\r\n                nameplant.setEnabled(true);\r\n                infoTitle.setText(\"Información completa:\");\r\n\r\n            }\r\n        });\r\n        infoTitle = (TextView) findViewById(R.id.textViewinfo);\r\n        //HORA\r\n        mDisplayHour =(TextView) findViewById(R.id.editHour);\r\n        mDisplayHour.setEnabled(false);\r\n        mDisplayHour.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                TimePickerDialog timePickerDialog = new TimePickerDialog(\r\n                        planta1.this, android.R.style.Theme_Holo_Light_Dialog_MinWidth, new TimePickerDialog.OnTimeSetListener() {\r\n                    @Override\r\n                    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {\r\n                        t2Hour = hourOfDay;\r\n                        t2Minute = minute;\r\n                        String time = t2Hour + \":\" + t2Minute;\r\n                        SimpleDateFormat f24Hours = new SimpleDateFormat(\"HH:mm\");\r\n                        try {\r\n                            Date date = f24Hours.parse(time);\r\n                            SimpleDateFormat f12Hours = new SimpleDateFormat(\"hh:mm aa\");\r\n                            mDisplayHour.setText(f12Hours.format(date));\r\n                        } catch (ParseException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                },12,0,false\r\n                );\r\n                timePickerDialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n                timePickerDialog.updateTime(t2Hour,t2Minute);\r\n                timePickerDialog.show();\r\n            }\r\n        });\r\n\r\n\r\n        //CALENDARIO\r\n        mDisplayDate = (TextView) findViewById(R.id.tvDate);\r\n        mDisplayDate.setEnabled(false);\r\n        mDisplayDate.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Calendar cal = Calendar.getInstance();\r\n                int year = cal.get(Calendar.YEAR);\r\n                int month = cal.get(Calendar.MONTH);\r\n                int day = cal.get(Calendar.DAY_OF_MONTH);\r\n\r\n                DatePickerDialog dialog = new DatePickerDialog(planta1.this,android.R.style.Theme_Holo_Dialog_MinWidth, mDateSetListener,year,month,day);\r\n                dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n                dialog.show();\r\n            }\r\n\r\n        });\r\n        mDateSetListener = new DatePickerDialog.OnDateSetListener() {\r\n            @Override\r\n            public void onDateSet(DatePicker datePicker, int year, int month, int day) {\r\n                month = month+1;\r\n                String date = day +\"/\" + month +\"/\"+ year;\r\n                mDisplayDate.setText(date);\r\n            }\r\n        };\r\n\r\n    }\r\n\r\n    private void itenInfo(String uiDoc){\r\n        //hacer consulta a ese documento con uiDOc y sacar su info\r\n        //luego set Text a all\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java	(revision f2f4560d5c63afc456a8ea31d2cd81a0233ac735)
-+++ app/src/main/java/com/example/infinitycrop/ui/MachineControl/planta1.java	(date 1611085792080)
-@@ -1,29 +1,44 @@
- package com.example.infinitycrop.ui.MachineControl;
- 
-+import android.app.AlarmManager;
- import android.app.DatePickerDialog;
-+import android.app.FragmentTransaction;
- import android.app.TimePickerDialog;
-+import android.content.Context;
- import android.content.Intent;
- import android.graphics.Color;
- import android.graphics.drawable.ColorDrawable;
- import android.os.Bundle;
-+import android.os.CountDownTimer;
- import android.view.View;
- import android.widget.Button;
- import android.widget.CheckBox;
- import android.widget.DatePicker;
- import android.widget.EditText;
-+import android.widget.ImageView;
-+import android.widget.RelativeLayout;
- import android.widget.TextView;
- import android.widget.TimePicker;
- import android.widget.Toast;
- 
-+import androidx.annotation.NonNull;
- import androidx.annotation.Nullable;
- import androidx.appcompat.app.AppCompatActivity;
-+import androidx.constraintlayout.widget.ConstraintLayout;
-+import androidx.fragment.app.Fragment;
- 
- import com.example.infinitycrop.R;
--import com.google.firebase.auth.FirebaseUser;
-+import com.example.infinitycrop.ui.dashboard.DashboardFragment;
-+import com.example.infinitycrop.ui.dashboard.GeneralFragment;
-+import com.example.infinitycrop.ui.logmail.LoginActivity;
-+import com.google.android.gms.tasks.OnFailureListener;
-+import com.google.android.gms.tasks.OnSuccessListener;
-+import com.google.firebase.firestore.DocumentReference;
- import com.google.firebase.firestore.DocumentSnapshot;
- import com.google.firebase.firestore.EventListener;
- import com.google.firebase.firestore.FirebaseFirestore;
- import com.google.firebase.firestore.FirebaseFirestoreException;
-+import com.google.firebase.firestore.ListenerRegistration;
- import com.google.firebase.firestore.QuerySnapshot;
- 
- import java.text.ParseException;
-@@ -32,23 +47,40 @@
- import java.util.Arrays;
- import java.util.Calendar;
- import java.util.Date;
-+import java.util.HashMap;
- import java.util.List;
--import java.util.SortedSet;
-+import java.util.Map;
- 
- import kotlin.Unit;
- import kotlin.jvm.functions.Function1;
- import me.sujanpoudel.wheelview.WheelView;
- 
- public class planta1 extends AppCompatActivity {
--  private CheckBox checkYes, checkNo;
-+    private List<String> nombres;
-+    private List<String> estado;
-+    //Aviso al entrar
-+    private ConstraintLayout fondoR;
-+    private ImageView imgr,goBack;
-+    private TextView textR;
-+    //
-+
-+    private int piso = 1;
-+    String one = String.valueOf(piso);
-+    private int stated = 1;
-+    String state = String.valueOf(stated);
-+
-+
-+    private CheckBox checkYes, checkNo;
-     private Button editInfo, saveChanges;
-     private TextView mDisplayDate,mDisplayHour,infoTitle;
-     private EditText nameplant;
-     private FirebaseFirestore db;
--    private List<String> nombres;
--    private List<String> estado;
-+
-+    private String idDocument;
-     private String id;
--    private String idDocument;
-+
-+
-+
-     //Reloj
-     int t2Hour, t2Minute;
-     private DatePickerDialog.OnDateSetListener mDateSetListener;
-@@ -56,10 +88,38 @@
-     protected void onCreate(Bundle savedInstanceState) {
-         super.onCreate(savedInstanceState);
-         setContentView(R.layout.activity_planta1);
-+
-+        //Aviso al entrar
-+        fondoR = findViewById(R.id.constraitR);
-+        imgr = findViewById(R.id.imageprevius);
-+        textR = findViewById(R.id.txtInfoD);
-+        CountDownTimer countDownTimer = new CountDownTimer(3000, 1000) {//Se pone la cuenta atras para que no se superponga con la animación
-+            public void onTick(long millisUntilFinished) {
-+
-+            }
-+
-+            public void onFinish() {
-+
-+                fondoR.setVisibility(View.GONE);
-+                imgr.setVisibility(View.GONE);
-+                textR.setVisibility(View.GONE);
-+
-+            }
-+        }.start();
-+        //boton para volver
-+        goBack= findViewById(R.id.backDashboard);
-+        goBack.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+               finish();
-+            }
-+        });
-+
-         db=FirebaseFirestore.getInstance();
-         //bungle get extra
-         Bundle extras = getIntent().getExtras();
-         id = extras.getString("idMachine");
-+
-         //arrays
-         nombres=new ArrayList<>();
-         estado=new ArrayList<>();
-@@ -72,14 +132,18 @@
-                         if (e != null) {
-                             return;
-                         }
-+                        nombres.clear();
-                         for (DocumentSnapshot doc : snapshots) {
-                                 nombres.add(doc.getString("name"));
-                                 estado.add(doc.getId());
-                         }
--                        Toast.makeText(getApplicationContext(),nombres.toString(), Toast.LENGTH_LONG).show();
-+                       /* Toast.makeText(getApplicationContext(),nombres.toString(), Toast.LENGTH_LONG).show();*/
-+
-+
- 
-                         final WheelView wheelView = (WheelView) findViewById(R.id.wheelview);
-                         wheelView.setTitles(nombres);
-+
-                         wheelView.setSelectListener(new Function1<Integer, Unit>() {
-                             @Override
-                             public Unit invoke(Integer integer) {
-@@ -91,8 +155,11 @@
-                                 idDocument=estado.get(index);
-                                 Toast.makeText(planta1.this,""+idDocument,Toast.LENGTH_SHORT).show();
-                                 itenInfo(idDocument);
-+
-+
-                             }
-                         });
-+
-                     }
-                 });
- 
-@@ -114,12 +181,17 @@
-         saveChanges.setOnClickListener(new View.OnClickListener() {
-             @Override
-             public void onClick(View v) {
-+                saveNote(v);
-                 editInfo.setVisibility(View.VISIBLE);
-                 saveChanges.setVisibility(View.GONE);
-                 mDisplayDate.setEnabled(false);
-                 mDisplayHour.setEnabled(false);
-                 nameplant.setEnabled(false);
-                 infoTitle.setText("Pulsa el botón para editar:");
-+
-+
-+
-+
-             }
-         });
- 
-@@ -128,6 +200,7 @@
-         editInfo.setOnClickListener(new View.OnClickListener() {
-             @Override
-             public void onClick(View v) {
-+
-                 saveChanges.setVisibility(View.VISIBLE);
-                 editInfo.setVisibility(View.GONE);
-                 mDisplayDate.setEnabled(true);
-@@ -135,6 +208,7 @@
-                 nameplant.setEnabled(true);
-                 infoTitle.setText("Información completa:");
- 
-+
-             }
-         });
-         infoTitle = (TextView) findViewById(R.id.textViewinfo);
-@@ -148,6 +222,7 @@
-                         planta1.this, android.R.style.Theme_Holo_Light_Dialog_MinWidth, new TimePickerDialog.OnTimeSetListener() {
-                     @Override
-                     public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
-+                        Calendar c = Calendar.getInstance();
-                         t2Hour = hourOfDay;
-                         t2Minute = minute;
-                         String time = t2Hour + ":" + t2Minute;
-@@ -159,14 +234,20 @@
-                         } catch (ParseException e) {
-                             e.printStackTrace();
-                         }
-+                        c.set(Calendar.HOUR_OF_DAY,hourOfDay);
-+                        c.set(Calendar.MINUTE,minute);
-+                        c.set(Calendar.SECOND,0);
-+                        startAlarm(c);
-                     }
-                 },12,0,false
-                 );
-                 timePickerDialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));
-                 timePickerDialog.updateTime(t2Hour,t2Minute);
-                 timePickerDialog.show();
-+
-             }
-         });
-+
- 
- 
-         //CALENDARIO
-@@ -197,9 +278,79 @@
- 
-     }
- 
-+    @Override
-+    protected void onStart() {
-+        super.onStart();
-+
-+
-+    }
-+    private void startAlarm(Calendar c){
-+        AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
-+
-+    }
-+    public void saveNote(View v){
-+        String cola = idDocument;
-+        String nombre = nameplant.getText().toString();
-+        String hora = mDisplayHour.getText().toString();
-+        String dia = mDisplayDate.getText().toString();
-+        String piso = one;
-+
-+        Map<String, Object> note = new HashMap<>();
-+        note.put("name",nombre);
-+        note.put("fecha",dia);
-+        note.put("hora",hora);
-+        note.put("piso",piso);
-+
-+        db.collection("Mediciones planta 1").document(id).collection("DatosPiso").document(cola).update(note).addOnSuccessListener(new OnSuccessListener<Void>() {
-+            @Override
-+            public void onSuccess(Void aVoid) {
-+            Toast.makeText(planta1.this,"va bien",Toast.LENGTH_SHORT).show();
-+            }
-+        }).addOnFailureListener(new OnFailureListener() {
-+            @Override
-+            public void onFailure(@NonNull Exception e) {
-+                Toast.makeText(planta1.this,"va mal",Toast.LENGTH_SHORT).show();
-+            }
-+        });
-+
-+
-+    }
-+
-     private void itenInfo(String uiDoc){
-         //hacer consulta a ese documento con uiDOc y sacar su info
-         //luego set Text a all
-+        db.collection("Mediciones planta 1").document(id).collection("DatosPiso").document(uiDoc).get()
-+                .addOnSuccessListener(new OnSuccessListener<DocumentSnapshot>() {
-+                    @Override
-+                    public void onSuccess(DocumentSnapshot documentSnapshot) {
-+                        if(documentSnapshot.exists()){
-+                            String nombre = documentSnapshot.getString("name");
-+                            String fecha = documentSnapshot.getString("fecha");
-+                            String hora = documentSnapshot.getString("hora");
-+
-+                           // Map<String,Object> note = documentSnapshot.getData();
-+                            nameplant.setText(nombre);
-+                            mDisplayHour.setText(hora);
-+                            mDisplayDate.setText(fecha);
-+
-+                        }else{
-+                            Toast.makeText(planta1.this,"Document does exist",Toast.LENGTH_SHORT).show();
-+                        }
-+                    }
-+                }).addOnFailureListener(new OnFailureListener() {
-+            @Override
-+            public void onFailure(@NonNull Exception e) {
-+                Toast.makeText(planta1.this,"va mal",Toast.LENGTH_SHORT).show();
-+            }
-+        });
-+                /*.addSnapshotListener(new EventListener<DocumentSnapshot>() {
-+                    @Override
-+                    public void onEvent(@Nullable DocumentSnapshot value, @Nullable FirebaseFirestoreException error) {
-+
-+                    }
-+                });*/
-+
-+
-     }
- 
- }
-Index: app/src/main/res/layout/activity_planta1.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:background=\"@drawable/bg4\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\"com.example.infinitycrop.ui.MachineControl.planta1\">\r\n\r\n    <RelativeLayout\r\n\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:layout_marginBottom=\"7.3dp\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n\r\n            android:orientation=\"vertical\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/backTomachinelist\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"40dp\"\r\n                android:layout_marginLeft=\"10dp\"\r\n                android:layout_marginTop=\"30dp\"\r\n                android:src=\"@drawable/icons_arrow_left_green\">\r\n\r\n            </ImageView>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"12dp\"\r\n                android:orientation=\"horizontal\">\r\n\r\n                <TextView\r\n                    android:id=\"@+id/textView\"\r\n                    android:layout_width=\"469dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginLeft=\"10dp\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"clip_horizontal\"\r\n                    android:text=\"Piso 1\"\r\n                    android:textColor=\"@color/white\"\r\n                    android:textSize=\"25dp\"\r\n                    android:textStyle=\"bold\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"bottom|right\"\r\n                    android:orientation=\"vertical\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:orientation=\"vertical\" />\r\n            </LinearLayout>\r\n\r\n            <me.sujanpoudel.wheelview.WheelView\r\n                android:id=\"@+id/wheelview\"\r\n                android:layout_width=\"290dp\"\r\n                android:layout_height=\"203dp\"\r\n                android:layout_gravity=\"center\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\"\r\n                app:wheelAnchorAngle=\"270\"\r\n                app:wheelAnimationDuration=\"500\"\r\n                app:wheelArcBackgroundColor=\"@color/colorSecondaryDark\"\r\n                app:wheelCenterIcon=\"@drawable/logo_without_background\"\r\n                app:wheelDividerStrokeWidth=\"1dp\"\r\n                app:wheelMode=\"ANIMATE_TO_ANCHOR\"\r\n                app:wheelSelectedArcBackgroundColor=\"@color/colorSecondary\"\r\n                app:wheelSelectedTextColor=\"@color/white\"\r\n                app:wheelStartAngle=\"315\"\r\n                app:wheelTextColor=\"@color/white\"\r\n                app:wheelTextSize=\"16sp\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_marginTop=\"10dp\"\r\n                android:orientation=\"horizontal\"\r\n                android:paddingLeft=\"20dp\">\r\n\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_marginLeft=\"1dp\"\r\n                    android:layout_marginRight=\"20dp\"\r\n                    android:background=\"@drawable/rectangle\"\r\n                    android:orientation=\"horizontal\">\r\n\r\n                    <LinearLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:layout_gravity=\"center\"\r\n                        android:layout_marginLeft=\"10dp\"\r\n                        android:layout_marginRight=\"15dp\"\r\n                        android:orientation=\"vertical\">\r\n\r\n                        <LinearLayout\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"40dp\"\r\n\r\n                            android:orientation=\"horizontal\">\r\n\r\n                            <TextView\r\n                                android:id=\"@+id/textViewinfo\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_gravity=\"center\"\r\n                                android:text=\"Pulsa el botón para editar:\"\r\n                                android:textColor=\"#000000\"\r\n                                android:textSize=\"16.7sp\"\r\n                                android:textStyle=\"normal\" />\r\n\r\n                            <Button\r\n                                android:id=\"@+id/btnedit\"\r\n                                android:layout_width=\"match_parent\"\r\n                                android:layout_marginTop=\"2dp\"\r\n                                android:layout_height=\"30dp\"\r\n                                android:background=\"@drawable/btn_scan\"\r\n                                android:layout_marginLeft=\"10dp\"\r\n                                android:text=\"Editar\"\r\n                                android:textColor=\"#FFFFFF\" />\r\n\r\n                        </LinearLayout>\r\n\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textView23\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"12dp\"\r\n                            android:text=\"Sección ocupada:\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n\r\n                        <LinearLayout\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:orientation=\"horizontal\">\r\n\r\n                            <CheckBox\r\n                                android:id=\"@+id/checkBoxSi\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_weight=\"1\"\r\n                                android:text=\"Si\" />\r\n\r\n                            <CheckBox\r\n                                android:id=\"@+id/checkBoxNo\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_weight=\"1\"\r\n                                android:checked=\"true\"\r\n                                android:clickable=\"false\"\r\n                                android:text=\"No\" />\r\n                        </LinearLayout>\r\n\r\n\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textView7\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"12dp\"\r\n                            android:text=\"Nombre de la especie:\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n\r\n                        <EditText\r\n                            android:id=\"@+id/editTextNobrep\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:background=\"@android:color/transparent\"\r\n                            android:maxLines=\"1\"\r\n                            android:paddingTop=\"5dp\"\r\n                            android:textColorHint=\"#9E9D9D\"\r\n                            android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                            android:textSize=\"15sp\"\r\n                            android:hint=\"Toca para añadir\"\r\n\r\n                            />\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textedit\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"22.3dp\"\r\n                            android:text=\"Hora de fin\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/editHour\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:background=\"@android:color/transparent\"\r\n                            android:ems=\"10\"\r\n                            android:text=\"Toca para añdir\"\r\n                            android:inputType=\"time\"\r\n                            android:maxLines=\"1\"\r\n                            android:paddingTop=\"5dp\"\r\n                            android:textColorHint=\"#333232\"\r\n                            android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                            android:textSize=\"15sp\" />\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textView11\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"22.3dp\"\r\n                            android:text=\"Fecha de fin\"\r\n                            android:textColor=\"#9E9D9D\" />\r\n                        <TextView\r\n                            android:id=\"@+id/tvDate\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:background=\"@android:color/transparent\"\r\n                            android:ems=\"10\"\r\n                            android:text=\"Toca para añdir\"\r\n                            android:inputType=\"time\"\r\n                            android:editable=\"false\"\r\n                            android:maxLines=\"1\"\r\n                            android:paddingTop=\"5dp\"\r\n                            android:textColorHint=\"#333232\"\r\n                            android:textCursorDrawable=\"@drawable/cursor_color\"\r\n                            android:textSize=\"15sp\" />\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginTop=\"2dp\"\r\n                            android:layout_marginBottom=\"20dp\"\r\n                            android:background=\"#9e9e9e\" />\r\n\r\n                        <Button\r\n\r\n                            android:id=\"@+id/btn_save\"\r\n                            android:layout_width=\"151dp\"\r\n                            android:layout_height=\"49dp\"\r\n                            android:layout_gravity=\"center\"\r\n                            android:background=\"@drawable/btn_scan\"\r\n                            android:visibility=\"gone\"\r\n                            android:text=\"Guardar cambios\"\r\n                            android:textColor=\"#FFFFFF\">\r\n\r\n                        </Button>\r\n\r\n                        <RelativeLayout\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:paddingTop=\"5dp\">\r\n\r\n                        </RelativeLayout>\r\n\r\n\r\n                    </LinearLayout>\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:id=\"@+id/btn_registMachine\"\r\n                android:layout_width=\"90dp\"\r\n                android:layout_height=\"41dp\"\r\n                android:layout_gravity=\"right\"\r\n                android:layout_marginTop=\"40.3dp\"\r\n                android:layout_marginBottom=\"16.7dp\"\r\n                android:background=\"@drawable/btn_login\"\r\n                android:foregroundGravity=\"right\"\r\n                android:gravity=\"center\"\r\n                android:orientation=\"vertical\"\r\n\r\n                android:visibility=\"gone\">\r\n\r\n\r\n            </LinearLayout>\r\n\r\n\r\n        </LinearLayout>\r\n\r\n\r\n    </RelativeLayout>\r\n\r\n\r\n</ScrollView>\r\n\r\n\r\n\r\n\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_planta1.xml	(revision f2f4560d5c63afc456a8ea31d2cd81a0233ac735)
-+++ app/src/main/res/layout/activity_planta1.xml	(date 1611081197274)
-@@ -20,7 +20,7 @@
-             android:orientation="vertical">
- 
-             <ImageView
--                android:id="@+id/backTomachinelist"
-+                android:id="@+id/backDashboard"
-                 android:layout_width="40dp"
-                 android:layout_height="40dp"
-                 android:layout_marginLeft="10dp"
-@@ -263,9 +263,10 @@
-                             android:layout_height="49dp"
-                             android:layout_gravity="center"
-                             android:background="@drawable/btn_scan"
--                            android:visibility="gone"
-+                            android:onClick="saveNote"
-                             android:text="Guardar cambios"
--                            android:textColor="#FFFFFF">
-+                            android:textColor="#FFFFFF"
-+                            android:visibility="gone">
- 
-                         </Button>
- 
-@@ -301,6 +302,41 @@
- 
-         </LinearLayout>
- 
-+        <androidx.constraintlayout.widget.ConstraintLayout
-+            android:id="@+id/constraitR"
-+            android:layout_width="match_parent"
-+            android:layout_height="match_parent"
-+            tools:visibility="gone">
-+
-+            <ImageView
-+                android:id="@+id/imageprevius"
-+                android:layout_width="400dp"
-+                android:layout_height="731dp"
-+                android:alpha="0.4"
-+                app:layout_constraintBottom_toBottomOf="parent"
-+                app:layout_constraintEnd_toEndOf="parent"
-+                app:layout_constraintStart_toStartOf="parent"
-+                app:layout_constraintTop_toTopOf="parent"
-+                app:srcCompat="@color/black"
-+                tools:visibility="gone" />
-+
-+            <TextView
-+                android:id="@+id/txtInfoD"
-+                android:layout_width="264dp"
-+                android:layout_height="81dp"
-+                android:background="@color/white"
-+                android:paddingTop="10dp"
-+                android:text="Toca una casilla para visualizar los datos"
-+                android:textAlignment="center"
-+                android:textColor="@color/black"
-+                android:textSize="20sp"
-+                app:layout_constraintBottom_toBottomOf="parent"
-+                app:layout_constraintEnd_toEndOf="parent"
-+                app:layout_constraintStart_toStartOf="parent"
-+                app:layout_constraintTop_toTopOf="@+id/imageprevius"
-+                tools:visibility="gone" />
-+        </androidx.constraintlayout.widget.ConstraintLayout>
-+
- 
-     </RelativeLayout>
- 
-Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.Manifest;\r\nimport android.content.Context;\r\nimport android.location.LocationManager;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.os.StrictMode;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;\r\nimport com.example.infinitycrop.ui.recycler_control.StaticRvModel;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.squareup.okhttp.Callback;\r\nimport com.squareup.okhttp.OkHttpClient;\r\nimport com.squareup.okhttp.Request;\r\nimport com.squareup.okhttp.Response;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link DashboardFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class DashboardFragment extends Fragment implements MqttCallback{\r\n\r\n    private RecyclerView recyclerView;\r\n    private StaticRvAdapter staticRvAdapter;\r\n    private TabLayout tabLayout;\r\n    private ViewPager viewPager;\r\n    //WEATHER\r\n    private static  final int REQUEST_LOCATION=1;\r\n    double lat;\r\n    double longi;\r\n\r\n    TextView showLocationTxt;\r\n\r\n    LocationManager locationManager;\r\n    String latitude,longitude;\r\n\r\n    TextView view_city;\r\n    TextView view_temp;\r\n    TextView view_desc;\r\n    TextView view_country;\r\n\r\n    ImageView view_weather;\r\n    //\r\n    //Acceso a la maquina\r\n\r\n\r\n\r\n    public static MqttClient client = null;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public DashboardFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment DashboardFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static DashboardFragment newInstance(String param1, String param2) {\r\n        DashboardFragment fragment = new DashboardFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v= inflater.inflate(R.layout.fragment_dashboard, container, false);\r\n        //FIREBASE\r\n        //Recojo los datos del usuario\r\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n        final FirebaseUser usuario = mAuth.getCurrentUser();\r\n        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();\r\n        String idUser=usuario.getUid();\r\n        //guardo el nombre en un textView\r\n        /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);\r\n        String res=\"Hola\"+\" \"+usuario.getDisplayName();\r\n        nombre.setText(res);\r\n        DocumentReference documentReference=fStore.collection(\"Usuarios\").document(idUser);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                if(usuario.getDisplayName() == null){\r\n                    String res1=\"Hola\"+\" \"+snapshot.getString(\"username\");\r\n                    nombre.setText(res1);\r\n                }\r\n            }\r\n        });*/\r\n\r\n        //switch methods\r\n /*     Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });*/\r\n\r\n\r\n        //WEATHER\r\n        ActivityCompat.requestPermissions(getActivity(),new String[]\r\n                {Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n\r\n        view_city =v.findViewById(R.id.town);\r\n        view_city.setText(\"\");\r\n        view_temp =v.findViewById(R.id.temp);\r\n        view_temp.setText(\"\");\r\n        view_desc =v.findViewById(R.id.desc);\r\n        view_desc.setText(\"\");\r\n        view_country=v.findViewById(R.id.txtCountry);\r\n        view_country.setText(\"\");\r\n        view_weather =v.findViewById(R.id.wheather_image);\r\n\r\n        locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);\r\n       /* inicioGPS();*/\r\n        //\r\n\r\n\r\n\r\n\r\n        //RECYCLER VIEW\r\n        ArrayList<StaticRvModel> item=new ArrayList<>();\r\n        item.add(new StaticRvModel(R.drawable.icons_sun,\"Soleado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_night_mode,\"Nocturno\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_energy_saving,\"Ahorro\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_power_off,\"Apagado\"));\r\n        item.add(new StaticRvModel(R.drawable.icons_custom,\"Custom\"));\r\n\r\n        final TextView medidasT=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidasH=v.findViewById(R.id.medidaHumedadGeneral);\r\n        final TextView medidasS=v.findViewById(R.id.medidaSalinidadGeneral);\r\n        final TextView medidasL=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n\r\n        recyclerView=v.findViewById(R.id.rv_1);\r\n        staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(),LinearLayoutManager.HORIZONTAL,false));\r\n        recyclerView.setAdapter(staticRvAdapter);\r\n\r\n\r\n        //TABS\r\n        tabLayout = v.findViewById(R.id.tab_layout);\r\n        viewPager = v.findViewById(R.id.view_pager);\r\n         //Array\r\n        ArrayList<String> arrayList = new ArrayList<>();\r\n\r\n        //set up with viewpager\r\n        tabLayout.setupWithViewPager(viewPager);\r\n\r\n        TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());\r\n        //Pestañas\r\n        adapter.addFrag(new GeneralFragment(),\"General\");\r\n        adapter.addFrag(new Planta1Fragment(),\"Planta 1\");\r\n        adapter.addFrag(new Planta2Fragment(),\"Planta 2\");\r\n\r\n        viewPager.setAdapter(adapter );\r\n\r\n        /*((MainActivity)getActivity()).ola();*/\r\n     /*   //LEER DATOS FIREBASE\r\n        //Temperatura\r\n       DocumentReference documentTemperatura=fStore.collection(\"SensoresA-T\").document(\"Temperatura\");\r\n        documentTemperatura.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediTemp=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasT.setText(resMediTemp);\r\n            }\r\n        });\r\n        //Humedad\r\n        DocumentReference documentHumedad=fStore.collection(\"SensoresA-T\").document(\"Humedad\");\r\n        documentHumedad.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediHum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasH.setText(resMediHum);\r\n            }\r\n        });\r\n        //Iluminación\r\n        DocumentReference documentIluminación=fStore.collection(\"SensoresA-T\").document(\"Iluminación\");\r\n        documentIluminación.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIlum=snapshot.getString(\"Porcentaje\")+\"%\";\r\n                medidasL.setText(resMediIlum);\r\n            }\r\n        });\r\n        //Temperatura ambiente\r\n        DocumentReference documentambiente=fStore.collection(\"SensoresA-T\").document(\"Temperatura ambiente\");\r\n        documentambiente.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot snapshot, @Nullable FirebaseFirestoreException e) {\r\n                String resMediIAmb=snapshot.getString(\"Medición\")+\"°C\";\r\n                medidasS.setText(resMediIAmb);\r\n            }\r\n        });\r\n\r\n      */\r\n\r\n\r\n        return v;\r\n    }\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"luces ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n\r\n\r\n    //WEATHER METHODS\r\n    private void api_key(final String City) {\r\n        OkHttpClient client = new OkHttpClient();\r\n\r\n        Request request = new Request.Builder()\r\n                .url(\"https://api.openweathermap.org/data/2.5/weather?q=\" + City + \"&appid=a6f41d947e0542a26580bcd5c3fb90ef&units=metric\")\r\n                .get()\r\n                .build();\r\n        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n        StrictMode.setThreadPolicy(policy);\r\n        try {\r\n            Response response = client.newCall(request).execute();\r\n            client.newCall(request).enqueue(new Callback() {\r\n                @Override\r\n                public void onFailure(Request request, IOException e) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onResponse(Response response) throws IOException {\r\n                    String responseData = response.body().string();\r\n                    try {\r\n                        JSONObject json = new JSONObject(responseData);\r\n                        JSONArray array = json.getJSONArray(\"weather\");\r\n                        JSONObject object = array.getJSONObject(0);\r\n\r\n                        String description = object.getString(\"description\");\r\n                        String icons = object.getString(\"icon\");\r\n\r\n                        JSONObject temp1 = json.getJSONObject(\"main\");\r\n                        Double Temperature = temp1.getDouble(\"temp\");\r\n\r\n                        setText(view_city, City);\r\n\r\n                        String temps = Math.round(Temperature) + \" °C\";\r\n                        setText(view_temp, temps);\r\n                        setText(view_desc, description);\r\n                        setImage(view_weather, icons);\r\n\r\n                    } catch (JSONException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n\r\n            });\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    private void setText(final TextView text, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                text.setText(value);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setImage(final ImageView imageView, final String value) {\r\n        getActivity().runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                //paste switch\r\n                switch (value) {\r\n                    case \"01d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"01n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));\r\n                        break;\r\n                    case \"02d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"02n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));\r\n                        break;\r\n                    case \"03d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"03n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));\r\n                        break;\r\n                    case \"04d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"04n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));\r\n                        break;\r\n                    case \"09d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"09n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));\r\n                        break;\r\n                    case \"10d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"10n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));\r\n                        break;\r\n                    case \"11d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"11n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));\r\n                        break;\r\n                    case \"13d\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    case \"13n\":\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));\r\n                        break;\r\n                    default:\r\n                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.wheather));\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    //App location\r\n   /* private void getLocation() {\r\n\r\n        //Check Permissions again\r\n\r\n        /*if (ActivityCompat.checkSelfPermission(\r\n                getContext(),Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(\r\n                getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);\r\n        } else {\r\n\r\n            Location LocationNetwork=locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);\r\n             if (LocationNetwork !=null)\r\n            {\r\n                double lat=LocationNetwork.getLatitude();\r\n                double longi=LocationNetwork.getLongitude();\r\n\r\n                latitude=String.valueOf(lat);\r\n                longitude=String.valueOf(longi);\r\n               /* loc_func(LocationNetwork);*/\r\n              /*  api_key(String.valueOf(view_city.getText()));\r\n                showLocationTxt.setText(\"Your Location:\"+\"\\n\"+\"Latitude= \"+latitude+\"\\n\"+\"Longitude= \"+longitude);\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private void OnGPS() {\r\n\r\n        final AlertDialog.Builder builder= new AlertDialog.Builder(getContext());\r\n\r\n        builder.setMessage(\"Enable GPS\").setCancelable(false).setPositiveButton(\"YES\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS));\r\n                getLocation();\r\n            }\r\n        }).setNegativeButton(\"NO\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                dialog.cancel();\r\n            }\r\n        });\r\n        final AlertDialog alertDialog=builder.create();\r\n        alertDialog.show();\r\n    }\r\n\r\n    private void loc_func(Location location){\r\n        try {\r\n            Geocoder geocoder=new Geocoder(getContext());\r\n            List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);\r\n            /*String address = addresses.get(0).getSubLocality();*/\r\n           /* String cityName = addresses.get(0).getLocality();\r\n            String stateName = addresses.get(0).getAdminArea();\r\n            String country = addresses.get(0).getCountryName();\r\n            //txt_paddress.setText(address);\r\n            view_city.setText(cityName);\r\n            view_country.setText(country);\r\n            //txt_state.setText(stateName);*/\r\n\r\n       /* } catch (IOException e) {\r\n            e.printStackTrace();\r\n            Toast.makeText(getContext(), \"Error:\"+e, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void inicioGPS(){\r\n\r\n\r\n        //Check gps is enable or not\r\n\r\n        if (!locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))\r\n        {\r\n            //Write Function To enable gps\r\n\r\n            OnGPS();\r\n        }\r\n        else\r\n        {\r\n            //GPS is already On then\r\n\r\n            /*getLocation();*/\r\n /*       }\r\n    }*/\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(revision f2f4560d5c63afc456a8ea31d2cd81a0233ac735)
-+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/DashboardFragment.java	(date 1611081197253)
-@@ -2,15 +2,22 @@
- 
- import android.Manifest;
- import android.content.Context;
-+import android.content.Intent;
-+import android.content.pm.PackageManager;
-+import android.location.Location;
-+import android.location.LocationListener;
- import android.location.LocationManager;
-+import android.os.AsyncTask;
- import android.os.Bundle;
- 
-+import androidx.annotation.NonNull;
- import androidx.core.app.ActivityCompat;
- import androidx.fragment.app.Fragment;
- import androidx.recyclerview.widget.LinearLayoutManager;
- import androidx.recyclerview.widget.RecyclerView;
- import androidx.viewpager.widget.ViewPager;
- 
-+import android.os.Handler;
- import android.os.StrictMode;
- import android.util.Log;
- import android.view.LayoutInflater;
-@@ -18,15 +25,20 @@
- import android.view.ViewGroup;
- import android.widget.ImageView;
- import android.widget.TextView;
-+import android.widget.Toast;
- 
- import com.example.comun.Mqtt;
- import com.example.infinitycrop.R;
-+import com.example.infinitycrop.ui.MachineControl.planta1;
- import com.example.infinitycrop.ui.recycler_control.StaticRvAdapter;
- import com.example.infinitycrop.ui.recycler_control.StaticRvModel;
- import com.google.android.material.tabs.TabLayout;
- import com.google.firebase.auth.FirebaseAuth;
- import com.google.firebase.auth.FirebaseUser;
- import com.google.firebase.firestore.FirebaseFirestore;
-+import com.loopj.android.http.AsyncHttpClient;
-+import com.loopj.android.http.JsonHttpResponseHandler;
-+import com.loopj.android.http.RequestParams;
- import com.squareup.okhttp.Callback;
- import com.squareup.okhttp.OkHttpClient;
- import com.squareup.okhttp.Request;
-@@ -44,7 +56,15 @@
- import org.json.JSONObject;
- 
- import java.io.IOException;
-+import java.io.InputStream;
-+import java.io.InputStreamReader;
-+import java.net.HttpURLConnection;
-+import java.net.MalformedURLException;
-+import java.net.URL;
- import java.util.ArrayList;
-+import java.util.concurrent.ExecutionException;
-+
-+import cz.msebera.android.httpclient.Header;
- 
- import static com.example.comun.Mqtt.topicRoot;
- 
-@@ -53,33 +73,30 @@
-  * Use the {@link DashboardFragment#newInstance} factory method to
-  * create an instance of this fragment.
-  */
--public class DashboardFragment extends Fragment implements MqttCallback{
-+public class DashboardFragment extends Fragment implements MqttCallback {
- 
-     private RecyclerView recyclerView;
-     private StaticRvAdapter staticRvAdapter;
-     private TabLayout tabLayout;
-     private ViewPager viewPager;
--    //WEATHER
--    private static  final int REQUEST_LOCATION=1;
--    double lat;
--    double longi;
-+    //Weather
-+
-+    final long MIN_TIME = 200;
-+    final float MIN_DISTANCE = 200;
-+    final int REQUEST_CODE = 101;
-+    final String APP_ID = "2599fe29f309cebdb21dd7dcf235662a";
-+    String Location_Provider = LocationManager.GPS_PROVIDER;
-+    final String WEATHER_URL = "https://api.openweathermap.org/data/2.5/weather";
- 
--    TextView showLocationTxt;
-+    TextView NameofCity, weatherState, Temperature;
-+    ImageView mweatherIcon;
- 
--    LocationManager locationManager;
--    String latitude,longitude;
-+    LocationManager mLocationManager;
-+    LocationListener mLocationListner;
- 
--    TextView view_city;
--    TextView view_temp;
--    TextView view_desc;
--    TextView view_country;
- 
--    ImageView view_weather;
--    //
-+
-     //Acceso a la maquina
--
--
--
-     public static MqttClient client = null;
-     // TODO: Rename parameter arguments, choose names that match
-     // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
-@@ -125,13 +142,13 @@
-     public View onCreateView(LayoutInflater inflater, ViewGroup container,
-                              Bundle savedInstanceState) {
-         // Inflate the layout for this fragment
--        View v= inflater.inflate(R.layout.fragment_dashboard, container, false);
-+        final View v = inflater.inflate(R.layout.fragment_dashboard, container, false);
-         //FIREBASE
-         //Recojo los datos del usuario
-         final FirebaseAuth mAuth = FirebaseAuth.getInstance();
-         final FirebaseUser usuario = mAuth.getCurrentUser();
--        final FirebaseFirestore fStore=FirebaseFirestore.getInstance();
--        String idUser=usuario.getUid();
-+        final FirebaseFirestore fStore = FirebaseFirestore.getInstance();
-+        String idUser = usuario.getUid();
-         //guardo el nombre en un textView
-         /*final TextView nombre = (TextView) v.findViewById(R.id.hello_text);
-         String res="Hola"+" "+usuario.getDisplayName();
-@@ -162,50 +179,32 @@
-         });*/
- 
- 
--        //WEATHER
--        ActivityCompat.requestPermissions(getActivity(),new String[]
--                {Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_LOCATION);
--
--        view_city =v.findViewById(R.id.town);
--        view_city.setText("");
--        view_temp =v.findViewById(R.id.temp);
--        view_temp.setText("");
--        view_desc =v.findViewById(R.id.desc);
--        view_desc.setText("");
--        view_country=v.findViewById(R.id.txtCountry);
--        view_country.setText("");
--        view_weather =v.findViewById(R.id.wheather_image);
--
--        locationManager=(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);
--       /* inicioGPS();*/
-         //
--
--
- 
- 
-         //RECYCLER VIEW
--        ArrayList<StaticRvModel> item=new ArrayList<>();
--        item.add(new StaticRvModel(R.drawable.icons_sun,"Soleado"));
--        item.add(new StaticRvModel(R.drawable.icons_night_mode,"Nocturno"));
--        item.add(new StaticRvModel(R.drawable.icons_energy_saving,"Ahorro"));
--        item.add(new StaticRvModel(R.drawable.icons_power_off,"Apagado"));
--        item.add(new StaticRvModel(R.drawable.icons_custom,"Custom"));
-+        ArrayList<StaticRvModel> item = new ArrayList<>();
-+        item.add(new StaticRvModel(R.drawable.icons_sun, "Soleado"));
-+        item.add(new StaticRvModel(R.drawable.icons_night_mode, "Nocturno"));
-+        item.add(new StaticRvModel(R.drawable.icons_energy_saving, "Ahorro"));
-+        item.add(new StaticRvModel(R.drawable.icons_power_off, "Apagado"));
-+        item.add(new StaticRvModel(R.drawable.icons_custom, "Custom"));
- 
--        final TextView medidasT=v.findViewById(R.id.medidaTemperaturaGeneral);
--        final TextView medidasH=v.findViewById(R.id.medidaHumedadGeneral);
--        final TextView medidasS=v.findViewById(R.id.medidaSalinidadGeneral);
--        final TextView medidasL=v.findViewById(R.id.medidasLuminosidadGeneral);
-+        final TextView medidasT = v.findViewById(R.id.medidaTemperaturaGeneral);
-+        final TextView medidasH = v.findViewById(R.id.medidaHumedadGeneral);
-+        final TextView medidasS = v.findViewById(R.id.medidaSalinidadGeneral);
-+        final TextView medidasL = v.findViewById(R.id.medidasLuminosidadGeneral);
- 
--        recyclerView=v.findViewById(R.id.rv_1);
--        staticRvAdapter=new StaticRvAdapter(item,medidasT,medidasH,medidasS,medidasL);
--        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(),LinearLayoutManager.HORIZONTAL,false));
-+        recyclerView = v.findViewById(R.id.rv_1);
-+        staticRvAdapter = new StaticRvAdapter(item, medidasT, medidasH, medidasS, medidasL);
-+        recyclerView.setLayoutManager(new LinearLayoutManager(requireContext(), LinearLayoutManager.HORIZONTAL, false));
-         recyclerView.setAdapter(staticRvAdapter);
- 
- 
-         //TABS
-         tabLayout = v.findViewById(R.id.tab_layout);
-         viewPager = v.findViewById(R.id.view_pager);
--         //Array
-+        //Array
-         ArrayList<String> arrayList = new ArrayList<>();
- 
-         //set up with viewpager
-@@ -213,11 +212,11 @@
- 
-         TabAdapter adapter = new TabAdapter(getActivity().getSupportFragmentManager());
-         //Pestañas
--        adapter.addFrag(new GeneralFragment(),"General");
--        adapter.addFrag(new Planta1Fragment(),"Planta 1");
--        adapter.addFrag(new Planta2Fragment(),"Planta 2");
-+        adapter.addFrag(new GeneralFragment(), "General");
-+        adapter.addFrag(new Planta1Fragment(), "Planta 1");
-+        adapter.addFrag(new Planta2Fragment(), "Planta 2");
- 
--        viewPager.setAdapter(adapter );
-+        viewPager.setAdapter(adapter);
- 
-         /*((MainActivity)getActivity()).ola();*/
-      /*   //LEER DATOS FIREBASE
-@@ -259,10 +258,109 @@
-         });
- 
-       */
--
-+        //Weather App
-+        weatherState =(TextView) v.findViewById(R.id.weatherCondition);
-+        Temperature = (TextView)v.findViewById(R.id.temperature);
-+        mweatherIcon =(ImageView) v.findViewById(R.id.weatherIcon);
-+        NameofCity = (TextView)v.findViewById(R.id.cityName);
- 
-         return v;
-     }
-+    @Override
-+    public void onResume() {
-+        super.onResume();
-+        getWeatherForCurrentLocation();
-+    }
-+    private void getWeatherForCurrentLocation() {
-+        mLocationManager = (LocationManager) getContext().getSystemService(Context.LOCATION_SERVICE);
-+        mLocationListner = new LocationListener() {
-+            @Override
-+            public void onLocationChanged(Location location) {
-+                String Latitude = String.valueOf(location.getLatitude());
-+                String Longitude = String.valueOf(location.getLongitude());
-+                RequestParams params = new RequestParams();
-+                params.put("lat",Latitude);
-+                params.put("lon",Longitude);
-+                params.put("appid",APP_ID);
-+                letsDoSomeWorking(params);
-+
-+            }
-+            @Override
-+            public void onStatusChanged(String provider, int status, Bundle extras) {
-+
-+            }
-+
-+            @Override
-+            public void onProviderEnabled(String provider) {
-+
-+            }
-+
-+            @Override
-+            public void onProviderDisabled(String provider) {
-+
-+            }
-+        };
-+        if (ActivityCompat.checkSelfPermission(getContext(), Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
-+            // TODO: Consider calling
-+            //    ActivityCompat#requestPermissions
-+            // here to request the missing permissions, and then overriding
-+            //   public void onRequestPermissionsResult(int requestCode, String[] permissions,
-+            //                                          int[] grantResults)
-+            // to handle the case where the user grants the permission. See the documentation
-+            // for ActivityCompat#requestPermissions for more details.
-+            ActivityCompat.requestPermissions(getActivity(),new String[]{Manifest.permission.ACCESS_FINE_LOCATION},REQUEST_CODE);
-+            return;
-+        }
-+        mLocationManager.requestLocationUpdates(Location_Provider, MIN_TIME, MIN_DISTANCE, mLocationListner);
-+    }
-+    @Override
-+    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {
-+        super.onRequestPermissionsResult(requestCode, permissions, grantResults);
-+        if (requestCode == REQUEST_CODE) {
-+            if (grantResults.length > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED) {
-+                Toast.makeText(getContext(), "Localizacion obtenida", Toast.LENGTH_SHORT).show();
-+                getWeatherForCurrentLocation();
-+            } else {
-+                Toast.makeText(getContext(), "Localizaacion no obtenida", Toast.LENGTH_SHORT).show();
-+            }
-+
-+        }
-+    }
-+    private void letsDoSomeWorking(RequestParams params){
-+        AsyncHttpClient client =new AsyncHttpClient();
-+        client.get(WEATHER_URL,params,new JsonHttpResponseHandler(){
-+            @Override
-+            public void onSuccess(int statusCode, Header[] headers, JSONObject response) {
-+                /*Toast.makeText(getContext(), "Data obteninda", Toast.LENGTH_SHORT).show();*/
-+                weatherData weatherD= weatherData.fromJson(response);
-+                updateUI(weatherD);
-+                //super.onSuccess(statusCode, headers, response);
-+            }
-+            @Override
-+            public void onFailure(int statusCode, Header[] headers, Throwable throwable, JSONObject errorResponse) {
-+                //super.onFailure(statusCode, headers, throwable, errorResponse);
-+                Toast.makeText(getContext(), "Data no obteninda", Toast.LENGTH_SHORT).show();
-+            }
-+        });
-+    }
-+    private void updateUI(weatherData weather){
-+        Temperature.setText(weather.getmTemperature());
-+        NameofCity.setText(weather.getMcity());
-+        weatherState.setText(weather.getmWeatherType());
-+        int resourceID =getResources().getIdentifier(weather.getMicon(),"drawable",getActivity().getPackageName());
-+        mweatherIcon.setImageResource(resourceID);
-+
-+
-+    }
-+    @Override
-+    public void onPause() {
-+        super.onPause();
-+        if(mLocationManager!=null){
-+            mLocationManager.removeUpdates(mLocationListner);
-+        }
-+    }
-+
-+
- 
-     public void enviarLucesOff(){
-         try {
-@@ -355,56 +453,7 @@
-     }
- 
- 
--    //WEATHER METHODS
--    private void api_key(final String City) {
--        OkHttpClient client = new OkHttpClient();
--
--        Request request = new Request.Builder()
--                .url("https://api.openweathermap.org/data/2.5/weather?q=" + City + "&appid=a6f41d947e0542a26580bcd5c3fb90ef&units=metric")
--                .get()
--                .build();
--        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
--        StrictMode.setThreadPolicy(policy);
--        try {
--            Response response = client.newCall(request).execute();
--            client.newCall(request).enqueue(new Callback() {
--                @Override
--                public void onFailure(Request request, IOException e) {
- 
--                }
--
--                @Override
--                public void onResponse(Response response) throws IOException {
--                    String responseData = response.body().string();
--                    try {
--                        JSONObject json = new JSONObject(responseData);
--                        JSONArray array = json.getJSONArray("weather");
--                        JSONObject object = array.getJSONObject(0);
--
--                        String description = object.getString("description");
--                        String icons = object.getString("icon");
--
--                        JSONObject temp1 = json.getJSONObject("main");
--                        Double Temperature = temp1.getDouble("temp");
--
--                        setText(view_city, City);
--
--                        String temps = Math.round(Temperature) + " °C";
--                        setText(view_temp, temps);
--                        setText(view_desc, description);
--                        setImage(view_weather, icons);
--
--                    } catch (JSONException e) {
--                        e.printStackTrace();
--                    }
--                }
--
--            });
--        } catch (IOException e) {
--            e.printStackTrace();
--        }
--
--    }
- 
-     private void setText(final TextView text, final String value) {
-         getActivity().runOnUiThread(new Runnable() {
-@@ -415,67 +464,7 @@
-         });
-     }
- 
--    private void setImage(final ImageView imageView, final String value) {
--        getActivity().runOnUiThread(new Runnable() {
--            @Override
--            public void run() {
--                //paste switch
--                switch (value) {
--                    case "01d":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));
--                        break;
--                    case "01n":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d01d));
--                        break;
--                    case "02d":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));
--                        break;
--                    case "02n":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d02d));
--                        break;
--                    case "03d":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));
--                        break;
--                    case "03n":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d03d));
--                        break;
--                    case "04d":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));
--                        break;
--                    case "04n":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d04d));
--                        break;
--                    case "09d":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));
--                        break;
--                    case "09n":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d09d));
--                        break;
--                    case "10d":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));
--                        break;
--                    case "10n":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d10d));
--                        break;
--                    case "11d":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));
--                        break;
--                    case "11n":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d11d));
--                        break;
--                    case "13d":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));
--                        break;
--                    case "13n":
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.d13d));
--                        break;
--                    default:
--                        imageView.setImageDrawable(getResources().getDrawable(R.drawable.wheather));
- 
--                }
--            }
--        });
--    }
- 
-     //App location
-    /* private void getLocation() {
-Index: app/build.gradle
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>apply plugin: 'com.android.application'\r\n\r\n\r\nandroid {\r\n    compileSdkVersion 30\r\n    buildToolsVersion \"30.0.2\"\r\n\r\n    defaultConfig {\r\n        applicationId \"com.example.infinitycrop\"\r\n        minSdkVersion 23\r\n        targetSdkVersion 30\r\n        versionCode 1\r\n        versionName \"1.0\"\r\n        multiDexEnabled true\r\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\r\n        }\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation fileTree(dir: \"libs\", include: [\"*.jar\"])\r\n    implementation 'androidx.appcompat:appcompat:1.2.0'\r\n    implementation 'com.google.android.material:material:1.2.1'\r\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.2'\r\n    implementation 'androidx.navigation:navigation-fragment:2.1.0'\r\n    implementation 'androidx.navigation:navigation-ui:2.1.0'\r\n    implementation 'androidx.lifecycle:lifecycle-extensions:2.2.0'\r\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\r\n    implementation 'com.google.firebase:firebase-auth:16.0.5'\r\n    implementation 'com.firebaseui:firebase-ui-auth:6.2.0'\r\n    implementation project(path: ':comun')\r\n    implementation 'com.google.firebase:firebase-database:19.5.1'\r\n    implementation 'com.google.firebase:firebase-storage:19.2.0'\r\n    testImplementation 'junit:junit:4.12'\r\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\r\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\r\n    implementation 'com.google.firebase:firebase-analytics'\r\n    implementation 'com.ismaeldivita.chipnavigation:chip-navigation-bar:1.3.4'\r\n    implementation 'org.jetbrains.kotlin:kotlin-stdlib:1.4.10'\r\n    implementation 'androidx.recyclerview:recyclerview:1.1.0'\r\n    implementation 'com.android.volley:volley:1.1.0'\r\n    // Also declare the dependency for the Google Play services library and specify its version\r\n    implementation 'com.google.android.gms:play-services-auth:18.1.0'\r\n    // Import the BoM for the Firebase platform\r\n    implementation platform('com.google.firebase:firebase-bom:26.0.0')\r\n    implementation 'com.google.firebase:firebase-firestore:17.1.2'\r\n    implementation 'com.android.support:multidex:1.0.3'\r\n    implementation 'com.firebaseui:firebase-ui-firestore:6.3.0'\r\n    //biblioteca para mostrar images a través de URL\r\n    implementation 'com.github.bumptech.glide:glide:4.11.0'\r\n    //import del mqtt\r\n    implementation 'org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.1.1'\r\n    implementation 'com.google.android.gms:play-services-maps:17.0.0'\r\n    compile 'com.google.android.gms:play-services-location:16.0.0'\r\n    implementation 'com.journeyapps:zxing-android-embedded:3.4.0'//añadimos esta libreria para qr\r\n    implementation 'com.facebook.android:facebook-android-sdk:[4,5)'\r\n\r\n    implementation \"androidx.viewpager2:viewpager2:1.0.0\" //libreria viewpager\r\n    implementation  'com.airbnb.android:lottie:3.4.1'//libreria para la animacion\r\n    implementation 'com.cuberto:liquid-swipe:1.0.0' //libreria para el tutorial\r\n    implementation 'androidx.core:core:1.3.1'\r\n    implementation'androidx.core:core-ktx:1.3.1'\r\n\r\n    implementation'com.squareup.okhttp3:mockwebserver:4.2.0'\r\n    implementation'com.squareup.okhttp3:okhttp:4.2.0'\r\n\r\n    implementation 'androidx.cardview:cardview:1.0.0'\r\n    implementation \"androidx.viewpager2:viewpager2:1.0.0\" //libreria viewpager\r\n\r\n    //plugins de subir imagen user foro\r\n    implementation 'com.theartofdev.edmodo:android-image-cropper:2.4.+'\r\n    implementation 'com.squareup.picasso:picasso:2.71828'\r\n    implementation 'id.zelory:compressor:2.1.0'\r\n    //imageView modo circulo\r\n    implementation 'com.makeramen:roundedimageview:2.3.0'\r\n\r\n    implementation 'com.github.PhilJay:MPAndroidChart:v3.1.0' // libreria graficas\r\n    //libreria wheelview\r\n    implementation'com.github.psuzn:wheelView:1.0.0'\r\n}\r\napply plugin: 'com.google.gms.google-services'
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/build.gradle	(revision f2f4560d5c63afc456a8ea31d2cd81a0233ac735)
-+++ app/build.gradle	(date 1611081197279)
-@@ -47,6 +47,8 @@
-     implementation 'com.android.volley:volley:1.1.0'
-     // Also declare the dependency for the Google Play services library and specify its version
-     implementation 'com.google.android.gms:play-services-auth:18.1.0'
-+    implementation 'com.google.android.gms:play-services-ads:9.8.0'
-+
-     // Import the BoM for the Firebase platform
-     implementation platform('com.google.firebase:firebase-bom:26.0.0')
-     implementation 'com.google.firebase:firebase-firestore:17.1.2'
-@@ -83,5 +85,6 @@
-     implementation 'com.github.PhilJay:MPAndroidChart:v3.1.0' // libreria graficas
-     //libreria wheelview
-     implementation'com.github.psuzn:wheelView:1.0.0'
-+    implementation'com.loopj.android:android-async-http:1.4.11'//libreria para el tiempo
- }
- apply plugin: 'com.google.gms.google-services'
-\ No newline at end of file
-Index: app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.infinitycrop.ui.dashboard;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.constraintlayout.widget.ConstraintLayout;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\n\r\nimport com.example.comun.Mqtt;\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.MachineControl.planta1;\r\nimport com.google.android.material.bottomsheet.BottomSheetDialog;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\n\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\nimport org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;\r\n\r\nimport static com.example.comun.Mqtt.topicRoot;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link GeneralFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class GeneralFragment extends Fragment implements MqttCallback{\r\n    public static MqttClient client = null;\r\n    private String uid;\r\n    private FirebaseFirestore db;\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public GeneralFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment GeneralFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static GeneralFragment newInstance(String param1, String param2) {\r\n        GeneralFragment fragment = new GeneralFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v = inflater.inflate(R.layout.fragment_general, container, false);\r\n        //switch methods\r\n        Switch switchLuz = (Switch) v.findViewById(R.id.switchLuminosidadGeneral);\r\n        switchLuz.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                    // The toggle is enabled\r\n                    enviarLucesOn();\r\n                } else {\r\n                    // The toggle is disabled\r\n                    enviarLucesOff();\r\n                }\r\n            }\r\n        });\r\n        db = FirebaseFirestore.getInstance();\r\n        MainActivity myActivity = (MainActivity) getActivity();\r\n        final TextView medidaTemp=v.findViewById(R.id.medidaTemperaturaGeneral);\r\n        final TextView medidaHum=v.findViewById(R.id.medidaHumedadGeneral);\r\n        final TextView medidaHumAm=v.findViewById(R.id.medidaSalinidadGeneral);\r\n        final TextView medidaLuz=v.findViewById(R.id.medidasLuminosidadGeneral);\r\n        uid=myActivity.getMachineUID();\r\n        db.collection(\"Mediciones general\")\r\n                .document(uid)\r\n                .addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onEvent(@Nullable DocumentSnapshot snapshot,\r\n                                        @Nullable FirebaseFirestoreException e) {\r\n                        if (e != null) {\r\n                            return;\r\n                        }\r\n\r\n                        if (snapshot != null && snapshot.exists()) {\r\n                            //Temperatura\r\n                            String medidaT=snapshot.getString(\"Temperatura\");\r\n                            medidaTemp.setText(medidaT+\"°C\");\r\n                            //Humedad\r\n                            String medidaH=snapshot.getString(\"Humedad\");\r\n                            medidaHum.setText(medidaH+\"%\");\r\n                            //Humedad Ambiente\r\n                            String medidaHA=snapshot.getString(\"Humedad Ambiente\");\r\n                            medidaHumAm.setText(medidaHA+\"%\");\r\n                            //Luminosidad\r\n                            String medidaL=snapshot.getString(\"Luminosidad\");\r\n                            medidaLuz.setText(medidaL+\"%\");\r\n\r\n\r\n                        } else {\r\n\r\n                        }\r\n                    }\r\n                });\r\n\r\n        //Boton para acceder a la maquina para sus parcelas\r\n        Button btnmymachine = (Button) v.findViewById(R.id.btnMyMachine);\r\n        btnmymachine.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                BottomSheetDialog bottomSheetDialog = new BottomSheetDialog(\r\n                        getContext()\r\n                );\r\n                bottomSheetDialog.setContentView(R.layout.plantamaquina_bottom_sheet);\r\n                Button btnp1=bottomSheetDialog.findViewById(R.id.enterPlant2);\r\n                Button btn2=bottomSheetDialog.findViewById(R.id.enterPlant1);\r\n                bottomSheetDialog.show();\r\n                btnp1.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        Intent intent = new Intent (getContext(), planta1.class);\r\n                        intent.putExtra(\"idMachine\", uid);\r\n                        startActivity(intent);\r\n\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        return v;\r\n    }\r\n        /*btnmymachine.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent (getContext(), MiMaquina.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n        });*/\r\n\r\n\r\n\r\n    public void enviarLucesOff(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"Superior OFF\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n    public void enviarLucesOn(){\r\n        try {\r\n            client = new MqttClient(Mqtt.broker, Mqtt.clientId, new\r\n                    MemoryPersistence());\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n        MqttConnectOptions connOpts = new MqttConnectOptions();\r\n        connOpts.setCleanSession(true);\r\n        connOpts.setKeepAliveInterval(60);\r\n        connOpts.setWill(topicRoot+\"WillTopic\", \"App desconectada\".getBytes(),Mqtt.qos, false);\r\n\r\n        try {\r\n            client.connect(connOpts);\r\n        } catch (MqttException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //conexión con el broker Root1 = Lector de datos\r\n        //nos subscribimos a topic lectura\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Subscrito a \" + topicRoot + \"luces\");//aqui está el root al que nos subscribimos si se quiere modificar se tiene que modificar este\r\n            client.subscribe(topicRoot + \"luces\", Mqtt.qos);\r\n            client.setCallback((MqttCallback) this);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al suscribir.\", e);\r\n        }\r\n        try {\r\n            Log.i(Mqtt.TAG, \"Publicando mensaje: \" + \"mensaje\");\r\n            MqttMessage message = new MqttMessage(\"Superior ON\".getBytes());\r\n            message.setQos(Mqtt.qos);\r\n            message.setRetained(false);\r\n            client.publish(topicRoot+\"luces\", message);\r\n        } catch (MqttException e) {\r\n            Log.e(Mqtt.TAG, \"Error al publicar.\", e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void connectionLost(Throwable cause) {\r\n        Log.d(Mqtt.TAG, \"Conexión perdida\");\r\n    }\r\n\r\n    @Override\r\n    public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void deliveryComplete(IMqttDeliveryToken token) {\r\n        Log.d(Mqtt.TAG, \"Entrega completa\");\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(revision f2f4560d5c63afc456a8ea31d2cd81a0233ac735)
-+++ app/src/main/java/com/example/infinitycrop/ui/dashboard/GeneralFragment.java	(date 1611081197285)
-@@ -161,7 +161,10 @@
-                         intent.putExtra("idMachine", uid);
-                         startActivity(intent);
- 
-+
-+
-                     }
-+
-                 });
-             }
-         });
-Index: app/src/main/res/layout/fragment_dashboard.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    tools:context=\".ui.dashboard.DashboardFragment\">\r\n\r\n    <!-- TODO: Update blank fragment layout -->\r\n    <!--<TextView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_centerInParent=\"true\"\r\n        android:textSize=\"50dp\"\r\n        android:text=\"Home fragment\" />-->\r\n    <!--<LinearLayout\r\n        android:orientation=\"vertical\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n        <RelativeLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginRight=\"28dp\"\r\n            android:layout_marginTop=\"32dp\"\r\n            android:layout_marginLeft=\"28dp\">\r\n\r\n            <ImageView\r\n                android:layout_alignParentRight=\"true\"\r\n                android:src=\"@drawable/ic_home\"\r\n                android:layout_width=\"62dp\"\r\n                android:layout_height=\"62dp\"/>\r\n\r\n        </RelativeLayout>\r\n\r\n    </LinearLayout>-->\r\n\r\n    <androidx.constraintlayout.widget.ConstraintLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n        <androidx.constraintlayout.widget.ConstraintLayout\r\n            android:id=\"@+id/constraintLayout3\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"10dp\"\r\n            android:gravity=\"center\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:orientation=\"horizontal\"\r\n                app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/imgLogo\"\r\n                    android:layout_width=\"32dp\"\r\n                    android:layout_height=\"32dp\"\r\n                    android:src=\"@drawable/logo_without_background\" />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/textInfinity\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_marginLeft=\"2dp\"\r\n                    android:gravity=\"center\"\r\n                    android:text=\"Infinity Crop\"\r\n                    android:textSize=\"19sp\" />\r\n\r\n            </LinearLayout>\r\n\r\n        </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n        <androidx.cardview.widget.CardView\r\n            android:id=\"@+id/hello_text\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_margin=\"12dp\"\r\n            android:layout_marginStart=\"8dp\"\r\n            android:layout_marginTop=\"60dp\"\r\n            android:layout_marginEnd=\"8dp\"\r\n            app:cardCornerRadius=\"12dp\"\r\n            app:cardElevation=\"6dp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/constraintLayout3\">\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n\r\n                android:orientation=\"vertical\"\r\n                android:padding=\"2dp\">\r\n\r\n                <androidx.constraintlayout.widget.ConstraintLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"153dp\"\r\n                    android:layout_marginBottom=\"12dp\">\r\n\r\n\r\n                    <ImageView\r\n                        android:id=\"@+id/wheather_image\"\r\n                        android:layout_width=\"158dp\"\r\n                        android:layout_height=\"130dp\"\r\n                        android:layout_marginEnd=\"32dp\"\r\n                        android:src=\"@drawable/wheather\"\r\n                        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                        app:layout_constraintEnd_toEndOf=\"parent\"\r\n                        app:layout_constraintTop_toTopOf=\"parent\"\r\n                        app:layout_constraintVertical_bias=\"0.547\"\r\n                        tools:ignore=\"MissingConstraints\" />\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/temp\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginStart=\"24dp\"\r\n                        android:layout_marginTop=\"8dp\"\r\n                        android:text=\"15°C\"\r\n                        android:textColor=\"#000000\"\r\n                        android:textSize=\"36sp\"\r\n                        app:layout_constraintEnd_toStartOf=\"@+id/wheather_image\"\r\n                        app:layout_constraintHorizontal_bias=\"0.013\"\r\n                        app:layout_constraintStart_toStartOf=\"parent\"\r\n                        app:layout_constraintTop_toBottomOf=\"@+id/town\"\r\n                        tools:ignore=\"MissingConstraints\" />\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/desc\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginStart=\"24dp\"\r\n                        android:layout_marginTop=\"8dp\"\r\n                        android:text=\"Description\"\r\n                        android:textAppearance=\"@style/TextAppearance.AppCompat.Body1\"\r\n                        android:textColor=\"#494343\"\r\n                        app:layout_constraintEnd_toStartOf=\"@+id/wheather_image\"\r\n                        app:layout_constraintHorizontal_bias=\"0.012\"\r\n                        app:layout_constraintStart_toStartOf=\"parent\"\r\n                        app:layout_constraintTop_toBottomOf=\"@+id/temp\"\r\n                        tools:ignore=\"MissingConstraints\" />\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/town\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginStart=\"24dp\"\r\n                        android:layout_marginTop=\"16dp\"\r\n                        android:text=\"Krakow\"\r\n                        android:textAppearance=\"@style/TextAppearance.AppCompat.Body1\"\r\n                        android:textSize=\"18sp\"\r\n                        app:layout_constraintEnd_toStartOf=\"@+id/wheather_image\"\r\n                        app:layout_constraintHorizontal_bias=\"0.011\"\r\n                        app:layout_constraintStart_toStartOf=\"parent\"\r\n                        app:layout_constraintTop_toTopOf=\"parent\"\r\n                        tools:ignore=\"MissingConstraints\" />\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/txtCountry\"\r\n                        android:layout_width=\"84dp\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginStart=\"24dp\"\r\n                        android:text=\"TextView\"\r\n                        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                        app:layout_constraintEnd_toStartOf=\"@+id/wheather_image\"\r\n                        app:layout_constraintHorizontal_bias=\"0.015\"\r\n                        app:layout_constraintStart_toStartOf=\"parent\"\r\n                        app:layout_constraintTop_toBottomOf=\"@+id/desc\"\r\n                        app:layout_constraintVertical_bias=\"0.818\"\r\n                        tools:ignore=\"MissingConstraints\" />\r\n\r\n                </androidx.constraintlayout.widget.ConstraintLayout>\r\n            </LinearLayout>\r\n        </androidx.cardview.widget.CardView>\r\n\r\n\r\n        <RelativeLayout\r\n            android:id=\"@+id/relativeLayout2\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"60dp\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_marginRight=\"20dp\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/hello_text\"\r\n            tools:layout_editor_absoluteX=\"20dp\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/textMode\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:text=\"Modos  >\"\r\n\r\n                android:textSize=\"19sp\" />\r\n\r\n            <!--<ImageView\r\n                android:layout_width=\"62dp\"\r\n                android:layout_height=\"62dp\"\r\n                android:layout_alignParentRight=\"true\"\r\n                android:src=\"@drawable/ic_sun\" />-->\r\n        </RelativeLayout>\r\n\r\n        <androidx.recyclerview.widget.RecyclerView\r\n            android:id=\"@+id/rv_1\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"150dp\"\r\n            android:layout_marginLeft=\"10dp\"\r\n            android:layout_marginTop=\"2dp\"\r\n            android:layout_marginRight=\"10dp\"\r\n            app:layout_constraintBottom_toBottomOf=\"parent\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/relativeLayout2\"\r\n            app:layout_constraintVertical_bias=\"0\" />\r\n\r\n        <!--<androidx.recyclerview.widget.RecyclerView\r\n            android:id=\"@+id/rv_2\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"200dp\"\r\n            android:layout_marginLeft=\"10dp\"\r\n            android:layout_marginTop=\"40dp\"\r\n            android:layout_marginRight=\"10dp\"\r\n            app:layout_constraintBottom_toBottomOf=\"parent\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/rv_1\"\r\n            app:layout_constraintVertical_bias=\"0\" />-->\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"400dp\"\r\n            android:layout_marginTop=\"16dp\"\r\n            android:orientation=\"vertical\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/rv_1\">\r\n\r\n            <com.google.android.material.tabs.TabLayout\r\n                android:id=\"@+id/tab_layout\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"48dp\"\r\n                android:layout_marginLeft=\"8dp\"\r\n                android:layout_marginRight=\"8dp\"\r\n                android:background=\"@drawable/back_unselected_dash\"\r\n                app:tabIndicatorHeight=\"0dp\"\r\n                app:tabSelectedTextColor=\"@color/colorPrimary\"\r\n                app:tabBackground=\"@drawable/back_tabs_dash\"\r\n                app:tabTextColor=\"@android:color/black\" />\r\n\r\n            <androidx.constraintlayout.widget.ConstraintLayout\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\">\r\n\r\n                <androidx.viewpager.widget.ViewPager\r\n                    android:id=\"@+id/view_pager\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginStart=\"10dp\"\r\n                    android:layout_marginEnd=\"10dp\"\r\n                    app:layout_constraintEnd_toEndOf=\"parent\"\r\n                    app:layout_constraintStart_toStartOf=\"parent\"\r\n                    app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n                </androidx.viewpager.widget.ViewPager>\r\n            </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n        </LinearLayout>\r\n\r\n    </androidx.constraintlayout.widget.ConstraintLayout>\r\n</ScrollView>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_dashboard.xml	(revision f2f4560d5c63afc456a8ea31d2cd81a0233ac735)
-+++ app/src/main/res/layout/fragment_dashboard.xml	(date 1611081197260)
-@@ -105,77 +105,69 @@
- 
- 
-                     <ImageView
--                        android:id="@+id/wheather_image"
--                        android:layout_width="158dp"
--                        android:layout_height="130dp"
--                        android:layout_marginEnd="32dp"
--                        android:src="@drawable/wheather"
-+                        android:id="@+id/weatherIcon"
-+                        android:layout_width="146dp"
-+                        android:layout_height="117dp"
-+                        android:src="@drawable/cloudy"
-                         app:layout_constraintBottom_toBottomOf="parent"
-                         app:layout_constraintEnd_toEndOf="parent"
-+                        app:layout_constraintHorizontal_bias="1.0"
-+                        app:layout_constraintStart_toStartOf="@+id/guideline2"
-                         app:layout_constraintTop_toTopOf="parent"
--                        app:layout_constraintVertical_bias="0.547"
-+                        app:layout_constraintVertical_bias="0.472"
-                         tools:ignore="MissingConstraints" />
- 
-                     <TextView
--                        android:id="@+id/temp"
-+                        android:id="@+id/cityName"
-                         android:layout_width="wrap_content"
-                         android:layout_height="wrap_content"
--                        android:layout_marginStart="24dp"
--                        android:layout_marginTop="8dp"
--                        android:text="15°C"
--                        android:textColor="#000000"
--                        android:textSize="36sp"
--                        app:layout_constraintEnd_toStartOf="@+id/wheather_image"
--                        app:layout_constraintHorizontal_bias="0.013"
-+                        android:layout_marginStart="35dp"
-+                        android:layout_marginTop="12dp"
-+                        android:text="Cargando..."
-+                        android:textColor="@color/black"
-+                        android:textSize="32sp"
-+                        app:layout_constraintEnd_toStartOf="@+id/guideline2"
-+                        app:layout_constraintHorizontal_bias="0.0"
-                         app:layout_constraintStart_toStartOf="parent"
--                        app:layout_constraintTop_toBottomOf="@+id/town"
--                        tools:ignore="MissingConstraints" />
-+                        app:layout_constraintTop_toTopOf="parent" />
- 
-                     <TextView
--                        android:id="@+id/desc"
-+                        android:id="@+id/temperature"
-                         android:layout_width="wrap_content"
-                         android:layout_height="wrap_content"
--                        android:layout_marginStart="24dp"
--                        android:layout_marginTop="8dp"
--                        android:text="Description"
--                        android:textAppearance="@style/TextAppearance.AppCompat.Body1"
--                        android:textColor="#494343"
--                        app:layout_constraintEnd_toStartOf="@+id/wheather_image"
--                        app:layout_constraintHorizontal_bias="0.012"
--                        app:layout_constraintStart_toStartOf="parent"
--                        app:layout_constraintTop_toBottomOf="@+id/temp"
--                        tools:ignore="MissingConstraints" />
-+                        android:layout_marginTop="2dp"
-+                        android:textColor="#000000"
-+                        android:textSize="55sp"
-+                        app:layout_constraintEnd_toStartOf="@+id/weatherIcon"
-+                        app:layout_constraintHorizontal_bias="0.0"
-+                        app:layout_constraintStart_toStartOf="@+id/cityName"
-+                        app:layout_constraintTop_toBottomOf="@+id/cityName" />
- 
-                     <TextView
--                        android:id="@+id/town"
-+                        android:id="@+id/weatherCondition"
-                         android:layout_width="wrap_content"
-                         android:layout_height="wrap_content"
--                        android:layout_marginStart="24dp"
--                        android:layout_marginTop="16dp"
--                        android:text="Krakow"
--                        android:textAppearance="@style/TextAppearance.AppCompat.Body1"
--                        android:textSize="18sp"
--                        app:layout_constraintEnd_toStartOf="@+id/wheather_image"
--                        app:layout_constraintHorizontal_bias="0.011"
--                        app:layout_constraintStart_toStartOf="parent"
--                        app:layout_constraintTop_toTopOf="parent"
--                        tools:ignore="MissingConstraints" />
--
--                    <TextView
--                        android:id="@+id/txtCountry"
--                        android:layout_width="84dp"
--                        android:layout_height="wrap_content"
--                        android:layout_marginStart="24dp"
--                        android:text="TextView"
-+                        android:layout_marginBottom="16dp"
-+                        android:text="Cargando..."
-+                        android:textColor="@color/black"
-+                        android:textSize="15dp"
-                         app:layout_constraintBottom_toBottomOf="parent"
--                        app:layout_constraintEnd_toStartOf="@+id/wheather_image"
--                        app:layout_constraintHorizontal_bias="0.015"
--                        app:layout_constraintStart_toStartOf="parent"
--                        app:layout_constraintTop_toBottomOf="@+id/desc"
--                        app:layout_constraintVertical_bias="0.818"
--                        tools:ignore="MissingConstraints" />
-+                        app:layout_constraintEnd_toEndOf="@+id/cityName"
-+                        app:layout_constraintHorizontal_bias="0.0"
-+                        app:layout_constraintStart_toStartOf="@+id/temperature"
-+                        app:layout_constraintTop_toBottomOf="@+id/temperature"
-+                        app:layout_constraintVertical_bias="0.0" />
-+
-+                    <androidx.constraintlayout.widget.Guideline
-+                        android:id="@+id/guideline2"
-+                        android:layout_width="wrap_content"
-+                        android:layout_height="wrap_content"
-+                        android:orientation="vertical"
-+                        app:layout_constraintGuide_begin="237dp" />
-+
- 
-                 </androidx.constraintlayout.widget.ConstraintLayout>
-+
-             </LinearLayout>
-         </androidx.cardview.widget.CardView>
- 
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_13_01_2021_1_20__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_13_01_2021_1_20__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_17_01_2021_15_05__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_17_01_2021_15_05__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_19_07__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_19_07__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_15_01_2021_13_24__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_15_01_2021_13_24__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_21_29__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_21_29__Default_Changelist_.xml
Index: .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_19_33__Default_Changelist_.xml
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_19_33__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_19_33__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,44 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_19_01_2021_19_33_[Default_Changelist]" date="1611081197447" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_19_33_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 19/01/2021 19:33 [Default Changelist]" />
-  <binary>
-    <option name="BEFORE_PATH" value="app/src/main/res/drawable-xhdpi/d01d.png" />
-    <option name="AFTER_PATH" />
-    <option name="SHELVED_PATH" />
-  </binary>
-  <binary>
-    <option name="BEFORE_PATH" value="app/src/main/res/drawable-xhdpi/d09d.png" />
-    <option name="AFTER_PATH" />
-    <option name="SHELVED_PATH" />
-  </binary>
-  <binary>
-    <option name="BEFORE_PATH" value="app/src/main/res/drawable-xhdpi/cloud.png" />
-    <option name="AFTER_PATH" />
-    <option name="SHELVED_PATH" />
-  </binary>
-  <binary>
-    <option name="BEFORE_PATH" value="app/src/main/res/drawable-xhdpi/d13d.png" />
-    <option name="AFTER_PATH" />
-    <option name="SHELVED_PATH" />
-  </binary>
-  <binary>
-    <option name="BEFORE_PATH" value="app/src/main/res/drawable-xhdpi/d10d.png" />
-    <option name="AFTER_PATH" />
-    <option name="SHELVED_PATH" />
-  </binary>
-  <binary>
-    <option name="BEFORE_PATH" value="app/src/main/res/drawable-xhdpi/d11d.png" />
-    <option name="AFTER_PATH" />
-    <option name="SHELVED_PATH" />
-  </binary>
-  <binary>
-    <option name="BEFORE_PATH" value="app/src/main/res/drawable-xhdpi/d02d.png" />
-    <option name="AFTER_PATH" />
-    <option name="SHELVED_PATH" />
-  </binary>
-  <binary>
-    <option name="BEFORE_PATH" value="app/src/main/res/drawable-xhdpi/d04d.png" />
-    <option name="AFTER_PATH" />
-    <option name="SHELVED_PATH" />
-  </binary>
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_08__Default_Changelist_.xml
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_08__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_08__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_19_01_2021_21_08_[Default_Changelist]" date="1611086979173" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_21_08_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 19/01/2021 21:08 [Default Changelist]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_19_07__Default_Changelist_.xml
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_19_07__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_19_07__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_16_01_2021_19_07_[Default_Changelist]" date="1610820458010" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_19_07_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 16/01/2021 19:07 [Default Changelist]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_17_01_2021_15_05__Default_Changelist_.xml
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_17_01_2021_15_05__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_17_01_2021_15_05__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_17_01_2021_15_05_[Default_Changelist]" date="1610892339149" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_17_01_2021_15_05_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 17/01/2021 15:05 [Default Changelist]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_21_29__Default_Changelist_.xml
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_21_29__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_21_29__Default_Changelist_.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_16_01_2021_21_29_[Default_Changelist]" date="1610828983649" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_16_01_2021_21_29_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 16/01/2021 21:29 [Default Changelist]" />
-</changelist>
\ No newline at end of file
Index: app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.infinitycrop.ui.list_machine;\r\n\r\nimport android.content.Intent;\r\nimport android.media.Image;\r\nimport android.os.Bundle;\r\nimport android.os.Parcelable;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.ItemTouchHelper;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.infinitycrop.MainActivity;\r\nimport com.example.infinitycrop.R;\r\nimport com.example.infinitycrop.ui.logmail.RegisterActivity;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerAdapter;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\nimport com.google.android.material.bottomsheet.BottomSheetDialog;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.Query;\r\n\r\nimport java.text.BreakIterator;\r\nimport java.util.Map;\r\n\r\npublic class MainActivityMachineList extends AppCompatActivity {\r\n    private FirebaseFirestore firebaseFirestore;\r\n    private RecyclerView mFirestoreList;\r\n    private Adapter adapter;\r\n    private FirebaseAuth firebaseAuth;\r\n    Button addBtn;//boton añadir nueva maquina\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_list_machines);\r\n        firebaseFirestore=FirebaseFirestore.getInstance();\r\n        mFirestoreList=findViewById(R.id.firestore_list);\r\n        firebaseAuth=FirebaseAuth.getInstance();\r\n        String uid=firebaseAuth.getUid();\r\n        //Query\r\n        Query query=firebaseFirestore\r\n                .collection(\"Machine\")\r\n               .whereEqualTo(\"userUID\", uid)\r\n                .orderBy(\"priority\",Query.Direction.ASCENDING);\r\n        //RecyclerView\r\n        FirestoreRecyclerOptions<MachineModel> options=new FirestoreRecyclerOptions.Builder<MachineModel>()\r\n                .setQuery(query, MachineModel.class)\r\n                .build();\r\n        //View Holder\r\n        adapter= new Adapter(options);\r\n        mFirestoreList.setHasFixedSize(true);\r\n        mFirestoreList.setLayoutManager(new LinearLayoutManager(this));\r\n        mFirestoreList.setAdapter(adapter);\r\n\r\n        new ItemTouchHelper(new ItemTouchHelper.SimpleCallback(0,\r\n                ItemTouchHelper.LEFT | ItemTouchHelper.RIGHT) {\r\n            @Override\r\n            public boolean onMove(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder, RecyclerView.ViewHolder target) {\r\n                return false;\r\n            }\r\n            @Override\r\n            public void onSwiped(RecyclerView.ViewHolder viewHolder, int direction) {\r\n                Toast.makeText(getApplicationContext(), \"Maquina eliminada con éxito\", Toast.LENGTH_SHORT).show();\r\n                adapter.deleteItem(viewHolder.getAdapterPosition());\r\n            }\r\n        }).attachToRecyclerView(mFirestoreList);\r\n\r\n        adapter.setOnItemClickListener(new Adapter.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(DocumentSnapshot documentSnapshot, int position) {\r\n                /*documentSnapshot.getData();*/ //-> devuelve all que tiene la maquina en firebase\r\n                MachineModel machine = documentSnapshot.toObject(MachineModel.class);\r\n                final String id = documentSnapshot.getId();\r\n                final String path = documentSnapshot.getString(\"description\"); //devuelve ruta en firebase Machine\\madara\r\n                final String name = documentSnapshot.getString(\"name\");\r\n                final String identif = documentSnapshot.getId();\r\n                //botttom sheet\r\n                final BottomSheetDialog bottomSheetDialog=new BottomSheetDialog(MainActivityMachineList.this);\r\n                bottomSheetDialog.setContentView(R.layout.machine_bottom_sheet);\r\n                Button btnenter=bottomSheetDialog.findViewById(R.id.enterMachineButton);\r\n                Button btnmodify=bottomSheetDialog.findViewById(R.id.madifyMachineButton);\r\n                Button btncancel=bottomSheetDialog.findViewById(R.id.cancelMachineButton);\r\n                btnenter.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        Intent intent = new Intent(getBaseContext(), MainActivity.class);\r\n                        intent.putExtra(\"machine\", id);\r\n                        intent.putExtra(\"description\", path);\r\n                        startActivity(intent);\r\n                    }\r\n                });\r\n                btnmodify.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        //poner aca Intent para acceder al layout de modificar maquina\r\n                        //hay que pasarle un intent con extra como he hecho en el onClick de arriba\r\n                        //lo que necesitas para modificar es la variable id\r\n                        //encuentras en firebase la maquina con el id y haces la magia de modificar etc..\r\n                        //lo de maquina a favoritos es facil , si es 1 es favoirto si es 2 no lo es.\r\n                        //ejemplo\r\n                        Intent intent = new Intent(getBaseContext(), ModifyMachine.class);\r\n                        intent.putExtra(\"maq\", name);\r\n                        intent.putExtra(\"identificator\", identif);\r\n                        startActivity(intent);\r\n                    }\r\n                });\r\n                btncancel.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        bottomSheetDialog.cancel();\r\n                    }\r\n                });\r\n                bottomSheetDialog.show();\r\n\r\n\r\n            }\r\n        });\r\n\r\n        FloatingActionButton addbtn = (FloatingActionButton) findViewById(R.id.button_add_machine);\r\n        addbtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent (getApplicationContext(), AddMachine.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        adapter.stopListening();\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        adapter.startListening();\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ app/src/main/java/com/example/infinitycrop/ui/list_machine/MainActivityMachineList.java	(date 1611431973988)
@@ -50,7 +50,7 @@
         //Query
         Query query=firebaseFirestore
                 .collection("Machine")
-               .whereEqualTo("userUID", uid)
+                .whereEqualTo("userUID", uid)
                 .orderBy("priority",Query.Direction.ASCENDING);
         //RecyclerView
         FirestoreRecyclerOptions<MachineModel> options=new FirestoreRecyclerOptions.Builder<MachineModel>()
Index: app/src/main/res/layout/fragment_profile_foro.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"#EFE9E9\"\r\n    android:orientation=\"vertical\">\r\n\r\n    <RelativeLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"405dp\">\r\n\r\n        <LinearLayout\r\n            android:id=\"@+id/layout1P\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"350dp\"\r\n            android:background=\"@color/colorSecondary\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_marginTop=\"25dp\"\r\n                android:gravity=\"center\"\r\n                android:orientation=\"horizontal\">\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/imgP\"\r\n                    android:layout_width=\"150dp\"\r\n                    android:layout_height=\"150dp\"\r\n                    android:layout_gravity=\"center_horizontal\"\r\n                    android:background=\"@drawable/rectangle\"\r\n                    android:scaleType=\"centerCrop\" />\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/pencil1\"\r\n                    android:layout_width=\"62dp\"\r\n                    android:layout_height=\"41dp\"\r\n                    android:visibility=\"gone\"\r\n                    app:srcCompat=\"@drawable/pencil\" />\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:orientation=\"horizontal\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_marginTop=\"15dp\">\r\n\r\n                <EditText\r\n                    android:id=\"@+id/nameP\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_gravity=\"center_horizontal\"\r\n\r\n                    android:background=\"@null\"\r\n                    android:text=\"Angle Triangle\"\r\n                    android:textColor=\"#fff\"\r\n                    android:textSize=\"21sp\"\r\n                    android:textStyle=\"bold\" />\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/pencil2\"\r\n                    android:layout_width=\"53dp\"\r\n                    android:layout_height=\"32dp\"\r\n                    android:layout_gravity=\"center\"\r\n                    android:layout_weight=\"1\"\r\n                    android:visibility=\"gone\"\r\n                    app:srcCompat=\"@drawable/pencil\" />\r\n            </LinearLayout>\r\n\r\n            <Button\r\n                android:id=\"@+id/btneditDesc\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"38dp\"\r\n                android:layout_gravity=\"end|clip_vertical\"\r\n                android:layout_marginTop=\"12dp\"\r\n                android:layout_marginRight=\"12dp\"\r\n                android:background=\"@drawable/btn_savep\"\r\n                android:text=\"Editar\"\r\n                android:textColor=\"@color/colorSecondary\" />\r\n        </LinearLayout>\r\n\r\n        <androidx.cardview.widget.CardView\r\n            android:layout_width=\"400dp\"\r\n            android:layout_height=\"120dp\"\r\n            android:layout_centerHorizontal=\"true\"\r\n            android:layout_marginTop=\"275dp\">\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:orientation=\"horizontal\"\r\n                android:weightSum=\"2\"\r\n                android:gravity=\"center\">\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"center\"\r\n                    android:orientation=\"vertical\">\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:text=\"Posts\"\r\n                        android:textSize=\"20sp\" />\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/txtPostN\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:paddingTop=\"10dp\"\r\n                        android:text=\"125\"\r\n                        android:textColor=\"@color/green\"\r\n                        android:textSize=\"20sp\"\r\n                        android:textStyle=\"bold\" />\r\n                </LinearLayout>\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"center\"\r\n                    android:orientation=\"vertical\"\r\n                    android:visibility=\"gone\">\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:text=\"Followers\"\r\n                        android:textSize=\"20sp\"\r\n                        android:visibility=\"gone\" />\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:paddingTop=\"10dp\"\r\n                        android:text=\"1205\"\r\n                        android:textColor=\"@color/green\"\r\n                        android:textSize=\"20sp\"\r\n                        android:textStyle=\"bold\"\r\n                        android:visibility=\"gone\" />\r\n                </LinearLayout>\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_weight=\"1\"\r\n                    android:gravity=\"center\"\r\n                    android:orientation=\"vertical\">\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:text=\"Suiguiendo\"\r\n                        android:textSize=\"20sp\" />\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/followingP\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:paddingTop=\"10dp\"\r\n                        android:text=\"360\"\r\n                        android:textColor=\"@color/green\"\r\n                        android:textSize=\"20sp\"\r\n                        android:textStyle=\"bold\" />\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n        </androidx.cardview.widget.CardView>\r\n    </RelativeLayout>\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_gravity=\"center\"\r\n        android:layout_marginLeft=\"20dp\"\r\n        android:layout_marginRight=\"20dp\"\r\n        android:layout_marginTop=\"45dp\"\r\n        android:orientation=\"vertical\"\r\n        >\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:orientation=\"horizontal\"\r\n            android:layout_gravity=\"center\">\r\n\r\n            <EditText\r\n                android:id=\"@+id/progiledescription\"\r\n                android:layout_width=\"285dp\"\r\n                android:layout_height=\"100dp\"\r\n                android:background=\"@color/white\"\r\n                android:hint=\"Descripción:\"\r\n                android:padding=\"10dp\"\r\n                android:textSize=\"15sp\"\r\n\r\n                />\r\n\r\n            <ImageView\r\n                android:id=\"@+id/pencil3\"\r\n                android:layout_width=\"62dp\"\r\n                android:layout_height=\"41dp\"\r\n                android:layout_weight=\"1\"\r\n                android:visibility=\"gone\"\r\n                app:srcCompat=\"@drawable/pencil\" />\r\n        </LinearLayout>\r\n\r\n        <Button\r\n            android:id=\"@+id/btn_saveP\"\r\n            android:layout_width=\"120dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center\"\r\n            android:layout_marginTop=\"15dp\"\r\n            android:background=\"@drawable/btn_scan\"\r\n            android:text=\"Guardar\"\r\n            android:textColor=\"@color/white\"\r\n            android:visibility=\"gone\"\r\n\r\n            />\r\n\r\n    </LinearLayout>\r\n\r\n</LinearLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/fragment_profile_foro.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ app/src/main/res/layout/fragment_profile_foro.xml	(date 1611432385549)
@@ -2,6 +2,7 @@
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 
     xmlns:app="http://schemas.android.com/apk/res-auto"
+    xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:background="#EFE9E9"
@@ -75,12 +76,14 @@
                 android:id="@+id/btneditDesc"
                 android:layout_width="wrap_content"
                 android:layout_height="38dp"
-                android:layout_gravity="end|clip_vertical"
+                android:layout_gravity="end"
                 android:layout_marginTop="12dp"
-                android:layout_marginRight="12dp"
+                android:layout_marginRight="40dp"
                 android:background="@drawable/btn_savep"
                 android:text="Editar"
-                android:textColor="@color/colorSecondary" />
+                android:textColor="@color/colorSecondary"
+                android:visibility="visible"
+                tools:visibility="visible" />
         </LinearLayout>
 
         <androidx.cardview.widget.CardView
Index: app/src/main/AndroidManifest.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.infinitycrop\">\r\n\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.MANAGE_INPUT_DRIVERS\" />\r\n    <uses-permission android:name=\"com.google.android.things.permission.USE_PERIPHERAL_IO\" /> <!-- Permisos Qr -->\r\n    <uses-permission android:name=\"android.permission.CAMERA\" />\r\n    <uses-permission android:name=\"com.android.alarm.permission.SET_ALARM\" />\r\n\r\n    <uses-feature android:name=\"android.hardware.camera\" />\r\n    <uses-feature android:name=\"android.hardware.camera.autofocus\" />\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher\"\r\n        android:theme=\"@style/AppThemeHome\"\r\n        android:screenOrientation=\"portrait\"\r\n        >\r\n        <activity android:name=\".ui.dashboard.EditarClima\" android:screenOrientation=\"portrait\"></activity>\r\n        <activity android:name=\".ui.dashboard.CreateClima\" android:screenOrientation=\"portrait\"/>\r\n        <activity android:name=\".ui.Foro.main.Community.NewPost.PostView\" android:screenOrientation=\"portrait\"/>\r\n        <activity android:name=\".ui.Foro.main.Community.NewPost.CreatePost.CreatePost\" android:screenOrientation=\"portrait\"/>\r\n        <activity android:name=\".ui.Foro.main.Community.CommunityMain\" android:screenOrientation=\"portrait\"/>\r\n        <activity android:name=\".ui.Foro.lets_start.EditCommunity\" android:screenOrientation=\"portrait\"/>\r\n        <activity android:name=\".ui.list_machine.ModifyMachine\" android:screenOrientation=\"portrait\"/>\r\n        <activity android:name=\".ui.Foro.main.ForoMain\" android:screenOrientation=\"portrait\"/>\r\n        <activity android:name=\".ui.Foro.lets_start.AddCommunity\" android:screenOrientation=\"portrait\"/>\r\n        <activity android:name=\".ui.Foro.lets_start.choose_community\" android:screenOrientation=\"portrait\"/>\r\n        <activity android:name=\".ui.Foro.lets_start.welcome_forum\" android:screenOrientation=\"portrait\"/>\r\n        <activity android:name=\".ui.Foro.main.Profile.EditProfileActivity\" android:screenOrientation=\"portrait\"/>\r\n        <activity android:name=\".MainActivity\" />\r\n\r\n        <service android:name=\".ui.service.ServicioMqtt\" />\r\n        <service android:name=\".ui.service.ServicioNotificaciones\" />\r\n\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity\" android:screenOrientation=\"portrait\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.SET_ALARM\" />\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\".ui.profile.settings.AboutInfinityCrap\" android:screenOrientation=\"portrait\"/>\r\n        <activity android:name=\".ui.profile.settings.HelpProfile\" android:screenOrientation=\"portrait\"/>\r\n        <activity android:name=\".ui.list_machine.MainActivityMachineList\" android:screenOrientation=\"portrait\"/>\r\n        <activity android:name=\".ui.list_machine.AddMachine\" android:screenOrientation=\"portrait\"/>\r\n        <activity android:name=\".ui.profile.settings.ModifyProfile\" android:screenOrientation=\"portrait\"/>\r\n        <activity android:name=\".ui.logmail.RegisterActivity\" android:screenOrientation=\"portrait\"/>\r\n        <activity android:name=\".ui.logmail.LoginActivity\" android:screenOrientation=\"portrait\"/>\r\n        <activity android:name=\".ui.list_machine.CaptureAct\" android:screenOrientation=\"portrait\"/>\r\n        <activity android:name=\".ui.login.LogActivity\" android:screenOrientation=\"portrait\"/>\r\n        <activity android:name=\".ui.LoadAnimations.IntroductoryActivity2\" android:screenOrientation=\"portrait\"/>\r\n        <activity android:name=\".ui.LoadAnimations.LogprimeraActivity\" android:screenOrientation=\"portrait\"/>\r\n        <activity android:name=\".ui.graphics.GraphicsActivity\" android:screenOrientation=\"portrait\"/>\r\n        <activity android:name=\".ui.MachineControl.planta1\" android:screenOrientation=\"portrait\"/>\r\n        <activity android:name=\".ui.MachineControl.planta2\" android:screenOrientation=\"portrait\" />\r\n        <activity android:name=\".ui.notifications.NotificacionesActivity\" android:screenOrientation=\"portrait\"/>\r\n        <activity android:name=\".ui.guiabotanica.GuiaActivity\" android:screenOrientation=\"portrait\"/>\r\n        <activity android:name=\".ui.guiabotanica.PlantActivity\" android:screenOrientation=\"portrait\"/>\r\n\r\n        <meta-data\r\n            android:name=\"com.google.android.geo.API_KEY\"\r\n            android:value=\"@string/google_maps_key\" />\r\n        <meta-data\r\n            android:name=\"com.facebook.sdk.ApplicationId\"\r\n            android:value=\"@string/facebook_app_id\"\r\n            tools:replace=\"android:value\" />\r\n        <meta-data\r\n            android:name=\"preloaded_fonts\"\r\n            android:resource=\"@array/preloaded_fonts\" />\r\n\r\n        <activity\r\n            android:name=\"com.theartofdev.edmodo.cropper.CropImageActivity\"\r\n            android:theme=\"@style/Base.Theme.AppCompat\" android:screenOrientation=\"portrait\"/>\r\n    </application>\r\n\r\n</manifest>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/AndroidManifest.xml	(revision 48dde50a0540859aac61875e03b1df541e856b6a)
+++ app/src/main/AndroidManifest.xml	(date 1611261313454)
@@ -21,27 +21,25 @@
         android:icon="@mipmap/ic_launcher"
         android:label="@string/app_name"
         android:roundIcon="@mipmap/ic_launcher"
-        android:theme="@style/AppThemeHome"
-        android:screenOrientation="portrait"
-        >
-        <activity android:name=".ui.dashboard.EditarClima" android:screenOrientation="portrait"></activity>
-        <activity android:name=".ui.dashboard.CreateClima" android:screenOrientation="portrait"/>
-        <activity android:name=".ui.Foro.main.Community.NewPost.PostView" android:screenOrientation="portrait"/>
-        <activity android:name=".ui.Foro.main.Community.NewPost.CreatePost.CreatePost" android:screenOrientation="portrait"/>
-        <activity android:name=".ui.Foro.main.Community.CommunityMain" android:screenOrientation="portrait"/>
-        <activity android:name=".ui.Foro.lets_start.EditCommunity" android:screenOrientation="portrait"/>
-        <activity android:name=".ui.list_machine.ModifyMachine" android:screenOrientation="portrait"/>
-        <activity android:name=".ui.Foro.main.ForoMain" android:screenOrientation="portrait"/>
-        <activity android:name=".ui.Foro.lets_start.AddCommunity" android:screenOrientation="portrait"/>
-        <activity android:name=".ui.Foro.lets_start.choose_community" android:screenOrientation="portrait"/>
-        <activity android:name=".ui.Foro.lets_start.welcome_forum" android:screenOrientation="portrait"/>
-        <activity android:name=".ui.Foro.main.Profile.EditProfileActivity" android:screenOrientation="portrait"/>
+        android:theme="@style/AppThemeHome">
+        <activity android:name=".ui.dashboard.EditarClima"></activity>
+        <activity android:name=".ui.dashboard.CreateClima" />
+        <activity android:name=".ui.Foro.main.Community.NewPost.PostView" />
+        <activity android:name=".ui.Foro.main.Community.NewPost.CreatePost.CreatePost" />
+        <activity android:name=".ui.Foro.main.Community.CommunityMain" />
+        <activity android:name=".ui.Foro.lets_start.EditCommunity" />
+        <activity android:name=".ui.list_machine.ModifyMachine" />
+        <activity android:name=".ui.Foro.main.ForoMain" />
+        <activity android:name=".ui.Foro.lets_start.AddCommunity" />
+        <activity android:name=".ui.Foro.lets_start.choose_community" />
+        <activity android:name=".ui.Foro.lets_start.welcome_forum" />
+        <activity android:name=".ui.Foro.main.Profile.EditProfileActivity"/>
         <activity android:name=".MainActivity" />
 
         <service android:name=".ui.service.ServicioMqtt" />
         <service android:name=".ui.service.ServicioNotificaciones" />
 
-        <activity android:name=".ui.LoadAnimations.IntroductoryActivity" android:screenOrientation="portrait">
+        <activity android:name=".ui.LoadAnimations.IntroductoryActivity">
             <intent-filter>
                 <action android:name="android.intent.action.SET_ALARM" />
                 <action android:name="android.intent.action.MAIN" />
@@ -49,23 +47,23 @@
                 <category android:name="android.intent.category.LAUNCHER" />
             </intent-filter>
         </activity>
-        <activity android:name=".ui.profile.settings.AboutInfinityCrap" android:screenOrientation="portrait"/>
-        <activity android:name=".ui.profile.settings.HelpProfile" android:screenOrientation="portrait"/>
-        <activity android:name=".ui.list_machine.MainActivityMachineList" android:screenOrientation="portrait"/>
-        <activity android:name=".ui.list_machine.AddMachine" android:screenOrientation="portrait"/>
-        <activity android:name=".ui.profile.settings.ModifyProfile" android:screenOrientation="portrait"/>
-        <activity android:name=".ui.logmail.RegisterActivity" android:screenOrientation="portrait"/>
-        <activity android:name=".ui.logmail.LoginActivity" android:screenOrientation="portrait"/>
-        <activity android:name=".ui.list_machine.CaptureAct" android:screenOrientation="portrait"/>
-        <activity android:name=".ui.login.LogActivity" android:screenOrientation="portrait"/>
-        <activity android:name=".ui.LoadAnimations.IntroductoryActivity2" android:screenOrientation="portrait"/>
-        <activity android:name=".ui.LoadAnimations.LogprimeraActivity" android:screenOrientation="portrait"/>
-        <activity android:name=".ui.graphics.GraphicsActivity" android:screenOrientation="portrait"/>
-        <activity android:name=".ui.MachineControl.planta1" android:screenOrientation="portrait"/>
-        <activity android:name=".ui.MachineControl.planta2" android:screenOrientation="portrait" />
-        <activity android:name=".ui.notifications.NotificacionesActivity" android:screenOrientation="portrait"/>
-        <activity android:name=".ui.guiabotanica.GuiaActivity" android:screenOrientation="portrait"/>
-        <activity android:name=".ui.guiabotanica.PlantActivity" android:screenOrientation="portrait"/>
+        <activity android:name=".ui.profile.settings.AboutInfinityCrap" />
+        <activity android:name=".ui.profile.settings.HelpProfile" />
+        <activity android:name=".ui.list_machine.MainActivityMachineList" />
+        <activity android:name=".ui.list_machine.AddMachine" />
+        <activity android:name=".ui.profile.settings.ModifyProfile" />
+        <activity android:name=".ui.logmail.RegisterActivity" />
+        <activity android:name=".ui.logmail.LoginActivity" />
+        <activity android:name=".ui.list_machine.CaptureAct" />
+        <activity android:name=".ui.login.LogActivity" />
+        <activity android:name=".ui.LoadAnimations.IntroductoryActivity2" />
+        <activity android:name=".ui.LoadAnimations.LogprimeraActivity" />
+        <activity android:name=".ui.graphics.GraphicsActivity" />
+        <activity android:name=".ui.MachineControl.planta1" />
+        <activity android:name=".ui.MachineControl.planta2"/>
+        <activity android:name=".ui.notifications.NotificacionesActivity" />
+        <activity android:name=".ui.guiabotanica.GuiaActivity" />
+        <activity android:name=".ui.guiabotanica.PlantActivity" />
 
         <meta-data
             android:name="com.google.android.geo.API_KEY"
@@ -80,7 +78,7 @@
 
         <activity
             android:name="com.theartofdev.edmodo.cropper.CropImageActivity"
-            android:theme="@style/Base.Theme.AppCompat" android:screenOrientation="portrait"/>
+            android:theme="@style/Base.Theme.AppCompat" />
     </application>
 
 </manifest>
\ No newline at end of file
